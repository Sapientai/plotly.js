/**
* plotly.js (mapbox - minified) v3.0.0-rc.2
* Copyright 2012-2025, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(
 function(root, factory) {
  if (typeof module === "object" && module.exports) {
   module.exports = factory();
  } else {
   root.moduleName = factory();
  }
} (typeof self !== "undefined" ? self : this, () => {
"use strict";var Plotly=(()=>{var n7=Object.defineProperty;var NX=Object.getOwnPropertyDescriptor;var BX=Object.getOwnPropertyNames;var OX=Object.prototype.hasOwnProperty;var o7=(e,t)=>()=>(e&&(t=e(e=0)),t);var ve=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var UX=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of BX(t))!OX.call(e,a)&&a!==r&&n7(e,a,{get:()=>t[a],enumerable:!(i=NX(t,a))||i.enumerable});return e};var VX=e=>UX(n7({},"__esModule",{value:!0}),e);var N1=ve(s7=>{"use strict";s7.version="3.0.0-rc.2"});var u7=ve((l7,B1)=>{(function(t,r,i){r[t]=r[t]||i(),typeof B1!="undefined"&&B1.exports?B1.exports=r[t]:typeof define=="function"&&define.amd&&define(function(){return r[t]})})("Promise",typeof window!="undefined"?window:l7,function(){"use strict";var t,r,i,a=Object.prototype.toString,s=typeof setImmediate!="undefined"?function(q){return setImmediate(q)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(q,B,z,O){return Object.defineProperty(q,B,{value:z,writable:!0,configurable:O!==!1})}}catch(I){t=function(B,z,O){return B[z]=O,B}}i=function(){var q,B,z;function O(H,V){this.fn=H,this.self=V,this.next=void 0}return{add:function(V,W){z=new O(V,W),B?B.next=z:q=z,B=z,z=void 0},drain:function(){var V=q;for(q=B=r=void 0;V;)V.fn.call(V.self),V=V.next}}}();function l(I,q){i.add(I,q),r||(r=s(i.drain))}function f(I){var q,B=typeof I;return I!=null&&(B=="object"||B=="function")&&(q=I.then),typeof q=="function"?q:!1}function h(){for(var I=0;I<this.chain.length;I++)v(this,this.state===1?this.chain[I].success:this.chain[I].failure,this.chain[I]);this.chain.length=0}function v(I,q,B){var z,O;try{q===!1?B.reject(I.msg):(q===!0?z=I.msg:z=q.call(void 0,I.msg),z===B.promise?B.reject(TypeError("Promise-chain cycle")):(O=f(z))?O.call(z,B.resolve,B.reject):B.resolve(z))}catch(H){B.reject(H)}}function m(I){var q,B=this;if(!B.triggered){B.triggered=!0,B.def&&(B=B.def);try{(q=f(I))?l(function(){var z=new S(B);try{q.call(I,function(){m.apply(z,arguments)},function(){b.apply(z,arguments)})}catch(O){b.call(z,O)}}):(B.msg=I,B.state=1,B.chain.length>0&&l(h,B))}catch(z){b.call(new S(B),z)}}}function b(I){var q=this;q.triggered||(q.triggered=!0,q.def&&(q=q.def),q.msg=I,q.state=2,q.chain.length>0&&l(h,q))}function T(I,q,B,z){for(var O=0;O<q.length;O++)(function(V){I.resolve(q[V]).then(function(K){B(V,K)},z)})(O)}function S(I){this.def=I,this.triggered=!1}function C(I){this.promise=I,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function P(I){if(typeof I!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var q=new C(this);this.then=function(z,O){var H={success:typeof z=="function"?z:!0,failure:typeof O=="function"?O:!1};return H.promise=new this.constructor(function(W,K){if(typeof W!="function"||typeof K!="function")throw TypeError("Not a function");H.resolve=W,H.reject=K}),q.chain.push(H),q.state!==0&&l(h,q),H.promise},this.catch=function(z){return this.then(void 0,z)};try{I.call(void 0,function(z){m.call(q,z)},function(z){b.call(q,z)})}catch(B){b.call(q,B)}}var E=t({},"constructor",P,!1);return P.prototype=E,t(E,"__NPO__",0,!1),t(P,"resolve",function(q){var B=this;return q&&typeof q=="object"&&q.__NPO__===1?q:new B(function(O,H){if(typeof O!="function"||typeof H!="function")throw TypeError("Not a function");O(q)})}),t(P,"reject",function(q){return new this(function(z,O){if(typeof z!="function"||typeof O!="function")throw TypeError("Not a function");O(q)})}),t(P,"all",function(q){var B=this;return a.call(q)!="[object Array]"?B.reject(TypeError("Not an array")):q.length===0?B.resolve([]):new B(function(O,H){if(typeof O!="function"||typeof H!="function")throw TypeError("Not a function");var V=q.length,W=Array(V),K=0;T(B,q,function(oe,ne){W[oe]=ne,++K===V&&O(W)},H)})}),t(P,"race",function(q){var B=this;return a.call(q)!="[object Array]"?B.reject(TypeError("Not an array")):new B(function(O,H){if(typeof O!="function"||typeof H!="function")throw TypeError("Not a function");T(B,q,function(W,K){O(K)},H)})}),P})});var ja=ve((sme,O1)=>{(function(){var e={version:"3.8.2"},t=[].slice,r=function(y){return t.call(y)},i=self.document;function a(y){return y&&(y.ownerDocument||y.document||y).documentElement}function s(y){return y&&(y.ownerDocument&&y.ownerDocument.defaultView||y.document&&y||y.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(y){r=function(M){for(var D=M.length,N=new Array(D);D--;)N[D]=M[D];return N}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(y){var l=this.Element.prototype,f=l.setAttribute,h=l.setAttributeNS,v=this.CSSStyleDeclaration.prototype,m=v.setProperty;l.setAttribute=function(M,D){f.call(this,M,D+"")},l.setAttributeNS=function(M,D,N){h.call(this,M,D,N+"")},v.setProperty=function(M,D,N){m.call(this,M,D+"",N)}}e.ascending=b;function b(y,M){return y<M?-1:y>M?1:y>=M?0:NaN}e.descending=function(y,M){return M<y?-1:M>y?1:M>=y?0:NaN},e.min=function(y,M){var D=-1,N=y.length,U,Z;if(arguments.length===1){for(;++D<N;)if((Z=y[D])!=null&&Z>=Z){U=Z;break}for(;++D<N;)(Z=y[D])!=null&&U>Z&&(U=Z)}else{for(;++D<N;)if((Z=M.call(y,y[D],D))!=null&&Z>=Z){U=Z;break}for(;++D<N;)(Z=M.call(y,y[D],D))!=null&&U>Z&&(U=Z)}return U},e.max=function(y,M){var D=-1,N=y.length,U,Z;if(arguments.length===1){for(;++D<N;)if((Z=y[D])!=null&&Z>=Z){U=Z;break}for(;++D<N;)(Z=y[D])!=null&&Z>U&&(U=Z)}else{for(;++D<N;)if((Z=M.call(y,y[D],D))!=null&&Z>=Z){U=Z;break}for(;++D<N;)(Z=M.call(y,y[D],D))!=null&&Z>U&&(U=Z)}return U},e.extent=function(y,M){var D=-1,N=y.length,U,Z,$;if(arguments.length===1){for(;++D<N;)if((Z=y[D])!=null&&Z>=Z){U=$=Z;break}for(;++D<N;)(Z=y[D])!=null&&(U>Z&&(U=Z),$<Z&&($=Z))}else{for(;++D<N;)if((Z=M.call(y,y[D],D))!=null&&Z>=Z){U=$=Z;break}for(;++D<N;)(Z=M.call(y,y[D],D))!=null&&(U>Z&&(U=Z),$<Z&&($=Z))}return[U,$]};function T(y){return y===null?NaN:+y}function S(y){return!isNaN(y)}e.sum=function(y,M){var D=0,N=y.length,U,Z=-1;if(arguments.length===1)for(;++Z<N;)S(U=+y[Z])&&(D+=U);else for(;++Z<N;)S(U=+M.call(y,y[Z],Z))&&(D+=U);return D},e.mean=function(y,M){var D=0,N=y.length,U,Z=-1,$=N;if(arguments.length===1)for(;++Z<N;)S(U=T(y[Z]))?D+=U:--$;else for(;++Z<N;)S(U=T(M.call(y,y[Z],Z)))?D+=U:--$;if($)return D/$},e.quantile=function(y,M){var D=(y.length-1)*M+1,N=Math.floor(D),U=+y[N-1],Z=D-N;return Z?U+Z*(y[N]-U):U},e.median=function(y,M){var D=[],N=y.length,U,Z=-1;if(arguments.length===1)for(;++Z<N;)S(U=T(y[Z]))&&D.push(U);else for(;++Z<N;)S(U=T(M.call(y,y[Z],Z)))&&D.push(U);if(D.length)return e.quantile(D.sort(b),.5)},e.variance=function(y,M){var D=y.length,N=0,U,Z,$=0,X=-1,ae=0;if(arguments.length===1)for(;++X<D;)S(U=T(y[X]))&&(Z=U-N,N+=Z/++ae,$+=Z*(U-N));else for(;++X<D;)S(U=T(M.call(y,y[X],X)))&&(Z=U-N,N+=Z/++ae,$+=Z*(U-N));if(ae>1)return $/(ae-1)},e.deviation=function(){var y=e.variance.apply(this,arguments);return y&&Math.sqrt(y)};function C(y){return{left:function(M,D,N,U){for(arguments.length<3&&(N=0),arguments.length<4&&(U=M.length);N<U;){var Z=N+U>>>1;y(M[Z],D)<0?N=Z+1:U=Z}return N},right:function(M,D,N,U){for(arguments.length<3&&(N=0),arguments.length<4&&(U=M.length);N<U;){var Z=N+U>>>1;y(M[Z],D)>0?U=Z:N=Z+1}return N}}}var P=C(b);e.bisectLeft=P.left,e.bisect=e.bisectRight=P.right,e.bisector=function(y){return C(y.length===1?function(M,D){return b(y(M),D)}:y)},e.shuffle=function(y,M,D){(N=arguments.length)<3&&(D=y.length,N<2&&(M=0));for(var N=D-M,U,Z;N;)Z=Math.random()*N--|0,U=y[N+M],y[N+M]=y[Z+M],y[Z+M]=U;return y},e.permute=function(y,M){for(var D=M.length,N=new Array(D);D--;)N[D]=y[M[D]];return N},e.pairs=function(y){for(var M=0,D=y.length-1,N,U=y[0],Z=new Array(D<0?0:D);M<D;)Z[M]=[N=U,U=y[++M]];return Z},e.transpose=function(y){if(!(Z=y.length))return[];for(var M=-1,D=e.min(y,E),N=new Array(D);++M<D;)for(var U=-1,Z,$=N[M]=new Array(Z);++U<Z;)$[U]=y[U][M];return N};function E(y){return y.length}e.zip=function(){return e.transpose(arguments)},e.keys=function(y){var M=[];for(var D in y)M.push(D);return M},e.values=function(y){var M=[];for(var D in y)M.push(y[D]);return M},e.entries=function(y){var M=[];for(var D in y)M.push({key:D,value:y[D]});return M},e.merge=function(y){for(var M=y.length,D,N=-1,U=0,Z,$;++N<M;)U+=y[N].length;for(Z=new Array(U);--M>=0;)for($=y[M],D=$.length;--D>=0;)Z[--U]=$[D];return Z};var I=Math.abs;e.range=function(y,M,D){if(arguments.length<3&&(D=1,arguments.length<2&&(M=y,y=0)),(M-y)/D===1/0)throw new Error("infinite range");var N=[],U=q(I(D)),Z=-1,$;if(y*=U,M*=U,D*=U,D<0)for(;($=y+D*++Z)>M;)N.push($/U);else for(;($=y+D*++Z)<M;)N.push($/U);return N};function q(y){for(var M=1;y*M%1;)M*=10;return M}function B(y,M){for(var D in M)Object.defineProperty(y.prototype,D,{value:M[D],enumerable:!1})}e.map=function(y,M){var D=new z;if(y instanceof z)y.forEach(function(X,ae){D.set(X,ae)});else if(Array.isArray(y)){var N=-1,U=y.length,Z;if(arguments.length===1)for(;++N<U;)D.set(N,y[N]);else for(;++N<U;)D.set(M.call(y,Z=y[N],N),Z)}else for(var $ in y)D.set($,y[$]);return D};function z(){this._=Object.create(null)}var O="__proto__",H="\0";B(z,{has:K,get:function(y){return this._[V(y)]},set:function(y,M){return this._[V(y)]=M},remove:re,keys:oe,values:function(){var y=[];for(var M in this._)y.push(this._[M]);return y},entries:function(){var y=[];for(var M in this._)y.push({key:W(M),value:this._[M]});return y},size:ne,empty:he,forEach:function(y){for(var M in this._)y.call(this,W(M),this._[M])}});function V(y){return(y+="")===O||y[0]===H?H+y:y}function W(y){return(y+="")[0]===H?y.slice(1):y}function K(y){return V(y)in this._}function re(y){return(y=V(y))in this._&&delete this._[y]}function oe(){var y=[];for(var M in this._)y.push(W(M));return y}function ne(){var y=0;for(var M in this._)++y;return y}function he(){for(var y in this._)return!1;return!0}e.nest=function(){var y={},M=[],D=[],N,U;function Z(X,ae,pe){if(pe>=M.length)return U?U.call(y,ae):N?ae.sort(N):ae;for(var _e=-1,Pe=ae.length,Le=M[pe++],Je,nt,ze,Ue=new z,je;++_e<Pe;)(je=Ue.get(Je=Le(nt=ae[_e])))?je.push(nt):Ue.set(Je,[nt]);return X?(nt=X(),ze=function(st,it){nt.set(st,Z(X,it,pe))}):(nt={},ze=function(st,it){nt[st]=Z(X,it,pe)}),Ue.forEach(ze),nt}function $(X,ae){if(ae>=M.length)return X;var pe=[],_e=D[ae++];return X.forEach(function(Pe,Le){pe.push({key:Pe,values:$(Le,ae)})}),_e?pe.sort(function(Pe,Le){return _e(Pe.key,Le.key)}):pe}return y.map=function(X,ae){return Z(ae,X,0)},y.entries=function(X){return $(Z(e.map,X,0),0)},y.key=function(X){return M.push(X),y},y.sortKeys=function(X){return D[M.length-1]=X,y},y.sortValues=function(X){return N=X,y},y.rollup=function(X){return U=X,y},y},e.set=function(y){var M=new de;if(y)for(var D=0,N=y.length;D<N;++D)M.add(y[D]);return M};function de(){this._=Object.create(null)}B(de,{has:K,add:function(y){return this._[V(y+="")]=!0,y},remove:re,values:oe,size:ne,empty:he,forEach:function(y){for(var M in this._)y.call(this,W(M))}}),e.behavior={};function Ee(y){return y}e.rebind=function(y,M){for(var D=1,N=arguments.length,U;++D<N;)y[U=arguments[D]]=ke(y,M,M[U]);return y};function ke(y,M,D){return function(){var N=D.apply(M,arguments);return N===M?y:N}}function Te(y,M){if(M in y)return M;M=M.charAt(0).toUpperCase()+M.slice(1);for(var D=0,N=ye.length;D<N;++D){var U=ye[D]+M;if(U in y)return U}}var ye=["webkit","ms","moz","Moz","o","O"];function Ae(){}e.dispatch=function(){for(var y=new Me,M=-1,D=arguments.length;++M<D;)y[arguments[M]]=De(y);return y};function Me(){}Me.prototype.on=function(y,M){var D=y.indexOf("."),N="";if(D>=0&&(N=y.slice(D+1),y=y.slice(0,D)),y)return arguments.length<2?this[y].on(N):this[y].on(N,M);if(arguments.length===2){if(M==null)for(y in this)this.hasOwnProperty(y)&&this[y].on(N,null);return this}};function De(y){var M=[],D=new z;function N(){for(var U=M,Z=-1,$=U.length,X;++Z<$;)(X=U[Z].on)&&X.apply(this,arguments);return y}return N.on=function(U,Z){var $=D.get(U),X;return arguments.length<2?$&&$.on:($&&($.on=null,M=M.slice(0,X=M.indexOf($)).concat(M.slice(X+1)),D.remove(U)),Z&&M.push(D.set(U,{on:Z})),y)},N}e.event=null;function at(){e.event.preventDefault()}function pt(){for(var y=e.event,M;M=y.sourceEvent;)y=M;return y}function lt(y){for(var M=new Me,D=0,N=arguments.length;++D<N;)M[arguments[D]]=De(M);return M.of=function(U,Z){return function($){try{var X=$.sourceEvent=e.event;$.target=y,e.event=$,M[$.type].apply(U,Z)}finally{e.event=X}}},M}e.requote=function(y){return y.replace(ut,"\\$&")};var ut=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ye={}.__proto__?function(y,M){y.__proto__=M}:function(y,M){for(var D in M)y[D]=M[D]};function xt(y){return Ye(y,mt),y}var rt=function(y,M){return M.querySelector(y)},Tt=function(y,M){return M.querySelectorAll(y)},St=function(y,M){var D=y.matches||y[Te(y,"matchesSelector")];return St=function(N,U){return D.call(N,U)},St(y,M)};typeof Sizzle=="function"&&(rt=function(y,M){return Sizzle(y,M)[0]||null},Tt=Sizzle,St=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var mt=e.selection.prototype=[];mt.select=function(y){var M=[],D,N,U,Z;y=ge(y);for(var $=-1,X=this.length;++$<X;){M.push(D=[]),D.parentNode=(U=this[$]).parentNode;for(var ae=-1,pe=U.length;++ae<pe;)(Z=U[ae])?(D.push(N=y.call(Z,Z.__data__,ae,$)),N&&"__data__"in Z&&(N.__data__=Z.__data__)):D.push(null)}return xt(M)};function ge(y){return typeof y=="function"?y:function(){return rt(y,this)}}mt.selectAll=function(y){var M=[],D,N;y=Re(y);for(var U=-1,Z=this.length;++U<Z;)for(var $=this[U],X=-1,ae=$.length;++X<ae;)(N=$[X])&&(M.push(D=r(y.call(N,N.__data__,X,U))),D.parentNode=N);return xt(M)};function Re(y){return typeof y=="function"?y:function(){return Tt(y,this)}}var xe="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:et,qualify:function(y){var M=y.indexOf(":"),D=y;return M>=0&&(D=y.slice(0,M))!=="xmlns"&&(y=y.slice(M+1)),et.hasOwnProperty(D)?{space:et[D],local:y}:y}},mt.attr=function(y,M){if(arguments.length<2){if(typeof y=="string"){var D=this.node();return y=e.ns.qualify(y),y.local?D.getAttributeNS(y.space,y.local):D.getAttribute(y)}for(M in y)this.each(ht(M,y[M]));return this}return this.each(ht(y,M))};function ht(y,M){y=e.ns.qualify(y);function D(){this.removeAttribute(y)}function N(){this.removeAttributeNS(y.space,y.local)}function U(){this.setAttribute(y,M)}function Z(){this.setAttributeNS(y.space,y.local,M)}function $(){var ae=M.apply(this,arguments);ae==null?this.removeAttribute(y):this.setAttribute(y,ae)}function X(){var ae=M.apply(this,arguments);ae==null?this.removeAttributeNS(y.space,y.local):this.setAttributeNS(y.space,y.local,ae)}return M==null?y.local?N:D:typeof M=="function"?y.local?X:$:y.local?Z:U}function tt(y){return y.trim().replace(/\s+/g," ")}mt.classed=function(y,M){if(arguments.length<2){if(typeof y=="string"){var D=this.node(),N=(y=qt(y)).length,U=-1;if(M=D.classList){for(;++U<N;)if(!M.contains(y[U]))return!1}else for(M=D.getAttribute("class");++U<N;)if(!Rt(y[U]).test(M))return!1;return!0}for(M in y)this.each(Jt(M,y[M]));return this}return this.each(Jt(y,M))};function Rt(y){return new RegExp("(?:^|\\s+)"+e.requote(y)+"(?:\\s+|$)","g")}function qt(y){return(y+"").trim().split(/^|\s+/)}function Jt(y,M){y=qt(y).map(Ht);var D=y.length;function N(){for(var Z=-1;++Z<D;)y[Z](this,M)}function U(){for(var Z=-1,$=M.apply(this,arguments);++Z<D;)y[Z](this,$)}return typeof M=="function"?U:N}function Ht(y){var M=Rt(y);return function(D,N){if(U=D.classList)return N?U.add(y):U.remove(y);var U=D.getAttribute("class")||"";N?(M.lastIndex=0,M.test(U)||D.setAttribute("class",tt(U+" "+y))):D.setAttribute("class",tt(U.replace(M," ")))}}mt.style=function(y,M,D){var N=arguments.length;if(N<3){if(typeof y!="string"){N<2&&(M="");for(D in y)this.each(ar(D,y[D],M));return this}if(N<2){var U=this.node();return s(U).getComputedStyle(U,null).getPropertyValue(y)}D=""}return this.each(ar(y,M,D))};function ar(y,M,D){function N(){this.style.removeProperty(y)}function U(){this.style.setProperty(y,M,D)}function Z(){var $=M.apply(this,arguments);$==null?this.style.removeProperty(y):this.style.setProperty(y,$,D)}return M==null?N:typeof M=="function"?Z:U}mt.property=function(y,M){if(arguments.length<2){if(typeof y=="string")return this.node()[y];for(M in y)this.each(kt(M,y[M]));return this}return this.each(kt(y,M))};function kt(y,M){function D(){delete this[y]}function N(){this[y]=M}function U(){var Z=M.apply(this,arguments);Z==null?delete this[y]:this[y]=Z}return M==null?D:typeof M=="function"?U:N}mt.text=function(y){return arguments.length?this.each(typeof y=="function"?function(){var M=y.apply(this,arguments);this.textContent=M==null?"":M}:y==null?function(){this.textContent=""}:function(){this.textContent=y}):this.node().textContent},mt.html=function(y){return arguments.length?this.each(typeof y=="function"?function(){var M=y.apply(this,arguments);this.innerHTML=M==null?"":M}:y==null?function(){this.innerHTML=""}:function(){this.innerHTML=y}):this.node().innerHTML},mt.append=function(y){return y=zt(y),this.select(function(){return this.appendChild(y.apply(this,arguments))})};function zt(y){function M(){var N=this.ownerDocument,U=this.namespaceURI;return U===xe&&N.documentElement.namespaceURI===xe?N.createElement(y):N.createElementNS(U,y)}function D(){return this.ownerDocument.createElementNS(y.space,y.local)}return typeof y=="function"?y:(y=e.ns.qualify(y)).local?D:M}mt.insert=function(y,M){return y=zt(y),M=ge(M),this.select(function(){return this.insertBefore(y.apply(this,arguments),M.apply(this,arguments)||null)})},mt.remove=function(){return this.each(_r)};function _r(){var y=this.parentNode;y&&y.removeChild(this)}mt.data=function(y,M){var D=-1,N=this.length,U,Z;if(!arguments.length){for(y=new Array(N=(U=this[0]).length);++D<N;)(Z=U[D])&&(y[D]=Z.__data__);return y}function $(_e,Pe){var Le,Je=_e.length,nt=Pe.length,ze=Math.min(Je,nt),Ue=new Array(nt),je=new Array(nt),st=new Array(Je),it,We;if(M){var Bt=new z,nr=new Array(Je),ur;for(Le=-1;++Le<Je;)(it=_e[Le])&&(Bt.has(ur=M.call(it,it.__data__,Le))?st[Le]=it:Bt.set(ur,it),nr[Le]=ur);for(Le=-1;++Le<nt;)(it=Bt.get(ur=M.call(Pe,We=Pe[Le],Le)))?it!==!0&&(Ue[Le]=it,it.__data__=We):je[Le]=rr(We),Bt.set(ur,!0);for(Le=-1;++Le<Je;)Le in nr&&Bt.get(nr[Le])!==!0&&(st[Le]=_e[Le])}else{for(Le=-1;++Le<ze;)it=_e[Le],We=Pe[Le],it?(it.__data__=We,Ue[Le]=it):je[Le]=rr(We);for(;Le<nt;++Le)je[Le]=rr(Pe[Le]);for(;Le<Je;++Le)st[Le]=_e[Le]}je.update=Ue,je.parentNode=Ue.parentNode=st.parentNode=_e.parentNode,X.push(je),ae.push(Ue),pe.push(st)}var X=Cr([]),ae=xt([]),pe=xt([]);if(typeof y=="function")for(;++D<N;)$(U=this[D],y.call(U,U.parentNode.__data__,D));else for(;++D<N;)$(U=this[D],y);return ae.enter=function(){return X},ae.exit=function(){return pe},ae};function rr(y){return{__data__:y}}mt.datum=function(y){return arguments.length?this.property("__data__",y):this.property("__data__")},mt.filter=function(y){var M=[],D,N,U;typeof y!="function"&&(y=Be(y));for(var Z=0,$=this.length;Z<$;Z++){M.push(D=[]),D.parentNode=(N=this[Z]).parentNode;for(var X=0,ae=N.length;X<ae;X++)(U=N[X])&&y.call(U,U.__data__,X,Z)&&D.push(U)}return xt(M)};function Be(y){return function(){return St(this,y)}}mt.order=function(){for(var y=-1,M=this.length;++y<M;)for(var D=this[y],N=D.length-1,U=D[N],Z;--N>=0;)(Z=D[N])&&(U&&U!==Z.nextSibling&&U.parentNode.insertBefore(Z,U),U=Z);return this},mt.sort=function(y){y=vt.apply(this,arguments);for(var M=-1,D=this.length;++M<D;)this[M].sort(y);return this.order()};function vt(y){return arguments.length||(y=b),function(M,D){return M&&D?y(M.__data__,D.__data__):!M-!D}}mt.each=function(y){return gt(this,function(M,D,N){y.call(M,M.__data__,D,N)})};function gt(y,M){for(var D=0,N=y.length;D<N;D++)for(var U=y[D],Z=0,$=U.length,X;Z<$;Z++)(X=U[Z])&&M(X,Z,D);return y}mt.call=function(y){var M=r(arguments);return y.apply(M[0]=this,M),this},mt.empty=function(){return!this.node()},mt.node=function(){for(var y=0,M=this.length;y<M;y++)for(var D=this[y],N=0,U=D.length;N<U;N++){var Z=D[N];if(Z)return Z}return null},mt.size=function(){var y=0;return gt(this,function(){++y}),y};function Cr(y){return Ye(y,pr),y}var pr=[];e.selection.enter=Cr,e.selection.enter.prototype=pr,pr.append=mt.append,pr.empty=mt.empty,pr.node=mt.node,pr.call=mt.call,pr.size=mt.size,pr.select=function(y){for(var M=[],D,N,U,Z,$,X=-1,ae=this.length;++X<ae;){U=(Z=this[X]).update,M.push(D=[]),D.parentNode=Z.parentNode;for(var pe=-1,_e=Z.length;++pe<_e;)($=Z[pe])?(D.push(U[pe]=N=y.call(Z.parentNode,$.__data__,pe,X)),N.__data__=$.__data__):D.push(null)}return xt(M)},pr.insert=function(y,M){return arguments.length<2&&(M=bt(this)),mt.insert.call(this,y,M)};function bt(y){var M,D;return function(N,U,Z){var $=y[Z].update,X=$.length,ae;for(Z!=D&&(D=Z,M=0),U>=M&&(M=U+1);!(ae=$[M])&&++M<X;);return ae}}e.select=function(y){var M;return typeof y=="string"?(M=[rt(y,i)],M.parentNode=i.documentElement):(M=[y],M.parentNode=a(y)),xt([M])},e.selectAll=function(y){var M;return typeof y=="string"?(M=r(Tt(y,i)),M.parentNode=i.documentElement):(M=r(y),M.parentNode=null),xt([M])},mt.on=function(y,M,D){var N=arguments.length;if(N<3){if(typeof y!="string"){N<2&&(M=!1);for(D in y)this.each(wt(D,y[D],M));return this}if(N<2)return(N=this.node()["__on"+y])&&N._;D=!1}return this.each(wt(y,M,D))};function wt(y,M,D){var N="__on"+y,U=y.indexOf("."),Z=Kt;U>0&&(y=y.slice(0,U));var $=Ut.get(y);$&&(y=$,Z=Gt);function X(){var _e=this[N];_e&&(this.removeEventListener(y,_e,_e.$),delete this[N])}function ae(){var _e=Z(M,r(arguments));X.call(this),this.addEventListener(y,this[N]=_e,_e.$=D),_e._=M}function pe(){var _e=new RegExp("^__on([^.]+)"+e.requote(y)+"$"),Pe;for(var Le in this)if(Pe=Le.match(_e)){var Je=this[Le];this.removeEventListener(Pe[1],Je,Je.$),delete this[Le]}}return U?M?ae:X:M?Ae:pe}var Ut=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});i&&Ut.forEach(function(y){"on"+y in i&&Ut.remove(y)});function Kt(y,M){return function(D){var N=e.event;e.event=D,M[0]=this.__data__;try{y.apply(this,M)}finally{e.event=N}}}function Gt(y,M){var D=Kt(y,M);return function(N){var U=this,Z=N.relatedTarget;(!Z||Z!==U&&!(Z.compareDocumentPosition(U)&8))&&D.call(U,N)}}var Nt,$t=0;function Ar(y){var M=".dragsuppress-"+ ++$t,D="click"+M,N=e.select(s(y)).on("touchmove"+M,at).on("dragstart"+M,at).on("selectstart"+M,at);if(Nt==null&&(Nt="onselectstart"in y?!1:Te(y.style,"userSelect")),Nt){var U=a(y).style,Z=U[Nt];U[Nt]="none"}return function($){if(N.on(M,null),Nt&&(U[Nt]=Z),$){var X=function(){N.on(D,null)};N.on(D,function(){at(),X()},!0),setTimeout(X,0)}}}e.mouse=function(y){return Ct(y,pt())};var xr=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ct(y,M){M.changedTouches&&(M=M.changedTouches[0]);var D=y.ownerSVGElement||y;if(D.createSVGPoint){var N=D.createSVGPoint();if(xr<0){var U=s(y);if(U.scrollX||U.scrollY){D=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Z=D[0][0].getScreenCTM();xr=!(Z.f||Z.e),D.remove()}}return xr?(N.x=M.pageX,N.y=M.pageY):(N.x=M.clientX,N.y=M.clientY),N=N.matrixTransform(y.getScreenCTM().inverse()),[N.x,N.y]}var $=y.getBoundingClientRect();return[M.clientX-$.left-y.clientLeft,M.clientY-$.top-y.clientTop]}e.touch=function(y,M,D){if(arguments.length<3&&(D=M,M=pt().changedTouches),M){for(var N=0,U=M.length,Z;N<U;++N)if((Z=M[N]).identifier===D)return Ct(y,Z)}},e.behavior.drag=function(){var y=lt(U,"drag","dragstart","dragend"),M=null,D=Z(Ae,e.mouse,s,"mousemove","mouseup"),N=Z(Fe,e.touch,Ee,"touchmove","touchend");function U(){this.on("mousedown.drag",D).on("touchstart.drag",N)}function Z($,X,ae,pe,_e){return function(){var Pe=this,Le=e.event.target.correspondingElement||e.event.target,Je=Pe.parentNode,nt=y.of(Pe,arguments),ze=0,Ue=$(),je=".drag"+(Ue==null?"":"-"+Ue),st,it=e.select(ae(Le)).on(pe+je,nr).on(_e+je,ur),We=Ar(Le),Bt=X(Je,Ue);M?(st=M.apply(Pe,arguments),st=[st.x-Bt[0],st.y-Bt[1]]):st=[0,0],nt({type:"dragstart"});function nr(){var sr=X(Je,Ue),Dr,Ir;sr&&(Dr=sr[0]-Bt[0],Ir=sr[1]-Bt[1],ze|=Dr|Ir,Bt=sr,nt({type:"drag",x:sr[0]+st[0],y:sr[1]+st[1],dx:Dr,dy:Ir}))}function ur(){X(Je,Ue)&&(it.on(pe+je,null).on(_e+je,null),We(ze),nt({type:"dragend"}))}}}return U.origin=function($){return arguments.length?(M=$,U):M},e.rebind(U,y,"on")};function Fe(){return e.event.changedTouches[0].identifier}e.touches=function(y,M){return arguments.length<2&&(M=pt().touches),M?r(M).map(function(D){var N=Ct(y,D);return N.identifier=D.identifier,N}):[]};var He=1e-6,_t=He*He,ct=Math.PI,yr=2*ct,Er=yr-He,Tr=ct/2,Hr=ct/180,_a=180/ct;function ka(y){return y>0?1:y<0?-1:0}function Ea(y,M,D){return(M[0]-y[0])*(D[1]-y[1])-(M[1]-y[1])*(D[0]-y[0])}function Ii(y){return y>1?0:y<-1?ct:Math.acos(y)}function Ki(y){return y>1?Tr:y<-1?-Tr:Math.asin(y)}function yn(y){return((y=Math.exp(y))-1/y)/2}function Xi(y){return((y=Math.exp(y))+1/y)/2}function jn(y){return((y=Math.exp(2*y))-1)/(y+1)}function En(y){return(y=Math.sin(y/2))*y}var Vi=Math.SQRT2,pa=2,Gr=4;e.interpolateZoom=function(y,M){var D=y[0],N=y[1],U=y[2],Z=M[0],$=M[1],X=M[2],ae=Z-D,pe=$-N,_e=ae*ae+pe*pe,Pe,Le;if(_e<_t)Le=Math.log(X/U)/Vi,Pe=function(st){return[D+st*ae,N+st*pe,U*Math.exp(Vi*st*Le)]};else{var Je=Math.sqrt(_e),nt=(X*X-U*U+Gr*_e)/(2*U*pa*Je),ze=(X*X-U*U-Gr*_e)/(2*X*pa*Je),Ue=Math.log(Math.sqrt(nt*nt+1)-nt),je=Math.log(Math.sqrt(ze*ze+1)-ze);Le=(je-Ue)/Vi,Pe=function(st){var it=st*Le,We=Xi(Ue),Bt=U/(pa*Je)*(We*jn(Vi*it+Ue)-yn(Ue));return[D+Bt*ae,N+Bt*pe,U*We/Xi(Vi*it+Ue)]}}return Pe.duration=Le*1e3,Pe},e.behavior.zoom=function(){var y={x:0,y:0,k:1},M,D,N,U=[960,500],Z=Qa,$=250,X=0,ae="mousedown.zoom",pe="mousemove.zoom",_e="mouseup.zoom",Pe,Le="touchstart.zoom",Je,nt=lt(it,"zoomstart","zoom","zoomend"),ze,Ue,je,st;vi||(vi="onwheel"in i?(Zr=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Zr=function(){return e.event.wheelDelta},"mousewheel"):(Zr=function(){return-e.event.detail},"MozMousePixelScroll"));function it(Yt){Yt.on(ae,Kr).on(vi+".zoom",ri).on("dblclick.zoom",$a).on(Le,Ba)}it.event=function(Yt){Yt.each(function(){var Jr=nt.of(this,arguments),oa=y;so?e.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},Ir(Jr)}).tween("zoom:zoom",function(){var sa=U[0],Ei=U[1],Oi=D?D[0]:sa/2,$i=D?D[1]:Ei/2,xi=e.interpolateZoom([(Oi-y.x)/y.k,($i-y.y)/y.k,sa/y.k],[(Oi-oa.x)/oa.k,($i-oa.y)/oa.k,sa/oa.k]);return function(xn){var br=xi(xn),Vr=sa/br[2];this.__chart__=y={x:Oi-br[0]*Vr,y:$i-br[1]*Vr,k:Vr},ea(Jr)}}).each("interrupt.zoom",function(){Ur(Jr)}).each("end.zoom",function(){Ur(Jr)}):(this.__chart__=y,Ir(Jr),ea(Jr),Ur(Jr))})},it.translate=function(Yt){return arguments.length?(y={x:+Yt[0],y:+Yt[1],k:y.k},Dr(),it):[y.x,y.y]},it.scale=function(Yt){return arguments.length?(y={x:y.x,y:y.y,k:null},nr(+Yt),Dr(),it):y.k},it.scaleExtent=function(Yt){return arguments.length?(Z=Yt==null?Qa:[+Yt[0],+Yt[1]],it):Z},it.center=function(Yt){return arguments.length?(N=Yt&&[+Yt[0],+Yt[1]],it):N},it.size=function(Yt){return arguments.length?(U=Yt&&[+Yt[0],+Yt[1]],it):U},it.duration=function(Yt){return arguments.length?($=+Yt,it):$},it.x=function(Yt){return arguments.length?(Ue=Yt,ze=Yt.copy(),y={x:0,y:0,k:1},it):Ue},it.y=function(Yt){return arguments.length?(st=Yt,je=Yt.copy(),y={x:0,y:0,k:1},it):st};function We(Yt){return[(Yt[0]-y.x)/y.k,(Yt[1]-y.y)/y.k]}function Bt(Yt){return[Yt[0]*y.k+y.x,Yt[1]*y.k+y.y]}function nr(Yt){y.k=Math.max(Z[0],Math.min(Z[1],Yt))}function ur(Yt,Jr){Jr=Bt(Jr),y.x+=Yt[0]-Jr[0],y.y+=Yt[1]-Jr[1]}function sr(Yt,Jr,oa,sa){Yt.__chart__={x:y.x,y:y.y,k:y.k},nr(Math.pow(2,sa)),ur(D=Jr,oa),Yt=e.select(Yt),$>0&&(Yt=Yt.transition().duration($)),Yt.call(it.event)}function Dr(){Ue&&Ue.domain(ze.range().map(function(Yt){return(Yt-y.x)/y.k}).map(ze.invert)),st&&st.domain(je.range().map(function(Yt){return(Yt-y.y)/y.k}).map(je.invert))}function Ir(Yt){X++||Yt({type:"zoomstart"})}function ea(Yt){Dr(),Yt({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function Ur(Yt){--X||(Yt({type:"zoomend"}),D=null)}function Kr(){var Yt=this,Jr=nt.of(Yt,arguments),oa=0,sa=e.select(s(Yt)).on(pe,$i).on(_e,xi),Ei=We(e.mouse(Yt)),Oi=Ar(Yt);rh.call(Yt),Ir(Jr);function $i(){oa=1,ur(e.mouse(Yt),Ei),ea(Jr)}function xi(){sa.on(pe,null).on(_e,null),Oi(oa),Ur(Jr)}}function Ba(){var Yt=this,Jr=nt.of(Yt,arguments),oa={},sa=0,Ei,Oi=".zoom-"+e.event.changedTouches[0].identifier,$i="touchmove"+Oi,xi="touchend"+Oi,xn=[],br=e.select(Yt),Vr=Ar(Yt);Ti(),Ir(Jr),br.on(ae,null).on(Le,Ti);function Fi(){var cn=e.touches(Yt);return Ei=y.k,cn.forEach(function(pi){pi.identifier in oa&&(oa[pi.identifier]=We(pi))}),cn}function Ti(){var cn=e.event.target;e.select(cn).on($i,lo).on(xi,zn),xn.push(cn);for(var pi=e.event.changedTouches,jo=0,uo=pi.length;jo<uo;++jo)oa[pi[jo].identifier]=null;var ci=Fi(),yf=Date.now();if(ci.length===1){if(yf-Je<500){var Aa=ci[0];sr(Yt,Aa,oa[Aa.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),at()}Je=yf}else if(ci.length>1){var Aa=ci[0],ui=ci[1],ql=Aa[0]-ui[0],Vv=Aa[1]-ui[1];sa=ql*ql+Vv*Vv}}function lo(){var cn=e.touches(Yt),pi,jo,uo,ci;rh.call(Yt);for(var yf=0,Aa=cn.length;yf<Aa;++yf,ci=null)if(uo=cn[yf],ci=oa[uo.identifier]){if(jo)break;pi=uo,jo=ci}if(ci){var ui=(ui=uo[0]-pi[0])*ui+(ui=uo[1]-pi[1])*ui,ql=sa&&Math.sqrt(ui/sa);pi=[(pi[0]+uo[0])/2,(pi[1]+uo[1])/2],jo=[(jo[0]+ci[0])/2,(jo[1]+ci[1])/2],nr(ql*Ei)}Je=null,ur(pi,jo),ea(Jr)}function zn(){if(e.event.touches.length){for(var cn=e.event.changedTouches,pi=0,jo=cn.length;pi<jo;++pi)delete oa[cn[pi].identifier];for(var uo in oa)return void Fi()}e.selectAll(xn).on(Oi,null),br.on(ae,Kr).on(Le,Ba),Vr(),Ur(Jr)}}function ri(){var Yt=nt.of(this,arguments);Pe?clearTimeout(Pe):(rh.call(this),M=We(D=N||e.mouse(this)),Ir(Yt)),Pe=setTimeout(function(){Pe=null,Ur(Yt)},50),at(),nr(Math.pow(2,Zr()*.002)*y.k),ur(D,M),ea(Yt)}function $a(){var Yt=e.mouse(this),Jr=Math.log(y.k)/Math.LN2;sr(this,Yt,We(Yt),e.event.shiftKey?Math.ceil(Jr)-1:Math.floor(Jr)+1)}return e.rebind(it,nt,"on")};var Qa=[0,1/0],Zr,vi;e.color=ya;function ya(){}ya.prototype.toString=function(){return this.rgb()+""},e.hsl=le;function le(y,M,D){return this instanceof le?(this.h=+y,this.s=+M,void(this.l=+D)):arguments.length<2?y instanceof le?new le(y.h,y.s,y.l):$r(""+y,ga,le):new le(y,M,D)}var ee=le.prototype=new ya;ee.brighter=function(y){return y=Math.pow(.7,arguments.length?y:1),new le(this.h,this.s,this.l/y)},ee.darker=function(y){return y=Math.pow(.7,arguments.length?y:1),new le(this.h,this.s,y*this.l)},ee.rgb=function(){return se(this.h,this.s,this.l)};function se(y,M,D){var N,U;y=isNaN(y)?0:(y%=360)<0?y+360:y,M=isNaN(M)||M<0?0:M>1?1:M,D=D<0?0:D>1?1:D,U=D<=.5?D*(1+M):D+M-D*M,N=2*D-U;function Z(X){return X>360?X-=360:X<0&&(X+=360),X<60?N+(U-N)*X/60:X<180?U:X<240?N+(U-N)*(240-X)/60:N}function $(X){return Math.round(Z(X)*255)}return new ua($(y+120),$(y),$(y-120))}e.hcl=fe;function fe(y,M,D){return this instanceof fe?(this.h=+y,this.c=+M,void(this.l=+D)):arguments.length<2?y instanceof fe?new fe(y.h,y.c,y.l):y instanceof $e?wr(y.l,y.a,y.b):wr((y=ir((y=e.rgb(y)).r,y.g,y.b)).l,y.a,y.b):new fe(y,M,D)}var Ce=fe.prototype=new ya;Ce.brighter=function(y){return new fe(this.h,this.c,Math.min(100,this.l+Ve*(arguments.length?y:1)))},Ce.darker=function(y){return new fe(this.h,this.c,Math.max(0,this.l-Ve*(arguments.length?y:1)))},Ce.rgb=function(){return Ne(this.h,this.c,this.l).rgb()};function Ne(y,M,D){return isNaN(y)&&(y=0),isNaN(M)&&(M=0),new $e(D,Math.cos(y*=Hr)*M,Math.sin(y)*M)}e.lab=$e;function $e(y,M,D){return this instanceof $e?(this.l=+y,this.a=+M,void(this.b=+D)):arguments.length<2?y instanceof $e?new $e(y.l,y.a,y.b):y instanceof fe?Ne(y.h,y.c,y.l):ir((y=ua(y)).r,y.g,y.b):new $e(y,M,D)}var Ve=18,dt=.95047,Et=1,Dt=1.08883,Qt=$e.prototype=new ya;Qt.brighter=function(y){return new $e(Math.min(100,this.l+Ve*(arguments.length?y:1)),this.a,this.b)},Qt.darker=function(y){return new $e(Math.max(0,this.l-Ve*(arguments.length?y:1)),this.a,this.b)},Qt.rgb=function(){return Vt(this.l,this.a,this.b)};function Vt(y,M,D){var N=(y+16)/116,U=N+M/500,Z=N-D/200;return U=Yr(U)*dt,N=Yr(N)*Et,Z=Yr(Z)*Dt,new ua(ca(3.2404542*U-1.5371385*N-.4985314*Z),ca(-.969266*U+1.8760108*N+.041556*Z),ca(.0556434*U-.2040259*N+1.0572252*Z))}function wr(y,M,D){return y>0?new fe(Math.atan2(D,M)*_a,Math.sqrt(M*M+D*D),y):new fe(NaN,NaN,y)}function Yr(y){return y>.206893034?y*y*y:(y-4/29)/7.787037}function Br(y){return y>.008856?Math.pow(y,1/3):7.787037*y+4/29}function ca(y){return Math.round(255*(y<=.00304?12.92*y:1.055*Math.pow(y,1/2.4)-.055))}e.rgb=ua;function ua(y,M,D){return this instanceof ua?(this.r=~~y,this.g=~~M,void(this.b=~~D)):arguments.length<2?y instanceof ua?new ua(y.r,y.g,y.b):$r(""+y,ua,se):new ua(y,M,D)}function Na(y){return new ua(y>>16,y>>8&255,y&255)}function ii(y){return Na(y)+""}var Wr=ua.prototype=new ya;Wr.brighter=function(y){y=Math.pow(.7,arguments.length?y:1);var M=this.r,D=this.g,N=this.b,U=30;return!M&&!D&&!N?new ua(U,U,U):(M&&M<U&&(M=U),D&&D<U&&(D=U),N&&N<U&&(N=U),new ua(Math.min(255,M/y),Math.min(255,D/y),Math.min(255,N/y)))},Wr.darker=function(y){return y=Math.pow(.7,arguments.length?y:1),new ua(y*this.r,y*this.g,y*this.b)},Wr.hsl=function(){return ga(this.r,this.g,this.b)},Wr.toString=function(){return"#"+vr(this.r)+vr(this.g)+vr(this.b)};function vr(y){return y<16?"0"+Math.max(0,y).toString(16):Math.min(255,y).toString(16)}function $r(y,M,D){var N=0,U=0,Z=0,$,X,ae;if($=/([a-z]+)\((.*)\)/.exec(y=y.toLowerCase()),$)switch(X=$[2].split(","),$[1]){case"hsl":return D(parseFloat(X[0]),parseFloat(X[1])/100,parseFloat(X[2])/100);case"rgb":return M(La(X[0]),La(X[1]),La(X[2]))}return(ae=si.get(y))?M(ae.r,ae.g,ae.b):(y!=null&&y.charAt(0)==="#"&&!isNaN(ae=parseInt(y.slice(1),16))&&(y.length===4?(N=(ae&3840)>>4,N=N>>4|N,U=ae&240,U=U>>4|U,Z=ae&15,Z=Z<<4|Z):y.length===7&&(N=(ae&16711680)>>16,U=(ae&65280)>>8,Z=ae&255)),M(N,U,Z))}function ga(y,M,D){var N=Math.min(y/=255,M/=255,D/=255),U=Math.max(y,M,D),Z=U-N,$,X,ae=(U+N)/2;return Z?(X=ae<.5?Z/(U+N):Z/(2-U-N),y==U?$=(M-D)/Z+(M<D?6:0):M==U?$=(D-y)/Z+2:$=(y-M)/Z+4,$*=60):($=NaN,X=ae>0&&ae<1?0:$),new le($,X,ae)}function ir(y,M,D){y=wi(y),M=wi(M),D=wi(D);var N=Br((.4124564*y+.3575761*M+.1804375*D)/dt),U=Br((.2126729*y+.7151522*M+.072175*D)/Et),Z=Br((.0193339*y+.119192*M+.9503041*D)/Dt);return $e(116*U-16,500*(N-U),200*(U-Z))}function wi(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function La(y){var M=parseFloat(y);return y.charAt(y.length-1)==="%"?Math.round(M*2.55):M}var si=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});si.forEach(function(y,M){si.set(y,Na(M))});function fa(y){return typeof y=="function"?y:function(){return y}}e.functor=fa,e.xhr=Ln(Ee);function Ln(y){return function(M,D,N){return arguments.length===2&&typeof D=="function"&&(N=D,D=null),Co(M,D,y,N)}}function Co(y,M,D,N){var U={},Z=e.dispatch("beforesend","progress","load","error"),$={},X=new XMLHttpRequest,ae=null;self.XDomainRequest&&!("withCredentials"in X)&&/^(http(s)?:)?\/\//.test(y)&&(X=new XDomainRequest),"onload"in X?X.onload=X.onerror=pe:X.onreadystatechange=function(){X.readyState>3&&pe()};function pe(){var _e=X.status,Pe;if(!_e&&Ga(X)||_e>=200&&_e<300||_e===304){try{Pe=D.call(U,X)}catch(Le){Z.error.call(U,Le);return}Z.load.call(U,Pe)}else Z.error.call(U,X)}return X.onprogress=function(_e){var Pe=e.event;e.event=_e;try{Z.progress.call(U,X)}finally{e.event=Pe}},U.header=function(_e,Pe){return _e=(_e+"").toLowerCase(),arguments.length<2?$[_e]:(Pe==null?delete $[_e]:$[_e]=Pe+"",U)},U.mimeType=function(_e){return arguments.length?(M=_e==null?null:_e+"",U):M},U.responseType=function(_e){return arguments.length?(ae=_e,U):ae},U.response=function(_e){return D=_e,U},["get","post"].forEach(function(_e){U[_e]=function(){return U.send.apply(U,[_e].concat(r(arguments)))}}),U.send=function(_e,Pe,Le){if(arguments.length===2&&typeof Pe=="function"&&(Le=Pe,Pe=null),X.open(_e,y,!0),M!=null&&!("accept"in $)&&($.accept=M+",*/*"),X.setRequestHeader)for(var Je in $)X.setRequestHeader(Je,$[Je]);return M!=null&&X.overrideMimeType&&X.overrideMimeType(M),ae!=null&&(X.responseType=ae),Le!=null&&U.on("error",Le).on("load",function(nt){Le(null,nt)}),Z.beforesend.call(U,X),X.send(Pe==null?null:Pe),U},U.abort=function(){return X.abort(),U},e.rebind(U,Z,"on"),N==null?U:U.get(xs(N))}function xs(y){return y.length===1?function(M,D){y(M==null?D:null)}:y}function Ga(y){var M=y.responseType;return M&&M!=="text"?y.response:y.responseText}e.dsv=function(y,M){var D=new RegExp('["'+y+`
]`),N=y.charCodeAt(0);function U(pe,_e,Pe){arguments.length<3&&(Pe=_e,_e=null);var Le=Co(pe,M,_e==null?Z:$(_e),Pe);return Le.row=function(Je){return arguments.length?Le.response((_e=Je)==null?Z:$(Je)):_e},Le}function Z(pe){return U.parse(pe.responseText)}function $(pe){return function(_e){return U.parse(_e.responseText,pe)}}U.parse=function(pe,_e){var Pe;return U.parseRows(pe,function(Le,Je){if(Pe)return Pe(Le,Je-1);var nt=function(ze){for(var Ue={},je=Le.length,st=0;st<je;++st)Ue[Le[st]]=ze[st];return Ue};Pe=_e?function(ze,Ue){return _e(nt(ze),Ue)}:nt})},U.parseRows=function(pe,_e){var Pe={},Le={},Je=[],nt=pe.length,ze=0,Ue=0,je,st;function it(){if(ze>=nt)return Le;if(st)return st=!1,Pe;var Bt=ze;if(pe.charCodeAt(Bt)===34){for(var nr=Bt;nr++<nt;)if(pe.charCodeAt(nr)===34){if(pe.charCodeAt(nr+1)!==34)break;++nr}ze=nr+2;var ur=pe.charCodeAt(nr+1);return ur===13?(st=!0,pe.charCodeAt(nr+2)===10&&++ze):ur===10&&(st=!0),pe.slice(Bt+1,nr).replace(/""/g,'"')}for(;ze<nt;){var ur=pe.charCodeAt(ze++),sr=1;if(ur===10)st=!0;else if(ur===13)st=!0,pe.charCodeAt(ze)===10&&(++ze,++sr);else if(ur!==N)continue;return pe.slice(Bt,ze-sr)}return pe.slice(Bt)}for(;(je=it())!==Le;){for(var We=[];je!==Pe&&je!==Le;)We.push(je),je=it();_e&&(We=_e(We,Ue++))==null||Je.push(We)}return Je},U.format=function(pe){if(Array.isArray(pe[0]))return U.formatRows(pe);var _e=new de,Pe=[];return pe.forEach(function(Le){for(var Je in Le)_e.has(Je)||Pe.push(_e.add(Je))}),[Pe.map(ae).join(y)].concat(pe.map(function(Le){return Pe.map(function(Je){return ae(Le[Je])}).join(y)})).join(`
`)},U.formatRows=function(pe){return pe.map(X).join(`
`)};function X(pe){return pe.map(ae).join(y)}function ae(pe){return D.test(pe)?'"'+pe.replace(/\"/g,'""')+'"':pe}return U},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var Jn,cu,Bi,vl,Jd=this[Te(this,"requestAnimationFrame")]||function(y){setTimeout(y,17)};e.timer=function(){Fc.apply(this,arguments)};function Fc(y,M,D){var N=arguments.length;N<2&&(M=0),N<3&&(D=Date.now());var U=D+M,Z={c:y,t:U,n:null};return cu?cu.n=Z:Jn=Z,cu=Z,Bi||(vl=clearTimeout(vl),Bi=1,Jd(qc)),Z}function qc(){var y=cv(),M=hv()-y;M>24?(isFinite(M)&&(clearTimeout(vl),vl=setTimeout(qc,M)),Bi=0):(Bi=1,Jd(qc))}e.timer.flush=function(){cv(),hv()};function cv(){for(var y=Date.now(),M=Jn;M;)y>=M.t&&M.c(y-M.t)&&(M.c=null),M=M.n;return y}function hv(){for(var y,M=Jn,D=1/0;M;)M.c?(M.t<D&&(D=M.t),M=(y=M).n):M=y?y.n=M.n:Jn=M.n;return cu=y,D}e.round=function(y,M){return M?Math.round(y*(M=Math.pow(10,M)))/M:Math.round(y)},e.geom={};function hu(y){return y[0]}function dl(y){return y[1]}e.geom.hull=function(y){var M=hu,D=dl;if(arguments.length)return N(y);function N(U){if(U.length<3)return[];var Z=fa(M),$=fa(D),X,ae=U.length,pe=[],_e=[];for(X=0;X<ae;X++)pe.push([+Z.call(this,U[X],X),+$.call(this,U[X],X),X]);for(pe.sort(Ju),X=0;X<ae;X++)_e.push([pe[X][0],-pe[X][1]]);var Pe=Kd(pe),Le=Kd(_e),Je=Le[0]===Pe[0],nt=Le[Le.length-1]===Pe[Pe.length-1],ze=[];for(X=Pe.length-1;X>=0;--X)ze.push(U[pe[Pe[X]][2]]);for(X=+Je;X<Le.length-nt;++X)ze.push(U[pe[Le[X]][2]]);return ze}return N.x=function(U){return arguments.length?(M=U,N):M},N.y=function(U){return arguments.length?(D=U,N):D},N};function Kd(y){for(var M=y.length,D=[0,1],N=2,U=2;U<M;U++){for(;N>1&&Ea(y[D[N-2]],y[D[N-1]],y[U])<=0;)--N;D[N++]=U}return D.slice(0,N)}function Ju(y,M){return y[0]-M[0]||y[1]-M[1]}e.geom.polygon=function(y){return Ye(y,Gf),y};var Gf=e.geom.polygon.prototype=[];Gf.area=function(){for(var y=-1,M=this.length,D,N=this[M-1],U=0;++y<M;)D=N,N=this[y],U+=D[1]*N[0]-D[0]*N[1];return U*.5},Gf.centroid=function(y){var M=-1,D=this.length,N=0,U=0,Z,$=this[D-1],X;for(arguments.length||(y=-1/(6*this.area()));++M<D;)Z=$,$=this[M],X=Z[0]*$[1]-$[0]*Z[1],N+=(Z[0]+$[0])*X,U+=(Z[1]+$[1])*X;return[N*y,U*y]},Gf.clip=function(y){for(var M,D=mo(y),N=-1,U=this.length-mo(this),Z,$,X=this[U-1],ae,pe,_e;++N<U;){for(M=y.slice(),y.length=0,ae=this[N],pe=M[($=M.length-D)-1],Z=-1;++Z<$;)_e=M[Z],Qi(_e,X,ae)?(Qi(pe,X,ae)||y.push(Ho(pe,_e,X,ae)),y.push(_e)):Qi(pe,X,ae)&&y.push(Ho(pe,_e,X,ae)),pe=_e;D&&y.push(y[0]),X=ae}return y};function Qi(y,M,D){return(D[0]-M[0])*(y[1]-M[1])<(D[1]-M[1])*(y[0]-M[0])}function Ho(y,M,D,N){var U=y[0],Z=D[0],$=M[0]-U,X=N[0]-Z,ae=y[1],pe=D[1],_e=M[1]-ae,Pe=N[1]-pe,Le=(X*(ae-pe)-Pe*(U-Z))/(Pe*$-X*_e);return[U+Le*$,ae+Le*_e]}function mo(y){var M=y[0],D=y[y.length-1];return!(M[0]-D[0]||M[1]-D[1])}var pl,Go,vu,Qd=[],vv,Ku,dv=[];function pv(){ki(this),this.edge=this.site=this.circle=null}function oo(y){var M=Qd.pop()||new pv;return M.site=y,M}function Zt(y){wa(y),vu.remove(y),Qd.push(y),ki(y)}function Or(y){var M=y.circle,D=M.x,N=M.cy,U={x:D,y:N},Z=y.P,$=y.N,X=[y];Zt(y);for(var ae=Z;ae.circle&&I(D-ae.circle.x)<He&&I(N-ae.circle.cy)<He;)Z=ae.P,X.unshift(ae),Zt(ae),ae=Z;X.unshift(ae),wa(ae);for(var pe=$;pe.circle&&I(D-pe.circle.x)<He&&I(N-pe.circle.cy)<He;)$=pe.N,X.push(pe),Zt(pe),pe=$;X.push(pe),wa(pe);var _e=X.length,Pe;for(Pe=1;Pe<_e;++Pe)pe=X[Pe],ae=X[Pe-1],us(pe.edge,ae.site,pe.site,U);ae=X[0],pe=X[_e-1],pe.edge=Ws(ae.site,pe.site,null,U),kr(ae),kr(pe)}function $d(y){for(var M=y.x,D=y.y,N,U,Z,$,X=vu._;X;)if(Z=du(X,D)-M,Z>He)X=X.L;else if($=M-an(X,D),$>He){if(!X.R){N=X;break}X=X.R}else{Z>-He?(N=X.P,U=X):$>-He?(N=X,U=X.N):N=U=X;break}var ae=oo(y);if(vu.insert(N,ae),!(!N&&!U)){if(N===U){wa(N),U=oo(N.site),vu.insert(ae,U),ae.edge=U.edge=Ws(N.site,ae.site),kr(N),kr(U);return}if(!U){ae.edge=Ws(N.site,ae.site);return}wa(N),wa(U);var pe=N.site,_e=pe.x,Pe=pe.y,Le=y.x-_e,Je=y.y-Pe,nt=U.site,ze=nt.x-_e,Ue=nt.y-Pe,je=2*(Le*Ue-Je*ze),st=Le*Le+Je*Je,it=ze*ze+Ue*Ue,We={x:(Ue*st-Je*it)/je+_e,y:(Le*it-ze*st)/je+Pe};us(U.edge,pe,nt,We),ae.edge=Ws(pe,y,null,We),U.edge=Ws(y,nt,null,We),kr(N),kr(U)}}function du(y,M){var D=y.site,N=D.x,U=D.y,Z=U-M;if(!Z)return N;var $=y.P;if(!$)return-1/0;D=$.site;var X=D.x,ae=D.y,pe=ae-M;if(!pe)return X;var _e=X-N,Pe=1/Z-1/pe,Le=_e/pe;return Pe?(-Le+Math.sqrt(Le*Le-2*Pe*(_e*_e/(-2*pe)-ae+pe/2+U-Z/2)))/Pe+N:(N+X)/2}function an(y,M){var D=y.N;if(D)return du(D,M);var N=y.site;return N.y===M?N.x:1/0}function ml(y){this.site=y,this.edges=[]}ml.prototype.prepare=function(){for(var y=this.edges,M=y.length,D;M--;)D=y[M].edge,(!D.b||!D.a)&&y.splice(M,1);return y.sort(Qu),y.length};function bs(y){for(var M=y[0][0],D=y[1][0],N=y[0][1],U=y[1][1],Z,$,X,ae,pe=Go,_e=pe.length,Pe,Le,Je,nt,ze,Ue;_e--;)if(Pe=pe[_e],!(!Pe||!Pe.prepare()))for(Je=Pe.edges,nt=Je.length,Le=0;Le<nt;)Ue=Je[Le].end(),X=Ue.x,ae=Ue.y,ze=Je[++Le%nt].start(),Z=ze.x,$=ze.y,(I(X-Z)>He||I(ae-$)>He)&&(Je.splice(Le,0,new gl(pu(Pe.site,Ue,I(X-M)<He&&U-ae>He?{x:M,y:I(Z-M)<He?$:U}:I(ae-U)<He&&D-X>He?{x:I($-U)<He?Z:D,y:U}:I(X-D)<He&&ae-N>He?{x:D,y:I(Z-D)<He?$:N}:I(ae-N)<He&&X-M>He?{x:I($-N)<He?Z:M,y:N}:null),Pe.site,null)),++nt)}function Qu(y,M){return M.angle-y.angle}function $u(){ki(this),this.x=this.y=this.arc=this.site=this.cy=null}function kr(y){var M=y.P,D=y.N;if(!(!M||!D)){var N=M.site,U=y.site,Z=D.site;if(N!==Z){var $=U.x,X=U.y,ae=N.x-$,pe=N.y-X,_e=Z.x-$,Ue=Z.y-X,Pe=2*(ae*Ue-pe*_e);if(!(Pe>=-_t)){var Le=ae*ae+pe*pe,Je=_e*_e+Ue*Ue,nt=(Ue*Le-pe*Je)/Pe,ze=(ae*Je-_e*Le)/Pe,Ue=ze+X,je=dv.pop()||new $u;je.arc=y,je.site=U,je.x=nt+$,je.y=Ue+Math.sqrt(nt*nt+ze*ze),je.cy=Ue,y.circle=je;for(var st=null,it=Ku._;it;)if(je.y<it.y||je.y===it.y&&je.x<=it.x)if(it.L)it=it.L;else{st=it.P;break}else if(it.R)it=it.R;else{st=it;break}Ku.insert(st,je),st||(vv=je)}}}}function wa(y){var M=y.circle;M&&(M.P||(vv=M.N),Ku.remove(M),dv.push(M),ki(M),y.circle=null)}function Ta(y,M,D,N){return function(U){var Z=U.a,$=U.b,X=Z.x,ae=Z.y,pe=$.x,_e=$.y,Pe=0,Le=1,Je=pe-X,nt=_e-ae,ze;if(ze=y-X,!(!Je&&ze>0)){if(ze/=Je,Je<0){if(ze<Pe)return;ze<Le&&(Le=ze)}else if(Je>0){if(ze>Le)return;ze>Pe&&(Pe=ze)}if(ze=D-X,!(!Je&&ze<0)){if(ze/=Je,Je<0){if(ze>Le)return;ze>Pe&&(Pe=ze)}else if(Je>0){if(ze<Pe)return;ze<Le&&(Le=ze)}if(ze=M-ae,!(!nt&&ze>0)){if(ze/=nt,nt<0){if(ze<Pe)return;ze<Le&&(Le=ze)}else if(nt>0){if(ze>Le)return;ze>Pe&&(Pe=ze)}if(ze=N-ae,!(!nt&&ze<0)){if(ze/=nt,nt<0){if(ze>Le)return;ze>Pe&&(Pe=ze)}else if(nt>0){if(ze<Pe)return;ze<Le&&(Le=ze)}return Pe>0&&(U.a={x:X+Pe*Je,y:ae+Pe*nt}),Le<1&&(U.b={x:X+Le*Je,y:ae+Le*nt}),U}}}}}}function ws(y){for(var M=pl,D=Ta(y[0][0],y[0][1],y[1][0],y[1][1]),N=M.length,U;N--;)U=M[N],(!yl(U,y)||!D(U)||I(U.a.x-U.b.x)<He&&I(U.a.y-U.b.y)<He)&&(U.a=U.b=null,M.splice(N,1))}function yl(y,M){var D=y.b;if(D)return!0;var N=y.a,U=M[0][0],Z=M[1][0],$=M[0][1],X=M[1][1],ae=y.l,pe=y.r,_e=ae.x,Pe=ae.y,Le=pe.x,Je=pe.y,nt=(_e+Le)/2,ze=(Pe+Je)/2,Ue,je;if(Je===Pe){if(nt<U||nt>=Z)return;if(_e>Le){if(!N)N={x:nt,y:$};else if(N.y>=X)return;D={x:nt,y:X}}else{if(!N)N={x:nt,y:X};else if(N.y<$)return;D={x:nt,y:$}}}else if(Ue=(_e-Le)/(Je-Pe),je=ze-Ue*nt,Ue<-1||Ue>1)if(_e>Le){if(!N)N={x:($-je)/Ue,y:$};else if(N.y>=X)return;D={x:(X-je)/Ue,y:X}}else{if(!N)N={x:(X-je)/Ue,y:X};else if(N.y<$)return;D={x:($-je)/Ue,y:$}}else if(Pe<Je){if(!N)N={x:U,y:Ue*U+je};else if(N.x>=Z)return;D={x:Z,y:Ue*Z+je}}else{if(!N)N={x:Z,y:Ue*Z+je};else if(N.x<U)return;D={x:U,y:Ue*U+je}}return y.a=N,y.b=D,!0}function Ma(y,M){this.l=y,this.r=M,this.a=this.b=null}function Ws(y,M,D,N){var U=new Ma(y,M);return pl.push(U),D&&us(U,y,M,D),N&&us(U,M,y,N),Go[y.i].edges.push(new gl(U,y,M)),Go[M.i].edges.push(new gl(U,M,y)),U}function pu(y,M,D){var N=new Ma(y,null);return N.a=M,N.b=D,pl.push(N),N}function us(y,M,D,N){!y.a&&!y.b?(y.a=N,y.l=M,y.r=D):y.l===D?y.b=N:y.a=N}function gl(y,M,D){var N=y.a,U=y.b;this.edge=y,this.site=M,this.angle=D?Math.atan2(D.y-M.y,D.x-M.x):y.l===M?Math.atan2(U.x-N.x,N.y-U.y):Math.atan2(N.x-U.x,U.y-N.y)}gl.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function yo(){this._=null}function ki(y){y.U=y.C=y.L=y.R=y.P=y.N=null}yo.prototype={insert:function(y,M){var D,N,U;if(y){if(M.P=y,M.N=y.N,y.N&&(y.N.P=M),y.N=M,y.R){for(y=y.R;y.L;)y=y.L;y.L=M}else y.R=M;D=y}else this._?(y=Nc(this._),M.P=null,M.N=y,y.P=y.L=M,D=y):(M.P=M.N=null,this._=M,D=null);for(M.L=M.R=null,M.U=D,M.C=!0,y=M;D&&D.C;)N=D.U,D===N.L?(U=N.R,U&&U.C?(D.C=U.C=!1,N.C=!0,y=N):(y===D.R&&(Ts(this,D),y=D,D=y.U),D.C=!1,N.C=!0,fs(this,N))):(U=N.L,U&&U.C?(D.C=U.C=!1,N.C=!0,y=N):(y===D.L&&(fs(this,D),y=D,D=y.U),D.C=!1,N.C=!0,Ts(this,N))),D=y.U;this._.C=!1},remove:function(y){y.N&&(y.N.P=y.P),y.P&&(y.P.N=y.N),y.N=y.P=null;var M=y.U,D,N=y.L,U=y.R,Z,$;if(N?U?Z=Nc(U):Z=N:Z=U,M?M.L===y?M.L=Z:M.R=Z:this._=Z,N&&U?($=Z.C,Z.C=y.C,Z.L=N,N.U=Z,Z!==U?(M=Z.U,Z.U=y.U,y=Z.R,M.L=y,Z.R=U,U.U=Z):(Z.U=M,M=Z,y=Z.R)):($=y.C,y=Z),y&&(y.U=M),!$){if(y&&y.C){y.C=!1;return}do{if(y===this._)break;if(y===M.L){if(D=M.R,D.C&&(D.C=!1,M.C=!0,Ts(this,M),D=M.R),D.L&&D.L.C||D.R&&D.R.C){(!D.R||!D.R.C)&&(D.L.C=!1,D.C=!0,fs(this,D),D=M.R),D.C=M.C,M.C=D.R.C=!1,Ts(this,M),y=this._;break}}else if(D=M.L,D.C&&(D.C=!1,M.C=!0,fs(this,M),D=M.L),D.L&&D.L.C||D.R&&D.R.C){(!D.L||!D.L.C)&&(D.R.C=!1,D.C=!0,Ts(this,D),D=M.L),D.C=M.C,M.C=D.L.C=!1,fs(this,M),y=this._;break}D.C=!0,y=M,M=M.U}while(!y.C);y&&(y.C=!1)}}};function Ts(y,M){var D=M,N=M.R,U=D.U;U?U.L===D?U.L=N:U.R=N:y._=N,N.U=U,D.U=N,D.R=N.L,D.R&&(D.R.U=D),N.L=D}function fs(y,M){var D=M,N=M.L,U=D.U;U?U.L===D?U.L=N:U.R=N:y._=N,N.U=U,D.U=N,D.L=N.R,D.L&&(D.L.U=D),N.R=D}function Nc(y){for(;y.L;)y=y.L;return y}function mu(y,M){var D=y.sort(wm).pop(),N,U,Z;for(pl=[],Go=new Array(y.length),vu=new yo,Ku=new yo;;)if(Z=vv,D&&(!Z||D.y<Z.y||D.y===Z.y&&D.x<Z.x))(D.x!==N||D.y!==U)&&(Go[D.i]=new ml(D),$d(D),N=D.x,U=D.y),D=y.pop();else if(Z)Or(Z.arc);else break;M&&(ws(M),bs(M));var $={cells:Go,edges:pl};return vu=Ku=pl=Go=null,$}function wm(y,M){return M.y-y.y||M.x-y.x}e.geom.voronoi=function(y){var M=hu,D=dl,N=M,U=D,Z=Zf;if(y)return $(y);function $(ae){var pe=new Array(ae.length),_e=Z[0][0],Pe=Z[0][1],Le=Z[1][0],Je=Z[1][1];return mu(X(ae),Z).cells.forEach(function(nt,ze){var Ue=nt.edges,je=nt.site,st=pe[ze]=Ue.length?Ue.map(function(it){var We=it.start();return[We.x,We.y]}):je.x>=_e&&je.x<=Le&&je.y>=Pe&&je.y<=Je?[[_e,Je],[Le,Je],[Le,Pe],[_e,Pe]]:[];st.point=ae[ze]}),pe}function X(ae){return ae.map(function(pe,_e){return{x:Math.round(N(pe,_e)/He)*He,y:Math.round(U(pe,_e)/He)*He,i:_e}})}return $.links=function(ae){return mu(X(ae)).edges.filter(function(pe){return pe.l&&pe.r}).map(function(pe){return{source:ae[pe.l.i],target:ae[pe.r.i]}})},$.triangles=function(ae){var pe=[];return mu(X(ae)).cells.forEach(function(_e,Pe){for(var Le=_e.site,Je=_e.edges.sort(Qu),nt=-1,ze=Je.length,Ue,je,st=Je[ze-1].edge,it=st.l===Le?st.r:st.l;++nt<ze;)Ue=st,je=it,st=Je[nt].edge,it=st.l===Le?st.r:st.l,Pe<je.i&&Pe<it.i&&ni(Le,je,it)<0&&pe.push([ae[Pe],ae[je.i],ae[it.i]])}),pe},$.x=function(ae){return arguments.length?(N=fa(M=ae),$):M},$.y=function(ae){return arguments.length?(U=fa(D=ae),$):D},$.clipExtent=function(ae){return arguments.length?(Z=ae==null?Zf:ae,$):Z===Zf?null:Z},$.size=function(ae){return arguments.length?$.clipExtent(ae&&[[0,0],ae]):Z===Zf?null:Z&&Z[1]},$};var Zf=[[-1e6,-1e6],[1e6,1e6]];function ni(y,M,D){return(y.x-D.x)*(M.y-y.y)-(y.x-M.x)*(D.y-y.y)}e.geom.delaunay=function(y){return e.geom.voronoi().triangles(y)},e.geom.quadtree=function(y,M,D,N,U){var Z=hu,$=dl,X;if(X=arguments.length)return Z=Yf,$=mv,X===3&&(U=D,N=M,D=M=0),ae(y);function ae(pe){var _e,Pe=fa(Z),Le=fa($),Je,nt,ze,Ue,je,st,it,We;if(M!=null)je=M,st=D,it=N,We=U;else if(it=We=-(je=st=1/0),Je=[],nt=[],Ue=pe.length,X)for(ze=0;ze<Ue;++ze)_e=pe[ze],_e.x<je&&(je=_e.x),_e.y<st&&(st=_e.y),_e.x>it&&(it=_e.x),_e.y>We&&(We=_e.y),Je.push(_e.x),nt.push(_e.y);else for(ze=0;ze<Ue;++ze){var Bt=+Pe(_e=pe[ze],ze),nr=+Le(_e,ze);Bt<je&&(je=Bt),nr<st&&(st=nr),Bt>it&&(it=Bt),nr>We&&(We=nr),Je.push(Bt),nt.push(nr)}var ur=it-je,sr=We-st;ur>sr?We=st+ur:it=je+sr;function Dr(Ur,Kr,Ba,ri,$a,Yt,Jr,oa){if(!(isNaN(Ba)||isNaN(ri)))if(Ur.leaf){var sa=Ur.x,Ei=Ur.y;if(sa!=null)if(I(sa-Ba)+I(Ei-ri)<.01)Ir(Ur,Kr,Ba,ri,$a,Yt,Jr,oa);else{var Oi=Ur.point;Ur.x=Ur.y=Ur.point=null,Ir(Ur,Oi,sa,Ei,$a,Yt,Jr,oa),Ir(Ur,Kr,Ba,ri,$a,Yt,Jr,oa)}else Ur.x=Ba,Ur.y=ri,Ur.point=Kr}else Ir(Ur,Kr,Ba,ri,$a,Yt,Jr,oa)}function Ir(Ur,Kr,Ba,ri,$a,Yt,Jr,oa){var sa=($a+Jr)*.5,Ei=(Yt+oa)*.5,Oi=Ba>=sa,$i=ri>=Ei,xi=$i<<1|Oi;Ur.leaf=!1,Ur=Ur.nodes[xi]||(Ur.nodes[xi]=gn()),Oi?$a=sa:Jr=sa,$i?Yt=Ei:oa=Ei,Dr(Ur,Kr,Ba,ri,$a,Yt,Jr,oa)}var ea=gn();if(ea.add=function(Ur){Dr(ea,Ur,+Pe(Ur,++ze),+Le(Ur,ze),je,st,it,We)},ea.visit=function(Ur){Pn(Ur,ea,je,st,it,We)},ea.find=function(Ur){return ep(ea,Ur[0],Ur[1],je,st,it,We)},ze=-1,M==null){for(;++ze<Ue;)Dr(ea,pe[ze],Je[ze],nt[ze],je,st,it,We);--ze}else pe.forEach(ea.add);return Je=nt=pe=_e=null,ea}return ae.x=function(pe){return arguments.length?(Z=pe,ae):Z},ae.y=function(pe){return arguments.length?($=pe,ae):$},ae.extent=function(pe){return arguments.length?(pe==null?M=D=N=U=null:(M=+pe[0][0],D=+pe[0][1],N=+pe[1][0],U=+pe[1][1]),ae):M==null?null:[[M,D],[N,U]]},ae.size=function(pe){return arguments.length?(pe==null?M=D=N=U=null:(M=D=0,N=+pe[0],U=+pe[1]),ae):M==null?null:[N-M,U-D]},ae};function Yf(y){return y.x}function mv(y){return y.y}function gn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Pn(y,M,D,N,U,Z){if(!y(M,D,N,U,Z)){var $=(D+U)*.5,X=(N+Z)*.5,ae=M.nodes;ae[0]&&Pn(y,ae[0],D,N,$,X),ae[1]&&Pn(y,ae[1],$,N,U,X),ae[2]&&Pn(y,ae[2],D,X,$,Z),ae[3]&&Pn(y,ae[3],$,X,U,Z)}}function ep(y,M,D,N,U,Z,$){var X=1/0,ae;return function pe(_e,Pe,Le,Je,nt){if(!(Pe>Z||Le>$||Je<N||nt<U)){if(ze=_e.point){var ze,Ue=M-_e.x,je=D-_e.y,st=Ue*Ue+je*je;if(st<X){var it=Math.sqrt(X=st);N=M-it,U=D-it,Z=M+it,$=D+it,ae=ze}}for(var We=_e.nodes,Bt=(Pe+Je)*.5,nr=(Le+nt)*.5,ur=M>=Bt,sr=D>=nr,Dr=sr<<1|ur,Ir=Dr+4;Dr<Ir;++Dr)if(_e=We[Dr&3])switch(Dr&3){case 0:pe(_e,Pe,Le,Bt,nr);break;case 1:pe(_e,Bt,Le,Je,nr);break;case 2:pe(_e,Pe,nr,Bt,nt);break;case 3:pe(_e,Bt,nr,Je,nt);break}}}(y,N,U,Z,$),ae}e.interpolateRgb=ef;function ef(y,M){y=e.rgb(y),M=e.rgb(M);var D=y.r,N=y.g,U=y.b,Z=M.r-D,$=M.g-N,X=M.b-U;return function(ae){return"#"+vr(Math.round(D+Z*ae))+vr(Math.round(N+$*ae))+vr(Math.round(U+X*ae))}}e.interpolateObject=nn;function nn(y,M){var D={},N={},U;for(U in y)U in M?D[U]=on(y[U],M[U]):N[U]=y[U];for(U in M)U in y||(N[U]=M[U]);return function(Z){for(U in D)N[U]=D[U](Z);return N}}e.interpolateNumber=Eo;function Eo(y,M){return y=+y,M=+M,function(D){return y*(1-D)+M*D}}e.interpolateString=Zo;function Zo(y,M){var D=un.lastIndex=Wf.lastIndex=0,N,U,Z,$=-1,X=[],ae=[];for(y=y+"",M=M+"";(N=un.exec(y))&&(U=Wf.exec(M));)(Z=U.index)>D&&(Z=M.slice(D,Z),X[$]?X[$]+=Z:X[++$]=Z),(N=N[0])===(U=U[0])?X[$]?X[$]+=U:X[++$]=U:(X[++$]=null,ae.push({i:$,x:Eo(N,U)})),D=Wf.lastIndex;return D<M.length&&(Z=M.slice(D),X[$]?X[$]+=Z:X[++$]=Z),X.length<2?ae[0]?(M=ae[0].x,function(pe){return M(pe)+""}):function(){return M}:(M=ae.length,function(pe){for(var _e=0,Pe;_e<M;++_e)X[(Pe=ae[_e]).i]=Pe.x(pe);return X.join("")})}var un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wf=new RegExp(un.source,"g");e.interpolate=on;function on(y,M){for(var D=e.interpolators.length,N;--D>=0&&!(N=e.interpolators[D](y,M)););return N}e.interpolators=[function(y,M){var D=typeof M;return(D==="string"?si.has(M.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(M)?ef:Zo:M instanceof ya?ef:Array.isArray(M)?Yo:D==="object"&&isNaN(M)?nn:Eo)(y,M)}],e.interpolateArray=Yo;function Yo(y,M){var D=[],N=[],U=y.length,Z=M.length,$=Math.min(y.length,M.length),X;for(X=0;X<$;++X)D.push(on(y[X],M[X]));for(;X<U;++X)N[X]=y[X];for(;X<Z;++X)N[X]=M[X];return function(ae){for(X=0;X<$;++X)N[X]=D[X](ae);return N}}var Xs=function(){return Ee},Tm=e.map({linear:Xs,poly:yv,quad:function(){return Mm},cubic:function(){return _l},sin:function(){return Sm},exp:function(){return km},circle:function(){return Bc},elastic:Cm,back:Em,bounce:function(){return Lm}}),Wo=e.map({in:Ee,out:js,"in-out":Dn,"out-in":function(y){return Dn(js(y))}});e.ease=function(y){var M=y.indexOf("-"),D=M>=0?y.slice(0,M):y,N=M>=0?y.slice(M+1):"in";return D=Tm.get(D)||Xs,N=Wo.get(N)||Ee,Am(N(D.apply(null,t.call(arguments,1))))};function Am(y){return function(M){return M<=0?0:M>=1?1:y(M)}}function js(y){return function(M){return 1-y(1-M)}}function Dn(y){return function(M){return .5*(M<.5?y(2*M):2-y(2-2*M))}}function Mm(y){return y*y}function _l(y){return y*y*y}function xl(y){if(y<=0)return 0;if(y>=1)return 1;var M=y*y,D=M*y;return 4*(y<.5?D:3*(y-M)+D-.75)}function yv(y){return function(M){return Math.pow(M,y)}}function Sm(y){return 1-Math.cos(y*Tr)}function km(y){return Math.pow(2,10*(y-1))}function Bc(y){return 1-Math.sqrt(1-y*y)}function Cm(y,M){var D;return arguments.length<2&&(M=.45),arguments.length?D=M/yr*Math.asin(1/y):(y=1,D=M/4),function(N){return 1+y*Math.pow(2,-10*N)*Math.sin((N-D)*yr/M)}}function Em(y){return y||(y=1.70158),function(M){return M*M*((y+1)*M-y)}}function Lm(y){return y<1/2.75?7.5625*y*y:y<2/2.75?7.5625*(y-=1.5/2.75)*y+.75:y<2.5/2.75?7.5625*(y-=2.25/2.75)*y+.9375:7.5625*(y-=2.625/2.75)*y+.984375}e.interpolateHcl=gv;function gv(y,M){y=e.hcl(y),M=e.hcl(M);var D=y.h,N=y.c,U=y.l,Z=M.h-D,$=M.c-N,X=M.l-U;return isNaN($)&&($=0,N=isNaN(N)?M.c:N),isNaN(Z)?(Z=0,D=isNaN(D)?M.h:D):Z>180?Z-=360:Z<-180&&(Z+=360),function(ae){return Ne(D+Z*ae,N+$*ae,U+X*ae)+""}}e.interpolateHsl=Pm;function Pm(y,M){y=e.hsl(y),M=e.hsl(M);var D=y.h,N=y.s,U=y.l,Z=M.h-D,$=M.s-N,X=M.l-U;return isNaN($)&&($=0,N=isNaN(N)?M.s:N),isNaN(Z)?(Z=0,D=isNaN(D)?M.h:D):Z>180?Z-=360:Z<-180&&(Z+=360),function(ae){return se(D+Z*ae,N+$*ae,U+X*ae)+""}}e.interpolateLab=Dm;function Dm(y,M){y=e.lab(y),M=e.lab(M);var D=y.l,N=y.a,U=y.b,Z=M.l-D,$=M.a-N,X=M.b-U;return function(ae){return Vt(D+Z*ae,N+$*ae,U+X*ae)+""}}e.interpolateRound=_v;function _v(y,M){return M-=y,function(D){return Math.round(y+M*D)}}e.transform=function(y){var M=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(D){if(D!=null){M.setAttribute("transform",D);var N=M.transform.baseVal.consolidate()}return new tp(N?N.matrix:bv)})(y)};function tp(y){var M=[y.a,y.b],D=[y.c,y.d],N=xv(M),U=rp(M,D),Z=xv(zm(D,M,-U))||0;M[0]*D[1]<D[0]*M[1]&&(M[0]*=-1,M[1]*=-1,N*=-1,U*=-1),this.rotate=(N?Math.atan2(M[1],M[0]):Math.atan2(-D[0],D[1]))*_a,this.translate=[y.e,y.f],this.scale=[N,Z],this.skew=Z?Math.atan2(U,Z)*_a:0}tp.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function rp(y,M){return y[0]*M[0]+y[1]*M[1]}function xv(y){var M=Math.sqrt(rp(y,y));return M&&(y[0]/=M,y[1]/=M),M}function zm(y,M,D){return y[0]+=D*M[0],y[1]+=D*M[1],y}var bv={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=op;function yu(y){return y.length?y.pop()+",":""}function ap(y,M,D,N){if(y[0]!==M[0]||y[1]!==M[1]){var U=D.push("translate(",null,",",null,")");N.push({i:U-4,x:Eo(y[0],M[0])},{i:U-2,x:Eo(y[1],M[1])})}else(M[0]||M[1])&&D.push("translate("+M+")")}function Im(y,M,D,N){y!==M?(y-M>180?M+=360:M-y>180&&(y+=360),N.push({i:D.push(yu(D)+"rotate(",null,")")-2,x:Eo(y,M)})):M&&D.push(yu(D)+"rotate("+M+")")}function ip(y,M,D,N){y!==M?N.push({i:D.push(yu(D)+"skewX(",null,")")-2,x:Eo(y,M)}):M&&D.push(yu(D)+"skewX("+M+")")}function np(y,M,D,N){if(y[0]!==M[0]||y[1]!==M[1]){var U=D.push(yu(D)+"scale(",null,",",null,")");N.push({i:U-4,x:Eo(y[0],M[0])},{i:U-2,x:Eo(y[1],M[1])})}else(M[0]!==1||M[1]!==1)&&D.push(yu(D)+"scale("+M+")")}function op(y,M){var D=[],N=[];return y=e.transform(y),M=e.transform(M),ap(y.translate,M.translate,D,N),Im(y.rotate,M.rotate,D,N),ip(y.skew,M.skew,D,N),np(y.scale,M.scale,D,N),y=M=null,function(U){for(var Z=-1,$=N.length,X;++Z<$;)D[(X=N[Z]).i]=X.x(U);return D.join("")}}function Rm(y,M){return M=(M-=y=+y)||1/M,function(D){return(D-y)/M}}function cs(y,M){return M=(M-=y=+y)||1/M,function(D){return Math.max(0,Math.min(1,(D-y)/M))}}e.layout={},e.layout.bundle=function(){return function(y){for(var M=[],D=-1,N=y.length;++D<N;)M.push(Oc(y[D]));return M}};function Oc(y){for(var M=y.source,D=y.target,N=Uc(M,D),U=[M];M!==N;)M=M.parent,U.push(M);for(var Z=U.length;D!==N;)U.splice(Z,0,D),D=D.parent;return U}function bl(y){for(var M=[],D=y.parent;D!=null;)M.push(y),y=D,D=D.parent;return M.push(y),M}function Uc(y,M){if(y===M)return y;for(var D=bl(y),N=bl(M),U=D.pop(),Z=N.pop(),$=null;U===Z;)$=U,U=D.pop(),Z=N.pop();return $}e.layout.chord=function(){var y={},M,D,N,U,Z=0,$,X,ae;function pe(){var Pe={},Le=[],Je=e.range(U),nt=[],ze,Ue,je,st,it;for(M=[],D=[],ze=0,st=-1;++st<U;){for(Ue=0,it=-1;++it<U;)Ue+=N[st][it];Le.push(Ue),nt.push(e.range(U)),ze+=Ue}for($&&Je.sort(function(ea,Ur){return $(Le[ea],Le[Ur])}),X&&nt.forEach(function(ea,Ur){ea.sort(function(Kr,Ba){return X(N[Ur][Kr],N[Ur][Ba])})}),ze=(yr-Z*U)/ze,Ue=0,st=-1;++st<U;){for(je=Ue,it=-1;++it<U;){var We=Je[st],Bt=nt[We][it],nr=N[We][Bt],ur=Ue,sr=Ue+=nr*ze;Pe[We+"-"+Bt]={index:We,subindex:Bt,startAngle:ur,endAngle:sr,value:nr}}D[We]={index:We,startAngle:je,endAngle:Ue,value:Le[We]},Ue+=Z}for(st=-1;++st<U;)for(it=st-1;++it<U;){var Dr=Pe[st+"-"+it],Ir=Pe[it+"-"+st];(Dr.value||Ir.value)&&M.push(Dr.value<Ir.value?{source:Ir,target:Dr}:{source:Dr,target:Ir})}ae&&_e()}function _e(){M.sort(function(Pe,Le){return ae((Pe.source.value+Pe.target.value)/2,(Le.source.value+Le.target.value)/2)})}return y.matrix=function(Pe){return arguments.length?(U=(N=Pe)&&N.length,M=D=null,y):N},y.padding=function(Pe){return arguments.length?(Z=Pe,M=D=null,y):Z},y.sortGroups=function(Pe){return arguments.length?($=Pe,M=D=null,y):$},y.sortSubgroups=function(Pe){return arguments.length?(X=Pe,M=null,y):X},y.sortChords=function(Pe){return arguments.length?(ae=Pe,M&&_e(),y):ae},y.chords=function(){return M||pe(),M},y.groups=function(){return D||pe(),D},y},e.layout.force=function(){var y={},M=e.dispatch("start","tick","end"),D,N=[1,1],U,Z,$=.9,X=fn,ae=Fm,pe=-30,_e=qm,Pe=.1,Le=.64,Je=[],nt=[],ze,Ue,je;function st(We){return function(Bt,nr,ur,sr){if(Bt.point!==We){var Dr=Bt.cx-We.x,Ir=Bt.cy-We.y,ea=sr-nr,Ur=Dr*Dr+Ir*Ir;if(ea*ea/Le<Ur){if(Ur<_e){var Kr=Bt.charge/Ur;We.px-=Dr*Kr,We.py-=Ir*Kr}return!0}if(Bt.point&&Ur&&Ur<_e){var Kr=Bt.pointCharge/Ur;We.px-=Dr*Kr,We.py-=Ir*Kr}}return!Bt.charge}}y.tick=function(){if((Z*=.99)<.005)return D=null,M.end({type:"end",alpha:Z=0}),!0;var We=Je.length,Bt=nt.length,nr,ur,sr,Dr,Ir,ea,Ur,Kr,Ba;for(ur=0;ur<Bt;++ur)sr=nt[ur],Dr=sr.source,Ir=sr.target,Kr=Ir.x-Dr.x,Ba=Ir.y-Dr.y,(ea=Kr*Kr+Ba*Ba)&&(ea=Z*Ue[ur]*((ea=Math.sqrt(ea))-ze[ur])/ea,Kr*=ea,Ba*=ea,Ir.x-=Kr*(Ur=Dr.weight+Ir.weight?Dr.weight/(Dr.weight+Ir.weight):.5),Ir.y-=Ba*Ur,Dr.x+=Kr*(Ur=1-Ur),Dr.y+=Ba*Ur);if((Ur=Z*Pe)&&(Kr=N[0]/2,Ba=N[1]/2,ur=-1,Ur))for(;++ur<We;)sr=Je[ur],sr.x+=(Kr-sr.x)*Ur,sr.y+=(Ba-sr.y)*Ur;if(pe)for(As(nr=e.geom.quadtree(Je),Z,je),ur=-1;++ur<We;)(sr=Je[ur]).fixed||nr.visit(st(sr));for(ur=-1;++ur<We;)sr=Je[ur],sr.fixed?(sr.x=sr.px,sr.y=sr.py):(sr.x-=(sr.px-(sr.px=sr.x))*$,sr.y-=(sr.py-(sr.py=sr.y))*$);M.tick({type:"tick",alpha:Z})},y.nodes=function(We){return arguments.length?(Je=We,y):Je},y.links=function(We){return arguments.length?(nt=We,y):nt},y.size=function(We){return arguments.length?(N=We,y):N},y.linkDistance=function(We){return arguments.length?(X=typeof We=="function"?We:+We,y):X},y.distance=y.linkDistance,y.linkStrength=function(We){return arguments.length?(ae=typeof We=="function"?We:+We,y):ae},y.friction=function(We){return arguments.length?($=+We,y):$},y.charge=function(We){return arguments.length?(pe=typeof We=="function"?We:+We,y):pe},y.chargeDistance=function(We){return arguments.length?(_e=We*We,y):Math.sqrt(_e)},y.gravity=function(We){return arguments.length?(Pe=+We,y):Pe},y.theta=function(We){return arguments.length?(Le=We*We,y):Math.sqrt(Le)},y.alpha=function(We){return arguments.length?(We=+We,Z?We>0?Z=We:(D.c=null,D.t=NaN,D=null,M.end({type:"end",alpha:Z=0})):We>0&&(M.start({type:"start",alpha:Z=We}),D=Fc(y.tick)),y):Z},y.start=function(){var We,Bt=Je.length,nr=nt.length,ur=N[0],sr=N[1],Dr,Ir;for(We=0;We<Bt;++We)(Ir=Je[We]).index=We,Ir.weight=0;for(We=0;We<nr;++We)Ir=nt[We],typeof Ir.source=="number"&&(Ir.source=Je[Ir.source]),typeof Ir.target=="number"&&(Ir.target=Je[Ir.target]),++Ir.source.weight,++Ir.target.weight;for(We=0;We<Bt;++We)Ir=Je[We],isNaN(Ir.x)&&(Ir.x=ea("x",ur)),isNaN(Ir.y)&&(Ir.y=ea("y",sr)),isNaN(Ir.px)&&(Ir.px=Ir.x),isNaN(Ir.py)&&(Ir.py=Ir.y);if(ze=[],typeof X=="function")for(We=0;We<nr;++We)ze[We]=+X.call(this,nt[We],We);else for(We=0;We<nr;++We)ze[We]=X;if(Ue=[],typeof ae=="function")for(We=0;We<nr;++We)Ue[We]=+ae.call(this,nt[We],We);else for(We=0;We<nr;++We)Ue[We]=ae;if(je=[],typeof pe=="function")for(We=0;We<Bt;++We)je[We]=+pe.call(this,Je[We],We);else for(We=0;We<Bt;++We)je[We]=pe;function ea(Ur,Kr){if(!Dr){for(Dr=new Array(Bt),$a=0;$a<Bt;++$a)Dr[$a]=[];for($a=0;$a<nr;++$a){var Ba=nt[$a];Dr[Ba.source.index].push(Ba.target),Dr[Ba.target.index].push(Ba.source)}}for(var ri=Dr[We],$a=-1,Yt=ri.length,Jr;++$a<Yt;)if(!isNaN(Jr=ri[$a][Ur]))return Jr;return Math.random()*Kr}return y.resume()},y.resume=function(){return y.alpha(.1)},y.stop=function(){return y.alpha(0)},y.drag=function(){if(U||(U=e.behavior.drag().origin(Ee).on("dragstart.force",wl).on("drag.force",it).on("dragend.force",Tl)),!arguments.length)return U;this.on("mouseover.force",wv).on("mouseout.force",Vc).call(U)};function it(We){We.px=e.event.x,We.py=e.event.y,y.resume()}return e.rebind(y,M,"on")};function wl(y){y.fixed|=2}function Tl(y){y.fixed&=-7}function wv(y){y.fixed|=4,y.px=y.x,y.py=y.y}function Vc(y){y.fixed&=-5}function As(y,M,D){var N=0,U=0;if(y.charge=0,!y.leaf)for(var Z=y.nodes,$=Z.length,X=-1,ae;++X<$;)ae=Z[X],ae!=null&&(As(ae,M,D),y.charge+=ae.charge,N+=ae.charge*ae.cx,U+=ae.charge*ae.cy);if(y.point){y.leaf||(y.point.x+=Math.random()-.5,y.point.y+=Math.random()-.5);var pe=M*D[y.point.index];y.charge+=y.pointCharge=pe,N+=pe*y.point.x,U+=pe*y.point.y}y.cx=N/y.charge,y.cy=U/y.charge}var fn=20,Fm=1,qm=1/0;e.layout.hierarchy=function(){var y=rf,M=sp,D=lp;function N(U){var Z=[U],$=[],X;for(U.depth=0;(X=Z.pop())!=null;)if($.push(X),(pe=M.call(N,X,X.depth))&&(ae=pe.length)){for(var ae,pe,_e;--ae>=0;)Z.push(_e=pe[ae]),_e.parent=X,_e.depth=X.depth+1;D&&(X.value=0),X.children=pe}else D&&(X.value=+D.call(N,X,X.depth)||0),delete X.children;return hs(U,function(Pe){var Le,Je;y&&(Le=Pe.children)&&Le.sort(y),D&&(Je=Pe.parent)&&(Je.value+=Pe.value)}),$}return N.sort=function(U){return arguments.length?(y=U,N):y},N.children=function(U){return arguments.length?(M=U,N):M},N.value=function(U){return arguments.length?(D=U,N):D},N.revalue=function(U){return D&&(tf(U,function(Z){Z.children&&(Z.value=0)}),hs(U,function(Z){var $;Z.children||(Z.value=+D.call(N,Z,Z.depth)||0),($=Z.parent)&&($.value+=Z.value)})),U},N};function Al(y,M){return e.rebind(y,M,"sort","children","value"),y.nodes=y,y.links=up,y}function tf(y,M){for(var D=[y];(y=D.pop())!=null;)if(M(y),(U=y.children)&&(N=U.length))for(var N,U;--N>=0;)D.push(U[N])}function hs(y,M){for(var D=[y],N=[];(y=D.pop())!=null;)if(N.push(y),($=y.children)&&(Z=$.length))for(var U=-1,Z,$;++U<Z;)D.push($[U]);for(;(y=N.pop())!=null;)M(y)}function sp(y){return y.children}function lp(y){return y.value}function rf(y,M){return M.value-y.value}function up(y){return e.merge(y.map(function(M){return(M.children||[]).map(function(D){return{source:M,target:D}})}))}e.layout.partition=function(){var y=e.layout.hierarchy(),M=[1,1];function D(Z,$,X,ae){var pe=Z.children;if(Z.x=$,Z.y=Z.depth*ae,Z.dx=X,Z.dy=ae,pe&&(Pe=pe.length)){var _e=-1,Pe,Le,Je;for(X=Z.value?X/Z.value:0;++_e<Pe;)D(Le=pe[_e],$,Je=Le.value*X,ae),$+=Je}}function N(Z){var $=Z.children,X=0;if($&&(pe=$.length))for(var ae=-1,pe;++ae<pe;)X=Math.max(X,N($[ae]));return 1+X}function U(Z,$){var X=y.call(this,Z,$);return D(X[0],0,M[0],M[1]/N(X[0])),X}return U.size=function(Z){return arguments.length?(M=Z,U):M},Al(U,y)},e.layout.pie=function(){var y=Number,M=fp,D=0,N=yr,U=0;function Z($){var X=$.length,ae=$.map(function(st,it){return+y.call(Z,st,it)}),pe=+(typeof D=="function"?D.apply(this,arguments):D),_e=(typeof N=="function"?N.apply(this,arguments):N)-pe,Pe=Math.min(Math.abs(_e)/X,+(typeof U=="function"?U.apply(this,arguments):U)),Le=Pe*(_e<0?-1:1),Je=e.sum(ae),nt=Je?(_e-X*Le)/Je:0,ze=e.range(X),Ue=[],je;return M!=null&&ze.sort(M===fp?function(st,it){return ae[it]-ae[st]}:function(st,it){return M($[st],$[it])}),ze.forEach(function(st){Ue[st]={data:$[st],value:je=ae[st],startAngle:pe,endAngle:pe+=je*nt+Le,padAngle:Pe}}),Ue}return Z.value=function($){return arguments.length?(y=$,Z):y},Z.sort=function($){return arguments.length?(M=$,Z):M},Z.startAngle=function($){return arguments.length?(D=$,Z):D},Z.endAngle=function($){return arguments.length?(N=$,Z):N},Z.padAngle=function($){return arguments.length?(U=$,Z):U},Z};var fp={};e.layout.stack=function(){var y=Ee,M=Xf,D=Hc,N=Tv,U=Nm,Z=Bm;function $(X,ae){if(!(nt=X.length))return X;var pe=X.map(function(st,it){return y.call($,st,it)}),_e=pe.map(function(st){return st.map(function(it,We){return[U.call($,it,We),Z.call($,it,We)]})}),Pe=M.call($,_e,ae);pe=e.permute(pe,Pe),_e=e.permute(_e,Pe);var Le=D.call($,_e,ae),Je=pe[0].length,nt,ze,Ue,je;for(Ue=0;Ue<Je;++Ue)for(N.call($,pe[0][Ue],je=Le[Ue],_e[0][Ue][1]),ze=1;ze<nt;++ze)N.call($,pe[ze][Ue],je+=_e[ze-1][Ue][1],_e[ze][Ue][1]);return X}return $.values=function(X){return arguments.length?(y=X,$):y},$.order=function(X){return arguments.length?(M=typeof X=="function"?X:Av.get(X)||Xf,$):M},$.offset=function(X){return arguments.length?(D=typeof X=="function"?X:Mv.get(X)||Hc,$):D},$.x=function(X){return arguments.length?(U=X,$):U},$.y=function(X){return arguments.length?(Z=X,$):Z},$.out=function(X){return arguments.length?(N=X,$):N},$};function Nm(y){return y.x}function Bm(y){return y.y}function Tv(y,M,D){y.y0=M,y.y=D}var Av=e.map({"inside-out":function(y){var M=y.length,D,N,U=y.map(cp),Z=y.map(Ri),$=e.range(M).sort(function(Pe,Le){return U[Pe]-U[Le]}),X=0,ae=0,pe=[],_e=[];for(D=0;D<M;++D)N=$[D],X<ae?(X+=Z[N],pe.push(N)):(ae+=Z[N],_e.push(N));return _e.reverse().concat(pe)},reverse:function(y){return e.range(y.length).reverse()},default:Xf}),Mv=e.map({silhouette:function(y){var M=y.length,D=y[0].length,N=[],U=0,Z,$,X,ae=[];for($=0;$<D;++$){for(Z=0,X=0;Z<M;Z++)X+=y[Z][$][1];X>U&&(U=X),N.push(X)}for($=0;$<D;++$)ae[$]=(U-N[$])/2;return ae},wiggle:function(y){var M=y.length,D=y[0],N=D.length,U,Z,$,X,ae,pe,_e,Pe,Le,Je=[];for(Je[0]=Pe=Le=0,Z=1;Z<N;++Z){for(U=0,X=0;U<M;++U)X+=y[U][Z][1];for(U=0,ae=0,_e=D[Z][0]-D[Z-1][0];U<M;++U){for($=0,pe=(y[U][Z][1]-y[U][Z-1][1])/(2*_e);$<U;++$)pe+=(y[$][Z][1]-y[$][Z-1][1])/_e;ae+=pe*y[U][Z][1]}Je[Z]=Pe-=X?ae/X*_e:0,Pe<Le&&(Le=Pe)}for(Z=0;Z<N;++Z)Je[Z]-=Le;return Je},expand:function(y){var M=y.length,D=y[0].length,N=1/M,U,Z,$,X=[];for(Z=0;Z<D;++Z){for(U=0,$=0;U<M;U++)$+=y[U][Z][1];if($)for(U=0;U<M;U++)y[U][Z][1]/=$;else for(U=0;U<M;U++)y[U][Z][1]=N}for(Z=0;Z<D;++Z)X[Z]=0;return X},zero:Hc});function Xf(y){return e.range(y.length)}function Hc(y){for(var M=-1,D=y[0].length,N=[];++M<D;)N[M]=0;return N}function cp(y){for(var M=1,D=0,N=y[0][1],U,Z=y.length;M<Z;++M)(U=y[M][1])>N&&(D=M,N=U);return D}function Ri(y){return y.reduce(Om,0)}function Om(y,M){return y+M[1]}e.layout.histogram=function(){var y=!0,M=Number,D=hp,N=Gc;function U(Z,Le){for(var X=[],ae=Z.map(M,this),pe=D.call(this,ae,Le),_e=N.call(this,pe,ae,Le),Pe,Le=-1,Je=ae.length,nt=_e.length-1,ze=y?1:1/Je,Ue;++Le<nt;)Pe=X[Le]=[],Pe.dx=_e[Le+1]-(Pe.x=_e[Le]),Pe.y=0;if(nt>0)for(Le=-1;++Le<Je;)Ue=ae[Le],Ue>=pe[0]&&Ue<=pe[1]&&(Pe=X[e.bisect(_e,Ue,1,nt)-1],Pe.y+=ze,Pe.push(Z[Le]));return X}return U.value=function(Z){return arguments.length?(M=Z,U):M},U.range=function(Z){return arguments.length?(D=fa(Z),U):D},U.bins=function(Z){return arguments.length?(N=typeof Z=="number"?function($){return Sv($,Z)}:fa(Z),U):N},U.frequency=function(Z){return arguments.length?(y=!!Z,U):y},U};function Gc(y,M){return Sv(y,Math.ceil(Math.log(M.length)/Math.LN2+1))}function Sv(y,M){for(var D=-1,N=+y[0],U=(y[1]-N)/M,Z=[];++D<=M;)Z[D]=U*D+N;return Z}function hp(y){return[e.min(y),e.max(y)]}e.layout.pack=function(){var y=e.layout.hierarchy().sort(af),M=0,D=[1,1],N;function U(Z,$){var X=y.call(this,Z,$),ae=X[0],pe=D[0],_e=D[1],Pe=N==null?Math.sqrt:typeof N=="function"?N:function(){return N};if(ae.x=ae.y=0,hs(ae,function(Je){Je.r=+Pe(Je.value)}),hs(ae,jf),M){var Le=M*(N?1:Math.max(2*ae.r/pe,2*ae.r/_e))/2;hs(ae,function(Je){Je.r+=Le}),hs(ae,jf),hs(ae,function(Je){Je.r-=Le})}return Sl(ae,pe/2,_e/2,N?1:1/Math.max(2*ae.r/pe,2*ae.r/_e)),X}return U.size=function(Z){return arguments.length?(D=Z,U):D},U.radius=function(Z){return arguments.length?(N=Z==null||typeof Z=="function"?Z:+Z,U):N},U.padding=function(Z){return arguments.length?(M=+Z,U):M},Al(U,y)};function af(y,M){return y.value-M.value}function gu(y,M){var D=y._pack_next;y._pack_next=M,M._pack_prev=y,M._pack_next=D,D._pack_prev=M}function kv(y,M){y._pack_next=M,M._pack_prev=y}function _n(y,M){var D=M.x-y.x,N=M.y-y.y,U=y.r+M.r;return .999*U*U>D*D+N*N}function jf(y){if(!(M=y.children)||!(Le=M.length))return;var M,D=1/0,N=-1/0,U=1/0,Z=-1/0,$,X,ae,pe,_e,Pe,Le;function Je(We){D=Math.min(We.x-We.r,D),N=Math.max(We.x+We.r,N),U=Math.min(We.y-We.r,U),Z=Math.max(We.y+We.r,Z)}if(M.forEach(Js),$=M[0],$.x=-$.r,$.y=0,Je($),Le>1&&(X=M[1],X.x=X.r,X.y=0,Je(X),Le>2))for(ae=M[2],kl($,X,ae),Je(ae),gu($,ae),$._pack_prev=ae,gu(ae,X),X=$._pack_next,pe=3;pe<Le;pe++){kl($,X,ae=M[pe]);var nt=0,ze=1,Ue=1;for(_e=X._pack_next;_e!==X;_e=_e._pack_next,ze++)if(_n(_e,ae)){nt=1;break}if(nt==1)for(Pe=$._pack_prev;Pe!==_e._pack_prev&&!_n(Pe,ae);Pe=Pe._pack_prev,Ue++);nt?(ze<Ue||ze==Ue&&X.r<$.r?kv($,X=_e):kv($=Pe,X),pe--):(gu($,ae),X=ae,Je(ae))}var je=(D+N)/2,st=(U+Z)/2,it=0;for(pe=0;pe<Le;pe++)ae=M[pe],ae.x-=je,ae.y-=st,it=Math.max(it,ae.r+Math.sqrt(ae.x*ae.x+ae.y*ae.y));y.r=it,M.forEach(Ml)}function Js(y){y._pack_next=y._pack_prev=y}function Ml(y){delete y._pack_next,delete y._pack_prev}function Sl(y,M,D,N){var U=y.children;if(y.x=M+=N*y.x,y.y=D+=N*y.y,y.r*=N,U)for(var Z=-1,$=U.length;++Z<$;)Sl(U[Z],M,D,N)}function kl(y,M,D){var N=y.r+D.r,U=M.x-y.x,Z=M.y-y.y;if(N&&(U||Z)){var $=M.r+D.r,X=U*U+Z*Z;$*=$,N*=N;var ae=.5+(N-$)/(2*X),pe=Math.sqrt(Math.max(0,2*$*(N+X)-(N-=X)*N-$*$))/(2*X);D.x=y.x+ae*U+pe*Z,D.y=y.y+ae*Z-pe*U}else D.x=y.x+N,D.y=y.y}e.layout.tree=function(){var y=e.layout.hierarchy().sort(null).value(null),M=Ks,D=[1,1],N=null;function U(_e,Pe){var Le=y.call(this,_e,Pe),Je=Le[0],nt=Z(Je);if(hs(nt,$),nt.parent.m=-nt.z,tf(nt,X),N)tf(Je,pe);else{var ze=Je,Ue=Je,je=Je;tf(Je,function(Bt){Bt.x<ze.x&&(ze=Bt),Bt.x>Ue.x&&(Ue=Bt),Bt.depth>je.depth&&(je=Bt)});var st=M(ze,Ue)/2-ze.x,it=D[0]/(Ue.x+M(Ue,ze)/2+st),We=D[1]/(je.depth||1);tf(Je,function(Bt){Bt.x=(Bt.x+st)*it,Bt.y=Bt.depth*We})}return Le}function Z(_e){for(var Pe={A:null,children:[_e]},Le=[Pe],Je;(Je=Le.pop())!=null;)for(var nt=Je.children,ze,Ue=0,je=nt.length;Ue<je;++Ue)Le.push((nt[Ue]=ze={_:nt[Ue],parent:Je,children:(ze=nt[Ue].children)&&ze.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ue}).a=ze);return Pe.children[0]}function $(_e){var Pe=_e.children,Le=_e.parent.children,Je=_e.i?Le[_e.i-1]:null;if(Pe.length){vp(_e);var nt=(Pe[0].z+Pe[Pe.length-1].z)/2;Je?(_e.z=Je.z+M(_e._,Je._),_e.m=_e.z-nt):_e.z=nt}else Je&&(_e.z=Je.z+M(_e._,Je._));_e.parent.A=ae(_e,Je,_e.parent.A||Le[0])}function X(_e){_e._.x=_e.z+_e.parent.m,_e.m+=_e.parent.m}function ae(_e,Pe,Le){if(Pe){for(var Je=_e,nt=_e,ze=Pe,Ue=Je.parent.children[0],je=Je.m,st=nt.m,it=ze.m,We=Ue.m,Bt;ze=Ss(ze),Je=Ms(Je),ze&&Je;)Ue=Ms(Ue),nt=Ss(nt),nt.a=_e,Bt=ze.z+it-Je.z-je+M(ze._,Je._),Bt>0&&(Cl(Um(ze,_e,Le),_e,Bt),je+=Bt,st+=Bt),it+=ze.m,je+=Je.m,We+=Ue.m,st+=nt.m;ze&&!Ss(nt)&&(nt.t=ze,nt.m+=it-st),Je&&!Ms(Ue)&&(Ue.t=Je,Ue.m+=je-We,Le=_e)}return Le}function pe(_e){_e.x*=D[0],_e.y=_e.depth*D[1]}return U.separation=function(_e){return arguments.length?(M=_e,U):M},U.size=function(_e){return arguments.length?(N=(D=_e)==null?pe:null,U):N?null:D},U.nodeSize=function(_e){return arguments.length?(N=(D=_e)==null?null:pe,U):N?D:null},Al(U,y)};function Ks(y,M){return y.parent==M.parent?1:2}function Ms(y){var M=y.children;return M.length?M[0]:y.t}function Ss(y){var M=y.children,D;return(D=M.length)?M[D-1]:y.t}function Cl(y,M,D){var N=D/(M.i-y.i);M.c-=N,M.s+=D,y.c+=N,M.z+=D,M.m+=D}function vp(y){for(var M=0,D=0,N=y.children,U=N.length,Z;--U>=0;)Z=N[U],Z.z+=M,Z.m+=M,M+=Z.s+(D+=Z.c)}function Um(y,M,D){return y.a.parent===M.parent?y.a:D}e.layout.cluster=function(){var y=e.layout.hierarchy().sort(null).value(null),M=Ks,D=[1,1],N=!1;function U(Z,$){var X=y.call(this,Z,$),ae=X[0],pe,_e=0;hs(ae,function(ze){var Ue=ze.children;Ue&&Ue.length?(ze.x=Hm(Ue),ze.y=Vm(Ue)):(ze.x=pe?_e+=M(ze,pe):0,ze.y=0,pe=ze)});var Pe=dp(ae),Le=pp(ae),Je=Pe.x-M(Pe,Le)/2,nt=Le.x+M(Le,Pe)/2;return hs(ae,N?function(ze){ze.x=(ze.x-ae.x)*D[0],ze.y=(ae.y-ze.y)*D[1]}:function(ze){ze.x=(ze.x-Je)/(nt-Je)*D[0],ze.y=(1-(ae.y?ze.y/ae.y:1))*D[1]}),X}return U.separation=function(Z){return arguments.length?(M=Z,U):M},U.size=function(Z){return arguments.length?(N=(D=Z)==null,U):N?null:D},U.nodeSize=function(Z){return arguments.length?(N=(D=Z)!=null,U):N?D:null},Al(U,y)};function Vm(y){return 1+e.max(y,function(M){return M.y})}function Hm(y){return y.reduce(function(M,D){return M+D.x},0)/y.length}function dp(y){var M=y.children;return M&&M.length?dp(M[0]):y}function pp(y){var M=y.children,D;return M&&(D=M.length)?pp(M[D-1]):y}e.layout.treemap=function(){var y=e.layout.hierarchy(),M=Math.round,D=[1,1],N=null,U=Cv,Z=!1,$,X="squarify",ae=.5*(1+Math.sqrt(5));function pe(ze,Ue){for(var je=-1,st=ze.length,it,We;++je<st;)We=(it=ze[je]).value*(Ue<0?0:Ue),it.area=isNaN(We)||We<=0?0:We}function _e(ze){var Ue=ze.children;if(Ue&&Ue.length){var je=U(ze),st=[],it=Ue.slice(),We,Bt=1/0,nr,ur=X==="slice"?je.dx:X==="dice"?je.dy:X==="slice-dice"?ze.depth&1?je.dy:je.dx:Math.min(je.dx,je.dy),sr;for(pe(it,je.dx*je.dy/ze.value),st.area=0;(sr=it.length)>0;)st.push(We=it[sr-1]),st.area+=We.area,X!=="squarify"||(nr=Le(st,ur))<=Bt?(it.pop(),Bt=nr):(st.area-=st.pop().area,Je(st,ur,je,!1),ur=Math.min(je.dx,je.dy),st.length=st.area=0,Bt=1/0);st.length&&(Je(st,ur,je,!0),st.length=st.area=0),Ue.forEach(_e)}}function Pe(ze){var Ue=ze.children;if(Ue&&Ue.length){var je=U(ze),st=Ue.slice(),it,We=[];for(pe(st,je.dx*je.dy/ze.value),We.area=0;it=st.pop();)We.push(it),We.area+=it.area,it.z!=null&&(Je(We,it.z?je.dx:je.dy,je,!st.length),We.length=We.area=0);Ue.forEach(Pe)}}function Le(ze,Ue){for(var je=ze.area,st,it=0,We=1/0,Bt=-1,nr=ze.length;++Bt<nr;)(st=ze[Bt].area)&&(st<We&&(We=st),st>it&&(it=st));return je*=je,Ue*=Ue,je?Math.max(Ue*it*ae/je,je/(Ue*We*ae)):1/0}function Je(ze,Ue,je,st){var it=-1,We=ze.length,Bt=je.x,nr=je.y,ur=Ue?M(ze.area/Ue):0,sr;if(Ue==je.dx){for((st||ur>je.dy)&&(ur=je.dy);++it<We;)sr=ze[it],sr.x=Bt,sr.y=nr,sr.dy=ur,Bt+=sr.dx=Math.min(je.x+je.dx-Bt,ur?M(sr.area/ur):0);sr.z=!0,sr.dx+=je.x+je.dx-Bt,je.y+=ur,je.dy-=ur}else{for((st||ur>je.dx)&&(ur=je.dx);++it<We;)sr=ze[it],sr.x=Bt,sr.y=nr,sr.dx=ur,nr+=sr.dy=Math.min(je.y+je.dy-nr,ur?M(sr.area/ur):0);sr.z=!1,sr.dy+=je.y+je.dy-nr,je.x+=ur,je.dx-=ur}}function nt(ze){var Ue=$||y(ze),je=Ue[0];return je.x=je.y=0,je.value?(je.dx=D[0],je.dy=D[1]):je.dx=je.dy=0,$&&y.revalue(je),pe([je],je.dx*je.dy/je.value),($?Pe:_e)(je),Z&&($=Ue),Ue}return nt.size=function(ze){return arguments.length?(D=ze,nt):D},nt.padding=function(ze){if(!arguments.length)return N;function Ue(it){var We=ze.call(nt,it,it.depth);return We==null?Cv(it):Ev(it,typeof We=="number"?[We,We,We,We]:We)}function je(it){return Ev(it,ze)}var st;return U=(N=ze)==null?Cv:(st=typeof ze)=="function"?Ue:(st==="number"&&(ze=[ze,ze,ze,ze]),je),nt},nt.round=function(ze){return arguments.length?(M=ze?Math.round:Number,nt):M!=Number},nt.sticky=function(ze){return arguments.length?(Z=ze,$=null,nt):Z},nt.ratio=function(ze){return arguments.length?(ae=ze,nt):ae},nt.mode=function(ze){return arguments.length?(X=ze+"",nt):X},Al(nt,y)};function Cv(y){return{x:y.x,y:y.y,dx:y.dx,dy:y.dy}}function Ev(y,M){var D=y.x+M[3],N=y.y+M[0],U=y.dx-M[1]-M[3],Z=y.dy-M[0]-M[2];return U<0&&(D+=U/2,U=0),Z<0&&(N+=Z/2,Z=0),{x:D,y:N,dx:U,dy:Z}}e.random={normal:function(y,M){var D=arguments.length;return D<2&&(M=1),D<1&&(y=0),function(){var N,U,Z;do N=Math.random()*2-1,U=Math.random()*2-1,Z=N*N+U*U;while(!Z||Z>1);return y+M*N*Math.sqrt(-2*Math.log(Z)/Z)}},logNormal:function(){var y=e.random.normal.apply(e,arguments);return function(){return Math.exp(y())}},bates:function(y){var M=e.random.irwinHall(y);return function(){return M()/y}},irwinHall:function(y){return function(){for(var M=0,D=0;D<y;D++)M+=Math.random();return M}}},e.scale={};function Jf(y){var M=y[0],D=y[y.length-1];return M<D?[M,D]:[D,M]}function Zc(y){return y.rangeExtent?y.rangeExtent():Jf(y.range())}function mp(y,M,D,N){var U=D(y[0],y[1]),Z=N(M[0],M[1]);return function($){return Z(U($))}}function Lv(y,M){var D=0,N=y.length-1,U=y[D],Z=y[N],$;return Z<U&&($=D,D=N,N=$,$=U,U=Z,Z=$),y[D]=M.floor(U),y[N]=M.ceil(Z),y}function yp(y){return y?{floor:function(M){return Math.floor(M/y)*y},ceil:function(M){return Math.ceil(M/y)*y}}:nf}var nf={floor:Ee,ceil:Ee};function Gm(y,M,D,N){var U=[],Z=[],$=0,X=Math.min(y.length,M.length)-1;for(y[X]<y[0]&&(y=y.slice().reverse(),M=M.slice().reverse());++$<=X;)U.push(D(y[$-1],y[$])),Z.push(N(M[$-1],M[$]));return function(ae){var pe=e.bisect(y,ae,1,X)-1;return Z[pe](U[pe](ae))}}e.scale.linear=function(){return gp([0,1],[0,1],on,!1)};function gp(y,M,D,N){var U,Z;function $(){var ae=Math.min(y.length,M.length)>2?Gm:mp,pe=N?cs:Rm;return U=ae(y,M,pe,D),Z=ae(M,y,pe,on),X}function X(ae){return U(ae)}return X.invert=function(ae){return Z(ae)},X.domain=function(ae){return arguments.length?(y=ae.map(Number),$()):y},X.range=function(ae){return arguments.length?(M=ae,$()):M},X.rangeRound=function(ae){return X.range(ae).interpolate(_v)},X.clamp=function(ae){return arguments.length?(N=ae,$()):N},X.interpolate=function(ae){return arguments.length?(D=ae,$()):D},X.ticks=function(ae){return Dv(y,ae)},X.tickFormat=function(ae,pe){return d3_scale_linearTickFormat(y,ae,pe)},X.nice=function(ae){return xp(y,ae),$()},X.copy=function(){return gp(y,M,D,N)},$()}function _p(y,M){return e.rebind(y,M,"range","rangeRound","interpolate","clamp")}function xp(y,M){return Lv(y,yp(Pv(y,M)[2])),Lv(y,yp(Pv(y,M)[2])),y}function Pv(y,M){M==null&&(M=10);var D=Jf(y),N=D[1]-D[0],U=Math.pow(10,Math.floor(Math.log(N/M)/Math.LN10)),Z=M/N*U;return Z<=.15?U*=10:Z<=.35?U*=5:Z<=.75&&(U*=2),D[0]=Math.ceil(D[0]/U)*U,D[1]=Math.floor(D[1]/U)*U+U*.5,D[2]=U,D}function Dv(y,M){return e.range.apply(e,Pv(y,M))}var _u={s:1,g:1,p:1,r:1,e:1};function El(y){return-Math.floor(Math.log(y)/Math.LN10+.01)}function Kf(y,M){var D=El(M[2]);return y in _u?Math.abs(D-El(Math.max(I(M[0]),I(M[1]))))+ +(y!=="e"):D-(y==="%")*2}e.scale.log=function(){return zv(e.scale.linear().domain([0,1]),10,!0,[1,10])};function zv(y,M,D,N){function U(X){return(D?Math.log(X<0?0:X):-Math.log(X>0?0:-X))/Math.log(M)}function Z(X){return D?Math.pow(M,X):-Math.pow(M,-X)}function $(X){return y(U(X))}return $.invert=function(X){return Z(y.invert(X))},$.domain=function(X){return arguments.length?(D=X[0]>=0,y.domain((N=X.map(Number)).map(U)),$):N},$.base=function(X){return arguments.length?(M=+X,y.domain(N.map(U)),$):M},$.nice=function(){var X=Lv(N.map(U),D?Math:Yc);return y.domain(X),N=X.map(Z),$},$.ticks=function(){var X=Jf(N),ae=[],pe=X[0],_e=X[1],Pe=Math.floor(U(pe)),Le=Math.ceil(U(_e)),Je=M%1?2:M;if(isFinite(Le-Pe)){if(D){for(;Pe<Le;Pe++)for(var nt=1;nt<Je;nt++)ae.push(Z(Pe)*nt);ae.push(Z(Pe))}else for(ae.push(Z(Pe));Pe++<Le;)for(var nt=Je-1;nt>0;nt--)ae.push(Z(Pe)*nt);for(Pe=0;ae[Pe]<pe;Pe++);for(Le=ae.length;ae[Le-1]>_e;Le--);ae=ae.slice(Pe,Le)}return ae},$.copy=function(){return zv(y.copy(),M,D,N)},_p($,y)}var Yc={floor:function(y){return-Math.ceil(-y)},ceil:function(y){return-Math.floor(-y)}};e.scale.pow=function(){return Wc(e.scale.linear(),1,[0,1])};function Wc(y,M,D){var N=Xc(M),U=Xc(1/M);function Z($){return y(N($))}return Z.invert=function($){return U(y.invert($))},Z.domain=function($){return arguments.length?(y.domain((D=$.map(Number)).map(N)),Z):D},Z.ticks=function($){return Dv(D,$)},Z.tickFormat=function($,X){return d3_scale_linearTickFormat(D,$,X)},Z.nice=function($){return Z.domain(xp(D,$))},Z.exponent=function($){return arguments.length?(N=Xc(M=$),U=Xc(1/M),y.domain(D.map(N)),Z):M},Z.copy=function(){return Wc(y.copy(),M,D)},_p(Z,y)}function Xc(y){return function(M){return M<0?-Math.pow(-M,y):Math.pow(M,y)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return Ll([],{t:"range",a:[[]]})};function Ll(y,M){var D,N,U;function Z(X){return N[((D.get(X)||(M.t==="range"?D.set(X,y.push(X)):NaN))-1)%N.length]}function $(X,ae){return e.range(y.length).map(function(pe){return X+ae*pe})}return Z.domain=function(X){if(!arguments.length)return y;y=[],D=new z;for(var ae=-1,pe=X.length,_e;++ae<pe;)D.has(_e=X[ae])||D.set(_e,y.push(_e));return Z[M.t].apply(Z,M.a)},Z.range=function(X){return arguments.length?(N=X,U=0,M={t:"range",a:arguments},Z):N},Z.rangePoints=function(X,ae){arguments.length<2&&(ae=0);var pe=X[0],_e=X[1],Pe=y.length<2?(pe=(pe+_e)/2,0):(_e-pe)/(y.length-1+ae);return N=$(pe+Pe*ae/2,Pe),U=0,M={t:"rangePoints",a:arguments},Z},Z.rangeRoundPoints=function(X,ae){arguments.length<2&&(ae=0);var pe=X[0],_e=X[1],Pe=y.length<2?(pe=_e=Math.round((pe+_e)/2),0):(_e-pe)/(y.length-1+ae)|0;return N=$(pe+Math.round(Pe*ae/2+(_e-pe-(y.length-1+ae)*Pe)/2),Pe),U=0,M={t:"rangeRoundPoints",a:arguments},Z},Z.rangeBands=function(X,ae,pe){arguments.length<2&&(ae=0),arguments.length<3&&(pe=ae);var _e=X[1]<X[0],Pe=X[_e-0],Le=X[1-_e],Je=(Le-Pe)/(y.length-ae+2*pe);return N=$(Pe+Je*pe,Je),_e&&N.reverse(),U=Je*(1-ae),M={t:"rangeBands",a:arguments},Z},Z.rangeRoundBands=function(X,ae,pe){arguments.length<2&&(ae=0),arguments.length<3&&(pe=ae);var _e=X[1]<X[0],Pe=X[_e-0],Le=X[1-_e],Je=Math.floor((Le-Pe)/(y.length-ae+2*pe));return N=$(Pe+Math.round((Le-Pe-(y.length-ae)*Je)/2),Je),_e&&N.reverse(),U=Math.round(Je*(1-ae)),M={t:"rangeRoundBands",a:arguments},Z},Z.rangeBand=function(){return U},Z.rangeExtent=function(){return Jf(M.a[0])},Z.copy=function(){return Ll(y,M)},Z.domain(y)}e.scale.category10=function(){return e.scale.ordinal().range(jc)},e.scale.category20=function(){return e.scale.ordinal().range(xu)},e.scale.category20b=function(){return e.scale.ordinal().range(of)},e.scale.category20c=function(){return e.scale.ordinal().range(bp)};var jc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ii),xu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ii),of=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ii),bp=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ii);e.scale.quantile=function(){return Jc([],[])};function Jc(y,M){var D;function N(){var Z=0,$=M.length;for(D=[];++Z<$;)D[Z-1]=e.quantile(y,Z/$);return U}function U(Z){if(!isNaN(Z=+Z))return M[e.bisect(D,Z)]}return U.domain=function(Z){return arguments.length?(y=Z.map(T).filter(S).sort(b),N()):y},U.range=function(Z){return arguments.length?(M=Z,N()):M},U.quantiles=function(){return D},U.invertExtent=function(Z){return Z=M.indexOf(Z),Z<0?[NaN,NaN]:[Z>0?D[Z-1]:y[0],Z<D.length?D[Z]:y[y.length-1]]},U.copy=function(){return Jc(y,M)},N()}e.scale.quantize=function(){return di(0,1,[0,1])};function di(y,M,D){var N,U;function Z(X){return D[Math.max(0,Math.min(U,Math.floor(N*(X-y))))]}function $(){return N=D.length/(M-y),U=D.length-1,Z}return Z.domain=function(X){return arguments.length?(y=+X[0],M=+X[X.length-1],$()):[y,M]},Z.range=function(X){return arguments.length?(D=X,$()):D},Z.invertExtent=function(X){return X=D.indexOf(X),X=X<0?NaN:X/N+y,[X,X+1/N]},Z.copy=function(){return di(y,M,D)},$()}e.scale.threshold=function(){return Qf([.5],[0,1])};function Qf(y,M){function D(N){if(N<=N)return M[e.bisect(y,N)]}return D.domain=function(N){return arguments.length?(y=N,D):y},D.range=function(N){return arguments.length?(M=N,D):M},D.invertExtent=function(N){return N=M.indexOf(N),[y[N-1],y[N]]},D.copy=function(){return Qf(y,M)},D}e.scale.identity=function(){return wp([0,1])};function wp(y){function M(D){return+D}return M.invert=M,M.domain=M.range=function(D){return arguments.length?(y=D.map(M),M):y},M.ticks=function(D){return Dv(y,D)},M.tickFormat=function(D,N){return d3_scale_linearTickFormat(y,D,N)},M.copy=function(){return wp(y)},M}e.svg={};function Tp(){return 0}e.svg.arc=function(){var y=Ap,M=Mp,D=Tp,N=Pl,U=Iv,Z=Sp,$=Zm;function X(){var pe=Math.max(0,+y.apply(this,arguments)),_e=Math.max(0,+M.apply(this,arguments)),Pe=U.apply(this,arguments)-Tr,Le=Z.apply(this,arguments)-Tr,Je=Math.abs(Le-Pe),nt=Pe>Le?0:1;if(_e<pe&&(ze=_e,_e=pe,pe=ze),Je>=Er)return ae(_e,nt)+(pe?ae(pe,1-nt):"")+"Z";var ze,Ue,je,st,it=0,We=0,Bt,nr,ur,sr,Dr,Ir,ea,Ur,Kr=[];if((st=(+$.apply(this,arguments)||0)/2)&&(je=N===Pl?Math.sqrt(pe*pe+_e*_e):+N.apply(this,arguments),nt||(We*=-1),_e&&(We=Ki(je/_e*Math.sin(st))),pe&&(it=Ki(je/pe*Math.sin(st)))),_e){Bt=_e*Math.cos(Pe+We),nr=_e*Math.sin(Pe+We),ur=_e*Math.cos(Le-We),sr=_e*Math.sin(Le-We);var Ba=Math.abs(Le-Pe-2*We)<=ct?0:1;if(We&&Dl(Bt,nr,ur,sr)===nt^Ba){var ri=(Pe+Le)/2;Bt=_e*Math.cos(ri),nr=_e*Math.sin(ri),ur=sr=null}}else Bt=nr=0;if(pe){Dr=pe*Math.cos(Le-it),Ir=pe*Math.sin(Le-it),ea=pe*Math.cos(Pe+it),Ur=pe*Math.sin(Pe+it);var $a=Math.abs(Pe-Le+2*it)<=ct?0:1;if(it&&Dl(Dr,Ir,ea,Ur)===1-nt^$a){var Yt=(Pe+Le)/2;Dr=pe*Math.cos(Yt),Ir=pe*Math.sin(Yt),ea=Ur=null}}else Dr=Ir=0;if(Je>He&&(ze=Math.min(Math.abs(_e-pe)/2,+D.apply(this,arguments)))>.001){Ue=pe<_e^nt?0:1;var Jr=ze,oa=ze;if(Je<ct){var sa=ea==null?[Dr,Ir]:ur==null?[Bt,nr]:Ho([Bt,nr],[ea,Ur],[ur,sr],[Dr,Ir]),Ei=Bt-sa[0],Oi=nr-sa[1],$i=ur-sa[0],xi=sr-sa[1],xn=1/Math.sin(Math.acos((Ei*$i+Oi*xi)/(Math.sqrt(Ei*Ei+Oi*Oi)*Math.sqrt($i*$i+xi*xi)))/2),br=Math.sqrt(sa[0]*sa[0]+sa[1]*sa[1]);oa=Math.min(ze,(pe-br)/(xn-1)),Jr=Math.min(ze,(_e-br)/(xn+1))}if(ur!=null){var Vr=bu(ea==null?[Dr,Ir]:[ea,Ur],[Bt,nr],_e,Jr,nt),Fi=bu([ur,sr],[Dr,Ir],_e,Jr,nt);ze===Jr?Kr.push("M",Vr[0],"A",Jr,",",Jr," 0 0,",Ue," ",Vr[1],"A",_e,",",_e," 0 ",1-nt^Dl(Vr[1][0],Vr[1][1],Fi[1][0],Fi[1][1]),",",nt," ",Fi[1],"A",Jr,",",Jr," 0 0,",Ue," ",Fi[0]):Kr.push("M",Vr[0],"A",Jr,",",Jr," 0 1,",Ue," ",Fi[0])}else Kr.push("M",Bt,",",nr);if(ea!=null){var Ti=bu([Bt,nr],[ea,Ur],pe,-oa,nt),lo=bu([Dr,Ir],ur==null?[Bt,nr]:[ur,sr],pe,-oa,nt);ze===oa?Kr.push("L",lo[0],"A",oa,",",oa," 0 0,",Ue," ",lo[1],"A",pe,",",pe," 0 ",nt^Dl(lo[1][0],lo[1][1],Ti[1][0],Ti[1][1]),",",1-nt," ",Ti[1],"A",oa,",",oa," 0 0,",Ue," ",Ti[0]):Kr.push("L",lo[0],"A",oa,",",oa," 0 0,",Ue," ",Ti[0])}else Kr.push("L",Dr,",",Ir)}else Kr.push("M",Bt,",",nr),ur!=null&&Kr.push("A",_e,",",_e," 0 ",Ba,",",nt," ",ur,",",sr),Kr.push("L",Dr,",",Ir),ea!=null&&Kr.push("A",pe,",",pe," 0 ",$a,",",1-nt," ",ea,",",Ur);return Kr.push("Z"),Kr.join("")}function ae(pe,_e){return"M0,"+pe+"A"+pe+","+pe+" 0 1,"+_e+" 0,"+-pe+"A"+pe+","+pe+" 0 1,"+_e+" 0,"+pe}return X.innerRadius=function(pe){return arguments.length?(y=fa(pe),X):y},X.outerRadius=function(pe){return arguments.length?(M=fa(pe),X):M},X.cornerRadius=function(pe){return arguments.length?(D=fa(pe),X):D},X.padRadius=function(pe){return arguments.length?(N=pe==Pl?Pl:fa(pe),X):N},X.startAngle=function(pe){return arguments.length?(U=fa(pe),X):U},X.endAngle=function(pe){return arguments.length?(Z=fa(pe),X):Z},X.padAngle=function(pe){return arguments.length?($=fa(pe),X):$},X.centroid=function(){var pe=(+y.apply(this,arguments)+ +M.apply(this,arguments))/2,_e=(+U.apply(this,arguments)+ +Z.apply(this,arguments))/2-Tr;return[Math.cos(_e)*pe,Math.sin(_e)*pe]},X};var Pl="auto";function Ap(y){return y.innerRadius}function Mp(y){return y.outerRadius}function Iv(y){return y.startAngle}function Sp(y){return y.endAngle}function Zm(y){return y&&y.padAngle}function Dl(y,M,D,N){return(y-D)*M-(M-N)*y>0?0:1}function bu(y,M,D,N,U){var Z=y[0]-M[0],$=y[1]-M[1],X=(U?N:-N)/Math.sqrt(Z*Z+$*$),ae=X*$,pe=-X*Z,_e=y[0]+ae,Pe=y[1]+pe,Le=M[0]+ae,Je=M[1]+pe,nt=(_e+Le)/2,ze=(Pe+Je)/2,Ue=Le-_e,je=Je-Pe,st=Ue*Ue+je*je,it=D-N,We=_e*Je-Le*Pe,Bt=(je<0?-1:1)*Math.sqrt(Math.max(0,it*it*st-We*We)),nr=(We*je-Ue*Bt)/st,ur=(-We*Ue-je*Bt)/st,sr=(We*je+Ue*Bt)/st,Dr=(-We*Ue+je*Bt)/st,Ir=nr-nt,ea=ur-ze,Ur=sr-nt,Kr=Dr-ze;return Ir*Ir+ea*ea>Ur*Ur+Kr*Kr&&(nr=sr,ur=Dr),[[nr-ae,ur-pe],[nr*D/it,ur*D/it]]}function $f(){return!0}function ks(y){var M=hu,D=dl,N=$f,U=Xo,Z=U.key,$=.7;function X(ae){var pe=[],_e=[],Pe=-1,Le=ae.length,Je,nt=fa(M),ze=fa(D);function Ue(){pe.push("M",U(y(_e),$))}for(;++Pe<Le;)N.call(this,Je=ae[Pe],Pe)?_e.push([+nt.call(this,Je,Pe),+ze.call(this,Je,Pe)]):_e.length&&(Ue(),_e=[]);return _e.length&&Ue(),pe.length?pe.join(""):null}return X.x=function(ae){return arguments.length?(M=ae,X):M},X.y=function(ae){return arguments.length?(D=ae,X):D},X.defined=function(ae){return arguments.length?(N=ae,X):N},X.interpolate=function(ae){return arguments.length?(typeof ae=="function"?Z=U=ae:Z=(U=Cs.get(ae)||Xo).key,X):Z},X.tension=function(ae){return arguments.length?($=ae,X):$},X}e.svg.line=function(){return ks(Ee)};var Cs=e.map({linear:Xo,"linear-closed":sf,step:Ym,"step-before":lf,"step-after":Rv,basis:wu,"basis-open":Xm,"basis-closed":jm,bundle:Qc,cardinal:Fv,"cardinal-open":Wm,"cardinal-closed":vs,monotone:Cp});Cs.forEach(function(y,M){M.key=y,M.closed=/-closed$/.test(y)});function Xo(y){return y.length>1?y.join("L"):y+"Z"}function sf(y){return y.join("L")+"Z"}function Ym(y){for(var M=0,D=y.length,N=y[0],U=[N[0],",",N[1]];++M<D;)U.push("H",(N[0]+(N=y[M])[0])/2,"V",N[1]);return D>1&&U.push("H",N[0]),U.join("")}function lf(y){for(var M=0,D=y.length,N=y[0],U=[N[0],",",N[1]];++M<D;)U.push("V",(N=y[M])[1],"H",N[0]);return U.join("")}function Rv(y){for(var M=0,D=y.length,N=y[0],U=[N[0],",",N[1]];++M<D;)U.push("H",(N=y[M])[0],"V",N[1]);return U.join("")}function Wm(y,M){return y.length<4?Xo(y):y[1]+uf(y.slice(1,-1),Kc(y,M))}function vs(y,M){return y.length<3?sf(y):y[0]+uf((y.push(y[0]),y),Kc([y[y.length-2]].concat(y,[y[1]]),M))}function Fv(y,M){return y.length<3?Xo(y):y[0]+uf(y,Kc(y,M))}function uf(y,M){if(M.length<1||y.length!=M.length&&y.length!=M.length+2)return Xo(y);var D=y.length!=M.length,N="",U=y[0],Z=y[1],$=M[0],X=$,ae=1;if(D&&(N+="Q"+(Z[0]-$[0]*2/3)+","+(Z[1]-$[1]*2/3)+","+Z[0]+","+Z[1],U=y[1],ae=2),M.length>1){X=M[1],Z=y[ae],ae++,N+="C"+(U[0]+$[0])+","+(U[1]+$[1])+","+(Z[0]-X[0])+","+(Z[1]-X[1])+","+Z[0]+","+Z[1];for(var pe=2;pe<M.length;pe++,ae++)Z=y[ae],X=M[pe],N+="S"+(Z[0]-X[0])+","+(Z[1]-X[1])+","+Z[0]+","+Z[1]}if(D){var _e=y[ae];N+="Q"+(Z[0]+X[0]*2/3)+","+(Z[1]+X[1]*2/3)+","+_e[0]+","+_e[1]}return N}function Kc(y,M){for(var D=[],N=(1-M)/2,U,Z=y[0],$=y[1],X=1,ae=y.length;++X<ae;)U=Z,Z=$,$=y[X],D.push([N*($[0]-U[0]),N*($[1]-U[1])]);return D}function wu(y){if(y.length<3)return Xo(y);var M=1,D=y.length,N=y[0],U=N[0],Z=N[1],$=[U,U,U,(N=y[1])[0]],X=[Z,Z,Z,N[1]],ae=[U,",",Z,"L",go(zl,$),",",go(zl,X)];for(y.push(y[D-1]);++M<=D;)N=y[M],$.shift(),$.push(N[0]),X.shift(),X.push(N[1]),cf(ae,$,X);return y.pop(),ae.push("L",N),ae.join("")}function Xm(y){if(y.length<4)return Xo(y);for(var M=[],D=-1,N=y.length,U,Z=[0],$=[0];++D<3;)U=y[D],Z.push(U[0]),$.push(U[1]);for(M.push(go(zl,Z)+","+go(zl,$)),--D;++D<N;)U=y[D],Z.shift(),Z.push(U[0]),$.shift(),$.push(U[1]),cf(M,Z,$);return M.join("")}function jm(y){for(var M,D=-1,N=y.length,U=N+4,Z,$=[],X=[];++D<4;)Z=y[D%N],$.push(Z[0]),X.push(Z[1]);for(M=[go(zl,$),",",go(zl,X)],--D;++D<U;)Z=y[D%N],$.shift(),$.push(Z[0]),X.shift(),X.push(Z[1]),cf(M,$,X);return M.join("")}function Qc(y,M){var D=y.length-1;if(D)for(var N=y[0][0],U=y[0][1],Z=y[D][0]-N,$=y[D][1]-U,X=-1,ae,pe;++X<=D;)ae=y[X],pe=X/D,ae[0]=M*ae[0]+(1-M)*(N+pe*Z),ae[1]=M*ae[1]+(1-M)*(U+pe*$);return wu(y)}function go(y,M){return y[0]*M[0]+y[1]*M[1]+y[2]*M[2]+y[3]*M[3]}var kp=[0,2/3,1/3,0],ff=[0,1/3,2/3,0],zl=[0,1/6,2/3,1/6];function cf(y,M,D){y.push("C",go(kp,M),",",go(kp,D),",",go(ff,M),",",go(ff,D),",",go(zl,M),",",go(zl,D))}function hf(y,M){return(M[1]-y[1])/(M[0]-y[0])}function qv(y){for(var M=0,D=y.length-1,N=[],U=y[0],Z=y[1],$=N[0]=hf(U,Z);++M<D;)N[M]=($+($=hf(U=Z,Z=y[M+1])))/2;return N[M]=$,N}function Jm(y){for(var M=[],D,N,U,Z,$=qv(y),X=-1,ae=y.length-1;++X<ae;)D=hf(y[X],y[X+1]),I(D)<He?$[X]=$[X+1]=0:(N=$[X]/D,U=$[X+1]/D,Z=N*N+U*U,Z>9&&(Z=D*3/Math.sqrt(Z),$[X]=Z*N,$[X+1]=Z*U));for(X=-1;++X<=ae;)Z=(y[Math.min(ae,X+1)][0]-y[Math.max(0,X-1)][0])/(6*(1+$[X]*$[X])),M.push([Z||0,$[X]*Z||0]);return M}function Cp(y){return y.length<3?Xo(y):y[0]+uf(y,Jm(y))}e.svg.line.radial=function(){var y=ks(Nv);return y.radius=y.x,delete y.x,y.angle=y.y,delete y.y,y};function Nv(y){for(var M,D=-1,N=y.length,U,Z;++D<N;)M=y[D],U=M[0],Z=M[1]-Tr,M[0]=U*Math.cos(Z),M[1]=U*Math.sin(Z);return y}function ec(y){var M=hu,D=hu,N=0,U=dl,Z=$f,$=Xo,X=$.key,ae=$,pe="L",_e=.7;function Pe(Le){var Je=[],nt=[],ze=[],Ue=-1,je=Le.length,st,it=fa(M),We=fa(N),Bt=M===D?function(){return ur}:fa(D),nr=N===U?function(){return sr}:fa(U),ur,sr;function Dr(){Je.push("M",$(y(ze),_e),pe,ae(y(nt.reverse()),_e),"Z")}for(;++Ue<je;)Z.call(this,st=Le[Ue],Ue)?(nt.push([ur=+it.call(this,st,Ue),sr=+We.call(this,st,Ue)]),ze.push([+Bt.call(this,st,Ue),+nr.call(this,st,Ue)])):nt.length&&(Dr(),nt=[],ze=[]);return nt.length&&Dr(),Je.length?Je.join(""):null}return Pe.x=function(Le){return arguments.length?(M=D=Le,Pe):D},Pe.x0=function(Le){return arguments.length?(M=Le,Pe):M},Pe.x1=function(Le){return arguments.length?(D=Le,Pe):D},Pe.y=function(Le){return arguments.length?(N=U=Le,Pe):U},Pe.y0=function(Le){return arguments.length?(N=Le,Pe):N},Pe.y1=function(Le){return arguments.length?(U=Le,Pe):U},Pe.defined=function(Le){return arguments.length?(Z=Le,Pe):Z},Pe.interpolate=function(Le){return arguments.length?(typeof Le=="function"?X=$=Le:X=($=Cs.get(Le)||Xo).key,ae=$.reverse||$,pe=$.closed?"M":"L",Pe):X},Pe.tension=function(Le){return arguments.length?(_e=Le,Pe):_e},Pe}lf.reverse=Rv,Rv.reverse=lf,e.svg.area=function(){return ec(Ee)},e.svg.area.radial=function(){var y=ec(Nv);return y.radius=y.x,delete y.x,y.innerRadius=y.x0,delete y.x0,y.outerRadius=y.x1,delete y.x1,y.angle=y.y,delete y.y,y.startAngle=y.y0,delete y.y0,y.endAngle=y.y1,delete y.y1,y};function $c(y){return y.source}function Bv(y){return y.target}e.svg.chord=function(){var y=$c,M=Bv,D=Ep,N=Iv,U=Sp;function Z(_e,Pe){var Le=$(this,y,_e,Pe),Je=$(this,M,_e,Pe);return"M"+Le.p0+ae(Le.r,Le.p1,Le.a1-Le.a0)+(X(Le,Je)?pe(Le.r,Le.p1,Le.r,Le.p0):pe(Le.r,Le.p1,Je.r,Je.p0)+ae(Je.r,Je.p1,Je.a1-Je.a0)+pe(Je.r,Je.p1,Le.r,Le.p0))+"Z"}function $(_e,Pe,Le,Je){var nt=Pe.call(_e,Le,Je),ze=D.call(_e,nt,Je),Ue=N.call(_e,nt,Je)-Tr,je=U.call(_e,nt,Je)-Tr;return{r:ze,a0:Ue,a1:je,p0:[ze*Math.cos(Ue),ze*Math.sin(Ue)],p1:[ze*Math.cos(je),ze*Math.sin(je)]}}function X(_e,Pe){return _e.a0==Pe.a0&&_e.a1==Pe.a1}function ae(_e,Pe,Le){return"A"+_e+","+_e+" 0 "+ +(Le>ct)+",1 "+Pe}function pe(_e,Pe,Le,Je){return"Q 0,0 "+Je}return Z.radius=function(_e){return arguments.length?(D=fa(_e),Z):D},Z.source=function(_e){return arguments.length?(y=fa(_e),Z):y},Z.target=function(_e){return arguments.length?(M=fa(_e),Z):M},Z.startAngle=function(_e){return arguments.length?(N=fa(_e),Z):N},Z.endAngle=function(_e){return arguments.length?(U=fa(_e),Z):U},Z};function Ep(y){return y.radius}e.svg.diagonal=function(){var y=$c,M=Bv,D=Ov;function N(U,Z){var $=y.call(this,U,Z),X=M.call(this,U,Z),ae=($.y+X.y)/2,pe=[$,{x:$.x,y:ae},{x:X.x,y:ae},X];return pe=pe.map(D),"M"+pe[0]+"C"+pe[1]+" "+pe[2]+" "+pe[3]}return N.source=function(U){return arguments.length?(y=fa(U),N):y},N.target=function(U){return arguments.length?(M=fa(U),N):M},N.projection=function(U){return arguments.length?(D=U,N):D},N};function Ov(y){return[y.x,y.y]}e.svg.diagonal.radial=function(){var y=e.svg.diagonal(),M=Ov,D=y.projection;return y.projection=function(N){return arguments.length?D(Lp(M=N)):M},y};function Lp(y){return function(){var M=y.apply(this,arguments),D=M[0],N=M[1]-Tr;return[D*Math.cos(N),D*Math.sin(N)]}}e.svg.symbol=function(){var y=vf,M=Pp;function D(N,U){return(th.get(y.call(this,N,U))||eh)(M.call(this,N,U))}return D.type=function(N){return arguments.length?(y=fa(N),D):y},D.size=function(N){return arguments.length?(M=fa(N),D):M},D};function Pp(){return 64}function vf(){return"circle"}function eh(y){var M=Math.sqrt(y/ct);return"M0,"+M+"A"+M+","+M+" 0 1,1 0,"+-M+"A"+M+","+M+" 0 1,1 0,"+M+"Z"}var th=e.map({circle:eh,cross:function(y){var M=Math.sqrt(y/5)/2;return"M"+-3*M+","+-M+"H"+-M+"V"+-3*M+"H"+M+"V"+-M+"H"+3*M+"V"+M+"H"+M+"V"+3*M+"H"+-M+"V"+M+"H"+-3*M+"Z"},diamond:function(y){var M=Math.sqrt(y/(2*Uv)),D=M*Uv;return"M0,"+-M+"L"+D+",0 0,"+M+" "+-D+",0Z"},square:function(y){var M=Math.sqrt(y)/2;return"M"+-M+","+-M+"L"+M+","+-M+" "+M+","+M+" "+-M+","+M+"Z"},"triangle-down":function(y){var M=Math.sqrt(y/Tu),D=M*Tu/2;return"M0,"+D+"L"+M+","+-D+" "+-M+","+-D+"Z"},"triangle-up":function(y){var M=Math.sqrt(y/Tu),D=M*Tu/2;return"M0,"+-D+"L"+M+","+D+" "+-M+","+D+"Z"}});e.svg.symbolTypes=th.keys();var Tu=Math.sqrt(3),Uv=Math.tan(30*Hr);mt.transition=function(y){for(var M=so||++Ci,D=fi(y),N=[],U,Z,$=Es||{time:Date.now(),ease:xl,delay:0,duration:250},X=-1,ae=this.length;++X<ae;){N.push(U=[]);for(var pe=this[X],_e=-1,Pe=pe.length;++_e<Pe;)(Z=pe[_e])&&ah(Z,_e,D,M,$),U.push(Z)}return df(N,D,M)},mt.interrupt=function(y){return this.each(y==null?rh:Dp(fi(y)))};var rh=Dp(fi());function Dp(y){return function(){var M,D,N;(M=this[y])&&(N=M[D=M.active])&&(N.timer.c=null,N.timer.t=NaN,--M.count?delete M[D]:delete this[y],M.active+=.5,N.event&&N.event.interrupt.call(this,this.__data__,N.index))}}function df(y,M,D){return Ye(y,li),y.namespace=M,y.id=D,y}var li=[],Ci=0,so,Es;li.call=mt.call,li.empty=mt.empty,li.node=mt.node,li.size=mt.size,e.transition=function(y,M){return y&&y.transition?so?y.transition(M):y:e.selection().transition(y)},e.transition.prototype=li,li.select=function(y){var M=this.id,D=this.namespace,N=[],U,Z,$;y=ge(y);for(var X=-1,ae=this.length;++X<ae;){N.push(U=[]);for(var pe=this[X],_e=-1,Pe=pe.length;++_e<Pe;)($=pe[_e])&&(Z=y.call($,$.__data__,_e,X))?("__data__"in $&&(Z.__data__=$.__data__),ah(Z,_e,D,M,$[D][M]),U.push(Z)):U.push(null)}return df(N,D,M)},li.selectAll=function(y){var M=this.id,D=this.namespace,N=[],U,Z,$,X,ae;y=Re(y);for(var pe=-1,_e=this.length;++pe<_e;)for(var Pe=this[pe],Le=-1,Je=Pe.length;++Le<Je;)if($=Pe[Le]){ae=$[D][M],Z=y.call($,$.__data__,Le,pe),N.push(U=[]);for(var nt=-1,ze=Z.length;++nt<ze;)(X=Z[nt])&&ah(X,nt,D,M,ae),U.push(X)}return df(N,D,M)},li.filter=function(y){var M=[],D,N,U;typeof y!="function"&&(y=Be(y));for(var Z=0,$=this.length;Z<$;Z++){M.push(D=[]);for(var N=this[Z],X=0,ae=N.length;X<ae;X++)(U=N[X])&&y.call(U,U.__data__,X,Z)&&D.push(U)}return df(M,this.namespace,this.id)},li.tween=function(y,M){var D=this.id,N=this.namespace;return arguments.length<2?this.node()[N][D].tween.get(y):gt(this,M==null?function(U){U[N][D].tween.remove(y)}:function(U){U[N][D].tween.set(y,M)})};function _o(y,M,D,N){var U=y.id,Z=y.namespace;return gt(y,typeof D=="function"?function($,X,ae){$[Z][U].tween.set(M,N(D.call($,$.__data__,X,ae)))}:(D=N(D),function($){$[Z][U].tween.set(M,D)}))}li.attr=function(y,M){if(arguments.length<2){for(M in y)this.attr(M,y[M]);return this}var D=y=="transform"?op:on,N=e.ns.qualify(y);function U(){this.removeAttribute(N)}function Z(){this.removeAttributeNS(N.space,N.local)}function $(ae){return ae==null?U:(ae+="",function(){var pe=this.getAttribute(N),_e;return pe!==ae&&(_e=D(pe,ae),function(Pe){this.setAttribute(N,_e(Pe))})})}function X(ae){return ae==null?Z:(ae+="",function(){var pe=this.getAttributeNS(N.space,N.local),_e;return pe!==ae&&(_e=D(pe,ae),function(Pe){this.setAttributeNS(N.space,N.local,_e(Pe))})})}return _o(this,"attr."+y,M,N.local?X:$)},li.attrTween=function(y,M){var D=e.ns.qualify(y);function N(Z,$){var X=M.call(this,Z,$,this.getAttribute(D));return X&&function(ae){this.setAttribute(D,X(ae))}}function U(Z,$){var X=M.call(this,Z,$,this.getAttributeNS(D.space,D.local));return X&&function(ae){this.setAttributeNS(D.space,D.local,X(ae))}}return this.tween("attr."+y,D.local?U:N)},li.style=function(y,M,D){var N=arguments.length;if(N<3){if(typeof y!="string"){N<2&&(M="");for(D in y)this.style(D,y[D],M);return this}D=""}function U(){this.style.removeProperty(y)}function Z($){return $==null?U:($+="",function(){var X=s(this).getComputedStyle(this,null).getPropertyValue(y),ae;return X!==$&&(ae=on(X,$),function(pe){this.style.setProperty(y,ae(pe),D)})})}return _o(this,"style."+y,M,Z)},li.styleTween=function(y,M,D){arguments.length<3&&(D="");function N(U,Z){var $=M.call(this,U,Z,s(this).getComputedStyle(this,null).getPropertyValue(y));return $&&function(X){this.style.setProperty(y,$(X),D)}}return this.tween("style."+y,N)},li.text=function(y){return _o(this,"text",y,ti)};function ti(y){return y==null&&(y=""),function(){this.textContent=y}}li.remove=function(){var y=this.namespace;return this.each("end.transition",function(){var M;this[y].count<2&&(M=this.parentNode)&&M.removeChild(this)})},li.ease=function(y){var M=this.id,D=this.namespace;return arguments.length<1?this.node()[D][M].ease:(typeof y!="function"&&(y=e.ease.apply(e,arguments)),gt(this,function(N){N[D][M].ease=y}))},li.delay=function(y){var M=this.id,D=this.namespace;return arguments.length<1?this.node()[D][M].delay:gt(this,typeof y=="function"?function(N,U,Z){N[D][M].delay=+y.call(N,N.__data__,U,Z)}:(y=+y,function(N){N[D][M].delay=y}))},li.duration=function(y){var M=this.id,D=this.namespace;return arguments.length<1?this.node()[D][M].duration:gt(this,typeof y=="function"?function(N,U,Z){N[D][M].duration=Math.max(1,y.call(N,N.__data__,U,Z))}:(y=Math.max(1,y),function(N){N[D][M].duration=y}))},li.each=function(y,M){var D=this.id,N=this.namespace;if(arguments.length<2){var U=Es,Z=so;try{so=D,gt(this,function($,X,ae){Es=$[N][D],y.call($,$.__data__,X,ae)})}finally{Es=U,so=Z}}else gt(this,function($){var X=$[N][D];(X.event||(X.event=e.dispatch("start","end","interrupt"))).on(y,M)});return this},li.transition=function(){for(var y=this.id,M=++Ci,D=this.namespace,N=[],U,Z,$,X,ae=0,pe=this.length;ae<pe;ae++){N.push(U=[]);for(var Z=this[ae],_e=0,Pe=Z.length;_e<Pe;_e++)($=Z[_e])&&(X=$[D][y],ah($,_e,D,M,{time:X.time,ease:X.ease,delay:X.delay+X.duration,duration:X.duration})),U.push($)}return df(N,D,M)};function fi(y){return y==null?"__transition__":"__transition_"+y+"__"}function ah(y,M,D,N,U){var Z=y[D]||(y[D]={active:0,count:0}),$=Z[N],X,ae,pe,_e,Pe;function Le(ze){var Ue=$.delay;if(ae.t=Ue+X,Ue<=ze)return Je(ze-Ue);ae.c=Je}function Je(ze){var Ue=Z.active,je=Z[Ue];je&&(je.timer.c=null,je.timer.t=NaN,--Z.count,delete Z[Ue],je.event&&je.event.interrupt.call(y,y.__data__,je.index));for(var st in Z)if(+st<N){var it=Z[st];it.timer.c=null,it.timer.t=NaN,--Z.count,delete Z[st]}ae.c=nt,Fc(function(){return ae.c&&nt(ze||1)&&(ae.c=null,ae.t=NaN),1},0,X),Z.active=N,$.event&&$.event.start.call(y,y.__data__,M),Pe=[],$.tween.forEach(function(We,Bt){(Bt=Bt.call(y,y.__data__,M))&&Pe.push(Bt)}),_e=$.ease,pe=$.duration}function nt(ze){for(var Ue=ze/pe,je=_e(Ue),st=Pe.length;st>0;)Pe[--st].call(y,je);if(Ue>=1)return $.event&&$.event.end.call(y,y.__data__,M),--Z.count?delete Z[N]:delete y[D],1}$||(X=U.time,ae=Fc(Le,0,X),$=Z[N]={tween:new z,time:X,timer:ae,delay:U.delay,duration:U.duration,ease:U.ease,index:M},U=null,++Z.count)}e.svg.axis=function(){var y=e.scale.linear(),M=Il,D=6,N=6,U=3,Z=[10],$=null,X;function ae(pe){pe.each(function(){var _e=e.select(this),Pe=this.__chart__||y,Le=this.__chart__=y.copy(),Je=$==null?Le.ticks?Le.ticks.apply(Le,Z):Le.domain():$,nt=X==null?Le.tickFormat?Le.tickFormat.apply(Le,Z):Ee:X,ze=_e.selectAll(".tick").data(Je,Le),Ue=ze.enter().insert("g",".domain").attr("class","tick").style("opacity",He),je=e.transition(ze.exit()).style("opacity",He).remove(),st=e.transition(ze.order()).style("opacity",1),it=Math.max(D,0)+U,We,Bt=Zc(Le),nr=_e.selectAll(".domain").data([0]),ur=(nr.enter().append("path").attr("class","domain"),e.transition(nr));Ue.append("line"),Ue.append("text");var sr=Ue.select("line"),Dr=st.select("line"),Ir=ze.select("text").text(nt),ea=Ue.select("text"),Ur=st.select("text"),Kr=M==="top"||M==="left"?-1:1,Ba,ri,$a,Yt;if(M==="bottom"||M==="top"?(We=pf,Ba="x",$a="y",ri="x2",Yt="y2",Ir.attr("dy",Kr<0?"0em":".71em").style("text-anchor","middle"),ur.attr("d","M"+Bt[0]+","+Kr*N+"V0H"+Bt[1]+"V"+Kr*N)):(We=Rl,Ba="y",$a="x",ri="y2",Yt="x2",Ir.attr("dy",".32em").style("text-anchor",Kr<0?"end":"start"),ur.attr("d","M"+Kr*N+","+Bt[0]+"H0V"+Bt[1]+"H"+Kr*N)),sr.attr(Yt,Kr*D),ea.attr($a,Kr*it),Dr.attr(ri,0).attr(Yt,Kr*D),Ur.attr(Ba,0).attr($a,Kr*it),Le.rangeBand){var Jr=Le,oa=Jr.rangeBand()/2;Pe=Le=function(sa){return Jr(sa)+oa}}else Pe.rangeBand?Pe=Le:je.call(We,Le,Pe);Ue.call(We,Pe,Le),st.call(We,Le,Le)})}return ae.scale=function(pe){return arguments.length?(y=pe,ae):y},ae.orient=function(pe){return arguments.length?(M=pe in tc?pe+"":Il,ae):M},ae.ticks=function(){return arguments.length?(Z=r(arguments),ae):Z},ae.tickValues=function(pe){return arguments.length?($=pe,ae):$},ae.tickFormat=function(pe){return arguments.length?(X=pe,ae):X},ae.tickSize=function(pe){var _e=arguments.length;return _e?(D=+pe,N=+arguments[_e-1],ae):D},ae.innerTickSize=function(pe){return arguments.length?(D=+pe,ae):D},ae.outerTickSize=function(pe){return arguments.length?(N=+pe,ae):N},ae.tickPadding=function(pe){return arguments.length?(U=+pe,ae):U},ae.tickSubdivide=function(){return arguments.length&&ae},ae};var Il="bottom",tc={top:1,right:1,bottom:1,left:1};function pf(y,M,D){y.attr("transform",function(N){var U=M(N);return"translate("+(isFinite(U)?U:D(N))+",0)"})}function Rl(y,M,D){y.attr("transform",function(N){var U=M(N);return"translate(0,"+(isFinite(U)?U:D(N))+")"})}e.svg.brush=function(){var y=lt(_e,"brushstart","brush","brushend"),M=null,D=null,N=[0,0],U=[0,0],Z,$,X=!0,ae=!0,pe=ih[0];function _e(ze){ze.each(function(){var Ue=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",nt).on("touchstart.brush",nt),je=Ue.selectAll(".background").data([0]);je.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ue.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var st=Ue.selectAll(".resize").data(pe,Ee);st.exit().remove(),st.enter().append("g").attr("class",function(nr){return"resize "+nr}).style("cursor",function(nr){return Ls[nr]}).append("rect").attr("x",function(nr){return/[ew]$/.test(nr)?-3:null}).attr("y",function(nr){return/^[ns]/.test(nr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),st.style("display",_e.empty()?"none":null);var it=e.transition(Ue),We=e.transition(je),Bt;M&&(Bt=Zc(M),We.attr("x",Bt[0]).attr("width",Bt[1]-Bt[0]),Le(it)),D&&(Bt=Zc(D),We.attr("y",Bt[0]).attr("height",Bt[1]-Bt[0]),Je(it)),Pe(it)})}_e.event=function(ze){ze.each(function(){var Ue=y.of(this,arguments),je={x:N,y:U,i:Z,j:$},st=this.__chart__||je;this.__chart__=je,so?e.select(this).transition().each("start.brush",function(){Z=st.i,$=st.j,N=st.x,U=st.y,Ue({type:"brushstart"})}).tween("brush:brush",function(){var it=Yo(N,je.x),We=Yo(U,je.y);return Z=$=null,function(Bt){N=je.x=it(Bt),U=je.y=We(Bt),Ue({type:"brush",mode:"resize"})}}).each("end.brush",function(){Z=je.i,$=je.j,Ue({type:"brush",mode:"resize"}),Ue({type:"brushend"})}):(Ue({type:"brushstart"}),Ue({type:"brush",mode:"resize"}),Ue({type:"brushend"}))})};function Pe(ze){ze.selectAll(".resize").attr("transform",function(Ue){return"translate("+N[+/e$/.test(Ue)]+","+U[+/^s/.test(Ue)]+")"})}function Le(ze){ze.select(".extent").attr("x",N[0]),ze.selectAll(".extent,.n>rect,.s>rect").attr("width",N[1]-N[0])}function Je(ze){ze.select(".extent").attr("y",U[0]),ze.selectAll(".extent,.e>rect,.w>rect").attr("height",U[1]-U[0])}function nt(){var ze=this,Ue=e.select(e.event.target),je=y.of(ze,arguments),st=e.select(ze),it=Ue.datum(),We=!/^(n|s)$/.test(it)&&M,Bt=!/^(e|w)$/.test(it)&&D,nr=Ue.classed("extent"),ur=Ar(ze),sr,Dr=e.mouse(ze),Ir,ea=e.select(s(ze)).on("keydown.brush",Ba).on("keyup.brush",ri);if(e.event.changedTouches?ea.on("touchmove.brush",$a).on("touchend.brush",Jr):ea.on("mousemove.brush",$a).on("mouseup.brush",Jr),st.interrupt().selectAll("*").interrupt(),nr)Dr[0]=N[0]-Dr[0],Dr[1]=U[0]-Dr[1];else if(it){var Ur=+/w$/.test(it),Kr=+/^n/.test(it);Ir=[N[1-Ur]-Dr[0],U[1-Kr]-Dr[1]],Dr[0]=N[Ur],Dr[1]=U[Kr]}else e.event.altKey&&(sr=Dr.slice());st.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",Ue.style("cursor")),je({type:"brushstart"}),$a();function Ba(){e.event.keyCode==32&&(nr||(sr=null,Dr[0]-=N[1],Dr[1]-=U[1],nr=2),at())}function ri(){e.event.keyCode==32&&nr==2&&(Dr[0]+=N[1],Dr[1]+=U[1],nr=0,at())}function $a(){var oa=e.mouse(ze),sa=!1;Ir&&(oa[0]+=Ir[0],oa[1]+=Ir[1]),nr||(e.event.altKey?(sr||(sr=[(N[0]+N[1])/2,(U[0]+U[1])/2]),Dr[0]=N[+(oa[0]<sr[0])],Dr[1]=U[+(oa[1]<sr[1])]):sr=null),We&&Yt(oa,M,0)&&(Le(st),sa=!0),Bt&&Yt(oa,D,1)&&(Je(st),sa=!0),sa&&(Pe(st),je({type:"brush",mode:nr?"move":"resize"}))}function Yt(oa,sa,Ei){var Oi=Zc(sa),$i=Oi[0],xi=Oi[1],xn=Dr[Ei],br=Ei?U:N,Vr=br[1]-br[0],Fi,Ti;if(nr&&($i-=xn,xi-=Vr+xn),Fi=(Ei?ae:X)?Math.max($i,Math.min(xi,oa[Ei])):oa[Ei],nr?Ti=(Fi+=xn)+Vr:(sr&&(xn=Math.max($i,Math.min(xi,2*sr[Ei]-Fi))),xn<Fi?(Ti=Fi,Fi=xn):Ti=xn),br[0]!=Fi||br[1]!=Ti)return Ei?$=null:Z=null,br[0]=Fi,br[1]=Ti,!0}function Jr(){$a(),st.style("pointer-events","all").selectAll(".resize").style("display",_e.empty()?"none":null),e.select("body").style("cursor",null),ea.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ur(),je({type:"brushend"})}}return _e.x=function(ze){return arguments.length?(M=ze,pe=ih[!M<<1|!D],_e):M},_e.y=function(ze){return arguments.length?(D=ze,pe=ih[!M<<1|!D],_e):D},_e.clamp=function(ze){return arguments.length?(M&&D?(X=!!ze[0],ae=!!ze[1]):M?X=!!ze:D&&(ae=!!ze),_e):M&&D?[X,ae]:M?X:D?ae:null},_e.extent=function(ze){var Ue,je,st,it,We;return arguments.length?(M&&(Ue=ze[0],je=ze[1],D&&(Ue=Ue[0],je=je[0]),Z=[Ue,je],M.invert&&(Ue=M(Ue),je=M(je)),je<Ue&&(We=Ue,Ue=je,je=We),(Ue!=N[0]||je!=N[1])&&(N=[Ue,je])),D&&(st=ze[0],it=ze[1],M&&(st=st[1],it=it[1]),$=[st,it],D.invert&&(st=D(st),it=D(it)),it<st&&(We=st,st=it,it=We),(st!=U[0]||it!=U[1])&&(U=[st,it])),_e):(M&&(Z?(Ue=Z[0],je=Z[1]):(Ue=N[0],je=N[1],M.invert&&(Ue=M.invert(Ue),je=M.invert(je)),je<Ue&&(We=Ue,Ue=je,je=We))),D&&($?(st=$[0],it=$[1]):(st=U[0],it=U[1],D.invert&&(st=D.invert(st),it=D.invert(it)),it<st&&(We=st,st=it,it=We))),M&&D?[[Ue,st],[je,it]]:M?[Ue,je]:D&&[st,it])},_e.clear=function(){return _e.empty()||(N=[0,0],U=[0,0],Z=$=null),_e},_e.empty=function(){return!!M&&N[0]==N[1]||!!D&&U[0]==U[1]},e.rebind(_e,y,"on")};var Ls={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ih=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.text=Ln(function(y){return y.responseText}),e.json=function(y,M){return Co(y,"application/json",mf,M)};function mf(y){return JSON.parse(y.responseText)}e.html=function(y,M){return Co(y,"text/html",Fl,M)};function Fl(y){var M=i.createRange();return M.selectNode(i.body),M.createContextualFragment(y.responseText)}e.xml=Ln(function(y){return y.responseXML}),typeof define=="function"&&define.amd?define(e):typeof O1=="object"&&O1.exports?O1.exports=e:this.d3=e}).apply(self)});var L3=ve((U1,f7)=>{(function(e,t){typeof U1=="object"&&typeof f7!="undefined"?t(U1):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(U1,function(e){"use strict";var t=new Date,r=new Date;function i(Be,vt,gt,Cr){function pr(bt){return Be(bt=arguments.length===0?new Date:new Date(+bt)),bt}return pr.floor=function(bt){return Be(bt=new Date(+bt)),bt},pr.ceil=function(bt){return Be(bt=new Date(bt-1)),vt(bt,1),Be(bt),bt},pr.round=function(bt){var wt=pr(bt),Ut=pr.ceil(bt);return bt-wt<Ut-bt?wt:Ut},pr.offset=function(bt,wt){return vt(bt=new Date(+bt),wt==null?1:Math.floor(wt)),bt},pr.range=function(bt,wt,Ut){var Kt=[],Gt;if(bt=pr.ceil(bt),Ut=Ut==null?1:Math.floor(Ut),!(bt<wt)||!(Ut>0))return Kt;do Kt.push(Gt=new Date(+bt)),vt(bt,Ut),Be(bt);while(Gt<bt&&bt<wt);return Kt},pr.filter=function(bt){return i(function(wt){if(wt>=wt)for(;Be(wt),!bt(wt);)wt.setTime(wt-1)},function(wt,Ut){if(wt>=wt)if(Ut<0)for(;++Ut<=0;)for(;vt(wt,-1),!bt(wt););else for(;--Ut>=0;)for(;vt(wt,1),!bt(wt););})},gt&&(pr.count=function(bt,wt){return t.setTime(+bt),r.setTime(+wt),Be(t),Be(r),Math.floor(gt(t,r))},pr.every=function(bt){return bt=Math.floor(bt),!isFinite(bt)||!(bt>0)?null:bt>1?pr.filter(Cr?function(wt){return Cr(wt)%bt===0}:function(wt){return pr.count(0,wt)%bt===0}):pr}),pr}var a=i(function(){},function(Be,vt){Be.setTime(+Be+vt)},function(Be,vt){return vt-Be});a.every=function(Be){return Be=Math.floor(Be),!isFinite(Be)||!(Be>0)?null:Be>1?i(function(vt){vt.setTime(Math.floor(vt/Be)*Be)},function(vt,gt){vt.setTime(+vt+gt*Be)},function(vt,gt){return(gt-vt)/Be}):a};var s=a.range,l=1e3,f=6e4,h=36e5,v=864e5,m=6048e5,b=i(function(Be){Be.setTime(Be-Be.getMilliseconds())},function(Be,vt){Be.setTime(+Be+vt*l)},function(Be,vt){return(vt-Be)/l},function(Be){return Be.getUTCSeconds()}),T=b.range,S=i(function(Be){Be.setTime(Be-Be.getMilliseconds()-Be.getSeconds()*l)},function(Be,vt){Be.setTime(+Be+vt*f)},function(Be,vt){return(vt-Be)/f},function(Be){return Be.getMinutes()}),C=S.range,P=i(function(Be){Be.setTime(Be-Be.getMilliseconds()-Be.getSeconds()*l-Be.getMinutes()*f)},function(Be,vt){Be.setTime(+Be+vt*h)},function(Be,vt){return(vt-Be)/h},function(Be){return Be.getHours()}),E=P.range,I=i(function(Be){Be.setHours(0,0,0,0)},function(Be,vt){Be.setDate(Be.getDate()+vt)},function(Be,vt){return(vt-Be-(vt.getTimezoneOffset()-Be.getTimezoneOffset())*f)/v},function(Be){return Be.getDate()-1}),q=I.range;function B(Be){return i(function(vt){vt.setDate(vt.getDate()-(vt.getDay()+7-Be)%7),vt.setHours(0,0,0,0)},function(vt,gt){vt.setDate(vt.getDate()+gt*7)},function(vt,gt){return(gt-vt-(gt.getTimezoneOffset()-vt.getTimezoneOffset())*f)/m})}var z=B(0),O=B(1),H=B(2),V=B(3),W=B(4),K=B(5),re=B(6),oe=z.range,ne=O.range,he=H.range,de=V.range,Ee=W.range,ke=K.range,Te=re.range,ye=i(function(Be){Be.setDate(1),Be.setHours(0,0,0,0)},function(Be,vt){Be.setMonth(Be.getMonth()+vt)},function(Be,vt){return vt.getMonth()-Be.getMonth()+(vt.getFullYear()-Be.getFullYear())*12},function(Be){return Be.getMonth()}),Ae=ye.range,Me=i(function(Be){Be.setMonth(0,1),Be.setHours(0,0,0,0)},function(Be,vt){Be.setFullYear(Be.getFullYear()+vt)},function(Be,vt){return vt.getFullYear()-Be.getFullYear()},function(Be){return Be.getFullYear()});Me.every=function(Be){return!isFinite(Be=Math.floor(Be))||!(Be>0)?null:i(function(vt){vt.setFullYear(Math.floor(vt.getFullYear()/Be)*Be),vt.setMonth(0,1),vt.setHours(0,0,0,0)},function(vt,gt){vt.setFullYear(vt.getFullYear()+gt*Be)})};var De=Me.range,at=i(function(Be){Be.setUTCSeconds(0,0)},function(Be,vt){Be.setTime(+Be+vt*f)},function(Be,vt){return(vt-Be)/f},function(Be){return Be.getUTCMinutes()}),pt=at.range,lt=i(function(Be){Be.setUTCMinutes(0,0,0)},function(Be,vt){Be.setTime(+Be+vt*h)},function(Be,vt){return(vt-Be)/h},function(Be){return Be.getUTCHours()}),ut=lt.range,Ye=i(function(Be){Be.setUTCHours(0,0,0,0)},function(Be,vt){Be.setUTCDate(Be.getUTCDate()+vt)},function(Be,vt){return(vt-Be)/v},function(Be){return Be.getUTCDate()-1}),xt=Ye.range;function rt(Be){return i(function(vt){vt.setUTCDate(vt.getUTCDate()-(vt.getUTCDay()+7-Be)%7),vt.setUTCHours(0,0,0,0)},function(vt,gt){vt.setUTCDate(vt.getUTCDate()+gt*7)},function(vt,gt){return(gt-vt)/m})}var Tt=rt(0),St=rt(1),mt=rt(2),ge=rt(3),Re=rt(4),xe=rt(5),et=rt(6),ht=Tt.range,tt=St.range,Rt=mt.range,qt=ge.range,Jt=Re.range,Ht=xe.range,ar=et.range,kt=i(function(Be){Be.setUTCDate(1),Be.setUTCHours(0,0,0,0)},function(Be,vt){Be.setUTCMonth(Be.getUTCMonth()+vt)},function(Be,vt){return vt.getUTCMonth()-Be.getUTCMonth()+(vt.getUTCFullYear()-Be.getUTCFullYear())*12},function(Be){return Be.getUTCMonth()}),zt=kt.range,_r=i(function(Be){Be.setUTCMonth(0,1),Be.setUTCHours(0,0,0,0)},function(Be,vt){Be.setUTCFullYear(Be.getUTCFullYear()+vt)},function(Be,vt){return vt.getUTCFullYear()-Be.getUTCFullYear()},function(Be){return Be.getUTCFullYear()});_r.every=function(Be){return!isFinite(Be=Math.floor(Be))||!(Be>0)?null:i(function(vt){vt.setUTCFullYear(Math.floor(vt.getUTCFullYear()/Be)*Be),vt.setUTCMonth(0,1),vt.setUTCHours(0,0,0,0)},function(vt,gt){vt.setUTCFullYear(vt.getUTCFullYear()+gt*Be)})};var rr=_r.range;e.timeDay=I,e.timeDays=q,e.timeFriday=K,e.timeFridays=ke,e.timeHour=P,e.timeHours=E,e.timeInterval=i,e.timeMillisecond=a,e.timeMilliseconds=s,e.timeMinute=S,e.timeMinutes=C,e.timeMonday=O,e.timeMondays=ne,e.timeMonth=ye,e.timeMonths=Ae,e.timeSaturday=re,e.timeSaturdays=Te,e.timeSecond=b,e.timeSeconds=T,e.timeSunday=z,e.timeSundays=oe,e.timeThursday=W,e.timeThursdays=Ee,e.timeTuesday=H,e.timeTuesdays=he,e.timeWednesday=V,e.timeWednesdays=de,e.timeWeek=z,e.timeWeeks=oe,e.timeYear=Me,e.timeYears=De,e.utcDay=Ye,e.utcDays=xt,e.utcFriday=xe,e.utcFridays=Ht,e.utcHour=lt,e.utcHours=ut,e.utcMillisecond=a,e.utcMilliseconds=s,e.utcMinute=at,e.utcMinutes=pt,e.utcMonday=St,e.utcMondays=tt,e.utcMonth=kt,e.utcMonths=zt,e.utcSaturday=et,e.utcSaturdays=ar,e.utcSecond=b,e.utcSeconds=T,e.utcSunday=Tt,e.utcSundays=ht,e.utcThursday=Re,e.utcThursdays=Jt,e.utcTuesday=mt,e.utcTuesdays=Rt,e.utcWednesday=ge,e.utcWednesdays=qt,e.utcWeek=Tt,e.utcWeeks=ht,e.utcYear=_r,e.utcYears=rr,Object.defineProperty(e,"__esModule",{value:!0})})});var n0=ve((V1,c7)=>{(function(e,t){typeof V1=="object"&&typeof c7!="undefined"?t(V1,L3()):typeof define=="function"&&define.amd?define(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(V1,function(e,t){"use strict";function r(Fe){if(0<=Fe.y&&Fe.y<100){var He=new Date(-1,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L);return He.setFullYear(Fe.y),He}return new Date(Fe.y,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L)}function i(Fe){if(0<=Fe.y&&Fe.y<100){var He=new Date(Date.UTC(-1,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L));return He.setUTCFullYear(Fe.y),He}return new Date(Date.UTC(Fe.y,Fe.m,Fe.d,Fe.H,Fe.M,Fe.S,Fe.L))}function a(Fe,He,_t){return{y:Fe,m:He,d:_t,H:0,M:0,S:0,L:0}}function s(Fe){var He=Fe.dateTime,_t=Fe.date,ct=Fe.time,yr=Fe.periods,Er=Fe.days,Tr=Fe.shortDays,Hr=Fe.months,_a=Fe.shortMonths,ka=T(yr),Ea=S(yr),Ii=T(Er),Ki=S(Er),yn=T(Tr),Xi=S(Tr),jn=T(Hr),En=S(Hr),Vi=T(_a),pa=S(_a),Gr={a:Et,A:Dt,b:Qt,B:Vt,c:null,d:ye,e:ye,f:pt,H:Ae,I:Me,j:De,L:at,m:lt,M:ut,p:wr,q:Yr,Q:wt,s:Ut,S:Ye,u:xt,U:rt,V:Tt,w:St,W:mt,x:null,X:null,y:ge,Y:Re,Z:xe,"%":bt},Qa={a:Br,A:ca,b:ua,B:Na,c:null,d:et,e:et,f:Jt,H:ht,I:tt,j:Rt,L:qt,m:Ht,M:ar,p:ii,q:Wr,Q:wt,s:Ut,S:kt,u:zt,U:_r,V:rr,w:Be,W:vt,x:null,X:null,y:gt,Y:Cr,Z:pr,"%":bt},Zr={a:se,A:fe,b:Ce,B:Ne,c:$e,d:W,e:W,f:de,H:re,I:re,j:K,L:he,m:V,M:oe,p:ee,q:H,Q:ke,s:Te,S:ne,u:P,U:E,V:I,w:C,W:q,x:Ve,X:dt,y:z,Y:B,Z:O,"%":Ee};Gr.x=vi(_t,Gr),Gr.X=vi(ct,Gr),Gr.c=vi(He,Gr),Qa.x=vi(_t,Qa),Qa.X=vi(ct,Qa),Qa.c=vi(He,Qa);function vi(vr,$r){return function(ga){var ir=[],wi=-1,La=0,si=vr.length,fa,Ln,Co;for(ga instanceof Date||(ga=new Date(+ga));++wi<si;)vr.charCodeAt(wi)===37&&(ir.push(vr.slice(La,wi)),(Ln=l[fa=vr.charAt(++wi)])!=null?fa=vr.charAt(++wi):Ln=fa==="e"?" ":"0",(Co=$r[fa])&&(fa=Co(ga,Ln)),ir.push(fa),La=wi+1);return ir.push(vr.slice(La,wi)),ir.join("")}}function ya(vr,$r){return function(ga){var ir=a(1900,void 0,1),wi=le(ir,vr,ga+="",0),La,si;if(wi!=ga.length)return null;if("Q"in ir)return new Date(ir.Q);if("s"in ir)return new Date(ir.s*1e3+("L"in ir?ir.L:0));if($r&&!("Z"in ir)&&(ir.Z=0),"p"in ir&&(ir.H=ir.H%12+ir.p*12),ir.m===void 0&&(ir.m="q"in ir?ir.q:0),"V"in ir){if(ir.V<1||ir.V>53)return null;"w"in ir||(ir.w=1),"Z"in ir?(La=i(a(ir.y,0,1)),si=La.getUTCDay(),La=si>4||si===0?t.utcMonday.ceil(La):t.utcMonday(La),La=t.utcDay.offset(La,(ir.V-1)*7),ir.y=La.getUTCFullYear(),ir.m=La.getUTCMonth(),ir.d=La.getUTCDate()+(ir.w+6)%7):(La=r(a(ir.y,0,1)),si=La.getDay(),La=si>4||si===0?t.timeMonday.ceil(La):t.timeMonday(La),La=t.timeDay.offset(La,(ir.V-1)*7),ir.y=La.getFullYear(),ir.m=La.getMonth(),ir.d=La.getDate()+(ir.w+6)%7)}else("W"in ir||"U"in ir)&&("w"in ir||(ir.w="u"in ir?ir.u%7:"W"in ir?1:0),si="Z"in ir?i(a(ir.y,0,1)).getUTCDay():r(a(ir.y,0,1)).getDay(),ir.m=0,ir.d="W"in ir?(ir.w+6)%7+ir.W*7-(si+5)%7:ir.w+ir.U*7-(si+6)%7);return"Z"in ir?(ir.H+=ir.Z/100|0,ir.M+=ir.Z%100,i(ir)):r(ir)}}function le(vr,$r,ga,ir){for(var wi=0,La=$r.length,si=ga.length,fa,Ln;wi<La;){if(ir>=si)return-1;if(fa=$r.charCodeAt(wi++),fa===37){if(fa=$r.charAt(wi++),Ln=Zr[fa in l?$r.charAt(wi++):fa],!Ln||(ir=Ln(vr,ga,ir))<0)return-1}else if(fa!=ga.charCodeAt(ir++))return-1}return ir}function ee(vr,$r,ga){var ir=ka.exec($r.slice(ga));return ir?(vr.p=Ea[ir[0].toLowerCase()],ga+ir[0].length):-1}function se(vr,$r,ga){var ir=yn.exec($r.slice(ga));return ir?(vr.w=Xi[ir[0].toLowerCase()],ga+ir[0].length):-1}function fe(vr,$r,ga){var ir=Ii.exec($r.slice(ga));return ir?(vr.w=Ki[ir[0].toLowerCase()],ga+ir[0].length):-1}function Ce(vr,$r,ga){var ir=Vi.exec($r.slice(ga));return ir?(vr.m=pa[ir[0].toLowerCase()],ga+ir[0].length):-1}function Ne(vr,$r,ga){var ir=jn.exec($r.slice(ga));return ir?(vr.m=En[ir[0].toLowerCase()],ga+ir[0].length):-1}function $e(vr,$r,ga){return le(vr,He,$r,ga)}function Ve(vr,$r,ga){return le(vr,_t,$r,ga)}function dt(vr,$r,ga){return le(vr,ct,$r,ga)}function Et(vr){return Tr[vr.getDay()]}function Dt(vr){return Er[vr.getDay()]}function Qt(vr){return _a[vr.getMonth()]}function Vt(vr){return Hr[vr.getMonth()]}function wr(vr){return yr[+(vr.getHours()>=12)]}function Yr(vr){return 1+~~(vr.getMonth()/3)}function Br(vr){return Tr[vr.getUTCDay()]}function ca(vr){return Er[vr.getUTCDay()]}function ua(vr){return _a[vr.getUTCMonth()]}function Na(vr){return Hr[vr.getUTCMonth()]}function ii(vr){return yr[+(vr.getUTCHours()>=12)]}function Wr(vr){return 1+~~(vr.getUTCMonth()/3)}return{format:function(vr){var $r=vi(vr+="",Gr);return $r.toString=function(){return vr},$r},parse:function(vr){var $r=ya(vr+="",!1);return $r.toString=function(){return vr},$r},utcFormat:function(vr){var $r=vi(vr+="",Qa);return $r.toString=function(){return vr},$r},utcParse:function(vr){var $r=ya(vr+="",!0);return $r.toString=function(){return vr},$r}}}var l={"-":"",_:" ",0:"0"},f=/^\s*\d+/,h=/^%/,v=/[\\^$*+?|[\]().{}]/g;function m(Fe,He,_t){var ct=Fe<0?"-":"",yr=(ct?-Fe:Fe)+"",Er=yr.length;return ct+(Er<_t?new Array(_t-Er+1).join(He)+yr:yr)}function b(Fe){return Fe.replace(v,"\\$&")}function T(Fe){return new RegExp("^(?:"+Fe.map(b).join("|")+")","i")}function S(Fe){for(var He={},_t=-1,ct=Fe.length;++_t<ct;)He[Fe[_t].toLowerCase()]=_t;return He}function C(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+1));return ct?(Fe.w=+ct[0],_t+ct[0].length):-1}function P(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+1));return ct?(Fe.u=+ct[0],_t+ct[0].length):-1}function E(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.U=+ct[0],_t+ct[0].length):-1}function I(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.V=+ct[0],_t+ct[0].length):-1}function q(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.W=+ct[0],_t+ct[0].length):-1}function B(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+4));return ct?(Fe.y=+ct[0],_t+ct[0].length):-1}function z(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.y=+ct[0]+(+ct[0]>68?1900:2e3),_t+ct[0].length):-1}function O(Fe,He,_t){var ct=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(He.slice(_t,_t+6));return ct?(Fe.Z=ct[1]?0:-(ct[2]+(ct[3]||"00")),_t+ct[0].length):-1}function H(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+1));return ct?(Fe.q=ct[0]*3-3,_t+ct[0].length):-1}function V(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.m=ct[0]-1,_t+ct[0].length):-1}function W(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.d=+ct[0],_t+ct[0].length):-1}function K(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+3));return ct?(Fe.m=0,Fe.d=+ct[0],_t+ct[0].length):-1}function re(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.H=+ct[0],_t+ct[0].length):-1}function oe(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.M=+ct[0],_t+ct[0].length):-1}function ne(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+2));return ct?(Fe.S=+ct[0],_t+ct[0].length):-1}function he(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+3));return ct?(Fe.L=+ct[0],_t+ct[0].length):-1}function de(Fe,He,_t){var ct=f.exec(He.slice(_t,_t+6));return ct?(Fe.L=Math.floor(ct[0]/1e3),_t+ct[0].length):-1}function Ee(Fe,He,_t){var ct=h.exec(He.slice(_t,_t+1));return ct?_t+ct[0].length:-1}function ke(Fe,He,_t){var ct=f.exec(He.slice(_t));return ct?(Fe.Q=+ct[0],_t+ct[0].length):-1}function Te(Fe,He,_t){var ct=f.exec(He.slice(_t));return ct?(Fe.s=+ct[0],_t+ct[0].length):-1}function ye(Fe,He){return m(Fe.getDate(),He,2)}function Ae(Fe,He){return m(Fe.getHours(),He,2)}function Me(Fe,He){return m(Fe.getHours()%12||12,He,2)}function De(Fe,He){return m(1+t.timeDay.count(t.timeYear(Fe),Fe),He,3)}function at(Fe,He){return m(Fe.getMilliseconds(),He,3)}function pt(Fe,He){return at(Fe,He)+"000"}function lt(Fe,He){return m(Fe.getMonth()+1,He,2)}function ut(Fe,He){return m(Fe.getMinutes(),He,2)}function Ye(Fe,He){return m(Fe.getSeconds(),He,2)}function xt(Fe){var He=Fe.getDay();return He===0?7:He}function rt(Fe,He){return m(t.timeSunday.count(t.timeYear(Fe)-1,Fe),He,2)}function Tt(Fe,He){var _t=Fe.getDay();return Fe=_t>=4||_t===0?t.timeThursday(Fe):t.timeThursday.ceil(Fe),m(t.timeThursday.count(t.timeYear(Fe),Fe)+(t.timeYear(Fe).getDay()===4),He,2)}function St(Fe){return Fe.getDay()}function mt(Fe,He){return m(t.timeMonday.count(t.timeYear(Fe)-1,Fe),He,2)}function ge(Fe,He){return m(Fe.getFullYear()%100,He,2)}function Re(Fe,He){return m(Fe.getFullYear()%1e4,He,4)}function xe(Fe){var He=Fe.getTimezoneOffset();return(He>0?"-":(He*=-1,"+"))+m(He/60|0,"0",2)+m(He%60,"0",2)}function et(Fe,He){return m(Fe.getUTCDate(),He,2)}function ht(Fe,He){return m(Fe.getUTCHours(),He,2)}function tt(Fe,He){return m(Fe.getUTCHours()%12||12,He,2)}function Rt(Fe,He){return m(1+t.utcDay.count(t.utcYear(Fe),Fe),He,3)}function qt(Fe,He){return m(Fe.getUTCMilliseconds(),He,3)}function Jt(Fe,He){return qt(Fe,He)+"000"}function Ht(Fe,He){return m(Fe.getUTCMonth()+1,He,2)}function ar(Fe,He){return m(Fe.getUTCMinutes(),He,2)}function kt(Fe,He){return m(Fe.getUTCSeconds(),He,2)}function zt(Fe){var He=Fe.getUTCDay();return He===0?7:He}function _r(Fe,He){return m(t.utcSunday.count(t.utcYear(Fe)-1,Fe),He,2)}function rr(Fe,He){var _t=Fe.getUTCDay();return Fe=_t>=4||_t===0?t.utcThursday(Fe):t.utcThursday.ceil(Fe),m(t.utcThursday.count(t.utcYear(Fe),Fe)+(t.utcYear(Fe).getUTCDay()===4),He,2)}function Be(Fe){return Fe.getUTCDay()}function vt(Fe,He){return m(t.utcMonday.count(t.utcYear(Fe)-1,Fe),He,2)}function gt(Fe,He){return m(Fe.getUTCFullYear()%100,He,2)}function Cr(Fe,He){return m(Fe.getUTCFullYear()%1e4,He,4)}function pr(){return"+0000"}function bt(){return"%"}function wt(Fe){return+Fe}function Ut(Fe){return Math.floor(+Fe/1e3)}var Kt;Gt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gt(Fe){return Kt=s(Fe),e.timeFormat=Kt.format,e.timeParse=Kt.parse,e.utcFormat=Kt.utcFormat,e.utcParse=Kt.utcParse,Kt}var Nt="%Y-%m-%dT%H:%M:%S.%LZ";function $t(Fe){return Fe.toISOString()}var Ar=Date.prototype.toISOString?$t:e.utcFormat(Nt);function xr(Fe){var He=new Date(Fe);return isNaN(He)?null:He}var Ct=+new Date("2000-01-01T00:00:00.000Z")?xr:e.utcParse(Nt);e.isoFormat=Ar,e.isoParse=Ct,e.timeFormatDefaultLocale=Gt,e.timeFormatLocale=s,Object.defineProperty(e,"__esModule",{value:!0})})});var P3=ve((H1,h7)=>{(function(e,t){typeof H1=="object"&&typeof h7!="undefined"?t(H1):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.d3=e.d3||{}))})(H1,function(e){"use strict";function t(V){return Math.abs(V=Math.round(V))>=1e21?V.toLocaleString("en").replace(/,/g,""):V.toString(10)}function r(V,W){if((K=(V=W?V.toExponential(W-1):V.toExponential()).indexOf("e"))<0)return null;var K,re=V.slice(0,K);return[re.length>1?re[0]+re.slice(2):re,+V.slice(K+1)]}function i(V){return V=r(Math.abs(V)),V?V[1]:NaN}function a(V,W){return function(K,re){for(var oe=K.length,ne=[],he=0,de=V[0],Ee=0;oe>0&&de>0&&(Ee+de+1>re&&(de=Math.max(1,re-Ee)),ne.push(K.substring(oe-=de,oe+de)),!((Ee+=de+1)>re));)de=V[he=(he+1)%V.length];return ne.reverse().join(W)}}function s(V){return function(W){return W.replace(/[0-9]/g,function(K){return V[+K]})}}var l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function f(V){if(!(W=l.exec(V)))throw new Error("invalid format: "+V);var W;return new h({fill:W[1],align:W[2],sign:W[3],symbol:W[4],zero:W[5],width:W[6],comma:W[7],precision:W[8]&&W[8].slice(1),trim:W[9],type:W[10]})}f.prototype=h.prototype;function h(V){this.fill=V.fill===void 0?" ":V.fill+"",this.align=V.align===void 0?">":V.align+"",this.sign=V.sign===void 0?"-":V.sign+"",this.symbol=V.symbol===void 0?"":V.symbol+"",this.zero=!!V.zero,this.width=V.width===void 0?void 0:+V.width,this.comma=!!V.comma,this.precision=V.precision===void 0?void 0:+V.precision,this.trim=!!V.trim,this.type=V.type===void 0?"":V.type+""}h.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(V){e:for(var W=V.length,K=1,re=-1,oe;K<W;++K)switch(V[K]){case".":re=oe=K;break;case"0":re===0&&(re=K),oe=K;break;default:if(!+V[K])break e;re>0&&(re=0);break}return re>0?V.slice(0,re)+V.slice(oe+1):V}var m;function b(V,W){var K=r(V,W);if(!K)return V+"";var re=K[0],oe=K[1],ne=oe-(m=Math.max(-8,Math.min(8,Math.floor(oe/3)))*3)+1,he=re.length;return ne===he?re:ne>he?re+new Array(ne-he+1).join("0"):ne>0?re.slice(0,ne)+"."+re.slice(ne):"0."+new Array(1-ne).join("0")+r(V,Math.max(0,W+ne-1))[0]}function T(V,W){var K=r(V,W);if(!K)return V+"";var re=K[0],oe=K[1];return oe<0?"0."+new Array(-oe).join("0")+re:re.length>oe+1?re.slice(0,oe+1)+"."+re.slice(oe+1):re+new Array(oe-re.length+2).join("0")}var S={"%":function(V,W){return(V*100).toFixed(W)},b:function(V){return Math.round(V).toString(2)},c:function(V){return V+""},d:t,e:function(V,W){return V.toExponential(W)},f:function(V,W){return V.toFixed(W)},g:function(V,W){return V.toPrecision(W)},o:function(V){return Math.round(V).toString(8)},p:function(V,W){return T(V*100,W)},r:T,s:b,X:function(V){return Math.round(V).toString(16).toUpperCase()},x:function(V){return Math.round(V).toString(16)}};function C(V){return V}var P=Array.prototype.map,E=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function I(V){var W=V.grouping===void 0||V.thousands===void 0?C:a(P.call(V.grouping,Number),V.thousands+""),K=V.currency===void 0?"":V.currency[0]+"",re=V.currency===void 0?"":V.currency[1]+"",oe=V.decimal===void 0?".":V.decimal+"",ne=V.numerals===void 0?C:s(P.call(V.numerals,String)),he=V.percent===void 0?"%":V.percent+"",de=V.minus===void 0?"-":V.minus+"",Ee=V.nan===void 0?"NaN":V.nan+"";function ke(ye){ye=f(ye);var Ae=ye.fill,Me=ye.align,De=ye.sign,at=ye.symbol,pt=ye.zero,lt=ye.width,ut=ye.comma,Ye=ye.precision,xt=ye.trim,rt=ye.type;rt==="n"?(ut=!0,rt="g"):S[rt]||(Ye===void 0&&(Ye=12),xt=!0,rt="g"),(pt||Ae==="0"&&Me==="=")&&(pt=!0,Ae="0",Me="=");var Tt=at==="$"?K:at==="#"&&/[boxX]/.test(rt)?"0"+rt.toLowerCase():"",St=at==="$"?re:/[%p]/.test(rt)?he:"",mt=S[rt],ge=/[defgprs%]/.test(rt);Ye=Ye===void 0?6:/[gprs]/.test(rt)?Math.max(1,Math.min(21,Ye)):Math.max(0,Math.min(20,Ye));function Re(xe){var et=Tt,ht=St,tt,Rt,qt;if(rt==="c")ht=mt(xe)+ht,xe="";else{xe=+xe;var Jt=xe<0||1/xe<0;if(xe=isNaN(xe)?Ee:mt(Math.abs(xe),Ye),xt&&(xe=v(xe)),Jt&&+xe==0&&De!=="+"&&(Jt=!1),et=(Jt?De==="("?De:de:De==="-"||De==="("?"":De)+et,ht=(rt==="s"?E[8+m/3]:"")+ht+(Jt&&De==="("?")":""),ge){for(tt=-1,Rt=xe.length;++tt<Rt;)if(qt=xe.charCodeAt(tt),48>qt||qt>57){ht=(qt===46?oe+xe.slice(tt+1):xe.slice(tt))+ht,xe=xe.slice(0,tt);break}}}ut&&!pt&&(xe=W(xe,1/0));var Ht=et.length+xe.length+ht.length,ar=Ht<lt?new Array(lt-Ht+1).join(Ae):"";switch(ut&&pt&&(xe=W(ar+xe,ar.length?lt-ht.length:1/0),ar=""),Me){case"<":xe=et+xe+ht+ar;break;case"=":xe=et+ar+xe+ht;break;case"^":xe=ar.slice(0,Ht=ar.length>>1)+et+xe+ht+ar.slice(Ht);break;default:xe=ar+et+xe+ht;break}return ne(xe)}return Re.toString=function(){return ye+""},Re}function Te(ye,Ae){var Me=ke((ye=f(ye),ye.type="f",ye)),De=Math.max(-8,Math.min(8,Math.floor(i(Ae)/3)))*3,at=Math.pow(10,-De),pt=E[8+De/3];return function(lt){return Me(at*lt)+pt}}return{format:ke,formatPrefix:Te}}var q;B({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function B(V){return q=I(V),e.format=q.format,e.formatPrefix=q.formatPrefix,q}function z(V){return Math.max(0,-i(Math.abs(V)))}function O(V,W){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i(W)/3)))*3-i(Math.abs(V)))}function H(V,W){return V=Math.abs(V),W=Math.abs(W)-V,Math.max(0,i(W)-i(V))+1}e.FormatSpecifier=h,e.formatDefaultLocale=B,e.formatLocale=I,e.formatSpecifier=f,e.precisionFixed=z,e.precisionPrefix=O,e.precisionRound=H,Object.defineProperty(e,"__esModule",{value:!0})})});var d7=ve((lme,v7)=>{"use strict";v7.exports=function(e){for(var t=e.length,r,i=0;i<t;i++)if(r=e.charCodeAt(i),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}});var Da=ve((ume,p7)=>{"use strict";var HX=d7();p7.exports=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&HX(r))return!1}else if(t!=="number")return!1;return e-e<1}});var Hi=ve((fme,m7)=>{"use strict";m7.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}});var D3=ve((G1,y7)=>{(function(e,t){typeof G1=="object"&&typeof y7!="undefined"?t(G1):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(G1,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<t.length;i++)r[t.charCodeAt(i)]=i;var a=function(l){var f=new Uint8Array(l),h,v=f.length,m="";for(h=0;h<v;h+=3)m+=t[f[h]>>2],m+=t[(f[h]&3)<<4|f[h+1]>>4],m+=t[(f[h+1]&15)<<2|f[h+2]>>6],m+=t[f[h+2]&63];return v%3===2?m=m.substring(0,m.length-1)+"=":v%3===1&&(m=m.substring(0,m.length-2)+"=="),m},s=function(l){var f=l.length*.75,h=l.length,v,m=0,b,T,S,C;l[l.length-1]==="="&&(f--,l[l.length-2]==="="&&f--);var P=new ArrayBuffer(f),E=new Uint8Array(P);for(v=0;v<h;v+=4)b=r[l.charCodeAt(v)],T=r[l.charCodeAt(v+1)],S=r[l.charCodeAt(v+2)],C=r[l.charCodeAt(v+3)],E[m++]=b<<2|T>>4,E[m++]=(T&15)<<4|S>>2,E[m++]=(S&3)<<6|C&63;return P};e.decode=s,e.encode=a,Object.defineProperty(e,"__esModule",{value:!0})})});var fc=ve((cme,g7)=>{"use strict";g7.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}});var al=ve(Lu=>{"use strict";var GX=D3().decode,ZX=fc(),z3=Array.isArray,YX=ArrayBuffer,WX=DataView;function _7(e){return YX.isView(e)&&!(e instanceof WX)}Lu.isTypedArray=_7;function Z1(e){return z3(e)||_7(e)}Lu.isArrayOrTypedArray=Z1;function XX(e){return!Z1(e[0])}Lu.isArray1D=XX;Lu.ensureArray=function(e,t){return z3(e)||(e=[]),e.length=t,e};var fo={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};fo.uint8c=fo.u1c;fo.uint8=fo.u1;fo.int8=fo.i1;fo.uint16=fo.u2;fo.int16=fo.i2;fo.uint32=fo.u4;fo.int32=fo.i4;fo.float32=fo.f4;fo.float64=fo.f8;function I3(e){return e.constructor===ArrayBuffer}Lu.isArrayBuffer=I3;Lu.decodeTypedArraySpec=function(e){var t=[],r=jX(e),i=r.dtype,a=fo[i];if(!a)throw new Error('Error in dtype: "'+i+'"');var s=a.BYTES_PER_ELEMENT,l=r.bdata;I3(l)||(l=GX(l));var f=r.shape===void 0?[l.byteLength/s]:(""+r.shape).split(",");f.reverse();var h=f.length,v,m,b=+f[0],T=s*b,S=0;if(h===1)t=new a(l);else if(h===2)for(v=+f[1],m=0;m<v;m++)t[m]=new a(l,S,b),S+=T;else if(h===3){v=+f[1];for(var C=+f[2],P=0;P<C;P++)for(t[P]=[],m=0;m<v;m++)t[P][m]=new a(l,S,b),S+=T}else throw new Error("ndim: "+h+'is not supported with the shape:"'+r.shape+'"');return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=f.reverse().join(","),e._inputArray=t,t};Lu.isTypedArraySpec=function(e){return ZX(e)&&e.hasOwnProperty("dtype")&&typeof e.dtype=="string"&&e.hasOwnProperty("bdata")&&(typeof e.bdata=="string"||I3(e.bdata))&&(e.shape===void 0||e.hasOwnProperty("shape")&&(typeof e.shape=="string"||typeof e.shape=="number"))};function jX(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}Lu.concat=function(){var e=[],t=!0,r=0,i,a,s,l,f,h,v,m;for(s=0;s<arguments.length;s++)l=arguments[s],h=l.length,h&&(a?e.push(l):(a=l,f=h),z3(l)?i=!1:(t=!1,r?i!==l.constructor&&(i=!1):i=l.constructor),r+=h);if(!r)return[];if(!e.length)return a;if(t)return a.concat.apply(a,e);if(i){for(v=new i(r),v.set(a),s=0;s<e.length;s++)l=e[s],v.set(l,f),f+=l.length;return v}for(v=new Array(r),m=0;m<a.length;m++)v[m]=a[m];for(s=0;s<e.length;s++){for(l=e[s],m=0;m<l.length;m++)v[f+m]=l[m];f+=m}return v};Lu.maxRowLength=function(e){return x7(e,Math.max,0)};Lu.minRowLength=function(e){return x7(e,Math.min,1/0)};function x7(e,t,r){if(Z1(e))if(Z1(e[0])){for(var i=r,a=0;a<e.length;a++)i=t(i,e[a].length);return i}else return e.length;return 0}});var _y=ve((vme,M7)=>{"use strict";var b7=Da(),F3=al().isArrayOrTypedArray;M7.exports=function(t,r){if(b7(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var i=r.split("."),a,s,l,f;for(f=0;f<i.length;f++)if(String(i[f]).slice(0,2)==="__")throw"bad property string";for(f=0;f<i.length;){if(a=String(i[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),a){if(a[1])i[f]=a[1];else if(f===0)i.splice(0,1);else throw"bad property string";for(s=a[2].substr(1,a[2].length-2).split("]["),l=0;l<s.length;l++)f++,i.splice(f,0,Number(s[l]))}f++}return typeof t!="object"?$X(t,r,i):{set:T7(t,i,r),get:w7(t,i),astr:r,parts:i,obj:t}};function w7(e,t){return function(){var r=e,i,a,s,l,f;for(l=0;l<t.length-1;l++){if(i=t[l],i===-1){for(a=!0,s=[],f=0;f<r.length;f++)s[f]=w7(r[f],t.slice(l+1))(),s[f]!==s[0]&&(a=!1);return a?s[0]:s}if(typeof i=="number"&&!F3(r)||(r=r[i],typeof r!="object"||r===null))return}if(!(typeof r!="object"||r===null)&&(s=r[t[l]],s!==null))return s}}var JX=/(^|\.)args\[/;function R3(e,t){return e===void 0||e===null&&!t.match(JX)}function T7(e,t,r){return function(i){var a=e,s="",l=[[e,s]],f=R3(i,r),h,v;for(v=0;v<t.length-1;v++){if(h=t[v],typeof h=="number"&&!F3(a))throw"array index but container is not an array";if(h===-1){if(f=!QX(a,t.slice(v+1),i,r),f)break;return}if(!A7(a,h,t[v+1],f))break;if(a=a[h],typeof a!="object"||a===null)throw"container is not an object";s=KX(s,h),l.push([a,s])}if(f){if(v===t.length-1&&(delete a[t[v]],Array.isArray(a)&&+t[v]===a.length-1))for(;a.length&&a[a.length-1]===void 0;)a.pop()}else a[t[v]]=i}}function KX(e,t){var r=t;return b7(t)?r="["+t+"]":e&&(r="."+t),e+r}function QX(e,t,r,i){var a=F3(r),s=!0,l=r,f=i.replace("-1",0),h=a?!1:R3(r,f),v=t[0],m;for(m=0;m<e.length;m++)f=i.replace("-1",m),a&&(l=r[m%r.length],h=R3(l,f)),h&&(s=!1),A7(e,m,v,h)&&T7(e[m],t,i.replace("-1",m))(l);return s}function A7(e,t,r,i){if(e[t]===void 0){if(i)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function $X(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}});var E7=ve((dme,C7)=>{"use strict";var o0=_y(),ej=/^\w*$/,tj=0,S7=1,Y1=2,k7=3,Qv=4;C7.exports=function(t,r,i,a){i=i||"name",a=a||"value";var s,l,f,h={};r&&r.length?(f=o0(t,r),l=f.get()):l=t,r=r||"";var v={};if(l)for(s=0;s<l.length;s++)v[l[s][i]]=s;var m=ej.test(a),b={set:function(T,S){var C=S===null?Qv:tj;if(!l){if(!f||C===Qv)return;l=[],f.set(l)}var P=v[T];if(P===void 0){if(C===Qv)return;C=C|k7,P=l.length,v[T]=P}else S!==(m?l[P][a]:o0(l[P],a).get())&&(C=C|Y1);var E=l[P]=l[P]||{};return E[i]=T,m?E[a]=S:o0(E,a).set(S),S!==null&&(C=C&~Qv),h[P]=h[P]|C,b},get:function(T){if(l){var S=v[T];if(S!==void 0)return m?l[S][a]:o0(l[S],a).get()}},rename:function(T,S){var C=v[T];return C===void 0||(h[C]=h[C]|S7,v[S]=C,delete v[T],l[C][i]=S),b},remove:function(T){var S=v[T];if(S===void 0)return b;var C=l[S];if(Object.keys(C).length>2)return h[S]=h[S]|Y1,b.set(T,null);if(m){for(s=S;s<l.length;s++)h[s]=h[s]|k7;for(s=S;s<l.length;s++)v[l[s][i]]--;l.splice(S,1),delete v[T]}else o0(C,a).set(null),h[S]=h[S]|Y1|Qv;return b},constructUpdate:function(){for(var T,S,C={},P=Object.keys(h),E=0;E<P.length;E++)S=P[E],T=r+"["+S+"]",l[S]?(h[S]&S7&&(C[T+"."+i]=l[S][i]),h[S]&Y1&&(m?C[T+"."+a]=h[S]&Qv?null:l[S][a]:C[T+"."+a]=h[S]&Qv?null:o0(l[S],a).get())):C[T]=null;return C}};return b}});var P7=ve((pme,L7)=>{"use strict";var rj=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,aj=/^[^\.\[\]]+$/;L7.exports=function(e,t){for(;t;){var r=e.match(rj);if(r)e=r[1];else if(e.match(aj))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t}});var W1=ve((mme,D7)=>{"use strict";var ij=Da();D7.exports=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(r[0],r[1]))/Math.LN10;return ij(i)||(i=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),i}});var R7=ve((yme,I7)=>{"use strict";var z7=al().isArrayOrTypedArray,xy=fc();I7.exports=function e(t,r){for(var i in r){var a=r[i],s=t[i];if(s!==a)if(i.charAt(0)==="_"||typeof a=="function"){if(i in t)continue;t[i]=a}else if(z7(a)&&z7(s)&&xy(a[0])){if(i==="customdata"||i==="ids")continue;for(var l=Math.min(a.length,s.length),f=0;f<l;f++)s[f]!==a[f]&&xy(a[f])&&xy(s[f])&&e(s[f],a[f])}else xy(a)&&xy(s)&&(e(s,a),Object.keys(s).length||delete t[i])}}});var s0=ve((gme,F7)=>{"use strict";function nj(e,t){var r=e%t;return r<0?r+t:r}function oj(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}F7.exports={mod:nj,modHalf:oj}});var wf=ve((_me,X1)=>{(function(e){var t=/^\s+/,r=/\s+$/,i=0,a=e.round,s=e.min,l=e.max,f=e.random;function h(ge,Re){if(ge=ge||"",Re=Re||{},ge instanceof h)return ge;if(!(this instanceof h))return new h(ge,Re);var xe=v(ge);this._originalInput=ge,this._r=xe.r,this._g=xe.g,this._b=xe.b,this._a=xe.a,this._roundA=a(100*this._a)/100,this._format=Re.format||xe.format,this._gradientType=Re.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=xe.ok,this._tc_id=i++}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ge=this.toRgb();return(ge.r*299+ge.g*587+ge.b*114)/1e3},getLuminance:function(){var ge=this.toRgb(),Re,xe,et,ht,tt,Rt;return Re=ge.r/255,xe=ge.g/255,et=ge.b/255,Re<=.03928?ht=Re/12.92:ht=e.pow((Re+.055)/1.055,2.4),xe<=.03928?tt=xe/12.92:tt=e.pow((xe+.055)/1.055,2.4),et<=.03928?Rt=et/12.92:Rt=e.pow((et+.055)/1.055,2.4),.2126*ht+.7152*tt+.0722*Rt},setAlpha:function(ge){return this._a=ye(ge),this._roundA=a(100*this._a)/100,this},toHsv:function(){var ge=S(this._r,this._g,this._b);return{h:ge.h*360,s:ge.s,v:ge.v,a:this._a}},toHsvString:function(){var ge=S(this._r,this._g,this._b),Re=a(ge.h*360),xe=a(ge.s*100),et=a(ge.v*100);return this._a==1?"hsv("+Re+", "+xe+"%, "+et+"%)":"hsva("+Re+", "+xe+"%, "+et+"%, "+this._roundA+")"},toHsl:function(){var ge=b(this._r,this._g,this._b);return{h:ge.h*360,s:ge.s,l:ge.l,a:this._a}},toHslString:function(){var ge=b(this._r,this._g,this._b),Re=a(ge.h*360),xe=a(ge.s*100),et=a(ge.l*100);return this._a==1?"hsl("+Re+", "+xe+"%, "+et+"%)":"hsla("+Re+", "+xe+"%, "+et+"%, "+this._roundA+")"},toHex:function(ge){return P(this._r,this._g,this._b,ge)},toHexString:function(ge){return"#"+this.toHex(ge)},toHex8:function(ge){return E(this._r,this._g,this._b,this._a,ge)},toHex8String:function(ge){return"#"+this.toHex8(ge)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(Ae(this._r,255)*100)+"%",g:a(Ae(this._g,255)*100)+"%",b:a(Ae(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+a(Ae(this._r,255)*100)+"%, "+a(Ae(this._g,255)*100)+"%, "+a(Ae(this._b,255)*100)+"%)":"rgba("+a(Ae(this._r,255)*100)+"%, "+a(Ae(this._g,255)*100)+"%, "+a(Ae(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ke[P(this._r,this._g,this._b,!0)]||!1},toFilter:function(ge){var Re="#"+I(this._r,this._g,this._b,this._a),xe=Re,et=this._gradientType?"GradientType = 1, ":"";if(ge){var ht=h(ge);xe="#"+I(ht._r,ht._g,ht._b,ht._a)}return"progid:DXImageTransform.Microsoft.gradient("+et+"startColorstr="+Re+",endColorstr="+xe+")"},toString:function(ge){var Re=!!ge;ge=ge||this._format;var xe=!1,et=this._a<1&&this._a>=0,ht=!Re&&et&&(ge==="hex"||ge==="hex6"||ge==="hex3"||ge==="hex4"||ge==="hex8"||ge==="name");return ht?ge==="name"&&this._a===0?this.toName():this.toRgbString():(ge==="rgb"&&(xe=this.toRgbString()),ge==="prgb"&&(xe=this.toPercentageRgbString()),(ge==="hex"||ge==="hex6")&&(xe=this.toHexString()),ge==="hex3"&&(xe=this.toHexString(!0)),ge==="hex4"&&(xe=this.toHex8String(!0)),ge==="hex8"&&(xe=this.toHex8String()),ge==="name"&&(xe=this.toName()),ge==="hsl"&&(xe=this.toHslString()),ge==="hsv"&&(xe=this.toHsvString()),xe||this.toHexString())},clone:function(){return h(this.toString())},_applyModification:function(ge,Re){var xe=ge.apply(null,[this].concat([].slice.call(Re)));return this._r=xe._r,this._g=xe._g,this._b=xe._b,this.setAlpha(xe._a),this},lighten:function(){return this._applyModification(O,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification(V,arguments)},desaturate:function(){return this._applyModification(q,arguments)},saturate:function(){return this._applyModification(B,arguments)},greyscale:function(){return this._applyModification(z,arguments)},spin:function(){return this._applyModification(W,arguments)},_applyCombination:function(ge,Re){return ge.apply(null,[this].concat([].slice.call(Re)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(K,arguments)},monochromatic:function(){return this._applyCombination(de,arguments)},splitcomplement:function(){return this._applyCombination(ne,arguments)},triad:function(){return this._applyCombination(re,arguments)},tetrad:function(){return this._applyCombination(oe,arguments)}},h.fromRatio=function(ge,Re){if(typeof ge=="object"){var xe={};for(var et in ge)ge.hasOwnProperty(et)&&(et==="a"?xe[et]=ge[et]:xe[et]=ut(ge[et]));ge=xe}return h(ge,Re)};function v(ge){var Re={r:0,g:0,b:0},xe=1,et=null,ht=null,tt=null,Rt=!1,qt=!1;return typeof ge=="string"&&(ge=St(ge)),typeof ge=="object"&&(Tt(ge.r)&&Tt(ge.g)&&Tt(ge.b)?(Re=m(ge.r,ge.g,ge.b),Rt=!0,qt=String(ge.r).substr(-1)==="%"?"prgb":"rgb"):Tt(ge.h)&&Tt(ge.s)&&Tt(ge.v)?(et=ut(ge.s),ht=ut(ge.v),Re=C(ge.h,et,ht),Rt=!0,qt="hsv"):Tt(ge.h)&&Tt(ge.s)&&Tt(ge.l)&&(et=ut(ge.s),tt=ut(ge.l),Re=T(ge.h,et,tt),Rt=!0,qt="hsl"),ge.hasOwnProperty("a")&&(xe=ge.a)),xe=ye(xe),{ok:Rt,format:ge.format||qt,r:s(255,l(Re.r,0)),g:s(255,l(Re.g,0)),b:s(255,l(Re.b,0)),a:xe}}function m(ge,Re,xe){return{r:Ae(ge,255)*255,g:Ae(Re,255)*255,b:Ae(xe,255)*255}}function b(ge,Re,xe){ge=Ae(ge,255),Re=Ae(Re,255),xe=Ae(xe,255);var et=l(ge,Re,xe),ht=s(ge,Re,xe),tt,Rt,qt=(et+ht)/2;if(et==ht)tt=Rt=0;else{var Jt=et-ht;switch(Rt=qt>.5?Jt/(2-et-ht):Jt/(et+ht),et){case ge:tt=(Re-xe)/Jt+(Re<xe?6:0);break;case Re:tt=(xe-ge)/Jt+2;break;case xe:tt=(ge-Re)/Jt+4;break}tt/=6}return{h:tt,s:Rt,l:qt}}function T(ge,Re,xe){var et,ht,tt;ge=Ae(ge,360),Re=Ae(Re,100),xe=Ae(xe,100);function Rt(Ht,ar,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?Ht+(ar-Ht)*6*kt:kt<1/2?ar:kt<2/3?Ht+(ar-Ht)*(2/3-kt)*6:Ht}if(Re===0)et=ht=tt=xe;else{var qt=xe<.5?xe*(1+Re):xe+Re-xe*Re,Jt=2*xe-qt;et=Rt(Jt,qt,ge+1/3),ht=Rt(Jt,qt,ge),tt=Rt(Jt,qt,ge-1/3)}return{r:et*255,g:ht*255,b:tt*255}}function S(ge,Re,xe){ge=Ae(ge,255),Re=Ae(Re,255),xe=Ae(xe,255);var et=l(ge,Re,xe),ht=s(ge,Re,xe),tt,Rt,qt=et,Jt=et-ht;if(Rt=et===0?0:Jt/et,et==ht)tt=0;else{switch(et){case ge:tt=(Re-xe)/Jt+(Re<xe?6:0);break;case Re:tt=(xe-ge)/Jt+2;break;case xe:tt=(ge-Re)/Jt+4;break}tt/=6}return{h:tt,s:Rt,v:qt}}function C(ge,Re,xe){ge=Ae(ge,360)*6,Re=Ae(Re,100),xe=Ae(xe,100);var et=e.floor(ge),ht=ge-et,tt=xe*(1-Re),Rt=xe*(1-ht*Re),qt=xe*(1-(1-ht)*Re),Jt=et%6,Ht=[xe,Rt,tt,tt,qt,xe][Jt],ar=[qt,xe,xe,Rt,tt,tt][Jt],kt=[tt,tt,qt,xe,xe,Rt][Jt];return{r:Ht*255,g:ar*255,b:kt*255}}function P(ge,Re,xe,et){var ht=[lt(a(ge).toString(16)),lt(a(Re).toString(16)),lt(a(xe).toString(16))];return et&&ht[0].charAt(0)==ht[0].charAt(1)&&ht[1].charAt(0)==ht[1].charAt(1)&&ht[2].charAt(0)==ht[2].charAt(1)?ht[0].charAt(0)+ht[1].charAt(0)+ht[2].charAt(0):ht.join("")}function E(ge,Re,xe,et,ht){var tt=[lt(a(ge).toString(16)),lt(a(Re).toString(16)),lt(a(xe).toString(16)),lt(Ye(et))];return ht&&tt[0].charAt(0)==tt[0].charAt(1)&&tt[1].charAt(0)==tt[1].charAt(1)&&tt[2].charAt(0)==tt[2].charAt(1)&&tt[3].charAt(0)==tt[3].charAt(1)?tt[0].charAt(0)+tt[1].charAt(0)+tt[2].charAt(0)+tt[3].charAt(0):tt.join("")}function I(ge,Re,xe,et){var ht=[lt(Ye(et)),lt(a(ge).toString(16)),lt(a(Re).toString(16)),lt(a(xe).toString(16))];return ht.join("")}h.equals=function(ge,Re){return!ge||!Re?!1:h(ge).toRgbString()==h(Re).toRgbString()},h.random=function(){return h.fromRatio({r:f(),g:f(),b:f()})};function q(ge,Re){Re=Re===0?0:Re||10;var xe=h(ge).toHsl();return xe.s-=Re/100,xe.s=Me(xe.s),h(xe)}function B(ge,Re){Re=Re===0?0:Re||10;var xe=h(ge).toHsl();return xe.s+=Re/100,xe.s=Me(xe.s),h(xe)}function z(ge){return h(ge).desaturate(100)}function O(ge,Re){Re=Re===0?0:Re||10;var xe=h(ge).toHsl();return xe.l+=Re/100,xe.l=Me(xe.l),h(xe)}function H(ge,Re){Re=Re===0?0:Re||10;var xe=h(ge).toRgb();return xe.r=l(0,s(255,xe.r-a(255*-(Re/100)))),xe.g=l(0,s(255,xe.g-a(255*-(Re/100)))),xe.b=l(0,s(255,xe.b-a(255*-(Re/100)))),h(xe)}function V(ge,Re){Re=Re===0?0:Re||10;var xe=h(ge).toHsl();return xe.l-=Re/100,xe.l=Me(xe.l),h(xe)}function W(ge,Re){var xe=h(ge).toHsl(),et=(xe.h+Re)%360;return xe.h=et<0?360+et:et,h(xe)}function K(ge){var Re=h(ge).toHsl();return Re.h=(Re.h+180)%360,h(Re)}function re(ge){var Re=h(ge).toHsl(),xe=Re.h;return[h(ge),h({h:(xe+120)%360,s:Re.s,l:Re.l}),h({h:(xe+240)%360,s:Re.s,l:Re.l})]}function oe(ge){var Re=h(ge).toHsl(),xe=Re.h;return[h(ge),h({h:(xe+90)%360,s:Re.s,l:Re.l}),h({h:(xe+180)%360,s:Re.s,l:Re.l}),h({h:(xe+270)%360,s:Re.s,l:Re.l})]}function ne(ge){var Re=h(ge).toHsl(),xe=Re.h;return[h(ge),h({h:(xe+72)%360,s:Re.s,l:Re.l}),h({h:(xe+216)%360,s:Re.s,l:Re.l})]}function he(ge,Re,xe){Re=Re||6,xe=xe||30;var et=h(ge).toHsl(),ht=360/xe,tt=[h(ge)];for(et.h=(et.h-(ht*Re>>1)+720)%360;--Re;)et.h=(et.h+ht)%360,tt.push(h(et));return tt}function de(ge,Re){Re=Re||6;for(var xe=h(ge).toHsv(),et=xe.h,ht=xe.s,tt=xe.v,Rt=[],qt=1/Re;Re--;)Rt.push(h({h:et,s:ht,v:tt})),tt=(tt+qt)%1;return Rt}h.mix=function(ge,Re,xe){xe=xe===0?0:xe||50;var et=h(ge).toRgb(),ht=h(Re).toRgb(),tt=xe/100,Rt={r:(ht.r-et.r)*tt+et.r,g:(ht.g-et.g)*tt+et.g,b:(ht.b-et.b)*tt+et.b,a:(ht.a-et.a)*tt+et.a};return h(Rt)},h.readability=function(ge,Re){var xe=h(ge),et=h(Re);return(e.max(xe.getLuminance(),et.getLuminance())+.05)/(e.min(xe.getLuminance(),et.getLuminance())+.05)},h.isReadable=function(ge,Re,xe){var et=h.readability(ge,Re),ht,tt;switch(tt=!1,ht=mt(xe),ht.level+ht.size){case"AAsmall":case"AAAlarge":tt=et>=4.5;break;case"AAlarge":tt=et>=3;break;case"AAAsmall":tt=et>=7;break}return tt},h.mostReadable=function(ge,Re,xe){var et=null,ht=0,tt,Rt,qt,Jt;xe=xe||{},Rt=xe.includeFallbackColors,qt=xe.level,Jt=xe.size;for(var Ht=0;Ht<Re.length;Ht++)tt=h.readability(ge,Re[Ht]),tt>ht&&(ht=tt,et=h(Re[Ht]));return h.isReadable(ge,et,{level:qt,size:Jt})||!Rt?et:(xe.includeFallbackColors=!1,h.mostReadable(ge,["#fff","#000"],xe))};var Ee=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ke=h.hexNames=Te(Ee);function Te(ge){var Re={};for(var xe in ge)ge.hasOwnProperty(xe)&&(Re[ge[xe]]=xe);return Re}function ye(ge){return ge=parseFloat(ge),(isNaN(ge)||ge<0||ge>1)&&(ge=1),ge}function Ae(ge,Re){at(ge)&&(ge="100%");var xe=pt(ge);return ge=s(Re,l(0,parseFloat(ge))),xe&&(ge=parseInt(ge*Re,10)/100),e.abs(ge-Re)<1e-6?1:ge%Re/parseFloat(Re)}function Me(ge){return s(1,l(0,ge))}function De(ge){return parseInt(ge,16)}function at(ge){return typeof ge=="string"&&ge.indexOf(".")!=-1&&parseFloat(ge)===1}function pt(ge){return typeof ge=="string"&&ge.indexOf("%")!=-1}function lt(ge){return ge.length==1?"0"+ge:""+ge}function ut(ge){return ge<=1&&(ge=ge*100+"%"),ge}function Ye(ge){return e.round(parseFloat(ge)*255).toString(16)}function xt(ge){return De(ge)/255}var rt=function(){var ge="[-\\+]?\\d+%?",Re="[-\\+]?\\d*\\.\\d+%?",xe="(?:"+Re+")|(?:"+ge+")",et="[\\s|\\(]+("+xe+")[,|\\s]+("+xe+")[,|\\s]+("+xe+")\\s*\\)?",ht="[\\s|\\(]+("+xe+")[,|\\s]+("+xe+")[,|\\s]+("+xe+")[,|\\s]+("+xe+")\\s*\\)?";return{CSS_UNIT:new RegExp(xe),rgb:new RegExp("rgb"+et),rgba:new RegExp("rgba"+ht),hsl:new RegExp("hsl"+et),hsla:new RegExp("hsla"+ht),hsv:new RegExp("hsv"+et),hsva:new RegExp("hsva"+ht),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Tt(ge){return!!rt.CSS_UNIT.exec(ge)}function St(ge){ge=ge.replace(t,"").replace(r,"").toLowerCase();var Re=!1;if(Ee[ge])ge=Ee[ge],Re=!0;else if(ge=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var xe;return(xe=rt.rgb.exec(ge))?{r:xe[1],g:xe[2],b:xe[3]}:(xe=rt.rgba.exec(ge))?{r:xe[1],g:xe[2],b:xe[3],a:xe[4]}:(xe=rt.hsl.exec(ge))?{h:xe[1],s:xe[2],l:xe[3]}:(xe=rt.hsla.exec(ge))?{h:xe[1],s:xe[2],l:xe[3],a:xe[4]}:(xe=rt.hsv.exec(ge))?{h:xe[1],s:xe[2],v:xe[3]}:(xe=rt.hsva.exec(ge))?{h:xe[1],s:xe[2],v:xe[3],a:xe[4]}:(xe=rt.hex8.exec(ge))?{r:De(xe[1]),g:De(xe[2]),b:De(xe[3]),a:xt(xe[4]),format:Re?"name":"hex8"}:(xe=rt.hex6.exec(ge))?{r:De(xe[1]),g:De(xe[2]),b:De(xe[3]),format:Re?"name":"hex"}:(xe=rt.hex4.exec(ge))?{r:De(xe[1]+""+xe[1]),g:De(xe[2]+""+xe[2]),b:De(xe[3]+""+xe[3]),a:xt(xe[4]+""+xe[4]),format:Re?"name":"hex8"}:(xe=rt.hex3.exec(ge))?{r:De(xe[1]+""+xe[1]),g:De(xe[2]+""+xe[2]),b:De(xe[3]+""+xe[3]),format:Re?"name":"hex"}:!1}function mt(ge){var Re,xe;return ge=ge||{level:"AA",size:"small"},Re=(ge.level||"AA").toUpperCase(),xe=(ge.size||"small").toLowerCase(),Re!=="AA"&&Re!=="AAA"&&(Re="AA"),xe!=="small"&&xe!=="large"&&(xe="small"),{level:Re,size:xe}}typeof X1!="undefined"&&X1.exports?X1.exports=h:typeof define=="function"&&define.amd?define(function(){return h}):window.tinycolor=h})(Math)});var hn=ve(Ty=>{"use strict";var q7=fc(),by=Array.isArray;function sj(e,t){var r,i;for(r=0;r<e.length;r++){if(i=e[r],i!==null&&typeof i=="object")return!1;i!==void 0&&(t[r]=i)}return!0}Ty.extendFlat=function(){return wy(arguments,!1,!1,!1)};Ty.extendDeep=function(){return wy(arguments,!0,!1,!1)};Ty.extendDeepAll=function(){return wy(arguments,!0,!0,!1)};Ty.extendDeepNoArrays=function(){return wy(arguments,!0,!1,!0)};function wy(e,t,r,i){var a=e[0],s=e.length,l,f,h,v,m,b,T;if(s===2&&by(a)&&by(e[1])&&a.length===0){if(T=sj(e[1],a),T)return a;a.splice(0,a.length)}for(var S=1;S<s;S++){l=e[S];for(f in l)h=a[f],v=l[f],i&&by(v)?a[f]=v:t&&v&&(q7(v)||(m=by(v)))?(m?(m=!1,b=h&&by(h)?h:[]):b=h&&q7(h)?h:{},a[f]=wy([b,v],t,r,i)):(typeof v!="undefined"||r)&&(a[f]=v)}return a}});var qo=ve((bme,N7)=>{"use strict";N7.exports=function(e){var t=e.variantValues,r=e.editType,i=e.colorEditType;i===void 0&&(i=r);var a={editType:r,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};e.noNumericWeightValues&&(a.valType="enumerated",a.values=a.extras,a.extras=void 0,a.min=void 0,a.max=void 0);var s={family:{valType:"string",noBlank:!0,strict:!0,editType:r},size:{valType:"number",min:1,editType:r},color:{valType:"color",editType:i},weight:a,style:{editType:r,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:e.noFontVariant?void 0:{editType:r,valType:"enumerated",values:t||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:e.noFontTextcase?void 0:{editType:r,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:e.noFontLineposition?void 0:{editType:r,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:e.noFontShadow?void 0:{editType:r,valType:"string",dflt:e.autoShadowDflt?"auto":"none"},editType:r};return e.autoSize&&(s.size.dflt="auto"),e.autoColor&&(s.color.dflt="auto"),e.arrayOk&&(s.family.arrayOk=!0,s.weight.arrayOk=!0,s.style.arrayOk=!0,e.noFontVariant||(s.variant.arrayOk=!0),e.noFontTextcase||(s.textcase.arrayOk=!0),e.noFontLineposition||(s.lineposition.arrayOk=!0),e.noFontShadow||(s.shadow.arrayOk=!0),s.size.arrayOk=!0,s.color.arrayOk=!0),s}});var Ay=ve((wme,B7)=>{"use strict";B7.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}});var l0=ve((Tme,V7)=>{"use strict";var O7=Ay(),U7=qo(),q3=U7({editType:"none"});q3.family.dflt=O7.HOVERFONT;q3.size.dflt=O7.HOVERFONTSIZE;V7.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:q3,grouptitlefont:U7({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}});var K1=ve((Ame,H7)=>{"use strict";var lj=qo(),j1=l0().hoverlabel,J1=hn().extendFlat;H7.exports={hoverlabel:{bgcolor:J1({},j1.bgcolor,{arrayOk:!0}),bordercolor:J1({},j1.bordercolor,{arrayOk:!0}),font:lj({arrayOk:!0,editType:"none"}),align:J1({},j1.align,{arrayOk:!0}),namelength:J1({},j1.namelength,{arrayOk:!0}),editType:"none"}}});var ms=ve((Mme,G7)=>{"use strict";var uj=qo(),fj=K1();G7.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:uj({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:fj.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}});var $v=ve((Sme,W7)=>{"use strict";var cj=wf(),Q1={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},Z7=Q1.RdBu;function hj(e,t){if(t||(t=Z7),!e)return t;function r(){try{e=Q1[e]||JSON.parse(e)}catch(i){e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),Y7(e)?e:t}function Y7(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t||!cj(i[1]).isValid())return!1;t=+i[0]}return!0}function vj(e){return Q1[e]!==void 0?!0:Y7(e)}W7.exports={scales:Q1,defaultScale:Z7,get:hj,isValid:vj}});var Tf=ve(ed=>{"use strict";ed.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];ed.defaultLine="#444";ed.lightLine="#eee";ed.background="#fff";ed.borderLine="#BEC8D9";ed.lightFraction=100*10/11});var Ua=ve((Cme,X7)=>{"use strict";var Rs=wf(),dj=Da(),pj=al().isTypedArray,Qn=X7.exports={},$1=Tf();Qn.defaults=$1.defaults;var mj=Qn.defaultLine=$1.defaultLine;Qn.lightLine=$1.lightLine;var B3=Qn.background=$1.background;Qn.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};Qn.rgb=function(e){return Qn.tinyRGB(Rs(e))};Qn.opacity=function(e){return e?Rs(e).getAlpha():0};Qn.addOpacity=function(e,t){var r=Rs(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};Qn.combine=function(e,t){var r=Rs(e).toRgb();if(r.a===1)return Rs(e).toRgbString();var i=Rs(t||B3).toRgb(),a=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},s={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return Rs(s).toRgbString()};Qn.interpolate=function(e,t,r){var i=Rs(e).toRgb(),a=Rs(t).toRgb(),s={r:r*i.r+(1-r)*a.r,g:r*i.g+(1-r)*a.g,b:r*i.b+(1-r)*a.b};return Rs(s).toRgbString()};Qn.contrast=function(e,t,r){var i=Rs(e);i.getAlpha()!==1&&(i=Rs(Qn.combine(e,B3)));var a=i.isDark()?t?i.lighten(t):B3:r?i.darken(r):mj;return a.toString()};Qn.stroke=function(e,t){var r=Rs(t);e.style({stroke:Qn.tinyRGB(r),"stroke-opacity":r.getAlpha()})};Qn.fill=function(e,t){var r=Rs(t);e.style({fill:Qn.tinyRGB(r),"fill-opacity":r.getAlpha()})};Qn.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,i,a,s;for(r=0;r<t.length;r++)if(a=t[r],s=e[a],a.substr(a.length-5)==="color")if(Array.isArray(s))for(i=0;i<s.length;i++)s[i]=N3(s[i]);else e[a]=N3(s);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(s))for(i=0;i<s.length;i++)Array.isArray(s[i])&&(s[i][1]=N3(s[i][1]));else if(Array.isArray(s)){var l=s[0];if(!Array.isArray(l)&&l&&typeof l=="object")for(i=0;i<s.length;i++)Qn.clean(s[i])}else s&&typeof s=="object"&&!pj(s)&&Qn.clean(s)}};function N3(e){if(dj(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var i=r[1].trim().split(/\s*[\s,]\s*/),a=t.charAt(3)==="a"&&i.length===4;if(!a&&i.length!==3)return e;for(var s=0;s<i.length;s++){if(!i[s].length||(i[s]=Number(i[s]),!(i[s]>=0)))return e;if(s===3)i[s]>1&&(i[s]=1);else if(i[s]>=1)return e}var l=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return a?"rgba("+l+", "+i[3]+")":"rgb("+l+")"}});var e_=ve((Eme,j7)=>{"use strict";j7.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}});var u0=ve(J7=>{"use strict";J7.counter=function(e,t,r,i){var a=(t||"")+(r?"":"$"),s=i===!1?"":"^";return e==="xy"?new RegExp(s+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a):new RegExp(s+e+"([2-9]|[1-9][0-9]+)?"+a)}});var e8=ve(Fs=>{"use strict";var O3=Da(),K7=wf(),Q7=hn().extendFlat,yj=ms(),gj=$v(),_j=Ua(),xj=e_().DESELECTDIM,f0=_y(),$7=u0().counter,bj=s0().modHalf,Af=al().isArrayOrTypedArray,xh=al().isTypedArraySpec,bh=al().decodeTypedArraySpec;Fs.valObjectMeta={data_array:{coerceFunction:function(e,t,r){t.set(Af(e)?e:xh(e)?bh(e):r)}},enumerated:{coerceFunction:function(e,t,r,i){i.coerceNumber&&(e=+e),i.values.indexOf(e)===-1?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,i=0;i<r.length;i++){var a=String(r[i]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var s=new RegExp(a.substr(1,a.length-2));if(s.test(e))return!0}else if(e===r[i])return!0}return!1}},boolean:{coerceFunction:function(e,t,r){e===!0||e===!1?t.set(e):t.set(r)}},number:{coerceFunction:function(e,t,r,i){xh(e)&&(e=bh(e)),!O3(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},integer:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}xh(e)&&(e=bh(e)),e%1||!O3(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},string:{coerceFunction:function(e,t,r,i){if(typeof e!="string"){var a=typeof e=="number";i.strict===!0||!a?t.set(r):t.set(String(e))}else i.noBlank&&!e?t.set(r):t.set(e)}},color:{coerceFunction:function(e,t,r){xh(e)&&(e=bh(e)),K7(e).isValid()?t.set(e):t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function i(a){return K7(a).isValid()}!Array.isArray(e)||!e.length?t.set(r):e.every(i)?t.set(e):t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(gj.get(e,r))}},angle:{coerceFunction:function(e,t,r){xh(e)&&(e=bh(e)),e==="auto"?t.set("auto"):O3(e)?t.set(bj(+e,360)):t.set(r)}},subplotid:{coerceFunction:function(e,t,r,i){var a=i.regex||$7(r);if(typeof e=="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r?!0:typeof e!="string"?!1:!!$7(r).test(e)}},flaglist:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!="string"){t.set(r);return}for(var a=e.split("+"),s=0;s<a.length;){var l=a[s];i.flags.indexOf(l)===-1||a.indexOf(l)<s?a.splice(s,1):s++}a.length?t.set(a.join("+")):t.set(r)}},any:{coerceFunction:function(e,t,r){e===void 0?t.set(r):t.set(xh(e)?bh(e):e)}},info_array:{coerceFunction:function(e,t,r,i){function a(q,B,z){var O,H={set:function(V){O=V}};return z===void 0&&(z=B.dflt),Fs.valObjectMeta[B.valType].coerceFunction(q,H,z,B),O}if(xh(e)&&(e=bh(e)),!Af(e)){t.set(r);return}var s=i.dimensions===2||i.dimensions==="1-2"&&Array.isArray(e)&&Af(e[0]),l=i.items,f=[],h=Array.isArray(l),v=h&&s&&Af(l[0]),m=s&&h&&!v,b=h&&!m?l.length:e.length,T,S,C,P,E,I;if(r=Array.isArray(r)?r:[],s)for(T=0;T<b;T++)for(f[T]=[],C=Af(e[T])?e[T]:[],m?E=l.length:h?E=l[T].length:E=C.length,S=0;S<E;S++)m?P=l[S]:h?P=l[T][S]:P=l,I=a(C[S],P,(r[T]||[])[S]),I!==void 0&&(f[T][S]=I);else for(T=0;T<b;T++)I=a(e[T],h?l[T]:l,r[T]),I!==void 0&&(f[T]=I);t.set(f)},validateFunction:function(e,t){if(!Af(e))return!1;var r=t.items,i=Array.isArray(r),a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return!1;for(var s=0;s<e.length;s++)if(a){if(!Af(e[s])||!t.freeLength&&e[s].length!==r[s].length)return!1;for(var l=0;l<e[s].length;l++)if(!t_(e[s][l],i?r[s][l]:r))return!1}else if(!t_(e[s],i?r[s]:r))return!1;return!0}}};Fs.coerce=function(e,t,r,i,a){var s=f0(r,i).get(),l=f0(e,i),f=f0(t,i),h=l.get(),v=t._template;if(h===void 0&&v&&(h=f0(v,i).get(),v=0),a===void 0&&(a=s.dflt),s.arrayOk){if(Af(h))return f.set(h),h;if(xh(h))return h=bh(h),f.set(h),h}var m=Fs.valObjectMeta[s.valType].coerceFunction;m(h,f,a,s);var b=f.get();return v&&b===a&&!t_(h,s)&&(h=f0(v,i).get(),m(h,f,a,s),b=f.get()),b};Fs.coerce2=function(e,t,r,i,a){var s=f0(e,i),l=Fs.coerce(e,t,r,i,a),f=s.get();return f!=null?l:!1};Fs.coerceFont=function(e,t,r,i){i||(i={}),r=Q7({},r),r=Q7(r,i.overrideDflt||{});var a={family:e(t+".family",r.family),size:e(t+".size",r.size),color:e(t+".color",r.color),weight:e(t+".weight",r.weight),style:e(t+".style",r.style)};if(i.noFontVariant||(a.variant=e(t+".variant",r.variant)),i.noFontLineposition||(a.lineposition=e(t+".lineposition",r.lineposition)),i.noFontTextcase||(a.textcase=e(t+".textcase",r.textcase)),!i.noFontShadow){var s=r.shadow;s==="none"&&i.autoShadowDflt&&(s="auto"),a.shadow=e(t+".shadow",s)}return a};Fs.coercePattern=function(e,t,r,i){var a=e(t+".shape");if(a){e(t+".solidity"),e(t+".size");var s=e(t+".fillmode"),l=s==="overlay";if(!i){var f=e(t+".bgcolor",l?r:void 0);e(t+".fgcolor",l?_j.contrast(f):r)}e(t+".fgopacity",l?.5:1)}};Fs.coerceHoverinfo=function(e,t,r){var i=t._module.attributes,a=i.hoverinfo?i:yj,s=a.hoverinfo,l;if(r._dataLength===1){var f=s.dflt==="all"?s.flags.slice():s.dflt.split("+");f.splice(f.indexOf("name"),1),l=f.join("+")}return Fs.coerce(e,t,a,"hoverinfo",l)};Fs.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r=e.marker.opacity;if(r!==void 0){var i,a;!Af(r)&&!e.selected&&!e.unselected&&(i=r,a=xj*r),t("selected.marker.opacity",i),t("unselected.marker.opacity",a)}}};function t_(e,t){var r=Fs.valObjectMeta[t.valType];if(t.arrayOk&&Af(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},a=i,s={set:function(l){a=l}};return r.coerceFunction(e,s,i,t),a!==i}Fs.validate=t_});var td=ve((Dme,i8)=>{"use strict";var t8={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},r8={};function a8(e,t){for(var r in e){var i=e[r];i.valType?t[r]=i.dflt:(t[r]||(t[r]={}),a8(i,t[r]))}}a8(t8,r8);i8.exports={configAttributes:t8,dfltConfig:r8}});var V3=ve((zme,n8)=>{"use strict";var U3=ja(),wj=Da(),My=[];n8.exports=function(e,t){if(My.indexOf(e)!==-1)return;My.push(e);var r=1e3;wj(t)?r=t:t==="long"&&(r=3e3);var i=U3.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var a=i.selectAll(".notifier-note").data(My);function s(l){l.duration(700).style("opacity",0).each("end",function(f){var h=My.indexOf(f);h!==-1&&My.splice(h,1),U3.select(this).remove()})}a.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var f=U3.select(this);f.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){f.transition().call(s)});for(var h=f.append("p"),v=l.split(/<br\s*\/?>/g),m=0;m<v.length;m++)m&&h.append("br"),h.append("span").text(v[m]);t==="stick"?f.transition().duration(350).style("opacity",1):f.transition().duration(700).style("opacity",1).transition().delay(r).call(s)})}});var wh=ve((Ime,o8)=>{"use strict";var c0=td().dfltConfig,H3=V3(),G3=o8.exports={};G3.log=function(){var e;if(c0.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(c0.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);H3(r.join("<br>"),"long")}};G3.warn=function(){var e;if(c0.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(c0.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);H3(r.join("<br>"),"stick")}};G3.error=function(){var e;if(c0.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(c0.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);H3(r.join("<br>"),"stick")}}});var r_=ve((Rme,s8)=>{"use strict";s8.exports=function(){}});var Z3=ve((Fme,l8)=>{"use strict";l8.exports=function(t,r){if(r instanceof RegExp){for(var i=r.toString(),a=0;a<t.length;a++)if(t[a]instanceof RegExp&&t[a].toString()===i)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t}});var f8=ve((qme,u8)=>{u8.exports=Tj;function Tj(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var h8=ve((Nme,c8)=>{c8.exports=Aj;function Aj(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}});var d8=ve((Bme,v8)=>{v8.exports=Mj;function Mj(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var Y3=ve((Ome,p8)=>{p8.exports=Sj;function Sj(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var y8=ve((Ume,m8)=>{m8.exports=kj;function kj(e,t){if(e===t){var r=t[1],i=t[2],a=t[3],s=t[6],l=t[7],f=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=a,e[13]=l,e[14]=f}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}});var _8=ve((Vme,g8)=>{g8.exports=Cj;function Cj(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],f=t[5],h=t[6],v=t[7],m=t[8],b=t[9],T=t[10],S=t[11],C=t[12],P=t[13],E=t[14],I=t[15],q=r*f-i*l,B=r*h-a*l,z=r*v-s*l,O=i*h-a*f,H=i*v-s*f,V=a*v-s*h,W=m*P-b*C,K=m*E-T*C,re=m*I-S*C,oe=b*E-T*P,ne=b*I-S*P,he=T*I-S*E,de=q*he-B*ne+z*oe+O*re-H*K+V*W;return de?(de=1/de,e[0]=(f*he-h*ne+v*oe)*de,e[1]=(a*ne-i*he-s*oe)*de,e[2]=(P*V-E*H+I*O)*de,e[3]=(T*H-b*V-S*O)*de,e[4]=(h*re-l*he-v*K)*de,e[5]=(r*he-a*re+s*K)*de,e[6]=(E*z-C*V-I*B)*de,e[7]=(m*V-T*z+S*B)*de,e[8]=(l*ne-f*re+v*W)*de,e[9]=(i*re-r*ne-s*W)*de,e[10]=(C*H-P*z+I*q)*de,e[11]=(b*z-m*H-S*q)*de,e[12]=(f*K-l*oe-h*W)*de,e[13]=(r*oe-i*K+a*W)*de,e[14]=(P*B-C*O-E*q)*de,e[15]=(m*O-b*B+T*q)*de,e):null}});var b8=ve((Hme,x8)=>{x8.exports=Ej;function Ej(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=t[4],f=t[5],h=t[6],v=t[7],m=t[8],b=t[9],T=t[10],S=t[11],C=t[12],P=t[13],E=t[14],I=t[15];return e[0]=f*(T*I-S*E)-b*(h*I-v*E)+P*(h*S-v*T),e[1]=-(i*(T*I-S*E)-b*(a*I-s*E)+P*(a*S-s*T)),e[2]=i*(h*I-v*E)-f*(a*I-s*E)+P*(a*v-s*h),e[3]=-(i*(h*S-v*T)-f*(a*S-s*T)+b*(a*v-s*h)),e[4]=-(l*(T*I-S*E)-m*(h*I-v*E)+C*(h*S-v*T)),e[5]=r*(T*I-S*E)-m*(a*I-s*E)+C*(a*S-s*T),e[6]=-(r*(h*I-v*E)-l*(a*I-s*E)+C*(a*v-s*h)),e[7]=r*(h*S-v*T)-l*(a*S-s*T)+m*(a*v-s*h),e[8]=l*(b*I-S*P)-m*(f*I-v*P)+C*(f*S-v*b),e[9]=-(r*(b*I-S*P)-m*(i*I-s*P)+C*(i*S-s*b)),e[10]=r*(f*I-v*P)-l*(i*I-s*P)+C*(i*v-s*f),e[11]=-(r*(f*S-v*b)-l*(i*S-s*b)+m*(i*v-s*f)),e[12]=-(l*(b*E-T*P)-m*(f*E-h*P)+C*(f*T-h*b)),e[13]=r*(b*E-T*P)-m*(i*E-a*P)+C*(i*T-a*b),e[14]=-(r*(f*E-h*P)-l*(i*E-a*P)+C*(i*h-a*f)),e[15]=r*(f*T-h*b)-l*(i*T-a*b)+m*(i*h-a*f),e}});var T8=ve((Gme,w8)=>{w8.exports=Lj;function Lj(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],f=e[6],h=e[7],v=e[8],m=e[9],b=e[10],T=e[11],S=e[12],C=e[13],P=e[14],E=e[15],I=t*l-r*s,q=t*f-i*s,B=t*h-a*s,z=r*f-i*l,O=r*h-a*l,H=i*h-a*f,V=v*C-m*S,W=v*P-b*S,K=v*E-T*S,re=m*P-b*C,oe=m*E-T*C,ne=b*E-T*P;return I*ne-q*oe+B*re+z*K-O*W+H*V}});var M8=ve((Zme,A8)=>{A8.exports=Pj;function Pj(e,t,r){var i=t[0],a=t[1],s=t[2],l=t[3],f=t[4],h=t[5],v=t[6],m=t[7],b=t[8],T=t[9],S=t[10],C=t[11],P=t[12],E=t[13],I=t[14],q=t[15],B=r[0],z=r[1],O=r[2],H=r[3];return e[0]=B*i+z*f+O*b+H*P,e[1]=B*a+z*h+O*T+H*E,e[2]=B*s+z*v+O*S+H*I,e[3]=B*l+z*m+O*C+H*q,B=r[4],z=r[5],O=r[6],H=r[7],e[4]=B*i+z*f+O*b+H*P,e[5]=B*a+z*h+O*T+H*E,e[6]=B*s+z*v+O*S+H*I,e[7]=B*l+z*m+O*C+H*q,B=r[8],z=r[9],O=r[10],H=r[11],e[8]=B*i+z*f+O*b+H*P,e[9]=B*a+z*h+O*T+H*E,e[10]=B*s+z*v+O*S+H*I,e[11]=B*l+z*m+O*C+H*q,B=r[12],z=r[13],O=r[14],H=r[15],e[12]=B*i+z*f+O*b+H*P,e[13]=B*a+z*h+O*T+H*E,e[14]=B*s+z*v+O*S+H*I,e[15]=B*l+z*m+O*C+H*q,e}});var k8=ve((Yme,S8)=>{S8.exports=Dj;function Dj(e,t,r){var i=r[0],a=r[1],s=r[2],l,f,h,v,m,b,T,S,C,P,E,I;return t===e?(e[12]=t[0]*i+t[4]*a+t[8]*s+t[12],e[13]=t[1]*i+t[5]*a+t[9]*s+t[13],e[14]=t[2]*i+t[6]*a+t[10]*s+t[14],e[15]=t[3]*i+t[7]*a+t[11]*s+t[15]):(l=t[0],f=t[1],h=t[2],v=t[3],m=t[4],b=t[5],T=t[6],S=t[7],C=t[8],P=t[9],E=t[10],I=t[11],e[0]=l,e[1]=f,e[2]=h,e[3]=v,e[4]=m,e[5]=b,e[6]=T,e[7]=S,e[8]=C,e[9]=P,e[10]=E,e[11]=I,e[12]=l*i+m*a+C*s+t[12],e[13]=f*i+b*a+P*s+t[13],e[14]=h*i+T*a+E*s+t[14],e[15]=v*i+S*a+I*s+t[15]),e}});var E8=ve((Wme,C8)=>{C8.exports=zj;function zj(e,t,r){var i=r[0],a=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var P8=ve((Xme,L8)=>{L8.exports=Ij;function Ij(e,t,r,i){var a=i[0],s=i[1],l=i[2],f=Math.sqrt(a*a+s*s+l*l),h,v,m,b,T,S,C,P,E,I,q,B,z,O,H,V,W,K,re,oe,ne,he,de,Ee;return Math.abs(f)<1e-6?null:(f=1/f,a*=f,s*=f,l*=f,h=Math.sin(r),v=Math.cos(r),m=1-v,b=t[0],T=t[1],S=t[2],C=t[3],P=t[4],E=t[5],I=t[6],q=t[7],B=t[8],z=t[9],O=t[10],H=t[11],V=a*a*m+v,W=s*a*m+l*h,K=l*a*m-s*h,re=a*s*m-l*h,oe=s*s*m+v,ne=l*s*m+a*h,he=a*l*m+s*h,de=s*l*m-a*h,Ee=l*l*m+v,e[0]=b*V+P*W+B*K,e[1]=T*V+E*W+z*K,e[2]=S*V+I*W+O*K,e[3]=C*V+q*W+H*K,e[4]=b*re+P*oe+B*ne,e[5]=T*re+E*oe+z*ne,e[6]=S*re+I*oe+O*ne,e[7]=C*re+q*oe+H*ne,e[8]=b*he+P*de+B*Ee,e[9]=T*he+E*de+z*Ee,e[10]=S*he+I*de+O*Ee,e[11]=C*he+q*de+H*Ee,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}});var z8=ve((jme,D8)=>{D8.exports=Rj;function Rj(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[4],l=t[5],f=t[6],h=t[7],v=t[8],m=t[9],b=t[10],T=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+v*i,e[5]=l*a+m*i,e[6]=f*a+b*i,e[7]=h*a+T*i,e[8]=v*a-s*i,e[9]=m*a-l*i,e[10]=b*a-f*i,e[11]=T*a-h*i,e}});var R8=ve((Jme,I8)=>{I8.exports=Fj;function Fj(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],l=t[1],f=t[2],h=t[3],v=t[8],m=t[9],b=t[10],T=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-v*i,e[1]=l*a-m*i,e[2]=f*a-b*i,e[3]=h*a-T*i,e[8]=s*i+v*a,e[9]=l*i+m*a,e[10]=f*i+b*a,e[11]=h*i+T*a,e}});var q8=ve((Kme,F8)=>{F8.exports=qj;function qj(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],l=t[1],f=t[2],h=t[3],v=t[4],m=t[5],b=t[6],T=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+v*i,e[1]=l*a+m*i,e[2]=f*a+b*i,e[3]=h*a+T*i,e[4]=v*a-s*i,e[5]=m*a-l*i,e[6]=b*a-f*i,e[7]=T*a-h*i,e}});var B8=ve((Qme,N8)=>{N8.exports=Nj;function Nj(e,t,r){var i,a,s,l=r[0],f=r[1],h=r[2],v=Math.sqrt(l*l+f*f+h*h);return Math.abs(v)<1e-6?null:(v=1/v,l*=v,f*=v,h*=v,i=Math.sin(t),a=Math.cos(t),s=1-a,e[0]=l*l*s+a,e[1]=f*l*s+h*i,e[2]=h*l*s-f*i,e[3]=0,e[4]=l*f*s-h*i,e[5]=f*f*s+a,e[6]=h*f*s+l*i,e[7]=0,e[8]=l*h*s+f*i,e[9]=f*h*s-l*i,e[10]=h*h*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}});var U8=ve(($me,O8)=>{O8.exports=Bj;function Bj(e,t,r){var i=t[0],a=t[1],s=t[2],l=t[3],f=i+i,h=a+a,v=s+s,m=i*f,b=i*h,T=i*v,S=a*h,C=a*v,P=s*v,E=l*f,I=l*h,q=l*v;return e[0]=1-(S+P),e[1]=b+q,e[2]=T-I,e[3]=0,e[4]=b-q,e[5]=1-(m+P),e[6]=C+E,e[7]=0,e[8]=T+I,e[9]=C-E,e[10]=1-(m+S),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}});var H8=ve((eye,V8)=>{V8.exports=Oj;function Oj(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var Z8=ve((tye,G8)=>{G8.exports=Uj;function Uj(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});var W8=ve((rye,Y8)=>{Y8.exports=Vj;function Vj(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var j8=ve((aye,X8)=>{X8.exports=Hj;function Hj(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var K8=ve((iye,J8)=>{J8.exports=Gj;function Gj(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var W3=ve((nye,Q8)=>{Q8.exports=Zj;function Zj(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],l=r+r,f=i+i,h=a+a,v=r*l,m=i*l,b=i*f,T=a*l,S=a*f,C=a*h,P=s*l,E=s*f,I=s*h;return e[0]=1-b-C,e[1]=m+I,e[2]=T-E,e[3]=0,e[4]=m-I,e[5]=1-v-C,e[6]=S+P,e[7]=0,e[8]=T+E,e[9]=S-P,e[10]=1-v-b,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var eS=ve((oye,$8)=>{$8.exports=Yj;function Yj(e,t,r,i,a,s,l){var f=1/(r-t),h=1/(a-i),v=1/(s-l);return e[0]=s*2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*h,e[6]=0,e[7]=0,e[8]=(r+t)*f,e[9]=(a+i)*h,e[10]=(l+s)*v,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*s*2*v,e[15]=0,e}});var rS=ve((sye,tS)=>{tS.exports=Wj;function Wj(e,t,r,i,a){var s=1/Math.tan(t/2),l=1/(i-a);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*i*l,e[15]=0,e}});var iS=ve((lye,aS)=>{aS.exports=Xj;function Xj(e,t,r,i){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),h=2/(l+f),v=2/(a+s);return e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=-((l-f)*h*.5),e[9]=(a-s)*v*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}});var oS=ve((uye,nS)=>{nS.exports=jj;function jj(e,t,r,i,a,s,l){var f=1/(t-r),h=1/(i-a),v=1/(s-l);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*v,e[11]=0,e[12]=(t+r)*f,e[13]=(a+i)*h,e[14]=(l+s)*v,e[15]=1,e}});var lS=ve((fye,sS)=>{var Jj=Y3();sS.exports=Kj;function Kj(e,t,r,i){var a,s,l,f,h,v,m,b,T,S,C=t[0],P=t[1],E=t[2],I=i[0],q=i[1],B=i[2],z=r[0],O=r[1],H=r[2];return Math.abs(C-z)<1e-6&&Math.abs(P-O)<1e-6&&Math.abs(E-H)<1e-6?Jj(e):(m=C-z,b=P-O,T=E-H,S=1/Math.sqrt(m*m+b*b+T*T),m*=S,b*=S,T*=S,a=q*T-B*b,s=B*m-I*T,l=I*b-q*m,S=Math.sqrt(a*a+s*s+l*l),S?(S=1/S,a*=S,s*=S,l*=S):(a=0,s=0,l=0),f=b*l-T*s,h=T*a-m*l,v=m*s-b*a,S=Math.sqrt(f*f+h*h+v*v),S?(S=1/S,f*=S,h*=S,v*=S):(f=0,h=0,v=0),e[0]=a,e[1]=f,e[2]=m,e[3]=0,e[4]=s,e[5]=h,e[6]=b,e[7]=0,e[8]=l,e[9]=v,e[10]=T,e[11]=0,e[12]=-(a*C+s*P+l*E),e[13]=-(f*C+h*P+v*E),e[14]=-(m*C+b*P+T*E),e[15]=1,e)}});var fS=ve((cye,uS)=>{uS.exports=Qj;function Qj(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}});var X3=ve((hye,cS)=>{cS.exports={create:f8(),clone:h8(),copy:d8(),identity:Y3(),transpose:y8(),invert:_8(),adjoint:b8(),determinant:T8(),multiply:M8(),translate:k8(),scale:E8(),rotate:P8(),rotateX:z8(),rotateY:R8(),rotateZ:q8(),fromRotation:B8(),fromRotationTranslation:U8(),fromScaling:H8(),fromTranslation:Z8(),fromXRotation:W8(),fromYRotation:j8(),fromZRotation:K8(),fromQuat:W3(),frustum:eS(),perspective:rS(),perspectiveFromFieldOfView:iS(),ortho:oS(),lookAt:lS(),str:fS()}});var a_=ve(Sn=>{"use strict";var $j=X3();Sn.init2dArray=function(e,t){for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(t);return r};Sn.transposeRagged=function(e){var t=0,r=e.length,i,a;for(i=0;i<r;i++)t=Math.max(t,e[i].length);var s=new Array(t);for(i=0;i<t;i++)for(s[i]=new Array(r),a=0;a<r;a++)s[i][a]=e[a][i];return s};Sn.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length,i,a;if(e[0].length)for(i=new Array(r),a=0;a<r;a++)i[a]=Sn.dot(e[a],t);else if(t[0].length){var s=Sn.transposeRagged(t);for(i=new Array(s.length),a=0;a<s.length;a++)i[a]=Sn.dot(e,s[a])}else for(i=0,a=0;a<r;a++)i+=e[a]*t[a];return i};Sn.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};Sn.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};Sn.rotationXYMatrix=function(e,t,r){return Sn.dot(Sn.dot(Sn.translationMatrix(t,r),Sn.rotationMatrix(e)),Sn.translationMatrix(-t,-r))};Sn.apply3DTransform=function(e){return function(){var t=arguments,r=arguments.length===1?t[0]:[t[0],t[1],t[2]||0];return Sn.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}};Sn.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return Sn.dot(e,[r[0],r[1],1]).slice(0,2)}};Sn.apply2DTransform2=function(e){var t=Sn.apply2DTransform(e);return function(r){return t(r.slice(0,2)).concat(t(r.slice(2,4)))}};Sn.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};Sn.inverseTransformMatrix=function(e){var t=[];return $j.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}});var Sy=ve((dye,yS)=>{"use strict";var eJ=ja(),hS=wh(),tJ=a_(),rJ=X3();function aJ(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function iJ(e){var t=eJ.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function vS(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function nJ(e,t){dS("global",e,t)}function dS(e,t,r){var i="plotly.js-style-"+e,a=document.getElementById(i);if(!(a&&a.matches(".no-inline-styles"))){a||(a=document.createElement("style"),a.setAttribute("id",i),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var s=a.sheet;s?s.insertRule?s.insertRule(t+"{"+r+"}",0):s.addRule?s.addRule(t,r,0):hS.warn("addStyleRule failed"):hS.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function oJ(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&vS(r)}function sJ(e,t,r,i,a){var s=i.split(":"),l=a.split(":"),f="data-btn-style-event-added";document.querySelectorAll(e).forEach(function(h){h.getAttribute(f)||(h.addEventListener("mouseenter",function(){var v=this.querySelector(r);v&&(v.style[s[0]]=s[1])}),h.addEventListener("mouseleave",function(){var v=this.querySelector(r);v&&(t&&this.matches(t)?v.style[s[0]]=s[1]:v.style[l[0]]=l[1])}),h.setAttribute(f,!0))})}function lJ(e){var t=mS(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(i){var a=pS(i);if(a){var s=tJ.convertCssMatrix(a);r=rJ.multiply(r,r,s)}}),r}function pS(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function mS(e){for(var t=[];uJ(e);)t.push(e),e=e.parentNode,typeof ShadowRoot=="function"&&e instanceof ShadowRoot&&(e=e.host);return t}function uJ(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function fJ(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}yS.exports={getGraphDiv:aJ,isPlotDiv:iJ,removeElement:vS,addStyleRule:nJ,addRelatedStyleRule:dS,deleteRelatedStyleRule:oJ,setStyleOnHover:sJ,getFullTransformMatrix:lJ,getElementTransformMatrix:pS,getElementAndAncestors:mS,equalDomRects:fJ}});var ky=ve((pye,gS)=>{"use strict";gS.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}});var il=ve((mye,MS)=>{"use strict";var xS=hn().extendFlat,cJ=fc(),bS={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},wS={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},hJ=bS.flags.slice().concat(["fullReplot"]),vJ=wS.flags.slice().concat("layoutReplot");MS.exports={traces:bS,layout:wS,traceFlags:function(){return _S(hJ)},layoutFlags:function(){return _S(vJ)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var i=r.split("+"),a=0;a<i.length;a++)e[i[a]]=!0},overrideAll:TS};function _S(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function TS(e,t,r){var i=xS({},e);for(var a in i){var s=i[a];cJ(s)&&(i[a]=AS(s,t,r,a))}return r==="from-root"&&(i.editType=t),i}function AS(e,t,r,i){if(e.valType){var a=xS({},e);if(a.editType=t,Array.isArray(e.items)){a.items=new Array(e.items.length);for(var s=0;s<e.items.length;s++)a.items[s]=AS(e.items[s],t,"from-root")}return a}else return TS(e,t,i.charAt(0)==="_"?"nested":"from-root")}});var cc=ve(j3=>{"use strict";j3.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};j3.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}});var J3=ve((gye,SS)=>{"use strict";SS.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}});var Vl=ve(i_=>{"use strict";var kS=J3(),_ye=kS.FORMAT_LINK,xye=kS.DATE_FORMAT_LINK;function K3(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var i=[],a=0;a<r.length;a++)i[a]="`"+r[a]+"`";t=t+"Finally, the template string has access to ",r.length===1?t=t+"variable "+i[0]:t=t+"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}i_.hovertemplateAttrs=function(e,t){e=e||{},t=t||{};var r=K3(t),i={valType:"string",dflt:"",editType:e.editType||"none"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};i_.texttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=K3(t),i={valType:"string",dflt:"",editType:e.editType||"calc"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};i_.shapeTexttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=e.newshape?"new ":"",i=K3(t),a={valType:"string",dflt:"",editType:e.editType||"arraydraw"};return a}});var s_=ve((wye,zS)=>{"use strict";function Th(e,t){return t?t.d2l(e):e}function CS(e,t){return t?t.l2d(e):e}function dJ(e){return e.x0}function pJ(e){return e.x1}function mJ(e){return e.y0}function yJ(e){return e.y1}function ES(e){return e.x0shift||0}function LS(e){return e.x1shift||0}function PS(e){return e.y0shift||0}function DS(e){return e.y1shift||0}function n_(e,t){return Th(e.x1,t)+LS(e)-Th(e.x0,t)-ES(e)}function o_(e,t,r){return Th(e.y1,r)+DS(e)-Th(e.y0,r)-PS(e)}function gJ(e,t){return Math.abs(n_(e,t))}function _J(e,t,r){return Math.abs(o_(e,t,r))}function xJ(e,t,r){return e.type!=="line"?void 0:Math.sqrt(Math.pow(n_(e,t),2)+Math.pow(o_(e,t,r),2))}function bJ(e,t){return CS((Th(e.x1,t)+LS(e)+Th(e.x0,t)+ES(e))/2,t)}function wJ(e,t,r){return CS((Th(e.y1,r)+DS(e)+Th(e.y0,r)+PS(e))/2,r)}function TJ(e,t,r){return e.type!=="line"?void 0:o_(e,t,r)/n_(e,t)}zS.exports={x0:dJ,x1:pJ,y0:mJ,y1:yJ,slope:TJ,dx:n_,dy:o_,width:gJ,height:_J,length:xJ,xcenter:bJ,ycenter:wJ}});var FS=ve((Tye,RS)=>{"use strict";var AJ=il().overrideAll,rd=ms(),IS=qo(),MJ=cc().dash,Ah=hn().extendFlat,SJ=Vl().shapeTexttemplateAttrs,kJ=s_();RS.exports=AJ({newshape:{visible:Ah({},rd.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:Ah({},rd.legend,{}),legendgroup:Ah({},rd.legendgroup,{}),legendgrouptitle:{text:Ah({},rd.legendgrouptitle.text,{}),font:IS({})},legendrank:Ah({},rd.legendrank,{}),legendwidth:Ah({},rd.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:Ah({},MJ,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:Ah({},rd.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:SJ({newshape:!0},{keys:Object.keys(kJ)}),font:IS({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")});var NS=ve((Aye,qS)=>{"use strict";var CJ=cc().dash,EJ=hn().extendFlat;qS.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:EJ({},CJ,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}});var l_=ve((Mye,BS)=>{"use strict";BS.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}});var h0=ve((Sye,HS)=>{"use strict";var Q3=qo(),LJ=ky(),u_=Tf(),OS=FS(),US=NS(),PJ=l_(),VS=hn().extendFlat,f_=Q3({editType:"calc"});f_.family.dflt='"Open Sans", verdana, arial, sans-serif';f_.size.dflt=12;f_.color.dflt=u_.defaultLine;HS.exports={font:f_,title:{text:{valType:"string",editType:"layoutstyle"},font:Q3({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:Q3({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:VS(PJ({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:u_.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:u_.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:u_.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:OS.newshape,activeshape:OS.activeshape,newselection:US.newselection,activeselection:US.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:VS({},LJ.transition,{editType:"none"})}});var GS=o7(()=>{});var DJ={};var ZS=o7(()=>{GS()});var la=ve(za=>{"use strict";var v0=wh(),YS=r_(),WS=Z3(),zJ=fc(),IJ=Sy().addStyleRule,XS=hn(),RJ=ms(),FJ=h0(),qJ=XS.extendFlat,$3=XS.extendDeepAll;za.modules={};za.allCategories={};za.allTypes=[];za.subplotsRegistry={};za.componentsRegistry={};za.layoutArrayContainers=[];za.layoutArrayRegexes=[];za.traceLayoutAttributes={};za.localeRegistry={};za.apiMethodRegistry={};za.collectableSubplotTypes=null;za.register=function(t){if(za.collectableSubplotTypes=null,t)t&&!Array.isArray(t)&&(t=[t]);else throw new Error("No argument passed to Plotly.register.");for(var r=0;r<t.length;r++){var i=t[r];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":NJ(i);break;case"transform":UJ(i);break;case"component":OJ(i);break;case"locale":VJ(i);break;case"apiMethod":var a=i.name;za.apiMethodRegistry[a]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};za.getModule=function(e){var t=za.modules[QS(e)];return t?t._module:!1};za.traceIs=function(e,t){if(e=QS(e),e==="various")return!1;var r=za.modules[e];return r||(e&&v0.log("Unrecognized trace type "+e+"."),r=za.modules[RJ.type.dflt]),!!r.categories[t]};za.getComponentMethod=function(e,t){var r=za.componentsRegistry[e];return r&&r[t]||YS};za.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return za.apiMethodRegistry[e].apply(null,t)};function NJ(e){var t=e.name,r=e.categories,i=e.meta;if(za.modules[t]){v0.log("Type "+t+" already registered");return}za.subplotsRegistry[e.basePlotModule.name]||BJ(e.basePlotModule);for(var a={},s=0;s<r.length;s++)a[r[s]]=!0,za.allCategories[r[s]]=!0;za.modules[t]={_module:e,categories:a},i&&Object.keys(i).length&&(za.modules[t].meta=i),za.allTypes.push(t);for(var l in za.componentsRegistry)JS(l,t);e.layoutAttributes&&qJ(za.traceLayoutAttributes,e.layoutAttributes);var f=e.basePlotModule,h=f.name;if(h==="mapbox"){var v=f.constants.styleRules;for(var m in v)IJ(".js-plotly-plot .plotly .mapboxgl-"+m,v[m])}h==="map"&&(ZS(),VX(DJ)),(h==="geo"||h==="mapbox"||h==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function BJ(e){var t=e.name;if(za.subplotsRegistry[t]){v0.log("Plot type "+t+" already registered.");return}jS(e),za.subplotsRegistry[t]=e;for(var r in za.componentsRegistry)KS(r,e.name)}function OJ(e){if(typeof e.name!="string")throw new Error("Component module *name* must be a string.");var t=e.name;za.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&WS(za.layoutArrayContainers,t),jS(e));for(var r in za.modules)JS(t,r);for(var i in za.subplotsRegistry)KS(t,i);e.schema&&e.schema.layout&&$3(FJ,e.schema.layout)}function UJ(e){if(typeof e.name!="string")throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,r=typeof e.transform=="function",i=typeof e.calcTransform=="function";if(!r&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");r&&i&&v0.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),zJ(e.attributes)||v0.log(t+" registered without an *attributes* object."),typeof e.supplyDefaults!="function"&&v0.log(t+" registered without a *supplyDefaults* method.")}function VJ(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,a=e.format,s=i&&Object.keys(i).length,l=a&&Object.keys(a).length,f=za.localeRegistry,h=f[t];if(h||(f[t]=h={}),r!==t){var v=f[r];v||(f[r]=v={}),s&&v.dictionary===h.dictionary&&(v.dictionary=i),l&&v.format===h.format&&(v.format=a)}s&&(h.dictionary=i),l&&(h.format=a)}function jS(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)WS(za.layoutArrayRegexes,t[r])}}function JS(e,t){var r=za.componentsRegistry[e].schema;if(!(!r||!r.traces)){var i=r.traces[t];i&&$3(za.modules[t]._module.attributes,i)}}function KS(e,t){var r=za.componentsRegistry[e].schema;if(!(!r||!r.subplots)){var i=za.subplotsRegistry[t],a=i.layoutAttributes,s=i.attr==="subplot"?i.name:i.attr;Array.isArray(s)&&(s=s[0]);var l=r.subplots[s];a&&l&&$3(a,l)}}function QS(e){return typeof e=="object"&&(e=e.type),e}});var s9=ve(kn=>{"use strict";var HJ=n0().timeFormat,n9=Da(),ew=wh(),Sh=s0().mod,m0=Hi(),Hl=m0.BADNUM,qs=m0.ONEDAY,Cy=m0.ONEHOUR,Mh=m0.ONEMIN,p0=m0.ONESEC,Ey=m0.EPOCHJD,hc=la(),$S=n0().utcFormat,GJ=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,ZJ=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,e9=new Date().getFullYear()-70;function vc(e){return e&&hc.componentsRegistry.calendars&&typeof e=="string"&&e!=="gregorian"}kn.dateTick0=function(e,t){var r=YJ(e,!!t);if(t<2)return r;var i=kn.dateTime2ms(r,e);return i+=qs*(t-1),kn.ms2DateTime(i,0,e)};function YJ(e,t){return vc(e)?t?hc.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:hc.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}kn.dfltRange=function(e){return vc(e)?hc.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]};kn.isJSDate=function(e){return typeof e=="object"&&e!==null&&typeof e.getTime=="function"};var h_,v_;kn.dateTime2ms=function(e,t){if(kn.isJSDate(e)){var r=e.getTimezoneOffset()*Mh,i=(e.getUTCMinutes()-e.getMinutes())*Mh+(e.getUTCSeconds()-e.getSeconds())*p0+(e.getUTCMilliseconds()-e.getMilliseconds());if(i){var a=3*Mh;r=r-a/2+Sh(i-r+a/2,a)}return e=Number(e)-r,e>=h_&&e<=v_?e:Hl}if(typeof e!="string"&&typeof e!="number")return Hl;e=String(e);var s=vc(t),l=e.charAt(0);s&&(l==="G"||l==="g")&&(e=e.substr(1),t="");var f=s&&t.substr(0,7)==="chinese",h=e.match(f?ZJ:GJ);if(!h)return Hl;var v=h[1],m=h[3]||"1",b=Number(h[5]||1),T=Number(h[7]||0),S=Number(h[9]||0),C=Number(h[11]||0);if(s){if(v.length===2)return Hl;v=Number(v);var P;try{var E=hc.getComponentMethod("calendars","getCal")(t);if(f){var I=m.charAt(m.length-1)==="i";m=parseInt(m,10),P=E.newDate(v,E.toMonthIndex(v,m,I),b)}else P=E.newDate(v,Number(m),b)}catch(B){return Hl}return P?(P.toJD()-Ey)*qs+T*Cy+S*Mh+C*p0:Hl}v.length===2?v=(Number(v)+2e3-e9)%100+e9:v=Number(v),m-=1;var q=new Date(Date.UTC(2e3,m,b,T,S));return q.setUTCFullYear(v),q.getUTCMonth()!==m||q.getUTCDate()!==b?Hl:q.getTime()+C*p0};h_=kn.MIN_MS=kn.dateTime2ms("-9999");v_=kn.MAX_MS=kn.dateTime2ms("9999-12-31 23:59:59.9999");kn.isDateTime=function(e,t){return kn.dateTime2ms(e,t)!==Hl};function d0(e,t){return String(e+Math.pow(10,t)).substr(1)}var c_=90*qs,t9=3*Cy,r9=5*Mh;kn.ms2DateTime=function(e,t,r){if(typeof e!="number"||!(e>=h_&&e<=v_))return Hl;t||(t=0);var i=Math.floor(Sh(e+.05,1)*10),a=Math.round(e-i/10),s,l,f,h,v,m;if(vc(r)){var b=Math.floor(a/qs)+Ey,T=Math.floor(Sh(e,qs));try{s=hc.getComponentMethod("calendars","getCal")(r).fromJD(b).formatDate("yyyy-mm-dd")}catch(S){s=$S("G%Y-%m-%d")(new Date(a))}if(s.charAt(0)==="-")for(;s.length<11;)s="-0"+s.substr(1);else for(;s.length<10;)s="0"+s;l=t<c_?Math.floor(T/Cy):0,f=t<c_?Math.floor(T%Cy/Mh):0,h=t<t9?Math.floor(T%Mh/p0):0,v=t<r9?T%p0*10+i:0}else m=new Date(a),s=$S("%Y-%m-%d")(m),l=t<c_?m.getUTCHours():0,f=t<c_?m.getUTCMinutes():0,h=t<t9?m.getUTCSeconds():0,v=t<r9?m.getUTCMilliseconds()*10+i:0;return o9(s,l,f,h,v)};kn.ms2DateTimeLocal=function(e){if(!(e>=h_+qs&&e<=v_-qs))return Hl;var t=Math.floor(Sh(e+.05,1)*10),r=new Date(Math.round(e-t/10)),i=HJ("%Y-%m-%d")(r),a=r.getHours(),s=r.getMinutes(),l=r.getSeconds(),f=r.getUTCMilliseconds()*10+t;return o9(i,a,s,l,f)};function o9(e,t,r,i,a){if((t||r||i||a)&&(e+=" "+d0(t,2)+":"+d0(r,2),(i||a)&&(e+=":"+d0(i,2),a))){for(var s=4;a%10===0;)s-=1,a/=10;e+="."+d0(a,s)}return e}kn.cleanDate=function(e,t,r){if(e===Hl)return t;if(kn.isJSDate(e)||typeof e=="number"&&isFinite(e)){if(vc(r))return ew.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=kn.ms2DateTimeLocal(+e),!e&&t!==void 0)return t}else if(!kn.isDateTime(e,r))return ew.error("unrecognized date",e),t;return e};var WJ=/%\d?f/g,XJ=/%h/g,jJ={1:"1",2:"1",3:"2",4:"2"};function a9(e,t,r,i){e=e.replace(WJ,function(s){var l=Math.min(+s.charAt(1)||6,6),f=(t/1e3%1+2).toFixed(l).substr(2).replace(/0+$/,"")||"0";return f});var a=new Date(Math.floor(t+.05));if(e=e.replace(XJ,function(){return jJ[r("%q")(a)]}),vc(i))try{e=hc.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(s){return"Invalid"}return r(e)(a)}var JJ=[59,59.9,59.99,59.999,59.9999];function KJ(e,t){var r=Sh(e+.05,qs),i=d0(Math.floor(r/Cy),2)+":"+d0(Sh(Math.floor(r/Mh),60),2);if(t!=="M"){n9(t)||(t=0);var a=Math.min(Sh(e/p0,60),JJ[t]),s=(100+a).toFixed(t).substr(1);t>0&&(s=s.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+s}return i}kn.formatDate=function(e,t,r,i,a,s){if(a=vc(a)&&a,!t)if(r==="y")t=s.year;else if(r==="m")t=s.month;else if(r==="d")t=s.dayMonth+`
`+s.year;else return KJ(e,r)+`
`+a9(s.dayMonthYear,e,i,a);return a9(t,e,i,a)};var i9=3*qs;kn.incrementMonth=function(e,t,r){r=vc(r)&&r;var i=Sh(e,qs);if(e=Math.round(e-i),r)try{var a=Math.round(e/qs)+Ey,s=hc.getComponentMethod("calendars","getCal")(r),l=s.fromJD(a);return t%12?s.add(l,t,"m"):s.add(l,t/12,"y"),(l.toJD()-Ey)*qs+i}catch(h){ew.error("invalid ms "+e+" in calendar "+r)}var f=new Date(e+i9);return f.setUTCMonth(f.getUTCMonth()+t)+i-i9};kn.findExactDates=function(e,t){for(var r=0,i=0,a=0,s=0,l,f,h=vc(t)&&hc.getComponentMethod("calendars","getCal")(t),v=0;v<e.length;v++){if(f=e[v],!n9(f)){s++;continue}if(!(f%qs))if(h)try{l=h.fromJD(f/qs+Ey),l.day()===1?l.month()===1?r++:i++:a++}catch(b){}else l=new Date(f),l.getUTCDate()===1?l.getUTCMonth()===0?r++:i++:a++}i+=r,a+=i;var m=e.length-s;return{exactYears:r/m,exactMonths:i/m,exactDays:a/m}}});var d_=ve((Dye,l9)=>{"use strict";l9.exports=function(t){return t}});var rw=ve(dc=>{"use strict";var QJ=Da(),$J=wh(),eK=d_(),tK=Hi().BADNUM,tw=1e-9;dc.findBin=function(e,t,r){if(QJ(t.start))return r?Math.ceil((e-t.start)/t.size-tw)-1:Math.floor((e-t.start)/t.size+tw);var i=0,a=t.length,s=0,l=a>1?(t[a-1]-t[0])/(a-1):1,f,h;for(l>=0?h=r?rK:aK:h=r?nK:iK,e+=l*tw*(r?-1:1)*(l>=0?1:-1);i<a&&s++<100;)f=Math.floor((i+a)/2),h(t[f],e)?i=f+1:a=f;return s>90&&$J.log("Long binary search..."),i-1};function rK(e,t){return e<t}function aK(e,t){return e<=t}function iK(e,t){return e>t}function nK(e,t){return e>=t}dc.sorterAsc=function(e,t){return e-t};dc.sorterDes=function(e,t){return t-e};dc.distinctVals=function(e){var t=e.slice();t.sort(dc.sorterAsc);var r;for(r=t.length-1;r>-1&&t[r]===tK;r--);for(var i=t[r]-t[0]||1,a=i/(r||1)/1e4,s=[],l,f=0;f<=r;f++){var h=t[f],v=h-l;l===void 0?(s.push(h),l=h):v>a&&(i=Math.min(i,v),s.push(h),l=h)}return{vals:s,minDiff:i}};dc.roundUp=function(e,t,r){for(var i=0,a=t.length-1,s,l=0,f=r?0:1,h=r?1:0,v=r?Math.ceil:Math.floor;i<a&&l++<100;)s=v((i+a)/2),t[s]<=e?i=s+f:a=s-h;return t[i]};dc.sort=function(e,t){for(var r=0,i=0,a=1;a<e.length;a++){var s=t(e[a],e[a-1]);if(s<0?r=1:s>0&&(i=1),r&&i)return e.sort(t)}return i?e:e.reverse()};dc.findIndexOfMin=function(e,t){t=t||eK;for(var r=1/0,i,a=0;a<e.length;a++){var s=t(e[a]);s<r&&(r=s,i=a)}return i}});var p_=ve((Iye,u9)=>{"use strict";u9.exports=function(t){return Object.keys(t).sort()}});var f9=ve(Cn=>{"use strict";var Ly=Da(),oK=al().isArrayOrTypedArray;Cn.aggNums=function(e,t,r,i){var a,s;if((!i||i>r.length)&&(i=r.length),Ly(t)||(t=!1),oK(r[0])){for(s=new Array(i),a=0;a<i;a++)s[a]=Cn.aggNums(e,t,r[a]);r=s}for(a=0;a<i;a++)Ly(t)?Ly(r[a])&&(t=e(+t,+r[a])):t=r[a];return t};Cn.len=function(e){return Cn.aggNums(function(t){return t+1},0,e)};Cn.mean=function(e,t){return t||(t=Cn.len(e)),Cn.aggNums(function(r,i){return r+i},0,e)/t};Cn.geometricMean=function(e,t){return t||(t=Cn.len(e)),Math.pow(Cn.aggNums(function(r,i){return r*i},1,e),1/t)};Cn.midRange=function(e){if(!(e===void 0||e.length===0))return(Cn.aggNums(Math.max,null,e)+Cn.aggNums(Math.min,null,e))/2};Cn.variance=function(e,t,r){return t||(t=Cn.len(e)),Ly(r)||(r=Cn.mean(e,t)),Cn.aggNums(function(i,a){return i+Math.pow(a-r,2)},0,e)/t};Cn.stdev=function(e,t,r){return Math.sqrt(Cn.variance(e,t,r))};Cn.median=function(e){var t=e.slice().sort();return Cn.interp(t,.5)};Cn.interp=function(e,t){if(!Ly(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}});var p9=ve((Fye,d9)=>{"use strict";var c9=s0(),aw=c9.mod,sK=c9.modHalf,Py=Math.PI,kh=2*Py;function lK(e){return e/180*Py}function uK(e){return e/Py*180}function iw(e){return Math.abs(e[1]-e[0])>kh-1e-14}function h9(e,t){return sK(t-e,kh)}function fK(e,t){return Math.abs(h9(e,t))}function v9(e,t){if(iw(t))return!0;var r,i;t[0]<t[1]?(r=t[0],i=t[1]):(r=t[1],i=t[0]),r=aw(r,kh),i=aw(i,kh),r>i&&(i+=kh);var a=aw(e,kh),s=a+kh;return a>=r&&a<=i||s>=r&&s<=i}function cK(e,t,r,i){if(!v9(t,i))return!1;var a,s;return r[0]<r[1]?(a=r[0],s=r[1]):(a=r[1],s=r[0]),e>=a&&e<=s}function nw(e,t,r,i,a,s,l){a=a||0,s=s||0;var f=iw([r,i]),h,v,m,b,T;f?(h=0,v=Py,m=kh):r<i?(h=r,m=i):(h=i,m=r),e<t?(b=e,T=t):(b=t,T=e);function S(I,q){return[I*Math.cos(q)+a,s-I*Math.sin(q)]}var C=Math.abs(m-h)<=Py?0:1;function P(I,q,B){return"A"+[I,I]+" "+[0,C,B]+" "+S(I,q)}var E;return f?b===null?E="M"+S(T,h)+P(T,v,0)+P(T,m,0)+"Z":E="M"+S(b,h)+P(b,v,0)+P(b,m,0)+"ZM"+S(T,h)+P(T,v,1)+P(T,m,1)+"Z":b===null?(E="M"+S(T,h)+P(T,m,0),l&&(E+="L0,0Z")):E="M"+S(b,h)+"L"+S(T,h)+P(T,m,0)+"L"+S(b,m)+P(b,h,1)+"Z",E}function hK(e,t,r,i,a){return nw(null,e,t,r,i,a,0)}function vK(e,t,r,i,a){return nw(null,e,t,r,i,a,1)}function dK(e,t,r,i,a,s){return nw(e,t,r,i,a,s,1)}d9.exports={deg2rad:lK,rad2deg:uK,angleDelta:h9,angleDist:fK,isFullCircle:iw,isAngleInsideSector:v9,isPtInsideSector:cK,pathArc:hK,pathSector:vK,pathAnnulus:dK}});var m9=ve(ad=>{"use strict";ad.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};ad.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};ad.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};ad.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};ad.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};ad.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}});var _9=ve(id=>{"use strict";var ow=s0().mod;id.segmentsIntersect=g9;function g9(e,t,r,i,a,s,l,f){var h=r-e,v=a-e,m=l-a,b=i-t,T=s-t,S=f-s,C=h*S-m*b;if(C===0)return null;var P=(v*S-m*T)/C,E=(v*b-h*T)/C;return E<0||E>1||P<0||P>1?null:{x:e+h*P,y:t+b*P}}id.segmentDistance=function(t,r,i,a,s,l,f,h){if(g9(t,r,i,a,s,l,f,h))return 0;var v=i-t,m=a-r,b=f-s,T=h-l,S=v*v+m*m,C=b*b+T*T,P=Math.min(m_(v,m,S,s-t,l-r),m_(v,m,S,f-t,h-r),m_(b,T,C,t-s,r-l),m_(b,T,C,i-s,a-l));return Math.sqrt(P)};function m_(e,t,r,i,a){var s=i*e+a*t;if(s<0)return i*i+a*a;if(s>r){var l=i-e,f=a-t;return l*l+f*f}else{var h=i*t-a*e;return h*h/r}}var y_,sw,y9;id.getTextLocation=function(t,r,i,a){if((t!==sw||a!==y9)&&(y_={},sw=t,y9=a),y_[i])return y_[i];var s=t.getPointAtLength(ow(i-a/2,r)),l=t.getPointAtLength(ow(i+a/2,r)),f=Math.atan((l.y-s.y)/(l.x-s.x)),h=t.getPointAtLength(ow(i,r)),v=(h.x*4+s.x+l.x)/6,m=(h.y*4+s.y+l.y)/6,b={x:v,y:m,theta:f};return y_[i]=b,b};id.clearLocationCache=function(){sw=null};id.getVisibleSegment=function(t,r,i){var a=r.left,s=r.right,l=r.top,f=r.bottom,h=0,v=t.getTotalLength(),m=v,b,T;function S(P){var E=t.getPointAtLength(P);P===0?b=E:P===v&&(T=E);var I=E.x<a?a-E.x:E.x>s?E.x-s:0,q=E.y<l?l-E.y:E.y>f?E.y-f:0;return Math.sqrt(I*I+q*q)}for(var C=S(h);C;){if(h+=C+i,h>m)return;C=S(h)}for(C=S(m);C;){if(m-=C+i,h>m)return;C=S(m)}return{min:h,max:m,len:m-h,total:v,isClosed:h===0&&m===v&&Math.abs(b.x-T.x)<.1&&Math.abs(b.y-T.y)<.1}};id.findPointOnPath=function(t,r,i,a){a=a||{};for(var s=a.pathLength||t.getTotalLength(),l=a.tolerance||.001,f=a.iterationLimit||30,h=t.getPointAtLength(0)[i]>t.getPointAtLength(s)[i]?-1:1,v=0,m=0,b=s,T,S,C;v<f;){if(T=(m+b)/2,S=t.getPointAtLength(T),C=S[i]-r,Math.abs(C)<l)return S;h*C>0?b=T:m=T,v++}return S}});var g_=ve(Dy=>{"use strict";var pc={};Dy.throttle=function(t,r,i){var a=pc[t],s=Date.now();if(!a){for(var l in pc)pc[l].ts<s-6e4&&delete pc[l];a=pc[t]={ts:0,timer:null}}x9(a);function f(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(s>a.ts+r){f();return}a.timer=setTimeout(function(){f(),a.timer=null},r)};Dy.done=function(e){var t=pc[e];return!t||!t.timer?Promise.resolve():new Promise(function(r){var i=t.onDone;t.onDone=function(){i&&i(),r(),t.onDone=null}})};Dy.clear=function(e){if(e)x9(pc[e]),delete pc[e];else for(var t in pc)Dy.clear(t)};function x9(e){e&&e.timer!==null&&(clearTimeout(e.timer),e.timer=null)}});var w9=ve((Oye,b9)=>{"use strict";b9.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}});var T9=ve((Uye,__)=>{"use strict";__.exports=lw;__.exports.isMobile=lw;__.exports.default=lw;var pK=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,mK=/CrOS/,yK=/android|ipad|playbook|silk/i;function lw(e){e||(e={});let t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=pK.test(t)&&!mK.test(t)||!!e.tablet&&yK.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}});var M9=ve((Vye,A9)=>{"use strict";var gK=Da(),_K=T9();A9.exports=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=xK(),typeof r!="string")return!0;var i=_K({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!i)for(var a=r.split(" "),s=1;s<a.length;s++){var l=a[s];if(l.indexOf("Safari")!==-1)for(var f=s-1;f>-1;f--){var h=a[f];if(h.substr(0,8)==="Version/"){var v=h.substr(8).split(".")[0];if(gK(v)&&(v=+v),v>=13)return!0}}}return i};function xK(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}});var k9=ve((Hye,S9)=>{"use strict";var bK=ja();S9.exports=function(t,r,i){var a=t.selectAll("g."+i.replace(/\s/g,".")).data(r,function(l){return l[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",i),a.order();var s=t.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(l){l[0][s]=bK.select(this)}),a}});var E9=ve((Gye,C9)=>{"use strict";var wK=la();C9.exports=function(t,r){for(var i=t._context.locale,a=0;a<2;a++){for(var s=t._context.locales,l=0;l<2;l++){var f=(s[i]||{}).dictionary;if(f){var h=f[r];if(h)return h}s=wK.localeRegistry}var v=i.split("-")[0];if(v===i)break;i=v}return r}});var P9=ve((Zye,L9)=>{"use strict";L9.exports=function(t){for(var r={},i=[],a=0,s=0;s<t.length;s++){var l=t[s];r[l]!==1&&(r[l]=1,i[a++]=l)}return i}});var z9=ve((Yye,D9)=>{"use strict";D9.exports=function(t){for(var r=MK(t)?AK:TK,i=[],a=0;a<t.length;a++){var s=t[a];r(s)&&i.push(s)}return i};function TK(e){return e.visible===!0}function AK(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function MK(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}});var R9=ve((Wye,I9)=>{"use strict";I9.exports=function(t,r){if(!r)return t;var i=1/Math.abs(r),a=i>1?(i*t+i*r)/i:t+r,s=String(a).length;if(s>16){var l=String(r).length,f=String(t).length;if(s>=f+l){var h=parseFloat(a).toPrecision(12);h.indexOf("e+")===-1&&(a=+h)}}return a}});var q9=ve((Xye,F9)=>{"use strict";var SK=Da(),kK=Hi().BADNUM,CK=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;F9.exports=function(t){return typeof t=="string"&&(t=t.replace(CK,"")),SK(t)?Number(t):kK}});var Ft=ve((jye,J9)=>{"use strict";var zy=ja(),EK=n0().utcFormat,LK=P3().format,H9=Da(),G9=Hi(),Z9=G9.FP_SAFE,PK=-Z9,N9=G9.BADNUM,Qe=J9.exports={};Qe.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var B9={};Qe.warnBadFormat=function(e){var t=String(e);B9[t]||(B9[t]=1,Qe.warn('encountered bad format: "'+t+'"'))};Qe.noFormat=function(e){return String(e)};Qe.numberFormat=function(e){var t;try{t=LK(Qe.adjustFormat(e))}catch(r){return Qe.warnBadFormat(e),Qe.noFormat}return t};Qe.nestedProperty=_y();Qe.keyedContainer=E7();Qe.relativeAttr=P7();Qe.isPlainObject=fc();Qe.toLogRange=W1();Qe.relinkPrivateKeys=R7();var Ch=al();Qe.isArrayBuffer=Ch.isArrayBuffer;Qe.isTypedArray=Ch.isTypedArray;Qe.isArrayOrTypedArray=Ch.isArrayOrTypedArray;Qe.isArray1D=Ch.isArray1D;Qe.ensureArray=Ch.ensureArray;Qe.concat=Ch.concat;Qe.maxRowLength=Ch.maxRowLength;Qe.minRowLength=Ch.minRowLength;var Y9=s0();Qe.mod=Y9.mod;Qe.modHalf=Y9.modHalf;var Eh=e8();Qe.valObjectMeta=Eh.valObjectMeta;Qe.coerce=Eh.coerce;Qe.coerce2=Eh.coerce2;Qe.coerceFont=Eh.coerceFont;Qe.coercePattern=Eh.coercePattern;Qe.coerceHoverinfo=Eh.coerceHoverinfo;Qe.coerceSelectionMarkerOpacity=Eh.coerceSelectionMarkerOpacity;Qe.validate=Eh.validate;var nl=s9();Qe.dateTime2ms=nl.dateTime2ms;Qe.isDateTime=nl.isDateTime;Qe.ms2DateTime=nl.ms2DateTime;Qe.ms2DateTimeLocal=nl.ms2DateTimeLocal;Qe.cleanDate=nl.cleanDate;Qe.isJSDate=nl.isJSDate;Qe.formatDate=nl.formatDate;Qe.incrementMonth=nl.incrementMonth;Qe.dateTick0=nl.dateTick0;Qe.dfltRange=nl.dfltRange;Qe.findExactDates=nl.findExactDates;Qe.MIN_MS=nl.MIN_MS;Qe.MAX_MS=nl.MAX_MS;var nd=rw();Qe.findBin=nd.findBin;Qe.sorterAsc=nd.sorterAsc;Qe.sorterDes=nd.sorterDes;Qe.distinctVals=nd.distinctVals;Qe.roundUp=nd.roundUp;Qe.sort=nd.sort;Qe.findIndexOfMin=nd.findIndexOfMin;Qe.sortObjectKeys=p_();var mc=f9();Qe.aggNums=mc.aggNums;Qe.len=mc.len;Qe.mean=mc.mean;Qe.geometricMean=mc.geometricMean;Qe.median=mc.median;Qe.midRange=mc.midRange;Qe.variance=mc.variance;Qe.stdev=mc.stdev;Qe.interp=mc.interp;var Pu=a_();Qe.init2dArray=Pu.init2dArray;Qe.transposeRagged=Pu.transposeRagged;Qe.dot=Pu.dot;Qe.translationMatrix=Pu.translationMatrix;Qe.rotationMatrix=Pu.rotationMatrix;Qe.rotationXYMatrix=Pu.rotationXYMatrix;Qe.apply3DTransform=Pu.apply3DTransform;Qe.apply2DTransform=Pu.apply2DTransform;Qe.apply2DTransform2=Pu.apply2DTransform2;Qe.convertCssMatrix=Pu.convertCssMatrix;Qe.inverseTransformMatrix=Pu.inverseTransformMatrix;var Mf=p9();Qe.deg2rad=Mf.deg2rad;Qe.rad2deg=Mf.rad2deg;Qe.angleDelta=Mf.angleDelta;Qe.angleDist=Mf.angleDist;Qe.isFullCircle=Mf.isFullCircle;Qe.isAngleInsideSector=Mf.isAngleInsideSector;Qe.isPtInsideSector=Mf.isPtInsideSector;Qe.pathArc=Mf.pathArc;Qe.pathSector=Mf.pathSector;Qe.pathAnnulus=Mf.pathAnnulus;var g0=m9();Qe.isLeftAnchor=g0.isLeftAnchor;Qe.isCenterAnchor=g0.isCenterAnchor;Qe.isRightAnchor=g0.isRightAnchor;Qe.isTopAnchor=g0.isTopAnchor;Qe.isMiddleAnchor=g0.isMiddleAnchor;Qe.isBottomAnchor=g0.isBottomAnchor;var _0=_9();Qe.segmentsIntersect=_0.segmentsIntersect;Qe.segmentDistance=_0.segmentDistance;Qe.getTextLocation=_0.getTextLocation;Qe.clearLocationCache=_0.clearLocationCache;Qe.getVisibleSegment=_0.getVisibleSegment;Qe.findPointOnPath=_0.findPointOnPath;var w_=hn();Qe.extendFlat=w_.extendFlat;Qe.extendDeep=w_.extendDeep;Qe.extendDeepAll=w_.extendDeepAll;Qe.extendDeepNoArrays=w_.extendDeepNoArrays;var uw=wh();Qe.log=uw.log;Qe.warn=uw.warn;Qe.error=uw.error;var DK=u0();Qe.counterRegex=DK.counter;var fw=g_();Qe.throttle=fw.throttle;Qe.throttleDone=fw.done;Qe.clearThrottle=fw.clear;var Du=Sy();Qe.getGraphDiv=Du.getGraphDiv;Qe.isPlotDiv=Du.isPlotDiv;Qe.removeElement=Du.removeElement;Qe.addStyleRule=Du.addStyleRule;Qe.addRelatedStyleRule=Du.addRelatedStyleRule;Qe.deleteRelatedStyleRule=Du.deleteRelatedStyleRule;Qe.setStyleOnHover=Du.setStyleOnHover;Qe.getFullTransformMatrix=Du.getFullTransformMatrix;Qe.getElementTransformMatrix=Du.getElementTransformMatrix;Qe.getElementAndAncestors=Du.getElementAndAncestors;Qe.equalDomRects=Du.equalDomRects;Qe.clearResponsive=w9();Qe.preserveDrawingBuffer=M9();Qe.makeTraceGroups=k9();Qe._=E9();Qe.notifier=V3();Qe.filterUnique=P9();Qe.filterVisible=z9();Qe.pushUnique=Z3();Qe.increment=R9();Qe.cleanNumber=q9();Qe.ensureNumber=function(t){return H9(t)?(t=Number(t),t>Z9||t<PK?N9:t):N9};Qe.isIndex=function(e,t){return t!==void 0&&e>=t?!1:H9(e)&&e>=0&&e%1===0};Qe.noop=r_();Qe.identity=d_();Qe.repeat=function(e,t){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r};Qe.swapAttrs=function(e,t,r,i){r||(r="x"),i||(i="y");for(var a=0;a<t.length;a++){var s=t[a],l=Qe.nestedProperty(e,s.replace("?",r)),f=Qe.nestedProperty(e,s.replace("?",i)),h=l.get();l.set(f.get()),f.set(h)}};Qe.raiseToTop=function(t){t.parentNode.appendChild(t)};Qe.cancelTransition=function(e){return e.transition().duration(0)};Qe.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};Qe.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};Qe.simpleMap=function(e,t,r,i,a){for(var s=e.length,l=new Array(s),f=0;f<s;f++)l[f]=t(e[f],r,i,a);return l};Qe.randstr=function e(t,r,i,a){if(i||(i=16),r===void 0&&(r=24),r<=0)return"0";var s=Math.log(Math.pow(2,r))/Math.log(i),l="",f,h,v;for(f=2;s===1/0;f*=2)s=Math.log(Math.pow(2,r/f))/Math.log(i)*f;var m=s-Math.floor(s);for(f=0;f<Math.floor(s);f++)v=Math.floor(Math.random()*i).toString(i),l=v+l;m&&(h=Math.pow(i,m),v=Math.floor(Math.random()*h).toString(i),l=v+l);var b=parseInt(l,i);return t&&t[l]||b!==1/0&&b>=Math.pow(2,r)?a>10?(Qe.warn("randstr failed uniqueness"),l):e(t,r,i,(a||0)+1):l};Qe.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(i){i[t]=e,r[i.name]=i,r.optionList.push(i)},r["_"+t]=e,r};Qe.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,i=2*r,a=2*t-1,s=new Array(a),l=new Array(r),f,h,v,m;for(f=0;f<a;f++)s[f]=(1-Math.cos(Math.PI*(f+1)/t))/(2*t);for(f=0;f<r;f++){for(m=0,h=0;h<a;h++)v=f+h+1-t,v<-r?v-=i*Math.round(v/i):v>=i&&(v-=i*Math.floor(v/i)),v<0?v=-1-v:v>=r&&(v=i-1-v),m+=e[v]*s[h];l[f]=m}return l};Qe.syncOrAsync=function(e,t,r){var i,a;function s(){return Qe.syncOrAsync(e,t,r)}for(;e.length;)if(a=e.splice(0,1)[0],i=a(t),i&&i.then)return i.then(s);return r&&r(t)};Qe.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};Qe.noneOrAll=function(e,t,r){if(e){var i=!1,a=!0,s,l;for(s=0;s<r.length;s++)l=e[r[s]],l!=null?i=!0:a=!1;if(i&&!a)for(s=0;s<r.length;s++)e[r[s]]=t[r[s]]}};Qe.mergeArray=function(e,t,r,i){var a=typeof i=="function";if(Qe.isArrayOrTypedArray(e))for(var s=Math.min(e.length,t.length),l=0;l<s;l++){var f=e[l];t[l][r]=a?i(f):f}};Qe.mergeArrayCastPositive=function(e,t,r){return Qe.mergeArray(e,t,r,function(i){var a=+i;return isFinite(a)&&a>0?a:0})};Qe.fillArray=function(e,t,r,i){if(i=i||Qe.identity,Qe.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][r]=i(e[a])};Qe.castOption=function(e,t,r,i){i=i||Qe.identity;var a=Qe.nestedProperty(e,r).get();return Qe.isArrayOrTypedArray(a)?Array.isArray(t)&&Qe.isArrayOrTypedArray(a[t[0]])?i(a[t[0]][t[1]]):i(a[t]):a};Qe.extractOption=function(e,t,r,i){if(r in e)return e[r];var a=Qe.nestedProperty(t,i).get();if(!Array.isArray(a))return a};function W9(e){var t={};for(var r in e)for(var i=e[r],a=0;a<i.length;a++)t[i[a]]=+r;return t}Qe.tagSelected=function(e,t,r){var i=t.selectedpoints,a=t._indexToPoints,s;a&&(s=W9(a));function l(b){return b!==void 0&&b<e.length}for(var f=0;f<i.length;f++){var h=i[f];if(Qe.isIndex(h)||Qe.isArrayOrTypedArray(h)&&Qe.isIndex(h[0])&&Qe.isIndex(h[1])){var v=s?s[h]:h,m=r?r[v]:v;l(m)&&(e[m].selected=1)}}};Qe.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var i=W9(r),a=[],s=0;s<t.length;s++){var l=t[s];if(Qe.isIndex(l)){var f=i[l];Qe.isIndex(f)&&a.push(f)}}return a}else return t};Qe.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var i=Qe.nestedProperty(e,r).get();return Qe.isArrayOrTypedArray(i)?i:!1}else if(Qe.isArrayOrTypedArray(r))return r;return!1};function X9(e,t,r){var i={};typeof t!="object"&&(t={});var a=r==="pieLike"?-1:3,s=Object.keys(e),l,f,h;for(l=0;l<s.length;l++)f=s[l],h=e[f],!(f.charAt(0)==="_"||typeof h=="function")&&(f==="module"?i[f]=h:Array.isArray(h)?f==="colorscale"||a===-1?i[f]=h.slice():i[f]=h.slice(0,a):Qe.isTypedArray(h)?a===-1?i[f]=h.subarray():i[f]=h.subarray(0,a):h&&typeof h=="object"?i[f]=X9(e[f],t[f],r):i[f]=h);for(s=Object.keys(t),l=0;l<s.length;l++)f=s[l],h=t[f],(typeof h!="object"||!(f in i)||typeof i[f]!="object")&&(i[f]=h);return i}Qe.minExtend=X9;Qe.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};Qe.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};var zK=/Version\/[\d\.]+.*Safari/;Qe.isSafari=function(){return zK.test(window.navigator.userAgent)};var IK=/iPad|iPhone|iPod/;Qe.isIOS=function(){return IK.test(window.navigator.userAgent)};var RK=/Firefox\/(\d+)\.\d+/;Qe.getFirefoxVersion=function(){var e=RK.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};Qe.isD3Selection=function(e){return e instanceof zy.selection};Qe.ensureSingle=function(e,t,r,i){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var s=e.append(t);return r&&s.classed(r,!0),i&&s.call(i),s};Qe.ensureSingleById=function(e,t,r,i){var a=e.select(t+"#"+r);if(a.size())return a;var s=e.append(t).attr("id",r);return i&&s.call(i),s};Qe.objectFromPath=function(e,t){for(var r=e.split("."),i,a=i={},s=0;s<r.length;s++){var l=r[s],f=null,h=r[s].match(/(.*)\[([0-9]+)\]/);h?(l=h[1],f=h[2],i=i[l]=[],s===r.length-1?i[f]=t:i[f]={},i=i[f]):(s===r.length-1?i[l]=t:i[l]={},i=i[l])}return a};var FK=/^([^\[\.]+)\.(.+)?/,qK=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function x_(e){return e.slice(0,2)==="__"}Qe.expandObjectPaths=function(e){var t,r,i,a,s,l,f;if(typeof e=="object"&&!Array.isArray(e)){for(r in e)if(e.hasOwnProperty(r))if(t=r.match(FK)){if(a=e[r],i=t[1],x_(i))continue;delete e[r],e[i]=Qe.extendDeepNoArrays(e[i]||{},Qe.objectFromPath(r,Qe.expandObjectPaths(a))[i])}else if(t=r.match(qK)){if(a=e[r],i=t[1],x_(i))continue;if(s=parseInt(t[2]),delete e[r],e[i]=e[i]||[],t[3]===".")f=t[4],l=e[i][s]=e[i][s]||{},Qe.extendDeepNoArrays(l,Qe.objectFromPath(f,Qe.expandObjectPaths(a)));else{if(x_(i))continue;e[i][s]=Qe.expandObjectPaths(a)}}else{if(x_(r))continue;e[r]=Qe.expandObjectPaths(e[r])}}return e};Qe.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,a=t.charAt(0),s=t.charAt(1),l=e.split("."),f=l[0],h=l.length>1?a+l[1]:"";if(s&&(l.length>1||f.length>4||r))for(;i.test(f);)f=f.replace(i,"$1"+s+"$2");return f+h};Qe.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var j9=/^\w*$/;Qe.templateString=function(e,t){var r={};return e.replace(Qe.TEMPLATE_STRING_REGEX,function(i,a){var s;return j9.test(a)?s=t[a]:(r[a]=r[a]||Qe.nestedProperty(t,a).get,s=r[a]()),Qe.isValidTextValue(s)?s:""})};var NK={max:10,count:0,name:"hovertemplate"};Qe.hovertemplateString=function(){return cw.apply(NK,arguments)};var BK={max:10,count:0,name:"texttemplate"};Qe.texttemplateString=function(){return cw.apply(BK,arguments)};var OK=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function UK(e){var t=e.match(OK);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}var VK={max:10,count:0,name:"texttemplate",parseMultDiv:!0};Qe.texttemplateStringForShapes=function(){return cw.apply(VK,arguments)};var O9=/^[:|\|]/;function cw(e,t,r){var i=this,a=arguments;t||(t={});var s={};return e.replace(Qe.TEMPLATE_STRING_REGEX,function(l,f,h){var v=f==="xother"||f==="yother",m=f==="_xother"||f==="_yother",b=f==="_xother_"||f==="_yother_",T=f==="xother_"||f==="yother_",S=v||m||T||b,C=f;(m||b)&&(C=C.substring(1)),(T||b)&&(C=C.substring(0,C.length-1));var P=null,E=null;if(i.parseMultDiv){var I=UK(C);C=I.key,P=I.op,E=I.number}var q;if(S){if(q=t[C],q===void 0)return""}else{var B,z;for(z=3;z<a.length;z++)if(B=a[z],!!B){if(B.hasOwnProperty(C)){q=B[C];break}if(j9.test(C)||(q=Qe.nestedProperty(B,C).get(),q=s[C]||Qe.nestedProperty(B,C).get(),q&&(s[C]=q)),q!==void 0)break}}if(q!==void 0&&(P==="*"&&(q*=E),P==="/"&&(q/=E)),q===void 0&&i)return i.count<i.max&&(Qe.warn("Variable '"+C+"' in "+i.name+" could not be found!"),q=l),i.count===i.max&&Qe.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,l;if(h){var O;if(h[0]===":"&&(O=r?r.numberFormat:Qe.numberFormat,q!==""&&(q=O(h.replace(O9,""))(q))),h[0]==="|"){O=r?r.timeFormat:EK;var H=Qe.dateTime2ms(q);q=Qe.formatDate(H,h.replace(O9,""),!1,O)}}else{var V=C+"Label";t.hasOwnProperty(V)&&(q=t[V])}return S&&(q="("+q+")",(m||b)&&(q=" "+q),(T||b)&&(q=q+" ")),q})}var b_=48,U9=57;Qe.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,i=0,a=0,s=0;s<r;s++){var l=e.charCodeAt(s)||0,f=t.charCodeAt(s)||0,h=l>=b_&&l<=U9,v=f>=b_&&f<=U9;if(h&&(i=10*i+l-b_),v&&(a=10*a+f-b_),!h||!v){if(i!==a)return i-a;if(l!==f)return l-f}}return a-i};var y0=2e9;Qe.seedPseudoRandom=function(){y0=2e9};Qe.pseudoRandom=function(){var e=y0;return y0=(69069*y0+1)%4294967296,Math.abs(y0-e)<429496729?Qe.pseudoRandom():y0/4294967296};Qe.fillText=function(e,t,r){var i=Array.isArray(r)?function(l){r.push(l)}:function(l){r.text=l},a=Qe.extractOption(e,t,"htx","hovertext");if(Qe.isValidTextValue(a))return i(a);var s=Qe.extractOption(e,t,"tx","text");if(Qe.isValidTextValue(s))return i(s)};Qe.isValidTextValue=function(e){return e||e===0};Qe.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};Qe.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};Qe.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};Qe.strRotate=function(e){return e?"rotate("+e+")":""};Qe.strScale=function(e){return e!==1?"scale("+e+")":""};Qe.getTextTransform=function(e){var t=e.noCenter,r=e.textX,i=e.textY,a=e.targetX,s=e.targetY,l=e.anchorX||0,f=e.anchorY||0,h=e.rotate,v=e.scale;return v?v>1&&(v=1):v=0,Qe.strTranslate(a-v*(r+l),s-v*(i+f))+Qe.strScale(v)+(h?"rotate("+h+(t?"":" "+r+" "+i)+")":"")};Qe.setTransormAndDisplay=function(e,t){e.attr("transform",Qe.getTextTransform(t)),e.style("display",t.scale?null:"none")};Qe.ensureUniformFontSize=function(e,t){var r=Qe.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};Qe.join2=function(e,t,r){var i=e.length;return i>1?e.slice(0,-1).join(t)+r+e[i-1]:e.join(t)};Qe.bigFont=function(e){return Math.round(1.2*e)};var V9=Qe.getFirefoxVersion(),HK=V9!==null&&V9<86;Qe.getPositionFromD3Event=function(){return HK?[zy.event.layerX,zy.event.layerY]:[zy.event.offsetX,zy.event.offsetY]}});var $9=ve(()=>{"use strict";var GK=Ft(),K9={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(hw in K9)Q9=hw.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),GK.addStyleRule(Q9,K9[hw]);var Q9,hw});var vw=ve((Qye,ek)=>{ek.exports=!0});var pw=ve(($ye,tk)=>{"use strict";var ZK=vw(),dw;typeof window.matchMedia=="function"?dw=!window.matchMedia("(hover: none)").matches:dw=ZK;tk.exports=dw});var M_=ve((ege,mw)=>{"use strict";var x0=typeof Reflect=="object"?Reflect:null,rk=x0&&typeof x0.apply=="function"?x0.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},T_;x0&&typeof x0.ownKeys=="function"?T_=x0.ownKeys:Object.getOwnPropertySymbols?T_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:T_=function(t){return Object.getOwnPropertyNames(t)};function YK(e){console&&console.warn&&console.warn(e)}var ik=Number.isNaN||function(t){return t!==t};function Gi(){Gi.init.call(this)}mw.exports=Gi;mw.exports.once=JK;Gi.EventEmitter=Gi;Gi.prototype._events=void 0;Gi.prototype._eventsCount=0;Gi.prototype._maxListeners=void 0;var ak=10;function A_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Gi,"defaultMaxListeners",{enumerable:!0,get:function(){return ak},set:function(e){if(typeof e!="number"||e<0||ik(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ak=e}});Gi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Gi.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ik(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function nk(e){return e._maxListeners===void 0?Gi.defaultMaxListeners:e._maxListeners}Gi.prototype.getMaxListeners=function(){return nk(this)};Gi.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var a=t==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var f=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw f.context=l,f}var h=s[t];if(h===void 0)return!1;if(typeof h=="function")rk(h,this,r);else for(var v=h.length,m=fk(h,v),i=0;i<v;++i)rk(m[i],this,r);return!0};function ok(e,t,r,i){var a,s,l;if(A_(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),l=s[t]),l===void 0)l=s[t]=r,++e._eventsCount;else if(typeof l=="function"?l=s[t]=i?[r,l]:[l,r]:i?l.unshift(r):l.push(r),a=nk(e),a>0&&l.length>a&&!l.warned){l.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=l.length,YK(f)}return e}Gi.prototype.addListener=function(t,r){return ok(this,t,r,!1)};Gi.prototype.on=Gi.prototype.addListener;Gi.prototype.prependListener=function(t,r){return ok(this,t,r,!0)};function WK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function sk(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=WK.bind(i);return a.listener=r,i.wrapFn=a,a}Gi.prototype.once=function(t,r){return A_(r),this.on(t,sk(this,t,r)),this};Gi.prototype.prependOnceListener=function(t,r){return A_(r),this.prependListener(t,sk(this,t,r)),this};Gi.prototype.removeListener=function(t,r){var i,a,s,l,f;if(A_(r),a=this._events,a===void 0)return this;if(i=a[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(s=-1,l=i.length-1;l>=0;l--)if(i[l]===r||i[l].listener===r){f=i[l].listener,s=l;break}if(s<0)return this;s===0?i.shift():XK(i,s),i.length===1&&(a[t]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",t,f||r)}return this};Gi.prototype.off=Gi.prototype.removeListener;Gi.prototype.removeAllListeners=function(t){var r,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),l;for(a=0;a<s.length;++a)l=s[a],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function lk(e,t,r){var i=e._events;if(i===void 0)return[];var a=i[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?jK(a):fk(a,a.length)}Gi.prototype.listeners=function(t){return lk(this,t,!0)};Gi.prototype.rawListeners=function(t){return lk(this,t,!1)};Gi.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):uk.call(e,t)};Gi.prototype.listenerCount=uk;function uk(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Gi.prototype.eventNames=function(){return this._eventsCount>0?T_(this._events):[]};function fk(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function XK(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function jK(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function JK(e,t){return new Promise(function(r,i){function a(l){e.removeListener(t,s),i(l)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}ck(e,t,s,{once:!0}),t!=="error"&&KK(e,a,{once:!0})})}function KK(e,t,r){typeof e.on=="function"&&ck(e,"error",t,r)}function ck(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(s){i.once&&e.removeEventListener(t,a),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var Iy=ve((tge,hk)=>{"use strict";var yw=M_().EventEmitter,QK={init:function(e){if(e._ev instanceof yw)return e;var t=new yw,r=new yw;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,a){t.emit(i,a),r.emit(i,a)},e},triggerHandler:function(e,t,r){var i,a=e._ev;if(!a)return;var s=a._events[t];if(!s)return;function l(h){if(h.listener){if(a.removeListener(t,h.listener),!h.fired)return h.fired=!0,h.listener.apply(a,[r])}else return h.apply(a,[r])}s=Array.isArray(s)?s:[s];var f;for(f=0;f<s.length-1;f++)l(s[f]);return i=l(s[f]),i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};hk.exports=QK});var pk=ve((rge,dk)=>{"use strict";var vk=Ft(),$K=td().dfltConfig;function eQ(e,t){for(var r=[],i,a=0;a<t.length;a++)i=t[a],i===e?r[a]=i:typeof i=="object"?r[a]=Array.isArray(i)?vk.extendDeep([],i):vk.extendDeepAll({},i):r[a]=i;return r}var yc={};yc.add=function(e,t,r,i,a){var s,l;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},l=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(l,e.undoQueue.queue.length-l,s),e.undoQueue.index+=1):s=e.undoQueue.queue[l-1],e.undoQueue.beginSequence=!1,s&&(s.undo.calls.unshift(t),s.undo.args.unshift(r),s.redo.calls.push(i),s.redo.args.push(a)),e.undoQueue.queue.length>$K.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};yc.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};yc.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};yc.undo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.undo.calls.length;i++)yc.plotDo(t,r.undo.calls[i],r.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}};yc.redo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.redo.calls.length;i++)yc.plotDo(t,r.redo.calls[i],r.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};yc.plotDo=function(e,t,r){e.autoplay=!0,r=eQ(e,r),t.apply(null,r)};dk.exports=yc});var gw=ve((age,mk)=>{"use strict";mk.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}});var T0=ve(Yn=>{"use strict";var Gl=la(),Ry=Ft(),k_=ms(),_w=h0(),tQ=gw(),rQ=ky(),aQ=td().configAttributes,yk=il(),zu=Ry.extendDeepAll,b0=Ry.isPlainObject,iQ=Ry.isArrayOrTypedArray,C_=Ry.nestedProperty,nQ=Ry.valObjectMeta,xw="_isSubplotObj",E_="_isLinkedToArray",oQ="_arrayAttrRegexps",_k="_deprecated",bw=[xw,E_,oQ,_k];Yn.IS_SUBPLOT_OBJ=xw;Yn.IS_LINKED_TO_ARRAY=E_;Yn.DEPRECATED=_k;Yn.UNDERSCORE_ATTRS=bw;Yn.get=function(){var e={};return Gl.allTypes.forEach(function(t){e[t]=lQ(t)}),{defs:{valObjects:nQ,metaKeys:bw.concat(["description","role","editType","impliedEdits"]),editType:{traces:yk.traces,layout:yk.layout},impliedEdits:{}},traces:e,layout:uQ(),frames:fQ(),animation:w0(rQ),config:w0(aQ)}};Yn.crawl=function(e,t,r,i){var a=r||0;i=i||"",Object.keys(e).forEach(function(s){var l=e[s];if(bw.indexOf(s)===-1){var f=(i?i+".":"")+s;t(l,s,e,a,f),!Yn.isValObject(l)&&b0(l)&&s!=="impliedEdits"&&Yn.crawl(l,t,a+1,f)}})};Yn.isValObject=function(e){return e&&e.valType!==void 0};Yn.findArrayAttributes=function(e){var t=[],r=[],i=[],a,s;function l(h,v,m,b){r=r.slice(0,b).concat([v]),i=i.slice(0,b).concat([h&&h._isLinkedToArray]);var T=h&&(h.valType==="data_array"||h.arrayOk===!0)&&!(r[b-1]==="colorbar"&&(v==="ticktext"||v==="tickvals"));T&&f(a,0,"")}function f(h,v,m){var b=h[r[v]],T=m+r[v];if(v===r.length-1)iQ(b)&&t.push(s+T);else if(i[v]){if(Array.isArray(b))for(var S=0;S<b.length;S++)b0(b[S])&&f(b[S],v+1,T+"["+S+"].")}else b0(b)&&f(b,v+1,T+".")}return a=e,s="",Yn.crawl(k_,l),e._module&&e._module.attributes&&Yn.crawl(e._module.attributes,l),t};Yn.getTraceValObject=function(e,t){var r=t[0],i=1,a,s,l=e._module;if(l||(l=(Gl.modules[e.type||k_.type.dflt]||{})._module),!l)return!1;if(a=l.attributes,s=a&&a[r],!s){var f=l.basePlotModule;f&&f.attributes&&(s=f.attributes[r])}return s||(s=k_[r]),xk(s,t,i)};Yn.getLayoutValObject=function(e,t){var r=sQ(e,t[0]);return xk(r,t,1)};function sQ(e,t){var r,i,a,s,l=e._basePlotModules;if(l){var f;for(r=0;r<l.length;r++){if(a=l[r],a.attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!f&&a.layoutAttributes&&(f=a.layoutAttributes)}var h=a.baseLayoutAttrOverrides;if(h&&t in h)return h[t]}if(f)return f}var v=e._modules;if(v){for(r=0;r<v.length;r++)if(s=v[r].layoutAttributes,s&&t in s)return s[t]}for(i in Gl.componentsRegistry){if(a=Gl.componentsRegistry[i],a.name==="colorscale"&&t.indexOf("coloraxis")===0)return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in _w?_w[t]:!1}function xk(e,t,r){if(!e)return!1;if(e._isLinkedToArray){if(S_(t[r]))r++;else if(r<t.length)return!1}for(;r<t.length;r++){var i=e[t[r]];if(b0(i))e=i;else break;if(r===t.length-1)break;if(e._isLinkedToArray){if(r++,!S_(t[r]))return!1}else if(e.valType==="info_array"){r++;var a=t[r];if(!S_(a))return!1;var s=e.items;if(Array.isArray(s)){if(a>=s.length)return!1;if(e.dimensions===2){if(r++,t.length===r)return e;var l=t[r];if(!S_(l))return!1;e=s[a][l]}else e=s[a]}else e=s}}return e}function S_(e){return e===Math.round(e)&&e>=0}function lQ(e){var t,r;t=Gl.modules[e]._module,r=t.basePlotModule;var i={};i.type=null;var a=zu({},k_),s=zu({},t.attributes);Yn.crawl(s,function(h,v,m,b,T){C_(a,T).set(void 0),h===void 0&&C_(s,T).set(void 0)}),zu(i,a),Gl.traceIs(e,"noOpacity")&&delete i.opacity,Gl.traceIs(e,"showLegend")||(delete i.showlegend,delete i.legendgroup),Gl.traceIs(e,"noHover")&&(delete i.hoverinfo,delete i.hoverlabel),t.selectPoints||delete i.selectedpoints,zu(i,s),r.attributes&&zu(i,r.attributes),i.type=e;var l={meta:t.meta||{},categories:t.categories||{},animatable:!!t.animatable,type:e,attributes:w0(i)};if(t.layoutAttributes){var f={};zu(f,t.layoutAttributes),l.layoutAttributes=w0(f)}return t.animatable||Yn.crawl(l,function(h){Yn.isValObject(h)&&"anim"in h&&delete h.anim}),l}function uQ(){var e={},t,r;zu(e,_w);for(t in Gl.subplotsRegistry)if(r=Gl.subplotsRegistry[t],!!r.layoutAttributes)if(Array.isArray(r.attr))for(var i=0;i<r.attr.length;i++)gk(e,r,r.attr[i]);else{var a=r.attr==="subplot"?r.name:r.attr;gk(e,r,a)}for(t in Gl.componentsRegistry){r=Gl.componentsRegistry[t];var s=r.schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis)for(var f in l.xaxis)delete e.yaxis[f];delete e.xaxis.shift,delete e.xaxis.autoshift}else r.name==="colorscale"?zu(e,r.layoutAttributes):r.layoutAttributes&&dQ(e,r.layoutAttributes,r.name)}return{layoutAttributes:w0(e)}}function fQ(){var e={frames:zu({},tQ)};return w0(e),e.frames}function w0(e){return cQ(e),hQ(e),vQ(e),e}function cQ(e){function t(i){return{valType:"string",editType:"none"}}function r(i,a,s){Yn.isValObject(i)?(i.arrayOk===!0||i.valType==="data_array")&&(s[a+"src"]=t(a)):b0(i)&&(i.role="object")}Yn.crawl(e,r)}function hQ(e){function t(r,i,a){if(r){var s=r[E_];s&&(delete r[E_],a[i]={items:{}},a[i].items[s]=r,a[i].role="object")}}Yn.crawl(e,t)}function vQ(e){function t(r){for(var i in r)if(b0(r[i]))t(r[i]);else if(Array.isArray(r[i]))for(var a=0;a<r[i].length;a++)t(r[i][a]);else r[i]instanceof RegExp&&(r[i]=r[i].toString())}t(e)}function gk(e,t,r){var i=C_(e,r),a=zu({},t.layoutAttributes);a[xw]=!0,i.set(a)}function dQ(e,t,r){var i=C_(e,r);i.set(zu(i.get()||{},t))}});var Di=ve(od=>{"use strict";var A0=Ft(),pQ=ms(),Lh="templateitemname",ww={name:{valType:"string",editType:"none"}};ww[Lh]={valType:"string",editType:"calc"};od.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=ww.name,t[Lh]=ww[Lh],t};od.traceTemplater=function(e){var t={},r,i;for(r in e)i=e[r],Array.isArray(i)&&i.length&&(t[r]=0);function a(s){r=A0.coerce(s,{},pQ,"type");var l={type:r,_template:null};if(r in t){i=e[r];var f=t[r]%i.length;t[r]++,l._template=i[f]}return l}return{newTrace:a}};od.newContainer=function(e,t,r){var i=e._template,a=i&&(i[t]||r&&i[r]);A0.isPlainObject(a)||(a=null);var s=e[t]={_template:a};return s};od.arrayTemplater=function(e,t,r){var i=e._template,a=i&&i[wk(t)],s=i&&i[t];(!Array.isArray(s)||!s.length)&&(s=[]);var l={};function f(v){var m={name:v.name,_input:v},b=m[Lh]=v[Lh];if(!bk(b))return m._template=a,m;for(var T=0;T<s.length;T++){var S=s[T];if(S.name===b)return l[b]=1,m._template=S,m}return m[r]=v[r]||!1,m._template=!1,m}function h(){for(var v=[],m=0;m<s.length;m++){var b=s[m],T=b.name;if(bk(T)&&!l[T]){var S={_template:b,name:T,_input:{_templateitemname:T}};S[Lh]=b[Lh],v.push(S),l[T]=1}}return v}return{newItem:f,defaultItems:h}};function bk(e){return e&&typeof e=="string"}function wk(e){var t=e.length-1;return e.charAt(t)!=="s"&&A0.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}od.arrayDefaultKey=wk;od.arrayEditor=function(e,t,r){var i=(A0.nestedProperty(e,t).get()||[]).length,a=r._index,s=a>=i&&(r._input||{})._templateitemname;s&&(a=i);var l=t+"["+a+"]",f;function h(){f={},s&&(f[l]={},f[l][Lh]=s)}h();function v(S,C){f[S]=C}function m(S,C){s?A0.nestedProperty(f[l],S).set(C):f[l+"."+S]=C}function b(){var S=f;return h(),S}function T(S,C){S&&m(S,C);var P=b();for(var E in P)A0.nestedProperty(e,E).set(P[E])}return{modifyBase:v,modifyItem:m,getUpdateObj:b,applyUpdate:T}}});var Ao=ve((oge,Tk)=>{"use strict";var Fy=u0().counter;Tk.exports={idRegex:{x:Fy("x","( domain)?"),y:Fy("y","( domain)?")},attrRegex:Fy("[xy]axis"),xAxisMatch:Fy("xaxis"),yAxisMatch:Fy("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}});var $n=ve(Ns=>{"use strict";var mQ=la(),Tw=Ao();Ns.id2name=function(t){if(!(typeof t!="string"||!t.match(Tw.AX_ID_PATTERN))){var r=t.split(" ")[0].substr(1);return r==="1"&&(r=""),t.charAt(0)+"axis"+r}};Ns.name2id=function(t){if(t.match(Tw.AX_NAME_PATTERN)){var r=t.substr(5);return r==="1"&&(r=""),t.charAt(0)+r}};Ns.cleanId=function(t,r,i){var a=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(Tw.AX_ID_PATTERN))&&!(r&&t.charAt(0)!==r)&&!(a&&!i)){var s=t.split(" ")[0].substr(1).replace(/^0+/,"");return s==="1"&&(s=""),t.charAt(0)+s+(a&&i?" domain":"")}};Ns.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var a=Ns.listIds(e,t),s=new Array(a.length),l;for(l=0;l<a.length;l++){var f=a[l];s[l]=i[f.charAt(0)+"axis"+f.substr(1)]}if(!r){var h=i._subplots.gl3d||[];for(l=0;l<h.length;l++){var v=i[h[l]];t?s.push(v[t+"axis"]):s.push(v.xaxis,v.yaxis,v.zaxis)}}return s};Ns.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var i=r._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)};Ns.getFromId=function(e,t,r){var i=e._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[Ns.id2name(t)]};Ns.getFromTrace=function(e,t,r){var i=e._fullLayout,a=null;if(mQ.traceIs(t,"gl3d")){var s=t.scene;s.substr(0,5)==="scene"&&(a=i[s][r+"axis"])}else a=Ns.getFromId(e,t[r+"axis"]||r);return a};Ns.idSort=function(e,t){var r=e.charAt(0),i=t.charAt(0);return r!==i?r>i?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)};Ns.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:!1};function Ak(e,t){if(t&&t.length){for(var r=0;r<t.length;r++)if(t[r][e])return!0}return!1}Ns.isLinked=function(e,t){return Ak(t,e._axisMatchGroups)||Ak(t,e._axisConstraintGroups)}});var Ph=ve((lge,Mk)=>{"use strict";function yQ(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function gQ(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}Mk.exports={clearOutlineControllers:yQ,clearOutline:gQ}});var L_=ve((uge,Sk)=>{"use strict";Sk.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}});var z_=ve(D_=>{"use strict";var P_=la(),fge=Ao().SUBPLOT_PATTERN;D_.getSubplotCalcData=function(e,t,r){var i=P_.subplotsRegistry[t];if(!i)return[];for(var a=i.attr,s=[],l=0;l<e.length;l++){var f=e[l],h=f[0].trace;h[a]===r&&s.push(f)}return s};D_.getModuleCalcData=function(e,t,r){var i=[],a=[],s;if(typeof t=="string"?s=P_.getModule(t).plot:typeof t=="function"?s=t:s=t.plot,!s)return[i,e];for(var l=r,f=0;f<e.length;f++){var h=e[f],v=h[0].trace,m=v.zorder!==void 0;v.visible!==!0||v._length===0||(v._module&&v._module.plot===s&&(!m||v.zorder===l)?i.push(h):a.push(h))}return[i,a]};D_.getSubplotData=function(t,r,i){if(!P_.subplotsRegistry[r])return[];for(var a=P_.subplotsRegistry[r].attr,s=[],l,f,h,v=0;v<t.length;v++)l=t[v],l[a]===i&&s.push(l);return s}});var Lk=ve(sd=>{"use strict";var _Q=la(),M0=Ft();sd.manageCommandObserver=function(e,t,r,i){var a={},s=!0;t&&t._commandObserver&&(a=t._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var l=sd.hasSimpleAPICommandBindings(e,r,a.lookupTable);if(t&&t._commandObserver){if(l)return a;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,a}if(l){kk(e,l,a.cache),a.check=function(){if(s){var m=kk(e,l,a.cache);return m.changed&&i&&a.lookupTable[m.value]!==void 0&&(a.disable(),Promise.resolve(i({value:m.value,type:l.type,prop:l.prop,traces:l.traces,index:a.lookupTable[m.value]})).then(a.enable,a.enable)),m.changed}};for(var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<f.length;h++)e._internalOn(f[h],a.check);a.remove=function(){for(var v=0;v<f.length;v++)e._removeInternalListener(f[v],a.check)}}else M0.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){s=!1},a.enable=function(){s=!0},t&&(t._commandObserver=a),a};sd.hasSimpleAPICommandBindings=function(e,t,r){var i,a=t.length,s;for(i=0;i<a;i++){var l,f=t[i],h=f.method,v=f.args;if(Array.isArray(v)||(v=[]),!h)return!1;var m=sd.computeAPICommandBindings(e,h,v);if(m.length!==1)return!1;if(!s)s=m[0],Array.isArray(s.traces)&&s.traces.sort();else{if(l=m[0],l.type!==s.type||l.prop!==s.prop)return!1;if(Array.isArray(s.traces))if(Array.isArray(l.traces)){l.traces.sort();for(var b=0;b<s.traces.length;b++)if(s.traces[b]!==l.traces[b])return!1}else return!1;else if(l.prop!==s.prop)return!1}l=m[0];var T=l.value;if(Array.isArray(T))if(T.length===1)T=T[0];else return!1;r&&(r[T]=i)}return s};function kk(e,t,r){var i,a,s,l=!1;if(t.type==="data")i=e._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=e._fullLayout;else return!1;return a=M0.nestedProperty(i,t.prop).get(),s=r[t.type]=r[t.type]||{},s.hasOwnProperty(t.prop)&&s[t.prop]!==a&&(l=!0),s[t.prop]=a,{changed:l,value:a}}sd.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=_Q.apiMethodRegistry[t],a=[e];Array.isArray(r)||(r=[]);for(var s=0;s<r.length;s++)a.push(r[s]);return i.apply(null,a).catch(function(l){return M0.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})};sd.computeAPICommandBindings=function(e,t,r){var i;switch(Array.isArray(r)||(r=[]),t){case"restyle":i=Ek(e,r);break;case"relayout":i=Ck(e,r);break;case"update":i=Ek(e,[r[0],r[2]]).concat(Ck(e,[r[1]]));break;case"animate":i=xQ(e,r);break;default:i=[]}return i};function xQ(e,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function Ck(e,t){var r=[],i=t[0],a={};if(typeof i=="string")a[i]=t[1];else if(M0.isPlainObject(i))a=i;else return r;return Aw(a,function(s,l,f){r.push({type:"layout",prop:s,value:f})},"",0),r}function Ek(e,t){var r,i,a,s,l=[];if(i=t[0],a=t[1],r=t[2],s={},typeof i=="string")s[i]=a;else if(M0.isPlainObject(i))s=i,r===void 0&&(r=a);else return l;return r===void 0&&(r=null),Aw(s,function(f,h,v){var m,b;if(Array.isArray(v)){b=v.slice();var T=Math.min(b.length,e.data.length);r&&(T=Math.min(T,r.length)),m=[];for(var S=0;S<T;S++)m[S]=r?r[S]:S}else b=v,m=r?r.slice():null;if(m===null)Array.isArray(b)&&(b=b[0]);else if(Array.isArray(m)){if(!Array.isArray(b)){var C=b;b=[];for(var P=0;P<m.length;P++)b[P]=C}b.length=Math.min(m.length,b.length)}l.push({type:"data",prop:f,traces:m,value:b})},"",0),l}function Aw(e,t,r,i){Object.keys(e).forEach(function(a){var s=e[a];if(a[0]!=="_"){var l=r+(i>0?".":"")+a;M0.isPlainObject(s)?Aw(s,t,l,i+1):t(l,a,s)}})}});var eo=ve((vge,Gk)=>{"use strict";var qk=ja(),bQ=n0().timeFormatLocale,wQ=P3().formatLocale,qy=Da(),TQ=D3(),ai=la(),Nk=T0(),AQ=Di(),Pr=Ft(),Bk=Ua(),Pk=Hi().BADNUM,Bs=$n(),MQ=Ph().clearOutline,SQ=L_(),Mw=ky(),kQ=gw(),CQ=z_().getModuleCalcData,Dk=Pr.relinkPrivateKeys,ld=Pr._,mr=Gk.exports={};Pr.extendFlat(mr,ai);mr.attributes=ms();mr.attributes.type.values=mr.allTypes;mr.fontAttrs=qo();mr.layoutAttributes=h0();var R_=Lk();mr.executeAPICommand=R_.executeAPICommand;mr.computeAPICommandBindings=R_.computeAPICommandBindings;mr.manageCommandObserver=R_.manageCommandObserver;mr.hasSimpleAPICommandBindings=R_.hasSimpleAPICommandBindings;mr.redrawText=function(e){return e=Pr.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(ai.getComponentMethod("annotations","draw")(e),ai.getComponentMethod("legend","draw")(e),ai.getComponentMethod("colorbar","draw")(e),t(mr.previousPromises(e)))},300)})};mr.resize=function(e){e=Pr.getGraphDiv(e);var t,r=new Promise(function(i,a){(!e||Pr.isHidden(e))&&a(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||Pr.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var s=e.changed;e.autoplay=!0,ai.call("relayout",e,{autosize:!0}).then(function(){e.changed=s,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return t&&t(r),r};mr.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};mr.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=Pr.ensureSingle(t._paper,"text","js-plot-link-container",function(h){h.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Bk.defaultLine,"pointer-events":"all"}).each(function(){var v=qk.select(this);v.append("tspan").classed("js-link-to-tool",!0),v.append("tspan").classed("js-link-spacer",!0),v.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),a={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=t._paper.attr("width")-7),r.attr(a);var s=r.select(".js-link-to-tool"),l=r.select(".js-link-spacer"),f=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&EQ(e,s),l.text(s.text()&&f.text()?" - ":"")}};function EQ(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" \xBB");if(e._context.sendData)r.on("click",function(){mr.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+a})}}mr.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=qk.select(e).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),a=i.append("input").attr({type:"text",name:"data"});return a.node().value=mr.graphJson(e,!1,"keepdata"),i.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var LQ=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],PQ=["year","month","dayMonth","dayMonthYear"];mr.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var a=e._fullLayout={},s=e.layout||{},l=e._fullData||[],f=e._fullData=[],h=e.data||[],v=e.calcdata||[],m=e._context||{},b;e._transitionData||mr.createTransitionData(e),a._dfltTitle={plot:ld(e,"Click to enter Plot title"),subtitle:ld(e,"Click to enter Plot subtitle"),x:ld(e,"Click to enter X axis title"),y:ld(e,"Click to enter Y axis title"),colorbar:ld(e,"Click to enter Colorscale title"),annotation:ld(e,"new text")},a._traceWord=ld(e,"trace");var T=zk(e,LQ);if(a._mapboxAccessToken=m.mapboxAccessToken,i._initialAutoSizeIsDone){var S=i.width,C=i.height;mr.supplyLayoutGlobalDefaults(s,a,T),s.width||(a.width=S),s.height||(a.height=C),mr.sanitizeMargins(a)}else{mr.supplyLayoutGlobalDefaults(s,a,T);var P=!s.width||!s.height,E=a.autosize,I=m.autosizable,q=P&&(E||I);q?mr.plotAutoSize(e,s,a):P&&mr.sanitizeMargins(a),!E&&P&&(s.width=a.width,s.height=a.height)}a._d3locale=IQ(T,a.separators),a._extraFormat=zk(e,PQ),a._initialAutoSizeIsDone=!0,a._dataLength=h.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[];var B=a._subplots=zQ(),z=a._splomAxes={x:{},y:{}},O=a._splomSubplots={};a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=DQ(l,h),mr.supplyDataDefaults(h,f,s,a);var H=Object.keys(z.x),V=Object.keys(z.y);if(H.length>1&&V.length>1){for(ai.getComponentMethod("grid","sizeDefaults")(s,a),b=0;b<H.length;b++)Pr.pushUnique(B.xaxis,H[b]);for(b=0;b<V.length;b++)Pr.pushUnique(B.yaxis,V[b]);for(var W in O)Pr.pushUnique(B.cartesian,W)}if(a._has=mr._hasPlotType.bind(a),l.length===f.length)for(b=0;b<f.length;b++)Dk(f[b],l[b]);mr.supplyLayoutModuleDefaults(s,a,f,e._transitionData);var K=a._visibleModules,re=[];for(b=0;b<K.length;b++){var oe=K[b].crossTraceDefaults;oe&&Pr.pushUnique(re,oe)}for(b=0;b<re.length;b++)re[b](f,a);a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&H.length>15&&V.length>15&&a.shapes.length===0&&a.images.length===0,mr.linkSubplots(f,a,l,i),mr.cleanPlot(f,a,l,i);var ne=!!(i._has&&i._has("cartesian")),he=!!(a._has&&a._has("cartesian")),de=ne,Ee=he;de&&!Ee?i._bgLayer.remove():Ee&&!de&&(a._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&MQ({_fullLayout:i}),RQ(f,a),Dk(a,i),ai.getComponentMethod("colorscale","crossTraceDefaults")(f,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var ke=a._tracePreGUI,Te={},ye;for(ye in ke)Te[ye]="old";for(b=0;b<f.length;b++)ye=f[b]._fullInput.uid,Te[ye]||(ke[ye]={}),Te[ye]="new";for(ye in Te)Te[ye]==="old"&&delete ke[ye];Ok(a),ai.getComponentMethod("rangeslider","makeData")(a),!r&&v.length===f.length&&mr.supplyDefaultsUpdateCalc(v,f)};mr.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=(e[r]||[])[0];if(a&&a.trace){var s=a.trace;if(s._hasCalcTransform){var l=s._arrayAttrs,f,h,v;for(f=0;f<l.length;f++)h=l[f],v=Pr.nestedProperty(s,h).get().slice(),Pr.nestedProperty(i,h).set(v)}a.trace=i}}};function DQ(e,t){var r=t.length,i=[],a,s;for(a=0;a<e.length;a++){var l=e[a]._fullInput;l!==s&&i.push(l),s=l}var f=i.length,h=new Array(r),v={};function m(S,C){h[C]=S,v[S]=1}function b(S,C){if(S&&typeof S=="string"&&!v[S])return m(S,C),!0}for(a=0;a<r;a++){var T=t[a].uid;typeof T=="number"&&(T=String(T)),!b(T,a)&&(a<f&&b(i[a].uid,a)||m(Pr.randstr(v),a))}return h}function zQ(){var e=ai.collectableSubplotTypes,t={},r,i;if(!e){e=[];var a=ai.subplotsRegistry;for(var s in a){var l=a[s],f=l.attr;if(f&&(e.push(s),Array.isArray(f)))for(i=0;i<f.length;i++)Pr.pushUnique(e,f[i])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function zk(e,t){var r=e._context.locale;r||(r="en-US");var i=!1,a={};function s(b){for(var T=!0,S=0;S<t.length;S++){var C=t[S];a[C]||(b[C]?a[C]=b[C]:T=!1)}T&&(i=!0)}for(var l=0;l<2;l++){for(var f=e._context.locales,h=0;h<2;h++){var v=(f[r]||{}).format;if(v&&(s(v),i))break;f=ai.localeRegistry}var m=r.split("-")[0];if(i||m===r)break;r=m}return i||s(ai.localeRegistry.en.format),a}function IQ(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=wQ(e).format(Pr.adjustFormat(r))}catch(i){return Pr.warnBadFormat(r),Pr.noFormat}return r},timeFormat:bQ(e).utcFormat}}function RQ(e,t){var r,i=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var a=0;a<e.length;a++){var s=e[a];s.meta?i[s.index]=s._meta={meta:s.meta}:t.meta&&(s._meta={meta:t.meta}),t.meta&&(s._meta.layout={meta:t.meta})}i.length&&(r||(r=t._meta={}),r.data=i)}mr.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};mr._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var a=i[t].name;if(a===e)return!0;var s=ai.modules[a];if(s&&s.categories[e])return!0}return!1};mr.cleanPlot=function(e,t,r,i){var a,s,l=i._basePlotModules||[];for(a=0;a<l.length;a++){var f=l[a];f.clean&&f.clean(e,t,r,i)}var h=i._has&&i._has("gl"),v=t._has&&t._has("gl");h&&!v&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var m=!!i._infolayer;e:for(a=0;a<r.length;a++){var b=r[a],T=b.uid;for(s=0;s<e.length;s++){var S=e[s];if(T===S.uid)continue e}m&&i._infolayer.select(".cb"+T).remove()}};mr.linkSubplots=function(e,t,r,i){var a,s,l=i._plots||{},f=t._plots={},h=t._subplots,v={_fullData:e,_fullLayout:t},m=h.cartesian||[];for(a=0;a<m.length;a++){var b=m[a],T=l[b],S=Bs.getFromId(v,b,"x"),C=Bs.getFromId(v,b,"y"),P;for(T?P=f[b]=T:(P=f[b]={},P.id=b),S._counterAxes.push(C._id),C._counterAxes.push(S._id),S._subplotsWith.push(b),C._subplotsWith.push(b),P.xaxis=S,P.yaxis=C,P._hasClipOnAxisFalse=!1,s=0;s<e.length;s++){var E=e[s];if(E.xaxis===P.xaxis._id&&E.yaxis===P.yaxis._id&&E.cliponaxis===!1){P._hasClipOnAxisFalse=!0;break}}}var I=Bs.list(v,null,!0),q;for(a=0;a<I.length;a++){q=I[a];var B=null;q.overlaying&&(B=Bs.getFromId(v,q.overlaying),B&&B.overlaying&&(q.overlaying=!1,B=null)),q._mainAxis=B||q,B&&(q.domain=B.domain.slice()),q._anchorAxis=q.anchor==="free"?null:Bs.getFromId(v,q.anchor)}for(a=0;a<I.length;a++)if(q=I[a],q._counterAxes.sort(Bs.idSort),q._subplotsWith.sort(Pr.subplotSort),q._mainSubplot=FQ(q,t),q._counterAxes.length&&(q.spikemode&&q.spikemode.indexOf("across")!==-1||q.automargin&&q.mirror&&q.anchor!=="free"||ai.getComponentMethod("rangeslider","isVisible")(q))){var z=1,O=0;for(s=0;s<q._counterAxes.length;s++){var H=Bs.getFromId(v,q._counterAxes[s]);z=Math.min(z,H.domain[0]),O=Math.max(O,H.domain[1])}z<O&&(q._counterDomainMin=z,q._counterDomainMax=O)}};function FQ(e,t){var r={_fullLayout:t},i=e._id.charAt(0)==="x",a=e._mainAxis._anchorAxis,s="",l="",f="";if(a&&(f=a._mainAxis._id,s=i?e._id+f:f+e._id),!s||!t._plots[s]){s="";for(var h=e._counterAxes,v=0;v<h.length;v++){var m=h[v],b=i?e._id+m:m+e._id;l||(l=b);var T=Bs.getFromId(r,m);if(f&&T.overlaying===f){s=b;break}}}return s||l}mr.clearExpandedTraceDefaultColors=function(e){var t,r,i;function a(l,f,h,v){r[v]=f,r.length=v+1,l.valType==="color"&&l.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],Nk.crawl(e._module.attributes,a)),i=0;i<t.length;i++){var s=Pr.nestedProperty(e,"_input."+t[i]);s.get()||Pr.nestedProperty(e,t[i]).set(null)}};mr.supplyDataDefaults=function(e,t,r,i){var a=i._modules,s=i._visibleModules,l=i._basePlotModules,f=0,h=0,v,m,b;i._transformModules=[];function T(q){t.push(q);var B=q._module;B&&(Pr.pushUnique(a,B),q.visible===!0&&Pr.pushUnique(s,B),Pr.pushUnique(l,q._module.basePlotModule),f++,q._input.visible!==!1&&h++)}var S={},C=[],P=(r.template||{}).data||{},E=AQ.traceTemplater(P);for(v=0;v<e.length;v++)b=e[v],m=E.newTrace(b),m.uid=i._traceUids[v],mr.supplyTraceDefaults(b,m,h,i,v),m.index=v,m._input=b,m._fullInput=m,T(m),ai.traceIs(m,"carpetAxis")&&(S[m.carpet]=m),ai.traceIs(m,"carpetDependent")&&C.push(v);for(v=0;v<C.length;v++)if(m=t[C[v]],!!m.visible){var I=S[m.carpet];if(m._carpet=I,!I||!I.visible){m.visible=!1;continue}m.xaxis=I.xaxis,m.yaxis=I.yaxis}};mr.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function i(a,s){return Pr.coerce(e||{},r,Mw,a,s)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=mr.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=mr.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=mr.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=mr.supplyAnimationTransitionDefaults(e.transition||{});return r};mr.supplyAnimationFrameDefaults=function(e){var t={};function r(i,a){return Pr.coerce(e||{},t,Mw.frame,i,a)}return r("duration"),r("redraw"),t};mr.supplyAnimationTransitionDefaults=function(e){var t={};function r(i,a){return Pr.coerce(e||{},t,Mw.transition,i,a)}return r("duration"),r("easing"),t};mr.supplyFrameDefaults=function(e){var t={};function r(i,a){return Pr.coerce(e,t,kQ,i,a)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};mr.supplyTraceDefaults=function(e,t,r,i,a){var s=i.colorway||Bk.defaults,l=s[r%s.length],f;function h(B,z){return Pr.coerce(e,t,mr.attributes,B,z)}var v=h("visible");h("type"),h("name",i._traceWord+" "+a),h("uirevision",i.uirevision);var m=mr.getModule(t);if(t._module=m,m){var b=m.basePlotModule,T=b.attr,S=b.attributes;if(T&&S){var C=i._subplots,P="";if(Array.isArray(T))for(f=0;f<T.length;f++){var E=T[f],I=Pr.coerce(e,t,S,E);C[E]&&Pr.pushUnique(C[E],I),P+=I}else P=Pr.coerce(e,t,S,T);C[b.name]&&Pr.pushUnique(C[b.name],P)}}if(v&&(h("customdata"),h("ids"),h("meta"),ai.traceIs(t,"showLegend")?(Pr.coerce(e,t,m.attributes.showlegend?m.attributes:mr.attributes,"showlegend"),h("legend"),h("legendwidth"),h("legendgroup"),h("legendgrouptitle.text"),h("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,m&&m.supplyDefaults(e,t,l,i),ai.traceIs(t,"noOpacity")||h("opacity"),ai.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),ai.traceIs(t,"noHover")||(t.hovertemplate||Pr.coerceHoverinfo(e,t,i),t.type!=="parcats"&&ai.getComponentMethod("fx","supplyDefaults")(e,t,l,i)),m&&m.selectPoints)){var q=h("selectedpoints");Pr.isTypedArray(q)&&(t.selectedpoints=Array.from(q))}return t};mr.supplyLayoutGlobalDefaults=function(e,t,r){function i(b,T){return Pr.coerce(e,t,mr.layoutAttributes,b,T)}var a=e.template;Pr.isPlainObject(a)&&(t.template=a,t._template=a.layout,t._dataTemplate=a.data),i("autotypenumbers");var s=Pr.coerceFont(i,"font"),l=s.size;Pr.coerceFont(i,"title.font",s,{overrideDflt:{size:Math.round(l*1.4)}}),i("title.text",t._dfltTitle.plot),i("title.xref");var f=i("title.yref");i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var h=i("title.automargin");i("title.x"),i("title.xanchor"),i("title.y"),i("title.yanchor"),i("title.subtitle.text",t._dfltTitle.subtitle),Pr.coerceFont(i,"title.subtitle.font",s,{overrideDflt:{size:Math.round(t.title.font.size*.7)}}),h&&(f==="paper"&&(t.title.y!==0&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y===0?"top":"bottom")),f==="container"&&(t.title.y==="auto"&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y<.5?"bottom":"top")));var v=i("uniformtext.mode");v&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&mr.sanitizeMargins(t),ai.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",r.decimal+r.thousands),i("hidesources"),i("colorway"),i("datarevision");var m=i("uirevision");i("editrevision",m),i("selectionrevision",m),ai.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),ai.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),ai.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,i),i("meta"),Pr.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),ai.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),ai.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i),Pr.coerce(e,t,SQ,"scattermode")};function I_(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}mr.plotAutoSize=function(t,r,i){var a=t._context||{},s=a.frameMargins,l,f,h=Pr.isPlotDiv(t);if(h&&t.emit("plotly_autosize"),a.fillFrame)l=window.innerWidth,f=window.innerHeight,document.body.style.overflow="hidden";else{var v=h?window.getComputedStyle(t):{};if(l=I_(v.width)||I_(v.maxWidth)||i.width,f=I_(v.height)||I_(v.maxHeight)||i.height,qy(s)&&s>0){var m=1-2*s;l=Math.round(m*l),f=Math.round(m*f)}}var b=mr.layoutAttributes.width.min,T=mr.layoutAttributes.height.min;l<b&&(l=b),f<T&&(f=T);var S=!r.width&&Math.abs(i.width-l)>1,C=!r.height&&Math.abs(i.height-f)>1;(C||S)&&(S&&(i.width=l),C&&(i.height=f)),t._initialAutoSize||(t._initialAutoSize={width:l,height:f}),mr.sanitizeMargins(i)};mr.supplyLayoutModuleDefaults=function(e,t,r,i){var a=ai.componentsRegistry,s=t._basePlotModules,l,f,h,v=ai.subplotsRegistry.cartesian;for(l in a)h=a[l],h.includeBasePlot&&h.includeBasePlot(e,t);s.length||s.push(v),t._has("cartesian")&&(ai.getComponentMethod("grid","contentDefaults")(e,t),v.finalizeSubplots(e,t));for(var m in t._subplots)t._subplots[m].sort(Pr.subplotSort);for(f=0;f<s.length;f++)h=s[f],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r);var b=t._modules;for(f=0;f<b.length;f++)h=b[f],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r);var T=t._transformModules;for(f=0;f<T.length;f++)h=T[f],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r,i);for(l in a)h=a[l],h.supplyLayoutDefaults&&h.supplyLayoutDefaults(e,t,r)};mr.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Pr.clearThrottle(),Pr.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};mr.style=function(e){var t=e._fullLayout._visibleModules,r=[],i;for(i=0;i<t.length;i++){var a=t[i];a.style&&Pr.pushUnique(r,a.style)}for(i=0;i<r.length;i++)r[i](e)};mr.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,i=e.margin,a=t-(i.l+i.r),s=r-(i.t+i.b),l;a<0&&(l=(t-1)/(i.l+i.r),i.l=Math.floor(l*i.l),i.r=Math.floor(l*i.r)),s<0&&(l=(r-1)/(i.t+i.b),i.t=Math.floor(l*i.t),i.b=Math.floor(l*i.b))}};mr.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};mr.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function Ok(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}var Uk=2,Vk=2;mr.autoMargin=function(e,t,r){var i=e._fullLayout,a=i.width,s=i.height,l=i.margin,f=i.minreducedwidth,h=i.minreducedheight,v=Pr.constrain(a-l.l-l.r,Uk,f),m=Pr.constrain(s-l.t-l.b,Vk,h),b=Math.max(0,a-v),T=Math.max(0,s-m),S=i._pushmargin,C=i._pushmarginIds;if(l.autoexpand!==!1){if(!r)delete S[t],delete C[t];else{var P=r.pad;if(P===void 0&&(P=Math.min(12,l.l,l.r,l.t,l.b)),b){var E=(r.l+r.r)/b;E>1&&(r.l/=E,r.r/=E)}if(T){var I=(r.t+r.b)/T;I>1&&(r.t/=I,r.b/=I)}var q=r.xl!==void 0?r.xl:r.x,B=r.xr!==void 0?r.xr:r.x,z=r.yt!==void 0?r.yt:r.y,O=r.yb!==void 0?r.yb:r.y;S[t]={l:{val:q,size:r.l+P},r:{val:B,size:r.r+P},b:{val:O,size:r.b+P},t:{val:z,size:r.t+P}},C[t]=1}if(!i._replotting)return mr.doAutoMargin(e)}};function qQ(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=Bs.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}mr.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,i=t.height;t._size||(t._size={}),Ok(t);var a=t._size,s=t.margin,l={t:0,b:0,l:0,r:0},f=Pr.extendFlat({},a),h=s.l,v=s.r,m=s.t,b=s.b,T=t._pushmargin,S=t._pushmarginIds,C=t.minreducedwidth,P=t.minreducedheight;if(s.autoexpand!==!1){for(var E in T)S[E]||delete T[E];var I=e._fullLayout._reservedMargin;for(var q in I)for(var B in I[q]){var z=I[q][B];l[B]=Math.max(l[B],z)}T.base={l:{val:0,size:h},r:{val:1,size:v},t:{val:1,size:m},b:{val:0,size:b}};for(var O in l){var H=0;for(var V in T)V!=="base"&&qy(T[V][O].size)&&(H=T[V][O].size>H?T[V][O].size:H);var W=Math.max(0,s[O]-H);l[O]=Math.max(0,l[O]-W)}for(var K in T){var re=T[K].l||{},oe=T[K].b||{},ne=re.val,he=re.size,de=oe.val,Ee=oe.size,ke=r-l.r-l.l,Te=i-l.t-l.b;for(var ye in T){if(qy(he)&&T[ye].r){var Ae=T[ye].r.val,Me=T[ye].r.size;if(Ae>ne){var De=(he*Ae+(Me-ke)*ne)/(Ae-ne),at=(Me*(1-ne)+(he-ke)*(1-Ae))/(Ae-ne);De+at>h+v&&(h=De,v=at)}}if(qy(Ee)&&T[ye].t){var pt=T[ye].t.val,lt=T[ye].t.size;if(pt>de){var ut=(Ee*pt+(lt-Te)*de)/(pt-de),Ye=(lt*(1-de)+(Ee-Te)*(1-pt))/(pt-de);ut+Ye>b+m&&(b=ut,m=Ye)}}}}}var xt=Pr.constrain(r-s.l-s.r,Uk,C),rt=Pr.constrain(i-s.t-s.b,Vk,P),Tt=Math.max(0,r-xt),St=Math.max(0,i-rt);if(Tt){var mt=(h+v)/Tt;mt>1&&(h/=mt,v/=mt)}if(St){var ge=(b+m)/St;ge>1&&(b/=ge,m/=ge)}if(a.l=Math.round(h)+l.l,a.r=Math.round(v)+l.r,a.t=Math.round(m)+l.t,a.b=Math.round(b)+l.b,a.p=Math.round(s.pad),a.w=Math.round(r)-a.l-a.r,a.h=Math.round(i)-a.t-a.b,!t._replotting&&(mr.didMarginChange(f,a)||qQ(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var Re=3*(1+Object.keys(S).length);if(t._redrawFromAutoMarginCount<Re)return ai.call("_doPlot",e);t._size=f,Pr.warn("Too many auto-margin redraws.")}NQ(e)};function NQ(e){var t=Bs.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<t.length;i++){var a=t[i][r];a&&a()}})}var Ik=["l","r","t","b","p","w","h"];mr.didMarginChange=function(e,t){for(var r=0;r<Ik.length;r++){var i=Ik[r],a=e[i],s=t[i];if(!qy(a)||Math.abs(s-a)>1)return!0}return!1};mr.graphJson=function(e,t,r,i,a,s){(a&&t&&!e._fullData||a&&!t&&!e._fullLayout)&&mr.supplyDefaults(e);var l=a?e._fullData:e.data,f=a?e._fullLayout:e.layout,h=(e._transitionData||{})._frames;function v(T,S){if(typeof T=="function")return S?"_function_":null;if(Pr.isPlainObject(T)){var C={},P;return Object.keys(T).sort().forEach(function(B){if(["_","["].indexOf(B.charAt(0))===-1){if(typeof T[B]=="function"){S&&(C[B]="_function");return}if(r==="keepdata"){if(B.substr(B.length-3)==="src")return}else if(r==="keepstream"){if(P=T[B+"src"],typeof P=="string"&&P.indexOf(":")>0&&!Pr.isPlainObject(T.stream))return}else if(r!=="keepall"&&(P=T[B+"src"],typeof P=="string"&&P.indexOf(":")>0))return;C[B]=v(T[B],S)}}),C}var E=Array.isArray(T),I=Pr.isTypedArray(T);if((E||I)&&T.dtype&&T.shape){var q=T.bdata;return v({dtype:T.dtype,shape:T.shape,bdata:Pr.isArrayBuffer(q)?TQ.encode(q):q},S)}return E?T.map(function(B){return v(B,S)}):I?Pr.simpleMap(T,Pr.identity):Pr.isJSDate(T)?Pr.ms2DateTimeLocal(+T):T}var m={data:(l||[]).map(function(T){var S=v(T);return t&&delete S.fit,S})};if(!t&&(m.layout=v(f),a)){var b=f._size;m.layout.computed={margin:{b:b.b,l:b.l,r:b.r,t:b.t}}}return h&&(m.frames=v(h)),s&&(m.config=v(e._context,!0)),i==="object"?m:JSON.stringify(m)};mr.modifyFrames=function(e,t){var r,i,a,s=e._transitionData._frames,l=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(i=t[r],i.type){case"replace":a=i.value;var f=(s[i.index]||{}).name,h=a.name;s[i.index]=l[h]=a,h!==f&&(delete l[f],l[h]=a);break;case"insert":a=i.value,l[a.name]=a,s.splice(i.index,0,a);break;case"delete":a=s[i.index],delete l[a.name],s.splice(i.index,1);break}return Promise.resolve()};mr.computeFrame=function(e,t){var r=e._transitionData._frameHash,i,a,s,l;if(!t)throw new Error("computeFrame must be given a string frame name");var f=r[t.toString()];if(!f)return!1;for(var h=[f],v=[f.name];f.baseframe&&(f=r[f.baseframe.toString()])&&v.indexOf(f.name)===-1;)h.push(f),v.push(f.name);for(var m={};f=h.pop();)if(f.layout&&(m.layout=mr.extendLayout(m.layout,f.layout)),f.data){if(m.data||(m.data=[]),a=f.traces,!a)for(a=[],i=0;i<f.data.length;i++)a[i]=i;for(m.traces||(m.traces=[]),i=0;i<f.data.length;i++)s=a[i],s!=null&&(l=m.traces.indexOf(s),l===-1&&(l=m.data.length,m.traces[l]=s),m.data[l]=mr.extendTrace(m.data[l],f.data[i]))}return m};mr.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,i=0;i<r.length;i++){var a=r[i];a&&a.name&&(t[a.name]=a)}};mr.extendObjectWithContainers=function(e,t,r){var i,a,s,l,f,h,v,m,b=Pr.extendDeepNoArrays({},t||{}),T=Pr.expandObjectPaths(b),S={};if(r&&r.length)for(s=0;s<r.length;s++)i=Pr.nestedProperty(T,r[s]),a=i.get(),a===void 0?Pr.nestedProperty(S,r[s]).set(null):(i.set(null),Pr.nestedProperty(S,r[s]).set(a));if(e=Pr.extendDeepNoArrays(e||{},T),r&&r.length){for(s=0;s<r.length;s++)if(f=Pr.nestedProperty(S,r[s]),v=f.get(),!!v){for(h=Pr.nestedProperty(e,r[s]),m=h.get(),Array.isArray(m)||(m=[],h.set(m)),l=0;l<v.length;l++){var C=v[l];C===null?m[l]=null:m[l]=mr.extendObjectWithContainers(m[l],C)}h.set(m)}}return e};mr.dataArrayContainers=["transforms","dimensions"];mr.layoutArrayContainers=ai.layoutArrayContainers;mr.extendTrace=function(e,t){return mr.extendObjectWithContainers(e,t,mr.dataArrayContainers)};mr.extendLayout=function(e,t){return mr.extendObjectWithContainers(e,t,mr.layoutArrayContainers)};mr.transition=function(e,t,r,i,a,s){var l={redraw:a.redraw},f={},h=[];return l.prepareFn=function(){for(var v=Array.isArray(t)?t.length:0,m=i.slice(0,v),b=0;b<m.length;b++){var T=m[b],S=e._fullData[T],C=S._module;if(C){if(C.animatable){var P=C.basePlotModule.name;f[P]||(f[P]=[]),f[P].push(T)}e.data[m[b]]=mr.extendTrace(e.data[m[b]],t[b])}}var E=Pr.expandObjectPaths(Pr.extendDeepNoArrays({},r)),I=/^[xy]axis[0-9]*$/;for(var q in E)I.test(q)&&delete E[q].range;mr.extendLayout(e.layout,E),delete e.calcdata,mr.supplyDefaults(e),mr.doCalcdata(e);var B=Pr.expandObjectPaths(r);if(B){var z=e._fullLayout._plots;for(var O in z){var H=z[O],V=H.xaxis,W=H.yaxis,K=V.range.slice(),re=W.range.slice(),oe=null,ne=null,he=null,de=null;Array.isArray(B[V._name+".range"])?oe=B[V._name+".range"].slice():Array.isArray((B[V._name]||{}).range)&&(oe=B[V._name].range.slice()),Array.isArray(B[W._name+".range"])?ne=B[W._name+".range"].slice():Array.isArray((B[W._name]||{}).range)&&(ne=B[W._name].range.slice()),K&&oe&&(V.r2l(K[0])!==V.r2l(oe[0])||V.r2l(K[1])!==V.r2l(oe[1]))&&(he={xr0:K,xr1:oe}),re&&ne&&(W.r2l(re[0])!==W.r2l(ne[0])||W.r2l(re[1])!==W.r2l(ne[1]))&&(de={yr0:re,yr1:ne}),(he||de)&&h.push(Pr.extendFlat({plotinfo:H},he,de))}}return Promise.resolve()},l.runFn=function(v){var m,b=e._fullLayout._basePlotModules,T=h.length,S;if(r)for(S=0;S<b.length;S++)b[S].transitionAxes&&b[S].transitionAxes(e,h,s,v);T?(m=Pr.extendFlat({},s),m.duration=0,delete f.cartesian):m=s;for(var C in f){var P=f[C],E=e._fullData[P[0]]._module;E.basePlotModule.plot(e,P,m,v)}},Hk(e,s,l)};mr.transitionFromReact=function(e,t,r,i){var a=e._fullLayout,s=a.transition,l={},f=[];return l.prepareFn=function(){var h=a._plots;l.redraw=!1,t.anim==="some"&&(l.redraw=!0),r.anim==="some"&&(l.redraw=!0);for(var v in h){var m=h[v],b=m.xaxis,T=m.yaxis,S=i[b._name].range.slice(),C=i[T._name].range.slice(),P=b.range.slice(),E=T.range.slice();b.setScale(),T.setScale();var I=null,q=null;(b.r2l(S[0])!==b.r2l(P[0])||b.r2l(S[1])!==b.r2l(P[1]))&&(I={xr0:S,xr1:P}),(T.r2l(C[0])!==T.r2l(E[0])||T.r2l(C[1])!==T.r2l(E[1]))&&(q={yr0:C,yr1:E}),(I||q)&&f.push(Pr.extendFlat({plotinfo:m},I,q))}return Promise.resolve()},l.runFn=function(h){for(var v=e._fullData,m=e._fullLayout,b=m._basePlotModules,T,S,C,P=[],E=0;E<v.length;E++)P.push(E);function I(){if(e._fullLayout)for(var B=0;B<b.length;B++)b[B].transitionAxes&&b[B].transitionAxes(e,f,T,h)}function q(){if(e._fullLayout)for(var B=0;B<b.length;B++)b[B].plot(e,C,S,h)}f.length&&t.anim?s.ordering==="traces first"?(T=Pr.extendFlat({},s,{duration:0}),C=P,S=s,setTimeout(I,s.duration),q()):(T=s,C=null,S=Pr.extendFlat({},s,{duration:0}),setTimeout(q,T.duration),I()):f.length?(T=s,I()):t.anim&&(C=P,S=s,q())},Hk(e,s,l)};function Hk(e,t,r){var i=!1;function a(b){var T=Promise.resolve();if(!b)return T;for(;b.length;)T=T.then(b.shift());return T}function s(b){if(b)for(;b.length;)b.shift()}function l(){return e.emit("plotly_transitioning",[]),new Promise(function(b){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return ai.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var T=0,S=0;function C(){return T++,function(){S++,!i&&S===T&&f(b)}}r.runFn(C),setTimeout(C())})}function f(b){if(e._transitionData)return s(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return ai.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(b)}function h(){if(e._transitionData)return e._transitioning=!1,a(e._transitionData._interruptCallbacks)}var v=[mr.previousPromises,h,r.prepareFn,mr.rehover,mr.reselect,l],m=Pr.syncOrAsync(v,e);return(!m||!m.then)&&(m=Promise.resolve()),m.then(function(){return e})}mr.doCalcdata=function(e,t){var r=Bs.list(e),i=e._fullData,a=e._fullLayout,s,l,f,h,v=new Array(i.length),m=(e.calcdata||[]).slice();for(e.calcdata=v,a._numBoxes=0,a._numViolins=0,a._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,a._piecolormap={},a._sunburstcolormap={},a._treemapcolormap={},a._iciclecolormap={},a._funnelareacolormap={},f=0;f<i.length;f++)if(Array.isArray(t)&&t.indexOf(f)===-1){v[f]=m[f];continue}for(f=0;f<i.length;f++)s=i[f],s._arrayAttrs=Nk.findArrayAttributes(s),s._extremes={};var b=a._subplots.polar||[];for(f=0;f<b.length;f++)r.push(a[b[f]].radialaxis,a[b[f]].angularaxis);for(var T in a._colorAxes){var S=a[T];S.cauto!==!1&&(delete S.cmin,delete S.cmax)}var C=!1;function P(q){if(s=i[q],l=s._module,s.visible===!0&&s.transforms){if(l&&l.calc){var B=l.calc(e,s);B[0]&&B[0].t&&B[0].t._scene&&delete B[0].t._scene.dirty}for(h=0;h<s.transforms.length;h++){var z=s.transforms[h];l=transformsRegistry[z.type],l&&l.calcTransform&&(s._hasCalcTransform=!0,C=!0,l.calcTransform(e,s,z))}}}function E(q,B){if(s=i[q],l=s._module,!!l.isContainer===B){var z=[];if(s.visible===!0&&s._length!==0){delete s._indexToPoints;var O=s.transforms||[];for(h=O.length-1;h>=0;h--)if(O[h].enabled){s._indexToPoints=O[h]._indexToPoints;break}l&&l.calc&&(z=l.calc(e,s))}(!Array.isArray(z)||!z[0])&&(z=[{x:Pk,y:Pk}]),z[0].t||(z[0].t={}),z[0].trace=s,v[q]=z}}for(Rk(r,i,a),f=0;f<i.length;f++)E(f,!0);for(f=0;f<i.length;f++)P(f);for(C&&Rk(r,i,a),f=0;f<i.length;f++)E(f,!0);for(f=0;f<i.length;f++)E(f,!1);Fk(e);var I=OQ(r,e);if(I.length){for(a._numBoxes=0,a._numViolins=0,f=0;f<I.length;f++)E(I[f],!0);for(f=0;f<I.length;f++)E(I[f],!1);Fk(e)}ai.getComponentMethod("fx","calc")(e),ai.getComponentMethod("errorbars","calc")(e)};var BQ=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function OQ(e,t){var r=[],i,a,s,l,f;function h(ye,Ae,Me){var De=Ae._id.charAt(0);if(ye==="histogram2dcontour"){var at=Ae._counterAxes[0],pt=Bs.getFromId(t,at),lt=De==="x"||at==="x"&&pt.type==="category",ut=De==="y"||at==="y"&&pt.type==="category";return function(Ye,xt){return Ye===0||xt===0||lt&&Ye===Me[xt].length-1||ut&&xt===Me.length-1?-1:(De==="y"?xt:Ye)-1}}else return function(Ye,xt){return De==="y"?xt:Ye}}var v={min:function(ye){return Pr.aggNums(Math.min,null,ye)},max:function(ye){return Pr.aggNums(Math.max,null,ye)},sum:function(ye){return Pr.aggNums(function(Ae,Me){return Ae+Me},null,ye)},total:function(ye){return Pr.aggNums(function(Ae,Me){return Ae+Me},null,ye)},mean:function(ye){return Pr.mean(ye)},"geometric mean":function(ye){return Pr.geometricMean(ye)},median:function(ye){return Pr.median(ye)}};function m(ye,Ae){return ye[1]-Ae[1]}function b(ye,Ae){return Ae[1]-ye[1]}for(i=0;i<e.length;i++){var T=e[i];if(T.type==="category"){var S=T.categoryorder.match(BQ);if(S){var C=S[1],P=S[2],E=T._id.charAt(0),I=E==="x",q=[];for(a=0;a<T._categories.length;a++)q.push([T._categories[a],[]]);for(a=0;a<T._traceIndices.length;a++){var B=T._traceIndices[a],z=t._fullData[B];if(z.visible===!0){var O=z.type;ai.traceIs(z,"histogram")&&(delete z._xautoBinFinished,delete z._yautoBinFinished);var H=O==="splom",V=O==="scattergl",W=t.calcdata[B];for(s=0;s<W.length;s++){var K=W[s],re,oe;if(H){var ne=z._axesDim[T._id];if(!I){var he=z._diag[ne][0];he&&(T=t._fullLayout[Bs.id2name(he)])}var de=K.trace.dimensions[ne].values;for(l=0;l<de.length;l++)for(re=T._categoriesMap[de[l]],f=0;f<K.trace.dimensions.length;f++)if(f!==ne){var Ee=K.trace.dimensions[f];q[re][1].push(Ee.values[l])}}else if(V){for(l=0;l<K.t.x.length;l++)I?(re=K.t.x[l],oe=K.t.y[l]):(re=K.t.y[l],oe=K.t.x[l]),q[re][1].push(oe);K.t&&K.t._scene&&delete K.t._scene.dirty}else if(K.hasOwnProperty("z")){oe=K.z;var ke=h(z.type,T,oe);for(l=0;l<oe.length;l++)for(f=0;f<oe[l].length;f++)re=ke(f,l),re+1&&q[re][1].push(oe[l][f])}else for(re=K.p,re===void 0&&(re=K[E]),oe=K.s,oe===void 0&&(oe=K.v),oe===void 0&&(oe=I?K.y:K.x),Array.isArray(oe)||(oe===void 0?oe=[]:oe=[oe]),l=0;l<oe.length;l++)q[re][1].push(oe[l])}}}T._categoriesValue=q;var Te=[];for(a=0;a<q.length;a++)Te.push([q[a][0],v[C](q[a][1])]);Te.sort(P==="descending"?b:m),T._categoriesAggregatedValue=Te,T._initialCategories=Te.map(function(ye){return ye[0]}),r=r.concat(T.sortByInitialCategories())}}}return r}function Rk(e,t,r){var i={};function a(h){h.clearCalc(),h.type==="multicategory"&&h.setupMultiCategory(t),i[h._id]=1}Pr.simpleMap(e,a);for(var s=r._axisMatchGroups||[],l=0;l<s.length;l++)for(var f in s[l])i[f]||a(r[Bs.id2name(f)])}function Fk(e){var t=e._fullLayout,r=t._visibleModules,i={},a,s,l;for(s=0;s<r.length;s++){var f=r[s],h=f.crossTraceCalc;if(h){var v=f.basePlotModule.name;i[v]?Pr.pushUnique(i[v],h):i[v]=[h]}}for(l in i){var m=i[l],b=t._subplots[l];if(Array.isArray(b))for(a=0;a<b.length;a++){var T=b[a],S=l==="cartesian"?t._plots[T]:t[T];for(s=0;s<m.length;s++)m[s](e,S,T)}else for(s=0;s<m.length;s++)m[s](e)}}mr.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};mr.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};mr.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,i=t._previousSelections;t._previousSelections=r;var a=t._reselect||JSON.stringify(r)!==JSON.stringify(i);ai.getComponentMethod("selections","reselect")(e,a)};mr.generalUpdatePerTraceModule=function(e,t,r,i){var a=t.traceHash,s={},l;for(l=0;l<r.length;l++){var f=r[l],h=f[0].trace;h.visible&&(s[h.type]=s[h.type]||[],s[h.type].push(f))}for(var v in a)if(!s[v]){var m=a[v][0],b=m[0].trace;b.visible=!1,s[v]=[m]}for(var T in s){var S=s[T],C=S[0][0].trace._module;C.plot(e,t,Pr.filterVisible(S),i)}t.traceHash=s};mr.plotBasePlot=function(e,t,r,i,a){var s=ai.getModule(e),l=CQ(t.calcdata,s)[0];s.plot(t,l,i,a)};mr.cleanBasePlot=function(e,t,r,i,a){var s=a._has&&a._has(e),l=r._has&&r._has(e);s&&!l&&a["_"+e+"layer"].selectAll("g.trace").remove()}});var Dh=ve(ud=>{"use strict";ud.xmlns="http://www.w3.org/2000/xmlns/";ud.svg="http://www.w3.org/2000/svg";ud.xlink="http://www.w3.org/1999/xlink";ud.svgAttrs={xmlns:ud.svg,"xmlns:xlink":ud.xlink}});var ts=ve((pge,Zk)=>{"use strict";Zk.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}});var co=ve(Zl=>{"use strict";var Fn=ja(),gc=Ft(),UQ=gc.strTranslate,Sw=Dh(),VQ=ts().LINE_SPACING,HQ=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Zl.convertToTspans=function(e,t,r){var i=e.text(),a=!e.attr("data-notex")&&t&&t._context.typesetMath&&typeof MathJax!="undefined"&&i.match(HQ),s=Fn.select(e.node().parentNode);if(s.empty())return;var l=e.attr("class")?e.attr("class").split(" ")[0]:"text";l+="-math",s.selectAll("svg."+l).remove(),s.selectAll("g."+l+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function f(){s.empty()||(l=e.attr("class")+"-math",s.select("svg."+l).remove()),e.text("").style("white-space","pre");var h=r$(e.node(),i);h&&e.style("pointer-events","all"),Zl.positionText(e),r&&r.call(e)}return a?(t&&t._promises||[]).push(new Promise(function(h){e.style("display","none");var v=parseInt(e.node().style.fontSize,10),m={fontSize:v};WQ(a[2],m,function(b,T,S){s.selectAll("svg."+l).remove(),s.selectAll("g."+l+"-group").remove();var C=b&&b.select("svg");if(!C||!C.node()){f(),h();return}var P=s.append("g").classed(l+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});P.node().appendChild(C.node()),T&&T.node()&&C.node().insertBefore(T.node().cloneNode(!0),C.node().firstChild);var E=S.width,I=S.height;C.attr({class:l,height:I,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var q=e.node().style.fill||"black",B=C.select("g");B.attr({fill:q,stroke:q});var z=B.node().getBoundingClientRect(),O=z.width,H=z.height;(O>E||H>I)&&(C.style("overflow","hidden"),z=C.node().getBoundingClientRect(),O=z.width,H=z.height);var V=+e.attr("x"),W=+e.attr("y"),K=v||e.node().getBoundingClientRect().height,re=-K/4;if(l[0]==="y")P.attr({transform:"rotate("+[-90,V,W]+")"+UQ(-O/2,re-H/2)});else if(l[0]==="l")W=re-H/2;else if(l[0]==="a"&&l.indexOf("atitle")!==0)V=0,W=re;else{var oe=e.attr("text-anchor");V=V-O*(oe==="middle"?.5:oe==="end"?1:0),W=W+re-H/2}C.attr({x:V,y:W}),r&&r.call(e,P),h(P)})})):f(),e};var GQ=/(<|&lt;|&#60;)/g,ZQ=/(>|&gt;|&#62;)/g;function YQ(e){return e.replace(GQ,"\\lt ").replace(ZQ,"\\gt ")}var Yk=[["$","$"],["\\(","\\)"]];function WQ(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){gc.warn("No MathJax version:",MathJax.version);return}var a,s,l,f,h=function(){return s=gc.extendDeepAll({},MathJax.Hub.config),l=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:Yk},displayAlign:"left"})},v=function(){s=gc.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=Yk},m=function(){if(a=MathJax.Hub.config.menuSettings.renderer,a!=="SVG")return MathJax.Hub.setRenderer("SVG")},b=function(){a=MathJax.config.startup.output,a!=="svg"&&(MathJax.config.startup.output="svg")},T=function(){var q="math-output-"+gc.randstr({},64);f=Fn.select("body").append("div").attr({id:q}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(YQ(e));var B=f.node();return i===2?MathJax.Hub.Typeset(B):MathJax.typeset([B])},S=function(){var q=f.select(i===2?".MathJax_SVG":".MathJax"),B=!q.empty()&&f.select("svg").node();if(!B)gc.log("There was an error in the tex syntax.",e),r();else{var z=B.getBoundingClientRect(),O;i===2?O=Fn.select("body").select("#MathJax_SVG_glyphs"):O=q.select("defs"),r(q,O,z)}f.remove()},C=function(){if(a!=="SVG")return MathJax.Hub.setRenderer(a)},P=function(){a!=="svg"&&(MathJax.config.startup.output=a)},E=function(){return l!==void 0&&(MathJax.Hub.processSectionDelay=l),MathJax.Hub.Config(s)},I=function(){MathJax.config=s};i===2?MathJax.Hub.Queue(h,m,T,S,C,E):i===3&&(v(),b(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){T(),S(),P(),I()}))}var Jk={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},XQ={sub:"0.3em",sup:"-0.6em"},jQ={sub:"-0.21em",sup:"0.42em"},Wk="\u200B",Xk=["http:","https:","mailto:","",void 0,":"],Kk=Zl.NEWLINES=/(\r\n?|\n)/g,Cw=/(<[^<>]*>)/,Ew=/<(\/?)([^ >]*)(\s+(.*))?>/i,JQ=/<br(\s+.*)?>/i;Zl.BR_TAG_ALL=/<br(\s+.*)?>/gi;var Qk=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,$k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,eC=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,KQ=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function fd(e,t){if(!e)return null;var r=e.match(t),i=r&&(r[3]||r[4]);return i&&F_(i)}var QQ=/(^|;)\s*color:/;Zl.plainText=function(e,t){t=t||{};for(var r=t.len!==void 0&&t.len!==-1?t.len:1/0,i=t.allowedTags!==void 0?t.allowedTags:["br"],a="...",s=a.length,l=e.split(Cw),f=[],h="",v=0,m=0;m<l.length;m++){var b=l[m],T=b.match(Ew),S=T&&T[2].toLowerCase();if(S)i.indexOf(S)!==-1&&(f.push(b),h=S);else{var C=b.length;if(v+C<r)f.push(b),v+=C;else if(v<r){var P=r-v;h&&(h!=="br"||P<=s||C<=s)&&f.pop(),r>s?f.push(b.substr(0,P-s)+a):f.push(b.substr(0,P));break}h=""}}return f.join("")};var $Q={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},e$=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function F_(e){return e.replace(e$,function(t,r){var i;return r.charAt(0)==="#"?i=t$(r.charAt(1)==="x"?parseInt(r.substr(2),16):parseInt(r.substr(1),10)):i=$Q[r],i||t})}Zl.convertEntities=F_;function t$(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r((e>>10)+55232,e%1024+56320)}}function r$(e,t){t=t.replace(Kk," ");var r=!1,i=[],a,s=-1;function l(){s++;var H=document.createElementNS(Sw.svg,"tspan");Fn.select(H).attr({class:"line",dy:s*VQ+"em"}),e.appendChild(H),a=H;var V=i;if(i=[{node:H}],V.length>1)for(var W=1;W<V.length;W++)f(V[W])}function f(H){var V=H.type,W={},K;if(V==="a"){K="a";var re=H.target,oe=H.href,ne=H.popup;oe&&(W={"xlink:xlink:show":re==="_blank"||re.charAt(0)!=="_"?"new":"replace",target:re,"xlink:xlink:href":oe},ne&&(W.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ne+'");return false;'))}else K="tspan";H.style&&(W.style=H.style);var he=document.createElementNS(Sw.svg,K);if(V==="sup"||V==="sub"){h(a,Wk),a.appendChild(he);var de=document.createElementNS(Sw.svg,"tspan");h(de,Wk),Fn.select(de).attr("dy",jQ[V]),W.dy=XQ[V],a.appendChild(he),a.appendChild(de)}else a.appendChild(he);Fn.select(he).attr(W),a=H.node=he,i.push(H)}function h(H,V){H.appendChild(document.createTextNode(V))}function v(H){if(i.length===1){gc.log("Ignoring unexpected end tag </"+H+">.",t);return}var V=i.pop();H!==V.type&&gc.log("Start tag <"+V.type+"> doesnt match end tag <"+H+">. Pretending it did match.",t),a=i[i.length-1].node}var m=JQ.test(t);m?l():(a=e,i=[{node:e}]);for(var b=t.split(Cw),T=0;T<b.length;T++){var S=b[T],C=S.match(Ew),P=C&&C[2].toLowerCase(),E=Jk[P];if(P==="br")l();else if(E===void 0)h(a,F_(S));else if(C[1])v(P);else{var I=C[4],q={type:P},B=fd(I,Qk);if(B?(B=B.replace(QQ,"$1 fill:"),E&&(B+=";"+E)):E&&(B=E),B&&(q.style=B),P==="a"){r=!0;var z=fd(I,$k);if(z){var O=tC(z);O&&(q.href=O,q.target=fd(I,eC)||"_blank",q.popup=fd(I,KQ))}}f(q)}}return r}function tC(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),i=document.createElement("a");r.href=e,i.href=t;var a=r.protocol,s=i.protocol;return Xk.indexOf(a)!==-1&&Xk.indexOf(s)!==-1?t:""}Zl.sanitizeHTML=function(t){t=t.replace(Kk," ");for(var r=document.createElement("p"),i=r,a=[],s=t.split(Cw),l=0;l<s.length;l++){var f=s[l],h=f.match(Ew),v=h&&h[2].toLowerCase();if(v in Jk)if(h[1])a.length&&(i=a.pop());else{var m=h[4],b=fd(m,Qk),T=b?{style:b}:{};if(v==="a"){var S=fd(m,$k);if(S){var C=tC(S);if(C){T.href=C;var P=fd(m,eC);P&&(T.target=P)}}}var E=document.createElement(v);i.appendChild(E),Fn.select(E).attr(T),i=E,a.push(E)}else i.appendChild(document.createTextNode(F_(f)))}var I="innerHTML";return r[I]};Zl.lineCount=function(t){return t.selectAll("tspan.line").size()||1};Zl.positionText=function(t,r,i){return t.each(function(){var a=Fn.select(this);function s(h,v){return v===void 0?(v=a.attr(h),v===null&&(a.attr(h,0),v=0)):a.attr(h,v),v}var l=s("x",r),f=s("y",i);this.nodeName==="text"&&a.selectAll("tspan.line").attr({x:l,y:f})})};function jk(e,t,r){var i=r.horizontalAlign,a=r.verticalAlign||"top",s=e.node().getBoundingClientRect(),l=t.node().getBoundingClientRect(),f,h,v;return a==="bottom"?h=function(){return s.bottom-f.height}:a==="middle"?h=function(){return s.top+(s.height-f.height)/2}:h=function(){return s.top},i==="right"?v=function(){return s.right-f.width}:i==="center"?v=function(){return s.left+(s.width-f.width)/2}:v=function(){return s.left},function(){f=this.node().getBoundingClientRect();var m=v()-l.left,b=h()-l.top,T=r.gd||{};if(r.gd){T._fullLayout._calcInverseTransform(T);var S=gc.apply3DTransform(T._fullLayout._invTransform)(m,b);m=S[0],b=S[1]}return this.style({top:b+"px",left:m+"px","z-index":1e3}),this}}var kw="1px ";Zl.makeTextShadow=function(e){var t=kw,r=kw,i=kw;return t+r+i+e+", -"+t+"-"+r+i+e+", "+t+"-"+r+i+e+", -"+t+r+i+e};Zl.makeEditable=function(e,t){var r=t.gd,i=t.delegate,a=Fn.dispatch("edit","input","cancel"),s=i||e;if(e.style({"pointer-events":i?"none":"all"}),e.size()!==1)throw new Error("boo");function l(){h(),e.style({opacity:0});var v=s.attr("class"),m;v?m="."+v.split(" ")[0]+"-math-group":m="[class*=-math-group]",m&&Fn.select(e.node().parentNode).select(m).style({opacity:0})}function f(v){var m=v.node(),b=document.createRange();b.selectNodeContents(m);var T=window.getSelection();T.removeAllRanges(),T.addRange(b),m.focus()}function h(){var v=Fn.select(r),m=v.select(".svg-container"),b=m.append("div"),T=e.node().style,S=parseFloat(T.fontSize||12),C=t.text;C===void 0&&(C=e.attr("data-unformatted")),b.classed("plugin-editable editable",!0).style({position:"absolute","font-family":T.fontFamily||"Arial","font-size":S,color:t.fill||T.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-S/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(C).call(jk(e,m,t)).on("blur",function(){r._editing=!1,e.text(this.textContent).style({opacity:1});var P=Fn.select(this).attr("class"),E;P?E="."+P.split(" ")[0]+"-math-group":E="[class*=-math-group]",E&&Fn.select(e.node().parentNode).select(E).style({opacity:0});var I=this.textContent;Fn.select(this).transition().duration(0).remove(),Fn.select(document).on("mouseup",null),a.edit.call(e,I)}).on("focus",function(){var P=this;r._editing=!0,Fn.select(document).on("mouseup",function(){if(Fn.event.target===P)return!1;document.activeElement===b.node()&&b.node().blur()})}).on("keyup",function(){Fn.event.which===27?(r._editing=!1,e.style({opacity:1}),Fn.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),Fn.select(this).call(jk(e,m,t)))}).on("keydown",function(){Fn.event.which===13&&this.blur()}).call(f)}return t.immediate?l():s.on("click",l),Fn.rebind(e,a,"on")}});var Sf=ve((yge,uC)=>{"use strict";var a$=ja(),N_=wf(),By=Da(),q_=Ft(),rC=Ua(),i$=$v().isValid;function n$(e,t,r){var i=t?q_.nestedProperty(e,t).get()||{}:e,a=i[r||"color"];a&&a._inputArray&&(a=a._inputArray);var s=!1;if(q_.isArrayOrTypedArray(a)){for(var l=0;l<a.length;l++)if(By(a[l])){s=!0;break}}return q_.isPlainObject(i)&&(s||i.showscale===!0||By(i.cmin)&&By(i.cmax)||i$(i.colorscale)||q_.isPlainObject(i.colorbar))}var aC=["showscale","autocolorscale","colorscale","reversescale","colorbar"],Ny=["min","max","mid","auto"];function nC(e){var t=e._colorAx,r=t||e,i={},a,s,l;for(s=0;s<aC.length;s++)l=aC[s],i[l]=r[l];if(t)for(a="c",s=0;s<Ny.length;s++)l=Ny[s],i[l]=r["c"+l];else{var f;for(s=0;s<Ny.length;s++){if(l=Ny[s],f="c"+l,f in r){i[l]=r[f];continue}f="z"+l,f in r&&(i[l]=r[f])}a=f.charAt(0)}return i._sync=function(h,v){var m=Ny.indexOf(h)!==-1?a+h:h;r[m]=r["_"+m]=v},i}function oC(e){for(var t=nC(e),r=t.min,i=t.max,a=t.reversescale?sC(t.colorscale):t.colorscale,s=a.length,l=new Array(s),f=new Array(s),h=0;h<s;h++){var v=a[h];l[h]=r+v[0]*(i-r),f[h]=v[1]}return{domain:l,range:f}}function sC(e){for(var t=e.length,r=new Array(t),i=t-1,a=0;i>=0;i--,a++){var s=e[i];r[a]=[1-s[0],s[1]]}return r}function lC(e,t){t=t||{};for(var r=e.domain,i=e.range,a=i.length,s=new Array(a),l=0;l<a;l++){var f=N_(i[l]).toRgb();s[l]=[f.r,f.g,f.b,f.a]}var h=a$.scale.linear().domain(r).range(s).clamp(!0),v=t.noNumericCheck,m=t.returnArray,b;return v&&m?b=h:v?b=function(T){return iC(h(T))}:m?b=function(T){return By(T)?h(T):N_(T).isValid()?T:rC.defaultLine}:b=function(T){return By(T)?iC(h(T)):N_(T).isValid()?T:rC.defaultLine},b.domain=h.domain,b.range=function(){return i},b}function o$(e,t){return lC(oC(e),t)}function iC(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return N_(t).toRgbString()}uC.exports={hasColorscale:n$,extractOpts:nC,extractScale:oC,flipScale:sC,makeColorScaleFunc:lC,makeColorScaleFuncFromTrace:o$}});var Pw=ve((gge,hC)=>{"use strict";var fC=J3(),s$=fC.FORMAT_LINK,l$=fC.DATE_FORMAT_LINK;function u$(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?Lw:cC)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function Lw(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+s$+"."].join(" ")}function cC(e,t){return Lw(e,t)+[" And for dates see: "+l$+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}hC.exports={axisHoverFormat:u$,descriptionOnlyNumbers:Lw,descriptionWithDates:cC}});var Iu=ve((_ge,EC)=>{"use strict";var vC=qo(),S0=Tf(),CC=cc().dash,zw=hn().extendFlat,dC=Di().templatedArray,pC=Pw().descriptionWithDates,f$=Hi().ONEDAY,kf=Ao(),c$=kf.HOUR_PATTERN,h$=kf.WEEKDAY_PATTERN,Dw={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},v$=zw({},Dw,{values:Dw.values.slice().concat(["sync"])});function mC(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var yC={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},gC={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},_C={valType:"data_array",editType:"ticks"},xC={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function bC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function wC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var TC={valType:"color",dflt:S0.defaultLine,editType:"ticks"},AC={valType:"color",dflt:S0.lightLine,editType:"ticks"};function MC(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var SC=zw({},CC,{editType:"ticks"}),kC={valType:"boolean",editType:"ticks"};EC.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:S0.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:vC({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[kf.idRegex.x.toString(),kf.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[kf.idRegex.x.toString(),kf.idRegex.y.toString()],editType:"calc"},rangebreaks:dC("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[h$,c$,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:f$},editType:"calc"}),tickmode:v$,nticks:mC(),tick0:yC,dtick:gC,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:_C,ticktext:{valType:"data_array",editType:"ticks"},ticks:xC,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:bC(),tickwidth:wC(),tickcolor:TC,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:zw({},CC,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:vC({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:pC("tick label")},tickformatstops:dC("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:pC("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:S0.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:kC,gridcolor:AC,gridwidth:MC(),griddash:SC,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:S0.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:S0.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",kf.idRegex.x.toString(),kf.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",kf.idRegex.x.toString(),kf.idRegex.y.toString()],editType:"plot"},minor:{tickmode:Dw,nticks:mC("minor"),tick0:yC,dtick:gC,tickvals:_C,ticks:xC,ticklen:bC("minor"),tickwidth:wC("minor"),tickcolor:TC,gridcolor:AC,gridwidth:MC("minor"),griddash:SC,showgrid:kC,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}});var B_=ve((xge,DC)=>{"use strict";var Zi=Iu(),LC=qo(),PC=hn().extendFlat,d$=il().overrideAll;DC.exports=d$({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:Zi.linecolor,outlinewidth:Zi.linewidth,bordercolor:Zi.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:Zi.minor.tickmode,nticks:Zi.nticks,tick0:Zi.tick0,dtick:Zi.dtick,tickvals:Zi.tickvals,ticktext:Zi.ticktext,ticks:PC({},Zi.ticks,{dflt:""}),ticklabeloverflow:PC({},Zi.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:Zi.ticklen,tickwidth:Zi.tickwidth,tickcolor:Zi.tickcolor,ticklabelstep:Zi.ticklabelstep,showticklabels:Zi.showticklabels,labelalias:Zi.labelalias,tickfont:LC({}),tickangle:Zi.tickangle,tickformat:Zi.tickformat,tickformatstops:Zi.tickformatstops,tickprefix:Zi.tickprefix,showtickprefix:Zi.showtickprefix,ticksuffix:Zi.ticksuffix,showticksuffix:Zi.showticksuffix,separatethousands:Zi.separatethousands,exponentformat:Zi.exponentformat,minexponent:Zi.minexponent,showexponent:Zi.showexponent,title:{text:{valType:"string"},font:LC({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")});var _c=ve((wge,IC)=>{"use strict";var p$=B_(),m$=u0().counter,y$=p_(),zC=$v().scales,bge=y$(zC);function O_(e){return"`"+e+"`"}IC.exports=function(t,r){t=t||"",r=r||{};var i=r.cLetter||"c",a="onlyIfNumerical"in r?r.onlyIfNumerical:!!t,s="noScale"in r?r.noScale:t==="marker.line",l="showScaleDflt"in r?r.showScaleDflt:i==="z",f=typeof r.colorscaleDflt=="string"?zC[r.colorscaleDflt]:null,h=r.editTypeOverride||"",v=t?t+".":"",m,b;"colorAttr"in r?(m=r.colorAttr,b=r.colorAttr):(m={z:"z",c:"color"}[i],b="in "+O_(v+m));var T=a?" Has an effect only if "+b+" is set to a numerical array.":"",S=i+"auto",C=i+"min",P=i+"max",E=i+"mid",I=O_(v+S),q=O_(v+C),B=O_(v+P),z=q+" and "+B,O={};O[C]=O[P]=void 0;var H={};H[S]=!1;var V={};return m==="color"&&(V.color={valType:"color",arrayOk:!0,editType:h||"style"},r.anim&&(V.color.anim=!0)),V[S]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:O},V[C]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:H},V[P]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:H},V[E]={valType:"number",dflt:null,editType:"calc",impliedEdits:O},V.colorscale={valType:"colorscale",editType:"calc",dflt:f,impliedEdits:{autocolorscale:!1}},V.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},V.reversescale={valType:"boolean",dflt:!1,editType:"plot"},s||(V.showscale={valType:"boolean",dflt:l,editType:"calc"},V.colorbar=p$),r.noColorAxis||(V.coloraxis={valType:"subplotid",regex:m$("coloraxis"),dflt:null,editType:"calc"}),V}});var Rw=ve((Tge,RC)=>{"use strict";var g$=hn().extendFlat,_$=_c(),Iw=$v().scales;RC.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:Iw.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:Iw.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:Iw.RdBu,editType:"calc"}},coloraxis:g$({_isSubplotObj:!0,editType:"calc"},_$("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}});var Fw=ve((Age,FC)=>{"use strict";var x$=Ft();FC.exports=function(t){return x$.isPlainObject(t.colorbar)}});var Bw=ve(Nw=>{"use strict";var qw=Da(),qC=Ft(),NC=Hi(),b$=NC.ONEDAY,w$=NC.ONEWEEK;Nw.dtick=function(e,t){var r=t==="log",i=t==="date",a=t==="category",s=i?b$:1;if(!e)return s;if(qw(e))return e=Number(e),e<=0?s:a?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||r))return s;var l=e.charAt(0),f=e.substr(1);return f=qw(f)?Number(f):0,f<=0||!(i&&l==="M"&&f===Math.round(f)||r&&l==="L"||r&&l==="D"&&(f===1||f===2))?s:e};Nw.tick0=function(e,t,r,i){if(t==="date")return qC.cleanDate(e,qC.dateTick0(r,i%w$===0?1:0));if(!(i==="D1"||i==="D2"))return qw(e)?Number(e):0}});var Ow=ve((Sge,OC)=>{"use strict";var BC=Bw(),T$=Ft().isArrayOrTypedArray,A$=al().isTypedArraySpec,M$=al().decodeTypedArraySpec;OC.exports=function(t,r,i,a,s){s||(s={});var l=s.isMinor,f=l?t.minor||{}:t,h=l?r.minor:r,v=l?"minor.":"";function m(q){var B=f[q];return A$(B)&&(B=M$(B)),B!==void 0?B:(h._template||{})[q]}var b=m("tick0"),T=m("dtick"),S=m("tickvals"),C=T$(S)?"array":T?"linear":"auto",P=i(v+"tickmode",C);if(P==="auto"||P==="sync")i(v+"nticks");else if(P==="linear"){var E=h.dtick=BC.dtick(T,a);h.tick0=BC.tick0(b,a,r.calendar,E)}else if(a!=="multicategory"){var I=i(v+"tickvals");I===void 0?h.tickmode="auto":l||i("ticktext")}}});var Vw=ve((kge,VC)=>{"use strict";var Uw=Ft(),UC=Iu();VC.exports=function(t,r,i,a){var s=a.isMinor,l=s?t.minor||{}:t,f=s?r.minor:r,h=s?UC.minor:UC,v=s?"minor.":"",m=Uw.coerce2(l,f,h,"ticklen",s?(r.ticklen||5)*.6:void 0),b=Uw.coerce2(l,f,h,"tickwidth",s?r.tickwidth||1:void 0),T=Uw.coerce2(l,f,h,"tickcolor",(s?r.tickcolor:void 0)||f.color),S=i(v+"ticks",!s&&a.outerTicks||m||b||T?"outside":"");S||(delete f.ticklen,delete f.tickwidth,delete f.tickcolor)}});var Hw=ve((Cge,HC)=>{"use strict";HC.exports=function(t){var r=["showexponent","showtickprefix","showticksuffix"],i=r.filter(function(s){return t[s]!==void 0}),a=function(s){return t[s]===t[i[0]]};if(i.every(a)||i.length===1)return t[i[0]]}});var Yl=ve((Ege,GC)=>{"use strict";var U_=Ft(),S$=Di();GC.exports=function(t,r,i){var a=i.name,s=i.inclusionAttr||"visible",l=r[a],f=U_.isArrayOrTypedArray(t[a])?t[a]:[],h=r[a]=[],v=S$.arrayTemplater(r,a,s),m,b;for(m=0;m<f.length;m++){var T=f[m];U_.isPlainObject(T)?b=v.newItem(T):(b=v.newItem({}),b[s]=!1),b._index=m,b[s]!==!1&&i.handleItemDefaults(T,b,r,i),h.push(b)}var S=v.defaultItems();for(m=0;m<S.length;m++)b=S[m],b._index=h.length,i.handleItemDefaults({},b,r,i,{}),h.push(b);if(U_.isArrayOrTypedArray(l)){var C=Math.min(l.length,h.length);for(m=0;m<C;m++)U_.relinkPrivateKeys(h[m],l[m])}return h}});var Zw=ve((Lge,YC)=>{"use strict";var Gw=Ft(),k$=Ua().contrast,ZC=Iu(),C$=Hw(),E$=Yl();YC.exports=function(t,r,i,a,s){s||(s={});var l=i("labelalias");Gw.isPlainObject(l)||delete r.labelalias;var f=C$(t),h=i("showticklabels");if(h){s.noTicklabelshift||i("ticklabelshift"),s.noTicklabelstandoff||i("ticklabelstandoff");var v=s.font||{},m=r.color,b=r.ticklabelposition||"",T=b.indexOf("inside")!==-1?k$(s.bgColor):m&&m!==ZC.color.dflt?m:v.color;if(Gw.coerceFont(i,"tickfont",v,{overrideDflt:{color:T}}),!s.noTicklabelstep&&a!=="multicategory"&&a!=="log"&&i("ticklabelstep"),!s.noAng){var S=i("tickangle");!s.noAutotickangles&&S==="auto"&&i("autotickangles")}if(a!=="category"){var C=i("tickformat");E$(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:L$}),r.tickformatstops.length||delete r.tickformatstops,!s.noExp&&!C&&a!=="date"&&(i("showexponent",f),i("exponentformat"),i("minexponent"),i("separatethousands"))}}};function L$(e,t){function r(a,s){return Gw.coerce(e,t,ZC.tickformatstops,a,s)}var i=r("enabled");i&&(r("dtickrange"),r("value"))}});var Yw=ve((Pge,WC)=>{"use strict";var P$=Hw();WC.exports=function(t,r,i,a,s){s||(s={});var l=s.tickSuffixDflt,f=P$(t),h=i("tickprefix");h&&i("showtickprefix",f);var v=i("ticksuffix",l);v&&i("showticksuffix",f)}});var Ww=ve((Dge,XC)=>{"use strict";var zh=Ft(),D$=Di(),z$=Ow(),I$=Vw(),R$=Zw(),F$=Yw(),q$=B_();XC.exports=function(t,r,i){var a=D$.newContainer(r,"colorbar"),s=t.colorbar||{};function l(oe,ne){return zh.coerce(s,a,q$,oe,ne)}var f=i.margin||{t:0,b:0,l:0,r:0},h=i.width-f.l-f.r,v=i.height-f.t-f.b,m=l("orientation"),b=m==="v",T=l("thicknessmode");l("thickness",T==="fraction"?30/(b?h:v):30);var S=l("lenmode");l("len",S==="fraction"?1:b?v:h);var C=l("yref"),P=l("xref"),E=C==="paper",I=P==="paper",q,B,z,O="left";b?(z="middle",O=I?"left":"right",q=I?1.02:1,B=.5):(z=E?"bottom":"top",O="center",q=.5,B=E?1.02:1),zh.coerce(s,a,{x:{valType:"number",min:I?-2:0,max:I?3:1,dflt:q}},"x"),zh.coerce(s,a,{y:{valType:"number",min:E?-2:0,max:E?3:1,dflt:B}},"y"),l("xanchor",O),l("xpad"),l("yanchor",z),l("ypad"),zh.noneOrAll(s,a,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var H=zh.coerce(s,a,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:b?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",H.indexOf("inside")!==-1?"hide past domain":"hide past div"),z$(s,a,l,"linear");var V=i.font,W={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:V};H.indexOf("inside")!==-1&&(W.bgColor="black"),F$(s,a,l,"linear",W),R$(s,a,l,"linear",W),I$(s,a,l,"linear",W),l("title.text",i._dfltTitle.colorbar);var K=a.showticklabels?a.tickfont:V,re=zh.extendFlat({},V,{family:K.family,size:zh.bigFont(K.size)});zh.coerceFont(l,"title.font",re),l("title.side",b?"top":"right")}});var cd=ve((zge,KC)=>{"use strict";var jC=Da(),jw=Ft(),N$=Fw(),B$=Ww(),JC=$v().isValid,O$=la().traceIs;function Xw(e,t){var r=t.slice(0,t.length-1);return t?jw.nestedProperty(e,r).get()||{}:e}KC.exports=function e(t,r,i,a,s){var l=s.prefix,f=s.cLetter,h="_module"in r,v=Xw(t,l),m=Xw(r,l),b=Xw(r._template||{},l)||{},T=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,i,a,s)};if(h){var S=i._colorAxes||{},C=a(l+"coloraxis");if(C){var P=O$(r,"contour")&&jw.nestedProperty(r,"contours.coloring").get()||"heatmap",E=S[C];E?(E[2].push(T),E[0]!==P&&(E[0]=!1,jw.warn(["Ignoring coloraxis:",C,"setting","as it is linked to incompatible colorscales."].join(" ")))):S[C]=[P,r,[T]];return}}var I=v[f+"min"],q=v[f+"max"],B=jC(I)&&jC(q)&&I<q,z=a(l+f+"auto",!B);z?a(l+f+"mid"):(a(l+f+"min"),a(l+f+"max"));var O=v.colorscale,H=b.colorscale,V;if(O!==void 0&&(V=!JC(O)),H!==void 0&&(V=!JC(H)),a(l+"autocolorscale",V),a(l+"colorscale"),a(l+"reversescale"),l!=="marker.line."){var W;l&&h&&(W=N$(v));var K=a(l+"showscale",W);K&&(l&&b&&(m._template=b),B$(v,m,i))}}});var tE=ve((Ige,eE)=>{"use strict";var QC=Ft(),U$=Di(),$C=Rw(),V$=cd();eE.exports=function(t,r){function i(b,T){return QC.coerce(t,r,$C,b,T)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var a=r._colorAxes,s,l;function f(b,T){return QC.coerce(s,l,$C.coloraxis,b,T)}for(var h in a){var v=a[h];if(v[0])s=t[h]||{},l=U$.newContainer(r,h,"coloraxis"),l._name=h,V$(s,l,r,f,{prefix:"",cLetter:"c"});else{for(var m=0;m<v[2].length;m++)v[2][m]();delete r._colorAxes[h]}}}});var aE=ve((Rge,rE)=>{"use strict";var H$=Ft(),G$=Sf().hasColorscale,Z$=Sf().extractOpts;rE.exports=function(t,r){function i(m,b){var T=m["_"+b];T!==void 0&&(m[b]=T)}function a(m,b){var T=b.container?H$.nestedProperty(m,b.container).get():m;if(T)if(T.coloraxis)T._colorAx=r[T.coloraxis];else{var S=Z$(T),C=S.auto;(C||S.min===void 0)&&i(T,b.min),(C||S.max===void 0)&&i(T,b.max),S.autocolorscale&&i(T,"colorscale")}}for(var s=0;s<t.length;s++){var l=t[s],f=l._module.colorbar;if(f)if(Array.isArray(f))for(var h=0;h<f.length;h++)a(l,f[h]);else a(l,f);G$(l,"marker.line")&&a(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var v in r._colorAxes)a(r[v],{min:"cmin",max:"cmax"})}});var Oy=ve((Fge,nE)=>{"use strict";var iE=Da(),Jw=Ft(),Y$=Sf().extractOpts;nE.exports=function(t,r,i){var a=t._fullLayout,s=i.vals,l=i.containerStr,f=l?Jw.nestedProperty(r,l).get():r,h=Y$(f),v=h.auto!==!1,m=h.min,b=h.max,T=h.mid,S=function(){return Jw.aggNums(Math.min,null,s)},C=function(){return Jw.aggNums(Math.max,null,s)};if(m===void 0?m=S():v&&(f._colorAx&&iE(m)?m=Math.min(m,S()):m=S()),b===void 0?b=C():v&&(f._colorAx&&iE(b)?b=Math.max(b,C()):b=C()),v&&T!==void 0&&(b-T>T-m?m=T-(b-T):b-T<T-m&&(b=T+(T-m))),m===b&&(m-=.5,b+=.5),h._sync("min",m),h._sync("max",b),h.autocolorscale){var P;m*b<0?P=a.colorscale.diverging:m>=0?P=a.colorscale.sequential:P=a.colorscale.sequentialminus,h._sync("colorscale",P)}}});var C0=ve((qge,oE)=>{"use strict";var V_=$v(),k0=Sf();oE.exports={moduleType:"component",name:"colorscale",attributes:_c(),layoutAttributes:Rw(),supplyLayoutDefaults:tE(),handleDefaults:cd(),crossTraceDefaults:aE(),calc:Oy(),scales:V_.scales,defaultScale:V_.defaultScale,getScale:V_.get,isValidScale:V_.isValid,hasColorscale:k0.hasColorscale,extractOpts:k0.extractOpts,extractScale:k0.extractScale,flipScale:k0.flipScale,makeColorScaleFunc:k0.makeColorScaleFunc,makeColorScaleFuncFromTrace:k0.makeColorScaleFuncFromTrace}});var rs=ve((Nge,lE)=>{"use strict";var sE=Ft(),W$=al().isTypedArraySpec;lE.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){var t=e.marker;return sE.isPlainObject(t)&&(sE.isArrayOrTypedArray(t.size)||W$(t.size))}}});var Kw=ve((Bge,uE)=>{"use strict";var X$=Da();uE.exports=function(t,r){r||(r=2);var i=t.marker,a=i.sizeref||1,s=i.sizemin||0,l=i.sizemode==="area"?function(f){return Math.sqrt(f/a)}:function(f){return f/a};return function(f){var h=l(f/r);return X$(h)&&h>0?Math.max(h,s):0}}});var xc=ve(No=>{"use strict";var fE=Ft();No.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};No.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var r=e.xaxes||[],i=e.yaxes||[],a=0;a<r.length;a++)for(var s=0;s<i.length;s++)if(t.indexOf(r[a]+i[s])!==-1)return!0;return!1}return t.indexOf(No.getSubplot(e))!==-1};No.flat=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t;return r};No.p2c=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=e[i].p2c(t);return r};No.getDistanceFunction=function(e,t,r,i){return e==="closest"?i||No.quadrature(t,r):e.charAt(0)==="x"?t:r};No.getClosest=function(e,t,r){if(r.index!==!1)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var i=1/0,a=e.length,s=0;s<a;s++)i=t(e[s]),i<=r.distance&&(r.index=s,r.distance=i);return r};No.inbox=function(e,t,r){return e*t<0||e===0?r:1/0};No.quadrature=function(e,t){return function(r){var i=e(r),a=t(r);return Math.sqrt(i*i+a*a)}};No.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var s=t._indexToPoints[i];s.length===1?a.pointIndex=s[0]:a.pointIndices=s}else a.pointIndex=i;return t._module.eventData?a=t._module.eventData(a,e,t,r,i):("xVal"in e?a.x=e.xVal:"x"in e&&(a.x=e.x),"yVal"in e?a.y=e.yVal:"y"in e&&(a.y=e.y),e.xa&&(a.xaxis=e.xa),e.ya&&(a.yaxis=e.ya),e.zLabelVal!==void 0&&(a.z=e.zLabelVal)),No.appendArrayPointValue(a,t,i),a};No.appendArrayPointValue=function(e,t,r){var i=t._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=cE(s);if(e[l]===void 0){var f=fE.nestedProperty(t,s).get(),h=hE(f,r);h!==void 0&&(e[l]=h)}}};No.appendArrayMultiPointValues=function(e,t,r){var i=t._arrayAttrs;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=cE(s);if(e[l]===void 0){for(var f=fE.nestedProperty(t,s).get(),h=new Array(r.length),v=0;v<r.length;v++)h[v]=hE(f,r[v]);e[l]=h}}};var j$={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function cE(e){return j$[e]||e}function hE(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]]))return e[t[0]][t[1]]}else return e[t]}var J$={x:!0,y:!0},K$={"x unified":!0,"y unified":!0};No.isUnifiedHover=function(e){return typeof e!="string"?!1:!!K$[e]};No.isXYhover=function(e){return typeof e!="string"?!1:!!J$[e]}});var $w=ve((Uge,vE)=>{vE.exports=$$;var Qw={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Q$=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function $$(e){var t=[];return e.replace(Q$,function(r,i,a){var s=i.toLowerCase();for(a=tee(a),s=="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(a.length==Qw[s])return a.unshift(i),t.push(a);if(a.length<Qw[s])throw new Error("malformed path data");t.push([i].concat(a.splice(0,Qw[s])))}}),t}var eee=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function tee(e){var t=e.match(eee);return t?t.map(Number):[]}});var xE=ve((Vge,_E)=>{"use strict";var ree=$w(),or=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},ha="M0,0Z",dE=Math.sqrt(2),Ih=Math.sqrt(3),e5=Math.PI,t5=Math.cos,r5=Math.sin;_E.exports={circle:{n:0,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a="M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z";return r?da(t,r,a):a}},square:{n:1,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")}},diamond:{n:2,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.3,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"Z")}},cross:{n:3,f:function(e,t,r){if(va(t))return ha;var i=or(e*.4,2),a=or(e*1.2,2);return da(t,r,"M"+a+","+i+"H"+i+"V"+a+"H-"+i+"V"+i+"H-"+a+"V-"+i+"H-"+i+"V-"+a+"H"+i+"V-"+i+"H"+a+"Z")}},x:{n:4,f:function(e,t,r){if(va(t))return ha;var i=or(e*.8/dE,2),a="l"+i+","+i,s="l"+i+",-"+i,l="l-"+i+",-"+i,f="l-"+i+","+i;return da(t,r,"M0,"+i+a+s+l+s+l+f+l+f+a+f+a+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(va(t))return ha;var i=or(e*2/Ih,2),a=or(e/2,2),s=or(e,2);return da(t,r,"M-"+i+","+a+"H"+i+"L0,-"+s+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(va(t))return ha;var i=or(e*2/Ih,2),a=or(e/2,2),s=or(e,2);return da(t,r,"M-"+i+",-"+a+"H"+i+"L0,"+s+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(va(t))return ha;var i=or(e*2/Ih,2),a=or(e/2,2),s=or(e,2);return da(t,r,"M"+a+",-"+i+"V"+i+"L-"+s+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(va(t))return ha;var i=or(e*2/Ih,2),a=or(e/2,2),s=or(e,2);return da(t,r,"M-"+a+",-"+i+"V"+i+"L"+s+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(va(t))return ha;var i=or(e*.6,2),a=or(e*1.2,2);return da(t,r,"M-"+a+",-"+i+"H"+i+"V"+a+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(va(t))return ha;var i=or(e*.6,2),a=or(e*1.2,2);return da(t,r,"M"+i+",-"+a+"V"+i+"H-"+a+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(va(t))return ha;var i=or(e*.6,2),a=or(e*1.2,2);return da(t,r,"M"+a+","+i+"H-"+i+"V-"+a+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(va(t))return ha;var i=or(e*.6,2),a=or(e*1.2,2);return da(t,r,"M-"+i+","+a+"V-"+i+"H"+a+"Z")}},pentagon:{n:13,f:function(e,t,r){if(va(t))return ha;var i=or(e*.951,2),a=or(e*.588,2),s=or(-e,2),l=or(e*-.309,2),f=or(e*.809,2);return da(t,r,"M"+i+","+l+"L"+a+","+f+"H-"+a+"L-"+i+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e/2,2),s=or(e*Ih/2,2);return da(t,r,"M"+s+",-"+a+"V"+a+"L0,"+i+"L-"+s+","+a+"V-"+a+"L0,-"+i+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e/2,2),s=or(e*Ih/2,2);return da(t,r,"M-"+a+","+s+"H"+a+"L"+i+",0L"+a+",-"+s+"H-"+a+"L-"+i+",0Z")}},octagon:{n:16,f:function(e,t,r){if(va(t))return ha;var i=or(e*.924,2),a=or(e*.383,2);return da(t,r,"M-"+a+",-"+i+"H"+a+"L"+i+",-"+a+"V"+a+"L"+a+","+i+"H-"+a+"L-"+i+","+a+"V-"+a+"Z")}},star:{n:17,f:function(e,t,r){if(va(t))return ha;var i=e*1.4,a=or(i*.225,2),s=or(i*.951,2),l=or(i*.363,2),f=or(i*.588,2),h=or(-i,2),v=or(i*-.309,2),m=or(i*.118,2),b=or(i*.809,2),T=or(i*.382,2);return da(t,r,"M"+a+","+v+"H"+s+"L"+l+","+m+"L"+f+","+b+"L0,"+T+"L-"+f+","+b+"L-"+l+","+m+"L-"+s+","+v+"H-"+a+"L0,"+h+"Z")}},hexagram:{n:18,f:function(e,t,r){if(va(t))return ha;var i=or(e*.66,2),a=or(e*.38,2),s=or(e*.76,2);return da(t,r,"M-"+s+",0l-"+a+",-"+i+"h"+s+"l"+a+",-"+i+"l"+a+","+i+"h"+s+"l-"+a+","+i+"l"+a+","+i+"h-"+s+"l-"+a+","+i+"l-"+a+",-"+i+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(va(t))return ha;var i=or(e*Ih*.8,2),a=or(e*.8,2),s=or(e*1.6,2),l=or(e*4,2),f="A "+l+","+l+" 0 0 1 ";return da(t,r,"M-"+i+","+a+f+i+","+a+f+"0,-"+s+f+"-"+i+","+a+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(va(t))return ha;var i=or(e*Ih*.8,2),a=or(e*.8,2),s=or(e*1.6,2),l=or(e*4,2),f="A "+l+","+l+" 0 0 1 ";return da(t,r,"M"+i+",-"+a+f+"-"+i+",-"+a+f+"0,"+s+f+i+",-"+a+"Z")}},"star-square":{n:21,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.1,2),a=or(e*2,2),s="A "+a+","+a+" 0 0 1 ";return da(t,r,"M-"+i+",-"+i+s+"-"+i+","+i+s+i+","+i+s+i+",-"+i+s+"-"+i+",-"+i+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.4,2),a=or(e*1.9,2),s="A "+a+","+a+" 0 0 1 ";return da(t,r,"M-"+i+",0"+s+"0,"+i+s+i+",0"+s+"0,-"+i+s+"-"+i+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(va(t))return ha;var i=or(e*.7,2),a=or(e*1.4,2);return da(t,r,"M0,"+a+"L"+i+",0L0,-"+a+"L-"+i+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.4,2),a=or(e*.7,2);return da(t,r,"M0,"+a+"L"+i+",0L0,-"+a+"L-"+i+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+","+i+"H-"+i+"L"+i+",-"+i+"H-"+i+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+","+i+"V-"+i+"L-"+i+","+i+"V-"+i+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e/dE,2);return da(t,r,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.3,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM0,-"+i+"V"+i+"M-"+i+",0H"+i)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.3,2),a=or(e*.65,2);return da(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.4,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.2,2),a=or(e*.85,2);return da(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(va(t))return ha;var i=or(e/2,2),a=or(e,2);return da(t,r,"M"+i+","+a+"V-"+a+"M"+(i-a)+",-"+a+"V"+a+"M"+a+","+i+"H-"+a+"M-"+a+","+(i-a)+"H"+a)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.2,2),a=or(e*1.6,2),s=or(e*.8,2);return da(t,r,"M-"+i+","+s+"L0,0M"+i+","+s+"L0,0M0,-"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.2,2),a=or(e*1.6,2),s=or(e*.8,2);return da(t,r,"M-"+i+",-"+s+"L0,0M"+i+",-"+s+"L0,0M0,"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.2,2),a=or(e*1.6,2),s=or(e*.8,2);return da(t,r,"M"+s+","+i+"L0,0M"+s+",-"+i+"L0,0M-"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.2,2),a=or(e*1.6,2),s=or(e*.8,2);return da(t,r,"M-"+s+","+i+"L0,0M-"+s+",-"+i+"L0,0M"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.4,2);return da(t,r,"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(va(t))return ha;var i=or(e*1.4,2);return da(t,r,"M0,"+i+"V-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(va(t))return ha;var i=or(e,2);return da(t,r,"M"+i+","+i+"L-"+i+",-"+i)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e*2,2);return da(t,r,"M0,0L-"+i+","+a+"H"+i+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e*2,2);return da(t,r,"M0,0L-"+i+",-"+a+"H"+i+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(va(t))return ha;var i=or(e*2,2),a=or(e,2);return da(t,r,"M0,0L"+i+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(va(t))return ha;var i=or(e*2,2),a=or(e,2);return da(t,r,"M0,0L-"+i+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e*2,2);return da(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+","+a+"H"+i+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(va(t))return ha;var i=or(e,2),a=or(e*2,2);return da(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+",-"+a+"H"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(va(t))return ha;var i=or(e*2,2),a=or(e,2);return da(t,r,"M0,-"+a+"V"+a+"M0,0L"+i+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(va(t))return ha;var i=or(e*2,2),a=or(e,2);return da(t,r,"M0,-"+a+"V"+a+"M0,0L-"+i+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(va(t))return ha;var i=e5/2.5,a=2*e*t5(i),s=2*e*r5(i);return da(t,r,"M0,0L"+-a+","+s+"L"+a+","+s+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(va(t))return ha;var i=e5/4,a=2*e*t5(i),s=2*e*r5(i);return da(t,r,"M0,0L"+-a+","+s+"A "+2*e+","+2*e+" 0 0 1 "+a+","+s+"Z")},backoff:.4,noDot:!0}};function va(e){return e===null}var pE,mE,yE,gE;function da(e,t,r){if((!e||e%360===0)&&!t)return r;if(yE===e&&gE===t&&pE===r)return mE;yE=e,gE=t,pE=r;function i(E,I){var q=t5(E),B=r5(E),z=I[0],O=I[1]+(t||0);return[z*q-O*B,z*B+O*q]}for(var a=e/180*e5,s=0,l=0,f=ree(r),h="",v=0;v<f.length;v++){var m=f[v],b=m[0],T=s,S=l;if(b==="M"||b==="L")s=+m[1],l=+m[2];else if(b==="m"||b==="l")s+=+m[1],l+=+m[2];else if(b==="H")s=+m[1];else if(b==="h")s+=+m[1];else if(b==="V")l=+m[1];else if(b==="v")l+=+m[1];else if(b==="A"){s=+m[1],l=+m[2];var C=i(a,[+m[6],+m[7]]);m[6]=C[0],m[7]=C[1],m[3]=+m[3]+e}(b==="H"||b==="V")&&(b="L"),(b==="h"||b==="v")&&(b="l"),(b==="m"||b==="l")&&(s-=T,l-=S);var P=i(a,[s,l]);(b==="H"||b==="V")&&(b="L"),(b==="M"||b==="L"||b==="m"||b==="l")&&(m[1]=P[0],m[2]=P[1]),m[0]=b,h+=m[0]+m.slice(1).join(",")}return mE=h,h}});var _i=ve((Hge,OE)=>{"use strict";var to=ja(),bi=Ft(),aee=bi.numberFormat,pd=Da(),l5=wf(),G_=la(),Mo=Ua(),iee=C0(),Vy=bi.strTranslate,Z_=co(),nee=Dh(),oee=ts(),see=oee.LINE_SPACING,LE=e_().DESELECTDIM,lee=rs(),uee=Kw(),fee=xc().appendArrayPointValue,hr=OE.exports={};hr.font=function(e,t){var r=t.variant,i=t.style,a=t.weight,s=t.color,l=t.size,f=t.family,h=t.shadow,v=t.lineposition,m=t.textcase;f&&e.style("font-family",f),l+1&&e.style("font-size",l+"px"),s&&e.call(Mo.fill,s),a&&e.style("font-weight",a),i&&e.style("font-style",i),r&&e.style("font-variant",r),m&&e.style("text-transform",a5(hee(m))),h&&e.style("text-shadow",h==="auto"?Z_.makeTextShadow(Mo.contrast(s)):a5(h)),v&&e.style("text-decoration-line",a5(vee(v)))};function a5(e){return e==="none"?void 0:e}var cee={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function hee(e){return cee[e]}function vee(e){return e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}hr.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};hr.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};hr.setRect=function(e,t,r,i,a){e.call(hr.setPosition,t,r).call(hr.setSize,i,a)};hr.translatePoint=function(e,t,r,i){var a=r.c2p(e.x),s=i.c2p(e.y);if(pd(a)&&pd(s)&&t.node())t.node().nodeName==="text"?t.attr("x",a).attr("y",s):t.attr("transform",Vy(a,s));else return!1;return!0};hr.translatePoints=function(e,t,r){e.each(function(i){var a=to.select(this);hr.translatePoint(i,a,t,r)})};hr.hideOutsideRangePoint=function(e,t,r,i,a,s){t.attr("display",r.isPtWithinRange(e,a)&&i.isPtWithinRange(e,s)?null:"none")};hr.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,i=t.yaxis;e.each(function(a){var s=a[0].trace,l=s.xcalendar,f=s.ycalendar,h=G_.traceIs(s,"bar-like")?".bartext":".point,.textpoint";e.selectAll(h).each(function(v){hr.hideOutsideRangePoint(v,to.select(this),r,i,l,f)})})}};hr.crispRound=function(e,t,r){return!t||!pd(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};hr.singleLineStyle=function(e,t,r,i,a){t.style("fill","none");var s=(((e||[])[0]||{}).trace||{}).line||{},l=r||s.width||0,f=a||s.dash||"";Mo.stroke(t,i||s.color),hr.dashLine(t,f,l)};hr.lineGroupStyle=function(e,t,r,i){e.style("fill","none").each(function(a){var s=(((a||[])[0]||{}).trace||{}).line||{},l=t||s.width||0,f=i||s.dash||"";to.select(this).call(Mo.stroke,r||s.color).call(hr.dashLine,f,l)})};hr.dashLine=function(e,t,r){r=+r||0,t=hr.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};hr.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};function PE(e,t,r,i){var a=t.fillpattern,s=t.fillgradient,l=a&&hr.getPatternAttr(a.shape,0,"");if(l){var f=hr.getPatternAttr(a.bgcolor,0,null),h=hr.getPatternAttr(a.fgcolor,0,null),v=a.fgopacity,m=hr.getPatternAttr(a.size,0,8),b=hr.getPatternAttr(a.solidity,0,.3),T=t.uid;hr.pattern(e,"point",r,T,l,m,b,void 0,a.fillmode,f,h,v)}else if(s&&s.type!=="none"){var S=s.type,C="scatterfill-"+t.uid;if(i&&(C="legendfill-"+t.uid),!i&&(s.start!==void 0||s.stop!==void 0)){var P,E;S==="horizontal"?(P={x:s.start,y:0},E={x:s.stop,y:0}):S==="vertical"&&(P={x:0,y:s.start},E={x:0,y:s.stop}),P.x=t._xA.c2p(P.x===void 0?t._extremes.x.min[0].val:P.x,!0),P.y=t._yA.c2p(P.y===void 0?t._extremes.y.min[0].val:P.y,!0),E.x=t._xA.c2p(E.x===void 0?t._extremes.x.max[0].val:E.x,!0),E.y=t._yA.c2p(E.y===void 0?t._extremes.y.max[0].val:E.y,!0),e.call(IE,r,C,"linear",s.colorscale,"fill",P,E,!0,!1)}else S==="horizontal"&&(S=S+"reversed"),e.call(hr.gradient,r,C,S,s.colorscale,"fill")}else t.fillcolor&&e.call(Mo.fill,t.fillcolor)}hr.singleFillStyle=function(e,t){var r=to.select(e.node()),i=r.data(),a=((i[0]||[])[0]||{}).trace||{};PE(e,a,t,!1)};hr.fillGroupStyle=function(e,t,r){e.style("stroke-width",0).each(function(i){var a=to.select(this);i[0].trace&&PE(a,i[0].trace,t,r)})};var bE=xE();hr.symbolNames=[];hr.symbolFuncs=[];hr.symbolBackOffs=[];hr.symbolNeedLines={};hr.symbolNoDot={};hr.symbolNoFill={};hr.symbolList=[];Object.keys(bE).forEach(function(e){var t=bE[e],r=t.n;hr.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),hr.symbolNames[r]=e,hr.symbolFuncs[r]=t.f,hr.symbolBackOffs[r]=t.backoff||0,t.needLine&&(hr.symbolNeedLines[r]=!0),t.noDot?hr.symbolNoDot[r]=!0:hr.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(hr.symbolNoFill[r]=!0)});var dee=hr.symbolNames.length,pee="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";hr.symbolNumber=function(e){if(pd(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=hr.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=dee||e>=400?0:Math.floor(Math.max(e,0))};function DE(e,t,r,i){var a=e%100;return hr.symbolFuncs[a](t,r,i)+(e>=200?pee:"")}var wE=aee("~f"),zE={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};hr.gradient=function(e,t,r,i,a,s){var l=zE[i];return IE(e,t,r,l.type,a,s,l.start,l.stop,!1,l.reversed)};function IE(e,t,r,i,a,s,l,f,h,v){var m=a.length,b;i==="linear"?b={node:"linearGradient",attrs:{x1:l.x,y1:l.y,x2:f.x,y2:f.y,gradientUnits:h?"userSpaceOnUse":"objectBoundingBox"},reversed:v}:i==="radial"&&(b={node:"radialGradient",reversed:v});for(var T=new Array(m),S=0;S<m;S++)b.reversed?T[m-1-S]=[wE((1-a[S][0])*100),a[S][1]]:T[S]=[wE(a[S][0]*100),a[S][1]];var C=t._fullLayout,P="g"+C._uid+"-"+r,E=C._defs.select(".gradients").selectAll("#"+P).data([i+T.join(";")],bi.identity);E.exit().remove(),E.enter().append(b.node).each(function(){var I=to.select(this);b.attrs&&I.attr(b.attrs),I.attr("id",P);var q=I.selectAll("stop").data(T);q.exit().remove(),q.enter().append("stop"),q.each(function(B){var z=l5(B[1]);to.select(this).attr({offset:B[0]+"%","stop-color":Mo.tinyRGB(z),"stop-opacity":z.getAlpha()})})}),e.style(s,u5(P,t)).style(s+"-opacity",null),e.classed("gradient_filled",!0)}hr.pattern=function(e,t,r,i,a,s,l,f,h,v,m,b){var T=t==="legend";f&&(h==="overlay"?(v=f,m=Mo.contrast(v)):(v=void 0,m=f));var S=r._fullLayout,C="p"+S._uid+"-"+i,P,E,I=function(he,de,Ee,ke,Te){return ke+(Te-ke)*(he-de)/(Ee-de)},q,B,z,O,H={},V=l5(m),W=Mo.tinyRGB(V),K=V.getAlpha(),re=b*K;switch(a){case"/":P=s*Math.sqrt(2),E=s*Math.sqrt(2),q="M-"+P/4+","+E/4+"l"+P/2+",-"+E/2+"M0,"+E+"L"+P+",0M"+P/4*3+","+E/4*5+"l"+P/2+",-"+E/2,B=l*s,O="path",H={d:q,opacity:re,stroke:W,"stroke-width":B+"px"};break;case"\\":P=s*Math.sqrt(2),E=s*Math.sqrt(2),q="M"+P/4*3+",-"+E/4+"l"+P/2+","+E/2+"M0,0L"+P+","+E+"M-"+P/4+","+E/4*3+"l"+P/2+","+E/2,B=l*s,O="path",H={d:q,opacity:re,stroke:W,"stroke-width":B+"px"};break;case"x":P=s*Math.sqrt(2),E=s*Math.sqrt(2),q="M-"+P/4+","+E/4+"l"+P/2+",-"+E/2+"M0,"+E+"L"+P+",0M"+P/4*3+","+E/4*5+"l"+P/2+",-"+E/2+"M"+P/4*3+",-"+E/4+"l"+P/2+","+E/2+"M0,0L"+P+","+E+"M-"+P/4+","+E/4*3+"l"+P/2+","+E/2,B=s-s*Math.sqrt(1-l),O="path",H={d:q,opacity:re,stroke:W,"stroke-width":B+"px"};break;case"|":P=s,E=s,O="path",q="M"+P/2+",0L"+P/2+","+E,B=l*s,O="path",H={d:q,opacity:re,stroke:W,"stroke-width":B+"px"};break;case"-":P=s,E=s,O="path",q="M0,"+E/2+"L"+P+","+E/2,B=l*s,O="path",H={d:q,opacity:re,stroke:W,"stroke-width":B+"px"};break;case"+":P=s,E=s,O="path",q="M"+P/2+",0L"+P/2+","+E+"M0,"+E/2+"L"+P+","+E/2,B=s-s*Math.sqrt(1-l),O="path",H={d:q,opacity:re,stroke:W,"stroke-width":B+"px"};break;case".":P=s,E=s,l<Math.PI/4?z=Math.sqrt(l*s*s/Math.PI):z=I(l,Math.PI/4,1,s/2,s/Math.sqrt(2)),O="circle",H={cx:P/2,cy:E/2,r:z,opacity:re,fill:W};break}var oe=[a||"noSh",v||"noBg",m||"noFg",s,l].join(";"),ne=S._defs.select(".patterns").selectAll("#"+C).data([oe],bi.identity);ne.exit().remove(),ne.enter().append("pattern").each(function(){var he=to.select(this);if(he.attr({id:C,width:P+"px",height:E+"px",patternUnits:"userSpaceOnUse",patternTransform:T?"scale(0.8)":""}),v){var de=l5(v),Ee=Mo.tinyRGB(de),ke=de.getAlpha(),Te=he.selectAll("rect").data([0]);Te.exit().remove(),Te.enter().append("rect").attr({width:P+"px",height:E+"px",fill:Ee,"fill-opacity":ke})}var ye=he.selectAll(O).data([0]);ye.exit().remove(),ye.enter().append(O).attr(H)}),e.style("fill",u5(C,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)};hr.initGradients=function(e){var t=e._fullLayout,r=bi.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),to.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};hr.initPatterns=function(e){var t=e._fullLayout,r=bi.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),to.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};hr.getPatternAttr=function(e,t,r){return e&&bi.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};hr.pointStyle=function(e,t,r,i){if(e.size()){var a=hr.makePointStyleFns(t);e.each(function(s){hr.singlePointStyle(s,to.select(this),t,a,r,i)})}};hr.singlePointStyle=function(e,t,r,i,a,s){var l=r.marker,f=l.line;if(s&&s.i>=0&&e.i===void 0&&(e.i=s.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?l.opacity:e.mo),i.ms2mrc){var h;e.ms==="various"||l.size==="various"?h=3:h=i.ms2mrc(e.ms),e.mrc=h,i.selectedSizeFn&&(h=e.mrc=i.selectedSizeFn(e));var v=hr.symbolNumber(e.mx||l.symbol)||0;e.om=v%200>=100;var m=c5(e,r),b=f5(e,r);t.attr("d",DE(v,h,m,b))}var T=!1,S,C,P;if(e.so)P=f.outlierwidth,C=f.outliercolor,S=l.outliercolor;else{var E=(f||{}).width;P=(e.mlw+1||E+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?C=e.mlcc=i.lineScale(e.mlc):bi.isArrayOrTypedArray(f.color)?C=Mo.defaultLine:C=f.color,bi.isArrayOrTypedArray(l.color)&&(S=Mo.defaultLine,T=!0),"mc"in e?S=e.mcc=i.markerScale(e.mc):S=l.color||l.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(S=i.selectedColorFn(e))}if(e.om)t.call(Mo.stroke,S).style({"stroke-width":(P||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:P)+"px");var I=l.gradient,q=e.mgt;q?T=!0:q=I&&I.type,bi.isArrayOrTypedArray(q)&&(q=q[0],zE[q]||(q=0));var B=l.pattern,z=B&&hr.getPatternAttr(B.shape,e.i,"");if(q&&q!=="none"){var O=e.mgc;O?T=!0:O=I.color;var H=r.uid;T&&(H+="-"+e.i),hr.gradient(t,a,H,q,[[0,O],[1,S]],"fill")}else if(z){var V=!1,W=B.fgcolor;!W&&s&&s.color&&(W=s.color,V=!0);var K=hr.getPatternAttr(W,e.i,s&&s.color||null),re=hr.getPatternAttr(B.bgcolor,e.i,null),oe=B.fgopacity,ne=hr.getPatternAttr(B.size,e.i,8),he=hr.getPatternAttr(B.solidity,e.i,.3);V=V||e.mcc||bi.isArrayOrTypedArray(B.shape)||bi.isArrayOrTypedArray(B.bgcolor)||bi.isArrayOrTypedArray(B.fgcolor)||bi.isArrayOrTypedArray(B.size)||bi.isArrayOrTypedArray(B.solidity);var de=r.uid;V&&(de+="-"+e.i),hr.pattern(t,"point",a,de,z,ne,he,e.mcc,B.fillmode,re,K,oe)}else bi.isArrayOrTypedArray(S)?Mo.fill(t,S[e.i]):Mo.fill(t,S);P&&Mo.stroke(t,C)}};hr.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=hr.tryColorscale(r,""),t.lineScale=hr.tryColorscale(r,"line"),G_.traceIs(e,"symbols")&&(t.ms2mrc=lee.isBubble(e)?uee(e):function(){return(r.size||6)/2}),e.selectedpoints&&bi.extendFlat(t,hr.makeSelectedPointStyleFns(e)),t};hr.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},a=e.marker||{},s=r.marker||{},l=i.marker||{},f=a.opacity,h=s.opacity,v=l.opacity,m=h!==void 0,b=v!==void 0;(bi.isArrayOrTypedArray(f)||m||b)&&(t.selectedOpacityFn=function(z){var O=z.mo===void 0?a.opacity:z.mo;return z.selected?m?h:O:b?v:LE*O});var T=a.color,S=s.color,C=l.color;(S||C)&&(t.selectedColorFn=function(z){var O=z.mcc||T;return z.selected?S||O:C||O});var P=a.size,E=s.size,I=l.size,q=E!==void 0,B=I!==void 0;return G_.traceIs(e,"symbols")&&(q||B)&&(t.selectedSizeFn=function(z){var O=z.mrc||P/2;return z.selected?q?E/2:O:B?I/2:O}),t};hr.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},a=e.textfont||{},s=r.textfont||{},l=i.textfont||{},f=a.color,h=s.color,v=l.color;return t.selectedTextColorFn=function(m){var b=m.tc||f;return m.selected?h||b:v||(h?b:Mo.addOpacity(b,LE))},t};hr.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=hr.makeSelectedPointStyleFns(t),i=t.marker||{},a=[];r.selectedOpacityFn&&a.push(function(s,l){s.style("opacity",r.selectedOpacityFn(l))}),r.selectedColorFn&&a.push(function(s,l){Mo.fill(s,r.selectedColorFn(l))}),r.selectedSizeFn&&a.push(function(s,l){var f=l.mx||i.symbol||0,h=r.selectedSizeFn(l);s.attr("d",DE(hr.symbolNumber(f),h,c5(l,t),f5(l,t))),l.mrc2=h}),a.length&&e.each(function(s){for(var l=to.select(this),f=0;f<a.length;f++)a[f](l,s)})}};hr.tryColorscale=function(e,t){var r=t?bi.nestedProperty(e,t).get():e;if(r){var i=r.color;if((r.colorscale||r._colorAx)&&bi.isArrayOrTypedArray(i))return iee.makeColorScaleFuncFromTrace(r)}return bi.identity};var i5={start:1,end:-1,middle:0,bottom:1,top:-1};function RE(e,t,r,i,a){var s=to.select(e.node().parentNode),l=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",f=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",h=i?i/.8+1:0,v=(Z_.lineCount(e)-1)*see+1,m=i5[f]*h,b=r*.75+i5[l]*h+(i5[l]-1)*v*r/2;e.attr("text-anchor",f),a||s.attr("transform",Vy(m,b))}function FE(e,t){var r=e.ts||t.textfont.size;return pd(r)&&r>0?r:0}hr.textPointStyle=function(e,t,r){if(e.size()){var i;if(t.selectedpoints){var a=hr.makeSelectedTextStyleFns(t);i=a.selectedTextColorFn}var s=t.texttemplate,l=r._fullLayout;e.each(function(f){var h=to.select(this),v=s?bi.extractOption(f,t,"txt","texttemplate"):bi.extractOption(f,t,"tx","text");if(!v&&v!==0){h.remove();return}if(s){var m=t._module.formatLabels,b=m?m(f,t,l):{},T={};fee(T,t,f.i);var S=t._meta||{};v=bi.texttemplateString(v,b,l._d3locale,T,f,S)}var C=f.tp||t.textposition,P=FE(f,t),E=i?i(f):f.tc||t.textfont.color;h.call(hr.font,{family:f.tf||t.textfont.family,weight:f.tw||t.textfont.weight,style:f.ty||t.textfont.style,variant:f.tv||t.textfont.variant,textcase:f.tC||t.textfont.textcase,lineposition:f.tE||t.textfont.lineposition,shadow:f.tS||t.textfont.shadow,size:P,color:E}).text(v).call(Z_.convertToTspans,r).call(RE,C,P,f.mrc)})}};hr.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=hr.makeSelectedTextStyleFns(t);e.each(function(i){var a=to.select(this),s=r.selectedTextColorFn(i),l=i.tp||t.textposition,f=FE(i,t);Mo.fill(a,s);var h=G_.traceIs(t,"bar-like");RE(a,l,f,i.mrc2||i.mrc,h)})}};var TE=.5;hr.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],i=[],a;for(a=1;a<e.length-1;a++)i.push(H_(e[a-1],e[a],e[a+1],t));for(r+="Q"+i[0][0]+" "+e[1],a=2;a<e.length-1;a++)r+="C"+i[a-2][1]+" "+i[a-1][0]+" "+e[a];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1],r};hr.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],i=e.length-1,a=[H_(e[i],e[0],e[1],t)],s;for(s=1;s<i;s++)a.push(H_(e[s-1],e[s],e[s+1],t));for(a.push(H_(e[i-1],e[i],e[0],t)),s=1;s<=i;s++)r+="C"+a[s-1][1]+" "+a[s][0]+" "+e[s];return r+="C"+a[i][1]+" "+a[0][0]+" "+e[0]+"Z",r};var qE,NE;function E0(e,t,r){return r&&(e=BE(e)),t?dd(e[1]):vd(e[0])}function vd(e){var t=to.round(e,2);return qE=t,t}function dd(e){var t=to.round(e,2);return NE=t,t}function H_(e,t,r,i){var a=e[0]-t[0],s=e[1]-t[1],l=r[0]-t[0],f=r[1]-t[1],h=Math.pow(a*a+s*s,TE/2),v=Math.pow(l*l+f*f,TE/2),m=(v*v*a-h*h*l)*i,b=(v*v*s-h*h*f)*i,T=3*v*(h+v),S=3*h*(h+v);return[[vd(t[0]+(T&&m/T)),dd(t[1]+(T&&b/T))],[vd(t[0]-(S&&m/S)),dd(t[1]-(S&&b/S))]]}var mee={hv:function(e,t,r){return"H"+vd(t[0])+"V"+E0(t,1,r)},vh:function(e,t,r){return"V"+dd(t[1])+"H"+E0(t,0,r)},hvh:function(e,t,r){return"H"+vd((e[0]+t[0])/2)+"V"+dd(t[1])+"H"+E0(t,0,r)},vhv:function(e,t,r){return"V"+dd((e[1]+t[1])/2)+"H"+vd(t[0])+"V"+E0(t,1,r)}},yee=function(e,t,r){return"L"+E0(t,0,r)+","+E0(t,1,r)};hr.steps=function(e){var t=mee[e]||yee;return function(r){for(var i="M"+vd(r[0][0])+","+dd(r[0][1]),a=r.length,s=1;s<a;s++)i+=t(r[s-1],r[s],s===a-1);return i}};function BE(e,t){var r=e.backoff,i=e.trace,a=e.d,s=e.i;if(r&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var l=bi.isArrayOrTypedArray(r),f=e,h=t?t[0]:qE||0,v=t?t[1]:NE||0,m=f[0],b=f[1],T=m-h,S=b-v,C=Math.atan2(S,T),P=l?r[s]:r;if(P==="auto"){var E=f.i;i.type==="scatter"&&E--;var I=f.marker,q=I.symbol;bi.isArrayOrTypedArray(q)&&(q=q[E]);var B=I.size;bi.isArrayOrTypedArray(B)&&(B=B[E]),P=I?hr.symbolBackOffs[hr.symbolNumber(q)]*B:0,P+=hr.getMarkerStandoff(a[E],i)||0}var z=m-P*Math.cos(C),O=b-P*Math.sin(C);(z<=m&&z>=h||z>=m&&z<=h)&&(O<=b&&O>=v||O>=b&&O<=v)&&(e=[z,O])}return e}hr.applyBackoff=BE;hr.makeTester=function(){var e=bi.ensureSingleById(to.select("body"),"svg","js-plotly-tester",function(r){r.attr(nee.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=bi.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});hr.tester=e,hr.testref=t};hr.savedBBoxes={};var n5=0,gee=1e4;hr.bBox=function(e,t,r){r||(r=AE(e));var i;if(r){if(i=hr.savedBBoxes[r],i)return bi.extendFlat({},i)}else if(e.childNodes.length===1){var a=e.childNodes[0];if(r=AE(a),r){var s=+a.getAttribute("x")||0,l=+a.getAttribute("y")||0,f=a.getAttribute("transform");if(!f){var h=hr.bBox(a,!1,r);return s&&(h.left+=s,h.right+=s),l&&(h.top+=l,h.bottom+=l),h}if(r+="~"+s+"~"+l+"~"+f,i=hr.savedBBoxes[r],i)return bi.extendFlat({},i)}}var v,m;t?v=e:(m=hr.tester.node(),v=e.cloneNode(!0),m.appendChild(v)),to.select(v).attr("transform",null).call(Z_.positionText,0,0);var b=v.getBoundingClientRect(),T=hr.testref.node().getBoundingClientRect();t||m.removeChild(v);var S={height:b.height,width:b.width,left:b.left-T.left,top:b.top-T.top,right:b.right-T.left,bottom:b.bottom-T.top};return n5>=gee&&(hr.savedBBoxes={},n5=0),r&&(hr.savedBBoxes[r]=S),n5++,bi.extendFlat({},S)};function AE(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}hr.setClipUrl=function(e,t,r){e.attr("clip-path",u5(t,r))};function u5(e,t){if(!e)return null;var r=t._context,i=r._exportedPlot?"":r._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}hr.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",a=i.replace(t,function(s,l,f){return[l,f].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};hr.setTranslate=function(e,t,r){var i=/(\btranslate\(.*?\);?)/,a=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",l=e[a]("transform")||"";return t=t||0,r=r||0,l=l.replace(i,"").trim(),l+=Vy(t,r),l=l.trim(),e[s]("transform",l),l};hr.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",a=i.replace(t,function(s,l,f){return[l,f].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};hr.setScale=function(e,t,r){var i=/(\bscale\(.*?\);?)/,a=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",l=e[a]("transform")||"";return t=t||1,r=r||1,l=l.replace(i,"").trim(),l+="scale("+t+","+r+")",l=l.trim(),e[s]("transform",l),l};var _ee=/\s*sc.*/;hr.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var i=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var a=(this.getAttribute("transform")||"").replace(_ee,"");a+=i,a=a.trim(),this.setAttribute("transform",a)})}};var xee=/translate\([^)]*\)\s*$/;hr.setTextPointsScale=function(e,t,r){e&&e.each(function(){var i,a=to.select(this),s=a.select("text");if(s.node()){var l=parseFloat(s.attr("x")||0),f=parseFloat(s.attr("y")||0),h=(a.attr("transform")||"").match(xee);t===1&&r===1?i=[]:i=[Vy(l,f),"scale("+t+","+r+")",Vy(-l,-f)],h&&i.push(h),a.attr("transform",i.join(""))}})};function f5(e,t){var r;return e&&(r=e.mf),r===void 0&&(r=t.marker&&t.marker.standoff||0),!t._geo&&!t._xA?-r:r}hr.getMarkerStandoff=f5;var Uy=Math.atan2,hd=Math.cos,L0=Math.sin;function ME(e,t){var r=t[0],i=t[1];return[r*hd(e)-i*L0(e),r*L0(e)+i*hd(e)]}var SE,kE,CE,EE,o5,s5;function c5(e,t){var r=e.ma;r===void 0&&(r=t.marker.angle,(!r||bi.isArrayOrTypedArray(r))&&(r=0));var i,a,s=t.marker.angleref;if(s==="previous"||s==="north"){if(t._geo){var l=t._geo.project(e.lonlat);i=l[0],a=l[1]}else{var f=t._xA,h=t._yA;if(f&&h)i=f.c2p(e.x),a=h.c2p(e.y);else return 90}if(t._geo){var v=e.lonlat[0],m=e.lonlat[1],b=t._geo.project([v,m+1e-5]),T=t._geo.project([v+1e-5,m]),S=Uy(T[1]-a,T[0]-i),C=Uy(b[1]-a,b[0]-i),P;if(s==="north")P=r/180*Math.PI;else if(s==="previous"){var E=v/180*Math.PI,I=m/180*Math.PI,q=SE/180*Math.PI,B=kE/180*Math.PI,z=q-E,O=hd(B)*L0(z),H=L0(B)*hd(I)-hd(B)*L0(I)*hd(z);P=-Uy(O,H)-Math.PI,SE=v,kE=m}var V=ME(S,[hd(P),0]),W=ME(C,[L0(P),0]);r=Uy(V[1]+W[1],V[0]+W[0])/Math.PI*180,s==="previous"&&!(s5===t.uid&&e.i===o5+1)&&(r=null)}if(s==="previous"&&!t._geo)if(s5===t.uid&&e.i===o5+1&&pd(i)&&pd(a)){var K=i-CE,re=a-EE,oe=t.line&&t.line.shape||"",ne=oe.slice(oe.length-1);ne==="h"&&(re=0),ne==="v"&&(K=0),r+=Uy(re,K)/Math.PI*180+90}else r=null}return CE=i,EE=a,o5=e.i,s5=t.uid,r}hr.getMarkerAngle=c5});var Hy=ve((Gge,GE)=>{"use strict";var P0=ja(),bee=Da(),wee=eo(),h5=la(),md=Ft(),UE=md.strTranslate,Y_=_i(),W_=Ua(),D0=co(),VE=e_(),Tee=ts().OPPOSITE_SIDE,HE=/ [XY][0-9]* /,v5=1.6,d5=1.6;function Aee(e,t,r){var i=e._fullLayout,a=r.propContainer,s=r.propName,l=r.placeholder,f=r.traceIndex,h=r.avoid||{},v=r.attributes,m=r.transform,b=r.containerGroup,T=1,S=a.title,C=(S&&S.text?S.text:"").trim(),P=!1,E=S&&S.font?S.font:{},I=E.family,q=E.size,B=E.color,z=E.weight,O=E.style,H=E.variant,V=E.textcase,W=E.lineposition,K=E.shadow,re=r.subtitlePropName,oe=!!re,ne=r.subtitlePlaceholder,he=(a.title||{}).subtitle||{text:"",font:{}},de=he.text.trim(),Ee=!1,ke=1,Te=he.font,ye=Te.family,Ae=Te.size,Me=Te.color,De=Te.weight,at=Te.style,pt=Te.variant,lt=Te.textcase,ut=Te.lineposition,Ye=Te.shadow,xt;s==="title.text"?xt="titleText":s.indexOf("axis")!==-1?xt="axisTitleText":s.indexOf("colorbar"!==-1)&&(xt="colorbarTitleText");var rt=e._context.edits[xt];function Tt(ar,kt){return ar===void 0||kt===void 0?!1:ar.replace(HE," % ")===kt.replace(HE," % ")}C===""?T=0:Tt(C,l)&&(rt||(C=""),T=.2,P=!0),oe&&(de===""?ke=0:Tt(de,ne)&&(rt||(de=""),ke=.2,Ee=!0)),r._meta?C=md.templateString(C,r._meta):i._meta&&(C=md.templateString(C,i._meta));var St=C||de||rt,mt;b||(b=md.ensureSingle(i._infolayer,"g","g-"+t),mt=i._hColorbarMoveTitle);var ge=b.selectAll("text."+t).data(St?[0]:[]);ge.enter().append("text"),ge.text(C).attr("class",t),ge.exit().remove();var Re=null,xe=t+"-subtitle",et=de||rt;if(oe&&et&&(Re=b.selectAll("text."+xe).data(et?[0]:[]),Re.enter().append("text"),Re.text(de).attr("class",xe),Re.exit().remove()),!St)return b;function ht(ar,kt){md.syncOrAsync([tt,Rt],{title:ar,subtitle:kt})}function tt(ar){var kt=ar.title,zt=ar.subtitle,_r;!m&&mt&&(m={}),m?(_r="",m.rotate&&(_r+="rotate("+[m.rotate,v.x,v.y]+")"),(m.offset||mt)&&(_r+=UE(0,(m.offset||0)-(mt||0)))):_r=null,kt.attr("transform",_r);function rr(bt){if(bt){var wt=P0.select(bt.node().parentNode).select("."+xe);if(!wt.empty()){var Ut=bt.node().getBBox();if(Ut.height){var Kt=Ut.y+Ut.height+v5*Ae;wt.attr("y",Kt)}}}}if(kt.style("opacity",T*W_.opacity(B)).call(Y_.font,{color:W_.rgb(B),size:P0.round(q,2),family:I,weight:z,style:O,variant:H,textcase:V,shadow:K,lineposition:W}).attr(v).call(D0.convertToTspans,e,rr),zt){var Be=b.select("."+t+"-math-group"),vt=kt.node().getBBox(),gt=Be.node()?Be.node().getBBox():void 0,Cr=gt?gt.y+gt.height+v5*Ae:vt.y+vt.height+d5*Ae,pr=md.extendFlat({},v,{y:Cr});zt.attr("transform",_r),zt.style("opacity",ke*W_.opacity(Me)).call(Y_.font,{color:W_.rgb(Me),size:P0.round(Ae,2),family:ye,weight:De,style:at,variant:pt,textcase:lt,shadow:Ye,lineposition:ut}).attr(pr).call(D0.convertToTspans,e)}return wee.previousPromises(e)}function Rt(ar){var kt=ar.title,zt=P0.select(kt.node().parentNode);if(h&&h.selection&&h.side&&C){zt.attr("transform",null);var _r=Tee[h.side],rr=h.side==="left"||h.side==="top"?-1:1,Be=bee(h.pad)?h.pad:2,vt=Y_.bBox(zt.node()),gt={t:0,b:0,l:0,r:0},Cr=e._fullLayout._reservedMargin;for(var pr in Cr)for(var bt in Cr[pr]){var wt=Cr[pr][bt];gt[bt]=Math.max(gt[bt],wt)}var Ut={left:gt.l,top:gt.t,right:i.width-gt.r,bottom:i.height-gt.b},Kt=h.maxShift||rr*(Ut[h.side]-vt[h.side]),Gt=0;if(Kt<0)Gt=Kt;else{var Nt=h.offsetLeft||0,$t=h.offsetTop||0;vt.left-=Nt,vt.right-=Nt,vt.top-=$t,vt.bottom-=$t,h.selection.each(function(){var xr=Y_.bBox(this);md.bBoxIntersect(vt,xr,Be)&&(Gt=Math.max(Gt,rr*(xr[h.side]-vt[_r])+Be))}),Gt=Math.min(Kt,Gt),a._titleScoot=Math.abs(Gt)}if(Gt>0||Kt<0){var Ar={left:[-Gt,0],right:[Gt,0],top:[0,-Gt],bottom:[0,Gt]}[h.side];zt.attr("transform",UE(Ar[0],Ar[1]))}}}ge.call(ht,Re);function qt(ar,kt){ar.text(kt).on("mouseover.opacity",function(){P0.select(this).transition().duration(VE.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){P0.select(this).transition().duration(VE.HIDE_PLACEHOLDER).style("opacity",0)})}if(rt&&(C?ge.on(".opacity",null):(qt(ge,l),P=!0),ge.call(D0.makeEditable,{gd:e}).on("edit",function(ar){f!==void 0?h5.call("_guiRestyle",e,s,ar,f):h5.call("_guiRelayout",e,s,ar)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(ht)}).on("input",function(ar){this.text(ar||" ").call(D0.positionText,v.x,v.y)}),oe)){if(oe&&!C){var Jt=ge.node().getBBox(),Ht=Jt.y+Jt.height+d5*Ae;Re.attr("y",Ht)}de?Re.on(".opacity",null):(qt(Re,ne),Ee=!0),Re.call(D0.makeEditable,{gd:e}).on("edit",function(ar){h5.call("_guiRelayout",e,"title.subtitle.text",ar)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(ht)}).on("input",function(ar){this.text(ar||" ").call(D0.positionText,Re.attr("x"),Re.attr("y"))})}return ge.classed("js-placeholder",P),Re&&Re.classed("js-placeholder",Ee),b}GE.exports={draw:Aee,SUBTITLE_PADDING_EM:d5,SUBTITLE_PADDING_MATHJAX_EM:v5}});var t2=ve((Zge,jE)=>{"use strict";var Mee=ja(),See=n0().utcFormat,zi=Ft(),kee=zi.numberFormat,Cf=Da(),Rh=zi.cleanNumber,Cee=zi.ms2DateTime,ZE=zi.dateTime2ms,Ef=zi.ensureNumber,YE=zi.isArrayOrTypedArray,Fh=Hi(),X_=Fh.FP_SAFE,Ru=Fh.BADNUM,Eee=Fh.LOG_CLIP,Lee=Fh.ONEWEEK,j_=Fh.ONEDAY,J_=Fh.ONEHOUR,WE=Fh.ONEMIN,XE=Fh.ONESEC,K_=$n(),e2=Ao(),Q_=e2.HOUR_PATTERN,$_=e2.WEEKDAY_PATTERN;function Gy(e){return Math.pow(10,e)}function p5(e){return e!=null}jE.exports=function(t,r){r=r||{};var i=t._id||"x",a=i.charAt(0);function s(z,O){if(z>0)return Math.log(z)/Math.LN10;if(z<=0&&O&&t.range&&t.range.length===2){var H=t.range[0],V=t.range[1];return .5*(H+V-2*Eee*Math.abs(H-V))}else return Ru}function l(z,O,H,V){if((V||{}).msUTC&&Cf(z))return+z;var W=ZE(z,H||t.calendar);if(W===Ru)if(Cf(z)){z=+z;var K=Math.floor(zi.mod(z+.05,1)*10),re=Math.round(z-K/10);W=ZE(new Date(re))+K/10}else return Ru;return W}function f(z,O,H){return Cee(z,O,H||t.calendar)}function h(z){return t._categories[Math.round(z)]}function v(z){if(p5(z)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[z]!==void 0)return t._categoriesMap[z];t._categories.push(typeof z=="number"?String(z):z);var O=t._categories.length-1;return t._categoriesMap[z]=O,O}return Ru}function m(z,O){for(var H=new Array(O),V=0;V<O;V++){var W=(z[0]||[])[V],K=(z[1]||[])[V];H[V]=b([W,K])}return H}function b(z){if(t._categoriesMap)return t._categoriesMap[z]}function T(z){var O=b(z);if(O!==void 0)return O;if(Cf(z))return+z}function S(z){return Cf(z)?+z:b(z)}function C(z,O,H){return Mee.round(H+O*z,2)}function P(z,O,H){return(z-H)/O}var E=function(O){return Cf(O)?C(O,t._m,t._b):Ru},I=function(z){return P(z,t._m,t._b)};if(t.rangebreaks){var q=a==="y";E=function(z){if(!Cf(z))return Ru;var O=t._rangebreaks.length;if(!O)return C(z,t._m,t._b);var H=q;t.range[0]>t.range[1]&&(H=!H);for(var V=H?-1:1,W=V*z,K=0,re=0;re<O;re++){var oe=V*t._rangebreaks[re].min,ne=V*t._rangebreaks[re].max;if(W<oe)break;if(W>ne)K=re+1;else{K=W<(oe+ne)/2?re:re+1;break}}var he=t._B[K]||0;return isFinite(he)?C(z,t._m2,he):0},I=function(z){var O=t._rangebreaks.length;if(!O)return P(z,t._m,t._b);for(var H=0,V=0;V<O&&!(z<t._rangebreaks[V].pmin);V++)z>t._rangebreaks[V].pmax&&(H=V+1);return P(z,t._m2,t._B[H])}}t.c2l=t.type==="log"?s:Ef,t.l2c=t.type==="log"?Gy:Ef,t.l2p=E,t.p2l=I,t.c2p=t.type==="log"?function(z,O){return E(s(z,O))}:E,t.p2c=t.type==="log"?function(z){return Gy(I(z))}:I,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=Rh,t.c2d=t.c2r=t.l2d=t.l2r=Ef,t.d2p=t.r2p=function(z){return t.l2p(Rh(z))},t.p2d=t.p2r=I,t.cleanPos=Ef):t.type==="log"?(t.d2r=t.d2l=function(z,O){return s(Rh(z),O)},t.r2d=t.r2c=function(z){return Gy(Rh(z))},t.d2c=t.r2l=Rh,t.c2d=t.l2r=Ef,t.c2r=s,t.l2d=Gy,t.d2p=function(z,O){return t.l2p(t.d2r(z,O))},t.p2d=function(z){return Gy(I(z))},t.r2p=function(z){return t.l2p(Rh(z))},t.p2r=I,t.cleanPos=Ef):t.type==="date"?(t.d2r=t.r2d=zi.identity,t.d2c=t.r2c=t.d2l=t.r2l=l,t.c2d=t.c2r=t.l2d=t.l2r=f,t.d2p=t.r2p=function(z,O,H){return t.l2p(l(z,0,H))},t.p2d=t.p2r=function(z,O,H){return f(I(z),O,H)},t.cleanPos=function(z){return zi.cleanDate(z,Ru,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=v,t.r2d=t.c2d=t.l2d=h,t.d2r=t.d2l_noadd=T,t.r2c=function(z){var O=S(z);return O!==void 0?O:t.fraction2r(.5)},t.l2r=t.c2r=Ef,t.r2l=S,t.d2p=function(z){return t.l2p(t.r2c(z))},t.p2d=function(z){return h(I(z))},t.r2p=t.d2p,t.p2r=I,t.cleanPos=function(z){return typeof z=="string"&&z!==""?z:Ef(z)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=h,t.d2r=t.d2l_noadd=T,t.r2c=function(z){var O=T(z);return O!==void 0?O:t.fraction2r(.5)},t.r2c_just_indices=b,t.l2r=t.c2r=Ef,t.r2l=T,t.d2p=function(z){return t.l2p(t.r2c(z))},t.p2d=function(z){return h(I(z))},t.r2p=t.d2p,t.p2r=I,t.cleanPos=function(z){return Array.isArray(z)||typeof z=="string"&&z!==""?z:Ef(z)},t.setupMultiCategory=function(z){var O=t._traceIndices,H,V,W=t._matchGroup;if(W&&t._categories.length===0){for(var K in W)if(K!==i){var re=r[K_.id2name(K)];O=O.concat(re._traceIndices)}}var oe=[[0,{}],[0,{}]],ne=[];for(H=0;H<O.length;H++){var he=z[O[H]];if(a in he){var de=he[a],Ee=he._length||zi.minRowLength(de);if(YE(de[0])&&YE(de[1]))for(V=0;V<Ee;V++){var ke=de[0][V],Te=de[1][V];p5(ke)&&p5(Te)&&(ne.push([ke,Te]),ke in oe[0][1]||(oe[0][1][ke]=oe[0][0]++),Te in oe[1][1]||(oe[1][1][Te]=oe[1][0]++))}}}for(ne.sort(function(ye,Ae){var Me=oe[0][1],De=Me[ye[0]]-Me[Ae[0]];if(De)return De;var at=oe[1][1];return at[ye[1]]-at[Ae[1]]}),H=0;H<ne.length;H++)v(ne[H])}),t.fraction2r=function(z){var O=t.r2l(t.range[0]),H=t.r2l(t.range[1]);return t.l2r(O+z*(H-O))},t.r2fraction=function(z){var O=t.r2l(t.range[0]),H=t.r2l(t.range[1]);return(t.r2l(z)-O)/(H-O)},t.limitRange=function(z){var O=t.minallowed,H=t.maxallowed;if(!(O===void 0&&H===void 0)){z||(z="range");var V=zi.nestedProperty(t,z).get(),W=zi.simpleMap(V,t.r2l),K=W[1]<W[0];K&&W.reverse();var re=zi.simpleMap([O,H],t.r2l);if(O!==void 0&&W[0]<re[0]&&(V[K?1:0]=O),H!==void 0&&W[1]>re[1]&&(V[K?0:1]=H),V[0]===V[1]){var oe=t.l2r(O),ne=t.l2r(H);if(O!==void 0){var he=oe+1;H!==void 0&&(he=Math.min(he,ne)),V[K?1:0]=he}if(H!==void 0){var de=ne+1;O!==void 0&&(de=Math.max(de,oe)),V[K?0:1]=de}}}},t.cleanRange=function(z,O){t._cleanRange(z,O),t.limitRange(z)},t._cleanRange=function(z,O){O||(O={}),z||(z="range");var H=zi.nestedProperty(t,z).get(),V,W;if(t.type==="date"?W=zi.dfltRange(t.calendar):a==="y"?W=e2.DFLTRANGEY:t._name==="realaxis"?W=[0,1]:W=O.dfltRange||e2.DFLTRANGEX,W=W.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(W[0]=0),!H||H.length!==2){zi.nestedProperty(t,z).set(W);return}var K=H[0]===null,re=H[1]===null;for(t.type==="date"&&!t.autorange&&(H[0]=zi.cleanDate(H[0],Ru,t.calendar),H[1]=zi.cleanDate(H[1],Ru,t.calendar)),V=0;V<2;V++)if(t.type==="date"){if(!zi.isDateTime(H[V],t.calendar)){t[z]=W;break}if(t.r2l(H[0])===t.r2l(H[1])){var oe=zi.constrain(t.r2l(H[0]),zi.MIN_MS+1e3,zi.MAX_MS-1e3);H[0]=t.l2r(oe-1e3),H[1]=t.l2r(oe+1e3);break}}else{if(!Cf(H[V]))if(!(K||re)&&Cf(H[1-V]))H[V]=H[1-V]*(V?10:.1);else{t[z]=W;break}if(H[V]<-X_?H[V]=-X_:H[V]>X_&&(H[V]=X_),H[0]===H[1]){var ne=Math.max(1,Math.abs(H[0]*1e-6));H[0]-=ne,H[1]+=ne}}},t.setScale=function(z){var O=r._size;if(t.overlaying){var H=K_.getFromId({_fullLayout:r},t.overlaying);t.domain=H.domain}var V=z&&t._r?"_r":"range",W=t.calendar;t.cleanRange(V);var K=t.r2l(t[V][0],W),re=t.r2l(t[V][1],W),oe=a==="y";if(oe?(t._offset=O.t+(1-t.domain[1])*O.h,t._length=O.h*(t.domain[1]-t.domain[0]),t._m=t._length/(K-re),t._b=-t._m*re):(t._offset=O.l+t.domain[0]*O.w,t._length=O.w*(t.domain[1]-t.domain[0]),t._m=t._length/(re-K),t._b=-t._m*K),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var ne,he;if(t._rangebreaks=t.locateBreaks(Math.min(K,re),Math.max(K,re)),t._rangebreaks.length){for(ne=0;ne<t._rangebreaks.length;ne++)he=t._rangebreaks[ne],t._lBreaks+=Math.abs(he.max-he.min);var de=oe;K>re&&(de=!de),de&&t._rangebreaks.reverse();var Ee=de?-1:1;for(t._m2=Ee*t._length/(Math.abs(re-K)-t._lBreaks),t._B.push(-t._m2*(oe?re:K)),ne=0;ne<t._rangebreaks.length;ne++)he=t._rangebreaks[ne],t._B.push(t._B[t._B.length-1]-Ee*t._m2*(he.max-he.min));for(ne=0;ne<t._rangebreaks.length;ne++)he=t._rangebreaks[ne],he.pmin=E(he.min),he.pmax=E(he.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(z){var O=t.rangebreaks||[],H,V,W,K,re;O._cachedPatterns||(O._cachedPatterns=O.map(function(Me){return Me.enabled&&Me.bounds?zi.simpleMap(Me.bounds,Me.pattern?Rh:t.d2c):null})),O._cachedValues||(O._cachedValues=O.map(function(Me){return Me.enabled&&Me.values?zi.simpleMap(Me.values,t.d2c).sort(zi.sorterAsc):null}));for(var oe=0;oe<O.length;oe++){var ne=O[oe];if(ne.enabled){if(ne.bounds){var he=ne.pattern;switch(H=O._cachedPatterns[oe],V=H[0],W=H[1],he){case $_:re=new Date(z),K=re.getUTCDay(),V>W&&(W+=7,K<V&&(K+=7));break;case Q_:re=new Date(z);var de=re.getUTCHours(),Ee=re.getUTCMinutes(),ke=re.getUTCSeconds(),Te=re.getUTCMilliseconds();K=de+(Ee/60+ke/3600+Te/36e5),V>W&&(W+=24,K<V&&(K+=24));break;case"":K=z;break}if(K>=V&&K<W)return Ru}else for(var ye=O._cachedValues[oe],Ae=0;Ae<ye.length;Ae++)if(V=ye[Ae],W=V+ne.dvalue,z>=V&&z<W)return Ru}}return z},t.locateBreaks=function(z,O){var H,V,W,K,re=[];if(!t.rangebreaks)return re;var oe=t.rangebreaks.slice().sort(function(at,pt){return at.pattern===$_&&pt.pattern===Q_?-1:pt.pattern===$_&&at.pattern===Q_?1:0}),ne=function(at,pt){if(at=zi.constrain(at,z,O),pt=zi.constrain(pt,z,O),at!==pt){for(var lt=!0,ut=0;ut<re.length;ut++){var Ye=re[ut];at<Ye.max&&pt>=Ye.min&&(at<Ye.min&&(Ye.min=at),pt>Ye.max&&(Ye.max=pt),lt=!1)}lt&&re.push({min:at,max:pt})}};for(H=0;H<oe.length;H++){var he=oe[H];if(he.enabled)if(he.bounds){var de=z,Ee=O;he.pattern&&(de=Math.floor(de)),V=zi.simpleMap(he.bounds,he.pattern?Rh:t.r2l),W=V[0],K=V[1];var ke=new Date(de),Te,ye;switch(he.pattern){case $_:ye=Lee,Te=((K<W?7:0)+(K-W))*j_,de+=W*j_-(ke.getUTCDay()*j_+ke.getUTCHours()*J_+ke.getUTCMinutes()*WE+ke.getUTCSeconds()*XE+ke.getUTCMilliseconds());break;case Q_:ye=j_,Te=((K<W?24:0)+(K-W))*J_,de+=W*J_-(ke.getUTCHours()*J_+ke.getUTCMinutes()*WE+ke.getUTCSeconds()*XE+ke.getUTCMilliseconds());break;default:de=Math.min(V[0],V[1]),Ee=Math.max(V[0],V[1]),ye=Ee-de,Te=ye}for(var Ae=de;Ae<Ee;Ae+=ye)ne(Ae,Ae+Te)}else for(var Me=zi.simpleMap(he.values,t.d2c),De=0;De<Me.length;De++)W=Me[De],K=W+he.dvalue,ne(W,K)}return re.sort(function(at,pt){return at.min-pt.min}),re},t.makeCalcdata=function(z,O,H){var V,W,K,re,oe=t.type,ne=oe==="date"&&z[O+"calendar"];if(O in z){if(V=z[O],re=z._length||zi.minRowLength(V),zi.isTypedArray(V)&&(oe==="linear"||oe==="log")){if(re===V.length)return V;if(V.subarray)return V.subarray(0,re)}if(oe==="multicategory")return m(V,re);for(W=new Array(re),K=0;K<re;K++)W[K]=t.d2c(V[K],0,ne,H)}else{var he=O+"0"in z?t.d2c(z[O+"0"],0,ne):0,de=z["d"+O]?Number(z["d"+O]):1;for(V=z[{x:"y",y:"x"}[O]],re=z._length||V.length,W=new Array(re),K=0;K<re;K++)W[K]=he+K*de}if(t.rangebreaks)for(K=0;K<re;K++)W[K]=t.maskBreaks(W[K]);return W},t.isValidRange=function(z,O){return Array.isArray(z)&&z.length===2&&(O&&z[0]===null||Cf(t.r2l(z[0])))&&(O&&z[1]===null||Cf(t.r2l(z[1])))},t.getAutorangeDflt=function(z,O){var H=!t.isValidRange(z,"nullOk");return H&&O&&O.reverseDflt?H="reversed":z&&(z[0]===null&&z[1]===null?H=!0:z[0]===null&&z[1]!==null?H="min":z[0]!==null&&z[1]===null&&(H="max")),H},t.isReversed=function(){var z=t.autorange;return z==="reversed"||z==="min reversed"||z==="max reversed"},t.isPtWithinRange=function(z,O){var H=t.c2l(z[a],null,O),V=t.r2l(t.range[0]),W=t.r2l(t.range[1]);return V<W?V<=H&&H<=W:W<=H&&H<=V},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var z=t._matchGroup;if(z){var O=null,H=null;for(var V in z){var W=r[K_.id2name(V)];if(W._categories){O=W._categories,H=W._categoriesMap;break}}O&&H?(t._categories=O,t._categoriesMap=H):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var K=0;K<t._initialCategories.length;K++)v(t._initialCategories[K])},t.sortByInitialCategories=function(){var z=[];if(t._emptyCategories(),t._initialCategories)for(var O=0;O<t._initialCategories.length;O++)v(t._initialCategories[O]);z=z.concat(t._traceIndices);var H=t._matchGroup;for(var V in H)if(i!==V){var W=r[K_.id2name(V)];W._categories=t._categories,W._categoriesMap=t._categoriesMap,z=z.concat(W._traceIndices)}return z};var B=r._d3locale;t.type==="date"&&(t._dateFormat=B?B.timeFormat:See,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=B?B.numberFormat:kee,delete t._minDtick,delete t._forceTick0}});var y5=ve((Yge,$E)=>{"use strict";var JE=Da(),m5=Ft(),Pee=Hi().BADNUM,r2=m5.isArrayOrTypedArray,Dee=m5.isDateTime,zee=m5.cleanNumber,KE=Math.round;$E.exports=function(t,r,i){var a=t,s=i.noMultiCategory;if(r2(a)&&!a.length)return"-";if(!s&&Nee(a))return"multicategory";if(s&&Array.isArray(a[0])){for(var l=[],f=0;f<a.length;f++)if(r2(a[f]))for(var h=0;h<a[f].length;h++)l.push(a[f][h]);a=l}if(Fee(a,r))return"date";var v=i.autotypenumbers!=="strict";return qee(a,v)?"category":Ree(a,v)?"linear":"-"};function Iee(e,t){return t?JE(e):typeof e=="number"}function Ree(e,t){for(var r=e.length,i=0;i<r;i++)if(Iee(e[i],t))return!0;return!1}function Fee(e,t){for(var r=e.length,i=QE(r),a=0,s=0,l={},f=0;f<r;f+=i){var h=KE(f),v=e[h],m=String(v);l[m]||(l[m]=1,Dee(v,t)&&a++,JE(v)&&s++)}return a>s*2}function QE(e){return Math.max(1,(e-1)/1e3)}function qee(e,t){for(var r=e.length,i=QE(r),a=0,s=0,l={},f=0;f<r;f+=i){var h=KE(f),v=e[h],m=String(v);if(!l[m]){l[m]=1;var b=typeof v;b==="boolean"?s++:(t?zee(v)!==Pee:b==="number")?a++:b==="string"&&s++}}return s>a*2}function Nee(e){return r2(e[0])&&r2(e[1])}});var Zy=ve((Wge,sL)=>{"use strict";var Bee=ja(),aL=Da(),qh=Ft(),a2=Hi().FP_SAFE,Oee=la(),Uee=_i(),iL=$n(),Vee=iL.getFromId,Hee=iL.isLinked;sL.exports={applyAutorangeOptions:oL,getAutoRange:g5,makePadFn:_5,doAutoRange:Zee,findExtremes:Yee,concatExtremes:w5};function g5(e,t){var r,i,a=[],s=e._fullLayout,l=_5(s,t,0),f=_5(s,t,1),h=w5(e,t),v=h.min,m=h.max;if(v.length===0||m.length===0)return qh.simpleMap(t.range,t.r2l);var b=v[0].val,T=m[0].val;for(r=1;r<v.length&&b===T;r++)b=Math.min(b,v[r].val);for(r=1;r<m.length&&b===T;r++)T=Math.max(T,m[r].val);var S=t.autorange,C=S==="reversed"||S==="min reversed"||S==="max reversed";if(!C&&t.range){var P=qh.simpleMap(t.range,t.r2l);C=P[1]<P[0]}t.autorange==="reversed"&&(t.autorange=!0);var E=t.rangemode,I=E==="tozero",q=E==="nonnegative",B=t._length,z=B/10,O=0,H,V,W,K,re,oe;for(r=0;r<v.length;r++)for(H=v[r],i=0;i<m.length;i++)V=m[i],oe=V.val-H.val-eL(t,H.val,V.val),oe>0&&(re=B-l(H)-f(V),re>z?oe/re>O&&(W=H,K=V,O=oe/re):oe/B>O&&(W={val:H.val,nopad:1},K={val:V.val,nopad:1},O=oe/B));function ne(Te,ye){return Math.max(Te,f(ye))}if(b===T){var he=b-1,de=b+1;if(I)if(b===0)a=[0,1];else{var Ee=(b>0?m:v).reduce(ne,0),ke=b/(1-Math.min(.5,Ee/B));a=b>0?[0,ke]:[ke,0]}else q?a=[Math.max(0,he),Math.max(1,de)]:a=[he,de]}else I?(W.val>=0&&(W={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):q&&(W.val-O*l(W)<0&&(W={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),O=(K.val-W.val-eL(t,H.val,V.val))/(B-l(W)-f(K)),a=[W.val-O*l(W),K.val+O*f(K)];return a=oL(a,t),t.limitRange&&t.limitRange(),C&&a.reverse(),qh.simpleMap(a,t.l2r||Number)}function eL(e,t,r){var i=0;if(e.rangebreaks)for(var a=e.locateBreaks(t,r),s=0;s<a.length;s++){var l=a[s];i+=l.max-l.min}return i}function _5(e,t,r){var i=.05*t._length,a=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(a.ticklabelposition||"").indexOf("inside")!==-1){var s=t.isReversed();if(!s){var l=qh.simpleMap(t.range,t.r2l);s=l[1]<l[0]}s&&(r=!r)}var f=0;return Hee(e,t._id)||(f=Gee(e,t,r)),i=Math.max(f,i),t.constrain==="domain"&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(v){return v.nopad?0:v.pad+(v.extrapad?i:f)}}var tL=3;function Gee(e,t,r){var i=0,a=t._id.charAt(0)==="x";for(var s in e._plots){var l=e._plots[s];if(!(t._id!==l.xaxis._id&&t._id!==l.yaxis._id)){var f=(a?l.yaxis:l.xaxis)||{};if((f.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(f.side==="left"||f.side==="bottom")||r&&(f.side==="top"||f.side==="right"))){if(f._vals){var h=qh.deg2rad(f._tickAngles[f._id+"tick"]||0),v=Math.abs(Math.cos(h)),m=Math.abs(Math.sin(h));if(!f._vals[0].bb){var b=f._id+"tick",T=f._selections[b];T.each(function(q){var B=Bee.select(this),z=B.select(".text-math-group");z.empty()&&(q.bb=Uee.bBox(B.node()))})}for(var S=0;S<f._vals.length;S++){var C=f._vals[S],P=C.bb;if(P){var E=2*tL+P.width,I=2*tL+P.height;i=Math.max(i,a?Math.max(E*v,I*m):Math.max(I*v,E*m))}}}f.ticks==="inside"&&f.ticklabelposition==="inside"&&(i+=f.ticklen||0)}}}return i}function w5(e,t,r){var i=t._id,a=e._fullData,s=e._fullLayout,l=[],f=[],h,v,m;function b(E,I){for(h=0;h<I.length;h++){var q=E[I[h]],B=(q._extremes||{})[i];if(q.visible===!0&&B){for(v=0;v<B.min.length;v++)m=B.min[v],x5(l,m.val,m.pad,{extrapad:m.extrapad});for(v=0;v<B.max.length;v++)m=B.max[v],b5(f,m.val,m.pad,{extrapad:m.extrapad})}}}if(b(a,t._traceIndices),b(s.annotations||[],t._annIndices||[]),b(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var T in t._matchGroup)if(T!==t._id){var S=Vee(e,T),C=w5(e,S,!0),P=t._length/S._length;for(v=0;v<C.min.length;v++)m=C.min[v],x5(l,m.val,m.pad*P,{extrapad:m.extrapad});for(v=0;v<C.max.length;v++)m=C.max[v],b5(f,m.val,m.pad*P,{extrapad:m.extrapad})}}return{min:l,max:f}}function Zee(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():g5(e,t),t._r=t.range.slice(),t._rl=qh.simpleMap(t._r,t.r2l);var i=t._input,a={};a[t._attr+".range"]=t.range,a[t._attr+".autorange"]=t.autorange,Oee.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a),i.range=t.range.slice(),i.autorange=t.autorange}var s=t._anchorAxis;if(s&&s.rangeslider){var l=s.rangeslider[t._name];l&&l.rangemode==="auto"&&(l.range=g5(e,t)),s._input.rangeslider[t._name]=qh.extendFlat({},l)}}function Yee(e,t,r){r||(r={}),e._m||e.setScale();var i=[],a=[],s=t.length,l=r.padded||!1,f=r.tozero&&(e.type==="linear"||e.type==="-"),h=e.type==="log",v=!1,m=r.vpadLinearized||!1,b,T,S,C,P,E,I,q,B;function z(ne){if(Array.isArray(ne))return v=!0,function(de){return Math.max(Number(ne[de]||0),0)};var he=Math.max(Number(ne||0),0);return function(){return he}}var O=z((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),H=z((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),V=z(r.vpadplus||r.vpad),W=z(r.vpadminus||r.vpad);if(!v){if(q=1/0,B=-1/0,h)for(b=0;b<s;b++)T=t[b],T<q&&T>0&&(q=T),T>B&&T<a2&&(B=T);else for(b=0;b<s;b++)T=t[b],T<q&&T>-a2&&(q=T),T>B&&T<a2&&(B=T);t=[q,B],s=2}var K={tozero:f,extrapad:l};function re(ne){S=t[ne],aL(S)&&(E=O(ne),I=H(ne),m?(C=e.c2l(S)-W(ne),P=e.c2l(S)+V(ne)):(q=S-W(ne),B=S+V(ne),h&&q<B/10&&(q=B/10),C=e.c2l(q),P=e.c2l(B)),f&&(C=Math.min(0,C),P=Math.max(0,P)),rL(C)&&x5(i,C,I,K),rL(P)&&b5(a,P,E,K))}var oe=Math.min(6,s);for(b=0;b<oe;b++)re(b);for(b=s-1;b>=oe;b--)re(b);return{min:i,max:a,opts:r}}function x5(e,t,r,i){nL(e,t,r,i,Wee)}function b5(e,t,r,i){nL(e,t,r,i,Xee)}function nL(e,t,r,i,a){for(var s=i.tozero,l=i.extrapad,f=!0,h=0;h<e.length&&f;h++){var v=e[h];if(a(v.val,t)&&v.pad>=r&&(v.extrapad||!l)){f=!1;break}else a(t,v.val)&&v.pad<=r&&(l||!v.extrapad)&&(e.splice(h,1),h--)}if(f){var m=s&&t===0;e.push({val:t,pad:m?0:r,extrapad:m?!1:l})}}function rL(e){return aL(e)&&Math.abs(e)<a2}function Wee(e,t){return e<=t}function Xee(e,t){return e>=t}function jee(e,t){var r=t.autorangeoptions;return r&&r.minallowed!==void 0&&i2(t,r.minallowed,r.maxallowed)?r.minallowed:r&&r.clipmin!==void 0&&i2(t,r.clipmin,r.clipmax)?Math.max(e,t.d2l(r.clipmin)):e}function Jee(e,t){var r=t.autorangeoptions;return r&&r.maxallowed!==void 0&&i2(t,r.minallowed,r.maxallowed)?r.maxallowed:r&&r.clipmax!==void 0&&i2(t,r.clipmin,r.clipmax)?Math.min(e,t.d2l(r.clipmax)):e}function i2(e,t,r){return t!==void 0&&r!==void 0?(t=e.d2l(t),r=e.d2l(r),t<r):!0}function oL(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0],i=e[1],a=t.autorangeoptions.include;if(a!==void 0){var s=t.d2l(r),l=t.d2l(i);qh.isArrayOrTypedArray(a)||(a=[a]);for(var f=0;f<a.length;f++){var h=t.d2l(a[f]);s>=h&&(s=h,r=h),l<=h&&(l=h,i=h)}}return r=jee(r,t),i=Jee(i,t),[r,i]}});var Yi=ve((Xge,EL)=>{"use strict";var Wl=ja(),qn=Da(),z0=eo(),Wy=la(),ta=Ft(),I0=ta.strTranslate,yd=co(),Kee=Hy(),Xy=Ua(),ol=_i(),Qee=Iu(),lL=Bw(),So=Hi(),$ee=So.ONEMAXYEAR,s2=So.ONEAVGYEAR,l2=So.ONEMINYEAR,ete=So.ONEMAXQUARTER,S5=So.ONEAVGQUARTER,u2=So.ONEMINQUARTER,tte=So.ONEMAXMONTH,R0=So.ONEAVGMONTH,f2=So.ONEMINMONTH,sl=So.ONEWEEK,as=So.ONEDAY,Nh=as/2,Pf=So.ONEHOUR,jy=So.ONEMIN,c2=So.ONESEC,rte=So.ONEMILLI,ate=So.ONEMICROSEC,gd=So.MINUS_SIGN,d2=So.BADNUM,k5={K:"zeroline"},C5={K:"gridline",L:"path"},E5={K:"minor-gridline",L:"path"},_L={K:"tick",L:"path"},uL={K:"tick",L:"text"},fL={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},p2=ts(),Yy=p2.MID_SHIFT,_d=p2.CAP_SHIFT,Jy=p2.LINE_SPACING,ite=p2.OPPOSITE_SIDE,h2=3,jt=EL.exports={};jt.setConvert=t2();var nte=y5(),bc=$n(),ote=bc.idSort,ste=bc.isLinked;jt.id2name=bc.id2name;jt.name2id=bc.name2id;jt.cleanId=bc.cleanId;jt.list=bc.list;jt.listIds=bc.listIds;jt.getFromId=bc.getFromId;jt.getFromTrace=bc.getFromTrace;var xL=Zy();jt.getAutoRange=xL.getAutoRange;jt.findExtremes=xL.findExtremes;var lte=1e-4;function z5(e){var t=(e[1]-e[0])*lte;return[e[0]-t,e[1]+t]}jt.coerceRef=function(e,t,r,i,a,s){var l=i.charAt(i.length-1),f=r._fullLayout._subplots[l+"axis"],h=i+"ref",v={};return a||(a=f[0]||(typeof s=="string"?s:s[0])),s||(s=a),f=f.concat(f.map(function(m){return m+" domain"})),v[h]={valType:"enumerated",values:f.concat(s?typeof s=="string"?[s]:s:[]),dflt:a},ta.coerce(e,t,v,h)};jt.getRefType=function(e){return e===void 0?e:e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};jt.coercePosition=function(e,t,r,i,a,s){var l,f,h=jt.getRefType(i);if(h!=="range")l=ta.ensureNumber,f=r(a,s);else{var v=jt.getFromId(t,i);s=v.fraction2r(s),f=r(a,s),l=v.cleanPos}e[a]=l(f)};jt.cleanPosition=function(e,t,r){var i=r==="paper"||r==="pixel"?ta.ensureNumber:jt.getFromId(t,r).cleanPos;return i(e)};jt.redrawComponents=function(e,t){t=t||jt.listIds(e);var r=e._fullLayout;function i(a,s,l,f){for(var h=Wy.getComponentMethod(a,s),v={},m=0;m<t.length;m++)for(var b=r[jt.id2name(t[m])],T=b[l],S=0;S<T.length;S++){var C=T[S];if(!v[C]&&(h(e,C),v[C]=1,f))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0),i("selections","drawOne","_selectionIndices")};var ute=jt.getDataConversions=function(e,t,r,i){var a,s=r==="x"||r==="y"||r==="z"?r:i;if(ta.isArrayOrTypedArray(s)){if(a={type:nte(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},jt.setConvert(a),a.type==="category")for(var l=0;l<i.length;l++)a.d2c(i[l])}else a=jt.getFromTrace(e,t,s);return a?{d2c:a.d2c,c2d:a.c2d}:s==="ids"?{d2c:hL,c2d:hL}:{d2c:cL,c2d:cL}};function cL(e){return+e}function hL(e){return String(e)}jt.getDataToCoordFunc=function(e,t,r,i){return ute(e,t,r,i).d2c};jt.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};jt.minDtick=function(e,t,r,i){["log","category","multicategory"].indexOf(e.type)!==-1||!i?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};jt.saveRangeInitial=function(e,t){for(var r=jt.list(e,"",!0),i=!1,a=0;a<r.length;a++){var s=r[a],l=s._rangeInitial0===void 0&&s._rangeInitial1===void 0,f=l||s.range[0]!==s._rangeInitial0||s.range[1]!==s._rangeInitial1,h=s.autorange;(l&&h!==!0||t&&f)&&(s._rangeInitial0=h==="min"||h==="max reversed"?void 0:s.range[0],s._rangeInitial1=h==="max"||h==="min reversed"?void 0:s.range[1],s._autorangeInitial=h,i=!0)}return i};jt.saveShowSpikeInitial=function(e,t){for(var r=jt.list(e,"",!0),i=!1,a="on",s=0;s<r.length;s++){var l=r[s],f=l._showSpikeInitial===void 0,h=f||l.showspikes!==l._showspikes;(f||t&&h)&&(l._showSpikeInitial=l.showspikes,i=!0),a==="on"&&!l.showspikes&&(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,i};jt.autoBin=function(e,t,r,i,a,s){var l=ta.aggNums(Math.min,null,e),f=ta.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:l-.5,end:f+.5,size:Math.max(1,Math.round(s)||1),_dataSpan:f-l};a||(a=t.calendar);var h;if(t.type==="log"?h={type:"linear",range:[l,f]}:h={type:t.type,range:ta.simpleMap([l,f],t.c2r,0,a),calendar:a},jt.setConvert(h),s=s&&lL.dtick(s,h.type),s)h.dtick=s,h.tick0=lL.tick0(void 0,h.type,a);else{var v;if(r)v=(f-l)/r;else{var m=ta.distinctVals(e),b=Math.pow(10,Math.floor(Math.log(m.minDiff)/Math.LN10)),T=b*ta.roundUp(m.minDiff/b,[.9,1.9,4.9,9.9],!0);v=Math.max(T,2*ta.stdev(e)/Math.pow(e.length,i?.25:.4)),qn(v)||(v=1)}jt.autoTicks(h,v)}var S=h.dtick,C=jt.tickIncrement(jt.tickFirst(h),S,"reverse",a),P,E;if(typeof S=="number")C=fte(C,e,h,l,f),E=1+Math.floor((f-C)/S),P=C+E*S;else for(h.dtick.charAt(0)==="M"&&(C=cte(C,e,S,l,a)),P=C,E=0;P<=f;)P=jt.tickIncrement(P,S,!1,a),E++;return{start:t.c2r(C,0,a),end:t.c2r(P,0,a),size:S,_dataSpan:f-l}};function fte(e,t,r,i,a){var s=0,l=0,f=0,h=0;function v(S){return(1+(S-e)*100/r.dtick)%100<2}for(var m=0;m<t.length;m++)t[m]%1===0?f++:qn(t[m])||h++,v(t[m])&&s++,v(t[m]+r.dtick/2)&&l++;var b=t.length-h;if(f===b&&r.type!=="date")r.dtick<1?e=i-.5*r.dtick:(e-=.5,e+r.dtick<i&&(e+=r.dtick));else if(l<b*.1&&(s>b*.3||v(i)||v(a))){var T=r.dtick/2;e+=e+T<i?T:-T}return e}function cte(e,t,r,i,a){var s=ta.findExactDates(t,a),l=.8;if(s.exactDays>l){var f=Number(r.substr(1));s.exactYears>l&&f%12===0?e=jt.tickIncrement(e,"M6","reverse")+as*1.5:s.exactMonths>l?e=jt.tickIncrement(e,"M1","reverse")+as*15.5:e-=Nh;var h=jt.tickIncrement(e,r);if(h<=i)return h}return e}jt.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var i=t.dtick&&qn(t._tmin),a;if(i){var s=jt.tickIncrement(t._tmin,t.dtick,!0);a=[t._tmin,s*.99+t._tmin*.01]}else{var l=ta.simpleMap(t.range,t.r2l);a=[l[0],.8*l[0]+.2*l[1]]}if(e.range=ta.simpleMap(a,t.l2r),e._isMinor=!0,jt.prepTicks(e,r),i){var f=qn(t.dtick),h=qn(e.dtick),v=f?t.dtick:+t.dtick.substring(1),m=h?e.dtick:+e.dtick.substring(1);f&&h?T5(v,m)?v===2*sl&&m===2*as&&(e.dtick=sl):v===2*sl&&m===3*as?e.dtick=sl:v===sl&&!(t._input.minor||{}).nticks?e.dtick=as:vL(v/m,2.5)?e.dtick=v/2:e.dtick=v:String(t.dtick).charAt(0)==="M"?h?e.dtick="M1":T5(v,m)?v>=12&&m===2&&(e.dtick="M3"):e.dtick=t.dtick:String(e.dtick).charAt(0)==="L"?String(t.dtick).charAt(0)==="L"?T5(v,m)||(e.dtick=vL(v/m,2.5)?t.dtick/2:t.dtick):e.dtick="D1":e.dtick==="D2"&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}t.minor._tick0Init===void 0&&(e.tick0=t.tick0)};function T5(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function vL(e,t){return Math.abs(e/t-1)<.001}jt.prepTicks=function(e,t){var r=ta.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e.tickmode==="auto"||!e.dtick){var i=e.nticks,a;i||(e.type==="category"||e.type==="multicategory"?(a=e.tickfont?ta.bigFont(e.tickfont.size||12):15,i=e._length/a):(a=e._id.charAt(0)==="y"?40:80,i=ta.constrain(e._length/a,4,9)+1),e._name==="radialaxis"&&(i*=2)),e.minor&&e.minor.tickmode!=="array"||e.tickmode==="array"&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,jt.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&hte(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),AL(e)};function A5(e){return+e.substring(1)}function hte(e){var t;function r(){return!(qn(e.dtick)||e.dtick.charAt(0)!=="M")}var i=r(),a=jt.getTickFormat(e);if(a){var s=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(t=Pf,s&&!i&&e.dtick<Pf&&(e.dtick=Pf)):/%p/.test(a)?(t=Nh,s&&!i&&e.dtick<Nh&&(e.dtick=Nh)):/%[Aadejuwx]/.test(a)?(t=as,s&&!i&&e.dtick<as&&(e.dtick=as)):/%[UVW]/.test(a)?(t=sl,s&&!i&&e.dtick<sl&&(e.dtick=sl)):/%[Bbm]/.test(a)?(t=R0,s&&(i?A5(e.dtick)<1:e.dtick<f2)&&(e.dtick="M1")):/%[q]/.test(a)?(t=S5,s&&(i?A5(e.dtick)<3:e.dtick<u2)&&(e.dtick="M3")):/%[Yy]/.test(a)&&(t=s2,s&&(i?A5(e.dtick)<12:e.dtick<l2)&&(e.dtick="M12")))}i=r(),i&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function vte(e,t,r){for(var i=0;i<e.length;i++){var a=e[i].value,s=i,l=i+1;i<e.length-1?(s=i,l=i+1):i>0?(s=i-1,l=i):(s=i,l=i);var f=e[s].value,h=e[l].value,v=Math.abs(h-f),m=r||v,b=0;m>=l2?v>=l2&&v<=$ee?b=v:b=s2:r===S5&&m>=u2?v>=u2&&v<=ete?b=v:b=S5:m>=f2?v>=f2&&v<=tte?b=v:b=R0:r===sl&&m>=sl?b=sl:m>=as?b=as:r===Nh&&m>=Nh?b=Nh:r===Pf&&m>=Pf&&(b=Pf);var T;b>=v&&(b=v,T=!0);var S=a+b;if(t.rangebreaks&&b>0){for(var C=84,P=0,E=0;E<C;E++){var I=(E+.5)/C;t.maskBreaks(a*(1-I)+I*S)!==d2&&P++}b*=P/C,b||(e[i].drop=!0),T&&v>sl&&(b=v)}(b>0||i===0)&&(e[i].periodX=a+b/2)}}jt.calcTicks=function(t,r){for(var i=t.type,a=t.calendar,s=t.ticklabelstep,l=t.ticklabelmode==="period",f=t.range[0]>t.range[1],h=!t.ticklabelindex||ta.isArrayOrTypedArray(t.ticklabelindex)?t.ticklabelindex:[t.ticklabelindex],v=ta.simpleMap(t.range,t.r2l,void 0,void 0,r),m=v[1]<v[0],b=Math.min(v[0],v[1]),T=Math.max(v[0],v[1]),S=Math.max(1e3,t._length||0),C=[],P=[],E=[],I=[],q=[],B=t.minor&&(t.minor.ticks||t.minor.showgrid),z=1;z>=(B?0:1);z--){var O=!z;z?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var H=z?t:ta.extendFlat({},t,t.minor);if(O?jt.prepMinorTicks(H,t,r):jt.prepTicks(H,r),H.tickmode==="array"){z?(E=[],C=dL(t,!O)):(I=[],P=dL(t,!O));continue}if(H.tickmode==="sync"){E=[],C=dte(t);continue}var V=z5(v),W=V[0],K=V[1],re=qn(H.dtick),oe=i==="log"&&!(re||H.dtick.charAt(0)==="L"),ne=jt.tickFirst(H,r);if(z){if(t._tmin=ne,ne<W!==m)break;(i==="category"||i==="multicategory")&&(K=m?Math.max(-.5,K):Math.min(t._categories.length-.5,K))}var he=null,de=ne,Ee;if(z){var ke;re?ke=t.dtick:i==="date"?typeof t.dtick=="string"&&t.dtick.charAt(0)==="M"&&(ke=R0*t.dtick.substring(1)):ke=t._roughDTick,Ee=Math.round((t.r2l(de)-t.r2l(t.tick0))/ke)-1}var Te=H.dtick;for(H.rangebreaks&&H._tick0Init!==H.tick0&&(de=M5(de,t),m||(de=jt.tickIncrement(de,Te,!m,a))),z&&l&&(de=jt.tickIncrement(de,Te,!m,a),Ee--);m?de>=K:de<=K;de=jt.tickIncrement(de,Te,m,a)){if(z&&Ee++,H.rangebreaks&&!m){if(de<W)continue;if(H.maskBreaks(de)===d2&&M5(de,H)>=T)break}if(E.length>S||de===he)break;he=de;var ye={value:de};z?(oe&&de!==(de|0)&&(ye.simpleLabel=!0),s>1&&Ee%s&&(ye.skipLabel=!0),E.push(ye)):(ye.minor=!0,I.push(ye))}}if(!I||I.length<2)h=!1;else{var Ae=(I[1].value-I[0].value)*(f?-1:1);Nte(Ae,t.tickformat)||(h=!1)}if(!h)q=E;else{var Me=E.concat(I);l&&E.length&&(Me=Me.slice(1)),Me=Me.sort(function(Ht,ar){return Ht.value-ar.value}).filter(function(Ht,ar,kt){return ar===0||Ht.value!==kt[ar-1].value});var De=Me.map(function(Ht,ar){return Ht.minor===void 0&&!Ht.skipLabel?ar:null}).filter(function(Ht){return Ht!==null});De.forEach(function(Ht){h.map(function(ar){var kt=Ht+ar;kt>=0&&kt<Me.length&&ta.pushUnique(q,Me[kt])})})}if(B){var at=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!at){for(var pt=E.map(function(Ht){return Ht.value}),lt=[],ut=0;ut<I.length;ut++){var Ye=I[ut],xt=Ye.value;if(pt.indexOf(xt)===-1){for(var rt=!1,Tt=0;!rt&&Tt<E.length;Tt++)1e7+E[Tt].value===1e7+xt&&(rt=!0);rt||lt.push(Ye)}}I=lt}}l&&vte(q,t,t._definedDelta);var St;if(t.rangebreaks){var mt=t._id.charAt(0)==="y",ge=1;t.tickmode==="auto"&&(ge=t.tickfont?t.tickfont.size:12);var Re=NaN;for(St=E.length-1;St>-1;St--){if(E[St].drop){E.splice(St,1);continue}E[St].value=M5(E[St].value,t);var xe=t.c2p(E[St].value);(mt?Re>xe-ge:Re<xe+ge)?E.splice(m?St+1:St,1):Re=xe}}F5(t)&&Math.abs(v[1]-v[0])===360&&E.pop(),t._tmax=(E[E.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var et,ht=function(Ht){Ht.text="",t._prevDateHead=et};E=E.concat(I);function tt(Ht,ar){var kt=jt.tickText(Ht,ar.value,!1,ar.simpleLabel),zt=ar.periodX;return zt!==void 0&&(kt.periodX=zt,(zt>T||zt<b)&&(zt>T&&(kt.periodX=T),zt<b&&(kt.periodX=b),ht(kt))),kt}var Rt;for(St=0;St<E.length;St++){var qt=E[St].minor,Jt=E[St].value;qt?(h&&q.indexOf(E[St])!==-1?Rt=tt(t,E[St]):Rt={x:Jt},Rt.minor=!0,P.push(Rt)):(et=t._prevDateHead,Rt=tt(t,E[St]),(E[St].skipLabel||h&&q.indexOf(E[St])===-1)&&ht(Rt),C.push(Rt))}return C=C.concat(P),t._inCalcTicks=!1,l&&C.length&&(C[0].noTick=!0),C};function bL(e,t){return e.rangebreaks&&(t=t.filter(function(r){return e.maskBreaks(r.x)!==d2})),t}function dte(e){var t=e._mainAxis,r=[];if(t._vals){for(var i=0;i<t._vals.length;i++)if(!t._vals[i].noTick){var a=t.l2p(t._vals[i].x),s=e.p2l(a),l=jt.tickText(e,s);t._vals[i].minor&&(l.minor=!0,l.text=""),r.push(l)}}return r=bL(e,r),r}function dL(e,t){var r=ta.simpleMap(e.range,e.r2l),i=z5(r),a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]),l=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var f=[],h=0;h<=1;h++)if(!(t!==void 0&&(t&&h||t===!1&&!h))&&!(h&&!e.minor)){var v=h?e.minor.tickvals:e.tickvals,m=h?[]:e.ticktext;if(v){ta.isArrayOrTypedArray(m)||(m=[]);for(var b=0;b<v.length;b++){var T=l(v[b]);if(T>a&&T<s){var S=jt.tickText(e,T,!1,String(m[b]));h&&(S.minor=!0,S.text=""),f.push(S)}}}}return f=bL(e,f),f}var n2=[2,5,10],pL=[1,2,3,6,12],mL=[1,2,5,10,15,30],pte=[1,2,3,7,14],wL=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],TL=[-.301,0,.301,.699,1],mte=[15,30,45,90,180];function Lf(e,t,r){return t*ta.roundUp(e/t,r)}jt.autoTicks=function(e,t,r){var i;function a(b){return Math.pow(b,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=ta.dateTick0(e.calendar,0);var s=2*t;if(s>s2)t/=s2,i=a(10),e.dtick="M"+12*Lf(t,i,n2);else if(s>R0)t/=R0,e.dtick="M"+Lf(t,1,pL);else if(s>as){if(e.dtick=Lf(t,as,e._hasDayOfWeekBreaks?[1,2,7,14]:pte),!r){var l=jt.getTickFormat(e),f=e.ticklabelmode==="period";f&&(e._rawTick0=e.tick0),/%[uVW]/.test(l)?e.tick0=ta.dateTick0(e.calendar,2):e.tick0=ta.dateTick0(e.calendar,1),f&&(e._dowTick0=e.tick0)}}else s>Pf?e.dtick=Lf(t,Pf,pL):s>jy?e.dtick=Lf(t,jy,mL):s>c2?e.dtick=Lf(t,c2,mL):(i=a(10),e.dtick=Lf(t,i,n2))}else if(e.type==="log"){e.tick0=0;var h=ta.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(h[1]-h[0])<1){var v=1.5*Math.abs((h[1]-h[0])/t);t=Math.abs(Math.pow(10,h[1])-Math.pow(10,h[0]))/v,i=a(10),e.dtick="L"+Lf(t,i,n2)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):F5(e)?(e.tick0=0,i=1,e.dtick=Lf(t,i,mte)):(e.tick0=0,i=a(10),e.dtick=Lf(t,i,n2));if(e.dtick===0&&(e.dtick=1),!qn(e.dtick)&&typeof e.dtick!="string"){var m=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(m)}};function AL(e){var t=e.dtick;if(e._tickexponent=0,!qn(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),i=e.l2r(r).replace(/(^-|i)/g,""),a=i.length;if(String(t).charAt(0)==="M")a>10||i.substr(5)!=="01-01"?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=as&&a<=10||t>=as*15)e._tickround="d";else if(t>=jy&&a<=16||t>=Pf)e._tickround="M";else if(t>=c2&&a<=19||t>=jy)e._tickround="S";else{var s=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(a,s)-20,e._tickround<0&&(e._tickround=4)}}else if(qn(t)||t.charAt(0)==="L"){var l=e.range.map(e.r2d||Number);qn(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var f=Math.max(Math.abs(l[0]),Math.abs(l[1])),h=Math.floor(Math.log(f)/Math.LN10+.01),v=e.minexponent===void 0?3:e.minexponent;Math.abs(h)>v&&(v2(e.exponentformat)&&!I5(h)?e._tickexponent=3*Math.round((h-1)/3):e._tickexponent=h)}else e._tickround=null}jt.tickIncrement=function(e,t,r,i){var a=r?-1:1;if(qn(t))return ta.increment(e,a*t);var s=t.charAt(0),l=a*Number(t.substr(1));if(s==="M")return ta.incrementMonth(e,l,i);if(s==="L")return Math.log(Math.pow(10,e)+l)/Math.LN10;if(s==="D"){var f=t==="D2"?TL:wL,h=e+a*.01,v=ta.roundUp(ta.mod(h,1),f,r);return Math.floor(h)+Math.log(Wl.round(Math.pow(10,v),1))/Math.LN10}throw"unrecognized dtick "+String(t)};jt.tickFirst=function(e,t){var r=e.r2l||Number,i=ta.simpleMap(e.range,r,void 0,void 0,t),a=i[1]<i[0],s=a?Math.floor:Math.ceil,l=z5(i)[0],f=e.dtick,h=r(e.tick0);if(qn(f)){var v=s((l-h)/f)*f+h;return(e.type==="category"||e.type==="multicategory")&&(v=ta.constrain(v,0,e._categories.length-1)),v}var m=f.charAt(0),b=Number(f.substr(1));if(m==="M"){for(var T=0,S=h,C,P,E;T<10;){if(C=jt.tickIncrement(S,f,a,e.calendar),(C-l)*(S-l)<=0)return a?Math.min(S,C):Math.max(S,C);P=(l-(S+C)/2)/(C-S),E=m+(Math.abs(Math.round(P))||1)*b,S=jt.tickIncrement(S,E,P<0?!a:a,e.calendar),T++}return ta.error("tickFirst did not converge",e),S}else{if(m==="L")return Math.log(s((Math.pow(10,l)-h)/b)*b+h)/Math.LN10;if(m==="D"){var I=f==="D2"?TL:wL,q=ta.roundUp(ta.mod(l,1),I,a);return Math.floor(l)+Math.log(Wl.round(Math.pow(10,q),1))/Math.LN10}else throw"unrecognized dtick "+String(f)}};jt.tickText=function(e,t,r,i){var a=ML(e,t),s=e.tickmode==="array",l=r||s,f=e.type,h=f==="category"?e.d2l_noadd:e.d2l,v,m=function(E){var I=e.l2p(E);return I>=0&&I<=e._length?E:null};if(s&&ta.isArrayOrTypedArray(e.ticktext)){var b=ta.simpleMap(e.range,e.r2l),T=(Math.abs(b[1]-b[0])-(e._lBreaks||0))/1e4;for(v=0;v<e.ticktext.length&&!(Math.abs(t-h(e.tickvals[v]))<T);v++);if(v<e.ticktext.length)return a.text=String(e.ticktext[v]),a.xbnd=[m(a.x-.5),m(a.x+e.dtick-.5)],a}function S(E){if(E===void 0)return!0;if(r)return E==="none";var I={first:e._tmin,last:e._tmax}[E];return E!=="all"&&t!==I}var C=r?"never":e.exponentformat!=="none"&&S(e.showexponent)?"hide":"";if(f==="date"?yte(e,a,r,l):f==="log"?gte(e,a,r,l,C):f==="category"?_te(e,a):f==="multicategory"?xte(e,a,r):F5(e)?wte(e,a,r,l,C):bte(e,a,r,l,C),i||(e.tickprefix&&!S(e.showtickprefix)&&(a.text=e.tickprefix+a.text),e.ticksuffix&&!S(e.showticksuffix)&&(a.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(a.text)){var P=e.labelalias[a.text];typeof P=="string"&&(a.text=P)}return(e.tickson==="boundaries"||e.showdividers)&&(a.xbnd=[m(a.x-.5),m(a.x+e.dtick-.5)]),a};jt.hoverLabelText=function(e,t,r){r&&(e=ta.extendFlat({},e,{hoverformat:r}));var i=ta.isArrayOrTypedArray(t)?t[0]:t,a=ta.isArrayOrTypedArray(t)?t[1]:void 0;if(a!==void 0&&a!==i)return jt.hoverLabelText(e,i,r)+" - "+jt.hoverLabelText(e,a,r);var s=e.type==="log"&&i<=0,l=jt.tickText(e,e.c2l(s?-i:i),"hover").text;return s?i===0?"0":gd+l:l};function ML(e,t,r){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:i.size,font:i.family,fontWeight:i.weight,fontStyle:i.style,fontVariant:i.variant,fontTextcase:i.textcase,fontLineposition:i.lineposition,fontShadow:i.shadow,fontColor:i.color}}function yte(e,t,r,i){var a=e._tickround,s=r&&e.hoverformat||jt.getTickFormat(e);i=!s&&i,i&&(qn(a)?a=4:a={y:"m",m:"d",d:"M",M:"S",S:4}[a]);var l=ta.formatDate(t.x,s,a,e._dateFormat,e.calendar,e._extraFormat),f,h=l.indexOf(`
`);if(h!==-1&&(f=l.substr(h+1),l=l.substr(0,h)),i&&(f!==void 0&&(l==="00:00:00"||l==="00:00")?(l=f,f=""):l.length===8&&(l=l.replace(/:00$/,""))),f)if(r)a==="d"?l+=", "+f:l=f+(l?", "+l:"");else if(!e._inCalcTicks||e._prevDateHead!==f)e._prevDateHead=f,l+="<br>"+f;else{var v=Qy(e),m=e._trueSide||e.side;(!v&&m==="top"||v&&m==="bottom")&&(l+="<br> ")}t.text=l}function gte(e,t,r,i,a){var s=e.dtick,l=t.x,f=e.tickformat,h=typeof s=="string"&&s.charAt(0);if(a==="never"&&(a=""),i&&h!=="L"&&(s="L3",h="L"),f||h==="L")t.text=Ky(Math.pow(10,l),e,a,i);else if(qn(s)||h==="D"&&ta.mod(l+.01,1)<.1){var v=Math.round(l),m=Math.abs(v),b=e.exponentformat;b==="power"||v2(b)&&I5(v)?(v===0?t.text=1:v===1?t.text="10":t.text="10<sup>"+(v>1?"":gd)+m+"</sup>",t.fontSize*=1.25):(b==="e"||b==="E")&&m>2?t.text="1"+b+(v>0?"+":gd)+m:(t.text=Ky(Math.pow(10,l),e,"","fakehover"),s==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(h==="D")t.text=String(Math.round(Math.pow(10,ta.mod(l,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(s);if(e.dtick==="D1"){var T=String(t.text).charAt(0);(T==="0"||T==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)))}}function _te(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function xte(e,t,r){var i=Math.round(t.x),a=e._categories[i]||[],s=a[1]===void 0?"":String(a[1]),l=a[0]===void 0?"":String(a[0]);r?t.text=l+" - "+s:(t.text=s,t.text2=l)}function bte(e,t,r,i,a){a==="never"?a="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(a="hide"),t.text=Ky(t.x,e,a,i)}function wte(e,t,r,i,a){if(e.thetaunit==="radians"&&!r){var s=t.x/180;if(s===0)t.text="0";else{var l=Tte(s);if(l[1]>=100)t.text=Ky(ta.deg2rad(t.x),e,a,i);else{var f=t.x<0;l[1]===1?l[0]===1?t.text="\u03C0":t.text=l[0]+"\u03C0":t.text=["<sup>",l[0],"</sup>","\u2044","<sub>",l[1],"</sub>","\u03C0"].join(""),f&&(t.text=gd+t.text)}}}else t.text=Ky(t.x,e,a,i)}function Tte(e){function t(f,h){return Math.abs(f-h)<=1e-6}function r(f,h){return t(h,0)?f:r(h,f%h)}function i(f){for(var h=1;!t(Math.round(f*h)/h,f);)h*=10;return h}var a=i(e),s=e*a,l=Math.abs(r(s,a));return[Math.round(s/l),Math.round(a/l)]}var Ate=["f","p","n","\u03BC","m","","k","M","G","T"];function v2(e){return e==="SI"||e==="B"}function I5(e){return e>14||e<-15}function Ky(e,t,r,i){var a=e<0,s=t._tickround,l=r||t.exponentformat||"B",f=t._tickexponent,h=jt.getTickFormat(t),v=t.separatethousands;if(i){var m={exponentformat:l,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:qn(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};AL(m),s=(Number(m._tickround)||0)+4,f=m._tickexponent,t.hoverformat&&(h=t.hoverformat)}if(h)return t._numFormat(h)(e).replace(/-/g,gd);var b=Math.pow(10,-s)/2;if(l==="none"&&(f=0),e=Math.abs(e),e<b)e="0",a=!1;else{if(e+=b,f&&(e*=Math.pow(10,-f),s+=f),s===0)e=String(Math.floor(e));else if(s<0){e=String(Math.round(e)),e=e.substr(0,e.length+s);for(var T=s;T<0;T++)e+="0"}else{e=String(e);var S=e.indexOf(".")+1;S&&(e=e.substr(0,S+s).replace(/\.?0+$/,""))}e=ta.numSeparate(e,t._separators,v)}if(f&&l!=="hide"){v2(l)&&I5(f)&&(l="power");var C;f<0?C=gd+-f:l!=="power"?C="+"+f:C=String(f),l==="e"||l==="E"?e+=l+C:l==="power"?e+="\xD710<sup>"+C+"</sup>":l==="B"&&f===9?e+="B":v2(l)&&(e+=Ate[f/3+5])}return a?gd+e:e}jt.getTickFormat=function(e){var t;function r(h){return typeof h!="string"?h:Number(h.replace("M",""))*R0}function i(h,v){var m=["L","D"];if(typeof h==typeof v){if(typeof h=="number")return h-v;var b=m.indexOf(h.charAt(0)),T=m.indexOf(v.charAt(0));return b===T?Number(h.replace(/(L|D)/g,""))-Number(v.replace(/(L|D)/g,"")):b-T}else return typeof h=="number"?1:-1}function a(h,v,m){var b=m||function(C){return C},T=v[0],S=v[1];return(!T&&typeof T!="number"||b(T)<=b(h))&&(!S&&typeof S!="number"||b(S)>=b(h))}function s(h,v){var m=v[0]===null,b=v[1]===null,T=i(h,v[0])>=0,S=i(h,v[1])<=0;return(m||T)&&(b||S)}var l,f;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(f=e.tickformatstops[t],f.enabled&&a(e.dtick,f.dtickrange,r)){l=f;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(f=e.tickformatstops[t],f.enabled&&s(e.dtick,f.dtickrange)){l=f;break}break}default:}return l?l.value:e.tickformat};jt.getSubplots=function(e,t){var r=e._fullLayout._subplots,i=r.cartesian.concat(r.gl2d||[]),a=t?jt.findSubplotsWithAxis(i,t):i;return a.sort(function(s,l){var f=s.substr(1).split("y"),h=l.substr(1).split("y");return f[0]===h[0]?+f[1]-+h[1]:+f[0]-+h[0]}),a};jt.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),i=[],a=0;a<e.length;a++){var s=e[a];r.test(s)&&i.push(s)}return i};jt.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},a=jt.list(e,"x",!0),s=jt.list(e,"y",!0),l=[],f,h;for(f=0;f<a.length;f++)for(l.push({x:a[f],y:i}),h=0;h<s.length;h++)f===0&&l.push({x:r,y:s[h]}),l.push({x:a[f],y:s[h]});var v=t._clips.selectAll(".axesclip").data(l,function(m){return m.x._id+m.y._id});v.enter().append("clipPath").classed("axesclip",!0).attr("id",function(m){return"clip"+t._uid+m.x._id+m.y._id}).append("rect"),v.exit().remove(),v.each(function(m){Wl.select(this).select("rect").attr({x:m.x._offset||0,y:m.y._offset||0,width:m.x._length||1,height:m.y._length||1})})}};jt.draw=function(e,t,r){var i=e._fullLayout;t==="redraw"&&i._paper.selectAll("g.subplot").each(function(h){var v=h[0],m=i._plots[v];if(m){var b=m.xaxis,T=m.yaxis;m.xaxislayer.selectAll("."+b._id+"tick").remove(),m.yaxislayer.selectAll("."+T._id+"tick").remove(),m.xaxislayer.selectAll("."+b._id+"tick2").remove(),m.yaxislayer.selectAll("."+T._id+"tick2").remove(),m.xaxislayer.selectAll("."+b._id+"divider").remove(),m.yaxislayer.selectAll("."+T._id+"divider").remove(),m.minorGridlayer&&m.minorGridlayer.selectAll("path").remove(),m.gridlayer&&m.gridlayer.selectAll("path").remove(),m.zerolinelayer&&m.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+b._id+"title").remove(),i._infolayer.select(".g-"+T._id+"title").remove()}});var a=!t||t==="redraw"?jt.listIds(e):t,s=jt.list(e),l=s.filter(function(h){return h.autoshift}).map(function(h){return h.overlaying});a.map(function(h){var v=jt.getFromId(e,h);if(v.tickmode==="sync"&&v.overlaying){var m=a.findIndex(function(b){return b===v.overlaying});m>=0&&a.unshift(a.splice(m,1).shift())}});var f={false:{left:0,right:0}};return ta.syncOrAsync(a.map(function(h){return function(){if(h){var v=jt.getFromId(e,h);r||(r={}),r.axShifts=f,r.overlayingShiftedAx=l;var m=jt.drawOne(e,v,r);return v._shiftPusher&&D5(v,v._fullDepth||0,f,!0),v._r=v.range.slice(),v._rl=ta.simpleMap(v._r,v.r2l),m}}}))};jt.drawOne=function(e,t,r){r=r||{};var i=r.axShifts||{},a=r.overlayingShiftedAx||[],s,l,f;t.setScale();var h=e._fullLayout,v=t._id,m=v.charAt(0),b=jt.counterLetter(v),T=h._plots[t._mainSubplot];if(!T)return;if(t._shiftPusher=t.autoshift||a.indexOf(t._id)!==-1||a.indexOf(t.overlaying)!==-1,t._shiftPusher&t.anchor==="free"){var S=t.linewidth/2||0;t.ticks==="inside"&&(S+=t.ticklen),D5(t,S,i,!0),D5(t,t.shift||0,i,!1)}(r.skipTitle!==!0||t._shift===void 0)&&(t._shift=qte(t,i));var C=T[m+"axislayer"],P=t._mainLinePosition,E=P+=t._shift,I=t._mainMirrorPosition,q=t._vals=jt.calcTicks(t),B=[t.mirror,E,I].join("_");for(s=0;s<q.length;s++)q[s].axInfo=B;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var z={};function O(qt){var Jt=v+(qt||"tick");return z[Jt]||(z[Jt]=Cte(t,Jt,E)),z[Jt]}if(t.visible){var H=jt.makeTransTickFn(t),V=jt.makeTransTickLabelFn(t),W,K,re=t.ticks==="inside",oe=t.ticks==="outside";if(t.tickson==="boundaries"){var ne=Mte(t,q);K=jt.clipEnds(t,ne),W=re?K:ne}else K=jt.clipEnds(t,q),W=re&&t.ticklabelmode!=="period"?K:q;var he=t._gridVals=K,de=kte(t,q);if(!h._hasOnlyLargeSploms){var Ee=t._subplotsWith,ke={};for(s=0;s<Ee.length;s++){l=Ee[s],f=h._plots[l];var Te=f[b+"axis"],ye=Te._mainAxis._id;if(!ke[ye]){ke[ye]=1;var Ae=m==="x"?"M0,"+Te._offset+"v"+Te._length:"M"+Te._offset+",0h"+Te._length;jt.drawGrid(e,t,{vals:he,counterAxis:Te,layer:f.gridlayer.select("."+v),minorLayer:f.minorGridlayer.select("."+v),path:Ae,transFn:H}),jt.drawZeroLine(e,t,{counterAxis:Te,layer:f.zerolinelayer,path:Ae,transFn:H})}}}var Me,De=jt.getTickSigns(t),at=jt.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var pt=jt.makeTickPath(t,E,De[2]),lt=jt.makeTickPath(t,E,at[2],{minor:!0}),ut,Ye,xt,rt;if(t._anchorAxis&&t.mirror&&t.mirror!==!0?(ut=jt.makeTickPath(t,I,De[3]),Ye=jt.makeTickPath(t,I,at[3],{minor:!0}),xt=pt+ut,rt=lt+Ye):(ut="",Ye="",xt=pt,rt=lt),t.showdividers&&oe&&t.tickson==="boundaries"){var Tt={};for(s=0;s<de.length;s++)Tt[de[s].x]=1;Me=function(qt){return Tt[qt.x]?ut:xt}}else Me=function(qt){return qt.minor?rt:xt}}if(jt.drawTicks(e,t,{vals:W,layer:C,path:Me,transFn:H}),t.mirror==="allticks"){var St=Object.keys(t._linepositions||{});for(s=0;s<St.length;s++){l=St[s],f=h._plots[l];var mt=t._linepositions[l]||[],ge=mt[0],Re=mt[1],xe=mt[2],et=jt.makeTickPath(t,ge,xe?De[0]:at[0],{minor:xe})+jt.makeTickPath(t,Re,xe?De[1]:at[1],{minor:xe});jt.drawTicks(e,t,{vals:W,layer:f[m+"axislayer"],path:et,transFn:H})}}var ht=[];if(ht.push(function(){return jt.drawLabels(e,t,{vals:q,layer:C,plotinfo:f,transFn:V,labelFns:jt.makeLabelFns(t,E)})}),t.type==="multicategory"){var tt={x:2,y:10}[m];ht.push(function(){var qt={x:"height",y:"width"}[m],Jt=O()[qt]+tt+(t._tickAngles[v+"tick"]?t.tickfont.size*Jy:0);return jt.drawLabels(e,t,{vals:Ste(t,q),layer:C,cls:v+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:H,labelFns:jt.makeLabelFns(t,E+Jt*De[4])})}),ht.push(function(){return t._depth=De[4]*(O("tick2")[t.side]-E),Lte(e,t,{vals:de,layer:C,path:jt.makeTickPath(t,E,De[4],{len:t._depth}),transFn:H})})}else t.title.hasOwnProperty("standoff")&&ht.push(function(){t._depth=De[4]*(O()[t.side]-E)});var Rt=Wy.getComponentMethod("rangeslider","isVisible")(t);return!r.skipTitle&&!(Rt&&t.side==="bottom")&&ht.push(function(){return Pte(e,t)}),ht.push(function(){var qt=t.side.charAt(0),Jt=ite[t.side].charAt(0),Ht=jt.getPxPosition(e,t),ar=oe?t.ticklen:0,kt,zt,_r,rr;(t.automargin||Rt||t._shiftPusher)&&(t.type==="multicategory"?kt=O("tick2"):(kt=O(),m==="x"&&qt==="b"&&(t._depth=Math.max(kt.width>0?kt.bottom-Ht:0,ar))));var Be=0,vt=0;if(t._shiftPusher&&(Be=Math.max(ar,kt.height>0?qt==="l"?Ht-kt.left:kt.right-Ht:0),t.title.text!==h._dfltTitle[m]&&(vt=(t._titleStandoff||0)+(t._titleScoot||0),qt==="l"&&(vt+=gL(t))),t._fullDepth=Math.max(Be,vt)),t.automargin){zt={x:0,y:0,r:0,l:0,t:0,b:0};var gt=[0,1],Cr=typeof t._shift=="number"?t._shift:0;if(m==="x"){if(qt==="b"?zt[qt]=t._depth:(zt[qt]=t._depth=Math.max(kt.width>0?Ht-kt.top:0,ar),gt.reverse()),kt.width>0){var pr=kt.right-(t._offset+t._length);pr>0&&(zt.xr=1,zt.r=pr);var bt=t._offset-kt.left;bt>0&&(zt.xl=0,zt.l=bt)}}else if(qt==="l"?(t._depth=Math.max(kt.height>0?Ht-kt.left:0,ar),zt[qt]=t._depth-Cr):(t._depth=Math.max(kt.height>0?kt.right-Ht:0,ar),zt[qt]=t._depth+Cr,gt.reverse()),kt.height>0){var wt=kt.bottom-(t._offset+t._length);wt>0&&(zt.yb=0,zt.b=wt);var Ut=t._offset-kt.top;Ut>0&&(zt.yt=1,zt.t=Ut)}zt[b]=t.anchor==="free"?t.position:t._anchorAxis.domain[gt[0]],t.title.text!==h._dfltTitle[m]&&(zt[qt]+=gL(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(_r={x:0,y:0,r:0,l:0,t:0,b:0},_r[Jt]=t.linewidth,t.mirror&&t.mirror!==!0&&(_r[Jt]+=ar),t.mirror===!0||t.mirror==="ticks"?_r[b]=t._anchorAxis.domain[gt[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(_r[b]=[t._counterDomainMin,t._counterDomainMax][gt[1]]))}Rt&&(rr=Wy.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),typeof t.automargin=="string"&&(yL(zt,t.automargin),yL(_r,t.automargin)),z0.autoMargin(e,R5(t),zt),z0.autoMargin(e,kL(t),_r),z0.autoMargin(e,CL(t),rr)}),ta.syncOrAsync(ht)}};function yL(e,t){if(e){var r=Object.keys(fL).reduce(function(i,a){return t.indexOf(a)!==-1&&fL[a].forEach(function(s){i[s]=1}),i},{});Object.keys(e).forEach(function(i){r[i]||(i.length===1?e[i]=0:delete e[i])})}}function Mte(e,t){var r=[],i,a=function(s,l){var f=s.xbnd[l];f!==null&&r.push(ta.extendFlat({},s,{x:f}))};if(t.length){for(i=0;i<t.length;i++)a(t[i],0);a(t[i-1],1)}return r}function Ste(e,t){for(var r=[],i={},a=0;a<t.length;a++){var s=t[a];i[s.text2]?i[s.text2].push(s.x):i[s.text2]=[s.x]}for(var l in i)r.push(ML(e,ta.interp(i[l],.5),l));return r}function kte(e,t){var r=[],i,a,s=t.length&&t[t.length-1].x<t[0].x,l=function(h,v){var m=h.xbnd[v];m!==null&&r.push(ta.extendFlat({},h,{x:m}))};if(e.showdividers&&t.length){for(i=0;i<t.length;i++){var f=t[i];f.text2!==a&&l(f,s?1:0),a=f.text2}l(t[i-1],s?0:1)}return r}function Cte(e,t,r){var i,a,s,l;if(e._selections[t].size())i=1/0,a=-1/0,s=1/0,l=-1/0,e._selections[t].each(function(){var h=P5(this),v=ol.bBox(h.node().parentNode);i=Math.min(i,v.top),a=Math.max(a,v.bottom),s=Math.min(s,v.left),l=Math.max(l,v.right)});else{var f=jt.makeLabelFns(e,r);i=a=f.yFn({dx:0,dy:0,fontSize:0}),s=l=f.xFn({dx:0,dy:0,fontSize:0})}return{top:i,bottom:a,left:s,right:l,height:a-i,width:l-s}}jt.getTickSigns=function(e,t){var r=e._id.charAt(0),i={x:"top",y:"right"}[r],a=e.side===i?1:-1,s=[-1,1,a,-a],l=t?(e.minor||{}).ticks:e.ticks;return l!=="inside"==(r==="x")&&(s=s.map(function(f){return-f})),e.side&&s.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),s};jt.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return I0(e._offset+e.l2p(t.x),0)}:function(t){return I0(0,e._offset+e.l2p(t.x))}};jt.makeTransTickLabelFn=function(e){var t=Ete(e),r=e.ticklabelshift||0,i=e.ticklabelstandoff||0,a=t[0],s=t[1],l=e.range[0]>e.range[1],f=e.ticklabelposition&&e.ticklabelposition.indexOf("inside")!==-1,h=!f;if(r){var v=l?-1:1;r=r*v}if(i){var m=e.side,b=f&&(m==="top"||m==="left")||h&&(m==="bottom"||m==="right")?1:-1;i=i*b}return e._id.charAt(0)==="x"?function(T){return I0(a+e._offset+e.l2p(L5(T))+r,s+i)}:function(T){return I0(s+i,a+e._offset+e.l2p(L5(T))+r)}};function L5(e){return e.periodX!==void 0?e.periodX:e.x}function Ete(e){var t=e.ticklabelposition||"",r=function(S){return t.indexOf(S)!==-1},i=r("top"),a=r("left"),s=r("right"),l=r("bottom"),f=r("inside"),h=l||a||i||s;if(!h&&!f)return[0,0];var v=e.side,m=h?(e.tickwidth||0)/2:0,b=h2,T=e.tickfont?e.tickfont.size:12;return(l||i)&&(m+=T*_d,b+=(e.linewidth||0)/2),(a||s)&&(m+=(e.linewidth||0)/2,b+=h2),f&&v==="top"&&(b-=T*(1-_d)),(a||i)&&(m=-m),(v==="bottom"||v==="right")&&(b=-b),[h?m:0,f?b:0]}jt.makeTickPath=function(e,t,r,i){i||(i={});var a=i.minor;if(a&&!e.minor)return"";var s=i.len!==void 0?i.len:a?e.minor.ticklen:e.ticklen,l=e._id.charAt(0),f=(e.linewidth||1)/2;return l==="x"?"M0,"+(t+f*r)+"v"+s*r:"M"+(t+f*r)+",0h"+s*r};jt.makeLabelFns=function(e,t,r){var i=e.ticklabelposition||"",a=function(ne){return i.indexOf(ne)!==-1},s=a("top"),l=a("left"),f=a("right"),h=a("bottom"),v=h||l||s||f,m=a("inside"),b=i==="inside"&&e.ticks==="inside"||!m&&e.ticks==="outside"&&e.tickson!=="boundaries",T=0,S=0,C=b?e.ticklen:0;if(m?C*=-1:v&&(C=0),b&&(T+=C,r)){var P=ta.deg2rad(r);T=C*Math.cos(P)+1,S=C*Math.sin(P)}e.showticklabels&&(b||e.showline)&&(T+=.2*e.tickfont.size),T+=(e.linewidth||1)/2*(m?-1:1);var E={labelStandoff:T,labelShift:S},I,q,B,z,O=0,H=e.side,V=e._id.charAt(0),W=e.tickangle,K;if(V==="x")K=!m&&H==="bottom"||m&&H==="top",z=K?1:-1,m&&(z*=-1),I=S*z,q=t+T*z,B=K?1:-.2,Math.abs(W)===90&&(m?B+=Yy:W===-90&&H==="bottom"?B=_d:W===90&&H==="top"?B=Yy:B=.5,O=Yy/2*(W/90)),E.xFn=function(ne){return ne.dx+I+O*ne.fontSize},E.yFn=function(ne){return ne.dy+q+ne.fontSize*B},E.anchorFn=function(ne,he){if(v){if(l)return"end";if(f)return"start"}return!qn(he)||he===0||he===180?"middle":he*z<0!==m?"end":"start"},E.heightFn=function(ne,he,de){return he<-60||he>60?-.5*de:e.side==="top"!==m?-de:0};else if(V==="y"){if(K=!m&&H==="left"||m&&H==="right",z=K?1:-1,m&&(z*=-1),I=T,q=S*z,B=0,!m&&Math.abs(W)===90&&(W===-90&&H==="left"||W===90&&H==="right"?B=_d:B=.5),m){var re=qn(W)?+W:0;if(re!==0){var oe=ta.deg2rad(re);O=Math.abs(Math.sin(oe))*_d*z,B=0}}E.xFn=function(ne){return ne.dx+t-(I+ne.fontSize*B)*z+O*ne.fontSize},E.yFn=function(ne){return ne.dy+q+ne.fontSize*Yy},E.anchorFn=function(ne,he){return qn(he)&&Math.abs(he)===90?"middle":K?"end":"start"},E.heightFn=function(ne,he,de){return e.side==="right"&&(he*=-1),he<-30?-de:he<30?-.5*de:0}}return E};function m2(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}jt.drawTicks=function(e,t,r){r=r||{};var i=t._id+"tick",a=[].concat(t.minor&&t.minor.ticks?r.vals.filter(function(l){return l.minor&&!l.noTick}):[]).concat(t.ticks?r.vals.filter(function(l){return!l.minor&&!l.noTick}):[]),s=r.layer.selectAll("path."+i).data(a,m2);s.exit().remove(),s.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",r.crisp!==!1).each(function(l){return Xy.stroke(Wl.select(this),l.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(l){return ol.crispRound(e,l.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",r.path).style("display",null),y2(t,[_L]),s.attr("transform",r.transFn)};jt.drawGrid=function(e,t,r){if(r=r||{},t.tickmode!=="sync"){var i=t._id+"grid",a=t.minor&&t.minor.showgrid,s=a?r.vals.filter(function(I){return I.minor}):[],l=t.showgrid?r.vals.filter(function(I){return!I.minor}):[],f=r.counterAxis;if(f&&jt.shouldShowZeroLine(e,t,f))for(var h=t.tickmode==="array",v=0;v<l.length;v++){var m=l[v].x;if(h?!m:Math.abs(m)<t.dtick/100)if(l=l.slice(0,v).concat(l.slice(v+1)),h)v--;else break}t._gw=ol.crispRound(e,t.gridwidth,1);for(var b=a?ol.crispRound(e,t.minor.gridwidth,1):0,T=r.layer,S=r.minorLayer,C=1;C>=0;C--){var P=C?T:S;if(P){var E=P.selectAll("path."+i).data(C?l:s,m2);E.exit().remove(),E.enter().append("path").classed(i,1).classed("crisp",r.crisp!==!1),E.attr("transform",r.transFn).attr("d",r.path).each(function(I){return Xy.stroke(Wl.select(this),I.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(I){return ol.dashStyle(I.minor?t.minor.griddash:t.griddash,I.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(I){return(I.minor?b:t._gw)+"px"}).style("display",null),typeof r.path=="function"&&E.attr("d",r.path)}}y2(t,[C5,E5])}};jt.drawZeroLine=function(e,t,r){r=r||r;var i=t._id+"zl",a=jt.shouldShowZeroLine(e,t,r.counterAxis),s=r.layer.selectAll("path."+i).data(a?[{x:0,id:t._id}]:[]);s.exit().remove(),s.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(l,f){return ote(l.id,f.id)})}),s.attr("transform",r.transFn).attr("d",r.path).call(Xy.stroke,t.zerolinecolor||Xy.defaultLine).style("stroke-width",ol.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),y2(t,[k5])};jt.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout,a=t._id,s=r.cls||a+"tick",l=r.vals.filter(function(ye){return ye.text}),f=r.labelFns,h=r.secondary?0:t.tickangle,v=(t._prevTickAngles||{})[s],m=r.layer.selectAll("g."+s).data(t.showticklabels?l:[],m2),b=[];m.enter().append("g").classed(s,1).append("text").attr("text-anchor","middle").each(function(ye){var Ae=Wl.select(this),Me=e._promises.length;Ae.call(yd.positionText,f.xFn(ye),f.yFn(ye)).call(ol.font,{family:ye.font,size:ye.fontSize,color:ye.fontColor,weight:ye.fontWeight,style:ye.fontStyle,variant:ye.fontVariant,textcase:ye.fontTextcase,lineposition:ye.fontLineposition,shadow:ye.fontShadow}).text(ye.text).call(yd.convertToTspans,e),e._promises[Me]?b.push(e._promises.pop().then(function(){T(Ae,h)})):T(Ae,h)}),y2(t,[uL]),m.exit().remove(),r.repositionOnUpdate&&m.each(function(ye){Wl.select(this).select("text").call(yd.positionText,f.xFn(ye),f.yFn(ye))});function T(ye,Ae){ye.each(function(Me){var De=Wl.select(this),at=De.select(".text-math-group"),pt=f.anchorFn(Me,Ae),lt=r.transFn.call(De.node(),Me)+(qn(Ae)&&+Ae!=0?" rotate("+Ae+","+f.xFn(Me)+","+(f.yFn(Me)-Me.fontSize/2)+")":""),ut=yd.lineCount(De),Ye=Jy*Me.fontSize,xt=f.heightFn(Me,qn(Ae)?+Ae:0,(ut-1)*Ye);if(xt&&(lt+=I0(0,xt)),at.empty()){var rt=De.select("text");rt.attr({transform:lt,"text-anchor":pt}),rt.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var Tt=ol.bBox(at.node()).width,St=Tt*{end:-.5,start:.5}[pt];at.attr("transform",lt+I0(St,0))}})}t._adjustTickLabelsOverflow=function(){var ye=t.ticklabeloverflow;if(!(!ye||ye==="allow")){var Ae=ye.indexOf("hide")!==-1,Me=t._id.charAt(0)==="x",De=0,at=Me?e._fullLayout.width:e._fullLayout.height;if(ye.indexOf("domain")!==-1){var pt=ta.simpleMap(t.range,t.r2l);De=t.l2p(pt[0])+t._offset,at=t.l2p(pt[1])+t._offset}var lt=Math.min(De,at),ut=Math.max(De,at),Ye=t.side,xt=1/0,rt=-1/0;m.each(function(ge){var Re=Wl.select(this),xe=Re.select(".text-math-group");if(xe.empty()){var et=ol.bBox(Re.node()),ht=0;Me?(et.right>ut||et.left<lt)&&(ht=1):(et.bottom>ut||et.top+(t.tickangle?0:ge.fontSize/4)<lt)&&(ht=1);var tt=Re.select("text");ht?Ae&&tt.style("opacity",0):(tt.style("opacity",1),Ye==="bottom"||Ye==="right"?xt=Math.min(xt,Me?et.top:et.left):xt=-1/0,Ye==="top"||Ye==="left"?rt=Math.max(rt,Me?et.bottom:et.right):rt=1/0)}});for(var Tt in i._plots){var St=i._plots[Tt];if(!(t._id!==St.xaxis._id&&t._id!==St.yaxis._id)){var mt=Me?St.yaxis:St.xaxis;mt&&(mt["_visibleLabelMin_"+t._id]=xt,mt["_visibleLabelMax_"+t._id]=rt)}}}},t._hideCounterAxisInsideTickLabels=function(ye){var Ae=t._id.charAt(0)==="x",Me=[];for(var De in i._plots){var at=i._plots[De];t._id!==at.xaxis._id&&t._id!==at.yaxis._id||Me.push(Ae?at.yaxis:at.xaxis)}Me.forEach(function(pt,lt){pt&&Qy(pt)&&(ye||[k5,E5,C5,_L,uL]).forEach(function(ut){var Ye=ut.K==="tick"&&ut.L==="text"&&t.ticklabelmode==="period",xt=i._plots[t._mainSubplot],rt;ut.K===k5.K?rt=xt.zerolinelayer.selectAll("."+t._id+"zl"):ut.K===E5.K?rt=xt.minorGridlayer.selectAll("."+t._id):ut.K===C5.K?rt=xt.gridlayer.selectAll("."+t._id):rt=xt[t._id.charAt(0)+"axislayer"],rt.each(function(){var Tt=Wl.select(this);ut.L&&(Tt=Tt.selectAll(ut.L)),Tt.each(function(St){var mt=t.l2p(Ye?L5(St):St.x)+t._offset,ge=Wl.select(this);mt<t["_visibleLabelMax_"+pt._id]&&mt>t["_visibleLabelMin_"+pt._id]?ge.style("display","none"):ut.K==="tick"&&!lt&&ge.style("display",null)})})})})},T(m,v+1?v:h);function S(){return b.length&&Promise.all(b)}var C=null;function P(){if(T(m,h),l.length&&t.autotickangles&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){C=t.autotickangles[0];var ye=0,Ae=[],Me,De=1;m.each(function(kt){ye=Math.max(ye,kt.fontSize);var zt=t.l2p(kt.x),_r=P5(this),rr=ol.bBox(_r.node());De=Math.max(De,yd.lineCount(_r)),Ae.push({top:0,bottom:10,height:10,left:zt-rr.width/2,right:zt+rr.width/2+2,width:rr.width+2})});var at=(t.tickson==="boundaries"||t.showdividers)&&!r.secondary,pt=l.length,lt=Math.abs((l[pt-1].x-l[0].x)*t._m)/(pt-1),ut=at?lt/2:lt,Ye=at?t.ticklen:ye*1.25*De,xt=Math.sqrt(Math.pow(ut,2)+Math.pow(Ye,2)),rt=ut/xt,Tt=t.autotickangles.map(function(kt){return kt*Math.PI/180}),St=Tt.find(function(kt){return Math.abs(Math.cos(kt))<=rt});St===void 0&&(St=Tt.reduce(function(kt,zt){return Math.abs(Math.cos(kt))<Math.abs(Math.cos(zt))?kt:zt},Tt[0]));var mt=St*(180/Math.PI);if(at){var ge=2;for(t.ticks&&(ge+=t.tickwidth/2),Me=0;Me<Ae.length;Me++){var Re=l[Me].xbnd,xe=Ae[Me];if(Re[0]!==null&&xe.left-t.l2p(Re[0])<ge||Re[1]!==null&&t.l2p(Re[1])-xe.right<ge){C=mt;break}}}else{var et=t.ticklabelposition||"",ht=function(kt){return et.indexOf(kt)!==-1},tt=ht("top"),Rt=ht("left"),qt=ht("right"),Jt=ht("bottom"),Ht=Jt||Rt||tt||qt,ar=Ht?(t.tickwidth||0)+2*h2:0;for(Me=0;Me<Ae.length-1;Me++)if(ta.bBoxIntersect(Ae[Me],Ae[Me+1],ar)){C=mt;break}}C&&T(m,C)}}t._selections&&(t._selections[s]=m);var E=[S];t.automargin&&i._redrawFromAutoMarginCount&&v===90?(C=v,E.push(function(){T(m,v)})):E.push(P),t._tickAngles&&E.push(function(){t._tickAngles[s]=C===null?qn(h)?h:0:C});var I=function(){var ye=0,Ae=0;return m.each(function(Me,De){var at=P5(this),pt=at.select(".text-math-group");if(pt.empty()){var lt;t._vals[De]&&(lt=t._vals[De].bb||ol.bBox(at.node()),t._vals[De].bb=lt),ye=Math.max(ye,lt.width),Ae=Math.max(Ae,lt.height)}}),{labelsMaxW:ye,labelsMaxH:Ae}},q=t._anchorAxis;if(q&&(q.autorange||q.insiderange)&&Qy(t)&&!ste(i,t._id)&&(i._insideTickLabelsUpdaterange||(i._insideTickLabelsUpdaterange={}),q.autorange&&(i._insideTickLabelsUpdaterange[q._name+".autorange"]=q.autorange,E.push(I)),q.insiderange)){var B=I(),z=t._id.charAt(0)==="y"?B.labelsMaxW:B.labelsMaxH;z+=2*h2,t.ticklabelposition==="inside"&&(z+=t.ticklen||0);var O=t.side==="right"||t.side==="top"?1:-1,H=O===1?1:0,V=O===1?0:1,W=[];W[V]=q.range[V];var K=q.range,re=q.r2p(K[H]),oe=q.r2p(K[V]),ne=i._insideTickLabelsUpdaterange[q._name+".range"];if(ne){var he=q.r2p(ne[H]),de=q.r2p(ne[V]),Ee=O*(t._id.charAt(0)==="y"?1:-1);Ee*re<Ee*he&&(re=he,W[H]=K[H]=ne[H]),Ee*oe>Ee*de&&(oe=de,W[V]=K[V]=ne[V])}var ke=Math.abs(oe-re);ke-z>0?(ke-=z,z*=1+z/ke):z=0,t._id.charAt(0)!=="y"&&(z=-z),W[H]=q.p2r(q.r2p(K[H])+O*z),q.autorange==="min"||q.autorange==="max reversed"?(W[0]=null,q._rangeInitial0=void 0,q._rangeInitial1=void 0):(q.autorange==="max"||q.autorange==="min reversed")&&(W[1]=null,q._rangeInitial0=void 0,q._rangeInitial1=void 0),i._insideTickLabelsUpdaterange[q._name+".range"]=W}var Te=ta.syncOrAsync(E);return Te&&Te.then&&e._promises.push(Te),Te};function Lte(e,t,r){var i=t._id+"divider",a=r.vals,s=r.layer.selectAll("path."+i).data(a,m2);s.exit().remove(),s.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(Xy.stroke,t.dividercolor).style("stroke-width",ol.crispRound(e,t.dividerwidth,1)+"px"),s.attr("transform",r.transFn).attr("d",r.path)}jt.getPxPosition=function(e,t){var r=e._fullLayout._size,i=t._id.charAt(0),a=t.side,s;if(t.anchor!=="free"?s=t._anchorAxis:i==="x"?s={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:i==="y"&&(s={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),a==="top"||a==="left")return s._offset;if(a==="bottom"||a==="right")return s._offset+s._length};function gL(e){var t=e.title.font.size,r=(e.title.text.match(yd.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?t*(_d+r*Jy):r?t*(r+1)*Jy:t}function Pte(e,t){var r=e._fullLayout,i=t._id,a=i.charAt(0),s=t.title.font.size,l,f=(t.title.text.match(yd.BR_TAG_ALL)||[]).length;if(t.title.hasOwnProperty("standoff"))t.side==="bottom"||t.side==="right"?l=t._depth+t.title.standoff+s*_d:(t.side==="top"||t.side==="left")&&(l=t._depth+t.title.standoff+s*(Yy+f*Jy));else{var h=Qy(t);if(t.type==="multicategory")l=t._depth;else{var v=1.5*s;h&&(v=.5*s,t.ticks==="outside"&&(v+=t.ticklen)),l=10+v+(t.linewidth?t.linewidth-1:0)}h||(a==="x"?l+=t.side==="top"?s*(t.showticklabels?1:0):s*(t.showticklabels?1.5:.5):l+=t.side==="right"?s*(t.showticklabels?1:.5):s*(t.showticklabels?.5:0))}var m=jt.getPxPosition(e,t),b,T,S;a==="x"?(T=t._offset+t._length/2,S=t.side==="top"?m-l:m+l):(S=t._offset+t._length/2,T=t.side==="right"?m+l:m-l,b={rotate:"-90",offset:0});var C;if(t.type!=="multicategory"){var P=t._selections[t._id+"tick"];if(C={selection:P,side:t.side},P&&P.node()&&P.node().parentNode){var E=ol.getTranslate(P.node().parentNode);C.offsetLeft=E.x,C.offsetTop=E.y}t.title.hasOwnProperty("standoff")&&(C.pad=0)}return t._titleStandoff=l,Kee.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:C,transform:b,attributes:{x:T,y:S,"text-anchor":"middle"}})}jt.shouldShowZeroLine=function(e,t,r){var i=ta.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===d2)&&(SL(t,0)||!Dte(e,t,r,i)||zte(e,t))};jt.clipEnds=function(e,t){return t.filter(function(r){return SL(e,r.x)})};function SL(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Dte(e,t,r,i){var a=r._mainAxis;if(!a)return;var s=e._fullLayout,l=t._id.charAt(0),f=jt.counterLetter(t._id),h=t._offset+(Math.abs(i[0])<Math.abs(i[1])==(l==="x")?0:t._length);function v(C){if(!C.showline||!C.linewidth)return!1;var P=Math.max((C.linewidth+t.zerolinewidth)/2,1);function E(B){return typeof B=="number"&&Math.abs(B-h)<P}if(E(C._mainLinePosition)||E(C._mainMirrorPosition))return!0;var I=C._linepositions||{};for(var q in I)if(E(I[q][0])||E(I[q][1]))return!0}var m=s._plots[r._mainSubplot];if(!(m.mainplotinfo||m).overlays.length)return v(r,h);for(var b=jt.list(e,f),T=0;T<b.length;T++){var S=b[T];if(S._mainAxis===a&&v(S,h))return!0}}function zte(e,t){for(var r=e._fullData,i=t._mainSubplot,a=t._id.charAt(0),s=0;s<r.length;s++){var l=r[s];if(l.visible===!0&&l.xaxis+l.yaxis===i&&(Wy.traceIs(l,"bar-like")&&l.orientation==={x:"h",y:"v"}[a]||l.fill&&l.fill.charAt(l.fill.length-1)===a))return!0}return!1}function P5(e){var t=Wl.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}jt.allowAutoMargin=function(e){for(var t=jt.list(e,"",!0),r=0;r<t.length;r++){var i=t[r];i.automargin&&(z0.allowAutoMargin(e,R5(i)),i.mirror&&z0.allowAutoMargin(e,kL(i))),Wy.getComponentMethod("rangeslider","isVisible")(i)&&z0.allowAutoMargin(e,CL(i))}};function R5(e){return e._id+".automargin"}function kL(e){return R5(e)+".mirror"}function CL(e){return e._id+".rangeslider"}jt.swap=function(e,t){for(var r=Ite(e,t),i=0;i<r.length;i++)Rte(e,r[i].x,r[i].y)};function Ite(e,t){var r=[],i,a;for(i=0;i<t.length;i++){var s=[],l=e._fullData[t[i]].xaxis,f=e._fullData[t[i]].yaxis;if(!(!l||!f)){for(a=0;a<r.length;a++)(r[a].x.indexOf(l)!==-1||r[a].y.indexOf(f)!==-1)&&s.push(a);if(!s.length){r.push({x:[l],y:[f]});continue}var h=r[s[0]],v;if(s.length>1)for(a=1;a<s.length;a++)v=r[s[a]],o2(h.x,v.x),o2(h.y,v.y);o2(h.x,[l]),o2(h.y,[f])}}return r}function o2(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function Rte(e,t,r){var i=[],a=[],s=e.layout,l,f;for(l=0;l<t.length;l++)i.push(jt.getFromId(e,t[l]));for(l=0;l<r.length;l++)a.push(jt.getFromId(e,r[l]));var h=Object.keys(Qee),v=["anchor","domain","overlaying","position","side","tickangle","editType"],m=["linear","log"];for(l=0;l<h.length;l++){var b=h[l],T=i[0][b],S=a[0][b],C=!0,P=!1,E=!1;if(!(b.charAt(0)==="_"||typeof T=="function"||v.indexOf(b)!==-1)){for(f=1;f<i.length&&C;f++){var I=i[f][b];b==="type"&&m.indexOf(T)!==-1&&m.indexOf(I)!==-1&&T!==I?P=!0:I!==T&&(C=!1)}for(f=1;f<a.length&&C;f++){var q=a[f][b];b==="type"&&m.indexOf(S)!==-1&&m.indexOf(q)!==-1&&S!==q?E=!0:a[f][b]!==S&&(C=!1)}C&&(P&&(s[i[0]._name].type="linear"),E&&(s[a[0]._name].type="linear"),Fte(s,b,i,a,e._fullLayout._dfltTitle))}}for(l=0;l<e._fullLayout.annotations.length;l++){var B=e._fullLayout.annotations[l];t.indexOf(B.xref)!==-1&&r.indexOf(B.yref)!==-1&&ta.swapAttrs(s.annotations[l],["?"])}}function Fte(e,t,r,i,a){var s=ta.nestedProperty,l=s(e[r[0]._name],t).get(),f=s(e[i[0]._name],t).get(),h;for(t==="title"&&(l&&l.text===a.x&&(l.text=a.y),f&&f.text===a.y&&(f.text=a.x)),h=0;h<r.length;h++)s(e,r[h]._name+"."+t).set(f);for(h=0;h<i.length;h++)s(e,i[h]._name+"."+t).set(l)}function F5(e){return e._id==="angularaxis"}function M5(e,t){for(var r=t._rangebreaks.length,i=0;i<r;i++){var a=t._rangebreaks[i];if(e>=a.min&&e<a.max)return a.max}return e}function Qy(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function y2(e,t){Qy(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function D5(e,t,r,i){var a=e.anchor!=="free"&&(e.overlaying===void 0||e.overlaying===!1)?e._id:e.overlaying,s;i?s=e.side==="right"?t:-t:s=t,a in r||(r[a]={}),e.side in r[a]||(r[a][e.side]=0),r[a][e.side]+=s}function qte(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}function Nte(e,t){return/%f/.test(t)?e>=ate:/%L/.test(t)?e>=rte:/%[SX]/.test(t)?e>=c2:/%M/.test(t)?e>=jy:/%[HI]/.test(t)?e>=Pf:/%p/.test(t)?e>=Nh:/%[Aadejuwx]/.test(t)?e>=as:/%[UVW]/.test(t)?e>=sl:/%[Bbm]/.test(t)?e>=f2:/%[q]/.test(t)?e>=u2:/%[Yy]/.test(t)?e>=l2:!0}});var PL=ve((jge,LL)=>{"use strict";LL.exports=function(t,r,i){var a,s;if(i){var l=r==="reversed"||r==="min reversed"||r==="max reversed";a=i[l?1:0],s=i[l?0:1]}var f=t("autorangeoptions.minallowed",s===null?a:void 0),h=t("autorangeoptions.maxallowed",a===null?s:void 0);f===void 0&&t("autorangeoptions.clipmin"),h===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}});var q5=ve((Jge,DL)=>{"use strict";var Bte=PL();DL.exports=function(t,r,i,a){var s=r._template||{},l=r.type||s.type||"-";i("minallowed"),i("maxallowed");var f=i("range");if(!f){var h;!a.noInsiderange&&l!=="log"&&(h=i("insiderange"),h&&(h[0]===null||h[1]===null)&&(r.insiderange=!1,h=void 0),h&&(f=i("range",h)))}var v=r.getAutorangeDflt(f,a),m=i("autorange",v),b;f&&(f[0]===null&&f[1]===null||(f[0]===null||f[1]===null)&&(m==="reversed"||m===!0)||f[0]!==null&&(m==="min"||m==="max reversed")||f[1]!==null&&(m==="max"||m==="min reversed"))&&(f=void 0,delete r.range,r.autorange=!0,b=!0),b||(v=r.getAutorangeDflt(f,a),m=i("autorange",v)),m&&(Bte(i,m,f),(l==="linear"||l==="-")&&i("rangemode")),r.cleanRange()}});var IL=ve((Kge,zL)=>{var Ote={left:0,top:0};zL.exports=Ute;function Ute(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,a=e.clientY||0,s=Vte(t);return r[0]=i-s.left,r[1]=a-s.top,r}function Vte(e){return e===window||e===document||e===document.body?Ote:e.getBoundingClientRect()}});var N5=ve((Qge,RL)=>{"use strict";var Hte=vw();function Gte(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){e=!1}return e}RL.exports=Hte&&Gte()});var qL=ve(($ge,FL)=>{"use strict";FL.exports=function(t,r,i,a,s){var l=(t-i)/(a-i),f=l+r/(a-i),h=(l+f)/2;return s==="left"||s==="bottom"?l:s==="center"||s==="middle"?h:s==="right"||s==="top"?f:l<2/3-h?l:f>4/3-h?f:h}});var OL=ve((e1e,BL)=>{"use strict";var NL=Ft(),Zte=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];BL.exports=function(t,r,i,a){return i==="left"?t=0:i==="center"?t=1:i==="right"?t=2:t=NL.constrain(Math.floor(t*3),0,2),a==="bottom"?r=0:a==="middle"?r=1:a==="top"?r=2:r=NL.constrain(Math.floor(r*3),0,2),Zte[r][t]}});var VL=ve((t1e,UL)=>{"use strict";var Yte=Iy(),Wte=g_(),Xte=Sy().getGraphDiv,jte=Ay(),B5=UL.exports={};B5.wrapped=function(e,t,r){e=Xte(e),e._fullLayout&&Wte.clear(e._fullLayout._uid+jte.HOVERID),B5.raw(e,t,r)};B5.raw=function(t,r){var i=t._fullLayout,a=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&Yte.triggerHandler(t,"plotly_beforehover",r)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&a&&t.emit("plotly_unhover",{event:r,points:a}))}});var Xl=ve((r1e,ZL)=>{"use strict";var Jte=IL(),O5=pw(),Kte=N5(),Qte=Ft().removeElement,$te=Ao(),xd=ZL.exports={};xd.align=qL();xd.getCursor=OL();var HL=VL();xd.unhover=HL.wrapped;xd.unhoverRaw=HL.raw;xd.init=function(t){var r=t.gd,i=1,a=r._context.doubleClickDelay,s=t.element,l,f,h,v,m,b,T,S;r._mouseDownTime||(r._mouseDownTime=0),s.style.pointerEvents="all",s.onmousedown=E,Kte?(s._ontouchstart&&s.removeEventListener("touchstart",s._ontouchstart),s._ontouchstart=E,s.addEventListener("touchstart",E,{passive:!1})):s.ontouchstart=E;function C(B,z,O){return Math.abs(B)<O&&(B=0),Math.abs(z)<O&&(z=0),[B,z]}var P=t.clampFn||C;function E(B){r._dragged=!1,r._dragging=!0;var z=U5(B);l=z[0],f=z[1],T=B.target,b=B,S=B.buttons===2||B.ctrlKey,typeof B.clientX=="undefined"&&typeof B.clientY=="undefined"&&(B.clientX=l,B.clientY=f),h=new Date().getTime(),h-r._mouseDownTime<a?i+=1:(i=1,r._mouseDownTime=h),t.prepFn&&t.prepFn(B,l,f),O5&&!S?(m=GL(),m.style.cursor=window.getComputedStyle(s).cursor):O5||(m=document,v=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(s).cursor),document.addEventListener("mouseup",q),document.addEventListener("touchend",q),t.dragmode!==!1&&(B.preventDefault(),document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}))}function I(B){B.preventDefault();var z=U5(B),O=t.minDrag||$te.MINDRAG,H=P(z[0]-l,z[1]-f,O),V=H[0],W=H[1];(V||W)&&(r._dragged=!0,xd.unhover(r,B)),r._dragged&&t.moveFn&&!S&&(r._dragdata={element:s,dx:V,dy:W},t.moveFn(V,W))}function q(B){if(delete r._dragdata,t.dragmode!==!1&&(B.preventDefault(),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I)),document.removeEventListener("mouseup",q),document.removeEventListener("touchend",q),O5?Qte(m):v&&(m.documentElement.style.cursor=v,v=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>a&&(i=Math.max(i-1,1)),r._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(i,b),!S){var z;try{z=new MouseEvent("click",B)}catch(H){var O=U5(B);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",B.bubbles,B.cancelable,B.view,B.detail,B.screenX,B.screenY,O[0],O[1],B.ctrlKey,B.altKey,B.shiftKey,B.metaKey,B.button,B.relatedTarget)}T.dispatchEvent(z)}r._dragging=!1,r._dragged=!1}};function GL(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}xd.coverSlip=GL;function U5(e){return Jte(e.changedTouches?e.changedTouches[0]:e,document.body)}});var Bh=ve((a1e,YL)=>{"use strict";YL.exports=function(t,r){(t.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&t.classed(i,!1)}),r&&t.classed("cursor-"+r,!0)}});var jL=ve((i1e,XL)=>{"use strict";var V5=Bh(),$y="data-savedcursor",WL="!!";XL.exports=function(t,r){var i=t.attr($y);if(r){if(!i){for(var a=(t.attr("class")||"").split(" "),s=0;s<a.length;s++){var l=a[s];l.indexOf("cursor-")===0&&t.attr($y,l.substr(7)).classed(l,!1)}t.attr($y)||t.attr($y,WL)}V5(t,r)}else i&&(t.attr($y,null),i===WL?V5(t):V5(t,i))}});var G5=ve((n1e,JL)=>{"use strict";var H5=qo(),ere=Tf();JL.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:ere.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:H5({editType:"legend"}),grouptitlefont:H5({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:H5({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}});var _2=ve(g2=>{"use strict";g2.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};g2.isVertical=function(t){return t.orientation!=="h"};g2.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}});var W5=ve((s1e,KL)=>{"use strict";var Z5=la(),ll=Ft(),tre=Di(),rre=ms(),are=G5(),ire=h0(),Y5=_2();function nre(e,t,r,i){var a=t[e]||{},s=tre.newContainer(r,e);function l(Te,ye){return ll.coerce(a,s,are,Te,ye)}var f=ll.coerceFont(l,"font",r.font);l("bgcolor",r.paper_bgcolor),l("bordercolor");var h=l("visible");if(h){for(var v,m=function(Te,ye){var Ae=v._input,Me=v;return ll.coerce(Ae,Me,rre,Te,ye)},b=r.font||{},T=ll.coerceFont(l,"grouptitlefont",b,{overrideDflt:{size:Math.round(b.size*1.1)}}),S=0,C=!1,P="normal",E=(r.shapes||[]).filter(function(Te){return Te.showlegend}),I=i.concat(E).filter(function(Te){return e===(Te.legend||"legend")}),q=0;q<I.length;q++)if(v=I[q],!!v.visible){var B=v._isShape;(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&v._module.attributes.showlegend.dflt===!1))&&(S++,v.showlegend&&(C=!0,(!B&&Z5.traceIs(v,"pie-like")||v._input.showlegend===!0)&&S++),ll.coerceFont(m,"legendgrouptitle.font",T)),(!B&&Z5.traceIs(v,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(v.fill)!==-1)&&(P=Y5.isGrouped({traceorder:P})?"grouped+reversed":"reversed"),v.legendgroup!==void 0&&v.legendgroup!==""&&(P=Y5.isReversed({traceorder:P})?"reversed+grouped":"grouped")}var z=ll.coerce(t,r,ire,"showlegend",C&&S>(e==="legend"?1:0));if(z===!1&&(r[e]=void 0),!(z===!1&&!a.uirevision)&&(l("uirevision",r.uirevision),z!==!1)){l("borderwidth");var O=l("orientation"),H=l("yref"),V=l("xref"),W=O==="h",K=H==="paper",re=V==="paper",oe,ne,he,de="left";W?(oe=0,Z5.getComponentMethod("rangeslider","isVisible")(t.xaxis)?K?(ne=1.1,he="bottom"):(ne=1,he="top"):K?(ne=-.1,he="top"):(ne=0,he="bottom")):(ne=1,he="auto",re?oe=1.02:(oe=1,de="right")),ll.coerce(a,s,{x:{valType:"number",editType:"legend",min:re?-2:0,max:re?3:1,dflt:oe}},"x"),ll.coerce(a,s,{y:{valType:"number",editType:"legend",min:K?-2:0,max:K?3:1,dflt:ne}},"y"),l("traceorder",P),Y5.isGrouped(r[e])&&l("tracegroupgap"),l("entrywidth"),l("entrywidthmode"),l("indentation"),l("itemsizing"),l("itemwidth"),l("itemclick"),l("itemdoubleclick"),l("groupclick"),l("xanchor",de),l("yanchor",he),l("valign"),ll.noneOrAll(a,s,["x","y"]);var Ee=l("title.text");if(Ee){l("title.side",W?"left":"top");var ke=ll.extendFlat({},f,{size:ll.bigFont(f.size)});ll.coerceFont(l,"title.font",ke)}}}}KL.exports=function(t,r,i){var a,s=i.slice(),l=r.shapes;if(l)for(a=0;a<l.length;a++){var f=l[a];if(f.showlegend){var h={_input:f._input,visible:f.visible,showlegend:f.showlegend,legend:f.legend};s.push(h)}}var v=["legend"];for(a=0;a<s.length;a++)ll.pushUnique(v,s[a].legend);for(r._legends=[],a=0;a<v.length;a++){var m=v[a];nre(m,t,r,s),r[m]&&r[m].visible&&(r[m]._id=m),r._legends.push(m)}}});var $L=ve((l1e,QL)=>{"use strict";var F0=la(),j5=Ft(),ore=j5.pushUnique,X5=!0;QL.exports=function(t,r,i){var a=r._fullLayout;if(r._dragged||r._editing)return;var s=a.legend.itemclick,l=a.legend.itemdoubleclick,f=a.legend.groupclick;i===1&&s==="toggle"&&l==="toggleothers"&&X5&&r.data&&r._context.showTips&&j5.notifier(j5._(r,"Double-click on legend to isolate one trace"),"long"),X5=!1;var h;if(i===1?h=s:i===2&&(h=l),!h)return;var v=f==="togglegroup",m=a.hiddenlabels?a.hiddenlabels.slice():[],b=t.data()[0][0];if(b.groupTitle&&b.noClick)return;var T=r._fullData,S=(a.shapes||[]).filter(function(Ht){return Ht.showlegend}),C=T.concat(S),P=b.trace;P._isShape&&(P=P._fullInput);var E=P.legendgroup,I,q,B,z,O,H,V={},W=[],K=[],re=[];function oe(Ht,ar){var kt=W.indexOf(Ht),zt=V.visible;return zt||(zt=V.visible=[]),W.indexOf(Ht)===-1&&(W.push(Ht),kt=W.length-1),zt[kt]=ar,kt}var ne=(a.shapes||[]).map(function(Ht){return Ht._input}),he=!1;function de(Ht,ar){ne[Ht].visible=ar,he=!0}function Ee(Ht,ar){if(!(b.groupTitle&&!v)){var kt=Ht._fullInput||Ht,zt=kt._isShape,_r=kt.index;_r===void 0&&(_r=kt._index);var rr=kt.visible===!1?!1:ar;zt?de(_r,rr):oe(_r,rr)}}var ke=P.legend,Te=P._fullInput,ye=Te&&Te._isShape;if(!ye&&F0.traceIs(P,"pie-like")){var Ae=b.label,Me=m.indexOf(Ae);if(h==="toggle")Me===-1?m.push(Ae):m.splice(Me,1);else if(h==="toggleothers"){var De=Me!==-1,at=[];for(I=0;I<r.calcdata.length;I++){var pt=r.calcdata[I];for(q=0;q<pt.length;q++){var lt=pt[q],ut=lt.label;ke===pt[0].trace.legend&&Ae!==ut&&(m.indexOf(ut)===-1&&(De=!0),ore(m,ut),at.push(ut))}}if(!De)for(var Ye=0;Ye<at.length;Ye++){var xt=m.indexOf(at[Ye]);xt!==-1&&m.splice(xt,1)}}F0.call("_guiRelayout",r,"hiddenlabels",m)}else{var rt=E&&E.length,Tt=[],St;if(rt)for(I=0;I<C.length;I++)St=C[I],St.visible&&St.legendgroup===E&&Tt.push(I);if(h==="toggle"){var mt;switch(P.visible){case!0:mt="legendonly";break;case!1:mt=!1;break;case"legendonly":mt=!0;break}if(rt)if(v)for(I=0;I<C.length;I++){var ge=C[I];ge.visible!==!1&&ge.legendgroup===E&&Ee(ge,mt)}else Ee(P,mt);else Ee(P,mt)}else if(h==="toggleothers"){var Re,xe,et,ht,tt,Rt=!0;for(I=0;I<C.length;I++)if(tt=C[I],Re=tt===P,et=tt.showlegend!==!0,!(Re||et)&&(xe=rt&&tt.legendgroup===E,!xe&&tt.legend===ke&&tt.visible===!0&&!F0.traceIs(tt,"notLegendIsolatable"))){Rt=!1;break}for(I=0;I<C.length;I++)if(tt=C[I],!(tt.visible===!1||tt.legend!==ke)&&!F0.traceIs(tt,"notLegendIsolatable"))switch(P.visible){case"legendonly":Ee(tt,!0);break;case!0:ht=Rt?!0:"legendonly",Re=tt===P,et=tt.showlegend!==!0&&!tt.legendgroup,xe=Re||rt&&tt.legendgroup===E,Ee(tt,xe||et?!0:ht);break}}for(I=0;I<K.length;I++)if(B=K[I],!!B){var qt=B.constructUpdate(),Jt=Object.keys(qt);for(q=0;q<Jt.length;q++)z=Jt[q],H=V[z]=V[z]||[],H[re[I]]=qt[z]}for(O=Object.keys(V),I=0;I<O.length;I++)for(z=O[I],q=0;q<W.length;q++)V[z].hasOwnProperty(q)||(V[z][q]=void 0);he?F0.call("_guiUpdate",r,V,{shapes:ne},W):F0.call("_guiRestyle",r,V,W)}}});var J5=ve((u1e,eP)=>{"use strict";eP.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}});var aP=ve((f1e,rP)=>{"use strict";var tP=la(),K5=_2();rP.exports=function(t,r,i){var a=r._inHover,s=K5.isGrouped(r),l=K5.isReversed(r),f={},h=[],v=!1,m={},b=0,T=0,S,C;function P(Te,ye,Ae){if(r.visible!==!1&&!(i&&Te!==r._id))if(ye===""||!K5.isGrouped(r)){var Me="~~i"+b;h.push(Me),f[Me]=[Ae],b++}else h.indexOf(ye)===-1?(h.push(ye),v=!0,f[ye]=[Ae]):f[ye].push(Ae)}for(S=0;S<t.length;S++){var E=t[S],I=E[0],q=I.trace,B=q.legend,z=q.legendgroup;if(!(!a&&(!q.visible||!q.showlegend)))if(tP.traceIs(q,"pie-like"))for(m[z]||(m[z]={}),C=0;C<E.length;C++){var O=E[C].label;m[z][O]||(P(B,z,{label:O,color:E[C].color,i:E[C].i,trace:q,pts:E[C].pts}),m[z][O]=!0,T=Math.max(T,(O||"").length))}else P(B,z,I),T=Math.max(T,(q.name||"").length)}if(!h.length)return[];var H=!v||!s,V=[];for(S=0;S<h.length;S++){var W=f[h[S]];H?V.push(W[0]):V.push(W)}for(H&&(V=[V]),S=0;S<V.length;S++){var K=1/0;for(C=0;C<V[S].length;C++){var re=V[S][C].trace.legendrank;K>re&&(K=re)}V[S][0]._groupMinRank=K,V[S][0]._preGroupSort=S}var oe=function(Te,ye){return Te[0]._groupMinRank-ye[0]._groupMinRank||Te[0]._preGroupSort-ye[0]._preGroupSort},ne=function(Te,ye){return Te.trace.legendrank-ye.trace.legendrank||Te._preSort-ye._preSort};for(V.forEach(function(Te,ye){Te[0]._preGroupSort=ye}),V.sort(oe),S=0;S<V.length;S++){V[S].forEach(function(Te,ye){Te._preSort=ye}),V[S].sort(ne);var he=V[S][0].trace,de=null;for(C=0;C<V[S].length;C++){var Ee=V[S][C].trace.legendgrouptitle;if(Ee&&Ee.text){de=Ee,a&&(Ee.font=r._groupTitleFont);break}}if(l&&V[S].reverse(),de){var ke=!1;for(C=0;C<V[S].length;C++)if(tP.traceIs(V[S][C].trace,"pie-like")){ke=!0;break}V[S].unshift({i:-1,groupTitle:de,noClick:ke,trace:{showlegend:he.showlegend,legendgroup:he.legendgroup,visible:r.groupclick==="toggleitem"?!0:he.visible}})}for(C=0;C<V[S].length;C++)V[S][C]=[V[S][C]]}return r._lgroupsLength=V.length,r._maxNameLength=T,V}});var Q5=ve(bd=>{"use strict";var x2=Ft();function iP(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}bd.formatPiePercent=function(t,r){var i=iP((t*100).toPrecision(3));return x2.numSeparate(i,r)+"%"};bd.formatPieValue=function(t,r){var i=iP(t.toPrecision(10));return x2.numSeparate(i,r)};bd.getFirstFilled=function(t,r){if(x2.isArrayOrTypedArray(t))for(var i=0;i<r.length;i++){var a=t[r[i]];if(a||a===0||a==="")return a}};bd.castOption=function(t,r){if(x2.isArrayOrTypedArray(t))return bd.getFirstFilled(t,r);if(t)return t};bd.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}});var oP=ve((h1e,nP)=>{"use strict";var sre=_i(),lre=Ua();nP.exports=function(t,r,i,a){var s=i.marker.pattern;s&&s.shape?sre.pointStyle(t,i,a,r):lre.fill(t,r.color)}});var fP=ve((v1e,uP)=>{"use strict";var sP=Ua(),lP=Q5().castOption,ure=oP();uP.exports=function(t,r,i,a){var s=i.marker.line,l=lP(s.color,r.pts)||sP.defaultLine,f=lP(s.width,r.pts)||0;t.call(ure,r,i,a).style("stroke-width",f).call(sP.stroke,l)}});var r4=ve((d1e,mP)=>{"use strict";var is=ja(),$5=la(),Bo=Ft(),cP=Bo.strTranslate,ys=_i(),jl=Ua(),e4=Sf().extractOpts,b2=rs(),fre=fP(),cre=Q5().castOption,hre=J5(),hP=12,vP=5,wd=2,vre=10,q0=5;mP.exports=function(t,r,i){var a=r._fullLayout;i||(i=a.legend);var s=i.itemsizing==="constant",l=i.itemwidth,f=(l+hre.itemGap*2)/2,h=cP(f,0),v=function(V,W,K,re){var oe;if(V+1)oe=V;else if(W&&W.width>0)oe=W.width;else return 0;return s?re:Math.min(oe,K)};t.each(function(V){var W=is.select(this),K=Bo.ensureSingle(W,"g","layers");K.style("opacity",V[0].trace.opacity);var re=i.indentation,oe=i.valign,ne=V[0].lineHeight,he=V[0].height;if(oe==="middle"&&re===0||!ne||!he)K.attr("transform",null);else{var de={top:1,bottom:-1}[oe],Ee=de*(.5*(ne-he+3))||0,ke=i.indentation;K.attr("transform",cP(ke,Ee))}var Te=K.selectAll("g.legendfill").data([V]);Te.enter().append("g").classed("legendfill",!0);var ye=K.selectAll("g.legendlines").data([V]);ye.enter().append("g").classed("legendlines",!0);var Ae=K.selectAll("g.legendsymbols").data([V]);Ae.enter().append("g").classed("legendsymbols",!0),Ae.selectAll("g.legendpoints").data([V]).enter().append("g").classed("legendpoints",!0)}).each(H).each(T).each(C).each(S).each(E).each(z).each(B).each(m).each(b).each(I).each(q);function m(V){var W=dP(V),K=W.showFill,re=W.showLine,oe=W.showGradientLine,ne=W.showGradientFill,he=W.anyFill,de=W.anyLine,Ee=V[0],ke=Ee.trace,Te,ye,Ae=e4(ke),Me=Ae.colorscale,De=Ae.reversescale,at=function(Tt){if(Tt.size())if(K)ys.fillGroupStyle(Tt,r,!0);else{var St="legendfill-"+ke.uid;ys.gradient(Tt,r,St,t4(De),Me,"fill")}},pt=function(Tt){if(Tt.size()){var St="legendline-"+ke.uid;ys.lineGroupStyle(Tt),ys.gradient(Tt,r,St,t4(De),Me,"stroke")}},lt=b2.hasMarkers(ke)||!he?"M5,0":de?"M5,-2":"M5,-3",ut=is.select(this),Ye=ut.select(".legendfill").selectAll("path").data(K||ne?[V]:[]);if(Ye.enter().append("path").classed("js-fill",!0),Ye.exit().remove(),Ye.attr("d",lt+"h"+l+"v6h-"+l+"z").call(at),re||oe){var xt=v(void 0,ke.line,vre,vP);ye=Bo.minExtend(ke,{line:{width:xt}}),Te=[Bo.minExtend(Ee,{trace:ye})]}var rt=ut.select(".legendlines").selectAll("path").data(re||oe?[Te]:[]);rt.enter().append("path").classed("js-line",!0),rt.exit().remove(),rt.attr("d",lt+(oe?"l"+l+",0.0001":"h"+l)).call(re?ys.lineGroupStyle:pt)}function b(V){var W=dP(V),K=W.anyFill,re=W.anyLine,oe=W.showLine,ne=W.showMarker,he=V[0],de=he.trace,Ee=!ne&&!re&&!K&&b2.hasText(de),ke,Te;function ye(Ye,xt,rt,Tt){var St=Bo.nestedProperty(de,Ye).get(),mt=Bo.isArrayOrTypedArray(St)&&xt?xt(St):St;if(s&&mt&&Tt!==void 0&&(mt=Tt),rt){if(mt<rt[0])return rt[0];if(mt>rt[1])return rt[1]}return mt}function Ae(Ye){return he._distinct&&he.index&&Ye[he.index]?Ye[he.index]:Ye[0]}if(ne||Ee||oe){var Me={},De={};if(ne){Me.mc=ye("marker.color",Ae),Me.mx=ye("marker.symbol",Ae),Me.mo=ye("marker.opacity",Bo.mean,[.2,1]),Me.mlc=ye("marker.line.color",Ae),Me.mlw=ye("marker.line.width",Bo.mean,[0,5],wd),De.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var at=ye("marker.size",Bo.mean,[2,16],hP);Me.ms=at,De.marker.size=at}oe&&(De.line={width:ye("line.width",Ae,[0,10],vP)}),Ee&&(Me.tx="Aa",Me.tp=ye("textposition",Ae),Me.ts=10,Me.tc=ye("textfont.color",Ae),Me.tf=ye("textfont.family",Ae),Me.tw=ye("textfont.weight",Ae),Me.ty=ye("textfont.style",Ae),Me.tv=ye("textfont.variant",Ae),Me.tC=ye("textfont.textcase",Ae),Me.tE=ye("textfont.lineposition",Ae),Me.tS=ye("textfont.shadow",Ae)),ke=[Bo.minExtend(he,Me)],Te=Bo.minExtend(de,De),Te.selectedpoints=null,Te.texttemplate=null}var pt=is.select(this).select("g.legendpoints"),lt=pt.selectAll("path.scatterpts").data(ne?ke:[]);lt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",h),lt.exit().remove(),lt.call(ys.pointStyle,Te,r),ne&&(ke[0].mrc=3);var ut=pt.selectAll("g.pointtext").data(Ee?ke:[]);ut.enter().append("g").classed("pointtext",!0).append("text").attr("transform",h),ut.exit().remove(),ut.selectAll("text").call(ys.textPointStyle,Te,r)}function T(V){var W=V[0].trace,K=W.type==="waterfall";if(V[0]._distinct&&K){var re=V[0].trace[V[0].dir].marker;return V[0].mc=re.color,V[0].mlw=re.line.width,V[0].mlc=re.line.color,P(V,this,"waterfall")}var oe=[];W.visible&&K&&(oe=V[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ne=is.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(oe);ne.enter().append("path").classed("legendwaterfall",!0).attr("transform",h).style("stroke-miterlimit",1),ne.exit().remove(),ne.each(function(he){var de=is.select(this),Ee=W[he[0]].marker,ke=v(void 0,Ee.line,q0,wd);de.attr("d",he[1]).style("stroke-width",ke+"px").call(jl.fill,Ee.color),ke&&de.call(jl.stroke,Ee.line.color)})}function S(V){P(V,this)}function C(V){P(V,this,"funnel")}function P(V,W,K){var re=V[0].trace,oe=re.marker||{},ne=oe.line||{},he=oe.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",de=K?re.visible&&re.type===K:$5.traceIs(re,"bar"),Ee=is.select(W).select("g.legendpoints").selectAll("path.legend"+K).data(de?[V]:[]);Ee.enter().append("path").classed("legend"+K,!0).attr("d",he).attr("transform",h),Ee.exit().remove(),Ee.each(function(ke){var Te=is.select(this),ye=ke[0],Ae=v(ye.mlw,oe.line,q0,wd);Te.style("stroke-width",Ae+"px");var Me=ye.mcc;if(!i._inHover&&"mc"in ye){var De=e4(oe),at=De.mid;at===void 0&&(at=(De.max+De.min)/2),Me=ys.tryColorscale(oe,"")(at)}var pt=Me||ye.mc||oe.color,lt=oe.pattern,ut=lt&&ys.getPatternAttr(lt.shape,0,"");if(ut){var Ye=ys.getPatternAttr(lt.bgcolor,0,null),xt=ys.getPatternAttr(lt.fgcolor,0,null),rt=lt.fgopacity,Tt=pP(lt.size,8,10),St=pP(lt.solidity,.5,1),mt="legend-"+re.uid;Te.call(ys.pattern,"legend",r,mt,ut,Tt,St,Me,lt.fillmode,Ye,xt,rt)}else Te.call(jl.fill,pt);Ae&&jl.stroke(Te,ye.mlc||ne.color)})}function E(V){var W=V[0].trace,K=is.select(this).select("g.legendpoints").selectAll("path.legendbox").data(W.visible&&$5.traceIs(W,"box-violin")?[V]:[]);K.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),K.exit().remove(),K.each(function(){var re=is.select(this);if((W.boxpoints==="all"||W.points==="all")&&jl.opacity(W.fillcolor)===0&&jl.opacity((W.line||{}).color)===0){var oe=Bo.minExtend(W,{marker:{size:s?hP:Bo.constrain(W.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});K.call(ys.pointStyle,oe,r)}else{var ne=v(void 0,W.line,q0,wd);re.style("stroke-width",ne+"px").call(jl.fill,W.fillcolor),ne&&jl.stroke(re,W.line.color)}})}function I(V){var W=V[0].trace,K=is.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(W.visible&&W.type==="candlestick"?[V,V]:[]);K.enter().append("path").classed("legendcandle",!0).attr("d",function(re,oe){return oe?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",h).style("stroke-miterlimit",1),K.exit().remove(),K.each(function(re,oe){var ne=is.select(this),he=W[oe?"increasing":"decreasing"],de=v(void 0,he.line,q0,wd);ne.style("stroke-width",de+"px").call(jl.fill,he.fillcolor),de&&jl.stroke(ne,he.line.color)})}function q(V){var W=V[0].trace,K=is.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(W.visible&&W.type==="ohlc"?[V,V]:[]);K.enter().append("path").classed("legendohlc",!0).attr("d",function(re,oe){return oe?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",h).style("stroke-miterlimit",1),K.exit().remove(),K.each(function(re,oe){var ne=is.select(this),he=W[oe?"increasing":"decreasing"],de=v(void 0,he.line,q0,wd);ne.style("fill","none").call(ys.dashLine,he.line.dash,de),de&&jl.stroke(ne,he.line.color)})}function B(V){O(V,this,"pie")}function z(V){O(V,this,"funnelarea")}function O(V,W,K){var re=V[0],oe=re.trace,ne=K?oe.visible&&oe.type===K:$5.traceIs(oe,K),he=is.select(W).select("g.legendpoints").selectAll("path.legend"+K).data(ne?[V]:[]);if(he.enter().append("path").classed("legend"+K,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",h),he.exit().remove(),he.size()){var de=oe.marker||{},Ee=v(cre(de.line.width,re.pts),de.line,q0,wd),ke="pieLike",Te=Bo.minExtend(oe,{marker:{line:{width:Ee}}},ke),ye=Bo.minExtend(re,{trace:Te},ke);fre(he,ye,Te,r)}}function H(V){var W=V[0].trace,K,re=[];if(W.visible)switch(W.type){case"histogram2d":case"heatmap":re=[["M-15,-2V4H15V-2Z"]],K=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":re=[["M-6,-6V6H6V-6Z"]],K=!0;break;case"densitymapbox":case"densitymap":re=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],K="radial";break;case"cone":re=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],K=!1;break;case"streamtube":re=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],K=!1;break;case"surface":re=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],K=!0;break;case"mesh3d":re=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],K=!1;break;case"volume":re=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],K=!0;break;case"isosurface":re=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],K=!1;break}var oe=is.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(re);oe.enter().append("path").classed("legend3dandfriends",!0).attr("transform",h).style("stroke-miterlimit",1),oe.exit().remove(),oe.each(function(ne,he){var de=is.select(this),Ee=e4(W),ke=Ee.colorscale,Te=Ee.reversescale,ye=function(at){if(at.size()){var pt="legendfill-"+W.uid;ys.gradient(at,r,pt,t4(Te,K==="radial"),ke,"fill")}},Ae;if(ke){if(!K){var De=ke.length;Ae=he===0?ke[Te?De-1:0][1]:he===1?ke[Te?0:De-1][1]:ke[Math.floor((De-1)/2)][1]}}else{var Me=W.vertexcolor||W.facecolor||W.color;Ae=Bo.isArrayOrTypedArray(Me)?Me[he]||Me[0]:Me}de.attr("d",ne[0]),Ae?de.call(jl.fill,Ae):de.call(ye)})}};function t4(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function dP(e){var t=e[0].trace,r=t.contours,i=b2.hasLines(t),a=b2.hasMarkers(t),s=t.visible&&t.fill&&t.fill!=="none",l=!1,f=!1;if(r){var h=r.coloring;h==="lines"?l=!0:i=h==="none"||h==="heatmap"||r.showlines,r.type==="constraint"?s=r._operation!=="=":(h==="fill"||h==="heatmap")&&(f=!0)}return{showMarker:a,showLine:i,showFill:s,showGradientLine:l,showGradientFill:f,anyLine:i||l,anyFill:s||f}}function pP(e,t,r){return e&&Bo.isArrayOrTypedArray(e)?t:e>r?r:e}});var o4=ve((p1e,SP)=>{"use strict";var Os=ja(),Nn=Ft(),i4=eo(),O0=la(),yP=Iy(),a4=Xl(),Bn=_i(),T2=Ua(),Td=co(),gP=$L(),Wn=J5(),n4=ts(),AP=n4.LINE_SPACING,B0=n4.FROM_TL,_P=n4.FROM_BR,xP=aP(),dre=r4(),bP=_2(),N0=1,pre=/^legend[0-9]*$/;SP.exports=function(t,r){if(r)wP(t,r);else{var i=t._fullLayout,a=i._legends,s=i._infolayer.selectAll('[class^="legend"]');s.each(function(){var v=Os.select(this),m=v.attr("class"),b=m.split(" ")[0];b.match(pre)&&a.indexOf(b)===-1&&v.remove()});for(var l=0;l<a.length;l++){var f=a[l],h=t._fullLayout[f];wP(t,h)}}};function mre(e,t,r){if(!(t.title.side!=="top center"&&t.title.side!=="top right")){var i=t.title.font,a=i.size*AP,s=0,l=e.node(),f=Bn.bBox(l).width;t.title.side==="top center"?s=.5*(t._width-2*r-2*Wn.titlePad-f):t.title.side==="top right"&&(s=t._width-2*r-2*Wn.titlePad-f),Td.positionText(e,r+Wn.titlePad+s,r+a)}}function wP(e,t){var r=t||{},i=e._fullLayout,a=k2(r),s,l,f=r._inHover;if(f?(l=r.layer,s="hover"):(l=i._infolayer,s=a),!!l){s+=i._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0);var h;if(f){if(!r.entries)return;h=xP(r.entries,r)}else{for(var v=(e.calcdata||[]).slice(),m=i.shapes,b=0;b<m.length;b++){var T=m[b];if(T.showlegend){var S={_isShape:!0,_fullInput:T,index:T._index,name:T.name||T.label.text||"shape "+T._index,legend:T.legend,legendgroup:T.legendgroup,legendgrouptitle:T.legendgrouptitle,legendrank:T.legendrank,legendwidth:T.legendwidth,showlegend:T.showlegend,visible:T.visible,opacity:T.opacity,mode:T.type==="line"?"lines":"markers",line:T.line,marker:{line:T.line,color:T.fillcolor,size:12,symbol:T.type==="rect"?"square":T.type==="circle"?"circle":"hexagon2"}};v.push([{trace:S}])}}h=i.showlegend&&xP(v,r,i._legends.length>1)}var C=i.hiddenlabels||[];if(!f&&(!i.showlegend||!h.length))return l.selectAll("."+a).remove(),i._topdefs.select("#"+s).remove(),i4.autoMargin(e,a);var P=Nn.ensureSingle(l,"g",a,function(W){f||W.attr("pointer-events","all")}),E=Nn.ensureSingleById(i._topdefs,"clipPath",s,function(W){W.append("rect")}),I=Nn.ensureSingle(P,"rect","bg",function(W){W.attr("shape-rendering","crispEdges")});I.call(T2.stroke,r.bordercolor).call(T2.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var q=Nn.ensureSingle(P,"g","scrollbox"),B=r.title;r._titleWidth=0,r._titleHeight=0;var z;B.text?(z=Nn.ensureSingle(q,"text",a+"titletext"),z.attr("text-anchor","start").call(Bn.font,B.font).text(B.text),A2(z,q,e,r,N0)):q.selectAll("."+a+"titletext").remove();var O=Nn.ensureSingle(P,"rect","scrollbar",function(W){W.attr(Wn.scrollBarEnterAttrs).call(T2.fill,Wn.scrollBarColor)}),H=q.selectAll("g.groups").data(h);H.enter().append("g").attr("class","groups"),H.exit().remove();var V=H.selectAll("g.traces").data(Nn.identity);V.enter().append("g").attr("class","traces"),V.exit().remove(),V.style("opacity",function(W){var K=W[0].trace;return O0.traceIs(K,"pie-like")?C.indexOf(W[0].label)!==-1?.5:1:K.visible==="legendonly"?.5:1}).each(function(){Os.select(this).call(yre,e,r)}).call(dre,e,r).each(function(){f||Os.select(this).call(gre,e,a)}),Nn.syncOrAsync([i4.previousPromises,function(){return bre(e,H,V,r)},function(){var W=i._size,K=r.borderwidth,re=r.xref==="paper",oe=r.yref==="paper";if(B.text&&mre(z,r,K),!f){var ne,he;re?ne=W.l+W.w*r.x-B0[M2(r)]*r._width:ne=i.width*r.x-B0[M2(r)]*r._width,oe?he=W.t+W.h*(1-r.y)-B0[S2(r)]*r._effHeight:he=i.height*(1-r.y)-B0[S2(r)]*r._effHeight;var de=wre(e,a,ne,he);if(de)return;if(i.margin.autoexpand){var Ee=ne,ke=he;ne=re?Nn.constrain(ne,0,i.width-r._width):Ee,he=oe?Nn.constrain(he,0,i.height-r._effHeight):ke,ne!==Ee&&Nn.log("Constrain "+a+".x to make legend fit inside graph"),he!==ke&&Nn.log("Constrain "+a+".y to make legend fit inside graph")}Bn.setTranslate(P,ne,he)}if(O.on(".drag",null),P.on("wheel",null),f||r._height<=r._maxHeight||e._context.staticPlot){var Te=r._effHeight;f&&(Te=r._height),I.attr({width:r._width-K,height:Te-K,x:K/2,y:K/2}),Bn.setTranslate(q,0,0),E.select("rect").attr({width:r._width-2*K,height:Te-2*K,x:K,y:K}),Bn.setClipUrl(q,s,e),Bn.setRect(O,0,0,0,0),delete r._scrollY}else{var ye=Math.max(Wn.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),Ae=r._effHeight-ye-2*Wn.scrollBarMargin,Me=r._height-r._effHeight,De=Ae/Me,at=Math.min(r._scrollY||0,Me);I.attr({width:r._width-2*K+Wn.scrollBarWidth+Wn.scrollBarMargin,height:r._effHeight-K,x:K/2,y:K/2}),E.select("rect").attr({width:r._width-2*K+Wn.scrollBarWidth+Wn.scrollBarMargin,height:r._effHeight-2*K,x:K,y:K+at}),Bn.setClipUrl(q,s,e),St(at,ye,De),P.on("wheel",function(){at=Nn.constrain(r._scrollY+Os.event.deltaY/Ae*Me,0,Me),St(at,ye,De),at!==0&&at!==Me&&Os.event.preventDefault()});var pt,lt,ut,Ye=function(et,ht,tt){var Rt=(tt-ht)/De+et;return Nn.constrain(Rt,0,Me)},xt=function(et,ht,tt){var Rt=(ht-tt)/De+et;return Nn.constrain(Rt,0,Me)},rt=Os.behavior.drag().on("dragstart",function(){var et=Os.event.sourceEvent;et.type==="touchstart"?pt=et.changedTouches[0].clientY:pt=et.clientY,ut=at}).on("drag",function(){var et=Os.event.sourceEvent;et.buttons===2||et.ctrlKey||(et.type==="touchmove"?lt=et.changedTouches[0].clientY:lt=et.clientY,at=Ye(ut,pt,lt),St(at,ye,De))});O.call(rt);var Tt=Os.behavior.drag().on("dragstart",function(){var et=Os.event.sourceEvent;et.type==="touchstart"&&(pt=et.changedTouches[0].clientY,ut=at)}).on("drag",function(){var et=Os.event.sourceEvent;et.type==="touchmove"&&(lt=et.changedTouches[0].clientY,at=xt(ut,pt,lt),St(at,ye,De))});q.call(Tt)}function St(et,ht,tt){r._scrollY=e._fullLayout[a]._scrollY=et,Bn.setTranslate(q,0,-et),Bn.setRect(O,r._width,Wn.scrollBarMargin+et*tt,Wn.scrollBarWidth,ht),E.select("rect").attr("y",K+et)}if(e._context.edits.legendPosition){var mt,ge,Re,xe;P.classed("cursor-move",!0),a4.init({element:P.node(),gd:e,prepFn:function(et){if(et.target!==O.node()){var ht=Bn.getTranslate(P);Re=ht.x,xe=ht.y}},moveFn:function(et,ht){if(Re!==void 0&&xe!==void 0){var tt=Re+et,Rt=xe+ht;Bn.setTranslate(P,tt,Rt),mt=a4.align(tt,r._width,W.l,W.l+W.w,r.xanchor),ge=a4.align(Rt+r._height,-r._height,W.t+W.h,W.t,r.yanchor)}},doneFn:function(){if(mt!==void 0&&ge!==void 0){var et={};et[a+".x"]=mt,et[a+".y"]=ge,O0.call("_guiRelayout",e,et)}},clickFn:function(et,ht){var tt=l.selectAll("g.traces").filter(function(){var Rt=this.getBoundingClientRect();return ht.clientX>=Rt.left&&ht.clientX<=Rt.right&&ht.clientY>=Rt.top&&ht.clientY<=Rt.bottom});tt.size()>0&&MP(e,P,tt,et,ht)}})}}],e)}}function w2(e,t,r){var i=e[0],a=i.width,s=t.entrywidthmode,l=i.trace.legendwidth||t.entrywidth;return s==="fraction"?t._maxWidth*l:r+(l||a)}function MP(e,t,r,i,a){var s=r.data()[0][0].trace,l={event:a,node:r.node(),curveNumber:s.index,expandedIndex:s.index,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};s._group&&(l.group=s._group),O0.traceIs(s,"pie-like")&&(l.label=r.datum()[0].label);var f=yP.triggerHandler(e,"plotly_legendclick",l);if(i===1){if(f===!1)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&gP(r,e,i)},e._context.doubleClickDelay)}else if(i===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var h=yP.triggerHandler(e,"plotly_legenddoubleclick",l);h!==!1&&f!==!1&&gP(r,e,i)}}function yre(e,t,r){var i=k2(r),a=e.data()[0][0],s=a.trace,l=O0.traceIs(s,"pie-like"),f=!r._inHover&&t._context.edits.legendText&&!l,h=r._maxNameLength,v,m;a.groupTitle?(v=a.groupTitle.text,m=a.groupTitle.font):(m=r.font,r.entries?v=a.text:(v=l?a.label:s.name,s._meta&&(v=Nn.templateString(v,s._meta))));var b=Nn.ensureSingle(e,"text",i+"text");b.attr("text-anchor","start").call(Bn.font,m).text(f?TP(v,h):v);var T=r.indentation+r.itemwidth+Wn.itemGap*2;Td.positionText(b,T,0),f?b.call(Td.makeEditable,{gd:t,text:v}).call(A2,e,t,r).on("edit",function(S){this.text(TP(S,h)).call(A2,e,t,r);var C=a.trace._fullInput||{},P={};return P.name=S,C._isShape?O0.call("_guiRelayout",t,"shapes["+s.index+"].name",P.name):O0.call("_guiRestyle",t,P,s.index)}):A2(b,e,t,r)}function TP(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var i=r-e.length;i>0;i--)e+=" ";return e}function gre(e,t,r){var i=t._context.doubleClickDelay,a,s=1,l=Nn.ensureSingle(e,"rect",r+"toggle",function(f){t._context.staticPlot||f.style("cursor","pointer").attr("pointer-events","all"),f.call(T2.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(l.on("mousedown",function(){a=new Date().getTime(),a-t._legendMouseDownTime<i?s+=1:(s=1,t._legendMouseDownTime=a)}),l.on("mouseup",function(){if(!(t._dragged||t._editing)){var f=t._fullLayout[r];new Date().getTime()-t._legendMouseDownTime>i&&(s=Math.max(s-1,1)),MP(t,f,e,s,Os.event)}}))}function A2(e,t,r,i,a){i._inHover&&e.attr("data-notex",!0),Td.convertToTspans(e,r,function(){_re(t,r,i,a)})}function _re(e,t,r,i){var a=e.data()[0][0];if(!r._inHover&&a&&!a.trace.showlegend){e.remove();return}var s=e.select("g[class*=math-group]"),l=s.node(),f=k2(r);r||(r=t._fullLayout[f]);var h=r.borderwidth,v;i===N0?v=r.title.font:a.groupTitle?v=a.groupTitle.font:v=r.font;var m=v.size*AP,b,T;if(l){var S=Bn.bBox(l);b=S.height,T=S.width,i===N0?Bn.setTranslate(s,h,h+b*.75):Bn.setTranslate(s,0,b*.25)}else{var C="."+f+(i===N0?"title":"")+"text",P=e.select(C),E=Td.lineCount(P),I=P.node();if(b=m*E,T=I?Bn.bBox(I).width:0,i===N0)r.title.side==="left"&&(T+=Wn.itemGap*2),Td.positionText(P,h+Wn.titlePad,h+m);else{var q=Wn.itemGap*2+r.indentation+r.itemwidth;a.groupTitle&&(q=Wn.itemGap,T-=r.indentation+r.itemwidth),Td.positionText(P,q,-m*((E-1)/2-.3))}}i===N0?(r._titleWidth=T,r._titleHeight=b):(a.lineHeight=m,a.height=Math.max(b,16)+3,a.width=T)}function xre(e){var t=0,r=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(t=e._titleWidth),i.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function bre(e,t,r,i){var a=e._fullLayout,s=k2(i);i||(i=a[s]);var l=a._size,f=bP.isVertical(i),h=bP.isGrouped(i),v=i.entrywidthmode==="fraction",m=i.borderwidth,b=2*m,T=Wn.itemGap,S=i.indentation+i.itemwidth+T*2,C=2*(m+T),P=S2(i),E=i.y<0||i.y===0&&P==="top",I=i.y>1||i.y===1&&P==="bottom",q=i.tracegroupgap,B={};i._maxHeight=Math.max(E||I?a.height/2:l.h,30);var z=0;i._width=0,i._height=0;var O=xre(i);if(f)r.each(function(ut){var Ye=ut[0].height;Bn.setTranslate(this,m+O[0],m+O[1]+i._height+Ye/2+T),i._height+=Ye,i._width=Math.max(i._width,ut[0].width)}),z=S+i._width,i._width+=T+S+b,i._height+=C,h&&(t.each(function(ut,Ye){Bn.setTranslate(this,0,Ye*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var H=M2(i),V=i.x<0||i.x===0&&H==="right",W=i.x>1||i.x===1&&H==="left",K=I||E,re=a.width/2;i._maxWidth=Math.max(V?K&&H==="left"?l.l+l.w:re:W?K&&H==="right"?l.r+l.w:re:l.w,2*S);var oe=0,ne=0;r.each(function(ut){var Ye=w2(ut,i,S);oe=Math.max(oe,Ye),ne+=Ye}),z=null;var he=0;if(h){var de=0,Ee=0,ke=0;t.each(function(){var ut=0,Ye=0;Os.select(this).selectAll("g.traces").each(function(rt){var Tt=w2(rt,i,S),St=rt[0].height;Bn.setTranslate(this,O[0],O[1]+m+T+St/2+Ye),Ye+=St,ut=Math.max(ut,Tt),B[rt[0].trace.legendgroup]=ut});var xt=ut+T;Ee>0&&xt+m+Ee>i._maxWidth?(he=Math.max(he,Ee),Ee=0,ke+=de+q,de=Ye):de=Math.max(de,Ye),Bn.setTranslate(this,Ee,ke),Ee+=xt}),i._width=Math.max(he,Ee)+m,i._height=ke+de+C}else{var Te=r.size(),ye=ne+b+(Te-1)*T<i._maxWidth,Ae=0,Me=0,De=0,at=0;r.each(function(ut){var Ye=ut[0].height,xt=w2(ut,i,S,h),rt=ye?xt:oe;v||(rt+=T),rt+m+Me-T>=i._maxWidth&&(he=Math.max(he,at),Me=0,De+=Ae,i._height+=Ae,Ae=0),Bn.setTranslate(this,O[0]+m+Me,O[1]+m+De+Ye/2+T),at=Me+xt+T,Me+=rt,Ae=Math.max(Ae,Ye)}),ye?(i._width=Me+b,i._height=Ae+C):(i._width=Math.max(he,at)+b,i._height+=Ae+C)}}i._width=Math.ceil(Math.max(i._width+O[0],i._titleWidth+2*(m+Wn.titlePad))),i._height=Math.ceil(Math.max(i._height+O[1],i._titleHeight+2*(m+Wn.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var pt=e._context.edits,lt=pt.legendText||pt.legendPosition;r.each(function(ut){var Ye=Os.select(this).select("."+s+"toggle"),xt=ut[0].height,rt=ut[0].trace.legendgroup,Tt=w2(ut,i,S);h&&rt!==""&&(Tt=B[rt]);var St=lt?S:z||Tt;!f&&!v&&(St+=T/2),Bn.setRect(Ye,0,-xt/2,St,xt)})}function wre(e,t,r,i){var a=e._fullLayout,s=a[t],l=M2(s),f=S2(s),h=s.xref==="paper",v=s.yref==="paper";e._fullLayout._reservedMargin[t]={};var m=s.y<.5?"b":"t",b=s.x<.5?"l":"r",T={r:a.width-r,l:r+s._width,b:a.height-i,t:i+s._effHeight};if(h&&v)return i4.autoMargin(e,t,{x:s.x,y:s.y,l:s._width*B0[l],r:s._width*_P[l],b:s._effHeight*_P[f],t:s._effHeight*B0[f]});h?e._fullLayout._reservedMargin[t][m]=T[m]:v||s.orientation==="v"?e._fullLayout._reservedMargin[t][b]=T[b]:e._fullLayout._reservedMargin[t][m]=T[m]}function M2(e){return Nn.isRightAnchor(e)?"right":Nn.isCenterAnchor(e)?"center":"left"}function S2(e){return Nn.isBottomAnchor(e)?"bottom":Nn.isMiddleAnchor(e)?"middle":"top"}function k2(e){return e._id||"legend"}});var f4=ve(u4=>{"use strict";var Ad=ja(),wc=Da(),kP=wf(),vn=Ft(),Tre=vn.pushUnique,s4=vn.strTranslate,Are=vn.strRotate,Mre=Iy(),Jl=co(),Sre=jL(),Df=_i(),ro=Ua(),C2=Xl(),zf=Yi(),kre=Ao().zindexSeparator,V0=la(),Fu=xc(),Md=Ay(),Cre=W5(),Ere=o4(),RP=Md.YANGLE,l4=Math.PI*RP/180,Lre=1/Math.sin(l4),Pre=Math.cos(l4),Dre=Math.sin(l4),ji=Md.HOVERARROWSIZE,qa=Md.HOVERTEXTPAD,CP={box:!0,ohlc:!0,violin:!0,candlestick:!0},zre={scatter:!0,scattergl:!0,splom:!0};function EP(e,t){return e.distance-t.distance}u4.hover=function(t,r,i,a){t=vn.getGraphDiv(t);var s=r.target;vn.throttle(t._fullLayout._uid+Md.HOVERID,Md.HOVERMINTIME,function(){Ire(t,r,i,a,s)})};u4.loneHover=function(t,r){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var a=r.gd,s=OP(a),l=UP(a),f=t.map(function(E){var I=E._x0||E.x0||E.x||0,q=E._x1||E.x1||E.x||0,B=E._y0||E.y0||E.y||0,z=E._y1||E.y1||E.y||0,O=E.eventData;if(O){var H=Math.min(I,q),V=Math.max(I,q),W=Math.min(B,z),K=Math.max(B,z),re=E.trace;if(V0.traceIs(re,"gl3d")){var oe=a._fullLayout[re.scene]._scene.container,ne=oe.offsetLeft,he=oe.offsetTop;H+=ne,V+=ne,W+=he,K+=he}O.bbox={x0:H+l,x1:V+l,y0:W+s,y1:K+s},r.inOut_bbox&&r.inOut_bbox.push(O.bbox)}else O=!1;return{color:E.color||ro.defaultLine,x0:E.x0||E.x||0,x1:E.x1||E.x||0,y0:E.y0||E.y||0,y1:E.y1||E.y||0,xLabel:E.xLabel,yLabel:E.yLabel,zLabel:E.zLabel,text:E.text,name:E.name,idealAlign:E.idealAlign,borderColor:E.borderColor,fontFamily:E.fontFamily,fontSize:E.fontSize,fontColor:E.fontColor,fontWeight:E.fontWeight,fontStyle:E.fontStyle,fontVariant:E.fontVariant,nameLength:E.nameLength,textAlign:E.textAlign,trace:E.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:E.hovertemplate||!1,hovertemplateLabels:E.hovertemplateLabels||!1,eventData:O}}),h=!1,v=qP(f,{gd:a,hovermode:"closest",rotateLabels:h,bgColor:r.bgColor||ro.background,container:Ad.select(r.container),outerContainer:r.outerContainer||r.container}),m=v.hoverLabels,b=5,T=0,S=0;m.sort(function(E,I){return E.y0-I.y0}).each(function(E,I){var q=E.y0-E.by/2;q-b<T?E.offset=T-q+b:E.offset=0,T=q+E.by+E.offset,I===r.anchorIndex&&(S=E.offset)}).each(function(E){E.offset-=S});var C=a._fullLayout._invScaleX,P=a._fullLayout._invScaleY;return BP(m,h,C,P),i?m:m.node()};function Ire(e,t,r,i,a){r||(r="xy"),typeof r=="string"&&(r=r.split(kre)[0]);var s=Array.isArray(r)?r:[r],l,f=e._fullLayout,h=f.hoversubplots,v=f._plots||[],m=v[r],b=f._has("cartesian"),T=t.hovermode||f.hovermode,S=(T||"").charAt(0)==="x",C=(T||"").charAt(0)==="y",P,E;if(b&&(S||C)&&h==="axis"){for(var I=s.length,q=0;q<I;q++)if(l=s[q],v[l]){P=zf.getFromId(e,l,"x"),E=zf.getFromId(e,l,"y");var B=(S?P:E)._subplotsWith;if(B&&B.length)for(var z=0;z<B.length;z++)Tre(s,B[z])}}if(m&&h!=="single"){var O=m.overlays.map(function(Gr){return Gr.id});s=s.concat(O)}for(var H=s.length,V=new Array(H),W=new Array(H),K=!1,re=0;re<H;re++)if(l=s[re],v[l])K=!0,V[re]=v[l].xaxis,W[re]=v[l].yaxis;else if(f[l]&&f[l]._subplot){var oe=f[l]._subplot;V[re]=oe.xaxis,W[re]=oe.yaxis}else{vn.warn("Unrecognized subplot: "+l);return}if(T&&!K&&(T="closest"),["x","y","closest","x unified","y unified"].indexOf(T)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return C2.unhoverRaw(e,t);var ne=f.hoverdistance;ne===-1&&(ne=1/0);var he=f.spikedistance;he===-1&&(he=1/0);var de=[],Ee=[],ke,Te,ye,Ae,Me,De,at,pt,lt,ut,Ye,xt,rt,Tt={hLinePoint:null,vLinePoint:null},St=!1;if(Array.isArray(t))for(T="array",ye=0;ye<t.length;ye++)Me=e.calcdata[t[ye].curveNumber||0],Me&&(De=Me[0].trace,Me[0].trace.hoverinfo!=="skip"&&(Ee.push(Me),De.orientation==="h"&&(St=!0)));else{var mt=e.calcdata.slice();for(mt.sort(function(Gr,Qa){var Zr=Gr[0].trace.zorder||0,vi=Qa[0].trace.zorder||0;return Zr-vi}),Ae=0;Ae<mt.length;Ae++)Me=mt[Ae],De=Me[0].trace,De.hoverinfo!=="skip"&&Fu.isTraceInSubplots(De,s)&&(Ee.push(Me),De.orientation==="h"&&(St=!0));var ge=!a,Re,xe;if(ge)"xpx"in t?Re=t.xpx:Re=V[0]._length/2,"ypx"in t?xe=t.ypx:xe=W[0]._length/2;else{if(Mre.triggerHandler(e,"plotly_beforehover",t)===!1)return;var et=a.getBoundingClientRect();Re=t.clientX-et.left,xe=t.clientY-et.top,f._calcInverseTransform(e);var ht=vn.apply3DTransform(f._invTransform)(Re,xe);if(Re=ht[0],xe=ht[1],Re<0||Re>V[0]._length||xe<0||xe>W[0]._length)return C2.unhoverRaw(e,t)}if(t.pointerX=Re+V[0]._offset,t.pointerY=xe+W[0]._offset,"xval"in t?ke=Fu.flat(s,t.xval):ke=Fu.p2c(V,Re),"yval"in t?Te=Fu.flat(s,t.yval):Te=Fu.p2c(W,xe),!wc(ke[0])||!wc(Te[0]))return vn.warn("Fx.hover failed",t,e),C2.unhoverRaw(e,t)}var tt=1/0;function Rt(Gr,Qa){for(Ae=0;Ae<Ee.length;Ae++)if(Me=Ee[Ae],!(!Me||!Me[0]||!Me[0].trace)&&(De=Me[0].trace,!(De.visible!==!0||De._length===0)&&["carpet","contourcarpet"].indexOf(De._module.name)===-1)){if(lt=T,Fu.isUnifiedHover(lt)&&(lt=lt.charAt(0)),De.type==="splom"?(pt=0,at=s[pt]):(at=Fu.getSubplot(De),pt=s.indexOf(at)),xt={cd:Me,trace:De,xa:V[pt],ya:W[pt],maxHoverDistance:ne,maxSpikeDistance:he,index:!1,distance:Math.min(tt,ne),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:ro.defaultLine,name:De.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},f[at]&&(xt.subplot=f[at]._subplot),f._splomScenes&&f._splomScenes[De.uid]&&(xt.scene=f._splomScenes[De.uid]),lt==="array"){var Zr=t[Ae];"pointNumber"in Zr?(xt.index=Zr.pointNumber,lt="closest"):(lt="","xval"in Zr&&(ut=Zr.xval,lt="x"),"yval"in Zr&&(Ye=Zr.yval,lt=lt?"closest":"y"))}else Gr!==void 0&&Qa!==void 0?(ut=Gr,Ye=Qa):(ut=ke[pt],Ye=Te[pt]);if(rt=de.length,ne!==0)if(De._module&&De._module.hoverPoints){var vi=De._module.hoverPoints(xt,ut,Ye,lt,{finiteRange:!0,hoverLayer:f._hoverlayer,hoversubplots:h,gd:e});if(vi)for(var ya,le=0;le<vi.length;le++)ya=vi[le],wc(ya.x0)&&wc(ya.y0)&&de.push(Nre(ya,T))}else vn.log("Unrecognized trace type in hover:",De);if(T==="closest"&&de.length>rt&&(de.splice(0,rt),tt=de[0].distance),b&&he!==0&&de.length===0){xt.distance=he,xt.index=!1;var ee=De._module.hoverPoints(xt,ut,Ye,"closest",{hoverLayer:f._hoverlayer});if(ee&&(ee=ee.filter(function(Ve){return Ve.spikeDistance<=he})),ee&&ee.length){var se,fe=ee.filter(function(Ve){return Ve.xa.showspikes&&Ve.xa.spikesnap!=="hovered data"});if(fe.length){var Ce=fe[0];wc(Ce.x0)&&wc(Ce.y0)&&(se=Jt(Ce),(!Tt.vLinePoint||Tt.vLinePoint.spikeDistance>se.spikeDistance)&&(Tt.vLinePoint=se))}var Ne=ee.filter(function(Ve){return Ve.ya.showspikes&&Ve.ya.spikesnap!=="hovered data"});if(Ne.length){var $e=Ne[0];wc($e.x0)&&wc($e.y0)&&(se=Jt($e),(!Tt.hLinePoint||Tt.hLinePoint.spikeDistance>se.spikeDistance)&&(Tt.hLinePoint=se))}}}}}Rt();function qt(Gr,Qa,Zr){for(var vi=null,ya=1/0,le,ee=0;ee<Gr.length;ee++)P&&P._id!==Gr[ee].xa._id||E&&E._id!==Gr[ee].ya._id||(le=Gr[ee].spikeDistance,Zr&&ee===0&&(le=-1/0),le<=ya&&le<=Qa&&(vi=Gr[ee],ya=le));return vi}function Jt(Gr){return Gr?{xa:Gr.xa,ya:Gr.ya,x:Gr.xSpike!==void 0?Gr.xSpike:(Gr.x0+Gr.x1)/2,y:Gr.ySpike!==void 0?Gr.ySpike:(Gr.y0+Gr.y1)/2,distance:Gr.distance,spikeDistance:Gr.spikeDistance,curveNumber:Gr.trace.index,color:Gr.color,pointNumber:Gr.index}:null}var Ht={fullLayout:f,container:f._hoverlayer,event:t},ar=e._spikepoints,kt={vLinePoint:Tt.vLinePoint,hLinePoint:Tt.hLinePoint};e._spikepoints=kt;var zt=function(){var Gr=de.filter(function(Zr){return P&&P._id===Zr.xa._id&&E&&E._id===Zr.ya._id}),Qa=de.filter(function(Zr){return!(P&&P._id===Zr.xa._id&&E&&E._id===Zr.ya._id)});Gr.sort(EP),Qa.sort(EP),de=Gr.concat(Qa),de=Ore(de,T)};zt();var _r=T.charAt(0),rr=(_r==="x"||_r==="y")&&de[0]&&zre[de[0].trace.type];if(b&&he!==0&&de.length!==0){var Be=de.filter(function(Gr){return Gr.ya.showspikes}),vt=qt(Be,he,rr);Tt.hLinePoint=Jt(vt);var gt=de.filter(function(Gr){return Gr.xa.showspikes}),Cr=qt(gt,he,rr);Tt.vLinePoint=Jt(Cr)}if(de.length===0){var pr=C2.unhoverRaw(e,t);return b&&(Tt.hLinePoint!==null||Tt.vLinePoint!==null)&&DP(ar)&&PP(e,Tt,Ht),pr}if(b&&DP(ar)&&PP(e,Tt,Ht),Fu.isXYhover(lt)&&de[0].length!==0&&de[0].trace.type!=="splom"){var bt=de[0];CP[bt.trace.type]?de=de.filter(function(Gr){return Gr.trace.index===bt.trace.index}):de=[bt];var wt=de.length,Ut=IP("x",bt,f),Kt=IP("y",bt,f);Rt(Ut,Kt);var Gt=[],Nt={},$t=0,Ar=function(Gr){var Qa=CP[Gr.trace.type]?FP(Gr):Gr.trace.index;if(!Nt[Qa])$t++,Nt[Qa]=$t,Gt.push(Gr);else{var Zr=Nt[Qa]-1,vi=Gt[Zr];Zr>0&&Math.abs(Gr.distance)<Math.abs(vi.distance)&&(Gt[Zr]=Gr)}},xr;for(xr=0;xr<wt;xr++)Ar(de[xr]);for(xr=de.length-1;xr>wt-1;xr--)Ar(de[xr]);de=Gt,zt()}var Ct=e._hoverdata,Fe=[],He=OP(e),_t=UP(e);for(ye=0;ye<de.length;ye++){var ct=de[ye],yr=Fu.makeEventData(ct,ct.trace,ct.cd);if(ct.hovertemplate!==!1){var Er=!1;ct.cd[ct.index]&&ct.cd[ct.index].ht&&(Er=ct.cd[ct.index].ht),ct.hovertemplate=Er||ct.trace.hovertemplate||!1}if(ct.xa&&ct.ya){var Tr=ct.x0+ct.xa._offset,Hr=ct.x1+ct.xa._offset,_a=ct.y0+ct.ya._offset,ka=ct.y1+ct.ya._offset,Ea=Math.min(Tr,Hr),Ii=Math.max(Tr,Hr),Ki=Math.min(_a,ka),yn=Math.max(_a,ka);yr.bbox={x0:Ea+_t,x1:Ii+_t,y0:Ki+He,y1:yn+He}}ct.eventData=[yr],Fe.push(yr)}e._hoverdata=Fe;var Xi=T==="y"&&(Ee.length>1||de.length>1)||T==="closest"&&St&&de.length>1,jn=ro.combine(f.plot_bgcolor||ro.background,f.paper_bgcolor),En=qP(de,{gd:e,hovermode:T,rotateLabels:Xi,bgColor:jn,container:f._hoverlayer,outerContainer:f._paper.node(),commonLabelOpts:f.hoverlabel,hoverdistance:f.hoverdistance}),Vi=En.hoverLabels;if(Fu.isUnifiedHover(T)||(Fre(Vi,Xi,f,En.commonLabelBoundingBox),BP(Vi,Xi,f._invScaleX,f._invScaleY)),a&&a.tagName){var pa=V0.getComponentMethod("annotations","hasClickToShow")(e,Fe);Sre(Ad.select(a),pa?"pointer":"")}!a||i||!Bre(e,t,Ct)||(Ct&&e.emit("plotly_unhover",{event:t,points:Ct}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:V,yaxes:W,xvals:ke,yvals:Te}))}function FP(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var Rre=/<extra>([\s\S]*)<\/extra>/;function qP(e,t){var r=t.gd,i=r._fullLayout,a=t.hovermode,s=t.rotateLabels,l=t.bgColor,f=t.container,h=t.outerContainer,v=t.commonLabelOpts||{};if(e.length===0)return[[]];var m=t.fontFamily||Md.HOVERFONT,b=t.fontSize||Md.HOVERFONTSIZE,T=t.fontWeight||i.font.weight,S=t.fontStyle||i.font.style,C=t.fontVariant||i.font.variant,P=t.fontTextcase||i.font.textcase,E=t.fontLineposition||i.font.lineposition,I=t.fontShadow||i.font.shadow,q=e[0],B=q.xa,z=q.ya,O=a.charAt(0),H=O+"Label",V=q[H];if(V===void 0&&B.type==="multicategory")for(var W=0;W<e.length&&(V=e[W][H],V===void 0);W++);var K=U0(r,h),re=K.top,oe=K.width,ne=K.height,he=V!==void 0&&q.distance<=t.hoverdistance&&(a==="x"||a==="y");if(he){var de=!0,Ee,ke;for(Ee=0;Ee<e.length;Ee++)if(de&&e[Ee].zLabel===void 0&&(de=!1),ke=e[Ee].hoverinfo||e[Ee].trace.hoverinfo,ke){var Te=Array.isArray(ke)?ke:ke.split("+");if(Te.indexOf("all")===-1&&Te.indexOf(a)===-1){he=!1;break}}de&&(he=!1)}var ye=f.selectAll("g.axistext").data(he?[0]:[]);ye.enter().append("g").classed("axistext",!0),ye.exit().remove();var Ae={minX:0,maxX:0,minY:0,maxY:0};if(ye.each(function(){var gt=Ad.select(this),Cr=vn.ensureSingle(gt,"path","",function(Ea){Ea.style({"stroke-width":"1px"})}),pr=vn.ensureSingle(gt,"text","",function(Ea){Ea.attr("data-notex",1)}),bt=v.bgcolor||ro.defaultLine,wt=v.bordercolor||ro.contrast(bt),Ut=ro.contrast(bt),Kt=v.font,Gt={weight:Kt.weight||T,style:Kt.style||S,variant:Kt.variant||C,textcase:Kt.textcase||P,lineposition:Kt.lineposition||E,shadow:Kt.shadow||I,family:Kt.family||m,size:Kt.size||b,color:Kt.color||Ut};Cr.style({fill:bt,stroke:wt}),pr.text(V).call(Df.font,Gt).call(Jl.positionText,0,0).call(Jl.convertToTspans,r),gt.attr("transform","");var Nt=U0(r,pr.node()),$t,Ar;if(a==="x"){var xr=B.side==="top"?"-":"";pr.attr("text-anchor","middle").call(Jl.positionText,0,B.side==="top"?re-Nt.bottom-ji-qa:re-Nt.top+ji+qa),$t=B._offset+(q.x0+q.x1)/2,Ar=z._offset+(B.side==="top"?0:z._length);var Ct=Nt.width/2+qa,Fe=$t;$t<Ct?Fe=Ct:$t>i.width-Ct&&(Fe=i.width-Ct),Cr.attr("d","M"+($t-Fe)+",0L"+($t-Fe+ji)+","+xr+ji+"H"+Ct+"v"+xr+(qa*2+Nt.height)+"H"+-Ct+"V"+xr+ji+"H"+($t-Fe-ji)+"Z"),$t=Fe,Ae.minX=$t-Ct,Ae.maxX=$t+Ct,B.side==="top"?(Ae.minY=Ar-(qa*2+Nt.height),Ae.maxY=Ar-qa):(Ae.minY=Ar+qa,Ae.maxY=Ar+(qa*2+Nt.height))}else{var He,_t,ct;z.side==="right"?(He="start",_t=1,ct="",$t=B._offset+B._length):(He="end",_t=-1,ct="-",$t=B._offset),Ar=z._offset+(q.y0+q.y1)/2,pr.attr("text-anchor",He),Cr.attr("d","M0,0L"+ct+ji+","+ji+"V"+(qa+Nt.height/2)+"h"+ct+(qa*2+Nt.width)+"V-"+(qa+Nt.height/2)+"H"+ct+ji+"V-"+ji+"Z"),Ae.minY=Ar-(qa+Nt.height/2),Ae.maxY=Ar+(qa+Nt.height/2),z.side==="right"?(Ae.minX=$t+ji,Ae.maxX=$t+ji+(qa*2+Nt.width)):(Ae.minX=$t-ji-(qa*2+Nt.width),Ae.maxX=$t-ji);var yr=Nt.height/2,Er=re-Nt.top-yr,Tr="clip"+i._uid+"commonlabel"+z._id,Hr;if($t<Nt.width+2*qa+ji){Hr="M-"+(ji+qa)+"-"+yr+"h-"+(Nt.width-qa)+"V"+yr+"h"+(Nt.width-qa)+"Z";var _a=Nt.width-$t+qa;Jl.positionText(pr,_a,Er),He==="end"&&pr.selectAll("tspan").each(function(){var Ea=Ad.select(this),Ii=Df.tester.append("text").text(Ea.text()).call(Df.font,Gt),Ki=U0(r,Ii.node());Math.round(Ki.width)<Math.round(Nt.width)&&Ea.attr("x",_a-Ki.width),Ii.remove()})}else Jl.positionText(pr,_t*(qa+ji),Er),Hr=null;var ka=i._topclips.selectAll("#"+Tr).data(Hr?[0]:[]);ka.enter().append("clipPath").attr("id",Tr).append("path"),ka.exit().remove(),ka.select("path").attr("d",Hr),Df.setClipUrl(pr,Hr?Tr:null,r)}gt.attr("transform",s4($t,Ar))}),Fu.isUnifiedHover(a)){f.selectAll("g.hovertext").remove();var Me=e.filter(function(gt){return gt.hoverinfo!=="none"});if(Me.length===0)return[];var De=i.hoverlabel,at=De.font,pt={showlegend:!0,legend:{title:{text:V,font:at},font:at,bgcolor:De.bgcolor,bordercolor:De.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},lt={font:at};Cre(pt,lt,r._fullData);var ut=lt.legend;ut.entries=[];for(var Ye=0;Ye<Me.length;Ye++){var xt=Me[Ye];if(xt.hoverinfo!=="none"){var rt=LP(xt,!0,a,i,V),Tt=rt[0],St=rt[1];xt.name=St,St!==""?xt.text=St+" : "+Tt:xt.text=Tt;var mt=xt.cd[xt.index];mt&&(mt.mc&&(xt.mc=mt.mc),mt.mcc&&(xt.mc=mt.mcc),mt.mlc&&(xt.mlc=mt.mlc),mt.mlcc&&(xt.mlc=mt.mlcc),mt.mlw&&(xt.mlw=mt.mlw),mt.mrc&&(xt.mrc=mt.mrc),mt.dir&&(xt.dir=mt.dir)),xt._distinct=!0,ut.entries.push([xt])}}ut.entries.sort(function(gt,Cr){return gt[0].trace.index-Cr[0].trace.index}),ut.layer=f,ut._inHover=!0,ut._groupTitleFont=De.grouptitlefont,Ere(r,ut);var ge=f.select("g.legend"),Re=U0(r,ge.node()),xe=Re.width+2*qa,et=Re.height+2*qa,ht=Me[0],tt=(ht.x0+ht.x1)/2,Rt=(ht.y0+ht.y1)/2,qt=!(V0.traceIs(ht.trace,"bar-like")||V0.traceIs(ht.trace,"box-violin")),Jt,Ht;O==="y"?qt?(Ht=Rt-qa,Jt=Rt+qa):(Ht=Math.min.apply(null,Me.map(function(gt){return Math.min(gt.y0,gt.y1)})),Jt=Math.max.apply(null,Me.map(function(gt){return Math.max(gt.y0,gt.y1)}))):Ht=Jt=vn.mean(Me.map(function(gt){return(gt.y0+gt.y1)/2}))-et/2;var ar,kt;O==="x"?qt?(ar=tt+qa,kt=tt-qa):(ar=Math.max.apply(null,Me.map(function(gt){return Math.max(gt.x0,gt.x1)})),kt=Math.min.apply(null,Me.map(function(gt){return Math.min(gt.x0,gt.x1)}))):ar=kt=vn.mean(Me.map(function(gt){return(gt.x0+gt.x1)/2}))-xe/2;var zt=B._offset,_r=z._offset;Jt+=_r,ar+=zt,kt+=zt-xe,Ht+=_r-et;var rr,Be;return ar+xe<oe&&ar>=0?rr=ar:kt+xe<oe&&kt>=0?rr=kt:zt+xe<oe?rr=zt:ar-tt<tt-kt+xe?rr=oe-xe:rr=0,rr+=qa,Jt+et<ne&&Jt>=0?Be=Jt:Ht+et<ne&&Ht>=0?Be=Ht:_r+et<ne?Be=_r:Jt-Rt<Rt-Ht+et?Be=ne-et:Be=0,Be+=qa,ge.attr("transform",s4(rr-1,Be-1)),ge}var vt=f.selectAll("g.hovertext").data(e,function(gt){return FP(gt)});return vt.enter().append("g").classed("hovertext",!0).each(function(){var gt=Ad.select(this);gt.append("rect").call(ro.fill,ro.addOpacity(l,.8)),gt.append("text").classed("name",!0),gt.append("path").style("stroke-width","1px"),gt.append("text").classed("nums",!0).call(Df.font,{weight:T,style:S,variant:C,textcase:P,lineposition:E,shadow:I,family:m,size:b})}),vt.exit().remove(),vt.each(function(gt){var Cr=Ad.select(this).attr("transform",""),pr=gt.color;Array.isArray(pr)&&(pr=pr[gt.eventData[0].pointNumber]);var bt=gt.bgcolor||pr,wt=ro.combine(ro.opacity(bt)?bt:ro.defaultLine,l),Ut=ro.combine(ro.opacity(pr)?pr:ro.defaultLine,l),Kt=gt.borderColor||ro.contrast(wt),Gt=LP(gt,he,a,i,V,Cr),Nt=Gt[0],$t=Gt[1],Ar=Cr.select("text.nums").call(Df.font,{family:gt.fontFamily||m,size:gt.fontSize||b,color:gt.fontColor||Kt,weight:gt.fontWeight||T,style:gt.fontStyle||S,variant:gt.fontVariant||C,textcase:gt.fontTextcase||P,lineposition:gt.fontLineposition||E,shadow:gt.fontShadow||I}).text(Nt).attr("data-notex",1).call(Jl.positionText,0,0).call(Jl.convertToTspans,r),xr=Cr.select("text.name"),Ct=0,Fe=0;if($t&&$t!==Nt){xr.call(Df.font,{family:gt.fontFamily||m,size:gt.fontSize||b,color:Ut,weight:gt.fontWeight||T,style:gt.fontStyle||S,variant:gt.fontVariant||C,textcase:gt.fontTextcase||P,lineposition:gt.fontLineposition||E,shadow:gt.fontShadow||I}).text($t).attr("data-notex",1).call(Jl.positionText,0,0).call(Jl.convertToTspans,r);var He=U0(r,xr.node());Ct=He.width+2*qa,Fe=He.height+2*qa}else xr.remove(),Cr.select("rect").remove();Cr.select("path").style({fill:wt,stroke:Kt});var _t=gt.xa._offset+(gt.x0+gt.x1)/2,ct=gt.ya._offset+(gt.y0+gt.y1)/2,yr=Math.abs(gt.x1-gt.x0),Er=Math.abs(gt.y1-gt.y0),Tr=U0(r,Ar.node()),Hr=Tr.width/i._invScaleX,_a=Tr.height/i._invScaleY;gt.ty0=(re-Tr.top)/i._invScaleY,gt.bx=Hr+2*qa,gt.by=Math.max(_a+2*qa,Fe),gt.anchor="start",gt.txwidth=Hr,gt.tx2width=Ct,gt.offset=0;var ka=(Hr+ji+qa+Ct)*i._invScaleX,Ea,Ii;if(s)gt.pos=_t,Ea=ct+Er/2+ka<=ne,Ii=ct-Er/2-ka>=0,(gt.idealAlign==="top"||!Ea)&&Ii?(ct-=Er/2,gt.anchor="end"):Ea?(ct+=Er/2,gt.anchor="start"):gt.anchor="middle",gt.crossPos=ct;else{if(gt.pos=ct,Ea=_t+yr/2+ka<=oe,Ii=_t-yr/2-ka>=0,(gt.idealAlign==="left"||!Ea)&&Ii)_t-=yr/2,gt.anchor="end";else if(Ea)_t+=yr/2,gt.anchor="start";else{gt.anchor="middle";var Ki=ka/2,yn=_t+Ki-oe,Xi=_t-Ki;yn>0&&(_t-=yn),Xi<0&&(_t+=-Xi)}gt.crossPos=_t}Ar.attr("text-anchor",gt.anchor),Ct&&xr.attr("text-anchor",gt.anchor),Cr.attr("transform",s4(_t,ct)+(s?Are(RP):""))}),{hoverLabels:vt,commonLabelBoundingBox:Ae}}function LP(e,t,r,i,a,s){var l="",f="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=vn.templateString(e.name,e.trace._meta)),l=zP(e.name,e.nameLength));var h=r.charAt(0),v=h==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(f+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(f+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&e.trace.type!=="choroplethmap"&&(f+=(f?"z: ":"")+e.zLabel)):t&&e[h+"Label"]===a?f=e[v+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(f=e.yLabel):e.yLabel===void 0?f=e.xLabel:f="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(f+=(f?"<br>":"")+e.text),e.extraText!==void 0&&(f+=(f?"<br>":"")+e.extraText),s&&f===""&&!e.hovertemplate&&(l===""&&s.remove(),f=l);var m=e.hovertemplate||!1;if(m){var b=e.hovertemplateLabels||e;e[h+"Label"]!==a&&(b[h+"other"]=b[h+"Val"],b[h+"otherLabel"]=b[h+"Label"]),f=vn.hovertemplateString(m,b,i._d3locale,e.eventData[0]||{},e.trace._meta),f=f.replace(Rre,function(T,S){return l=zP(S,e.nameLength),""})}return[f,l]}function Fre(e,t,r,i){var a=t?"xa":"ya",s=t?"ya":"xa",l=0,f=1,h=e.size(),v=new Array(h),m=0,b=i.minX,T=i.maxX,S=i.minY,C=i.maxY,P=function(ke){return ke*r._invScaleX},E=function(ke){return ke*r._invScaleY};e.each(function(ke){var Te=ke[a],ye=ke[s],Ae=Te._id.charAt(0)==="x",Me=Te.range;m===0&&Me&&Me[0]>Me[1]!==Ae&&(f=-1);var De=0,at=Ae?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var pt=NP(ke,t),lt=ke.anchor,ut=lt==="end"?-1:1,Ye,xt;if(lt==="middle")Ye=ke.crossPos+(Ae?E(pt.y-ke.by/2):P(ke.bx/2+ke.tx2width/2)),xt=Ye+(Ae?E(ke.by):P(ke.bx));else if(Ae)Ye=ke.crossPos+E(ji+pt.y)-E(ke.by/2-ji),xt=Ye+E(ke.by);else{var rt=P(ut*ji+pt.x),Tt=rt+P(ut*ke.bx);Ye=ke.crossPos+Math.min(rt,Tt),xt=ke.crossPos+Math.max(rt,Tt)}Ae?S!==void 0&&C!==void 0&&Math.min(xt,C)-Math.max(Ye,S)>1&&(ye.side==="left"?(De=ye._mainLinePosition,at=r.width):at=ye._mainLinePosition):b!==void 0&&T!==void 0&&Math.min(xt,T)-Math.max(Ye,b)>1&&(ye.side==="top"?(De=ye._mainLinePosition,at=r.height):at=ye._mainLinePosition)}v[m++]=[{datum:ke,traceIndex:ke.trace.index,dp:0,pos:ke.pos,posref:ke.posref,size:ke.by*(Ae?Lre:1)/2,pmin:De,pmax:at}]}),v.sort(function(ke,Te){return ke[0].posref-Te[0].posref||f*(Te[0].traceIndex-ke[0].traceIndex)});var I,q,B,z,O,H,V;function W(ke){var Te=ke[0],ye=ke[ke.length-1];if(q=Te.pmin-Te.pos-Te.dp+Te.size,B=ye.pos+ye.dp+ye.size-Te.pmax,q>.01){for(O=ke.length-1;O>=0;O--)ke[O].dp+=q;I=!1}if(!(B<.01)){if(q<-.01){for(O=ke.length-1;O>=0;O--)ke[O].dp-=B;I=!1}if(I){var Ae=0;for(z=0;z<ke.length;z++)H=ke[z],H.pos+H.dp+H.size>Te.pmax&&Ae++;for(z=ke.length-1;z>=0&&!(Ae<=0);z--)H=ke[z],H.pos>Te.pmax-1&&(H.del=!0,Ae--);for(z=0;z<ke.length&&!(Ae<=0);z++)if(H=ke[z],H.pos<Te.pmin+1)for(H.del=!0,Ae--,B=H.size*2,O=ke.length-1;O>=0;O--)ke[O].dp-=B;for(z=ke.length-1;z>=0&&!(Ae<=0);z--)H=ke[z],H.pos+H.dp+H.size>Te.pmax&&(H.del=!0,Ae--)}}}for(;!I&&l<=h;){for(l++,I=!0,z=0;z<v.length-1;){var K=v[z],re=v[z+1],oe=K[K.length-1],ne=re[0];if(q=oe.pos+oe.dp+oe.size-ne.pos-ne.dp+ne.size,q>.01){for(O=re.length-1;O>=0;O--)re[O].dp+=q;for(K.push.apply(K,re),v.splice(z+1,1),V=0,O=K.length-1;O>=0;O--)V+=K[O].dp;for(B=V/K.length,O=K.length-1;O>=0;O--)K[O].dp-=B;I=!1}else z++}v.forEach(W)}for(z=v.length-1;z>=0;z--){var he=v[z];for(O=he.length-1;O>=0;O--){var de=he[O],Ee=de.datum;Ee.offset=de.dp,Ee.del=de.del}}}function NP(e,t){var r=0,i=e.offset;return t&&(i*=-Dre,r=e.offset*Pre),{x:r,y:i}}function qre(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(ji+qa),i=r+t*(e.txwidth+qa),a=e.anchor==="middle";return a&&(r-=e.tx2width/2,i+=e.txwidth/2+qa),{alignShift:t,textShiftX:r,text2ShiftX:i}}function BP(e,t,r,i){var a=function(l){return l*r},s=function(l){return l*i};e.each(function(l){var f=Ad.select(this);if(l.del)return f.remove();var h=f.select("text.nums"),v=l.anchor,m=v==="end"?-1:1,b=qre(l),T=NP(l,t),S=T.x,C=T.y,P=v==="middle";f.select("path").attr("d",P?"M-"+a(l.bx/2+l.tx2width/2)+","+s(C-l.by/2)+"h"+a(l.bx)+"v"+s(l.by)+"h-"+a(l.bx)+"Z":"M0,0L"+a(m*ji+S)+","+s(ji+C)+"v"+s(l.by/2-ji)+"h"+a(m*l.bx)+"v-"+s(l.by)+"H"+a(m*ji+S)+"V"+s(C-ji)+"Z");var E=S+b.textShiftX,I=C+l.ty0-l.by/2+qa,q=l.textAlign||"auto";q!=="auto"&&(q==="left"&&v!=="start"?(h.attr("text-anchor","start"),E=P?-l.bx/2-l.tx2width/2+qa:-l.bx-qa):q==="right"&&v!=="end"&&(h.attr("text-anchor","end"),E=P?l.bx/2-l.tx2width/2-qa:l.bx+qa)),h.call(Jl.positionText,a(E),s(I)),l.tx2width&&(f.select("text.name").call(Jl.positionText,a(b.text2ShiftX+b.alignShift*qa+S),s(C+l.ty0-l.by/2+qa)),f.select("rect").call(Df.setRect,a(b.text2ShiftX+(b.alignShift-1)*l.tx2width/2+S),s(C-l.by/2-1),a(l.tx2width),s(l.by+2)))})}function Nre(e,t){var r=e.index,i=e.trace||{},a=e.cd[0],s=e.cd[r]||{};function l(T){return T||wc(T)&&T===0}var f=Array.isArray(r)?function(T,S){var C=vn.castOption(a,r,T);return l(C)?C:vn.extractOption({},i,"",S)}:function(T,S){return vn.extractOption(s,i,T,S)};function h(T,S,C){var P=f(S,C);l(P)&&(e[T]=P)}if(h("hoverinfo","hi","hoverinfo"),h("bgcolor","hbg","hoverlabel.bgcolor"),h("borderColor","hbc","hoverlabel.bordercolor"),h("fontFamily","htf","hoverlabel.font.family"),h("fontSize","hts","hoverlabel.font.size"),h("fontColor","htc","hoverlabel.font.color"),h("fontWeight","htw","hoverlabel.font.weight"),h("fontStyle","hty","hoverlabel.font.style"),h("fontVariant","htv","hoverlabel.font.variant"),h("nameLength","hnl","hoverlabel.namelength"),h("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=vn.constrain(e.x0,0,e.xa._length),e.x1=vn.constrain(e.x1,0,e.xa._length),e.y0=vn.constrain(e.y0,0,e.ya._length),e.y1=vn.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:zf.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:zf.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var v=zf.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+v+" / -"+zf.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+v,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var m=zf.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+m+" / -"+zf.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+m,t==="y"&&(e.distance+=1)}var b=e.hoverinfo||e.trace.hoverinfo;return b&&b!=="all"&&(b=Array.isArray(b)?b:b.split("+"),b.indexOf("x")===-1&&(e.xLabel=void 0),b.indexOf("y")===-1&&(e.yLabel=void 0),b.indexOf("z")===-1&&(e.zLabel=void 0),b.indexOf("text")===-1&&(e.text=void 0),b.indexOf("name")===-1&&(e.name=void 0)),e}function PP(e,t,r){var i=r.container,a=r.fullLayout,s=a._size,l=r.event,f=!!t.hLinePoint,h=!!t.vLinePoint,v,m;if(i.selectAll(".spikeline").remove(),!!(h||f)){var b=ro.combine(a.plot_bgcolor,a.paper_bgcolor);if(f){var T=t.hLinePoint,S,C;v=T&&T.xa,m=T&&T.ya;var P=m.spikesnap;P==="cursor"?(S=l.pointerX,C=l.pointerY):(S=v._offset+T.x,C=m._offset+T.y);var E=kP.readability(T.color,b)<1.5?ro.contrast(b):T.color,I=m.spikemode,q=m.spikethickness,B=m.spikecolor||E,z=zf.getPxPosition(e,m),O,H;if(I.indexOf("toaxis")!==-1||I.indexOf("across")!==-1){if(I.indexOf("toaxis")!==-1&&(O=z,H=S),I.indexOf("across")!==-1){var V=m._counterDomainMin,W=m._counterDomainMax;m.anchor==="free"&&(V=Math.min(V,m.position),W=Math.max(W,m.position)),O=s.l+V*s.w,H=s.l+W*s.w}i.insert("line",":first-child").attr({x1:O,x2:H,y1:C,y2:C,"stroke-width":q,stroke:B,"stroke-dasharray":Df.dashStyle(m.spikedash,q)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:O,x2:H,y1:C,y2:C,"stroke-width":q+2,stroke:b}).classed("spikeline",!0).classed("crisp",!0)}I.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:z+(m.side!=="right"?q:-q),cy:C,r:q,fill:B}).classed("spikeline",!0)}if(h){var K=t.vLinePoint,re,oe;v=K&&K.xa,m=K&&K.ya;var ne=v.spikesnap;ne==="cursor"?(re=l.pointerX,oe=l.pointerY):(re=v._offset+K.x,oe=m._offset+K.y);var he=kP.readability(K.color,b)<1.5?ro.contrast(b):K.color,de=v.spikemode,Ee=v.spikethickness,ke=v.spikecolor||he,Te=zf.getPxPosition(e,v),ye,Ae;if(de.indexOf("toaxis")!==-1||de.indexOf("across")!==-1){if(de.indexOf("toaxis")!==-1&&(ye=Te,Ae=oe),de.indexOf("across")!==-1){var Me=v._counterDomainMin,De=v._counterDomainMax;v.anchor==="free"&&(Me=Math.min(Me,v.position),De=Math.max(De,v.position)),ye=s.t+(1-De)*s.h,Ae=s.t+(1-Me)*s.h}i.insert("line",":first-child").attr({x1:re,x2:re,y1:ye,y2:Ae,"stroke-width":Ee,stroke:ke,"stroke-dasharray":Df.dashStyle(v.spikedash,Ee)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:re,x2:re,y1:ye,y2:Ae,"stroke-width":Ee+2,stroke:b}).classed("spikeline",!0).classed("crisp",!0)}de.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:re,cy:Te-(v.side!=="top"?Ee:-Ee),r:Ee,fill:ke}).classed("spikeline",!0)}}}function Bre(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var i=r.length-1;i>=0;i--){var a=r[i],s=e._hoverdata[i];if(a.curveNumber!==s.curveNumber||String(a.pointNumber)!==String(s.pointNumber)||String(a.pointNumbers)!==String(s.pointNumbers))return!0}return!1}function DP(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function zP(e,t){return Jl.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function Ore(e,t){for(var r=t.charAt(0),i=[],a=[],s=[],l=0;l<e.length;l++){var f=e[l];V0.traceIs(f.trace,"bar-like")||V0.traceIs(f.trace,"box-violin")?s.push(f):f.trace[r+"period"]?a.push(f):i.push(f)}return i.concat(a).concat(s)}function IP(e,t,r){var i=t[e+"a"],a=t[e+"Val"],s=t.cd[0];if(i.type==="category"||i.type==="multicategory")a=i._categoriesMap[a];else if(i.type==="date"){var l=t.trace[e+"periodalignment"];if(l){var f=t.cd[t.index],h=f[e+"Start"];h===void 0&&(h=f[e]);var v=f[e+"End"];v===void 0&&(v=f[e]);var m=v-h;l==="end"?a+=m:l==="middle"&&(a+=m/2)}a=i.d2c(a)}return s&&s.t&&s.t.posLetter===i._id&&(r.boxmode==="group"||r.violinmode==="group")&&(a+=s.t.dPos),a}function OP(e){return e.offsetTop+e.clientTop}function UP(e){return e.offsetLeft+e.clientLeft}function U0(e,t){var r=e._fullLayout,i=t.getBoundingClientRect(),a=i.left,s=i.top,l=a+i.width,f=s+i.height,h=vn.apply3DTransform(r._invTransform)(a,s),v=vn.apply3DTransform(r._invTransform)(l,f),m=h[0],b=h[1],T=v[0],S=v[1];return{x:m,y:b,width:T-m,height:S-b,top:Math.min(b,S),left:Math.min(m,T),right:Math.max(m,T),bottom:Math.max(b,S)}}});var E2=ve((y1e,VP)=>{"use strict";var Ure=Ft(),Vre=Ua(),Hre=xc().isUnifiedHover;VP.exports=function(t,r,i,a){a=a||{};var s=r.legend;function l(f){a.font[f]||(a.font[f]=s?r.legend.font[f]:r.font[f])}r&&Hre(r.hovermode)&&(a.font||(a.font={}),l("size"),l("family"),l("color"),l("weight"),l("style"),l("variant"),s?(a.bgcolor||(a.bgcolor=Vre.combine(r.legend.bgcolor,r.paper_bgcolor)),a.bordercolor||(a.bordercolor=r.legend.bordercolor)):a.bgcolor||(a.bgcolor=r.paper_bgcolor)),i("hoverlabel.bgcolor",a.bgcolor),i("hoverlabel.bordercolor",a.bordercolor),i("hoverlabel.namelength",a.namelength),Ure.coerceFont(i,"hoverlabel.font",a.font),i("hoverlabel.align",a.align)}});var GP=ve((g1e,HP)=>{"use strict";var Gre=Ft(),Zre=E2(),Yre=l0();HP.exports=function(t,r){function i(a,s){return Gre.coerce(t,r,Yre,a,s)}Zre(t,r,i)}});var WP=ve((_1e,YP)=>{"use strict";var ZP=Ft(),Wre=K1(),Xre=E2();YP.exports=function(t,r,i,a){function s(f,h){return ZP.coerce(t,r,Wre,f,h)}var l=ZP.extendFlat({},a.hoverlabel);r.hovertemplate&&(l.namelength=-1),Xre(t,r,s,l)}});var c4=ve((x1e,XP)=>{"use strict";var jre=Ft(),Jre=l0();XP.exports=function(t,r){function i(a,s){return r[a]!==void 0?r[a]:jre.coerce(t,r,Jre,a,s)}return i("clickmode"),i("hoversubplots"),i("hovermode")}});var KP=ve((b1e,JP)=>{"use strict";var jP=Ft(),Kre=l0(),Qre=c4(),$re=E2();JP.exports=function(t,r){function i(m,b){return jP.coerce(t,r,Kre,m,b)}var a=Qre(t,r);a&&(i("hoverdistance"),i("spikedistance"));var s=i("dragmode");s==="select"&&i("selectdirection");var l=r._has("mapbox"),f=r._has("map"),h=r._has("geo"),v=r._basePlotModules.length;r.dragmode==="zoom"&&((l||f||h)&&v===1||(l||f)&&h&&v===2)&&(r.dragmode="pan"),$re(t,r,i),jP.coerceFont(i,"hoverlabel.grouptitlefont",r.hoverlabel.font)}});var eD=ve((w1e,$P)=>{"use strict";var h4=Ft(),QP=la();$P.exports=function(t){var r=t.calcdata,i=t._fullLayout;function a(v){return function(m){return h4.coerceHoverinfo({hoverinfo:m},{_module:v._module},i)}}for(var s=0;s<r.length;s++){var l=r[s],f=l[0].trace;if(!QP.traceIs(f,"pie-like")){var h=QP.traceIs(f,"2dMap")?eae:h4.fillArray;h(f.hoverinfo,l,"hi",a(f)),f.hovertemplate&&h(f.hovertemplate,l,"ht"),f.hoverlabel&&(h(f.hoverlabel.bgcolor,l,"hbg"),h(f.hoverlabel.bordercolor,l,"hbc"),h(f.hoverlabel.font.size,l,"hts"),h(f.hoverlabel.font.color,l,"htc"),h(f.hoverlabel.font.family,l,"htf"),h(f.hoverlabel.font.weight,l,"htw"),h(f.hoverlabel.font.style,l,"hty"),h(f.hoverlabel.font.variant,l,"htv"),h(f.hoverlabel.namelength,l,"hnl"),h(f.hoverlabel.align,l,"hta"))}}};function eae(e,t,r,i){i=i||h4.identity,Array.isArray(e)&&(t[0][r]=i(e))}});var rD=ve((T1e,tD)=>{"use strict";var tae=la(),rae=f4().hover;tD.exports=function(t,r,i){var a=tae.getComponentMethod("annotations","onClick")(t,t._hoverdata);i!==void 0&&rae(t,r,i,!0);function s(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(a&&a.then?a.then(s):s(),r.stopImmediatePropagation&&r.stopImmediatePropagation())}});var If=ve((A1e,nD)=>{"use strict";var aae=ja(),L2=Ft(),iae=Xl(),eg=xc(),aD=l0(),iD=f4();nD.exports={moduleType:"component",name:"fx",constants:Ay(),schema:{layout:aD},attributes:K1(),layoutAttributes:aD,supplyLayoutGlobalDefaults:GP(),supplyDefaults:WP(),supplyLayoutDefaults:KP(),calc:eD(),getDistanceFunction:eg.getDistanceFunction,getClosest:eg.getClosest,inbox:eg.inbox,quadrature:eg.quadrature,appendArrayPointValue:eg.appendArrayPointValue,castHoverOption:oae,castHoverinfo:sae,hover:iD.hover,unhover:iae.unhover,loneHover:iD.loneHover,loneUnhover:nae,click:rD()};function nae(e){var t=L2.isD3Selection(e)?e:aae.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function oae(e,t,r){return L2.castOption(e,t,"hoverlabel."+r)}function sae(e,t,r){function i(a){return L2.coerceHoverinfo({hoverinfo:a},{_module:e._module},t)}return L2.castOption(e,r,"hoverinfo",i)}});var Sd=ve(Tc=>{"use strict";Tc.selectMode=function(e){return e==="lasso"||e==="select"};Tc.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Tc.openMode=function(e){return e==="drawline"||e==="drawopenpath"};Tc.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Tc.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};Tc.selectingOrDrawing=function(e){return Tc.freeMode(e)||Tc.rectMode(e)}});var P2=ve((S1e,oD)=>{"use strict";oD.exports=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}});var D2=ve((k1e,sD)=>{"use strict";sD.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}});var I2=ve((C1e,lD)=>{"use strict";var z2=32;lD.exports={CIRCLE_SIDES:z2,i000:0,i090:z2/4,i180:z2/2,i270:z2/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}});var R2=ve((E1e,fD)=>{"use strict";var lae=Ft().strTranslate;function uD(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function uae(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function fae(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return uD(e,r[t])}}function cae(e){return lae(e.xaxis._offset,e.yaxis._offset)}fD.exports={p2r:uD,r2p:uae,axValue:fae,getTransform:cae}});var Oh=ve(Ac=>{"use strict";var hae=$w(),vD=I2(),H0=vD.CIRCLE_SIDES,v4=vD.SQRT2,dD=R2(),cD=dD.p2r,hD=dD.r2p,vae=[0,3,4,5,6,1,2],dae=[0,3,4,1,2];Ac.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",i=0;i<t;i++)for(var a=e[i].length,s=0;s<a;s++){var l=e[i][s][0];if(l==="Z")r+="Z";else for(var f=e[i][s].length,h=0;h<f;h++){var v=h;l==="Q"||l==="S"?v=dae[h]:l==="C"&&(v=vae[h]),r+=e[i][s][v],h>0&&h<f-1&&(r+=",")}}return r};Ac.readPaths=function(e,t,r,i){var a=hae(e),s=[],l=-1,f=function(){l++,s[l]=[]},h,v=0,m=0,b,T,S=function(){b=v,T=m};S();for(var C=0;C<a.length;C++){var P=[],E,I,q,B,z=a[C][0],O=z;switch(z){case"M":f(),v=+a[C][1],m=+a[C][2],P.push([O,v,m]),S();break;case"Q":case"S":E=+a[C][1],q=+a[C][2],v=+a[C][3],m=+a[C][4],P.push([O,v,m,E,q]);break;case"C":E=+a[C][1],q=+a[C][2],I=+a[C][3],B=+a[C][4],v=+a[C][5],m=+a[C][6],P.push([O,v,m,E,q,I,B]);break;case"T":case"L":v=+a[C][1],m=+a[C][2],P.push([O,v,m]);break;case"H":O="L",v=+a[C][1],P.push([O,v,m]);break;case"V":O="L",m=+a[C][1],P.push([O,v,m]);break;case"A":O="L";var H=+a[C][1],V=+a[C][2];+a[C][4]||(H=-H,V=-V);var W=v-H,K=m;for(h=1;h<=H0/2;h++){var re=2*Math.PI*h/H0;P.push([O,W+H*Math.cos(re),K+V*Math.sin(re)])}break;case"Z":(v!==b||m!==T)&&(v=b,m=T,P.push([O,v,m]));break}for(var oe=(r||{}).domain,ne=t._fullLayout._size,he=r&&r.xsizemode==="pixel",de=r&&r.ysizemode==="pixel",Ee=i===!1,ke=0;ke<P.length;ke++){for(h=0;h+2<7;h+=2){var Te=P[ke][h+1],ye=P[ke][h+2];Te===void 0||ye===void 0||(v=Te,m=ye,r&&(r.xaxis&&r.xaxis.p2r?(Ee&&(Te-=r.xaxis._offset),he?Te=hD(r.xaxis,r.xanchor)+Te:Te=cD(r.xaxis,Te)):(Ee&&(Te-=ne.l),oe?Te=oe.x[0]+Te/ne.w:Te=Te/ne.w),r.yaxis&&r.yaxis.p2r?(Ee&&(ye-=r.yaxis._offset),de?ye=hD(r.yaxis,r.yanchor)-ye:ye=cD(r.yaxis,ye)):(Ee&&(ye-=ne.t),oe?ye=oe.y[1]-ye/ne.h:ye=1-ye/ne.h)),P[ke][h+1]=Te,P[ke][h+2]=ye)}s[l].push(P[ke].slice())}}return s};function tg(e,t){return Math.abs(e-t)<=1e-6}function F2(e,t){var r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+i*i)}Ac.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return!1;for(var r=1;r<3;r++){var i=e[0][r]-e[1][r],a=e[3][r]-e[2][r];if(!tg(i,a))return!1;var s=e[0][r]-e[3][r],l=e[1][r]-e[2][r];if(!tg(s,l))return!1}return!tg(e[0][1],e[1][1])&&!tg(e[0][1],e[3][1])?!1:!!(F2(e[0],e[1])*F2(e[0],e[3]))};Ac.pointsOnEllipse=function(e){var t=e.length;if(t!==H0+1)return!1;t=H0;for(var r=0;r<t;r++){var i=(t*2-r)%t,a=(t/2+i)%t,s=(t/2+r)%t;if(!tg(F2(e[r],e[s]),F2(e[i],e[a])))return!1}return!0};Ac.handleEllipse=function(e,t,r){if(!e)return[t,r];var i=Ac.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]}),a=(i.x1+i.x0)/2,s=(i.y1+i.y0)/2,l=(i.x1-i.x0)/2,f=(i.y1-i.y0)/2;l||(l=f=f/v4),f||(f=l=l/v4);for(var h=[],v=0;v<H0;v++){var m=v*2*Math.PI/H0;h.push([a+l*Math.cos(m),s+f*Math.sin(m)])}return h};Ac.ellipseOver=function(e){var t=e.x0,r=e.y0,i=e.x1,a=e.y1,s=i-t,l=a-r;t-=s,r-=l;var f=(t+i)/2,h=(r+a)/2,v=v4;return s*=v,l*=v,{x0:f-s,y0:h-l,x1:f+s,y1:h+l}};Ac.fixDatesForPaths=function(e,t,r){var i=t.type==="date",a=r.type==="date";if(!i&&!a)return e;for(var s=0;s<e.length;s++)for(var l=0;l<e[s].length;l++)for(var f=0;f+2<e[s][l].length;f+=2)i&&(e[s][l][f+1]=e[s][l][f+1].replace(" ","_")),a&&(e[s][l][f+2]=e[s][l][f+2].replace(" ","_"));return e}});var B2=ve((P1e,wD)=>{"use strict";var _D=Sd(),pae=_D.drawMode,mae=_D.openMode,G0=I2(),pD=G0.i000,mD=G0.i090,yD=G0.i180,gD=G0.i270,yae=G0.cos45,gae=G0.sin45,xD=R2(),q2=xD.p2r,Uh=xD.r2p,_ae=Ph(),xae=_ae.clearOutline,N2=Oh(),bae=N2.readPaths,wae=N2.writePaths,Tae=N2.ellipseOver,Aae=N2.fixDatesForPaths;function Mae(e,t){if(e.length){var r=e[0][0];if(r){var i=t.gd,a=t.isActiveShape,s=t.dragmode,l=(i.layout||{}).shapes||[];if(!pae(s)&&a!==void 0){var f=i._fullLayout._activeShapeIndex;if(f<l.length)switch(i._fullLayout.shapes[f].type){case"rect":s="drawrect";break;case"circle":s="drawcircle";break;case"line":s="drawline";break;case"path":var h=l[f].path||"";h[h.length-1]==="Z"?s="drawclosedpath":s="drawopenpath";break}}var v=bD(e,t,s);xae(i);for(var m=t.editHelpers,b=(m||{}).modifyItem,T=[],S=0;S<l.length;S++){var C=i._fullLayout.shapes[S];if(T[S]=C._input,a!==void 0&&S===i._fullLayout._activeShapeIndex){var P=v;switch(C.type){case"line":case"rect":case"circle":b("x0",P.x0-(C.x0shift||0)),b("x1",P.x1-(C.x1shift||0)),b("y0",P.y0-(C.y0shift||0)),b("y1",P.y1-(C.y1shift||0));break;case"path":b("path",P.path);break}}}return a===void 0?(T.push(v),T):m?m.getUpdateObj():{}}}}function bD(e,t,r){var i=e[0][0],a=t.gd,s=i.getAttribute("d"),l=a._fullLayout.newshape,f=t.plotinfo,h=t.isActiveShape,v=f.xaxis,m=f.yaxis,b=!!f.domain||!f.xaxis,T=!!f.domain||!f.yaxis,S=mae(r),C=bae(s,a,f,h),P={editable:!0,visible:l.visible,name:l.name,showlegend:l.showlegend,legend:l.legend,legendwidth:l.legendwidth,legendgroup:l.legendgroup,legendgrouptitle:{text:l.legendgrouptitle.text,font:l.legendgrouptitle.font},legendrank:l.legendrank,label:l.label,xref:b?"paper":v._id,yref:T?"paper":m._id,layer:l.layer,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}};S||(P.fillcolor=l.fillcolor,P.fillrule=l.fillrule);var E;if(C.length===1&&(E=C[0]),E&&E.length===5&&r==="drawrect")P.type="rect",P.x0=E[0][1],P.y0=E[0][2],P.x1=E[2][1],P.y1=E[2][2];else if(E&&r==="drawline")P.type="line",P.x0=E[0][1],P.y0=E[0][2],P.x1=E[1][1],P.y1=E[1][2];else if(E&&r==="drawcircle"){P.type="circle";var I=E[pD][1],q=E[mD][1],B=E[yD][1],z=E[gD][1],O=E[pD][2],H=E[mD][2],V=E[yD][2],W=E[gD][2],K=f.xaxis&&(f.xaxis.type==="date"||f.xaxis.type==="log"),re=f.yaxis&&(f.yaxis.type==="date"||f.yaxis.type==="log");K&&(I=Uh(f.xaxis,I),q=Uh(f.xaxis,q),B=Uh(f.xaxis,B),z=Uh(f.xaxis,z)),re&&(O=Uh(f.yaxis,O),H=Uh(f.yaxis,H),V=Uh(f.yaxis,V),W=Uh(f.yaxis,W));var oe=(q+z)/2,ne=(O+V)/2,he=(z-q+B-I)/2,de=(W-H+V-O)/2,Ee=Tae({x0:oe,y0:ne,x1:oe+he*yae,y1:ne+de*gae});K&&(Ee.x0=q2(f.xaxis,Ee.x0),Ee.x1=q2(f.xaxis,Ee.x1)),re&&(Ee.y0=q2(f.yaxis,Ee.y0),Ee.y1=q2(f.yaxis,Ee.y1)),P.x0=Ee.x0,P.y0=Ee.y0,P.x1=Ee.x1,P.y1=Ee.y1}else P.type="path",v&&m&&Aae(C,v,m),P.path=wae(C),E=null;return P}wD.exports={newShapes:Mae,createShapeObj:bD}});var p4=ve((D1e,TD)=>{"use strict";var Sae=Sd(),kae=Sae.selectMode,Cae=Ph(),Eae=Cae.clearOutline,d4=Oh(),Lae=d4.readPaths,Pae=d4.writePaths,Dae=d4.fixDatesForPaths;TD.exports=function(t,r){if(t.length){var i=t[0][0];if(i){var a=i.getAttribute("d"),s=r.gd,l=s._fullLayout.newselection,f=r.plotinfo,h=f.xaxis,v=f.yaxis,m=r.isActiveSelection,b=r.dragmode,T=(s.layout||{}).selections||[];if(!kae(b)&&m!==void 0){var S=s._fullLayout._activeSelectionIndex;if(S<T.length)switch(s._fullLayout.selections[S].type){case"rect":b="select";break;case"path":b="lasso";break}}var C=Lae(a,s,f,m),P={xref:h._id,yref:v._id,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}},E;C.length===1&&(E=C[0]),E&&E.length===5&&b==="select"?(P.type="rect",P.x0=E[0][1],P.y0=E[0][2],P.x1=E[2][1],P.y1=E[2][2]):(P.type="path",h&&v&&Dae(C,h,v),P.path=Pae(C),E=null),Eae(s);for(var I=r.editHelpers,q=(I||{}).modifyItem,B=[],z=0;z<T.length;z++){var O=s._fullLayout.selections[z];if(!O){B[z]=O;continue}if(B[z]=O._input,m!==void 0&&z===s._fullLayout._activeSelectionIndex){var H=P;switch(O.type){case"rect":q("x0",H.x0),q("x1",H.x1),q("y0",H.y0),q("y1",H.y1);break;case"path":q("path",H.path);break}}}return m===void 0?(B.push(P),B):I?I.getUpdateObj():{}}}}});var rg=ve((z1e,AD)=>{"use strict";AD.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}});var Vh=ve(ho=>{"use strict";var kd=rg(),MD=Ft(),O2=Yi();ho.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(t){return t}};ho.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(t){return t}};ho.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}};ho.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};ho.extractPathCoords=function(e,t,r){var i=[],a=e.match(kd.segmentRE);return a.forEach(function(s){var l=t[s.charAt(0)].drawn;if(l!==void 0){var f=s.substr(1).match(kd.paramRE);if(!(!f||f.length<l)){var h=f[l],v=r?h:MD.cleanNumber(h);i.push(v)}}}),i};ho.getDataToPixel=function(e,t,r,i,a){var s=e._fullLayout._size,l;if(t)if(a==="domain")l=function(h){return t._length*(i?1-h:h)+t._offset};else{var f=ho.shapePositionToRange(t);l=function(h){var v=ag(t,r);return t._offset+t.r2p(f(h,!0))+v},t.type==="date"&&(l=ho.decodeDate(l))}else i?l=function(h){return s.t+s.h*(1-h)}:l=function(h){return s.l+s.w*h};return l};ho.getPixelToData=function(e,t,r,i){var a=e._fullLayout._size,s;if(t)if(i==="domain")s=function(f){var h=(f-t._offset)/t._length;return r?1-h:h};else{var l=ho.rangeToShapePosition(t);s=function(f){return l(t.p2r(f-t._offset))}}else r?s=function(f){return 1-(f-a.t)/a.h}:s=function(f){return(f-a.l)/a.w};return s};ho.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1,i=Math.round(e);return r?i+.5:i};ho.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[r.xref+r.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},r.xref&&r.xref!=="paper"&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(i.yaxis=e._fullLayout[r.yref+"axis"])),i.xsizemode=r.xsizemode,i.ysizemode=r.ysizemode,i.xanchor=r.xanchor,i.yanchor=r.yanchor,{options:r,plotinfo:i}};ho.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},i=e._fullLayout._plots[r.xref+r.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},r.xref&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(i.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:i}};ho.getPathString=function(e,t){var r=t.type,i=O2.getRefType(t.xref),a=O2.getRefType(t.yref),s=O2.getFromId(e,t.xref),l=O2.getFromId(e,t.yref),f=e._fullLayout._size,h,v,m,b,T=ag(s,t.x0shift),S=ag(s,t.x1shift),C=ag(l,t.y0shift),P=ag(l,t.y1shift),E,I,q,B;if(s?i==="domain"?v=function(he){return s._offset+s._length*he}:(h=ho.shapePositionToRange(s),v=function(he){return s._offset+s.r2p(h(he,!0))}):v=function(he){return f.l+f.w*he},l?a==="domain"?b=function(he){return l._offset+l._length*(1-he)}:(m=ho.shapePositionToRange(l),b=function(he){return l._offset+l.r2p(m(he,!0))}):b=function(he){return f.t+f.h*(1-he)},r==="path")return s&&s.type==="date"&&(v=ho.decodeDate(v)),l&&l.type==="date"&&(b=ho.decodeDate(b)),zae(t,v,b);if(t.xsizemode==="pixel"){var z=v(t.xanchor);E=z+t.x0+T,I=z+t.x1+S}else E=v(t.x0)+T,I=v(t.x1)+S;if(t.ysizemode==="pixel"){var O=b(t.yanchor);q=O-t.y0+C,B=O-t.y1+P}else q=b(t.y0)+C,B=b(t.y1)+P;if(r==="line")return"M"+E+","+q+"L"+I+","+B;if(r==="rect")return"M"+E+","+q+"H"+I+"V"+B+"H"+E+"Z";var H=(E+I)/2,V=(q+B)/2,W=Math.abs(H-E),K=Math.abs(V-q),re="A"+W+","+K,oe=H+W+","+V,ne=H+","+(V-K);return"M"+oe+re+" 0 1,1 "+ne+re+" 0 0,1 "+oe+"Z"};function zae(e,t,r){var i=e.path,a=e.xsizemode,s=e.ysizemode,l=e.xanchor,f=e.yanchor;return i.replace(kd.segmentRE,function(h){var v=0,m=h.charAt(0),b=kd.paramIsX[m],T=kd.paramIsY[m],S=kd.numParams[m],C=h.substr(1).replace(kd.paramRE,function(P){return b[v]?a==="pixel"?P=t(l)+Number(P):P=t(P):T[v]&&(s==="pixel"?P=r(f)-Number(P):P=r(P)),v++,v>S&&(P="X"),P});return v>S&&(C=C.replace(/[\s,]*X.*/,""),MD.log("Ignoring extra params in segment "+h)),m+C})}function ag(e,t){t=t||0;var r=0;return t&&e&&(e.type==="category"||e.type==="multicategory")&&(r=(e.r2p(1)-e.r2p(0))*t),r}});var y4=ve((R1e,ED)=>{"use strict";var Iae=Ft(),Z0=Yi(),SD=co(),kD=_i(),Rae=Oh().readPaths,m4=Vh(),Fae=m4.getPathString,CD=s_(),qae=ts().FROM_TL;ED.exports=function(t,r,i,a){if(a.selectAll(".shape-label").remove(),!!(i.label.text||i.label.texttemplate)){var s;if(i.label.texttemplate){var l={};if(i.type!=="path"){var f=Z0.getFromId(t,i.xref),h=Z0.getFromId(t,i.yref);for(var v in CD){var m=CD[v](i,f,h);m!==void 0&&(l[v]=m)}}s=Iae.texttemplateStringForShapes(i.label.texttemplate,{},t._fullLayout._d3locale,l)}else s=i.label.text;var b={"data-index":r},T=i.label.font,S={"data-notex":1},C=a.append("g").attr(b).classed("shape-label",!0),P=C.append("text").attr(S).classed("shape-label-text",!0).text(s),E,I,q,B;if(i.path){var z=Fae(t,i),O=Rae(z,t);E=1/0,q=1/0,I=-1/0,B=-1/0;for(var H=0;H<O.length;H++)for(var V=0;V<O[H].length;V++)for(var W=O[H][V],K=1;K<W.length;K+=2){var re=W[K],oe=W[K+1];E=Math.min(E,re),I=Math.max(I,re),q=Math.min(q,oe),B=Math.max(B,oe)}}else{var ne=Z0.getFromId(t,i.xref),he=i.x0shift,de=i.x1shift,Ee=Z0.getRefType(i.xref),ke=Z0.getFromId(t,i.yref),Te=i.y0shift,ye=i.y1shift,Ae=Z0.getRefType(i.yref),Me=function(rt,Tt){var St=m4.getDataToPixel(t,ne,Tt,!1,Ee);return St(rt)},De=function(rt,Tt){var St=m4.getDataToPixel(t,ke,Tt,!0,Ae);return St(rt)};E=Me(i.x0,he),I=Me(i.x1,de),q=De(i.y0,Te),B=De(i.y1,ye)}var at=i.label.textangle;at==="auto"&&(i.type==="line"?at=Nae(E,q,I,B):at=0),P.call(function(rt){return rt.call(kD.font,T).attr({}),SD.convertToTspans(rt,t),rt});var pt=kD.bBox(P.node()),lt=Bae(E,q,I,B,i,at,pt),ut=lt.textx,Ye=lt.texty,xt=lt.xanchor;P.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[xt],y:Ye,x:ut,transform:"rotate("+at+","+ut+","+Ye+")"}).call(SD.positionText,ut,Ye)}};function Nae(e,t,r,i){var a,s;return s=Math.abs(r-e),r>=e?a=t-i:a=i-t,-180/Math.PI*Math.atan2(a,s)}function Bae(e,t,r,i,a,s,l){var f=a.label.textposition,h=a.label.textangle,v=a.label.padding,m=a.type,b=Math.PI/180*s,T=Math.sin(b),S=Math.cos(b),C=a.label.xanchor,P=a.label.yanchor,E,I,q,B;if(m==="line"){f==="start"?(E=e,I=t):f==="end"?(E=r,I=i):(E=(e+r)/2,I=(t+i)/2),C==="auto"&&(f==="start"?h==="auto"?r>e?C="left":r<e?C="right":C="center":r>e?C="right":r<e?C="left":C="center":f==="end"?h==="auto"?r>e?C="right":r<e?C="left":C="center":r>e?C="left":r<e?C="right":C="center":C="center");var z={left:1,center:0,right:-1},O={bottom:-1,middle:0,top:1};if(h==="auto"){var H=O[P];q=-v*T*H,B=v*S*H}else{var V=z[C],W=O[P];q=v*V,B=v*W}E=E+q,I=I+B}else q=v+3,f.indexOf("right")!==-1?(E=Math.max(e,r)-q,C==="auto"&&(C="right")):f.indexOf("left")!==-1?(E=Math.min(e,r)+q,C==="auto"&&(C="left")):(E=(e+r)/2,C==="auto"&&(C="center")),f.indexOf("top")!==-1?I=Math.min(t,i):f.indexOf("bottom")!==-1?I=Math.max(t,i):I=(t+i)/2,B=v,P==="bottom"?I=I-B:P==="top"&&(I=I+B);var K=qae[P],re=a.label.font.size,oe=l.height,ne=(oe*K-re)*T,he=-(oe*K-re)*S;return{textx:E+ne,texty:I+he,xanchor:C}}});var H2=ve((F1e,qD)=>{"use strict";var Oae=Ft(),Uae=Oae.strTranslate,LD=Xl(),zD=Sd(),Vae=zD.drawMode,ID=zD.selectMode,RD=la(),PD=Ua(),V2=I2(),Hae=V2.i000,Gae=V2.i090,Zae=V2.i180,Yae=V2.i270,Wae=Ph(),FD=Wae.clearOutlineControllers,_4=Oh(),U2=_4.pointsOnRectangle,g4=_4.pointsOnEllipse,Xae=_4.writePaths,jae=B2().newShapes,Jae=B2().createShapeObj,Kae=p4(),Qae=y4();qD.exports=function e(t,r,i,a){a||(a=0);var s=i.gd;function l(){e(t,r,i,a++),(g4(t[0])||i.hasText)&&f({redrawing:!0})}function f(Te){var ye={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,ye=jae(r,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,ye=Kae(r,i),s._fullLayout._reselect=!0),Object.keys(ye).length&&RD.call((Te||{}).redrawing?"relayout":"_guiRelayout",s,ye)}var h=s._fullLayout,v=h._zoomlayer,m=i.dragmode,b=Vae(m),T=ID(m);(b||T)&&(s._fullLayout._outlining=!0),FD(s),r.attr("d",Xae(t));var S,C,P,E,I;if(!a&&(i.isActiveShape||i.isActiveSelection)){I=$ae([],t);var q=v.append("g").attr("class","outline-controllers");re(q),ke()}if(b&&i.hasText){var B=v.select(".label-temp"),z=Jae(r,i,i.dragmode);Qae(s,"label-temp",z,B)}function O(Te){P=+Te.srcElement.getAttribute("data-i"),E=+Te.srcElement.getAttribute("data-j"),S[P][E].moveFn=H}function H(Te,ye){if(t.length){var Ae=I[P][E][1],Me=I[P][E][2],De=t[P],at=De.length;if(U2(De)){var pt=Te,lt=ye;if(i.isActiveSelection){var ut=DD(De,E);ut[1]===De[E][1]?lt=0:pt=0}for(var Ye=0;Ye<at;Ye++)if(Ye!==E){var xt=De[Ye];xt[1]===De[E][1]&&(xt[1]=Ae+pt),xt[2]===De[E][2]&&(xt[2]=Me+lt)}if(De[E][1]=Ae+pt,De[E][2]=Me+lt,!U2(De))for(var rt=0;rt<at;rt++)for(var Tt=0;Tt<De[rt].length;Tt++)De[rt][Tt]=I[P][rt][Tt]}else De[E][1]=Ae+Te,De[E][2]=Me+ye;l()}}function V(){f()}function W(){if(t.length&&t[P]&&t[P].length){for(var Te=[],ye=0;ye<t[P].length;ye++)ye!==E&&Te.push(t[P][ye]);Te.length>1&&!(Te.length===2&&Te[1][0]==="Z")&&(E===0&&(Te[0][0]="M"),t[P]=Te,l(),f())}}function K(Te,ye){if(Te===2){P=+ye.srcElement.getAttribute("data-i"),E=+ye.srcElement.getAttribute("data-j");var Ae=t[P];!U2(Ae)&&!g4(Ae)&&W()}}function re(Te){S=[];for(var ye=0;ye<t.length;ye++){var Ae=t[ye],Me=U2(Ae),De=!Me&&g4(Ae);S[ye]=[];for(var at=Ae.length,pt=0;pt<at;pt++)if(Ae[pt][0]!=="Z"&&!(De&&pt!==Hae&&pt!==Gae&&pt!==Zae&&pt!==Yae)){var lt=Me&&i.isActiveSelection,ut;lt&&(ut=DD(Ae,pt));var Ye=Ae[pt][1],xt=Ae[pt][2],rt=Te.append(lt?"rect":"circle").attr("data-i",ye).attr("data-j",pt).style({fill:PD.background,stroke:PD.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(lt){var Tt=ut[1]-Ye,St=ut[2]-xt,mt=St?5:Math.max(Math.min(25,Math.abs(Tt)-5),5),ge=Tt?5:Math.max(Math.min(25,Math.abs(St)-5),5);rt.classed(St?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",mt).attr("height",ge).attr("x",Ye-mt/2).attr("y",xt-ge/2).attr("transform",Uae(Tt/2,St/2))}else rt.classed("cursor-grab",!0).attr("r",5).attr("cx",Ye).attr("cy",xt);S[ye][pt]={element:rt.node(),gd:s,prepFn:O,doneFn:V,clickFn:K},LD.init(S[ye][pt])}}}function oe(Te,ye){if(t.length)for(var Ae=0;Ae<t.length;Ae++)for(var Me=0;Me<t[Ae].length;Me++)for(var De=0;De+2<t[Ae][Me].length;De+=2)t[Ae][Me][De+1]=I[Ae][Me][De+1]+Te,t[Ae][Me][De+2]=I[Ae][Me][De+2]+ye}function ne(Te,ye){oe(Te,ye),l()}function he(Te){P=+Te.srcElement.getAttribute("data-i"),P||(P=0),C[P].moveFn=ne}function de(){f()}function Ee(Te){Te===2&&eie(s)}function ke(){if(C=[],!!t.length){var Te=0;C[Te]={element:r[0][0],gd:s,prepFn:he,doneFn:de,clickFn:Ee},LD.init(C[Te])}}};function $ae(e,t){for(var r=0;r<t.length;r++){var i=t[r];e[r]=[];for(var a=0;a<i.length;a++){e[r][a]=[];for(var s=0;s<i[a].length;s++)e[r][a][s]=i[a][s]}}return e}function DD(e,t){var r=e[t][1],i=e[t][2],a=e.length,s,l,f;return s=(t+1)%a,l=e[s][1],f=e[s][2],l===r&&f===i&&(s=(t+2)%a,l=e[s][1],f=e[s][2]),[s,l,f]}function eie(e){if(ID(e._fullLayout.dragmode)){FD(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var i=[],a=0;a<r.length;a++)a!==t&&i.push(r[a]);delete e._fullLayout._activeSelectionIndex;var s=e._fullLayout.selections[t];e._fullLayout._deselect={xref:s.xref,yref:s.yref},RD.call("_guiRelayout",e,{selections:i})}}}});var G2=ve((Y1e,GD)=>{"use strict";var q1e=ja(),tie=la(),N1e=Ft(),B1e=Yi(),O1e=Oh().readPaths,U1e=H2(),BD=y4(),rie=Ph().clearOutlineControllers,ND=Ua(),OD=_i(),V1e=Di().arrayEditor,H1e=Xl(),G1e=Bh(),Z1e=rg(),UD=Vh(),aie=UD.getPathString;GD.exports={draw:iie,drawOne:HD,eraseActiveShape:oie,drawLabel:BD};function iie(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var i=t._plots[r].shapelayer;i&&(i.selectAll("path").remove(),i.selectAll("text").remove())}for(var a=0;a<t.shapes.length;a++)t.shapes[a].visible===!0&&HD(e,a)}function VD(e){return!e._context.edits.shapePosition}function HD(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=UD.makeShapesOptionsAndPlotinfo(e,t),i=r.options,a=r.plotinfo;if(!i._input||i.visible!==!0)return;if(i.layer==="above")l(e._fullLayout._shapeUpperLayer);else if(i.xref==="paper"||i.yref==="paper")l(e._fullLayout._shapeLowerLayer);else if(i.layer==="between")l(a.shapelayerBetween);else if(a._hadPlotinfo){var s=a.mainplotinfo||a;l(s.shapelayer)}else l(e._fullLayout._shapeLowerLayer);function l(f){var h=aie(e,i),v={"data-index":t,"fill-rule":i.fillrule,d:h,class:"shape-path"};console.log("Drawing shape:",t);var m=i.opacity,b=i.fillcolor,T=i.line.width?i.line.color:"rgba(0,0,0,0)",S=i.line.width,C=i.line.dash;!S&&i.editable===!0&&(S=5,C="solid");var P=h[h.length-1]!=="Z",E=VD(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;E&&(b=P?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,m=e._fullLayout.activeshape.opacity);var I=f.append("g").classed("shape-group",!0).attr({"data-index":t}),q=I.append("path").attr(v).style("opacity",m).call(ND.stroke,T).call(ND.fill,b).call(OD.dashLine,C,S);return q.style({cursor:"pointer","pointer-events":"all","z-index":"-1"}),q.node().addEventListener("click",function(B){if(!e._hoverdata){console.log("Shape clicked:",t),B.stopPropagation(),B.preventDefault();var z={points:[{curveNumber:-1,pointNumber:t,pointIndex:t,data:{shapeId:i.id||`shape-${t}`,type:"shape"},x:i.x0,y:i.y0,customdata:{type:"shape",index:t,shapeId:i.id||`shape-${t}`,x0:i.x0,y0:i.y0,x1:i.x1,y1:i.y1,fillcolor:i.fillcolor}}]};return console.log("Emitting click event with data:",JSON.stringify(z,null,2)),e&&typeof e.emit=="function"&&(e._hoverdata=null,e._fullLayout&&(e._fullLayout._hoversubplot=null),e.emit("plotly_click",z)),!1}}),nie(I,e,i),BD(e,t,i,I),e.on("plotly_unhover",function(){q.style("pointer-events","all")}),e.on("plotly_hover",function(){q.style("pointer-events","none")}),q}}function nie(e,t,r){var i=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");OD.setClipUrl(e,i?"clip"+t._fullLayout._uid+i:null,t)}function oie(e){if(VD(e)){rie(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var i=[],a=0;a<r.length;a++)a!==t&&i.push(r[a]);return delete e._fullLayout._activeShapeIndex,tie.call("_guiRelayout",e,{shapes:i})}}}});var w4=ve((W1e,$D)=>{"use strict";var Kl=la(),ZD=eo(),YD=$n(),Ja=D2(),sie=G2().eraseActiveShape,Z2=Ft(),Ia=Z2._,Ka=$D.exports={};Ka.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?Ia(e,"Download plot as a png"):Ia(e,"Download plot")},icon:Ja.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};Z2.notifier(Ia(e,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(i){i in t&&(r[i]=t[i])}),Kl.call("downloadImage",e,r).then(function(i){Z2.notifier(Ia(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){Z2.notifier(Ia(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Ka.sendDataToCloud={name:"sendDataToCloud",title:function(e){return Ia(e,"Edit in Chart Studio")},icon:Ja.disk,click:function(e){ZD.sendDataToCloud(e)}};Ka.editInChartStudio={name:"editInChartStudio",title:function(e){return Ia(e,"Edit in Chart Studio")},icon:Ja.pencil,click:function(e){ZD.sendDataToCloud(e)}};Ka.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return Ia(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Ja.zoombox,click:ns};Ka.pan2d={name:"pan2d",_cat:"pan",title:function(e){return Ia(e,"Pan")},attr:"dragmode",val:"pan",icon:Ja.pan,click:ns};Ka.select2d={name:"select2d",_cat:"select",title:function(e){return Ia(e,"Box Select")},attr:"dragmode",val:"select",icon:Ja.selectbox,click:ns};Ka.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return Ia(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Ja.lasso,click:ns};Ka.drawclosedpath={name:"drawclosedpath",title:function(e){return Ia(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Ja.drawclosedpath,click:ns};Ka.drawopenpath={name:"drawopenpath",title:function(e){return Ia(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Ja.drawopenpath,click:ns};Ka.drawline={name:"drawline",title:function(e){return Ia(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Ja.drawline,click:ns};Ka.drawrect={name:"drawrect",title:function(e){return Ia(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Ja.drawrect,click:ns};Ka.drawcircle={name:"drawcircle",title:function(e){return Ia(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Ja.drawcircle,click:ns};Ka.eraseshape={name:"eraseshape",title:function(e){return Ia(e,"Erase active shape")},icon:Ja.eraseshape,click:sie};Ka.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return Ia(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:ns};Ka.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return Ia(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:ns};Ka.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return Ia(e,"Autoscale")},attr:"zoom",val:"auto",icon:Ja.autoscale,click:ns};Ka.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return Ia(e,"Reset axes")},attr:"zoom",val:"reset",icon:Ja.home,click:ns};Ka.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return Ia(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Ja.tooltip_basic,gravity:"ne",click:ns};Ka.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return Ia(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Ja.tooltip_compare,gravity:"ne",click:ns};function ns(e,t){var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout,l={},f=YD.list(e,null,!0),h=s._cartesianSpikesEnabled,v,m;if(i==="zoom"){var b=a==="in"?.5:2,T=(1+b)/2,S=(1-b)/2,C;for(m=0;m<f.length;m++)if(v=f[m],!v.fixedrange)if(C=v._name,a==="auto")l[C+".autorange"]=!0;else if(a==="reset")v._rangeInitial0===void 0&&v._rangeInitial1===void 0?l[C+".autorange"]=!0:v._rangeInitial0===void 0?(l[C+".autorange"]=v._autorangeInitial,l[C+".range"]=[null,v._rangeInitial1]):v._rangeInitial1===void 0?(l[C+".range"]=[v._rangeInitial0,null],l[C+".autorange"]=v._autorangeInitial):l[C+".range"]=[v._rangeInitial0,v._rangeInitial1],v._showSpikeInitial!==void 0&&(l[C+".showspikes"]=v._showSpikeInitial,h==="on"&&!v._showSpikeInitial&&(h="off"));else{var P=[v.r2l(v.range[0]),v.r2l(v.range[1])],E=[T*P[0]+S*P[1],T*P[1]+S*P[0]];l[C+".range[0]"]=v.l2r(E[0]),l[C+".range[1]"]=v.l2r(E[1])}}else i==="hovermode"&&(a==="x"||a==="y")&&(a=s._isHoriz?"y":"x",r.setAttribute("data-val",a)),l[i]=a;s._cartesianSpikesEnabled=h,Kl.call("_guiRelayout",e,l)}Ka.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return Ia(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Ja.zoombox,click:Y2};Ka.pan3d={name:"pan3d",_cat:"pan",title:function(e){return Ia(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Ja.pan,click:Y2};Ka.orbitRotation={name:"orbitRotation",title:function(e){return Ia(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Ja["3d_rotate"],click:Y2};Ka.tableRotation={name:"tableRotation",title:function(e){return Ia(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Ja["z-axis"],click:Y2};function Y2(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout._subplots.gl3d||[],l={},f=i.split("."),h=0;h<s.length;h++)l[s[h]+"."+f[1]]=a;var v=a==="pan"?a:"zoom";l.dragmode=v,Kl.call("_guiRelayout",e,l)}Ka.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return Ia(e,"Reset camera to default")},attr:"resetDefault",icon:Ja.home,click:x4};Ka.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return Ia(e,"Reset camera to last save")},attr:"resetLastSave",icon:Ja.movie,click:x4};function x4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=i==="resetLastSave",s=i==="resetDefault",l=e._fullLayout,f=l._subplots.gl3d||[],h={},v=0;v<f.length;v++){var m=f[v],b=m+".camera",T=m+".aspectratio",S=m+".aspectmode",C=l[m]._scene,P;a?(h[b+".up"]=C.viewInitial.up,h[b+".eye"]=C.viewInitial.eye,h[b+".center"]=C.viewInitial.center,P=!0):s&&(h[b+".up"]=null,h[b+".eye"]=null,h[b+".center"]=null,P=!0),P&&(h[T+".x"]=C.viewInitial.aspectratio.x,h[T+".y"]=C.viewInitial.aspectratio.y,h[T+".z"]=C.viewInitial.aspectratio.z,h[S]=C.viewInitial.aspectmode)}Kl.call("_guiRelayout",e,h)}Ka.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return Ia(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ja.tooltip_basic,gravity:"ne",click:lie};function WD(e,t){var r=t.currentTarget,i=r._previousVal,a=e._fullLayout,s=a._subplots.gl3d||[],l=["xaxis","yaxis","zaxis"],f={},h={};if(i)h=i,r._previousVal=null;else{for(var v=0;v<s.length;v++){var m=s[v],b=a[m],T=m+".hovermode";f[T]=b.hovermode,h[T]=!1;for(var S=0;S<3;S++){var C=l[S],P=m+"."+C+".showspikes";h[P]=!1,f[P]=b[C].showspikes}}r._previousVal=f}return h}function lie(e,t){var r=WD(e,t);Kl.call("_guiRelayout",e,r)}Ka.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return Ia(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:b4};Ka.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return Ia(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:b4};Ka.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return Ia(e,"Reset")},attr:"reset",val:null,icon:Ja.autoscale,click:b4};Ka.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return Ia(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ja.tooltip_basic,gravity:"ne",click:jD};function b4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,s=e._fullLayout,l=s._subplots.geo||[],f=0;f<l.length;f++){var h=l[f],v=s[h];if(i==="zoom"){var m=v.projection.scale,b=a==="in"?2*m:.5*m;Kl.call("_guiRelayout",e,h+".projection.scale",b)}}i==="reset"&&Y0(e,"geo")}Ka.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return Ia(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Ja.tooltip_basic,gravity:"ne",click:jD};function XD(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function jD(e){var t=XD(e);Kl.call("_guiRelayout",e,"hovermode",t)}Ka.resetViewSankey={name:"resetSankeyGroup",title:function(e){return Ia(e,"Reset view")},icon:Ja.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var i=e._fullData[r]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}Kl.call("restyle",e,t)}};Ka.toggleHover={name:"toggleHover",title:function(e){return Ia(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Ja.tooltip_basic,gravity:"ne",click:function(e,t){var r=WD(e,t);r.hovermode=XD(e),Kl.call("_guiRelayout",e,r)}};Ka.resetViews={name:"resetViews",title:function(e){return Ia(e,"Reset views")},icon:Ja.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),ns(e,t),r.setAttribute("data-attr","resetLastSave"),x4(e,t),Y0(e,"geo"),Y0(e,"mapbox"),Y0(e,"map")}};Ka.toggleSpikelines={name:"toggleSpikelines",title:function(e){return Ia(e,"Toggle Spike Lines")},icon:Ja.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",Kl.call("_guiRelayout",e,uie(e))}};function uie(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",i=YD.list(e,null,!0),a={},s=0;s<i.length;s++){var l=i[s];a[l._name+".showspikes"]=r?!0:l._showSpikeInitial}return a}Ka.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return Ia(e,"Reset view")},attr:"reset",icon:Ja.home,click:function(e){Y0(e,"mapbox")}};Ka.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(e){return Ia(e,"Reset view")},attr:"reset",icon:Ja.home,click:function(e){Y0(e,"map")}};Ka.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return Ia(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:JD};Ka.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(e){return Ia(e,"Zoom in")},attr:"zoom",val:"in",icon:Ja.zoom_plus,click:KD};Ka.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return Ia(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:JD};Ka.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(e){return Ia(e,"Zoom out")},attr:"zoom",val:"out",icon:Ja.zoom_minus,click:KD};function JD(e,t){QD(e,t,"mapbox")}function KD(e,t){QD(e,t,"map")}function QD(e,t,r){for(var i=t.currentTarget,a=i.getAttribute("data-val"),s=e._fullLayout,l=s._subplots[r]||[],f=1.05,h={},v=0;v<l.length;v++){var m=l[v],b=s[m].zoom,T=a==="in"?f*b:b/f;h[m+".zoom"]=T}Kl.call("_guiRelayout",e,h)}function Y0(e,t){for(var r=e._fullLayout,i=r._subplots[t]||[],a={},s=0;s<i.length;s++)for(var l=i[s],f=r[l]._subplot,h=f.viewInitial,v=Object.keys(h),m=0;m<v.length;m++){var b=v[m];a[l+"."+b]=h[b]}Kl.call("_guiRelayout",e,a)}});var T4=ve((X1e,az)=>{"use strict";var ez=w4(),fie=Object.keys(ez),tz=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],rz=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(tz),W0=[],cie=function(e){if(rz.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();W0.indexOf(t)===-1&&W0.push(t),W0.indexOf(r)===-1&&W0.push(r)}};fie.forEach(function(e){cie(ez[e])});W0.sort();az.exports={DRAW_MODES:tz,backButtons:rz,foreButtons:W0}});var A4=ve((J1e,iz)=>{"use strict";var j1e=T4();iz.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}});var oz=ve((K1e,nz)=>{"use strict";var hie=Ft(),ig=Ua(),vie=Di(),die=A4();nz.exports=function(t,r){var i=t.modebar||{},a=vie.newContainer(r,"modebar");function s(f,h){return hie.coerce(i,a,die,f,h)}s("orientation"),s("bgcolor",ig.addOpacity(r.paper_bgcolor,.5));var l=ig.contrast(ig.rgb(r.modebar.bgcolor));s("color",ig.addOpacity(l,.3)),s("activecolor",ig.addOpacity(l,.7)),s("uirevision",r.uirevision),s("add"),s("remove")}});var fz=ve((Q1e,uz)=>{"use strict";var M4=ja(),pie=Da(),W2=Ft(),sz=D2(),mie=N1().version,yie=new DOMParser;function lz(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var Rf=lz.prototype;Rf.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,a="modebar-"+i._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var s=i.modebar,l="#"+a+" .modebar-group";document.querySelectorAll(l).forEach(function(b){b.style.backgroundColor=s.bgcolor}),W2.setStyleOnHover("#"+a+" .modebar-btn",".active",".icon path","fill: "+s.activecolor,"fill: "+s.color);var f=!this.hasButtons(t),h=this.hasLogo!==r.displaylogo,v=this.locale!==r.locale;if(this.locale=r.locale,(f||h||v)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var m=this.getLogo();r.watermark&&(m.className=m.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(m,this.element.childNodes[0]):this.element.appendChild(m),this.hasLogo=!0}this.updateActiveButton()};Rf.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=t.createGroup();r.forEach(function(a){var s=a.name;if(!s)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(s)!==-1)throw new Error("button name '"+s+"' is taken");t.buttonsNames.push(s);var l=t.createButton(a);t.buttonElements.push(l),i.appendChild(l)}),t.element.appendChild(i)})};Rf.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";var t=this.graphInfo._fullLayout.modebar;return e.style.backgroundColor=t.bgcolor,e};Rf.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&r.setAttribute("data-title",i),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var a=e.val;a!==void 0&&(typeof a=="function"&&(a=a(this.graphInfo)),r.setAttribute("data-val",a));var s=e.click;if(typeof s!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(f){e.click(t.graphInfo,f),t.updateActiveButton(f.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&M4.select(r).classed("active",!0);var l=e.icon;return typeof l=="function"?r.appendChild(l()):r.appendChild(this.createIcon(l||sz.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};Rf.createIcon=function(e){var t=pie(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(r,"svg"),i.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",e.path),e.transform?a.setAttribute("transform",e.transform):e.ascent!==void 0&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(a)}if(e.svg){var s=yie.parseFromString(e.svg,"application/xml");i=s.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};Rf.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var a=i.getAttribute("data-val")||!0,s=i.getAttribute("data-attr"),l=i.getAttribute("data-toggle")==="true",f=M4.select(i),h=function(b,T){var S=t.modebar,C=b.querySelector(".icon path");C&&(T||b.matches(":hover")?C.style.fill=S.activecolor:C.style.fill=S.color)};if(l){if(s===r){var v=!f.classed("active");f.classed("active",v),h(i,v)}}else{var m=s===null?s:W2.nestedProperty(t,s).get();f.classed("active",m===a),h(i,m===a)}})};Rf.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var i=0;i<e[r].length;i++)if(e[r][i].name!==t[r][i].name)return!1}return!0};function gie(e){return e+" (v"+mie+")"}Rf.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",gie(W2._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(sz.newplotlylogo)),e.appendChild(t),e};Rf.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};Rf.destroy=function(){W2.removeElement(this.container.querySelector(".modebar"))};function _ie(e,t){var r=e._fullLayout,i=new lz({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&M4.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}uz.exports=_ie});var vz=ve(($1e,hz)=>{"use strict";var xie=$n(),cz=rs(),S4=la(),bie=xc().isUnifiedHover,wie=fz(),X2=w4(),Tie=T4().DRAW_MODES,Aie=Ft().extendDeep;hz.exports=function(t){var r=t._fullLayout,i=t._context,a=r._modeBar;if(!i.displayModeBar&&!i.watermark){a&&(a.destroy(),delete r._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s=i.modeBarButtons,l;Array.isArray(s)&&s.length?l=Lie(s):!i.displayModeBar&&i.watermark?l=[]:l=Mie(t),a?a.update(t,l):r._modeBar=wie(t,l)};function Mie(e){var t=e._fullLayout,r=e._fullData,i=e._context;function a(ye,Ae){if(typeof Ae=="string"){if(Ae.toLowerCase()===ye.toLowerCase())return!0}else{var Me=Ae.name,De=Ae._cat||Ae.name;if(Me===ye||De===ye.toLowerCase())return!0}return!1}var s=t.modebar.add;typeof s=="string"&&(s=[s]);var l=t.modebar.remove;typeof l=="string"&&(l=[l]);var f=i.modeBarButtonsToAdd.concat(s.filter(function(ye){for(var Ae=0;Ae<i.modeBarButtonsToRemove.length;Ae++)if(a(ye,i.modeBarButtonsToRemove[Ae]))return!1;return!0})),h=i.modeBarButtonsToRemove.concat(l.filter(function(ye){for(var Ae=0;Ae<i.modeBarButtonsToAdd.length;Ae++)if(a(ye,i.modeBarButtonsToAdd[Ae]))return!1;return!0})),v=t._has("cartesian"),m=t._has("gl3d"),b=t._has("geo"),T=t._has("pie"),S=t._has("funnelarea"),C=t._has("ternary"),P=t._has("mapbox"),E=t._has("map"),I=t._has("polar"),q=t._has("smith"),B=t._has("sankey"),z=Sie(t),O=bie(t.hovermode),H=[];function V(ye){if(ye.length){for(var Ae=[],Me=0;Me<ye.length;Me++){for(var De=ye[Me],at=X2[De],pt=at.name.toLowerCase(),lt=(at._cat||at.name).toLowerCase(),ut=!1,Ye=0;Ye<h.length;Ye++){var xt=h[Ye].toLowerCase();if(xt===pt||xt===lt){ut=!0;break}}ut||Ae.push(X2[De])}H.push(Ae)}}var W=["toImage"];i.showEditInChartStudio?W.push("editInChartStudio"):i.showSendToCloud&&W.push("sendDataToCloud"),V(W);var K=[],re=[],oe=[],ne=[];(v||T||S||C)+b+m+P+E+I+q>1?(re=["toggleHover"],oe=["resetViews"]):b?(K=["zoomInGeo","zoomOutGeo"],re=["hoverClosestGeo"],oe=["resetGeo"]):m?(re=["hoverClosest3d"],oe=["resetCameraDefault3d","resetCameraLastSave3d"]):P?(K=["zoomInMapbox","zoomOutMapbox"],re=["toggleHover"],oe=["resetViewMapbox"]):E?(K=["zoomInMap","zoomOutMap"],re=["toggleHover"],oe=["resetViewMap"]):T?re=["hoverClosestPie"]:B?(re=["hoverClosestCartesian","hoverCompareCartesian"],oe=["resetViewSankey"]):re=["toggleHover"],v&&re.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(Cie(r)||O)&&(re=[]),v&&!z&&(K=["zoomIn2d","zoomOut2d","autoScale2d"],oe[0]!=="resetViews"&&(oe=["resetScale2d"])),m?ne=["zoom3d","pan3d","orbitRotation","tableRotation"]:v&&!z||C?ne=["zoom2d","pan2d"]:P||E||b?ne=["pan2d"]:I&&(ne=["zoom2d"]),kie(r)&&ne.push("select2d","lasso2d");var he=[],de=function(ye){he.indexOf(ye)===-1&&re.indexOf(ye)!==-1&&he.push(ye)};if(Array.isArray(f)){for(var Ee=[],ke=0;ke<f.length;ke++){var Te=f[ke];typeof Te=="string"?(Te=Te.toLowerCase(),Tie.indexOf(Te)!==-1?(t._has("mapbox")||t._has("map")||t._has("cartesian"))&&ne.push(Te):Te==="togglespikelines"?de("toggleSpikelines"):Te==="togglehover"?de("toggleHover"):Te==="hovercompare"?de("hoverCompareCartesian"):Te==="hoverclosest"?(de("hoverClosestCartesian"),de("hoverClosestGeo"),de("hoverClosest3d"),de("hoverClosestPie")):Te==="v1hovermode"&&(de("hoverClosestCartesian"),de("hoverCompareCartesian"),de("hoverClosestGeo"),de("hoverClosest3d"),de("hoverClosestPie"))):Ee.push(Te)}f=Ee}return V(ne),V(K.concat(oe)),V(he),Eie(H,f)}function Sie(e){for(var t=xie.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function kie(e){for(var t=!1,r=0;r<e.length&&!t;r++){var i=e[r];!i._module||!i._module.selectPoints||(S4.traceIs(i,"scatter-like")?(cz.hasMarkers(i)||cz.hasText(i))&&(t=!0):S4.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(t=!0):t=!0)}return t}function Cie(e){for(var t=0;t<e.length;t++)if(!S4.traceIs(e[t],"noHover"))return!1;return!0}function Eie(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function Lie(e){for(var t=Aie([],e),r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var s=i[a];if(typeof s=="string")if(X2[s]!==void 0)t[r][a]=X2[s];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return t}});var k4=ve((e_e,dz)=>{"use strict";dz.exports={moduleType:"component",name:"modebar",layoutAttributes:A4(),supplyLayoutDefaults:oz(),manage:vz()}});var C4=ve((t_e,pz)=>{"use strict";var Pie=ts().FROM_BL;pz.exports=function(t,r,i){i===void 0&&(i=Pie[t.constraintoward||"center"]);var a=[t.r2l(t.range[0]),t.r2l(t.range[1])],s=a[0]+(a[1]-a[0])*i;t.range=t._input.range=[t.l2r(s+(a[0]-s)*r),t.l2r(s+(a[1]-s)*r)],t.setScale()}});var og=ve(ng=>{"use strict";var Cd=Ft(),E4=Zy(),qu=$n().id2name,Die=Iu(),mz=C4(),zie=t2(),Iie=Hi().ALMOST_EQUAL,Rie=ts().FROM_BL;ng.handleDefaults=function(e,t,r){var i=r.axIds,a=r.axHasImage,s=t._axisConstraintGroups=[],l=t._axisMatchGroups=[],f,h,v,m,b,T,S,C;for(f=0;f<i.length;f++)m=qu(i[f]),b=e[m],T=t[m],Fie(b,T,{axIds:i,layoutOut:t,hasImage:a[m]});function P(W,K){for(f=0;f<W.length;f++){h=W[f];for(v in h)t[qu(v)][K]=h}}for(P(l,"_matchGroup"),f=0;f<s.length;f++){h=s[f];for(v in h)if(T=t[qu(v)],T.fixedrange){for(var E in h){var I=qu(E);(e[I]||{}).fixedrange===!1&&Cd.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),t[I].fixedrange=!0}break}}for(f=0;f<s.length;){h=s[f];for(v in h){T=t[qu(v)],T._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(h).length&&(s.splice(f,1),f--);break}f++}P(s,"_constraintGroup");var q=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],B=!1,z=!1;function O(){C=T[S],S==="rangebreaks"&&(z=T._hasDayOfWeekBreaks)}for(f=0;f<l.length;f++){h=l[f];for(var H=0;H<q.length;H++){S=q[H],C=null;var V;for(v in h)if(m=qu(v),b=e[m],T=t[m],S in T){if(!T.matches&&(V=T,S in b)){O();break}C===null&&S in b&&O()}if(S==="range"&&C&&b.range&&b.range.length===2&&b.range[0]!==null&&b.range[1]!==null&&(B=!0),S==="autorange"&&C===null&&B&&(C=!1),C===null&&S in V&&(C=V[S]),C!==null)for(v in h)T=t[qu(v)],T[S]=S==="range"?C.slice():C,S==="rangebreaks"&&(T._hasDayOfWeekBreaks=z,zie(T,t))}}};function Fie(e,t,r){var i=r.axIds,a=r.layoutOut,s=r.hasImage,l=a._axisConstraintGroups,f=a._axisMatchGroups,h=t._id,v=h.charAt(0),m=((a._splomAxes||{})[v]||{})[h]||{},b=t._id,T=b.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function S(ne,he){return Cd.coerce(e,t,Die,ne,he)}S("constrain",s?"domain":"range"),Cd.coerce(e,t,{constraintoward:{valType:"enumerated",values:T?["left","center","right"]:["bottom","middle","top"],dflt:T?"center":"middle"}},"constraintoward");var C=t.type,P,E,I=[];for(P=0;P<i.length;P++)if(E=i[P],E!==b){var q=a[qu(E)];q.type===C&&I.push(E)}var B=_z(l,b);if(B){var z=[];for(P=0;P<I.length;P++)E=I[P],B[E]||z.push(E);I=z}var O=I.length,H,V;O&&(e.matches||m.matches)&&(H=Cd.coerce(e,t,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(m.matches)!==-1?m.matches:void 0}},"matches"));var W=s&&!T?t.anchor:void 0;if(O&&!H&&(e.scaleanchor||W)&&(V=Cd.coerce(e,t,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",W)),H){t._matchGroup=L4(f,b,H,1);var K=a[qu(H)],re=yz(a,t)/yz(a,K);T!==(H.charAt(0)==="x")&&(re=(T?"x":"y")+re),L4(l,b,H,re)}else e.matches&&i.indexOf(e.matches)!==-1&&Cd.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(V){var oe=S("scaleratio");oe||(oe=t.scaleratio=1),L4(l,b,V,oe)}else e.scaleanchor&&i.indexOf(e.scaleanchor)!==-1&&Cd.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function yz(e,t){var r=t.domain;return r||(r=e[qu(t.overlaying)].domain),r[1]-r[0]}function _z(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function L4(e,t,r,i){var a,s,l,f,h,v=_z(e,t);v===null?(v={},v[t]=1,h=e.length,e.push(v)):h=e.indexOf(v);var m=Object.keys(v);for(a=0;a<e.length;a++)if(l=e[a],a!==h&&l[r]){var b=l[r];for(s=0;s<m.length;s++)f=m[s],l[f]=P4(b,P4(i,v[f]));e.splice(h,1);return}if(i!==1)for(s=0;s<m.length;s++){var T=m[s];v[T]=P4(i,v[T])}v[r]=1}function P4(e,t){var r="",i="",a,s;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],a=r.length,e=+e.substr(a)),typeof t=="string"&&(i=t.match(/^[xy]*/)[0],s=i.length,t=+t.substr(s));var l=e*t;return!a&&!s?l:!a||!s||r.charAt(0)===i.charAt(0)?r+i+e*t:a===s?l:(a>s?r.substr(s):i.substr(a))+l}function qie(e,t){for(var r=t._size,i=r.h/r.w,a={},s=Object.keys(e),l=0;l<s.length;l++){var f=s[l],h=e[f];if(typeof h=="string"){var v=h.match(/^[xy]*/)[0],m=v.length;h=+h.substr(m);for(var b=v.charAt(0)==="y"?i:1/i,T=0;T<m;T++)h*=b}a[f]=h}return a}ng.enforce=function(t){var r=t._fullLayout,i=r._axisConstraintGroups||[],a,s,l,f,h,v,m,b;for(a=0;a<i.length;a++){l=qie(i[a],r);var T=Object.keys(l),S=1/0,C=0,P=1/0,E={},I={},q=!1;for(s=0;s<T.length;s++)f=T[s],I[f]=h=r[qu(f)],h._inputDomain?h.domain=h._inputDomain.slice():h._inputDomain=h.domain.slice(),h._inputRange||(h._inputRange=h.range.slice()),h.setScale(),E[f]=v=Math.abs(h._m)/l[f],S=Math.min(S,v),(h.constrain==="domain"||!h._constraintShrinkable)&&(P=Math.min(P,v)),delete h._constraintShrinkable,C=Math.max(C,v),h.constrain==="domain"&&(q=!0);if(!(S>Iie*C&&!q)){for(s=0;s<T.length;s++)if(f=T[s],v=E[f],h=I[f],m=h.constrain,v!==P||m==="domain")if(b=v/P,m==="range")mz(h,b);else{var B=h._inputDomain,z=(h.domain[1]-h.domain[0])/(B[1]-B[0]),O=(h.r2l(h.range[1])-h.r2l(h.range[0]))/(h.r2l(h._inputRange[1])-h.r2l(h._inputRange[0]));if(b/=z,b*O<1){h.domain=h._input.domain=B.slice(),mz(h,b);continue}if(O<1&&(h.range=h._input.range=h._inputRange.slice(),b*=O),h.autorange){var H=h.r2l(h.range[0]),V=h.r2l(h.range[1]),W=(H+V)/2,K=W,re=W,oe=Math.abs(V-W),ne=W-oe*b*1.0001,he=W+oe*b*1.0001,de=E4.makePadFn(r,h,0),Ee=E4.makePadFn(r,h,1);gz(h,b);var ke=Math.abs(h._m),Te=E4.concatExtremes(t,h),ye=Te.min,Ae=Te.max,Me,De;for(De=0;De<ye.length;De++)Me=ye[De].val-de(ye[De])/ke,Me>ne&&Me<K&&(K=Me);for(De=0;De<Ae.length;De++)Me=Ae[De].val+Ee(Ae[De])/ke,Me<he&&Me>re&&(re=Me);var at=(re-K)/(2*oe);b/=at,K=h.l2r(K),re=h.l2r(re),h.range=h._input.range=H<V?[K,re]:[re,K]}gz(h,b)}}}};ng.getAxisGroup=function(t,r){for(var i=t._axisMatchGroups,a=0;a<i.length;a++){var s=i[a];if(s[r])return"g"+a}return r};ng.clean=function(t,r){if(r._inputDomain){for(var i=!1,a=r._id,s=t._fullLayout._axisConstraintGroups,l=0;l<s.length;l++)if(s[l][a]){i=!0;break}(!i||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function gz(e,t){var r=e._inputDomain,i=Rie[e.constraintoward],a=r[0]+(r[1]-r[0])*i;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t],e.setScale()}});var K2=ve(ao=>{"use strict";var J2=ja(),os=la(),ul=eo(),Ql=Ft(),D4=co(),z4=P2(),sg=Ua(),X0=_i(),xz=Hy(),Mz=k4(),lg=Yi(),Mc=ts(),Sz=og(),Nie=Sz.enforce,Bie=Sz.clean,bz=Zy().doAutoRange,kz="start",Oie="middle",Cz="end",Uie=Ao().zindexSeparator;ao.layoutStyles=function(e){return Ql.syncOrAsync([ul.doAutoMargin,Hie],e)};function Vie(e,t,r){for(var i=0;i<r.length;i++){var a=r[i][0],s=r[i][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&s[0]<t[1]&&s[1]>t[0])return!0}return!1}function Hie(e){var t=e._fullLayout,r=t._size,i=r.p,a=lg.list(e,"",!0),s,l,f,h,v,m;if(t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(X0.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor),ao.drawMainTitle(e),Mz.manage(e),!t._has("cartesian"))return ul.previousPromises(e);function b(mt,ge,Re){var xe=mt._lw/2;if(mt._id.charAt(0)==="x"){if(ge){if(Re==="top")return ge._offset-i-xe}else return r.t+r.h*(1-(mt.position||0))+xe%1;return ge._offset+ge._length+i+xe}if(ge){if(Re==="right")return ge._offset+ge._length+i+xe}else return r.l+r.w*(mt.position||0)+xe%1;return ge._offset-i-xe}for(s=0;s<a.length;s++){h=a[s];var T=h._anchorAxis;h._linepositions={},h._lw=X0.crispRound(e,h.linewidth,1),h._mainLinePosition=b(h,T,h.side),h._mainMirrorPosition=h.mirror&&T?b(h,T,Mc.OPPOSITE_SIDE[h.side]):null}var S=[],C=[],P=[],E=sg.opacity(t.paper_bgcolor)===1&&sg.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(l in t._plots)if(f=t._plots[l],f.mainplot)f.bg&&f.bg.remove(),f.bg=void 0;else{var I=f.xaxis.domain,q=f.yaxis.domain,B=f.plotgroup;if(Vie(I,q,P)&&l.indexOf(Uie)===-1){var z=B.node(),O=f.bg=Ql.ensureSingle(B,"rect","bg");z.insertBefore(O.node(),z.childNodes[0]),C.push(l)}else B.select("rect.bg").remove(),P.push([I,q]),E||(S.push(l),C.push(l))}var H=t._bgLayer.selectAll(".bg").data(S);for(H.enter().append("rect").classed("bg",!0),H.exit().remove(),H.each(function(mt){t._plots[mt].bg=J2.select(this)}),s=0;s<C.length;s++)f=t._plots[C[s]],v=f.xaxis,m=f.yaxis,f.bg&&v._offset!==void 0&&m._offset!==void 0&&f.bg.call(X0.setRect,v._offset-i,m._offset-i,v._length+2*i,m._length+2*i).call(sg.fill,t.plot_bgcolor).style("stroke-width",0);if(!t._hasOnlyLargeSploms)for(l in t._plots){f=t._plots[l],v=f.xaxis,m=f.yaxis;var V=f.clipId="clip"+t._uid+l+"plot",W=Ql.ensureSingleById(t._clips,"clipPath",V,function(mt){mt.classed("plotclip",!0).append("rect")});f.clipRect=W.select("rect").attr({width:v._length,height:m._length}),X0.setTranslate(f.plot,v._offset,m._offset);var K,re;f._hasClipOnAxisFalse?(K=null,re=V):(K=V,re=null),X0.setClipUrl(f.plot,K,e),f.layerClipId=re}var oe,ne,he,de,Ee,ke,Te,ye,Ae,Me,De,at,pt;function lt(mt){return"M"+oe+","+mt+"H"+ne}function ut(mt){return"M"+v._offset+","+mt+"h"+v._length}function Ye(mt){return"M"+mt+","+ye+"V"+Te}function xt(mt){return m._shift!==void 0&&(mt+=m._shift),"M"+mt+","+m._offset+"v"+m._length}function rt(mt,ge,Re){if(!mt.showline||l!==mt._mainSubplot)return"";if(!mt._anchorAxis)return Re(mt._mainLinePosition);var xe=ge(mt._mainLinePosition);return mt.mirror&&(xe+=ge(mt._mainMirrorPosition)),xe}for(l in t._plots){f=t._plots[l],v=f.xaxis,m=f.yaxis;var Tt="M0,0";wz(v,l)&&(Ee=j2(v,"left",m,a),oe=v._offset-(Ee?i+Ee:0),ke=j2(v,"right",m,a),ne=v._offset+v._length+(ke?i+ke:0),he=b(v,m,"bottom"),de=b(v,m,"top"),pt=!v._anchorAxis||l!==v._mainSubplot,pt&&(v.mirror==="allticks"||v.mirror==="all")&&(v._linepositions[l]=[he,de]),Tt=rt(v,lt,ut),pt&&v.showline&&(v.mirror==="all"||v.mirror==="allticks")&&(Tt+=lt(he)+lt(de)),f.xlines.style("stroke-width",v._lw+"px").call(sg.stroke,v.showline?v.linecolor:"rgba(0,0,0,0)")),f.xlines.attr("d",Tt);var St="M0,0";wz(m,l)&&(De=j2(m,"bottom",v,a),Te=m._offset+m._length+(De?i:0),at=j2(m,"top",v,a),ye=m._offset-(at?i:0),Ae=b(m,v,"left"),Me=b(m,v,"right"),pt=!m._anchorAxis||l!==m._mainSubplot,pt&&(m.mirror==="allticks"||m.mirror==="all")&&(m._linepositions[l]=[Ae,Me]),St=rt(m,Ye,xt),pt&&m.showline&&(m.mirror==="all"||m.mirror==="allticks")&&(St+=Ye(Ae)+Ye(Me)),f.ylines.style("stroke-width",m._lw+"px").call(sg.stroke,m.showline?m.linecolor:"rgba(0,0,0,0)")),f.ylines.attr("d",St)}return lg.makeClipPaths(e),ul.previousPromises(e)}function wz(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function Tz(e,t,r){if(!r.showline||!r._lw)return!1;if(r.mirror==="all"||r.mirror==="allticks")return!0;var i=r._anchorAxis;if(!i)return!1;var a=Mc.FROM_BL[t];return r.side===t?i.domain[a]===e.domain[a]:r.mirror&&i.domain[1-a]===e.domain[1-a]}function j2(e,t,r,i){if(Tz(e,t,r))return r._lw;for(var a=0;a<i.length;a++){var s=i[a];if(s._mainAxis===r._mainAxis&&Tz(e,t,s))return s._lw}return 0}ao.drawMainTitle=function(e){var t=e._fullLayout.title,r=e._fullLayout,i=Jie(r),a=Kie(r),s=jie(r,a),l=Xie(r,i);if(xz.draw(e,"gtitle",{propContainer:r,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:r._dfltTitle.plot,subtitlePlaceholder:r._dfltTitle.subtitle,attributes:{x:l,y:s,"text-anchor":i,dy:a}}),t.text&&t.automargin){var f=J2.selectAll(".gtitle"),h=X0.bBox(J2.selectAll(".g-gtitle").node()).height,v=Yie(e,t,h);if(v>0){Wie(e,s,v,h),f.attr({x:l,y:s,"text-anchor":i,dy:Az(t.yanchor)}).call(D4.positionText,l,s);var m=(t.text.match(D4.BR_TAG_ALL)||[]).length;if(m){var b=Mc.LINE_SPACING*m+Mc.MID_SHIFT;t.y===0&&(b=-b),f.selectAll(".line").each(function(){var E=+this.getAttribute("dy").slice(0,-2)-b+"em";this.setAttribute("dy",E)})}var T=J2.selectAll(".gtitle-subtitle");if(T.node()){var S=f.node().getBBox(),C=S.y+S.height,P=C+xz.SUBTITLE_PADDING_EM*t.subtitle.font.size;T.attr({x:l,y:P,"text-anchor":i,dy:Az(t.yanchor)}).call(D4.positionText,l,P)}}}};function Gie(e,t,r,i,a){var s=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height,l=Ql.isTopAnchor(t)?i:i-a,f=r==="b"?s-l:l;return Ql.isTopAnchor(t)&&r==="t"||Ql.isBottomAnchor(t)&&r==="b"?!1:f<a}function Zie(e,t,r,i,a){var s=0;return r==="middle"&&(s+=a/2),e==="t"?(r==="top"&&(s+=a),s+=i-t*i):(r==="bottom"&&(s+=a),s+=t*i),s}function Yie(e,t,r){var i=t.y,a=t.yanchor,s=i>.5?"t":"b",l=e._fullLayout.margin[s],f=0;return t.yref==="paper"?f=r+t.pad.t+t.pad.b:t.yref==="container"&&(f=Zie(s,i,a,e._fullLayout.height,r)+t.pad.t+t.pad.b),f>l?f:0}function Wie(e,t,r,i){var a="title.automargin",s=e._fullLayout.title,l=s.y>.5?"t":"b",f={x:s.x,y:s.y,t:0,b:0},h={};s.yref==="paper"&&Gie(e,s,l,t,i)?f[l]=r:s.yref==="container"&&(h[l]=r,e._fullLayout._reservedMargin[a]=h),ul.allowAutoMargin(e,a),ul.autoMargin(e,a,f)}function Xie(e,t){var r=e.title,i=e._size,a=0;switch(t===kz?a=r.pad.l:t===Cz&&(a=-r.pad.r),r.xref){case"paper":return i.l+i.w*r.x+a;case"container":default:return e.width*r.x+a}}function jie(e,t){var r=e.title,i=e._size,a=0;if(t==="0em"||!t?a=-r.pad.b:t===Mc.CAP_SHIFT+"em"&&(a=r.pad.t),r.y==="auto")return i.t/2;switch(r.yref){case"paper":return i.t+i.h-i.h*r.y+a;case"container":default:return e.height-e.height*r.y+a}}function Az(e){return e==="top"?Mc.CAP_SHIFT+.3+"em":e==="bottom"?"-0.3em":Mc.MID_SHIFT+"em"}function Jie(e){var t=e.title,r=Oie;return Ql.isRightAnchor(t)?r=Cz:Ql.isLeftAnchor(t)&&(r=kz),r}function Kie(e){var t=e.title,r="0em";return Ql.isTopAnchor(t)?r=Mc.CAP_SHIFT+"em":Ql.isMiddleAnchor(t)&&(r=Mc.MID_SHIFT+"em"),r}ao.doTraceStyle=function(e){var t=e.calcdata,r=[],i;for(i=0;i<t.length;i++){var a=t[i],s=a[0]||{},l=s.trace||{},f=l._module||{},h=f.arraysToCalcdata;h&&h(a,l);var v=f.editStyle;v&&r.push({fn:v,cd0:s})}if(r.length){for(i=0;i<r.length;i++){var m=r[i];m.fn(e,m.cd0)}z4(e),ao.redrawReglTraces(e)}return ul.style(e),os.getComponentMethod("legend","draw")(e),ul.previousPromises(e)};ao.doColorBars=function(e){return os.getComponentMethod("colorbar","draw")(e),ul.previousPromises(e)};ao.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,os.call("_doPlot",e,"",t)};ao.doLegend=function(e){return os.getComponentMethod("legend","draw")(e),ul.previousPromises(e)};ao.doTicksRelayout=function(e){return lg.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(os.subplotsRegistry.splom.updateGrid(e),z4(e),ao.redrawReglTraces(e)),ao.drawMainTitle(e),ul.previousPromises(e)};ao.doModeBar=function(e){var t=e._fullLayout;Mz.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return ul.previousPromises(e)};ao.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,i=0;i<r.length;i++){var a=t[r[i]],s=a._scene;s.setViewport(a)}};ao.drawData=function(e){var t=e._fullLayout;z4(e);for(var r=t._basePlotModules,i=0;i<r.length;i++)r[i].plot(e);return ao.redrawReglTraces(e),ul.style(e),os.getComponentMethod("selections","draw")(e),os.getComponentMethod("shapes","draw")(e),os.getComponentMethod("annotations","draw")(e),os.getComponentMethod("images","draw")(e),t._replotting=!1,ul.previousPromises(e)};ao.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData,i=[],a=[],s,l;for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),s=0;s<r.length;s++){var f=r[s];f.visible===!0&&f._length!==0&&(f.type==="splom"?t._splomScenes[f.uid].draw():f.type==="scattergl"?Ql.pushUnique(i,f.xaxis+f.yaxis):f.type==="scatterpolargl"&&Ql.pushUnique(a,f.subplot))}for(s=0;s<i.length;s++)l=t._plots[i[s]],l._scene&&l._scene.draw();for(s=0;s<a.length;s++)l=t[a[s]]._subplot,l._scene&&l._scene.draw()}};ao.doAutoRangeAndConstraints=function(e){for(var t=lg.list(e,"",!0),r,i={},a=0;a<t.length;a++)if(r=t[a],!i[r._id]){i[r._id]=1,Bie(e,r),bz(e,r);var s=r._matchGroup;if(s)for(var l in s){var f=lg.getFromId(e,l);bz(e,f,r.range),i[l]=1}}Nie(e)};ao.finalDraw=function(e){os.getComponentMethod("rangeslider","draw")(e),os.getComponentMethod("rangeselector","draw")(e)};ao.drawMarginPushers=function(e){os.getComponentMethod("legend","draw")(e),os.getComponentMethod("rangeselector","draw")(e),os.getComponentMethod("sliders","draw")(e),os.getComponentMethod("updatemenus","draw")(e),os.getComponentMethod("colorbar","draw")(e)}});var F4=ve((i_e,zz)=>{"use strict";var Qie=Oh().readPaths,$ie=H2(),Ez=Ph().clearOutlineControllers,I4=Ua(),Lz=_i(),ene=Di().arrayEditor,Pz=Vh(),tne=Pz.getPathString;zz.exports={draw:Q2,drawOne:Dz,activateLastSelection:ine};function Q2(e){var t=e._fullLayout;Ez(e),t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var i=t._plots[r].selectionLayer;i&&i.selectAll("path").remove()}for(var a=0;a<t.selections.length;a++)Dz(e,a)}function $2(e){return e._context.editSelection}function Dz(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=Pz.makeSelectionsOptionsAndPlotinfo(e,t),i=r.options,a=r.plotinfo;if(!i._input)return;s(e._fullLayout._selectionLayer);function s(l){var f=tne(e,i),h={"data-index":t,"fill-rule":"evenodd",d:f},v=i.opacity,m="rgba(0,0,0,0)",b=i.line.color||I4.contrast(e._fullLayout.plot_bgcolor),T=i.line.width,S=i.line.dash;T||(T=5,S="solid");var C=$2(e)&&e._fullLayout._activeSelectionIndex===t;C&&(m=e._fullLayout.activeselection.fillcolor,v=e._fullLayout.activeselection.opacity);for(var P=[],E=1;E>=0;E--){var I=l.append("path").attr(h).style("opacity",E?.1:v).call(I4.stroke,b).call(I4.fill,m).call(Lz.dashLine,E?"solid":S,E?4+T:T);if(rne(I,e,i),C){var q=ene(e.layout,"selections",i);I.style({cursor:"move"});var B={element:I.node(),plotinfo:a,gd:e,editHelpers:q,isActiveSelection:!0},z=Qie(f,e);$ie(z,I,B)}else I.style("pointer-events",E?"all":"none");P[E]=I}var O=P[0],H=P[1];H.node().addEventListener("click",function(){return ane(e,O)})}}function rne(e,t,r){var i=r.xref+r.yref;Lz.setClipUrl(e,"clip"+t._fullLayout._uid+i,t)}function ane(e,t){if($2(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){R4(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=R4,Q2(e)}}}function ine(e){if($2(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=R4,Q2(e)}}function R4(e){if($2(e)){var t=e._fullLayout._activeSelectionIndex;t>=0&&(Ez(e),delete e._fullLayout._activeSelectionIndex,Q2(e))}}});var Rz=ve((n_e,Iz)=>{function nne(){var e,t=0,r=!1;function i(a,s){return e.list.push({type:a,data:s?JSON.parse(JSON.stringify(s)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(a,s){return i("check",{seg1:a,seg2:s})},segmentChop:function(a,s){return i("div_seg",{seg:a,pt:s}),i("chop",{seg:a,pt:s})},statusRemove:function(a){return i("pop_seg",{seg:a})},segmentUpdate:function(a){return i("seg_update",{seg:a})},segmentNew:function(a,s){return i("new_seg",{seg:a,primary:s})},segmentRemove:function(a){return i("rem_seg",{seg:a})},tempStatus:function(a,s,l){return i("temp_status",{seg:a,above:s,below:l})},rewind:function(a){return i("rewind",{seg:a})},status:function(a,s,l){return i("status",{seg:a,above:s,below:l})},vert:function(a){return a===r?e:(r=a,i("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),i("log",{txt:a})},reset:function(){return i("reset")},selected:function(a){return i("selected",{segs:a})},chainStart:function(a){return i("chain_start",{seg:a})},chainRemoveHead:function(a,s){return i("chain_rem_head",{index:a,pt:s})},chainRemoveTail:function(a,s){return i("chain_rem_tail",{index:a,pt:s})},chainNew:function(a,s){return i("chain_new",{pt1:a,pt2:s})},chainMatch:function(a){return i("chain_match",{index:a})},chainClose:function(a){return i("chain_close",{index:a})},chainAddHead:function(a,s){return i("chain_add_head",{index:a,pt:s})},chainAddTail:function(a,s){return i("chain_add_tail",{index:a,pt:s})},chainConnect:function(a,s){return i("chain_con",{index1:a,index2:s})},chainReverse:function(a){return i("chain_rev",{index:a})},chainJoin:function(a,s){return i("chain_join",{index1:a,index2:s})},done:function(){return i("done")}},e}Iz.exports=nne});var qz=ve((o_e,Fz)=>{function one(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,i,a){var s=i[0],l=i[1],f=a[0],h=a[1],v=r[0],m=r[1];return(f-s)*(m-l)-(h-l)*(v-s)>=-e},pointBetween:function(r,i,a){var s=r[1]-i[1],l=a[0]-i[0],f=r[0]-i[0],h=a[1]-i[1],v=f*l+s*h;if(v<e)return!1;var m=l*l+h*h;return!(v-m>-e)},pointsSameX:function(r,i){return Math.abs(r[0]-i[0])<e},pointsSameY:function(r,i){return Math.abs(r[1]-i[1])<e},pointsSame:function(r,i){return t.pointsSameX(r,i)&&t.pointsSameY(r,i)},pointsCompare:function(r,i){return t.pointsSameX(r,i)?t.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(r,i,a){var s=r[0]-i[0],l=r[1]-i[1],f=i[0]-a[0],h=i[1]-a[1];return Math.abs(s*h-f*l)<e},linesIntersect:function(r,i,a,s){var l=i[0]-r[0],f=i[1]-r[1],h=s[0]-a[0],v=s[1]-a[1],m=l*v-f*h;if(Math.abs(m)<e)return!1;var b=r[0]-a[0],T=r[1]-a[1],S=(h*T-v*b)/m,C=(l*T-f*b)/m,P={alongA:0,alongB:0,pt:[r[0]+S*l,r[1]+S*f]};return S<=-e?P.alongA=-2:S<e?P.alongA=-1:S-1<=-e?P.alongA=0:S-1<e?P.alongA=1:P.alongA=2,C<=-e?P.alongB=-2:C<e?P.alongB=-1:C-1<=-e?P.alongB=0:C-1<e?P.alongB=1:P.alongB=2,P},pointInsideRegion:function(r,i){for(var a=r[0],s=r[1],l=i[i.length-1][0],f=i[i.length-1][1],h=!1,v=0;v<i.length;v++){var m=i[v][0],b=i[v][1];b-s>e!=f-s>e&&(l-m)*(s-b)/(f-b)+m-a>e&&(h=!h),l=m,f=b}return h}};return t}Fz.exports=one});var Bz=ve((s_e,Nz)=>{var sne={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var i=e.root,a=e.root.next;a!==null;){if(r(a)){t.prev=a.prev,t.next=a,a.prev.next=t,a.prev=t;return}i=a,a=a.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var r=e.root,i=e.root.next;i!==null&&!t(i);)r=i,i=i.next;return{before:r===e.root?null:r,after:i,insert:function(a){return a.prev=r,a.next=i,r.next=a,i!==null&&(i.prev=a),a}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};Nz.exports=sne});var Uz=ve((l_e,Oz)=>{var ug=Bz();function lne(e,t,r){function i(C,P){return{id:r?r.segmentId():-1,start:C,end:P,myFill:{above:null,below:null},otherFill:null}}function a(C,P,E){return{id:r?r.segmentId():-1,start:C,end:P,myFill:{above:E.myFill.above,below:E.myFill.below},otherFill:null}}var s=ug.create();function l(C,P,E,I,q,B){var z=t.pointsCompare(P,q);return z!==0?z:t.pointsSame(E,B)?0:C!==I?C?1:-1:t.pointAboveOrOnLine(E,I?q:B,I?B:q)?1:-1}function f(C,P){s.insertBefore(C,function(E){var I=l(C.isStart,C.pt,P,E.isStart,E.pt,E.other.pt);return I<0})}function h(C,P){var E=ug.node({isStart:!0,pt:C.start,seg:C,primary:P,other:null,status:null});return f(E,C.end),E}function v(C,P,E){var I=ug.node({isStart:!1,pt:P.end,seg:P,primary:E,other:C,status:null});C.other=I,f(I,C.pt)}function m(C,P){var E=h(C,P);return v(E,C,P),E}function b(C,P){r&&r.segmentChop(C.seg,P),C.other.remove(),C.seg.end=P,C.other.pt=P,f(C.other,C.pt)}function T(C,P){var E=a(P,C.seg.end,C.seg);return b(C,P),m(E,C.primary)}function S(C,P){var E=ug.create();function I(Ee,ke){var Te=Ee.seg.start,ye=Ee.seg.end,Ae=ke.seg.start,Me=ke.seg.end;return t.pointsCollinear(Te,Ae,Me)?t.pointsCollinear(ye,Ae,Me)||t.pointAboveOrOnLine(ye,Ae,Me)?1:-1:t.pointAboveOrOnLine(Te,Ae,Me)?1:-1}function q(Ee){return E.findTransition(function(ke){var Te=I(Ee,ke.ev);return Te>0})}function B(Ee,ke){var Te=Ee.seg,ye=ke.seg,Ae=Te.start,Me=Te.end,De=ye.start,at=ye.end;r&&r.checkIntersection(Te,ye);var pt=t.linesIntersect(Ae,Me,De,at);if(pt===!1){if(!t.pointsCollinear(Ae,Me,De)||t.pointsSame(Ae,at)||t.pointsSame(Me,De))return!1;var lt=t.pointsSame(Ae,De),ut=t.pointsSame(Me,at);if(lt&&ut)return ke;var Ye=!lt&&t.pointBetween(Ae,De,at),xt=!ut&&t.pointBetween(Me,De,at);if(lt)return xt?T(ke,Me):T(Ee,at),ke;Ye&&(ut||(xt?T(ke,Me):T(Ee,at)),T(ke,Ae))}else pt.alongA===0&&(pt.alongB===-1?T(Ee,De):pt.alongB===0?T(Ee,pt.pt):pt.alongB===1&&T(Ee,at)),pt.alongB===0&&(pt.alongA===-1?T(ke,Ae):pt.alongA===0?T(ke,pt.pt):pt.alongA===1&&T(ke,Me));return!1}for(var z=[];!s.isEmpty();){var O=s.getHead();if(r&&r.vert(O.pt[0]),O.isStart){let Ee=function(){if(V){var ke=B(O,V);if(ke)return ke}return W?B(O,W):!1};var de=Ee;r&&r.segmentNew(O.seg,O.primary);var H=q(O),V=H.before?H.before.ev:null,W=H.after?H.after.ev:null;r&&r.tempStatus(O.seg,V?V.seg:!1,W?W.seg:!1);var K=Ee();if(K){if(e){var re;O.seg.myFill.below===null?re=!0:re=O.seg.myFill.above!==O.seg.myFill.below,re&&(K.seg.myFill.above=!K.seg.myFill.above)}else K.seg.otherFill=O.seg.myFill;r&&r.segmentUpdate(K.seg),O.other.remove(),O.remove()}if(s.getHead()!==O){r&&r.rewind(O.seg);continue}if(e){var re;O.seg.myFill.below===null?re=!0:re=O.seg.myFill.above!==O.seg.myFill.below,W?O.seg.myFill.below=W.seg.myFill.above:O.seg.myFill.below=C,re?O.seg.myFill.above=!O.seg.myFill.below:O.seg.myFill.above=O.seg.myFill.below}else if(O.seg.otherFill===null){var oe;W?O.primary===W.primary?oe=W.seg.otherFill.above:oe=W.seg.myFill.above:oe=O.primary?P:C,O.seg.otherFill={above:oe,below:oe}}r&&r.status(O.seg,V?V.seg:!1,W?W.seg:!1),O.other.status=H.insert(ug.node({ev:O}))}else{var ne=O.status;if(ne===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(E.exists(ne.prev)&&E.exists(ne.next)&&B(ne.prev.ev,ne.next.ev),r&&r.statusRemove(ne.ev.seg),ne.remove(),!O.primary){var he=O.seg.myFill;O.seg.myFill=O.seg.otherFill,O.seg.otherFill=he}z.push(O.seg)}s.getHead().remove()}return r&&r.done(),z}return e?{addRegion:function(C){for(var P,E=C[C.length-1],I=0;I<C.length;I++){P=E,E=C[I];var q=t.pointsCompare(P,E);q!==0&&m(i(q<0?P:E,q<0?E:P),!0)}},calculate:function(C){return S(C,!1)}}:{calculate:function(C,P,E,I){return C.forEach(function(q){m(a(q.start,q.end,q),!0)}),E.forEach(function(q){m(a(q.start,q.end,q),!1)}),S(P,I)}}}Oz.exports=lne});var Hz=ve((u_e,Vz)=>{function une(e,t,r){var i=[],a=[];return e.forEach(function(s){var l=s.start,f=s.end;if(t.pointsSame(l,f)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(s);var h={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},m=h;function b(de,Ee,ke){return m.index=de,m.matches_head=Ee,m.matches_pt1=ke,m===h?(m=v,!1):(m=null,!0)}for(var T=0;T<i.length;T++){var S=i[T],C=S[0],P=S[1],E=S[S.length-1],I=S[S.length-2];if(t.pointsSame(C,l)){if(b(T,!0,!0))break}else if(t.pointsSame(C,f)){if(b(T,!0,!1))break}else if(t.pointsSame(E,l)){if(b(T,!1,!0))break}else if(t.pointsSame(E,f)&&b(T,!1,!1))break}if(m===h){i.push([l,f]),r&&r.chainNew(l,f);return}if(m===v){r&&r.chainMatch(h.index);var q=h.index,B=h.matches_pt1?f:l,z=h.matches_head,S=i[q],O=z?S[0]:S[S.length-1],H=z?S[1]:S[S.length-2],V=z?S[S.length-1]:S[0],W=z?S[S.length-2]:S[1];if(t.pointsCollinear(H,O,B)&&(z?(r&&r.chainRemoveHead(h.index,B),S.shift()):(r&&r.chainRemoveTail(h.index,B),S.pop()),O=H),t.pointsSame(V,B)){i.splice(q,1),t.pointsCollinear(W,V,O)&&(z?(r&&r.chainRemoveTail(h.index,O),S.pop()):(r&&r.chainRemoveHead(h.index,O),S.shift())),r&&r.chainClose(h.index),a.push(S);return}z?(r&&r.chainAddHead(h.index,B),S.unshift(B)):(r&&r.chainAddTail(h.index,B),S.push(B));return}function K(de){r&&r.chainReverse(de),i[de].reverse()}function re(de,Ee){var ke=i[de],Te=i[Ee],ye=ke[ke.length-1],Ae=ke[ke.length-2],Me=Te[0],De=Te[1];t.pointsCollinear(Ae,ye,Me)&&(r&&r.chainRemoveTail(de,ye),ke.pop(),ye=Ae),t.pointsCollinear(ye,Me,De)&&(r&&r.chainRemoveHead(Ee,Me),Te.shift()),r&&r.chainJoin(de,Ee),i[de]=ke.concat(Te),i.splice(Ee,1)}var oe=h.index,ne=v.index;r&&r.chainConnect(oe,ne);var he=i[oe].length<i[ne].length;h.matches_head?v.matches_head?he?(K(oe),re(oe,ne)):(K(ne),re(ne,oe)):re(ne,oe):v.matches_head?re(oe,ne):he?(K(oe),re(ne,oe)):(K(ne),re(oe,ne))}),a}Vz.exports=une});var Zz=ve((f_e,Gz)=>{function fg(e,t,r){var i=[];return e.forEach(function(a){var s=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);t[s]!==0&&i.push({id:r?r.segmentId():-1,start:a.start,end:a.end,myFill:{above:t[s]===1,below:t[s]===2},otherFill:null})}),r&&r.selected(i),i}var fne={union:function(e,t){return fg(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return fg(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return fg(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return fg(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return fg(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};Gz.exports=fne});var Wz=ve((c_e,Yz)=>{var cne={toPolygon:function(e,t){function r(s){if(s.length<=0)return e.segments({inverted:!1,regions:[]});function l(v){var m=v.slice(0,v.length-1);return e.segments({inverted:!1,regions:[m]})}for(var f=l(s[0]),h=1;h<s.length;h++)f=e.selectDifference(e.combine(f,l(s[h])));return f}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),a=0;a<t.coordinates.length;a++)i=e.selectUnion(e.combine(i,r(t.coordinates[a])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function i(S,C){return t.pointInsideRegion([(S[0][0]+S[1][0])*.5,(S[0][1]+S[1][1])*.5],C)}function a(S){return{region:S,children:[]}}var s=a(null);function l(S,C){for(var P=0;P<S.children.length;P++){var E=S.children[P];if(i(C,E.region)){l(E,C);return}}for(var I=a(C),P=0;P<S.children.length;P++){var E=S.children[P];i(E.region,C)&&(I.children.push(E),S.children.splice(P,1),P--)}S.children.push(I)}for(var f=0;f<r.regions.length;f++){var h=r.regions[f];h.length<3||l(s,h)}function v(S,C){for(var P=0,E=S[S.length-1][0],I=S[S.length-1][1],q=[],B=0;B<S.length;B++){var z=S[B][0],O=S[B][1];q.push([z,O]),P+=O*E-z*I,E=z,I=O}var H=P<0;return H!==C&&q.reverse(),q.push([q[0][0],q[0][1]]),q}var m=[];function b(S){var C=[v(S.region,!1)];m.push(C);for(var P=0;P<S.children.length;P++)C.push(T(S.children[P]))}function T(S){for(var C=0;C<S.children.length;C++)b(S.children[C]);return v(S.region,!0)}for(var f=0;f<s.children.length;f++)b(s.children[f]);return m.length<=0?{type:"Polygon",coordinates:[]}:m.length==1?{type:"Polygon",coordinates:m[0]}:{type:"MultiPolygon",coordinates:m}}};Yz.exports=cne});var Kz=ve((h_e,Jz)=>{var hne=Rz(),vne=qz(),Xz=Uz(),dne=Hz(),cg=Zz(),jz=Wz(),$l=!1,hg=vne(),Us;Us={buildLog:function(e){return e===!0?$l=hne():e===!1&&($l=!1),$l===!1?!1:$l.list},epsilon:function(e){return hg.epsilon(e)},segments:function(e){var t=Xz(!0,hg,$l);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=Xz(!1,hg,$l);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:cg.union(e.combined,$l),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:cg.intersect(e.combined,$l),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:cg.difference(e.combined,$l),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:cg.differenceRev(e.combined,$l),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:cg.xor(e.combined,$l),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:dne(e.segments,hg,$l),inverted:e.inverted}},polygonFromGeoJSON:function(e){return jz.toPolygon(Us,e)},polygonToGeoJSON:function(e){return jz.fromPolygon(Us,hg,e)},union:function(e,t){return vg(e,t,Us.selectUnion)},intersect:function(e,t){return vg(e,t,Us.selectIntersect)},difference:function(e,t){return vg(e,t,Us.selectDifference)},differenceRev:function(e,t){return vg(e,t,Us.selectDifferenceRev)},xor:function(e,t){return vg(e,t,Us.selectXor)}};function vg(e,t,r){var i=Us.segments(e),a=Us.segments(t),s=Us.combine(i,a),l=r(s);return Us.polygon(l)}typeof window=="object"&&(window.PolyBool=Us);Jz.exports=Us});var $z=ve((v_e,Qz)=>{Qz.exports=function(t,r,i,a){var s=t[0],l=t[1],f=!1;i===void 0&&(i=0),a===void 0&&(a=r.length);for(var h=a-i,v=0,m=h-1;v<h;m=v++){var b=r[v+i][0],T=r[v+i][1],S=r[m+i][0],C=r[m+i][1],P=T>l!=C>l&&s<(S-b)*(l-T)/(C-T)+b;P&&(f=!f)}return f}});var rx=ve((d_e,eI)=>{"use strict";var q4=a_().dot,ex=Hi().BADNUM,tx=eI.exports={};tx.tester=function(t){var r=t.slice(),i=r[0][0],a=i,s=r[0][1],l=s,f;for((r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),f=1;f<r.length;f++)i=Math.min(i,r[f][0]),a=Math.max(a,r[f][0]),s=Math.min(s,r[f][1]),l=Math.max(l,r[f][1]);var h=!1,v;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(h=!0,v=function(C){return C[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(h=!0,v=function(C){return C[1]===r[0][1]}));function m(C,P){var E=C[0],I=C[1];return!(E===ex||E<i||E>a||I===ex||I<s||I>l||P&&v(C))}function b(C,P){var E=C[0],I=C[1];if(E===ex||E<i||E>a||I===ex||I<s||I>l)return!1;var q=r.length,B=r[0][0],z=r[0][1],O=0,H,V,W,K,re;for(H=1;H<q;H++)if(V=B,W=z,B=r[H][0],z=r[H][1],K=Math.min(V,B),!(E<K||E>Math.max(V,B)||I>Math.max(W,z)))if(I<Math.min(W,z))E!==K&&O++;else{if(B===V?re=I:re=W+(E-V)*(z-W)/(B-V),I===re)return!(H===1&&P);I<=re&&E!==K&&O++}return O%2===1}var T=!0,S=r[0];for(f=1;f<r.length;f++)if(S[0]!==r[f][0]||S[1]!==r[f][1]){T=!1;break}return{xmin:i,xmax:a,ymin:s,ymax:l,pts:r,contains:h?m:b,isRect:h,degenerate:T}};tx.isSegmentBent=function(t,r,i,a){var s=t[r],l=[t[i][0]-s[0],t[i][1]-s[1]],f=q4(l,l),h=Math.sqrt(f),v=[-l[1]/h,l[0]/h],m,b,T;for(m=r+1;m<i;m++)if(b=[t[m][0]-s[0],t[m][1]-s[1]],T=q4(b,l),T<0||T>f||Math.abs(q4(b,v))>a)return!0;return!1};tx.filter=function(t,r){var i=[t[0]],a=0,s=0;function l(h){t.push(h);var v=i.length,m=a;i.splice(s+1);for(var b=m+1;b<t.length;b++)(b===t.length-1||tx.isSegmentBent(t,m,b+1,r))&&(i.push(t[b]),i.length<v-2&&(a=b,s=i.length-1),m=b)}if(t.length>1){var f=t.pop();l(f)}return{addPt:l,raw:t,filtered:i}}});var rI=ve((p_e,tI)=>{"use strict";tI.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}});var AI=ve((m_e,TI)=>{"use strict";var aI=Kz(),pne=$z(),mg=la(),mne=_i().dashStyle,dg=Ua(),yne=If(),gne=xc().makeEventData,bg=Sd(),_ne=bg.freeMode,xne=bg.rectMode,yg=bg.drawMode,U4=bg.openMode,V4=bg.selectMode,iI=Vh(),nI=rg(),fI=H2(),cI=Ph().clearOutline,hI=Oh(),N4=hI.handleEllipse,bne=hI.readPaths,wne=B2().newShapes,Tne=p4(),Ane=F4().activateLastSelection,ix=Ft(),Mne=ix.sorterAsc,vI=rx(),pg=g_(),eu=$n().getFromId,Sne=P2(),kne=K2().redrawReglTraces,nx=rI(),Ff=nx.MINSELECT,Cne=vI.filter,H4=vI.tester,G4=R2(),oI=G4.p2r,Ene=G4.axValue,Lne=G4.getTransform;function Z4(e){return e.subplot!==void 0}function Pne(e,t,r,i,a){var s=!Z4(i),l=_ne(a),f=xne(a),h=U4(a),v=yg(a),m=V4(a),b=a==="drawline",T=a==="drawcircle",S=b||T,C=i.gd,P=C._fullLayout,E=m&&P.newselection.mode==="immediate"&&s,I=P._zoomlayer,q=i.element.getBoundingClientRect(),B=i.plotinfo,z=Lne(B),O=t-q.left,H=r-q.top;P._calcInverseTransform(C);var V=ix.apply3DTransform(P._invTransform)(O,H);O=V[0],H=V[1];var W=P._invScaleX,K=P._invScaleY,re=O,oe=H,ne="M"+O+","+H,he=i.xaxes[0],de=i.yaxes[0],Ee=he._length,ke=de._length,Te=e.altKey&&!(yg(a)&&h),ye,Ae,Me,De,at,pt,lt;pI(e,C,i),l&&(ye=Cne([[O,H]],nx.BENDPX));var ut=I.selectAll("path.select-outline-"+B.id).data([1]),Ye=v?P.newshape:P.newselection;v&&(i.hasText=Ye.label.text||Ye.label.texttemplate);var xt=v&&!h?Ye.fillcolor:"rgba(0,0,0,0)",rt=Ye.line.color||(s?dg.contrast(C._fullLayout.plot_bgcolor):"#7f7f7f");ut.enter().append("path").attr("class","select-outline select-outline-"+B.id).style({opacity:v?Ye.opacity/2:1,"stroke-dasharray":mne(Ye.line.dash,Ye.line.width),"stroke-width":Ye.line.width+"px","shape-rendering":"crispEdges"}).call(dg.stroke,rt).call(dg.fill,xt).attr("fill-rule","evenodd").classed("cursor-move",!!v).attr("transform",z).attr("d",ne+"Z");var Tt=I.append("path").attr("class","zoombox-corners").style({fill:dg.background,stroke:dg.defaultLine,"stroke-width":1}).attr("transform",z).attr("d","M0,0Z");if(v&&i.hasText){var St=I.select(".label-temp");St.empty()&&(St=I.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var mt=P._uid+nx.SELECTID,ge=[],Re=ox(C,i.xaxes,i.yaxes,i.subplot);E&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(s){var et=he._id,ht=de._id;xI(C,et,ht,Re);for(var tt=(C.layout||{}).selections||[],Rt=[],qt=!1,Jt=0;Jt<tt.length;Jt++){var Ht=P.selections[Jt];!Ht||Ht.xref!==et||Ht.yref!==ht?Rt.push(tt[Jt]):qt=!0}qt&&(C._fullLayout._noEmitSelectedAtStart=!0,mg.call("_guiRelayout",C,{selections:Rt}))}});var xe=Zne(i);i.moveFn=function(et,ht){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),re=Math.max(0,Math.min(Ee,W*et+O)),oe=Math.max(0,Math.min(ke,K*ht+H));var tt=Math.abs(re-O),Rt=Math.abs(oe-H);if(f){var qt,Jt,Ht;if(m){var ar=P.selectdirection;switch(ar==="any"?Rt<Math.min(tt*.6,Ff)?qt="h":tt<Math.min(Rt*.6,Ff)?qt="v":qt="d":qt=ar,qt){case"h":Jt=T?ke/2:0,Ht=ke;break;case"v":Jt=T?Ee/2:0,Ht=Ee;break}}if(v)switch(P.newshape.drawdirection){case"vertical":qt="h",Jt=T?ke/2:0,Ht=ke;break;case"horizontal":qt="v",Jt=T?Ee/2:0,Ht=Ee;break;case"ortho":tt<Rt?(qt="h",Jt=H,Ht=oe):(qt="v",Jt=O,Ht=re);break;default:qt="d"}qt==="h"?(De=S?N4(T,[re,Jt],[re,Ht]):[[O,Jt],[O,Ht],[re,Ht],[re,Jt]],De.xmin=S?re:Math.min(O,re),De.xmax=S?re:Math.max(O,re),De.ymin=Math.min(Jt,Ht),De.ymax=Math.max(Jt,Ht),Tt.attr("d","M"+De.xmin+","+(H-Ff)+"h-4v"+2*Ff+"h4ZM"+(De.xmax-1)+","+(H-Ff)+"h4v"+2*Ff+"h-4Z")):qt==="v"?(De=S?N4(T,[Jt,oe],[Ht,oe]):[[Jt,H],[Jt,oe],[Ht,oe],[Ht,H]],De.xmin=Math.min(Jt,Ht),De.xmax=Math.max(Jt,Ht),De.ymin=S?oe:Math.min(H,oe),De.ymax=S?oe:Math.max(H,oe),Tt.attr("d","M"+(O-Ff)+","+De.ymin+"v-4h"+2*Ff+"v4ZM"+(O-Ff)+","+(De.ymax-1)+"v4h"+2*Ff+"v-4Z")):qt==="d"&&(De=S?N4(T,[O,H],[re,oe]):[[O,H],[O,oe],[re,oe],[re,H]],De.xmin=Math.min(O,re),De.xmax=Math.max(O,re),De.ymin=Math.min(H,oe),De.ymax=Math.max(H,oe),Tt.attr("d","M0,0Z"))}else l&&(ye.addPt([re,oe]),De=ye.filtered);if(i.selectionDefs&&i.selectionDefs.length?(Me=mI(i.mergedPolygons,De,Te),De.subtract=Te,Ae=Y4(i.selectionDefs.concat([De]))):(Me=[De],Ae=H4(De)),fI(gI(Me,h),ut,i),m){var kt=O4(C,!1),zt=kt.eventData?kt.eventData.points.slice():[];kt=O4(C,!1,Ae,Re,i),Ae=kt.selectionTesters,lt=kt.eventData;var _r;ye?_r=ye.filtered:_r=bI(Me),pg.throttle(mt,nx.SELECTDELAY,function(){ge=_I(Ae,Re);for(var rr=ge.slice(),Be=0;Be<zt.length;Be++){for(var vt=zt[Be],gt=!1,Cr=0;Cr<rr.length;Cr++)if(rr[Cr].curveNumber===vt.curveNumber&&rr[Cr].pointNumber===vt.pointNumber){gt=!0;break}gt||rr.push(vt)}rr.length&&(lt||(lt={}),lt.points=rr),xe(lt,_r),Yne(C,lt)})}},i.clickFn=function(et,ht){if(Tt.remove(),C._fullLayout._activeShapeIndex>=0){C._fullLayout._deactivateShape(C);return}if(!v){var tt=P.clickmode;pg.done(mt).then(function(){if(pg.clear(mt),et===2){for(ut.remove(),at=0;at<Re.length;at++)pt=Re[at],pt._module.selectPoints(pt,!1);if(_g(C,Re),gg(i),X4(C),Re.length){var Rt=Re[0].xaxis,qt=Re[0].yaxis;if(Rt&&qt){for(var Jt=[],Ht=C._fullLayout.selections,ar=0;ar<Ht.length;ar++){var kt=Ht[ar];kt&&(kt.xref!==Rt._id||kt.yref!==qt._id)&&Jt.push(kt)}Jt.length<Ht.length&&(C._fullLayout._noEmitSelectedAtStart=!0,mg.call("_guiRelayout",C,{selections:Jt}))}}}else tt.indexOf("select")>-1&&dI(ht,C,i.xaxes,i.yaxes,i.subplot,i,ut),tt==="event"&&xg(C,void 0);yne.click(C,ht,B.id)}).catch(ix.error)}},i.doneFn=function(){Tt.remove(),pg.done(mt).then(function(){pg.clear(mt),!E&&De&&i.selectionDefs&&(De.subtract=Te,i.selectionDefs.push(De),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,Me)),(E||v)&&gg(i,E),i.doneFnCompleted&&i.doneFnCompleted(ge),m&&xg(C,lt)}).catch(ix.error)}}function dI(e,t,r,i,a,s,l){var f=t._hoverdata,h=t._fullLayout,v=h.clickmode,m=v.indexOf("event")>-1,b=[],T,S,C,P,E,I,q,B,z,O;if(Fne(f)){pI(e,t,s),T=ox(t,r,i,a);var H=qne(f,T),V=H.pointNumbers.length>0;if(V?Nne(T,H):Bne(T)&&(q=lI(H))){for(l&&l.remove(),O=0;O<T.length;O++)S=T[O],S._module.selectPoints(S,!1);_g(t,T),gg(s),m&&X4(t)}else{B=e.shiftKey&&(q!==void 0?q:lI(H)),C=Dne(H.pointNumber,H.searchInfo,B);var W=s.selectionDefs.concat([C]);for(P=Y4(W,P),O=0;O<T.length;O++)if(E=T[O]._module.selectPoints(T[O],P),I=yI(E,T[O]),b.length)for(var K=0;K<I.length;K++)b.push(I[K]);else b=I;if(z={points:b},_g(t,T,z),C&&s&&s.selectionDefs.push(C),l){var re=s.mergedPolygons,oe=U4(s.dragmode);fI(gI(re,oe),l,s)}m&&xg(t,z)}}}function Dne(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function B4(e){return"pointNumber"in e&&"searchInfo"in e}function zne(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,i,a){var s=e.searchInfo.cd[0].trace.index,l=a.cd[0].trace.index;return l===s&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function Y4(e){if(!e.length)return;for(var t=[],r=B4(e[0])?0:e[0][0][0],i=r,a=B4(e[0])?0:e[0][0][1],s=a,l=0;l<e.length;l++)if(B4(e[l]))t.push(zne(e[l]));else{var f=H4(e[l]);f.subtract=!!e[l].subtract,t.push(f),r=Math.min(r,f.xmin),i=Math.max(i,f.xmax),a=Math.min(a,f.ymin),s=Math.max(s,f.ymax)}function h(v,m,b,T){for(var S=!1,C=0;C<t.length;C++)t[C].contains(v,m,b,T)&&(S=!t[C].subtract);return S}return{xmin:r,xmax:i,ymin:a,ymax:s,pts:[],contains:h,isRect:!1,degenerate:!1}}function pI(e,t,r){var i=t._fullLayout,a=r.plotinfo,s=r.dragmode,l=i._lastSelectedSubplot&&i._lastSelectedSubplot===a.id,f=(e.shiftKey||e.altKey)&&!(yg(s)&&U4(s));l&&f&&a.selection&&a.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=a.selection.selectionDefs,r.mergedPolygons=a.selection.mergedPolygons):(!f||!a.selection)&&gg(r),l||(cI(t),i._lastSelectedSubplot=a.id)}function Ine(e){return e._fullLayout._activeShapeIndex>=0}function Rne(e){return e._fullLayout._activeSelectionIndex>=0}function gg(e,t){var r=e.dragmode,i=e.plotinfo,a=e.gd;Ine(a)&&a._fullLayout._deactivateShape(a),Rne(a)&&a._fullLayout._deactivateSelection(a);var s=a._fullLayout,l=s._zoomlayer,f=yg(r),h=V4(r);if(f||h){var v=l.selectAll(".select-outline-"+i.id);if(v&&a._fullLayout._outlining){var m;f&&(m=wne(v,e)),m&&mg.call("_guiRelayout",a,{shapes:m});var b;h&&!Z4(e)&&(b=Tne(v,e)),b&&(a._fullLayout._noEmitSelectedAtStart=!0,mg.call("_guiRelayout",a,{selections:b}).then(function(){t&&Ane(a)})),a._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}function sI(e){return e._id}function ox(e,t,r,i){if(!e.calcdata)return[];var a=[],s=t.map(sI),l=r.map(sI),f,h,v;for(v=0;v<e.calcdata.length;v++)if(f=e.calcdata[v],h=f[0].trace,!(h.visible!==!0||!h._module||!h._module.selectPoints))if(Z4({subplot:i})&&(h.subplot===i||h.geo===i))a.push(ax(h._module,f,t[0],r[0]));else if(h.type==="splom"){if(h._xaxes[s[0]]&&h._yaxes[l[0]]){var m=ax(h._module,f,t[0],r[0]);m.scene=e._fullLayout._splomScenes[h.uid],a.push(m)}}else if(h.type==="sankey"){var b=ax(h._module,f,t[0],r[0]);a.push(b)}else{if(s.indexOf(h.xaxis)===-1&&(!h._xA||!h._xA.overlaying)||l.indexOf(h.yaxis)===-1&&(!h._yA||!h._yA.overlaying))continue;a.push(ax(h._module,f,eu(e,h.xaxis),eu(e,h.yaxis)))}return a}function ax(e,t,r,i){return{_module:e,cd:t,xaxis:r,yaxis:i}}function Fne(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function qne(e,t){var r=e[0],i=-1,a=[],s,l;for(l=0;l<t.length;l++)if(s=t[l],r.fullData.index===s.cd[0].trace.index){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?i=r.pointNumber:r.binNumber!==void 0&&(i=r.binNumber,a=r.pointNumbers);break}return{pointNumber:i,pointNumbers:a,searchInfo:s}}function lI(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,i=e.pointNumbers,a=i.length>0,s=a?i[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(s)>-1:!1}function Nne(e,t){var r=[],i,a,s,l;for(l=0;l<e.length;l++)i=e[l],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&r.push(i);if(r.length===1&&(s=r[0]===t.searchInfo,s&&(a=t.searchInfo.cd[0].trace,a.selectedpoints.length===t.pointNumbers.length))){for(l=0;l<t.pointNumbers.length;l++)if(a.selectedpoints.indexOf(t.pointNumbers[l])<0)return!1;return!0}return!1}function Bne(e){var t=0,r,i,a;for(a=0;a<e.length;a++)if(r=e[a],i=r.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(t+=i.selectedpoints.length,t>1)))return!1;return t===1}function _g(e,t,r){var i;for(i=0;i<t.length;i++){var a=t[i].cd[0].trace._fullInput,s=e._fullLayout._tracePreGUI[a.uid]||{};s.selectedpoints===void 0&&(s.selectedpoints=a._input.selectedpoints||null)}var l;if(r){var f=r.points||[];for(i=0;i<t.length;i++)l=t[i].cd[0].trace,l._input.selectedpoints=l._fullInput.selectedpoints=[],l._fullInput!==l&&(l.selectedpoints=[]);for(var h=0;h<f.length;h++){var v=f[h],m=v.data,b=v.fullData,T=v.pointIndex,S=v.pointIndices;S?([].push.apply(m.selectedpoints,S),l._fullInput!==l&&[].push.apply(b.selectedpoints,S)):(m.selectedpoints.push(T),l._fullInput!==l&&b.selectedpoints.push(T))}}else for(i=0;i<t.length;i++)l=t[i].cd[0].trace,delete l.selectedpoints,delete l._input.selectedpoints,l._fullInput!==l&&delete l._fullInput.selectedpoints;One(e,t)}function One(e,t){for(var r=!1,i=0;i<t.length;i++){var a=t[i],s=a.cd;mg.traceIs(s[0].trace,"regl")&&(r=!0);var l=a._module,f=l.styleOnSelect||l.style;f&&(f(e,s,s[0].node3),s[0].nodeRangePlot3&&f(e,s,s[0].nodeRangePlot3))}r&&(Sne(e),kne(e))}function mI(e,t,r){for(var i=r?aI.difference:aI.union,a=i({regions:e},{regions:[t]}),s=a.regions.reverse(),l=0;l<s.length;l++){var f=s[l];f.subtract=W4(f,s.slice(0,l))}return s}function yI(e,t){if(Array.isArray(e))for(var r=t.cd,i=t.cd[0].trace,a=0;a<e.length;a++)e[a]=gne(e[a],i,r);return e}function gI(e,t){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var a=0;a<e[i].length;a++){r[i][a]=[],r[i][a][0]=a?"L":"M";for(var s=0;s<e[i][a].length;s++)r[i][a].push(e[i][a][s])}t||r[i].push(["Z",r[i][0][1],r[i][0][2]])}return r}function _I(e,t){for(var r=[],i,a=[],s,l=0;l<t.length;l++){var f=t[l];s=f._module.selectPoints(f,e),a.push(s),i=yI(s,f),r=r.concat(i)}return r}function O4(e,t,r,i,a){var s=!!i,l,f,h;a&&(l=a.plotinfo,f=a.xaxes[0]._id,h=a.yaxes[0]._id);var v=[],m=[],b=uI(e),T=e._fullLayout;if(l){var S=T._zoomlayer,C=T.dragmode,P=yg(C),E=V4(C);if(P||E){var I=eu(e,f,"x"),q=eu(e,h,"y");if(I&&q){var B=S.selectAll(".select-outline-"+l.id);if(B&&e._fullLayout._outlining&&B.length){for(var z=B[0][0],O=z.getAttribute("d"),H=bne(O,e,l),V=[],W=0;W<H.length;W++){for(var K=H[W],re=[],oe=0;oe<K.length;oe++)re.push([Hh(I,K[oe][1]),Hh(q,K[oe][2])]);re.xref=f,re.yref=h,re.subtract=W4(re,V),V.push(re)}b=b.concat(V)}}}}var ne=f&&h?[f+h]:T._subplots.cartesian;Une(e);for(var he={},de=0;de<ne.length;de++){var Ee=ne[de],ke=Ee.indexOf("y"),Te=Ee.slice(0,ke),ye=Ee.slice(ke),Ae=f&&h?r:void 0;if(Ae=Hne(b,Te,ye,Ae),Ae){var Me=i;if(!s){var De=eu(e,Te,"x"),at=eu(e,ye,"y");Me=ox(e,[De],[at],Ee);for(var pt=0;pt<Me.length;pt++){var lt=Me[pt],ut=lt.cd[0],Ye=ut.trace;if(lt._module.name==="scattergl"&&!ut.t.xpx){var xt=Ye.x,rt=Ye.y,Tt=Ye._length;ut.t.xpx=[],ut.t.ypx=[];for(var St=0;St<Tt;St++)ut.t.xpx[St]=De.c2p(xt[St]),ut.t.ypx[St]=at.c2p(rt[St])}lt._module.name==="splom"&&(he[Ye.uid]||(he[Ye.uid]=!0))}}var mt=_I(Ae,Me);v=v.concat(mt),m=m.concat(Me)}}var ge={points:v};_g(e,m,ge);var Re=T.clickmode,xe=Re.indexOf("event")>-1&&t;if(!l&&t){var et=uI(e,!0);if(et.length){var ht=et[0].xref,tt=et[0].yref;if(ht&&tt){var Rt=bI(et),qt=wI([eu(e,ht,"x"),eu(e,tt,"y")]);qt(ge,Rt)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:xe&&xg(e,ge),T._reselect=!1}if(!l&&T._deselect){var Jt=T._deselect;f=Jt.xref,h=Jt.yref,Vne(f,h,m)||xI(e,f,h,i),xe&&(ge.points.length?xg(e,ge):X4(e)),T._deselect=!1}return{eventData:ge,selectionTesters:r}}function Une(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var i=t[r][0],a=i.trace,s=e._fullLayout._splomScenes;if(s){var l=s[a.uid];l&&(l.selectBatch=[])}}}function Vne(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];if(a.xaxis&&a.xaxis._id===e&&a.yaxis&&a.yaxis._id===t)return!0}return!1}function xI(e,t,r,i){i=ox(e,[eu(e,t,"x")],[eu(e,r,"y")],t+r);for(var a=0;a<i.length;a++){var s=i[a];s._module.selectPoints(s,!1)}_g(e,i)}function Hne(e,t,r,i){for(var a,s=0;s<e.length;s++){var l=e[s];if(!(t!==l.xref||r!==l.yref))if(a){var f=!!l.subtract;a=mI(a,l,f),i=Y4(a)}else a=[l],i=H4(l)}return i}function uI(e,t){for(var r=[],i=e._fullLayout,a=i.selections,s=a.length,l=0;l<s;l++)if(!(t&&l!==i._activeSelectionIndex)){var f=a[l];if(f){var h=f.xref,v=f.yref,m=eu(e,h,"x"),b=eu(e,v,"y"),T,S,C,P,E;if(f.type==="rect"){E=[];var I=Hh(m,f.x0),q=Hh(m,f.x1),B=Hh(b,f.y0),z=Hh(b,f.y1);E=[[I,B],[I,z],[q,z],[q,B]],T=Math.min(I,q),S=Math.max(I,q),C=Math.min(B,z),P=Math.max(B,z),E.xmin=T,E.xmax=S,E.ymin=C,E.ymax=P,E.xref=h,E.yref=v,E.subtract=!1,E.isRect=!0,r.push(E)}else if(f.type==="path")for(var O=f.path.split("Z"),H=[],V=0;V<O.length;V++){var W=O[V];if(W){W+="Z";var K=iI.extractPathCoords(W,nI.paramIsX,"raw"),re=iI.extractPathCoords(W,nI.paramIsY,"raw");T=1/0,S=-1/0,C=1/0,P=-1/0,E=[];for(var oe=0;oe<K.length;oe++){var ne=Hh(m,K[oe]),he=Hh(b,re[oe]);E.push([ne,he]),T=Math.min(ne,T),S=Math.max(ne,S),C=Math.min(he,C),P=Math.max(he,P)}E.xmin=T,E.xmax=S,E.ymin=C,E.ymax=P,E.xref=h,E.yref=v,E.subtract=W4(E,H),H.push(E),r.push(E)}}}}return r}function W4(e,t){for(var r=!1,i=0;i<t.length;i++)for(var a=t[i],s=0;s<e.length;s++)if(pne(e[s],a)){r=!r;break}return r}function Hh(e,t){return e.type==="date"&&(t=t.replace("_"," ")),e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function bI(e){for(var t=e.length,r=[],i=0;i<t;i++){var a=e[i];r=r.concat(a),r=r.concat([a[0]])}return Gne(r)}function Gne(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function wI(e){return function(t,r){for(var i,a,s=0;s<e.length;s++){var l=e[s],f=l._id,h=f.charAt(0);if(r.isRect){i||(i={});var v=r[h+"min"],m=r[h+"max"];v!==void 0&&m!==void 0&&(i[f]=[oI(l,v),oI(l,m)].sort(Mne))}else a||(a={}),a[f]=r.map(Ene(l))}i&&(t.range=i),a&&(t.lassoPoints=a)}}function Zne(e){var t=e.plotinfo;return t.fillRangeItems||wI(e.xaxes.concat(e.yaxes))}function Yne(e,t){e.emit("plotly_selecting",t)}function xg(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function X4(e){e.emit("plotly_deselect",null)}TI.exports={reselect:O4,prepSelect:Pne,clearOutline:cI,clearSelectionsCache:gg,selectOnClick:dI}});var j4=ve((y_e,MI)=>{"use strict";MI.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]});var wg=ve((g_e,SI)=>{"use strict";SI.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}});var j0=ve((x_e,EI)=>{"use strict";var kI=j4(),CI=qo(),sx=Ao(),Wne=Di().templatedArray,__e=wg();EI.exports=Wne("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:CI({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:kI.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:kI.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",sx.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",sx.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",sx.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",sx.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:CI({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})});var lx=ve((b_e,LI)=>{"use strict";LI.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}});var ux=ve((w_e,PI)=>{"use strict";PI.exports=function(t){return{valType:"color",editType:"style",anim:!0}}});var Sc=ve((T_e,qI)=>{"use strict";var DI=Pw().axisHoverFormat,Xne=Vl().texttemplateAttrs,jne=Vl().hovertemplateAttrs,zI=_c(),Jne=qo(),Kne=cc().dash,Qne=cc().pattern,$ne=_i(),eoe=lx(),fx=hn().extendFlat,toe=ux();function II(e){return{valType:"any",dflt:0,editType:"calc"}}function RI(e){return{valType:"any",editType:"calc"}}function FI(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}qI.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:II("x"),yperiod:II("y"),xperiod0:RI("x0"),yperiod0:RI("y0"),xperiodalignment:FI("x"),yperiodalignment:FI("y"),xhoverformat:DI("x"),yhoverformat:DI("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:Xne({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:jne({},{keys:eoe.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:fx({},Kne,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:toe(!0),fillgradient:fx({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:Qne,marker:fx({symbol:{valType:"enumerated",values:$ne.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:fx({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},zI("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},zI("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:Jne({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}});var J4=ve((M_e,OI)=>{"use strict";var NI=j0(),BI=Sc().line,roe=cc().dash,cx=hn().extendFlat,aoe=il().overrideAll,ioe=Di().templatedArray,A_e=wg();OI.exports=aoe(ioe("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:cx({},NI.xref,{}),yref:cx({},NI.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:BI.color,width:cx({},BI.width,{min:1,dflt:1}),dash:cx({},roe,{dflt:"dot"})}}),"arraydraw","from-root")});var GI=ve((S_e,HI)=>{"use strict";var UI=Ft(),hx=Yi(),noe=Yl(),ooe=J4(),VI=Vh();HI.exports=function(t,r){noe(t,r,{name:"selections",handleItemDefaults:soe});for(var i=r.selections,a=0;a<i.length;a++){var s=i[a];s&&s.path===void 0&&(s.x0===void 0||s.x1===void 0||s.y0===void 0||s.y1===void 0)&&(r.selections[a]=null)}};function soe(e,t,r){function i(H,V){return UI.coerce(e,t,ooe,H,V)}var a=i("path"),s=a?"path":"rect",l=i("type",s),f=l!=="path";f&&delete t.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var h=["x","y"],v=0;v<2;v++){var m=h[v],b={_fullLayout:r},T,S,C,P=hx.coerceRef(e,t,b,m);if(T=hx.getFromId(b,P),T._selectionIndices.push(t._index),C=VI.rangeToShapePosition(T),S=VI.shapePositionToRange(T),f){var E=m+"0",I=m+"1",q=e[E],B=e[I];e[E]=S(e[E],!0),e[I]=S(e[I],!0),hx.coercePosition(t,b,i,P,E),hx.coercePosition(t,b,i,P,I);var z=t[E],O=t[I];z!==void 0&&O!==void 0&&(t[E]=C(z),t[I]=C(O),e[E]=q,e[I]=B)}}f&&UI.noneOrAll(e,t,["x0","x1","y0","y1"])}});var YI=ve((k_e,ZI)=>{"use strict";ZI.exports=function(t,r,i){i("newselection.mode");var a=i("newselection.line.width");a&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}});var Tg=ve((C_e,jI)=>{"use strict";var loe=la(),WI=Ft(),XI=$n();jI.exports=function(t){return function(i,a){var s=i[t];if(Array.isArray(s))for(var l=loe.subplotsRegistry.cartesian,f=l.idRegex,h=a._subplots,v=h.xaxis,m=h.yaxis,b=h.cartesian,T=a._has("cartesian"),S=0;S<s.length;S++){var C=s[S];if(WI.isPlainObject(C)){var P=XI.cleanId(C.xref,"x",!1),E=XI.cleanId(C.yref,"y",!1),I=f.x.test(P),q=f.y.test(E);if(I||q){T||WI.pushUnique(a._basePlotModules,l);var B=!1;I&&v.indexOf(P)===-1&&(v.push(P),B=!0),q&&m.indexOf(E)===-1&&(m.push(E),B=!0),B&&I&&q&&b.push(P+E)}}}}}});var qf=ve((E_e,KI)=>{"use strict";var JI=F4(),Ag=AI();KI.exports={moduleType:"component",name:"selections",layoutAttributes:J4(),supplyLayoutDefaults:GI(),supplyDrawNewSelectionDefaults:YI(),includeBasePlot:Tg()("selections"),draw:JI.draw,drawOne:JI.drawOne,reselect:Ag.reselect,prepSelect:Ag.prepSelect,clearOutline:Ag.clearOutline,clearSelectionsCache:Ag.clearSelectionsCache,selectOnClick:Ag.selectOnClick}});var gR=ve((L_e,yR)=>{"use strict";var t6=ja(),tu=Ft(),QI=tu.numberFormat,uoe=wf(),foe=N5(),vx=la(),sR=tu.strTranslate,coe=co(),$I=Ua(),Gh=_i(),hoe=If(),eR=Yi(),voe=Bh(),doe=Xl(),lR=Sd(),dx=lR.selectingOrDrawing,poe=lR.freeMode,moe=ts().FROM_TL,yoe=P2(),goe=K2().redrawReglTraces,_oe=eo(),Q4=$n().getFromId,xoe=qf().prepSelect,boe=qf().clearOutline,woe=qf().selectOnClick,K4=C4(),r6=Ao(),tR=r6.MINDRAG,gs=r6.MINZOOM,rR=!0;function Toe(e,t,r,i,a,s,l,f){var h=e._fullLayout._zoomlayer,v=l+f==="nsew",m=(l+f).length===1,b,T,S,C,P,E,I,q,B,z,O,H,V,W,K,re,oe,ne,he,de,Ee,ke,Te;r+=t.yaxis._shift;function ye(){if(b=t.xaxis,T=t.yaxis,B=b._length,z=T._length,I=b._offset,q=T._offset,S={},S[b._id]=b,C={},C[T._id]=T,l&&f)for(var bt=t.overlays,wt=0;wt<bt.length;wt++){var Ut=bt[wt].xaxis;S[Ut._id]=Ut;var Kt=bt[wt].yaxis;C[Kt._id]=Kt}P=oR(S),E=oR(C),V=aR(P,f),W=aR(E,l),K=!W&&!V,H=nR(e,e._fullLayout._axisMatchGroups,S,C),O=nR(e,e._fullLayout._axisConstraintGroups,S,C,H);var Gt=O.isSubplotConstrained||H.isSubplotConstrained;re=f||Gt,oe=l||Gt;var Nt=e._fullLayout;ne=Nt._has("scattergl"),he=Nt._has("splom"),de=Nt._has("svg")}ye();var Ae=Soe(W+V,e._fullLayout.dragmode,v),Me=fR(t,l+f+"drag",Ae,r,i,a,s);if(K&&!v)return Me.onmousedown=null,Me.style.pointerEvents="none",Me;var De={element:Me,gd:e,plotinfo:t};De.prepFn=function(bt,wt,Ut){var Kt=De.dragmode,Gt=e._fullLayout.dragmode;Gt!==Kt&&(De.dragmode=Gt),ye(),ke=e._fullLayout._invScaleX,Te=e._fullLayout._invScaleY,K||(v?bt.shiftKey?Gt==="pan"?Gt="zoom":dx(Gt)||(Gt="pan"):bt.ctrlKey&&(Gt="pan"):Gt="pan"),poe(Gt)?De.minDrag=1:De.minDrag=void 0,dx(Gt)?(De.xaxes=P,De.yaxes=E,xoe(bt,wt,Ut,De,Gt)):(De.clickFn=pt,dx(Kt)&&at(),K||(Gt==="zoom"?(De.moveFn=et,De.doneFn=tt,De.minDrag=1,xe(bt,wt,Ut)):Gt==="pan"&&(De.moveFn=kt,De.doneFn=Be))),e._fullLayout._redrag=function(){var Nt=e._dragdata;if(Nt&&Nt.element===Me){var $t=e._fullLayout.dragmode;dx($t)||(ye(),vt([0,0,B,z]),De.moveFn(Nt.dx,Nt.dy))}}};function at(){De.plotinfo.selection=!1,boe(e)}function pt(bt,wt){var Ut=De.gd;if(Ut._fullLayout._activeShapeIndex>=0){Ut._fullLayout._deactivateShape(Ut);return}var Kt=Ut._fullLayout.clickmode;if(e6(Ut),bt===2&&!m&&rr(),v)Kt.indexOf("select")>-1&&woe(wt,Ut,P,E,t.id,De),Kt.indexOf("event")>-1&&hoe.click(Ut,wt,t.id);else if(bt===1&&m){var Gt=l?T:b,Nt=l==="s"||f==="w"?0:1,$t=Gt._name+".range["+Nt+"]",Ar=Aoe(Gt,Nt),xr="left",Ct="middle";if(Gt.fixedrange)return;l?(Ct=l==="n"?"top":"bottom",Gt.side==="right"&&(xr="right")):f==="e"&&(xr="right"),Ut._context.showAxisRangeEntryBoxes&&t6.select(Me).call(coe.makeEditable,{gd:Ut,immediate:!0,background:Ut._fullLayout.paper_bgcolor,text:String(Ar),fill:Gt.tickfont?Gt.tickfont.color:"#444",horizontalAlign:xr,verticalAlign:Ct}).on("edit",function(Fe){var He=Gt.d2r(Fe);He!==void 0&&vx.call("_guiRelayout",Ut,$t,He)})}}doe.init(De);var lt,ut,Ye,xt,rt,Tt,St,mt,ge,Re;function xe(bt,wt,Ut){var Kt=Me.getBoundingClientRect();lt=wt-Kt.left,ut=Ut-Kt.top,e._fullLayout._calcInverseTransform(e);var Gt=tu.apply3DTransform(e._fullLayout._invTransform)(lt,ut);lt=Gt[0],ut=Gt[1],Ye={l:lt,r:lt,w:0,t:ut,b:ut,h:0},xt=e._hmpixcount?e._hmlumcount/e._hmpixcount:uoe(e._fullLayout.plot_bgcolor).getLuminance(),rt="M0,0H"+B+"V"+z+"H0V0",Tt=!1,St="xy",Re=!1,mt=cR(h,xt,I,q,rt),ge=hR(h,I,q)}function et(bt,wt){if(e._transitioningWithDuration)return!1;var Ut=Math.max(0,Math.min(B,ke*bt+lt)),Kt=Math.max(0,Math.min(z,Te*wt+ut)),Gt=Math.abs(Ut-lt),Nt=Math.abs(Kt-ut);Ye.l=Math.min(lt,Ut),Ye.r=Math.max(lt,Ut),Ye.t=Math.min(ut,Kt),Ye.b=Math.max(ut,Kt);function $t(){St="",Ye.r=Ye.l,Ye.t=Ye.b,ge.attr("d","M0,0Z")}if(O.isSubplotConstrained)Gt>gs||Nt>gs?(St="xy",Gt/B>Nt/z?(Nt=Gt*z/B,ut>Kt?Ye.t=ut-Nt:Ye.b=ut+Nt):(Gt=Nt*B/z,lt>Ut?Ye.l=lt-Gt:Ye.r=lt+Gt),ge.attr("d",px(Ye))):$t();else if(H.isSubplotConstrained)if(Gt>gs||Nt>gs){St="xy";var Ar=Math.min(Ye.l/B,(z-Ye.b)/z),xr=Math.max(Ye.r/B,(z-Ye.t)/z);Ye.l=Ar*B,Ye.r=xr*B,Ye.b=(1-Ar)*z,Ye.t=(1-xr)*z,ge.attr("d",px(Ye))}else $t();else!W||Nt<Math.min(Math.max(Gt*.6,tR),gs)?Gt<tR||!V?$t():(Ye.t=0,Ye.b=z,St="x",ge.attr("d",koe(Ye,ut))):!V||Gt<Math.min(Nt*.6,gs)?(Ye.l=0,Ye.r=B,St="y",ge.attr("d",Coe(Ye,lt))):(St="xy",ge.attr("d",px(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,St&&(Re=!0),e._dragged=Re,vR(mt,ge,Ye,rt,Tt,xt),ht(),e.emit("plotly_relayouting",Ee),Tt=!0}function ht(){Ee={},(St==="xy"||St==="x")&&($4(P,Ye.l/B,Ye.r/B,Ee,O.xaxes),zt("x",Ee)),(St==="xy"||St==="y")&&($4(E,(z-Ye.b)/z,(z-Ye.t)/z,Ee,O.yaxes),zt("y",Ee))}function tt(){ht(),e6(e),Be(),pR(e)}var Rt=[0,0,B,z],qt=null,Jt=r6.REDRAWDELAY,Ht=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function ar(bt){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(at(),e._transitioningWithDuration){bt.preventDefault(),bt.stopPropagation();return}ye(),clearTimeout(qt);var wt=-bt.deltaY;if(isFinite(wt)||(wt=bt.wheelDelta/10),!isFinite(wt)){tu.log("Did not find wheel motion attributes: ",bt);return}var Ut=Math.exp(-Math.min(Math.max(wt,-20),20)/200),Kt=Ht.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Gt=(bt.clientX-Kt.left)/Kt.width,Nt=(Kt.bottom-bt.clientY)/Kt.height,$t;function Ar(xr,Ct,Fe){if(xr.fixedrange)return;var He=tu.simpleMap(xr.range,xr.r2l),_t=He[0]+(He[1]-He[0])*Ct;function ct(yr){return xr.l2r(_t+(yr-_t)*Fe)}xr.range=He.map(ct)}if(re){for(f||(Gt=.5),$t=0;$t<P.length;$t++)Ar(P[$t],Gt,Ut);zt("x"),Rt[2]*=Ut,Rt[0]+=Rt[2]*Gt*(1/Ut-1)}if(oe){for(l||(Nt=.5),$t=0;$t<E.length;$t++)Ar(E[$t],Nt,Ut);zt("y"),Rt[3]*=Ut,Rt[1]+=Rt[3]*(1-Nt)*(1/Ut-1)}vt(Rt),_r(),e.emit("plotly_relayouting",Ee),qt=setTimeout(function(){e._fullLayout&&(Rt=[0,0,B,z],Be())},Jt),bt.preventDefault()}l.length*f.length!==1&&mR(Me,ar);function kt(bt,wt){if(bt=bt*ke,wt=wt*Te,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,V==="ew"||W==="ns"){var Ut=V?-bt:0,Kt=W?-wt:0;if(H.isSubplotConstrained){if(V&&W){var Gt=(bt/B-wt/z)/2;bt=Gt*B,wt=-Gt*z,Ut=-bt,Kt=-wt}W?Ut=-Kt*B/z:Kt=-Ut*z/B}V&&(iR(P,bt),zt("x")),W&&(iR(E,wt),zt("y")),vt([Ut,Kt,B,z]),_r(),e.emit("plotly_relayouting",Ee);return}function Nt(ct,yr,Er){for(var Tr=1-yr,Hr,_a,ka=0;ka<ct.length;ka++){var Ea=ct[ka];if(!Ea.fixedrange){Hr=Ea,_a=Ea._rl[Tr]+(Ea._rl[yr]-Ea._rl[Tr])/Moe(Er/Ea._length);var Ii=Ea.l2r(_a);Ii!==!1&&Ii!==void 0&&(Ea.range[yr]=Ii)}}return Hr._length*(Hr._rl[yr]-_a)/(Hr._rl[yr]-Hr._rl[Tr])}var $t=V==="w"==(W==="n")?1:-1;if(V&&W&&(O.isSubplotConstrained||H.isSubplotConstrained)){var Ar=(bt/B+$t*wt/z)/2;bt=Ar*B,wt=$t*Ar*z}var xr,Ct;if(V==="w"?bt=Nt(P,0,bt):V==="e"?bt=Nt(P,1,-bt):V||(bt=0),W==="n"?wt=Nt(E,1,wt):W==="s"?wt=Nt(E,0,-wt):W||(wt=0),xr=V==="w"?bt:0,Ct=W==="n"?wt:0,O.isSubplotConstrained&&!H.isSubplotConstrained||H.isSubplotConstrained&&V&&W&&$t>0){var Fe;if(H.isSubplotConstrained||!V&&W.length===1){for(Fe=0;Fe<P.length;Fe++)P[Fe].range=P[Fe]._r.slice(),K4(P[Fe],1-wt/z);bt=wt*B/z,xr=bt/2}if(H.isSubplotConstrained||!W&&V.length===1){for(Fe=0;Fe<E.length;Fe++)E[Fe].range=E[Fe]._r.slice(),K4(E[Fe],1-bt/B);wt=bt*z/B,Ct=wt/2}}(!H.isSubplotConstrained||!W)&&zt("x"),(!H.isSubplotConstrained||!V)&&zt("y");var He=B-bt,_t=z-wt;H.isSubplotConstrained&&!(V&&W)&&(V?(Ct=xr?0:bt*z/B,_t=He*z/B):(xr=Ct?0:wt*B/z,He=_t*B/z)),vt([xr,Ct,He,_t]),_r(),e.emit("plotly_relayouting",Ee)}function zt(bt,wt){for(var Ut=H.isSubplotConstrained?{x:E,y:P}[bt]:H[bt+"axes"],Kt=H.isSubplotConstrained?{x:P,y:E}[bt]:[],Gt=0;Gt<Ut.length;Gt++){var Nt=Ut[Gt],$t=Nt._id,Ar=H.xLinks[$t]||H.yLinks[$t],xr=Kt[0]||S[Ar]||C[Ar];xr&&(wt?(wt[Nt._name+".range[0]"]=wt[xr._name+".range[0]"],wt[Nt._name+".range[1]"]=wt[xr._name+".range[1]"]):Nt.range=xr.range.slice())}}function _r(){var bt=[],wt;function Ut($t){for(wt=0;wt<$t.length;wt++)$t[wt].fixedrange||bt.push($t[wt]._id)}function Kt($t,Ar){for(wt=0;wt<$t.length;wt++){var xr=$t[wt],Ct=xr[Ar];!xr.fixedrange&&Ct.tickmode==="sync"&&bt.push(Ct._id)}}for(re&&(Ut(P),Ut(O.xaxes),Ut(H.xaxes),Kt(t.overlays,"xaxis")),oe&&(Ut(E),Ut(O.yaxes),Ut(H.yaxes),Kt(t.overlays,"yaxis")),Ee={},wt=0;wt<bt.length;wt++){var Gt=bt[wt],Nt=Q4(e,Gt);eR.drawOne(e,Nt,{skipTitle:!0}),Ee[Nt._name+".range[0]"]=Nt.range[0],Ee[Nt._name+".range[1]"]=Nt.range[1]}eR.redrawComponents(e,bt)}function rr(){if(!e._transitioningWithDuration){var bt=e._context.doubleClick,wt=[];V&&(wt=wt.concat(P)),W&&(wt=wt.concat(E)),H.xaxes&&(wt=wt.concat(H.xaxes)),H.yaxes&&(wt=wt.concat(H.yaxes));var Ut={},Kt,Gt;if(bt==="reset+autosize")for(bt="autosize",Gt=0;Gt<wt.length;Gt++){Kt=wt[Gt];var Nt=Kt._rangeInitial0,$t=Kt._rangeInitial1,Ar=Nt!==void 0||$t!==void 0;if(Ar&&(Nt!==void 0&&Nt!==Kt.range[0]||$t!==void 0&&$t!==Kt.range[1])||!Ar&&Kt.autorange!==!0){bt="reset";break}}if(bt==="autosize")for(Gt=0;Gt<wt.length;Gt++)Kt=wt[Gt],Kt.fixedrange||(Ut[Kt._name+".autorange"]=!0);else if(bt==="reset"){for((V||O.isSubplotConstrained)&&(wt=wt.concat(O.xaxes)),W&&!O.isSubplotConstrained&&(wt=wt.concat(O.yaxes)),O.isSubplotConstrained&&(V?W||(wt=wt.concat(E)):wt=wt.concat(P)),Gt=0;Gt<wt.length;Gt++)if(Kt=wt[Gt],!Kt.fixedrange){var xr=Kt._name,Ct=Kt._autorangeInitial;Kt._rangeInitial0===void 0&&Kt._rangeInitial1===void 0?Ut[xr+".autorange"]=!0:Kt._rangeInitial0===void 0?(Ut[xr+".autorange"]=Ct,Ut[xr+".range"]=[null,Kt._rangeInitial1]):Kt._rangeInitial1===void 0?(Ut[xr+".range"]=[Kt._rangeInitial0,null],Ut[xr+".autorange"]=Ct):Ut[xr+".range"]=[Kt._rangeInitial0,Kt._rangeInitial1]}}e.emit("plotly_doubleclick",null),vx.call("_guiRelayout",e,Ut)}}function Be(){vt([0,0,B,z]),tu.syncOrAsync([_oe.previousPromises,function(){e._fullLayout._replotting=!1,vx.call("_guiRelayout",e,Ee)}],e)}function vt(bt){var wt=e._fullLayout,Ut=wt._plots,Kt=wt._subplots.cartesian,Gt,Nt,$t,Ar;if(he&&vx.subplotsRegistry.splom.drag(e),ne){for(Gt=0;Gt<Kt.length;Gt++)if(Nt=Ut[Kt[Gt]],$t=Nt.xaxis,Ar=Nt.yaxis,Nt._scene){$t.limitRange&&$t.limitRange(),Ar.limitRange&&Ar.limitRange();var xr=tu.simpleMap($t.range,$t.r2l),Ct=tu.simpleMap(Ar.range,Ar.r2l);Nt._scene.update({range:[xr[0],Ct[0],xr[1],Ct[1]]})}}if((he||ne)&&(yoe(e),goe(e)),de){var Fe=bt[2]/b._length,He=bt[3]/T._length;for(Gt=0;Gt<Kt.length;Gt++){Nt=Ut[Kt[Gt]],$t=Nt.xaxis,Ar=Nt.yaxis;var _t=(re||H.isSubplotConstrained)&&!$t.fixedrange&&S[$t._id],ct=(oe||H.isSubplotConstrained)&&!Ar.fixedrange&&C[Ar._id],yr,Er,Tr,Hr;if(_t?(yr=Fe,Tr=f||H.isSubplotConstrained?bt[0]:pr($t,yr)):H.xaHash[$t._id]?(yr=Fe,Tr=bt[0]*$t._length/b._length):H.yaHash[$t._id]?(yr=He,Tr=W==="ns"?-bt[1]*$t._length/T._length:pr($t,yr,{n:"top",s:"bottom"}[W])):(yr=gt($t,Fe,He),Tr=Cr($t,yr)),yr>1&&($t.maxallowed!==void 0&&re===($t.range[0]<$t.range[1]?"e":"w")||$t.minallowed!==void 0&&re===($t.range[0]<$t.range[1]?"w":"e"))&&(yr=1,Tr=0),ct?(Er=He,Hr=l||H.isSubplotConstrained?bt[1]:pr(Ar,Er)):H.yaHash[Ar._id]?(Er=He,Hr=bt[1]*Ar._length/T._length):H.xaHash[Ar._id]?(Er=Fe,Hr=V==="ew"?-bt[0]*Ar._length/b._length:pr(Ar,Er,{e:"right",w:"left"}[V])):(Er=gt(Ar,Fe,He),Hr=Cr(Ar,Er)),Er>1&&(Ar.maxallowed!==void 0&&oe===(Ar.range[0]<Ar.range[1]?"n":"s")||Ar.minallowed!==void 0&&oe===(Ar.range[0]<Ar.range[1]?"s":"n"))&&(Er=1,Hr=0),!(!yr&&!Er)){yr||(yr=1),Er||(Er=1);var _a=$t._offset-Tr/yr,ka=Ar._offset-Hr/Er;Nt.clipRect.call(Gh.setTranslate,Tr,Hr).call(Gh.setScale,yr,Er),Nt.plot.call(Gh.setTranslate,_a,ka).call(Gh.setScale,1/yr,1/Er),(yr!==Nt.xScaleFactor||Er!==Nt.yScaleFactor)&&(Gh.setPointGroupScale(Nt.zoomScalePts,yr,Er),Gh.setTextPointsScale(Nt.zoomScaleTxt,yr,Er)),Gh.hideOutsideRangePoints(Nt.clipOnAxisFalseTraces,Nt),Nt.xScaleFactor=yr,Nt.yScaleFactor=Er}}}}function gt(bt,wt,Ut){return bt.fixedrange?0:re&&O.xaHash[bt._id]?wt:oe&&(O.isSubplotConstrained?O.xaHash:O.yaHash)[bt._id]?Ut:0}function Cr(bt,wt){return wt?(bt.range=bt._r.slice(),K4(bt,wt),pr(bt,wt)):0}function pr(bt,wt,Ut){return bt._length*(1-wt)*moe[Ut||bt.constraintoward||"middle"]}return Me}function uR(e,t,r,i){var a=tu.ensureSingle(e.draglayer,t,r,function(s){s.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return a.call(voe,i),a.node()}function fR(e,t,r,i,a,s,l){var f=uR(e,"rect",t,r);return t6.select(f).call(Gh.setRect,i,a,s,l),f}function aR(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function Aoe(e,t){var r=e.range[t],i=Math.abs(r-e.range[1-t]),a;return e.type==="date"?r:e.type==="log"?(a=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,QI("."+a+"g")(Math.pow(10,r))):(a=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,QI("."+String(a)+"g")(r))}function $4(e,t,r,i,a){for(var s=0;s<e.length;s++){var l=e[s];if(!l.fixedrange)if(l.rangebreaks){var f=l._id.charAt(0)==="y",h=f?1-t:t,v=f?1-r:r;i[l._name+".range[0]"]=l.l2r(l.p2l(h*l._length)),i[l._name+".range[1]"]=l.l2r(l.p2l(v*l._length))}else{var m=l._rl[0],b=l._rl[1]-m;i[l._name+".range[0]"]=l.l2r(m+b*t),i[l._name+".range[1]"]=l.l2r(m+b*r)}}if(a&&a.length){var T=(t+(1-r))/2;$4(a,T,1-T,i,[])}}function iR(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i.fixedrange){if(i.rangebreaks){var a=0,s=i._length,l=i.p2l(a+t)-i.p2l(a),f=i.p2l(s+t)-i.p2l(s),h=(l+f)/2;i.range=[i.l2r(i._rl[0]-h),i.l2r(i._rl[1]-h)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)];i.limitRange&&i.limitRange()}}}function Moe(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Soe(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function cR(e,t,r,i,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",sR(r,i)).attr("d",a+"Z")}function hR(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:$I.background,stroke:$I.defaultLine,"stroke-width":1,opacity:0}).attr("transform",sR(t,r)).attr("d","M0,0Z")}function vR(e,t,r,i,a,s){e.attr("d",i+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),dR(e,t,a,s)}function dR(e,t,r,i){r||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function e6(e){t6.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function pR(e){rR&&e.data&&e._context.showTips&&(tu.notifier(tu._(e,"Double-click to zoom back out"),"long"),rR=!1)}function koe(e,t){return"M"+(e.l-.5)+","+(t-gs-.5)+"h-3v"+(2*gs+1)+"h3ZM"+(e.r+.5)+","+(t-gs-.5)+"h3v"+(2*gs+1)+"h-3Z"}function Coe(e,t){return"M"+(t-gs-.5)+","+(e.t-.5)+"v-3h"+(2*gs+1)+"v3ZM"+(t-gs-.5)+","+(e.b+.5)+"v3h"+(2*gs+1)+"v-3Z"}function px(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,gs)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function nR(e,t,r,i,a){for(var s=!1,l={},f={},h,v,m,b,T=(a||{}).xaHash,S=(a||{}).yaHash,C=0;C<t.length;C++){var P=t[C];for(h in r)if(P[h]){for(m in P)!(a&&(T[m]||S[m]))&&!(m.charAt(0)==="x"?r:i)[m]&&(l[m]=h);for(v in i)!(a&&(T[v]||S[v]))&&P[v]&&(s=!0)}for(v in i)if(P[v])for(b in P)!(a&&(T[b]||S[b]))&&!(b.charAt(0)==="x"?r:i)[b]&&(f[b]=v)}s&&(tu.extendFlat(l,f),f={});var E={},I=[];for(m in l){var q=Q4(e,m);I.push(q),E[q._id]=q}var B={},z=[];for(b in f){var O=Q4(e,b);z.push(O),B[O._id]=O}return{xaHash:E,yaHash:B,xaxes:I,yaxes:z,xLinks:l,yLinks:f,isSubplotConstrained:s}}function mR(e,t){if(!foe)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function oR(e){var t=[];for(var r in e)t.push(e[r]);return t}yR.exports={makeDragBox:Toe,makeDragger:uR,makeRectDragger:fR,makeZoombox:cR,makeCorners:hR,updateZoombox:vR,xyCorners:px,transitionZoombox:dR,removeZoombox:e6,showDoubleClickNotifier:pR,attachWheelEventHandler:mR}});var a6=ve(yx=>{"use strict";var Eoe=ja(),mx=If(),Loe=Xl(),Poe=Bh(),Nu=gR().makeDragBox,io=Ao().DRAGGERSIZE;yx.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){Eoe.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var i=Object.keys(r._plots||{}).sort(function(s,l){if((r._plots[s].mainplot&&!0)===(r._plots[l].mainplot&&!0)){var f=s.split("y"),h=l.split("y");return f[0]===h[0]?Number(f[1]||1)-Number(h[1]||1):Number(f[0]||1)-Number(h[0]||1)}return r._plots[s].mainplot?1:-1});i.forEach(function(s){var l=r._plots[s],f=l.xaxis,h=l.yaxis;if(!l.mainplot){var v=Nu(t,l,f._offset,h._offset,f._length,h._length,"ns","ew");v.onmousemove=function(T){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===s&&t._fullLayout._plots[s]&&mx.hover(t,T,s)},mx.hover(t,T,s),t._fullLayout._lasthover=v,t._fullLayout._hoversubplot=s},v.onmouseout=function(T){t._dragging||(t._fullLayout._hoversubplot=null,Loe.unhover(t,T))},t._context.showAxisDragHandles&&(Nu(t,l,f._offset-io,h._offset-io,io,io,"n","w"),Nu(t,l,f._offset+f._length,h._offset-io,io,io,"n","e"),Nu(t,l,f._offset-io,h._offset+h._length,io,io,"s","w"),Nu(t,l,f._offset+f._length,h._offset+h._length,io,io,"s","e"))}if(t._context.showAxisDragHandles){if(s===f._mainSubplot){var m=f._mainLinePosition;f.side==="top"&&(m-=io),Nu(t,l,f._offset+f._length*.1,m,f._length*.8,io,"","ew"),Nu(t,l,f._offset,m,f._length*.1,io,"","w"),Nu(t,l,f._offset+f._length*.9,m,f._length*.1,io,"","e")}if(s===h._mainSubplot){var b=h._mainLinePosition;h.side!=="right"&&(b-=io),Nu(t,l,b,h._offset+h._length*.1,io,h._length*.8,"ns",""),Nu(t,l,b,h._offset+h._length*.9,io,h._length*.1,"s",""),Nu(t,l,b,h._offset,io,h._length*.1,"n","")}}});var a=r._hoverlayer.node();a.onmousemove=function(s){s.target=t._fullLayout._lasthover,mx.hover(t,s,r._hoversubplot)},a.onclick=function(s){s.target=t._fullLayout._lasthover,mx.click(t,s)},a.onmousedown=function(s){t._fullLayout._lasthover.onmousedown(s)},yx.updateFx(t)}};yx.updateFx=function(e){var t=e._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";Poe(t._draggers,r)}});var bR=ve((D_e,xR)=>{"use strict";var _R=la();xR.exports=function(t){for(var r=_R.layoutArrayContainers,i=_R.layoutArrayRegexes,a=t.split("[")[0],s,l,f=0;f<i.length;f++)if(l=t.match(i[f]),l&&l.index===0){s=l[0];break}if(s||(s=r[r.indexOf(a)]),!s)return!1;var h=t.substr(s.length);return h?(l=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),l?{array:s,index:Number(l[1]),property:l[3]||""}:!1):{array:s,index:"",property:""}}});var TR=ve(Sg=>{"use strict";var Doe=fc(),i6=r_(),Mg=wh(),zoe=rw().sorterAsc,n6=la();Sg.containerArrayMatch=bR();var Ioe=Sg.isAddVal=function(t){return t==="add"||Doe(t)},wR=Sg.isRemoveVal=function(t){return t===null||t==="remove"};Sg.applyContainerArrayChanges=function(t,r,i,a,s){var l=r.astr,f=n6.getComponentMethod(l,"supplyLayoutDefaults"),h=n6.getComponentMethod(l,"draw"),v=n6.getComponentMethod(l,"drawOne"),m=a.replot||a.recalc||f===i6||h===i6,b=t.layout,T=t._fullLayout;if(i[""]){Object.keys(i).length>1&&Mg.warn("Full array edits are incompatible with other edits",l);var S=i[""][""];if(wR(S))r.set(null);else if(Array.isArray(S))r.set(S);else return Mg.warn("Unrecognized full array edit value",l,S),!0;return m?!1:(f(b,T),h(t),!0)}var C=Object.keys(i).map(Number).sort(zoe),P=r.get(),E=P||[],I=s(T,l).get(),q=[],B=-1,z=E.length,O,H,V,W,K,re,oe,ne;for(O=0;O<C.length;O++){if(V=C[O],W=i[V],K=Object.keys(W),re=W[""],oe=Ioe(re),V<0||V>E.length-(oe?0:1)){Mg.warn("index out of range",l,V);continue}if(re!==void 0)K.length>1&&Mg.warn("Insertion & removal are incompatible with edits to the same index.",l,V),wR(re)?q.push(V):oe?(re==="add"&&(re={}),E.splice(V,0,re),I&&I.splice(V,0,{})):Mg.warn("Unrecognized full object edit value",l,V,re),B===-1&&(B=V);else for(H=0;H<K.length;H++)ne=l+"["+V+"].",s(E[V],K[H],ne).set(W[K[H]])}for(O=q.length-1;O>=0;O--)E.splice(q[O],1),I&&I.splice(q[O],1);if(E.length?P||r.set(E):r.set(null),m)return!1;if(f(b,T),v!==i6){var he;if(B===-1)he=C;else{for(z=Math.max(E.length,z),he=[],O=0;O<C.length&&(V=C[O],!(V>=B));O++)he.push(V);for(O=B;O<z;O++)he.push(O)}for(O=0;O<he.length;O++)v(t,he[O])}else h(t);return!0}});var PR=ve(Bu=>{"use strict";var kR=Da(),I_e=W3(),CR=la(),Vs=Ft(),kg=eo(),ER=$n(),LR=Ua(),Cg=ER.cleanId,Roe=ER.getFromTrace,o6=CR.traceIs;Bu.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&Vs.log("Clearing previous rejected promises from queue."),e._promises=[]};Bu.cleanLayout=function(e){var t,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var i=(kg.subplotsRegistry.cartesian||{}).attrRegex,a=(kg.subplotsRegistry.polar||{}).attrRegex,s=(kg.subplotsRegistry.ternary||{}).attrRegex,l=(kg.subplotsRegistry.gl3d||{}).attrRegex,f=Object.keys(e);for(t=0;t<f.length;t++){var h=f[t];if(i&&i.test(h)){var v=e[h];v.anchor&&v.anchor!=="free"&&(v.anchor=Cg(v.anchor)),v.overlaying&&(v.overlaying=Cg(v.overlaying)),v.type||(v.isdate?v.type="date":v.islog?v.type="log":v.isdate===!1&&v.islog===!1&&(v.type="linear")),(v.autorange==="withzero"||v.autorange==="tozero")&&(v.autorange=!0,v.rangemode="tozero"),v.insiderange&&delete v.range,delete v.islog,delete v.isdate,delete v.categories,gx(v,"domain")&&delete v.domain}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<m;t++){var b=e.annotations[t];Vs.isPlainObject(b)&&(J0(b,"xref"),J0(b,"yref"))}var T=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<T;t++){var S=e.shapes[t];Vs.isPlainObject(S)&&(J0(S,"xref"),J0(S,"yref"))}var C=Array.isArray(e.images)?e.images.length:0;for(t=0;t<C;t++){var P=e.images[t];Vs.isPlainObject(P)&&(J0(P,"xref"),J0(P,"yref"))}var E=e.legend;return E&&(E.x>3?(E.x=1.02,E.xanchor="left"):E.x<-2&&(E.x=-.02,E.xanchor="right"),E.y>3?(E.y=1.02,E.yanchor="bottom"):E.y<-2&&(E.y=-.02,E.yanchor="top")),e.dragmode==="rotate"&&(e.dragmode="orbit"),LR.clean(e),e.template&&e.template.layout&&Bu.cleanLayout(e.template.layout),e};function J0(e,t){var r=e[t],i=t.charAt(0);r&&r!=="paper"&&(e[t]=Cg(r,i,!0))}Bu.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t],i;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.type==="histogramy"&&Bu.swapXYData(r),(r.type==="histogramx"||r.type==="histogramy")&&(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=Cg(r.xaxis,"x")),r.yaxis&&(r.yaxis=Cg(r.yaxis,"y")),o6(r,"gl3d")&&r.scene&&(r.scene=kg.subplotsRegistry.gl3d.cleanId(r.scene)),!o6(r,"pie-like")&&!o6(r,"bar-like"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=MR(r.textposition[i]);else r.textposition&&(r.textposition=MR(r.textposition));var a=CR.getModule(r);if(a&&a.colorbar){var s=a.colorbar.container,l=s?r[s]:r;l&&l.colorscale&&(l.colorscale==="YIGnBu"&&(l.colorscale="YlGnBu"),l.colorscale==="YIOrRd"&&(l.colorscale="YlOrRd"))}if(r.type==="surface"&&Vs.isPlainObject(r.contours)){var f=["x","y","z"];for(i=0;i<f.length;i++){var h=r.contours[f[i]];Vs.isPlainObject(h)&&(h.highlightColor&&(h.highlightcolor=h.highlightColor,delete h.highlightColor),h.highlightWidth&&(h.highlightwidth=h.highlightWidth,delete h.highlightWidth))}}if(r.type==="candlestick"||r.type==="ohlc"){var v=(r.increasing||{}).showlegend!==!1,m=(r.decreasing||{}).showlegend!==!1,b=AR(r.increasing),T=AR(r.decreasing);if(b!==!1&&T!==!1){var S=Foe(b,T,v,m);S&&(r.name=S)}else(b||T)&&!r.name&&(r.name=b||T)}gx(r,"line")&&delete r.line,"marker"in r&&(gx(r.marker,"line")&&delete r.marker.line,gx(r,"marker")&&delete r.marker),LR.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins)}};function AR(e){if(!Vs.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,(typeof t=="string"||typeof t=="number")&&String(t)}function Foe(e,t,r,i){if(r&&!i)return e;if(i&&!r||!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length),s;for(s=0;s<a&&e.charAt(s)===t.charAt(s);s++);var l=e.substr(0,s);return l.trim()}function MR(e){var t="middle",r="center";return typeof e=="string"&&(e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?r="left":e.indexOf("right")!==-1&&(r="right")),t+" "+r}function gx(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}Bu.swapXYData=function(e){var t;if(Vs.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);Vs.swapAttrs(e,["error_?.copy_ystyle"]),i&&Vs.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(typeof e.hoverinfo=="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++)a[t]==="x"?a[t]="y":a[t]==="y"&&(a[t]="x");e.hoverinfo=a.join("+")}};Bu.coerceTraceIndices=function(e,t){if(kR(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(a,s){return s});if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)Vs.isIndex(t[i],e.data.length)?r.push(t[i]):Vs.warn("trace index (",t[i],") is not a number or is out of bounds");return r}return t};Bu.manageArrayContainers=function(e,t,r){var i=e.obj,a=e.parts,s=a.length,l=a[s-1],f=kR(l);if(f&&t===null){var h=a.slice(0,s-1).join("."),v=Vs.nestedProperty(i,h).get();v.splice(l,1)}else f&&e.get()===void 0&&e.get()===void 0&&(r[e.astr]=null),e.set(t)};var qoe=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function SR(e){var t=e.search(qoe);if(t>0)return e.substr(0,t)}Bu.hasParent=function(e,t){for(var r=SR(t);r;){if(r in e)return!0;r=SR(r)}return!1};var Noe=["x","y","z"];Bu.clearAxisTypes=function(e,t,r){for(var i=0;i<t.length;i++)for(var a=e._fullData[i],s=0;s<3;s++){var l=Roe(e,a,Noe[s]);if(l&&l.type!=="log"){var f=l._name,h=l._id.substr(1);if(h.substr(0,5)==="scene"){if(r[h]!==void 0)continue;f=h+"."+f}var v=f+".type";r[f]===void 0&&r[v]===void 0&&Vs.nestedProperty(e.layout,v).set(null)}}}});var v6=ve(ei=>{"use strict";var bx=ja(),Boe=Da(),Ooe=pw(),dr=Ft(),qi=dr.nestedProperty,u6=Iy(),_s=pk(),ru=la(),Cx=T0(),ra=eo(),ss=Yi(),Uoe=q5(),Voe=Iu(),s6=_i(),Hoe=Ua(),Goe=a6().initInteractions,Zoe=Dh(),Yoe=qf().clearOutline,FR=td().dfltConfig,_x=TR(),On=PR(),hi=K2(),Zh=il(),Woe=Ao().AX_NAME_PATTERN,l6=0,DR=5;function Xoe(e,t,r,i){var a;if(e=dr.getGraphDiv(e),u6.init(e),dr.isPlainObject(t)){var s=t;t=s.data,r=s.layout,i=s.config,a=s.frames}var l=u6.triggerHandler(e,"plotly_beforeplot",[t,r,i]);if(l===!1)return Promise.reject();!t&&!r&&!dr.isPlotDiv(e)&&dr.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e);function f(){if(a)return ei.addFrames(e,a)}NR(e,i),r||(r={}),bx.select(e).classed("js-plotly-plot",!0),s6.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var h=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(On.cleanData(t),h?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||h)&&(e.layout=On.cleanLayout(r)),ra.supplyDefaults(e);var v=e._fullLayout,m=v._has("cartesian");v._replotting=!0,(h||v._shouldCreateBgLayer)&&(yse(e),v._shouldCreateBgLayer&&delete v._shouldCreateBgLayer),s6.initGradients(e),s6.initPatterns(e),h&&ss.saveShowSpikeInitial(e);var b=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;b&&ra.doCalcdata(e);for(var T=0;T<e.calcdata.length;T++)e.calcdata[T][0].trace=e._fullData[T];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){dr.isHidden(e)||ra.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):dr.clearResponsive(e);var S=dr.extendFlat({},v._size),C=0;function P(){for(var V=v._basePlotModules,W=0;W<V.length;W++)V[W].drawFramework&&V[W].drawFramework(e);!v._glcanvas&&v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(ne){return ne.key}),v._glcanvas.enter().append("canvas").attr("class",function(ne){return"gl-canvas gl-canvas-"+ne.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var K=e._context.plotGlPixelRatio;if(v._glcanvas){v._glcanvas.attr("width",v.width*K).attr("height",v.height*K).style("width",v.width+"px").style("height",v.height+"px");var re=v._glcanvas.data()[0].regl;if(re&&(Math.floor(v.width*K)!==re._gl.drawingBufferWidth||Math.floor(v.height*K)!==re._gl.drawingBufferHeight)){var oe="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(C)dr.error(oe);else return dr.log(oe+" Clearing graph and plotting again."),ra.cleanPlot([],{},e._fullData,v),ra.supplyDefaults(e),v=e._fullLayout,ra.doCalcdata(e),C++,P()}}return v.modebar.orientation==="h"?v._modebardiv.style("height",null).style("width","100%"):v._modebardiv.style("width",null).style("height",v.height+"px"),ra.previousPromises(e)}function E(){if(ra.clearAutoMarginIds(e),hi.drawMarginPushers(e),ss.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&ra.allowAutoMargin(e,"title.automargin"),v._has("pie"))for(var V=e._fullData,W=0;W<V.length;W++){var K=V[W];K.type==="pie"&&K.automargin&&ra.allowAutoMargin(e,"pie."+K.uid+".automargin")}return ra.doAutoMargin(e),ra.previousPromises(e)}function I(){if(ra.didMarginChange(S,v._size))return dr.syncOrAsync([E,hi.layoutStyles],e)}function q(){if(!b){B();return}return dr.syncOrAsync([ru.getComponentMethod("shapes","calcAutorange"),ru.getComponentMethod("annotations","calcAutorange"),B],e)}function B(){e._transitioning||(hi.doAutoRangeAndConstraints(e),h&&ss.saveRangeInitial(e),ru.getComponentMethod("rangeslider","calcAutorange")(e))}function z(){return ss.draw(e,h?"":"redraw")}var O=[ra.previousPromises,f,P,E,I];m&&O.push(q),O.push(hi.layoutStyles),m&&O.push(z,function(W){var K=W._fullLayout._insideTickLabelsUpdaterange;if(K)return W._fullLayout._insideTickLabelsUpdaterange=void 0,Eg(W,K).then(function(){ss.saveRangeInitial(W,!0)})}),O.push(hi.drawData,hi.finalDraw,Goe,ra.addLinks,ra.rehover,ra.redrag,ra.reselect,ra.doAutoMargin,ra.previousPromises);var H=dr.syncOrAsync(O,e);return(!H||!H.then)&&(H=Promise.resolve()),H.then(function(){return Lg(e),e})}function Lg(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function joe(e){return dr.extendFlat(FR,e)}function qR(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){dr.error(r)}}function Joe(e,t){var r=Hoe.combine(t,"white");qR(e,r)}function NR(e,t){if(!e._context){e._context=dr.extendDeep({},FR);var r=bx.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i=e._context,a,s,l;if(t){for(s=Object.keys(t),a=0;a<s.length;a++)l=s[a],!(l==="editable"||l==="edits")&&l in i&&(l==="setBackground"&&t[l]==="opaque"?i[l]=Joe:i[l]=t[l]);var f=t.editable;if(f!==void 0)for(i.editable=f,s=Object.keys(i.edits),a=0;a<s.length;a++)i.edits[s[a]]=f;if(t.edits)for(s=Object.keys(t.edits),a=0;a<s.length;a++)l=s[a],l in i.edits&&(i.edits[l]=t.edits[l]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),i.displayModeBar==="hover"&&!Ooe&&(i.displayModeBar=!0),(i.setBackground==="transparent"||typeof i.setBackground!="function")&&(i.setBackground=qR),i._hasZeroHeight=i._hasZeroHeight||e.clientHeight===0,i._hasZeroWidth=i._hasZeroWidth||e.clientWidth===0;var h=i.scrollZoom,v=i._scrollZoom={};if(h===!0)v.cartesian=1,v.gl3d=1,v.geo=1,v.mapbox=1,v.map=1;else if(typeof h=="string"){var m=h.split("+");for(a=0;a<m.length;a++)v[m[a]]=1}else h!==!1&&(v.gl3d=1,v.geo=1,v.mapbox=1,v.map=1)}function Koe(e){if(e=dr.getGraphDiv(e),!dr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return On.cleanData(e.data),On.cleanLayout(e.layout),e.calcdata=void 0,ei._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})}function Qoe(e,t,r,i){return e=dr.getGraphDiv(e),ra.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),ra.purge(e),ei._doPlot(e,t,r,i)}function wx(e,t){var r=t+1,i=[],a,s;for(a=0;a<e.length;a++)s=e[a],s<0?i.push(r+s):i.push(s);return i}function Tx(e,t,r){var i,a;for(i=0;i<t.length;i++){if(a=t[i],a!==parseInt(a,10))throw new Error("all values in "+r+" must be integers");if(a>=e.data.length||a<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(a,i+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1)throw new Error("each index in "+r+" must be unique.")}}function BR(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),Tx(e,t,"currentIndices"),typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&Tx(e,r,"newIndices"),typeof r!="undefined"&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function $oe(e,t,r){var i,a;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)if(a=t[i],typeof a!="object"||Array.isArray(a)||a===null)throw new Error("all values in traces array must be non-array objects");if(typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function ese(e,t,r,i){var a=dr.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!dr.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof r=="undefined")throw new Error("indices must be an integer or array of integers");Tx(e,r,"indices");for(var s in t){if(!Array.isArray(t[s])||t[s].length!==r.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(a&&(!(s in i)||!Array.isArray(i[s])||i[s].length!==t[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function tse(e,t,r,i){var a=dr.isPlainObject(i),s=[],l,f,h,v,m;Array.isArray(r)||(r=[r]),r=wx(r,e.data.length-1);for(var b in t)for(var T=0;T<r.length;T++){if(l=e.data[r[T]],h=qi(l,b),f=h.get(),v=t[b][T],!dr.isArrayOrTypedArray(v))throw new Error("attribute: "+b+" index: "+T+" must be an array");if(!dr.isArrayOrTypedArray(f))throw new Error("cannot extend missing or non-array attribute: "+b);if(f.constructor!==v.constructor)throw new Error("cannot extend array with an array of a different type: "+b);m=a?i[b][T]:i,Boe(m)||(m=-1),s.push({prop:h,target:f,insert:v,maxp:Math.floor(m)})}return s}function OR(e,t,r,i,a){ese(e,t,r,i);for(var s=tse(e,t,r,i),l={},f={},h=0;h<s.length;h++){var v=s[h].prop,m=s[h].maxp,b=a(s[h].target,s[h].insert,m);v.set(b[0]),Array.isArray(l[v.astr])||(l[v.astr]=[]),l[v.astr].push(b[1]),Array.isArray(f[v.astr])||(f[v.astr]=[]),f[v.astr].push(s[h].target.length)}return{update:l,maxPoints:f}}function UR(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function VR(e,t,r,i){e=dr.getGraphDiv(e);function a(h,v,m){var b,T;if(dr.isTypedArray(h))if(m<0){var S=new h.constructor(0),C=UR(h,v);m<0?(b=C,T=S):(b=S,T=C)}else if(b=new h.constructor(m),T=new h.constructor(h.length+v.length-m),m===v.length)b.set(v),T.set(h);else if(m<v.length){var P=v.length-m;b.set(v.subarray(P)),T.set(h),T.set(v.subarray(0,P),h.length)}else{var E=m-v.length,I=h.length-E;b.set(h.subarray(I)),b.set(v,E),T.set(h.subarray(0,I))}else b=h.concat(v),T=m>=0&&m<b.length?b.splice(0,b.length-m):[];return[b,T]}var s=OR(e,t,r,i,a),l=ei.redraw(e),f=[e,s.update,r,s.maxPoints];return _s.add(e,ei.prependTraces,f,VR,arguments),l}function HR(e,t,r,i){e=dr.getGraphDiv(e);function a(h,v,m){var b,T;if(dr.isTypedArray(h))if(m<=0){var S=new h.constructor(0),C=UR(v,h);m<0?(b=C,T=S):(b=S,T=C)}else if(b=new h.constructor(m),T=new h.constructor(h.length+v.length-m),m===v.length)b.set(v),T.set(h);else if(m<v.length){var P=v.length-m;b.set(v.subarray(0,P)),T.set(v.subarray(P)),T.set(h,P)}else{var E=m-v.length;b.set(v),b.set(h.subarray(0,E),v.length),T.set(h.subarray(E))}else b=v.concat(h),T=m>=0&&m<b.length?b.splice(m,b.length):[];return[b,T]}var s=OR(e,t,r,i,a),l=ei.redraw(e),f=[e,s.update,r,s.maxPoints];return _s.add(e,ei.extendTraces,f,HR,arguments),l}function GR(e,t,r){e=dr.getGraphDiv(e);var i=[],a=ei.deleteTraces,s=GR,l=[e,i],f=[e,t],h,v;for($oe(e,t,r),Array.isArray(t)||(t=[t]),t=t.map(function(m){return dr.extendFlat({},m)}),On.cleanData(t),h=0;h<t.length;h++)e.data.push(t[h]);for(h=0;h<t.length;h++)i.push(-t.length+h);if(typeof r=="undefined")return v=ei.redraw(e),_s.add(e,a,l,s,f),v;Array.isArray(r)||(r=[r]);try{BR(e,i,r)}catch(m){throw e.data.splice(e.data.length-t.length,t.length),m}return _s.startSequence(e),_s.add(e,a,l,s,f),v=ei.moveTraces(e,i,r),_s.stopSequence(e),v}function ZR(e,t){e=dr.getGraphDiv(e);var r=[],i=ei.addTraces,a=ZR,s=[e,r,t],l=[e,t],f,h;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),Tx(e,t,"indices"),t=wx(t,e.data.length-1),t.sort(dr.sorterDes),f=0;f<t.length;f+=1)h=e.data.splice(t[f],1)[0],r.push(h);var v=ei.redraw(e);return _s.add(e,i,s,a,l),v}function f6(e,t,r){e=dr.getGraphDiv(e);var i=[],a=[],s=f6,l=f6,f=[e,r,t],h=[e,t,r],v;if(BR(e,t,r),t=Array.isArray(t)?t:[t],typeof r=="undefined")for(r=[],v=0;v<t.length;v++)r.push(-t.length+v);for(r=Array.isArray(r)?r:[r],t=wx(t,e.data.length-1),r=wx(r,e.data.length-1),v=0;v<e.data.length;v++)t.indexOf(v)===-1&&i.push(e.data[v]);for(v=0;v<t.length;v++)a.push({newIndex:r[v],trace:e.data[t[v]]});for(a.sort(function(b,T){return b.newIndex-T.newIndex}),v=0;v<a.length;v+=1)i.splice(a[v].newIndex,0,a[v].trace);e.data=i;var m=ei.redraw(e);return _s.add(e,s,f,l,h),m}function Ax(e,t,r,i){e=dr.getGraphDiv(e),On.clearPromiseQueue(e);var a={};if(typeof t=="string")a[t]=r;else if(dr.isPlainObject(t))a=dr.extendFlat({},t),i===void 0&&(i=r);else return dr.warn("Restyle fail.",t,r,i),Promise.reject();Object.keys(a).length&&(e.changed=!0);var s=On.coerceTraceIndices(e,i),l=YR(e,a,s),f=l.flags;f.calc&&(e.calcdata=void 0),f.clearAxisTypes&&On.clearAxisTypes(e,s,{});var h=[];f.fullReplot?h.push(ei._doPlot):(h.push(ra.previousPromises),ra.supplyDefaults(e),f.markerSize&&(ra.doCalcdata(e),Ex(h)),f.style&&h.push(hi.doTraceStyle),f.colorbars&&h.push(hi.doColorBars),h.push(Lg)),h.push(ra.rehover,ra.redrag,ra.reselect),_s.add(e,Ax,[e,l.undoit,l.traces],Ax,[e,l.redoit,l.traces]);var v=dr.syncOrAsync(h,e);return(!v||!v.then)&&(v=Promise.resolve()),v.then(function(){return e.emit("plotly_restyle",l.eventData),e})}function kc(e){return e===void 0?null:e}function xx(e,t){return t?function(r,i,a){var s=qi(r,i),l=s.set;return s.set=function(f){var h=(a||"")+i;Mx(h,s.get(),f,e),l(f)},s}:qi}function Mx(e,t,r,i){if(Array.isArray(t)||Array.isArray(r))for(var a=Array.isArray(t)?t:[],s=Array.isArray(r)?r:[],l=Math.max(a.length,s.length),f=0;f<l;f++)Mx(e+"["+f+"]",a[f],s[f],i);else if(dr.isPlainObject(t)||dr.isPlainObject(r)){var h=dr.isPlainObject(t)?t:{},v=dr.isPlainObject(r)?r:{},m=dr.extendFlat({},h,v);for(var b in m)Mx(e+"."+b,h[b],v[b],i)}else i[e]===void 0&&(i[e]=kc(t))}function rse(e,t,r){for(var i in r){var a=qi(e,i);Mx(i,a.get(),r[i],t)}}function YR(e,t,r){var i=e._fullLayout,a=e._fullData,s=e.data,l=i._guiEditing,f=xx(i._preGUI,l),h=dr.extendDeepAll({},t),v,m=Zh.traceFlags(),b={},T={},S;function C(){return r.map(function(){})}function P(ge){var Re=ss.id2name(ge);S.indexOf(Re)===-1&&S.push(Re)}function E(ge){return"LAYOUT"+ge+".autorange"}function I(ge){return"LAYOUT"+ge+".range"}function q(ge){for(var Re=ge;Re<a.length;Re++)if(a[Re]._input===s[ge])return a[Re]}function B(ge,Re,xe){if(Array.isArray(ge)){ge.forEach(function(Rt){B(Rt,Re,xe)});return}if(!(ge in t||On.hasParent(t,ge))){var et;if(ge.substr(0,6)==="LAYOUT")et=f(e.layout,ge.replace("LAYOUT",""));else{var ht=r[xe],tt=i._tracePreGUI[q(ht)._fullInput.uid];et=xx(tt,l)(s[ht],ge)}ge in T||(T[ge]=C()),T[ge][xe]===void 0&&(T[ge][xe]=kc(et.get())),Re!==void 0&&et.set(Re)}}function z(ge){return function(Re){return a[Re][ge]}}function O(ge){return function(Re,xe){return Re===!1?a[r[xe]][ge]:null}}for(var H in t){if(On.hasParent(t,H))throw new Error("cannot set "+H+" and a parent attribute simultaneously");var V=t[H],W,K,re,oe,ne,he;if((H==="autobinx"||H==="autobiny")&&(H=H.charAt(H.length-1)+"bins",Array.isArray(V)?V=V.map(O(H)):V===!1?V=r.map(z(H)):V=null),b[H]=V,H.substr(0,6)==="LAYOUT"){re=f(e.layout,H.replace("LAYOUT","")),T[H]=[kc(re.get())],re.set(Array.isArray(V)?V[0]:V),m.calc=!0;continue}for(T[H]=C(),v=0;v<r.length;v++){W=s[r[v]],K=q(r[v]);var de=i._tracePreGUI[K._fullInput.uid];if(re=xx(de,l)(W,H),oe=re.get(),ne=Array.isArray(V)?V[v%V.length]:V,ne!==void 0){var Ee=re.parts[re.parts.length-1],ke=H.substr(0,H.length-Ee.length-1),Te=ke?ke+".":"",ye=ke?qi(K,ke).get():K;if(he=Cx.getTraceValObject(K,re.parts),he&&he.impliedEdits&&ne!==null)for(var Ae in he.impliedEdits)B(dr.relativeAttr(H,Ae),he.impliedEdits[Ae],v);else if((Ee==="thicknessmode"||Ee==="lenmode")&&oe!==ne&&(ne==="fraction"||ne==="pixels")&&ye){var Me=i._size,De=ye.orient,at=De==="top"||De==="bottom";if(Ee==="thicknessmode"){var pt=at?Me.h:Me.w;B(Te+"thickness",ye.thickness*(ne==="fraction"?1/pt:pt),v)}else{var lt=at?Me.w:Me.h;B(Te+"len",ye.len*(ne==="fraction"?1/lt:lt),v)}}else if(H==="type"&&(ne==="pie"!=(oe==="pie")||ne==="funnelarea"!=(oe==="funnelarea"))){var ut="x",Ye="y";(ne==="bar"||oe==="bar")&&W.orientation==="h"&&(ut="y",Ye="x"),dr.swapAttrs(W,["?","?src"],"labels",ut),dr.swapAttrs(W,["d?","?0"],"label",ut),dr.swapAttrs(W,["?","?src"],"values",Ye),oe==="pie"||oe==="funnelarea"?(qi(W,"marker.color").set(qi(W,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):ru.traceIs(W,"cartesian")&&qi(W,"marker.colors").set(qi(W,"marker.color").get())}T[H][v]=kc(oe);var xt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(xt.indexOf(H)!==-1){if(H==="orientation"){re.set(ne);var rt=W.x&&!W.y?"h":"v";if((re.get()||rt)===K.orientation)continue}else H==="orientationaxes"&&(W.orientation={v:"h",h:"v"}[K.orientation]);On.swapXYData(W),m.calc=m.clearAxisTypes=!0}else ra.dataArrayContainers.indexOf(re.parts[0])!==-1?(On.manageArrayContainers(re,ne,T),m.calc=!0):(he?he.arrayOk&&!ru.traceIs(K,"regl")&&(dr.isArrayOrTypedArray(ne)||dr.isArrayOrTypedArray(oe))?m.calc=!0:Zh.update(m,he):m.calc=!0,re.set(ne))}}if(["swapxyaxes","orientationaxes"].indexOf(H)!==-1&&ss.swap(e,r),H==="orientationaxes"){var Tt=qi(e.layout,"hovermode"),St=Tt.get();St==="x"?Tt.set("y"):St==="y"?Tt.set("x"):St==="x unified"?Tt.set("y unified"):St==="y unified"&&Tt.set("x unified")}if(["orientation","type"].indexOf(H)!==-1){for(S=[],v=0;v<r.length;v++){var mt=s[r[v]];ru.traceIs(mt,"cartesian")&&(P(mt.xaxis||"x"),P(mt.yaxis||"y"))}B(S.map(E),!0,0),B(S.map(I),[0,1],0)}}return(m.calc||m.plot)&&(m.fullReplot=!0),{flags:m,undoit:T,redoit:b,traces:r,eventData:dr.extendDeepNoArrays([],[h,r])}}function Eg(e,t,r){e=dr.getGraphDiv(e),On.clearPromiseQueue(e);var i={};if(typeof t=="string")i[t]=r;else if(dr.isPlainObject(t))i=dr.extendFlat({},t);else return dr.warn("Relayout fail.",t,r),Promise.reject();Object.keys(i).length&&(e.changed=!0);var a=JR(e,i),s=a.flags;s.calc&&(e.calcdata=void 0);var l=[ra.previousPromises];s.layoutReplot?l.push(hi.layoutReplot):Object.keys(i).length&&(WR(e,s,a)||ra.supplyDefaults(e),s.legend&&l.push(hi.doLegend),s.layoutstyle&&l.push(hi.layoutStyles),s.axrange&&Ex(l,a.rangesAltered),s.ticks&&l.push(hi.doTicksRelayout),s.modebar&&l.push(hi.doModeBar),s.camera&&l.push(hi.doCamera),s.colorbars&&l.push(hi.doColorBars),l.push(Lg)),l.push(ra.rehover,ra.redrag,ra.reselect),_s.add(e,Eg,[e,a.undoit],Eg,[e,a.redoit]);var f=dr.syncOrAsync(l,e);return(!f||!f.then)&&(f=Promise.resolve(e)),f.then(function(){return e.emit("plotly_relayout",a.eventData),e})}function WR(e,t,r){var i=e._fullLayout;if(!t.axrange)return!1;for(var a in t)if(a!=="axrange"&&t[a])return!1;var s,l,f=function(S,C){return dr.coerce(s,l,Voe,S,C)},h={};for(var v in r.rangesAltered){var m=ss.id2name(v);if(s=e.layout[m],l=i[m],Uoe(s,l,f,h),l._matchGroup){for(var b in l._matchGroup)if(b!==v){var T=i[ss.id2name(b)];T.autorange=l.autorange,T.range=l.range.slice(),T._input.range=l.range.slice()}}}return!0}function Ex(e,t){var r=t?function(i){var a=[],s=!0;for(var l in t){var f=ss.getFromId(i,l);if(a.push(l),(f.ticklabelposition||"").indexOf("inside")!==-1&&f._anchorAxis&&a.push(f._anchorAxis._id),f._matchGroup)for(var h in f._matchGroup)t[h]||a.push(h)}return ss.draw(i,a,{skipTitle:s})}:function(i){return ss.draw(i,"redraw")};e.push(Yoe,hi.doAutoRangeAndConstraints,r,hi.drawData,hi.finalDraw)}var XR=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,jR=/^[xyz]axis[0-9]*\.autorange$/,ase=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function JR(e,t){var r=e.layout,i=e._fullLayout,a=i._guiEditing,s=xx(i._preGUI,a),l=Object.keys(t),f=ss.list(e),h=dr.extendDeepAll({},t),v={},m,b,T;for(l=Object.keys(t),b=0;b<l.length;b++)if(l[b].indexOf("allaxes")===0){for(T=0;T<f.length;T++){var S=f[T]._id.substr(1),C=S.indexOf("scene")!==-1?S+".":"",P=l[b].replace("allaxes",C+f[T]._name);t[P]||(t[P]=t[l[b]])}delete t[l[b]]}var E=Zh.layoutFlags(),I={},q={};function B(tt,Rt){if(Array.isArray(tt)){tt.forEach(function(Jt){B(Jt,Rt)});return}if(!(tt in t||On.hasParent(t,tt))){var qt=s(r,tt);tt in q||(q[tt]=kc(qt.get())),Rt!==void 0&&qt.set(Rt)}}var z={},O;function H(tt){var Rt=ss.name2id(tt.split(".")[0]);return z[Rt]=1,Rt}for(var V in t){if(On.hasParent(t,V))throw new Error("cannot set "+V+" and a parent attribute simultaneously");for(var W=s(r,V),K=t[V],re=W.parts.length,oe=re-1;oe>0&&typeof W.parts[oe]!="string";)oe--;var ne=W.parts[oe],he=W.parts[oe-1]+"."+ne,de=W.parts.slice(0,oe).join("."),Ee=qi(e.layout,de).get(),ke=qi(i,de).get(),Te=W.get();if(K!==void 0){I[V]=K,q[V]=ne==="reverse"?K:kc(Te);var ye=Cx.getLayoutValObject(i,W.parts);if(ye&&ye.impliedEdits&&K!==null)for(var Ae in ye.impliedEdits)B(dr.relativeAttr(V,Ae),ye.impliedEdits[Ae]);if(["width","height"].indexOf(V)!==-1)if(K){B("autosize",null);var Me=V==="height"?"width":"height";B(Me,i[Me])}else i[V]=e._initialAutoSize[V];else if(V==="autosize")B("width",K?null:i.width),B("height",K?null:i.height);else if(he.match(XR))H(he),qi(i,de+"._inputRange").set(null);else if(he.match(jR)){H(he),qi(i,de+"._inputRange").set(null);var De=qi(i,de).get();De._inputDomain&&(De._input.domain=De._inputDomain.slice())}else he.match(ase)&&qi(i,de+"._inputDomain").set(null);if(ne==="type"){O=Ee;var at=ke.type==="linear"&&K==="log",pt=ke.type==="log"&&K==="linear";if(at||pt){if(!O||!O.range)B(de+".autorange",!0);else if(ke.autorange)at&&(O.range=O.range[1]>O.range[0]?[1,2]:[2,1]);else{var lt=O.range[0],ut=O.range[1];at?(lt<=0&&ut<=0&&B(de+".autorange",!0),lt<=0?lt=ut/1e6:ut<=0&&(ut=lt/1e6),B(de+".range[0]",Math.log(lt)/Math.LN10),B(de+".range[1]",Math.log(ut)/Math.LN10)):(B(de+".range[0]",Math.pow(10,lt)),B(de+".range[1]",Math.pow(10,ut)))}Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[W.parts[0]]&&W.parts[1]==="radialaxis"&&delete i[W.parts[0]]._subplot.viewInitial["radialaxis.range"],ru.getComponentMethod("annotations","convertCoords")(e,ke,K,B),ru.getComponentMethod("images","convertCoords")(e,ke,K,B)}else B(de+".autorange",!0),B(de+".range",null);qi(i,de+"._inputRange").set(null)}else if(ne.match(Woe)){var Ye=qi(i,V).get(),xt=(K||{}).type;(!xt||xt==="-")&&(xt="linear"),ru.getComponentMethod("annotations","convertCoords")(e,Ye,xt,B),ru.getComponentMethod("images","convertCoords")(e,Ye,xt,B)}var rt=_x.containerArrayMatch(V);if(rt){m=rt.array,b=rt.index;var Tt=rt.property,St=ye||{editType:"calc"};b!==""&&Tt===""&&(_x.isAddVal(K)?q[V]=null:_x.isRemoveVal(K)?q[V]=(qi(r,m).get()||[])[b]:dr.warn("unrecognized full object value",t)),Zh.update(E,St),v[m]||(v[m]={});var mt=v[m][b];mt||(mt=v[m][b]={}),mt[Tt]=K,delete t[V]}else ne==="reverse"?(Ee.range?Ee.range.reverse():(B(de+".autorange",!0),Ee.range=[1,0]),ke.autorange?E.calc=!0:E.plot=!0):(V==="dragmode"&&(K===!1&&Te!==!1||K!==!1&&Te===!1)||i._has("scatter-like")&&i._has("regl")&&V==="dragmode"&&(K==="lasso"||K==="select")&&!(Te==="lasso"||Te==="select")?E.plot=!0:ye?Zh.update(E,ye):E.calc=!0,W.set(K))}}for(m in v){var ge=_x.applyContainerArrayChanges(e,s(r,m),v[m],E,s);ge||(E.plot=!0)}for(var Re in z){O=ss.getFromId(e,Re);var xe=O&&O._constraintGroup;if(xe){E.calc=!0;for(var et in xe)z[et]||(ss.getFromId(e,et)._constraintShrinkable=!0)}}(KR(e)||t.height||t.width)&&(E.plot=!0);var ht=i.shapes;for(b=0;b<ht.length;b++)if(ht[b].showlegend){E.calc=!0;break}return(E.plot||E.calc)&&(E.layoutReplot=!0),{flags:E,rangesAltered:z,undoit:q,redoit:I,eventData:h}}function KR(e){var t=e._fullLayout,r=t.width,i=t.height;return e.layout.autosize&&ra.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==i}function Sx(e,t,r,i){e=dr.getGraphDiv(e),On.clearPromiseQueue(e),dr.isPlainObject(t)||(t={}),dr.isPlainObject(r)||(r={}),Object.keys(t).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var a=On.coerceTraceIndices(e,i),s=YR(e,dr.extendFlat({},t),a),l=s.flags,f=JR(e,dr.extendFlat({},r)),h=f.flags;(l.calc||h.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&On.clearAxisTypes(e,a,r);var v=[];h.layoutReplot?v.push(hi.layoutReplot):l.fullReplot?v.push(ei._doPlot):(v.push(ra.previousPromises),WR(e,h,f)||ra.supplyDefaults(e),l.style&&v.push(hi.doTraceStyle),(l.colorbars||h.colorbars)&&v.push(hi.doColorBars),h.legend&&v.push(hi.doLegend),h.layoutstyle&&v.push(hi.layoutStyles),h.axrange&&Ex(v,f.rangesAltered),h.ticks&&v.push(hi.doTicksRelayout),h.modebar&&v.push(hi.doModeBar),h.camera&&v.push(hi.doCamera),v.push(Lg)),v.push(ra.rehover,ra.redrag,ra.reselect),_s.add(e,Sx,[e,s.undoit,f.undoit,s.traces],Sx,[e,s.redoit,f.redoit,s.traces]);var m=dr.syncOrAsync(v,e);return(!m||!m.then)&&(m=Promise.resolve(e)),m.then(function(){return e.emit("plotly_update",{data:s.eventData,layout:f.eventData}),e})}function h6(e){return function(r){r._fullLayout._guiEditing=!0;var i=e.apply(null,arguments);return r._fullLayout._guiEditing=!1,i}}var ise=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],nse=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function zR(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=e.match(i.pattern);if(a){var s=a[1]||"";return{head:s,tail:e.substr(s.length+1),attr:i.attr}}}}function IR(e,t){var r=qi(t,e).get();if(r!==void 0)return r;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),r=qi(t,i.join(".")+".uirevision").get(),r!==void 0)return r;return t.uirevision}function ose(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function sse(e,t,r){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[r]||t[r].uid?-1:r}function RR(e,t){var r=dr.isPlainObject(e),i=Array.isArray(e);return r||i?(r&&dr.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function lse(e,t,r,i){var a=i._preGUI,s,l,f,h,v,m,b,T,S,C,P=[],E={},I={};for(s in a){if(v=zR(s,ise),v){if(S=v.head,C=v.tail,l=v.attr||S+".uirevision",f=qi(i,l).get(),h=f&&IR(l,t),h&&h===f){if(m=a[s],m===null&&(m=void 0),b=qi(t,s),T=b.get(),RR(T,m)){T===void 0&&C==="autorange"&&P.push(S),b.set(kc(qi(i,s).get()));continue}else if(C==="autorange"||C.substr(0,6)==="range["){var q=a[S+".range[0]"],B=a[S+".range[1]"],z=a[S+".autorange"];if(z||z===null&&q===null&&B===null){if(!(S in E)){var O=qi(t,S).get();E[S]=O&&(O.autorange||O.autorange!==!1&&(!O.range||O.range.length!==2))}if(E[S]){b.set(kc(qi(i,s).get()));continue}}}}}else dr.warn("unrecognized GUI edit: "+s);delete a[s],v&&v.tail.substr(0,6)==="range["&&(I[v.head]=1)}for(var H=0;H<P.length;H++){var V=P[H];if(I[V]){var W=qi(t,V).get();W&&delete W.autorange}}var K=i._tracePreGUI;for(var re in K){var oe=K[re],ne=null,he;for(s in oe){if(!ne){var de=ose(re,r);if(de<0){delete K[re];break}var Ee=r[de];he=Ee._fullInput;var ke=sse(re,e,he.index);if(ke<0){delete K[re];break}ne=e[ke]}if(v=zR(s,nse),v){if(v.attr?(f=qi(i,v.attr).get(),h=f&&IR(v.attr,t)):(f=he.uirevision,h=ne.uirevision,h===void 0&&(h=t.uirevision)),h&&h===f&&(m=oe[s],m===null&&(m=void 0),b=qi(ne,s),T=b.get(),RR(T,m))){b.set(kc(qi(he,s).get()));continue}}else dr.warn("unrecognized GUI edit: "+s+" in trace uid "+re);delete oe[s]}}}function use(e,t,r,i){var a,s;function l(){return ei.addFrames(e,a)}e=dr.getGraphDiv(e),On.clearPromiseQueue(e);var f=e._fullData,h=e._fullLayout;if(!dr.isPlotDiv(e)||!f||!h)s=ei.newPlot(e,t,r,i);else{if(dr.isPlainObject(t)){var v=t;t=v.data,r=v.layout,i=v.config,a=v.frames}var m=!1;if(i){var b=dr.extendDeep({},e._context);e._context=void 0,NR(e,i),m=c6(b,e._context)}e.data=t||[],On.cleanData(e.data),e.layout=r||{},On.cleanLayout(e.layout),lse(e.data,e.layout,f,h),ra.supplyDefaults(e,{skipUpdateCalc:!0});var T=e._fullData,S=e._fullLayout,C=S.datarevision===void 0,P=S.transition,E=cse(e,h,S,C,P),I=E.newDataRevision,q=fse(e,f,T,C,P,I);if(KR(e)&&(E.layoutReplot=!0),q.calc||E.calc){e.calcdata=void 0;for(var B=Object.getOwnPropertyNames(S),z=0;z<B.length;z++){var O=B[z],H=O.substring(0,5);if(H==="xaxis"||H==="yaxis"){var V=S[O]._emptyCategories;V&&V()}}}else ra.supplyDefaultsUpdateCalc(e.calcdata,T);var W=[];if(a&&(e._transitionData={},ra.createTransitionData(e),W.push(l)),S.transition&&!m&&(q.anim||E.anim))E.ticks&&W.push(hi.doTicksRelayout),ra.doCalcdata(e),hi.doAutoRangeAndConstraints(e),W.push(function(){return ra.transitionFromReact(e,q,E,h)});else if(q.fullReplot||E.layoutReplot||m)e._fullLayout._skipDefaults=!0,W.push(ei._doPlot);else{for(var K in E.arrays){var re=E.arrays[K];if(re.length){var oe=ru.getComponentMethod(K,"drawOne");if(oe!==dr.noop)for(var ne=0;ne<re.length;ne++)oe(e,re[ne]);else{var he=ru.getComponentMethod(K,"draw");if(he===dr.noop)throw new Error("cannot draw components: "+K);he(e)}}}W.push(ra.previousPromises),q.style&&W.push(hi.doTraceStyle),(q.colorbars||E.colorbars)&&W.push(hi.doColorBars),E.legend&&W.push(hi.doLegend),E.layoutstyle&&W.push(hi.layoutStyles),E.axrange&&Ex(W),E.ticks&&W.push(hi.doTicksRelayout),E.modebar&&W.push(hi.doModeBar),E.camera&&W.push(hi.doCamera),W.push(Lg)}W.push(ra.rehover,ra.redrag,ra.reselect),s=dr.syncOrAsync(W,e),(!s||!s.then)&&(s=Promise.resolve(e))}return s.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})}function fse(e,t,r,i,a,s){var l=t.length===r.length;if(!a&&!l)return{fullReplot:!0,calc:!0};var f=Zh.traceFlags();f.arrays={},f.nChanges=0,f.nChangesAnim=0;var h,v;function m(S){var C=Cx.getTraceValObject(v,S);return!v._module.animatable&&C.anim&&(C.anim=!1),C}var b={getValObject:m,flags:f,immutable:i,transition:a,newDataRevision:s,gd:e},T={};for(h=0;h<t.length;h++)if(r[h]){if(v=r[h]._fullInput,T[v.uid])continue;T[v.uid]=1,kx(t[h]._fullInput,v,[],b)}return(f.calc||f.plot)&&(f.fullReplot=!0),a&&f.nChanges&&f.nChangesAnim&&(f.anim=f.nChanges===f.nChangesAnim&&l?"all":"some"),f}function cse(e,t,r,i,a){var s=Zh.layoutFlags();s.arrays={},s.rangesAltered={},s.nChanges=0,s.nChangesAnim=0;function l(T){return Cx.getLayoutValObject(r,T)}for(var f in r)if(!(!f.startsWith("xaxis")&&!f.startsWith("yaxis"))&&t[f]){var h=r[f].domain,v=t[f].domain,m=t[f]._inputDomain;t[f]._inputDomain&&(h[0]===m[0]&&h[1]===m[1]?r[f].domain=t[f].domain:(h[0]!==v[0]||h[1]!==v[1])&&(r[f]._inputDomain=null))}var b={getValObject:l,flags:s,immutable:i,transition:a,gd:e};return kx(t,r,[],b),(s.plot||s.calc)&&(s.layoutReplot=!0),a&&s.nChanges&&s.nChangesAnim&&(s.anim=s.nChanges===s.nChangesAnim?"all":"some"),s}function kx(e,t,r,i){var a,s,l,f=i.getValObject,h=i.flags,v=i.immutable,m=i.inArray,b=i.arrayIndex;function T(){var de=a.editType;if(m&&de.indexOf("arraydraw")!==-1){dr.pushUnique(h.arrays[m],b);return}Zh.update(h,a),de!=="none"&&h.nChanges++,i.transition&&a.anim&&h.nChangesAnim++,(XR.test(l)||jR.test(l))&&(h.rangesAltered[r[0]]=1),s==="datarevision"&&(h.newDataRevision=1)}function S(de){return de.valType==="data_array"||de.arrayOk}for(s in e){if(h.calc&&!i.transition)return;var C=e[s],P=t[s],E=r.concat(s);if(l=E.join("."),!(s.charAt(0)==="_"||typeof C=="function"||C===P)){if((s==="tick0"||s==="dtick")&&r[0]!=="geo"){var I=t.tickmode;if(I==="auto"||I==="array"||!I)continue}if(!(s==="range"&&t.autorange)&&!((s==="zmin"||s==="zmax")&&t.type==="contourcarpet")&&(a=f(E),!!a&&!(a._compareAsJSON&&JSON.stringify(C)===JSON.stringify(P)))){var q=a.valType,B,z=S(a),O=Array.isArray(C),H=Array.isArray(P);if(O&&H){var V="_input_"+s,W=e[V],K=t[V];if(Array.isArray(W)&&W===K)continue}if(P===void 0)z&&O?h.calc=!0:T();else if(a._isLinkedToArray){var re=[],oe=!1;m||(h.arrays[s]=re);var ne=Math.min(C.length,P.length),he=Math.max(C.length,P.length);if(ne!==he)if(a.editType==="arraydraw")oe=!0;else{T();continue}for(B=0;B<ne;B++)kx(C[B],P[B],E.concat(B),dr.extendFlat({inArray:s,arrayIndex:B},i));if(oe)for(B=ne;B<he;B++)re.push(B)}else!q&&dr.isPlainObject(C)?kx(C,P,E,i):z?O&&H?(v&&(h.calc=!0),(v||i.newDataRevision)&&T()):O!==H?h.calc=!0:T():O&&H?(C.length!==P.length||String(C)!==String(P))&&T():T()}}}for(s in t)if(!(s in e||s.charAt(0)==="_"||typeof t[s]=="function"))if(a=f(r.concat(s)),S(a)&&Array.isArray(t[s])){h.calc=!0;return}else T()}function c6(e,t){var r;for(r in e)if(r.charAt(0)!=="_"){var i=e[r],a=t[r];if(i!==a)if(dr.isPlainObject(i)&&dr.isPlainObject(a)){if(c6(i,a))return!0}else if(Array.isArray(i)&&Array.isArray(a)){if(i.length!==a.length)return!0;for(var s=0;s<i.length;s++)if(i[s]!==a[s])if(dr.isPlainObject(i[s])&&dr.isPlainObject(a[s])){if(c6(i[s],a[s]))return!0}else return!0}else return!0}}function hse(e,t,r){if(e=dr.getGraphDiv(e),!dr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=e._transitionData;i._frameQueue||(i._frameQueue=[]),r=ra.supplyAnimationDefaults(r);var a=r.transition,s=r.frame;i._frameWaitingCnt===void 0&&(i._frameWaitingCnt=0);function l(v){return Array.isArray(a)?v>=a.length?a[0]:a[v]:a}function f(v){return Array.isArray(s)?v>=s.length?s[0]:s[v]:s}function h(v,m){var b=0;return function(){if(v&&++b===m)return v()}}return new Promise(function(v,m){function b(){if(i._frameQueue.length!==0){for(;i._frameQueue.length;){var ne=i._frameQueue.pop();ne.onInterrupt&&ne.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function T(ne){if(ne.length!==0){for(var he=0;he<ne.length;he++){var de;ne[he].type==="byname"?de=ra.computeFrame(e,ne[he].name):de=ne[he].data;var Ee=f(he),ke=l(he);ke.duration=Math.min(ke.duration,Ee.duration);var Te={frame:de,name:ne[he].name,frameOpts:Ee,transitionOpts:ke};he===ne.length-1&&(Te.onComplete=h(v,2),Te.onInterrupt=m),i._frameQueue.push(Te)}r.mode==="immediate"&&(i._lastFrameAt=-1/0),i._animationRaf||P()}}function S(){e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function C(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var ne=i._currentFrame=i._frameQueue.shift();if(ne){var he=ne.name?ne.name.toString():null;e._fullLayout._currentFrame=he,i._lastFrameAt=Date.now(),i._timeToNext=ne.frameOpts.duration,ra.transition(e,ne.frame.data,ne.frame.layout,On.coerceTraceIndices(e,ne.frame.traces),ne.frameOpts,ne.transitionOpts).then(function(){ne.onComplete&&ne.onComplete()}),e.emit("plotly_animatingframe",{name:he,frame:ne.frame,animation:{frame:ne.frameOpts,transition:ne.transitionOpts}})}else S()}function P(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var ne=function(){i._animationRaf=window.requestAnimationFrame(ne),Date.now()-i._lastFrameAt>i._timeToNext&&C()};ne()}var E=0;function I(ne){return Array.isArray(a)?E>=a.length?ne.transitionOpts=a[E]:ne.transitionOpts=a[0]:ne.transitionOpts=a,E++,ne}var q,B,z=[],O=t==null,H=Array.isArray(t),V=!O&&!H&&dr.isPlainObject(t);if(V)z.push({type:"object",data:I(dr.extendFlat({},t))});else if(O||["string","number"].indexOf(typeof t)!==-1)for(q=0;q<i._frames.length;q++)B=i._frames[q],B&&(O||String(B.group)===String(t))&&z.push({type:"byname",name:String(B.name),data:I({name:B.name})});else if(H)for(q=0;q<t.length;q++){var W=t[q];["number","string"].indexOf(typeof W)!==-1?(W=String(W),z.push({type:"byname",name:W,data:I({name:W})})):dr.isPlainObject(W)&&z.push({type:"object",data:I(dr.extendFlat({},W))})}for(q=0;q<z.length;q++)if(B=z[q],B.type==="byname"&&!i._frameHash[B.data.name]){dr.warn('animate failure: frame not found: "'+B.data.name+'"'),m();return}["next","immediate"].indexOf(r.mode)!==-1&&b(),r.direction==="reverse"&&z.reverse();var K=e._fullLayout._currentFrame;if(K&&r.fromcurrent){var re=-1;for(q=0;q<z.length;q++)if(B=z[q],B.type==="byname"&&B.name===K){re=q;break}if(re>0&&re<z.length-1){var oe=[];for(q=0;q<z.length;q++)B=z[q],(z[q].type!=="byname"||q>re)&&oe.push(B);z=oe}}z.length>0?T(z):(e.emit("plotly_animated"),v())})}function vse(e,t,r){if(e=dr.getGraphDiv(e),t==null)return Promise.resolve();if(!dr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,a,s,l,f=e._transitionData._frames,h=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var v=f.length+t.length*2,m=[],b={};for(i=t.length-1;i>=0;i--)if(dr.isPlainObject(t[i])){var T=t[i].name,S=(h[T]||b[T]||{}).name,C=t[i].name,P=h[S]||b[S];S&&C&&typeof C=="number"&&P&&l6<DR&&(l6++,dr.warn('addFrames: overwriting frame "'+(h[S]||b[S]).name+'" with a frame whose name of type "number" also equates to "'+S+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),l6===DR&&dr.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),b[T]={name:T},m.push({frame:ra.supplyFrameDefaults(t[i]),index:r&&r[i]!==void 0&&r[i]!==null?r[i]:v+i})}m.sort(function(V,W){return V.index>W.index?-1:V.index<W.index?1:0});var E=[],I=[],q=f.length;for(i=m.length-1;i>=0;i--){if(a=m[i].frame,typeof a.name=="number"&&dr.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;h[a.name="frame "+e._transitionData._counter++];);if(h[a.name]){for(s=0;s<f.length&&(f[s]||{}).name!==a.name;s++);E.push({type:"replace",index:s,value:a}),I.unshift({type:"replace",index:s,value:f[s]})}else l=Math.max(0,Math.min(m[i].index,q)),E.push({type:"insert",index:l,value:a}),I.unshift({type:"delete",index:l}),q++}var B=ra.modifyFrames,z=ra.modifyFrames,O=[e,I],H=[e,E];return _s&&_s.add(e,B,O,z,H),ra.modifyFrames(e,E)}function dse(e,t){if(e=dr.getGraphDiv(e),!dr.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,i,a=e._transitionData._frames,s=[],l=[];if(!t)for(t=[],r=0;r<a.length;r++)t.push(r);for(t=t.slice(),t.sort(),r=t.length-1;r>=0;r--)i=t[r],s.push({type:"delete",index:i}),l.unshift({type:"insert",index:i,value:a[i]});var f=ra.modifyFrames,h=ra.modifyFrames,v=[e,l],m=[e,s];return _s&&_s.add(e,f,v,h,m),ra.modifyFrames(e,s)}function pse(e){e=dr.getGraphDiv(e);var t=e._fullLayout||{},r=e._fullData||[];return ra.cleanPlot([],{},r,t),ra.purge(e),u6.purge(e),t._container&&t._container.remove(),delete e._context,e}function mse(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!dr.equalDomRects(r,t._lastBBox)){var i=t._invTransform=dr.inverseTransformMatrix(dr.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=r}}function yse(e){var t=bx.select(e),r=e._fullLayout;if(r._calcInverseTransform=mse,r._calcInverseTransform(e),r._container=t.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};bx.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=dr.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(Zoe.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var a=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=a.append("g").classed("imagelayer",!0),r._shapeLowerLayer=a.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var s=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=s.append("g").classed("imagelayer",!0),r._shapeUpperLayer=s.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}ei.animate=hse;ei.addFrames=vse;ei.deleteFrames=dse;ei.addTraces=GR;ei.deleteTraces=ZR;ei.extendTraces=VR;ei.moveTraces=f6;ei.prependTraces=HR;ei.newPlot=Qoe;ei._doPlot=Xoe;ei.purge=pse;ei.react=use;ei.redraw=Koe;ei.relayout=Eg;ei.restyle=Ax;ei.setPlotConfig=joe;ei.update=Sx;ei._guiRelayout=h6(Eg);ei._guiRestyle=h6(Ax);ei._guiUpdate=h6(Sx);ei._storeDirectGUIEdit=rse});var Ed=ve(Nf=>{"use strict";var gse=la();Nf.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("mapbox")||e._has("map"))?500:0};Nf.getRedrawFunc=function(e){return function(){gse.getComponentMethod("colorbar","draw")(e)}};Nf.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};Nf.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var QR=window.URL||window.webkitURL;Nf.createObjectURL=function(e){return QR.createObjectURL(e)};Nf.revokeObjectURL=function(e){return QR.revokeObjectURL(e)};Nf.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=_se(window.atob(e));return new window.Blob([r],{type:"image/"+t})};Nf.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function _se(e){for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),a=0;a<t;a++)i[a]=e.charCodeAt(a);return r}Nf.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/});var Lx=ve((O_e,$R)=>{"use strict";var p6=ja(),N_e=Ft(),xse=_i(),bse=Ua(),B_e=Dh(),d6=/"/g,Pg="TOBESTRIPPED",wse=new RegExp('("'+Pg+")|("+Pg+'")',"g");function Tse(e){var t=p6.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":t.html(i).text()});return t.remove(),r}function Ase(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}$R.exports=function(t,r,i){var a=t._fullLayout,s=a._paper,l=a._toppaper,f=a.width,h=a.height,v;s.insert("rect",":first-child").call(xse.setRect,0,0,f,h).call(bse.fill,a.paper_bgcolor);var m=a._basePlotModules||[];for(v=0;v<m.length;v++){var b=m[v];b.toSVG&&b.toSVG(t)}if(l){var T=l.node().childNodes,S=Array.prototype.slice.call(T);for(v=0;v<S.length;v++){var C=S[v];C.childNodes.length&&s.node().appendChild(C)}}a._draggers&&a._draggers.remove(),s.node().style.background="",s.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=p6.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){E.remove();return}else E.style({visibility:null,display:null});var I=this.style.fontFamily;I&&I.indexOf('"')!==-1&&E.style("font-family",I.replace(d6,Pg));var q=this.style.fontWeight;q&&(q==="normal"||q==="400")&&E.style("font-weight",void 0);var B=this.style.fontStyle;B&&B==="normal"&&E.style("font-style",void 0);var z=this.style.fontVariant;z&&z==="normal"&&E.style("font-variant",void 0)}),s.selectAll(".gradient_filled,.pattern_filled").each(function(){var E=p6.select(this),I=this.style.fill;I&&I.indexOf("url(")!==-1&&E.style("fill",I.replace(d6,Pg));var q=this.style.stroke;q&&q.indexOf("url(")!==-1&&E.style("stroke",q.replace(d6,Pg))}),(r==="pdf"||r==="eps")&&s.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),r==="svg"&&i&&(s.attr("width",i*f),s.attr("height",i*h),s.attr("viewBox","0 0 "+f+" "+h));var P=new window.XMLSerializer().serializeToString(s.node());return P=Tse(P),P=Ase(P),P=P.replace(wse,"'"),P}});var Px=ve((U_e,eF)=>{"use strict";var Mse=Ft(),Sse=M_().EventEmitter,Dg=Ed();function kse(e){var t=e.emitter||new Sse,r=new Promise(function(i,a){var s=window.Image,l=e.svg,f=e.format||"png",h=e.canvas,v=e.scale||1,m=e.width||300,b=e.height||150,T=v*m,S=v*b,C=h.getContext("2d",{willReadFrequently:!0}),P=new s,E,I;f==="svg"||Mse.isSafari()?I=Dg.encodeSVG(l):(E=Dg.createBlob(l,"svg"),I=Dg.createObjectURL(E)),h.width=T,h.height=S,P.onload=function(){var q;switch(E=null,Dg.revokeObjectURL(I),f!=="svg"&&C.drawImage(P,0,0,T,S),f){case"jpeg":q=h.toDataURL("image/jpeg");break;case"png":q=h.toDataURL("image/png");break;case"webp":q=h.toDataURL("image/webp");break;case"svg":q=I;break;default:var B="Image format is not jpeg, png, svg or webp.";if(a(new Error(B)),!e.promise)return t.emit("error",B)}i(q),e.promise||t.emit("success",q)},P.onerror=function(q){if(E=null,Dg.revokeObjectURL(I),a(q),!e.promise)return t.emit("error",q)},P.src=I});return e.promise?r:t}eF.exports=kse});var y6=ve((V_e,aF)=>{"use strict";var tF=Da(),rF=v6(),Cse=eo(),Bf=Ft(),zg=Ed(),Ese=Lx(),Lse=Px(),Pse=N1().version,m6={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function Dse(e,t){t=t||{};var r,i,a,s;Bf.isPlainObject(e)?(r=e.data||[],i=e.layout||{},a=e.config||{},s={}):(e=Bf.getGraphDiv(e),r=Bf.extendDeep([],e.data),i=Bf.extendDeep({},e.layout),a=e._context,s=e._fullLayout||{});function l(H){return!(H in t)||Bf.validate(t[H],m6[H])}if(!l("width")&&t.width!==null||!l("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!l("format"))throw new Error("Export format is not "+Bf.join2(m6.format.values,", "," or ")+".");var f={};function h(H,V){return Bf.coerce(t,f,m6,H,V)}var v=h("format"),m=h("width"),b=h("height"),T=h("scale"),S=h("setBackground"),C=h("imageDataOnly"),P=document.createElement("div");P.style.position="absolute",P.style.left="-5000px",document.body.appendChild(P);var E=Bf.extendFlat({},i);m?E.width=m:t.width===null&&tF(s.width)&&(E.width=s.width),b?E.height=b:t.height===null&&tF(s.height)&&(E.height=s.height);var I=Bf.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,setBackground:S}),q=zg.getRedrawFunc(P);function B(){return new Promise(function(H){setTimeout(H,zg.getDelay(P._fullLayout))})}function z(){return new Promise(function(H,V){var W=Ese(P,v,T),K=P._fullLayout.width,re=P._fullLayout.height;function oe(){rF.purge(P),document.body.removeChild(P)}if(v==="full-json"){var ne=Cse.graphJson(P,!1,"keepdata","object",!0,!0);return ne.version=Pse,ne=JSON.stringify(ne),oe(),H(C?ne:zg.encodeJSON(ne))}if(oe(),v==="svg")return H(C?W:zg.encodeSVG(W));var he=document.createElement("canvas");he.id=Bf.randstr(),Lse({format:v,width:K,height:re,scale:T,canvas:he,svg:W,promise:!0}).then(H).catch(V)})}function O(H){return C?H.replace(zg.IMAGE_URL_PREFIX,""):H}return new Promise(function(H,V){rF.newPlot(P,r,E,I).then(q).then(B).then(z).then(function(W){H(O(W))}).catch(function(W){V(W)})})}aF.exports=Dse});var sF=ve((H_e,oF)=>{"use strict";var au=Ft(),zse=eo(),Ise=T0(),Rse=td().dfltConfig,Ou=au.isPlainObject,Pd=Array.isArray,iF=au.isArrayOrTypedArray;oF.exports=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var i=Ise.get(),a=[],s={_context:au.extendFlat({},Rse)},l,f;Pd(t)?(s.data=au.extendDeep([],t),l=t):(s.data=[],l=[],a.push(no("array","data"))),Ou(r)?(s.layout=au.extendDeep({},r),f=r):(s.layout={},f={},arguments.length>1&&a.push(no("object","layout"))),zse.supplyDefaults(s);for(var h=s._fullData,v=l.length,m=0;m<v;m++){var b=l[m],T=["data",m];if(!Ou(b)){a.push(no("object",T));continue}var S=h[m],C=S.type,P=i.traces[C].attributes;P.type={valType:"enumerated",values:[C]},S.visible===!1&&b.visible!==!1&&a.push(no("invisible",T)),Dx(b,S,P,a,T)}var E=s._fullLayout,I=Fse(i,h);return Dx(f,E,I,a,"layout"),a.length===0?void 0:a};function Dx(e,t,r,i,a,s){s=s||[];for(var l=Object.keys(e),f=0;f<l.length;f++){var h=l[f],v=s.slice();v.push(h);var m=e[h],b=t[h],T=Bse(r,h),S=(T||{}).valType,C=S==="info_array",P=S==="colorscale",E=(T||{}).items;if(!Nse(r,h))i.push(no("schema",a,v));else if(Ou(m)&&Ou(b)&&S!=="any")Dx(m,b,T,i,a,v);else if(C&&Pd(m)){m.length>b.length&&i.push(no("unused",a,v.concat(b.length)));var I=b.length,q=Array.isArray(E);q&&(I=Math.min(I,E.length));var B,z,O,H,V;if(T.dimensions===2)for(z=0;z<I;z++)if(Pd(m[z])){m[z].length>b[z].length&&i.push(no("unused",a,v.concat(z,b[z].length)));var W=b[z].length;for(B=0;B<(q?Math.min(W,E[z].length):W);B++)O=q?E[z][B]:E,H=m[z][B],V=b[z][B],au.validate(H,O)?V!==H&&V!==+H&&i.push(no("dynamic",a,v.concat(z,B),H,V)):i.push(no("value",a,v.concat(z,B),H))}else i.push(no("array",a,v.concat(z),m[z]));else for(z=0;z<I;z++)O=q?E[z]:E,H=m[z],V=b[z],au.validate(H,O)?V!==H&&V!==+H&&i.push(no("dynamic",a,v.concat(z),H,V)):i.push(no("value",a,v.concat(z),H))}else if(T.items&&!C&&Pd(m)){var K=E[Object.keys(E)[0]],re=[],oe,ne;for(oe=0;oe<b.length;oe++){var he=b[oe]._index||oe;if(ne=v.slice(),ne.push(he),Ou(m[he])&&Ou(b[oe])){re.push(he);var de=m[he],Ee=b[oe];Ou(de)&&de.visible!==!1&&Ee.visible===!1?i.push(no("invisible",a,ne)):Dx(de,Ee,K,i,a,ne)}}for(oe=0;oe<m.length;oe++)ne=v.slice(),ne.push(oe),Ou(m[oe])?re.indexOf(oe)===-1&&i.push(no("unused",a,ne)):i.push(no("object",a,ne,m[oe]))}else!Ou(m)&&Ou(b)?i.push(no("object",a,v,m)):!iF(m)&&iF(b)&&!C&&!P?i.push(no("array",a,v,m)):h in t?au.validate(m,T)?T.valType==="enumerated"&&(T.coerceNumber&&m!==+b||m!==b)&&i.push(no("dynamic",a,v,m,b)):i.push(no("value",a,v,m)):i.push(no("unused",a,v,m))}return i}function Fse(e,t){for(var r=e.layout.layoutAttributes,i=0;i<t.length;i++){var a=t[i],s=e.traces[a.type],l=s.layoutAttributes;l&&(a.subplot?au.extendFlat(r[s.attributes.subplot.dflt],l):au.extendFlat(r,l))}return r}var qse={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Ld(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Ld(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Ld(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var i=Ou(r)?"container":"key";return Ld(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,r,i){return[Ld(e)+"key",t,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Ld(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Ld(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Ld(e){return Pd(e)?"In data trace "+e[1]+", ":"In "+e+", "}function no(e,t,r,i,a){r=r||"";var s,l;Pd(t)?(s=t[0],l=t[1]):(s=t,l=null);var f=Use(r),h=qse[e](t,f,i,a);return au.log(h),{code:e,container:s,trace:l,path:r,astr:f,msg:h}}function Nse(e,t){var r=nF(t),i=r.keyMinusId,a=r.id;return i in e&&e[i]._isSubplotObj&&a?!0:t in e}function Bse(e,t){if(t in e)return e[t];var r=nF(t);return e[r.keyMinusId]}var Ose=au.counterRegex("([a-z]+)");function nF(e){var t=e.match(Ose);return{keyMinusId:t&&t[1],id:t&&t[2]}}function Use(e){if(!Pd(e))return String(e);for(var t="",r=0;r<e.length;r++){var i=e[r];typeof i=="number"?t=t.substr(0,t.length-1)+"["+i+"]":t+=i,r<e.length-1&&(t+=".")}return t}});var uF=ve((G_e,lF)=>{"use strict";var Vse=Ft(),zx=Ed();function Hse(e,t,r){var i=document.createElement("a"),a="download"in i,s=new Promise(function(l,f){var h,v;if(a)return h=zx.createBlob(e,r),v=zx.createObjectURL(h),i.href=v,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),zx.revokeObjectURL(v),h=null,l(t);if(Vse.isSafari()){var m=r==="svg"?",":";base64,";return zx.octetStream(m+encodeURIComponent(e)),l(t)}f(new Error("download error"))});return s}lF.exports=Hse});var g6=ve((Y_e,cF)=>{"use strict";var fF=Ft(),Gse=y6(),Zse=uF(),Z_e=Ed();function Yse(e,t){var r;return fF.isPlainObject(e)||(r=fF.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(i,a){r&&r._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),r&&(r._snapshotInProgress=!0);var s=Gse(e,t),l=t.filename||e.fn||"newplot";l+="."+t.format.replace("-","."),s.then(function(f){return r&&(r._snapshotInProgress=!1),Zse(f,l,t.format)}).then(function(f){i(f)}).catch(function(f){r&&(r._snapshotInProgress=!1),a(f)})})}cF.exports=Yse});var mF=ve(_6=>{"use strict";var Hs=Ft(),Gs=Hs.isPlainObject,hF=T0(),vF=eo(),Wse=ms(),dF=Di(),pF=td().dfltConfig;_6.makeTemplate=function(e){e=Hs.isPlainObject(e)?e:Hs.getGraphDiv(e),e=Hs.extendDeep({_context:pF},{data:e.data,layout:e.layout}),vF.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(S){var C={};Ig(S,C,jse.bind(null,S));var P=Hs.coerce(S,{},Wse,"type"),E=i.data[P];E||(E=i.data[P]=[]),E.push(C)}),Ig(r,i.layout,Xse.bind(null,r)),delete i.layout.template;var a=r.template;if(Gs(a)){var s=a.layout,l,f,h,v,m,b;Gs(s)&&Ix(s,i.layout);var T=a.data;if(Gs(T)){for(f in i.data)if(h=T[f],Array.isArray(h)){for(m=i.data[f],b=m.length,v=h.length,l=0;l<b;l++)Ix(h[l%v],m[l]);for(l=b;l<v;l++)m.push(Hs.extendDeep({},h[l]))}for(f in T)f in i.data||(i.data[f]=Hs.extendDeep([],T[f]))}}return i};function Ix(e,t){e=Hs.extendDeep({},e);var r=Object.keys(e).sort(),i,a;function s(m,b,T){if(Gs(b)&&Gs(m))Ix(m,b);else if(Array.isArray(b)&&Array.isArray(m)){var S=dF.arrayTemplater({_template:e},T);for(a=0;a<b.length;a++){var C=b[a],P=S.newItem(C)._template;P&&Ix(P,C)}var E=S.defaultItems();for(a=0;a<E.length;a++)b.push(E[a]._template);for(a=0;a<b.length;a++)delete b[a].templateitemname}}for(i=0;i<r.length;i++){var l=r[i],f=e[l];if(l in t?s(f,t[l],l):t[l]=f,Rx(l)===l)for(var h in t){var v=Rx(h);h!==v&&v===l&&!(h in e)&&s(f,t[h],l)}}}function Rx(e){return e.replace(/[0-9]+$/,"")}function Ig(e,t,r,i,a){var s=a&&r(a);for(var l in e){var f=e[l],h=iu(e,l,i),v=iu(e,l,a),m=r(v);if(!m){var b=Rx(l);b!==l&&(v=iu(e,b,a),m=r(v))}if(!(s&&s===m)&&!(!m||m._noTemplating||m.valType==="data_array"||m.arrayOk&&Array.isArray(f)))if(!m.valType&&Gs(f))Ig(f,t,r,h,v);else if(m._isLinkedToArray&&Array.isArray(f))for(var T=!1,S=0,C={},P=0;P<f.length;P++){var E=f[P];if(Gs(E)){var I=E.name;if(I)C[I]||(Ig(E,t,r,iu(f,S,h),iu(f,S,v)),S++,C[I]=1);else if(!T){var q=dF.arrayDefaultKey(l),B=iu(e,q,i),z=iu(f,S,h);Ig(E,t,r,z,iu(f,S,v));var O=Hs.nestedProperty(t,z),H=Hs.nestedProperty(t,B);H.set(O.get()),O.set(null),T=!0}}}else{var V=Hs.nestedProperty(t,h);V.set(f)}}}function Xse(e,t){return hF.getLayoutValObject(e,Hs.nestedProperty({},t).parts)}function jse(e,t){return hF.getTraceValObject(e,Hs.nestedProperty({},t).parts)}function iu(e,t,r){var i;return r?Array.isArray(e)?i=r+"["+t+"]":i=r+"."+t:i=t,i}_6.validateTemplate=function(e,t){var r=Hs.extendDeep({},{_context:pF,data:e.data,layout:e.layout}),i=r.layout||{};Gs(t)||(t=i.template||{});var a=t.layout,s=t.data,l=[];r.layout=i,r.layout.template=t,vF.supplyDefaults(r);var f=r._fullLayout,h=r._fullData,v={};function m(B,z){for(var O in B)if(O.charAt(0)!=="_"&&Gs(B[O])){var H=Rx(O),V=[],W;for(W=0;W<z.length;W++)V.push(iu(B,O,z[W])),H!==O&&V.push(iu(B,H,z[W]));for(W=0;W<V.length;W++)v[V[W]]=1;m(B[O],V)}}function b(B,z){for(var O in B)if(O.indexOf("defaults")===-1&&Gs(B[O])){var H=iu(B,O,z);v[H]?b(B[O],H):l.push({code:"unused",path:H})}}if(Gs(a)?(m(f,["layout"]),b(a,"layout")):l.push({code:"layout"}),!Gs(s))l.push({code:"data"});else{for(var T={},S,C=0;C<h.length;C++){var P=h[C];S=P.type,T[S]=(T[S]||0)+1,P._fullInput._template||l.push({code:"missing",index:P.index,traceType:S})}for(S in s){var E=s[S].length,I=T[S]||0;E>I?l.push({code:"unused",traceType:S,templateCount:E,dataCount:I}):I>E&&l.push({code:"reused",traceType:S,templateCount:E,dataCount:I})}}function q(B,z){for(var O in B)if(O.charAt(0)!=="_"){var H=B[O],V=iu(B,O,z);Gs(H)?(Array.isArray(B)&&H._template===!1&&H.templateitemname&&l.push({code:"missing",path:V,templateitemname:H.templateitemname}),q(H,V)):Array.isArray(H)&&Jse(H)&&q(H,V)}}if(q({data:h,layout:f},""),l.length)return l.map(Kse)};function Jse(e){for(var t=0;t<e.length;t++)if(Gs(e[t]))return!0}function Kse(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}});var gF=ve(Wi=>{"use strict";var Xn=v6();Wi._doPlot=Xn._doPlot;Wi.newPlot=Xn.newPlot;Wi.restyle=Xn.restyle;Wi.relayout=Xn.relayout;Wi.redraw=Xn.redraw;Wi.update=Xn.update;Wi._guiRestyle=Xn._guiRestyle;Wi._guiRelayout=Xn._guiRelayout;Wi._guiUpdate=Xn._guiUpdate;Wi._storeDirectGUIEdit=Xn._storeDirectGUIEdit;Wi.react=Xn.react;Wi.extendTraces=Xn.extendTraces;Wi.prependTraces=Xn.prependTraces;Wi.addTraces=Xn.addTraces;Wi.deleteTraces=Xn.deleteTraces;Wi.moveTraces=Xn.moveTraces;Wi.purge=Xn.purge;Wi.addFrames=Xn.addFrames;Wi.deleteFrames=Xn.deleteFrames;Wi.animate=Xn.animate;Wi.setPlotConfig=Xn.setPlotConfig;var Qse=Sy().getGraphDiv,$se=G2().eraseActiveShape;Wi.deleteActiveShape=function(e){return $se(Qse(e))};Wi.toImage=y6();Wi.validate=sF();Wi.downloadImage=g6();var yF=mF();Wi.makeTemplate=yF.makeTemplate;Wi.validateTemplate=yF.validateTemplate});var xF=ve((j_e,_F)=>{"use strict";var x6=Ft(),ele=la();_F.exports=function(t,r,i,a){var s=a("x"),l=a("y"),f,h=ele.getComponentMethod("calendars","handleTraceDefaults");if(h(t,r,["x","y"],i),s){var v=x6.minRowLength(s);l?f=Math.min(v,x6.minRowLength(l)):(f=v,a("y0"),a("dy"))}else{if(!l)return 0;f=x6.minRowLength(l),a("x0"),a("dx")}return r._length=f,f}});var AF=ve((J_e,TF)=>{"use strict";var bF=Ft().dateTick0,tle=Hi(),rle=tle.ONEWEEK;function wF(e,t){return e%rle===0?bF(t,1):bF(t,0)}TF.exports=function(t,r,i,a,s){if(s||(s={x:!0,y:!0}),s.x){var l=a("xperiod");l&&(a("xperiod0",wF(l,r.xcalendar)),a("xperiodalignment"))}if(s.y){var f=a("yperiod");f&&(a("yperiod0",wF(f,r.ycalendar)),a("yperiodalignment"))}}});var kF=ve((K_e,SF)=>{"use strict";var MF=["orientation","groupnorm","stackgaps"];SF.exports=function(t,r,i,a){var s=i._scatterStackOpts,l=a("stackgroup");if(l){var f=r.xaxis+r.yaxis,h=s[f];h||(h=s[f]={});var v=h[l],m=!1;v?v.traces.push(r):(v=h[l]={traceIndices:[],traces:[r]},m=!0);for(var b={orientation:r.x&&!r.y?"h":"v"},T=0;T<MF.length;T++){var S=MF[T],C=S+"Found";if(!v[C]){var P=t[S]!==void 0,E=S==="orientation";if((P||m)&&(v[S]=a(S,b[S]),E&&(v.fillDflt=v[S]==="h"?"tonextx":"tonexty"),P&&(v[C]=!0,!m&&(delete v.traces[0][S],E))))for(var I=0;I<v.traces.length-1;I++){var q=v.traces[I];q._input.fill!==q.fill&&(q.fill=v.fillDflt)}}}return v}}});var b6=ve((Q_e,PF)=>{"use strict";var CF=Ua(),EF=Sf().hasColorscale,LF=cd(),ale=rs();PF.exports=function(t,r,i,a,s,l){var f=ale.isBubble(t),h=(t.line||{}).color,v;if(l=l||{},h&&(i=h),s("marker.symbol"),s("marker.opacity",f?.7:1),s("marker.size"),l.noAngle||(s("marker.angle"),l.noAngleRef||s("marker.angleref"),l.noStandOff||s("marker.standoff")),s("marker.color",i),EF(t,"marker")&&LF(t,r,a,s,{prefix:"marker.",cLetter:"c"}),l.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),l.noLine||(h&&!Array.isArray(h)&&r.marker.color!==h?v=h:f?v=CF.background:v=CF.defaultLine,s("marker.line.color",v),EF(t,"marker.line")&&LF(t,r,a,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",f?1:0)),f&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),l.gradient){var m=s("marker.gradient.type");m!=="none"&&s("marker.gradient.color")}}});var w6=ve(($_e,DF)=>{"use strict";var ile=Ft().isArrayOrTypedArray,nle=Sf().hasColorscale,ole=cd();DF.exports=function(t,r,i,a,s,l){l||(l={});var f=(t.marker||{}).color;if(f&&f._inputArray&&(f=f._inputArray),s("line.color",i),nle(t,"line"))ole(t,r,a,s,{prefix:"line.",cLetter:"c"});else{var h=(ile(f)?!1:f)||i;s("line.color",h)}s("line.width"),l.noDash||s("line.dash"),l.backoff&&s("line.backoff")}});var IF=ve((e2e,zF)=>{"use strict";zF.exports=function(t,r,i){var a=i("line.shape");a==="spline"&&i("line.smoothing")}});var T6=ve((t2e,RF)=>{"use strict";var sle=Ft();RF.exports=function(e,t,r,i,a){a=a||{},i("textposition"),sle.coerceFont(i,"textfont",a.font||r.font,a),a.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}});var A6=ve((r2e,qF)=>{"use strict";var Fx=Ua(),FF=Ft().isArrayOrTypedArray;function lle(e){for(var t=Fx.interpolate(e[0][1],e[1][1],.5),r=2;r<e.length;r++){var i=Fx.interpolate(e[r-1][1],e[r][1],.5);t=Fx.interpolate(t,i,e[r-1][0]/e[r][0])}return t}qF.exports=function(t,r,i,a,s){s||(s={});var l=!1;if(r.marker){var f=r.marker.color,h=(r.marker.line||{}).color;f&&!FF(f)?l=f:h&&!FF(h)&&(l=h)}var v;if(s.moduleHasFillgradient){var m=a("fillgradient.type");if(m!=="none"){a("fillgradient.start"),a("fillgradient.stop");var b=a("fillgradient.colorscale");b&&(v=lle(b))}}a("fillcolor",Fx.addOpacity((r.line||{}).color||l||v||i,.5))}});var UF=ve((a2e,OF)=>{"use strict";var NF=Ft(),ule=la(),fle=Sc(),cle=lx(),K0=rs(),hle=xF(),vle=AF(),dle=kF(),ple=b6(),mle=w6(),BF=IF(),yle=T6(),gle=A6(),_le=Ft().coercePattern;OF.exports=function(t,r,i,a){function s(S,C){return NF.coerce(t,r,fle,S,C)}var l=hle(t,r,a,s);if(l||(r.visible=!1),!!r.visible){vle(t,r,a,s),s("xhoverformat"),s("yhoverformat"),s("zorder");var f=dle(t,r,a,s);a.scattermode==="group"&&r.orientation===void 0&&s("orientation","v");var h=!f&&l<cle.PTS_LINESONLY?"lines+markers":"lines";s("text"),s("hovertext"),s("mode",h),K0.hasMarkers(r)&&ple(t,r,i,a,s,{gradient:!0}),K0.hasLines(r)&&(mle(t,r,i,a,s,{backoff:!0}),BF(t,r,s),s("connectgaps"),s("line.simplify")),K0.hasText(r)&&(s("texttemplate"),yle(t,r,a,s));var v=[];(K0.hasMarkers(r)||K0.hasText(r))&&(s("cliponaxis"),s("marker.maxdisplayed"),v.push("points")),s("fill",f?f.fillDflt:"none"),r.fill!=="none"&&(gle(t,r,i,s,{moduleHasFillgradient:!0}),K0.hasLines(r)||BF(t,r,s),_le(s,"fillpattern",r.fillcolor,!1));var m=(r.line||{}).color,b=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&v.push("fills"),s("hoveron",v.join("+")||"points"),r.hoveron!=="fills"&&s("hovertemplate");var T=ule.getComponentMethod("errorbars","supplyDefaults");T(t,r,m||b||i,{axis:"y"}),T(t,r,m||b||i,{axis:"x",inherit:"y"}),NF.coerceSelectionMarkerOpacity(r,s)}}});var HF=ve((i2e,VF)=>{"use strict";var xle=og().getAxisGroup;VF.exports=function(t,r,i,a,s){var l=r.orientation,f=r[{v:"x",h:"y"}[l]+"axis"],h=xle(i,f)+l,v=i._alignmentOpts||{},m=a("alignmentgroup"),b=v[h];b||(b=v[h]={});var T=b[m];T?T.traces.push(r):T=b[m]={traces:[r],alignmentIndex:Object.keys(b).length,offsetGroups:{}};var S=a("offsetgroup")||"",C=T.offsetGroups,P=C[S];r._offsetIndex=0,(s!=="group"||S)&&(P||(P=C[S]={offsetIndex:Object.keys(C).length}),r._offsetIndex=P.offsetIndex)}});var ZF=ve((n2e,GF)=>{"use strict";var ble=Ft(),wle=HF(),Tle=Sc();GF.exports=function(t,r){var i,a,s,l=r.scattermode;function f(T){return ble.coerce(a._input,a,Tle,T)}if(r.scattermode==="group")for(s=0;s<t.length;s++)a=t[s],a.type==="scatter"&&(i=a._input,wle(i,a,r,f,l));for(s=0;s<t.length;s++){var h=t[s];if(h.type==="scatter"){var v=h.fill;if(!(v==="none"||v==="toself")&&(h.opacity=void 0,v==="tonexty"||v==="tonextx"))for(var m=s-1;m>=0;m--){var b=t[m];if(b.type==="scatter"&&b.xaxis===h.xaxis&&b.yaxis===h.yaxis){b.opacity=void 0;break}}}}}});var WF=ve((o2e,YF)=>{"use strict";var Ale=Ft(),Mle=L_();YF.exports=function(e,t){function r(a,s){return Ale.coerce(e,t,Mle,a,s)}var i=t.barmode==="group";t.scattermode==="group"&&r("scattergap",i?t.bargap:.2)}});var JF=ve((s2e,jF)=>{"use strict";var Sle=Da(),XF=Ft(),kle=XF.dateTime2ms,qx=XF.incrementMonth,Cle=Hi(),Ele=Cle.ONEAVGMONTH;jF.exports=function(t,r,i,a){if(r.type!=="date")return{vals:a};var s=t[i+"periodalignment"];if(!s)return{vals:a};var l=t[i+"period"],f;if(Sle(l)){if(l=+l,l<=0)return{vals:a}}else if(typeof l=="string"&&l.charAt(0)==="M"){var h=+l.substring(1);if(h>0&&Math.round(h)===h)f=h;else return{vals:a}}for(var v=r.calendar,m=s==="start",b=s==="end",T=t[i+"period0"],S=kle(T,v)||0,C=[],P=[],E=[],I=a.length,q=0;q<I;q++){var B=a[q],z,O,H;if(f){for(z=Math.round((B-S)/(f*Ele)),H=qx(S,f*z,v);H>B;)H=qx(H,-f,v);for(;H<=B;)H=qx(H,f,v);O=qx(H,-f,v)}else{for(z=Math.round((B-S)/l),H=S+z*l;H>B;)H-=l;for(;H<=B;)H+=l;O=H-l}C[q]=m?O:b?H:(O+H)/2,P[q]=O,E[q]=H}return{vals:C,starts:P,ends:E}}});var k6=ve((l2e,QF)=>{"use strict";var M6=Sf().hasColorscale,S6=Oy(),KF=rs();QF.exports=function(t,r){KF.hasLines(r)&&M6(r,"line")&&S6(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),KF.hasMarkers(r)&&(M6(r,"marker")&&S6(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),M6(r,"marker.line")&&S6(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}});var Rg=ve((u2e,$F)=>{"use strict";var dn=Ft();$F.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;dn.mergeArray(r.text,t,"tx"),dn.mergeArray(r.texttemplate,t,"txt"),dn.mergeArray(r.hovertext,t,"htx"),dn.mergeArray(r.customdata,t,"data"),dn.mergeArray(r.textposition,t,"tp"),r.textfont&&(dn.mergeArrayCastPositive(r.textfont.size,t,"ts"),dn.mergeArray(r.textfont.color,t,"tc"),dn.mergeArray(r.textfont.family,t,"tf"),dn.mergeArray(r.textfont.weight,t,"tw"),dn.mergeArray(r.textfont.style,t,"ty"),dn.mergeArray(r.textfont.variant,t,"tv"),dn.mergeArray(r.textfont.textcase,t,"tC"),dn.mergeArray(r.textfont.lineposition,t,"tE"),dn.mergeArray(r.textfont.shadow,t,"tS"));var a=r.marker;if(a){dn.mergeArrayCastPositive(a.size,t,"ms"),dn.mergeArrayCastPositive(a.opacity,t,"mo"),dn.mergeArray(a.symbol,t,"mx"),dn.mergeArray(a.angle,t,"ma"),dn.mergeArray(a.standoff,t,"mf"),dn.mergeArray(a.color,t,"mc");var s=a.line;a.line&&(dn.mergeArray(s.color,t,"mlc"),dn.mergeArrayCastPositive(s.width,t,"mlw"));var l=a.gradient;l&&l.type!=="none"&&(dn.mergeArray(l.type,t,"mgt"),dn.mergeArray(l.color,t,"mgc"))}}});var Nx=ve((f2e,tq)=>{"use strict";var eq=Ft();tq.exports=function(t,r){eq.isArrayOrTypedArray(r.selectedpoints)&&eq.tagSelected(t,r)}});var D6=ve((c2e,lq)=>{"use strict";var rq=Da(),E6=Ft(),Fg=Yi(),aq=JF(),C6=Hi().BADNUM,L6=rs(),Lle=k6(),Ple=Rg(),Dle=Nx();function zle(e,t){var r=e._fullLayout,i=t._xA=Fg.getFromId(e,t.xaxis||"x","x"),a=t._yA=Fg.getFromId(e,t.yaxis||"y","y"),s=i.makeCalcdata(t,"x"),l=a.makeCalcdata(t,"y"),f=aq(t,i,"x",s),h=aq(t,a,"y",l),v=f.vals,m=h.vals,b=t._length,T=new Array(b),S=t.ids,C=P6(t,r,i,a),P=!1,E,I,q,B,z,O;oq(r,t);var H="x",V="y",W;if(C)E6.pushUnique(C.traceIndices,t.index),E=C.orientation==="v",E?(V="s",W="x"):(H="s",W="y"),z=C.stackgaps==="interpolate";else{var K=nq(t,b);iq(e,t,i,a,v,m,K)}var re=!!t.xperiodalignment,oe=!!t.yperiodalignment;for(I=0;I<b;I++){var ne=T[I]={},he=rq(v[I]),de=rq(m[I]);he&&de?(ne[H]=v[I],ne[V]=m[I],re&&(ne.orig_x=s[I],ne.xEnd=f.ends[I],ne.xStart=f.starts[I]),oe&&(ne.orig_y=l[I],ne.yEnd=h.ends[I],ne.yStart=h.starts[I])):C&&(E?he:de)?(ne[W]=E?v[I]:m[I],ne.gap=!0,z?(ne.s=C6,P=!0):ne.s=0):ne[H]=ne[V]=C6,S&&(ne.id=String(S[I]))}if(Ple(T,t),Lle(e,t),Dle(T,t),C){for(I=0;I<T.length;)T[I][W]===C6?T.splice(I,1):I++;if(E6.sort(T,function(ye,Ae){return ye[W]-Ae[W]||ye.i-Ae.i}),P){for(I=0;I<T.length-1&&T[I].gap;)I++;for(O=T[I].s,O||(O=T[I].s=0),q=0;q<I;q++)T[q].s=O;for(B=T.length-1;B>I&&T[B].gap;)B--;for(O=T[B].s,q=T.length-1;q>B;q--)T[q].s=O;for(;I<B;)if(I++,T[I].gap){for(q=I+1;T[q].gap;)q++;for(var Ee=T[I-1][W],ke=T[I-1].s,Te=(T[q].s-ke)/(T[q][W]-Ee);I<q;)T[I].s=ke+(T[I][W]-Ee)*Te,I++}}}return T}function iq(e,t,r,i,a,s,l){var f=t._length,h=e._fullLayout,v=r._id,m=i._id,b=h._firstScatter[sq(t)]===t.uid,T=(P6(t,h,r,i)||{}).orientation,S=t.fill;r._minDtick=0,i._minDtick=0;var C={padded:!0},P={padded:!0};l&&(C.ppad=P.ppad=l);var E=f<2||a[0]!==a[f-1]||s[0]!==s[f-1];E&&(S==="tozerox"||S==="tonextx"&&(b||T==="h"))?C.tozero=!0:!(t.error_y||{}).visible&&(S==="tonexty"||S==="tozeroy"||!L6.hasMarkers(t)&&!L6.hasText(t))&&(C.padded=!1,C.ppad=0),E&&(S==="tozeroy"||S==="tonexty"&&(b||T==="v"))?P.tozero=!0:(S==="tonextx"||S==="tozerox")&&(P.padded=!1),v&&(t._extremes[v]=Fg.findExtremes(r,a,C)),m&&(t._extremes[m]=Fg.findExtremes(i,s,P))}function nq(e,t){if(L6.hasMarkers(e)){var r=e.marker,i=1.6*(e.marker.sizeref||1),a;if(e.marker.sizemode==="area"?a=function(v){return Math.max(Math.sqrt((v||0)/i),3)}:a=function(v){return Math.max((v||0)/i,3)},E6.isArrayOrTypedArray(r.size)){var s={type:"linear"};Fg.setConvert(s);for(var l=s.makeCalcdata(e.marker,"size"),f=new Array(t),h=0;h<t;h++)f[h]=a(l[h]);return f}else return a(r.size)}}function oq(e,t){var r=sq(t),i=e._firstScatter;i[r]||(i[r]=t.uid)}function sq(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function P6(e,t,r,i){var a=e.stackgroup;if(a){var s=t._scatterStackOpts[r._id+i._id][a],l=s.orientation==="v"?i:r;if(l.type==="linear"||l.type==="log")return s}}lq.exports={calc:zle,calcMarkerSize:nq,calcAxisExpansion:iq,setFirstScatter:oq,getStackOpts:P6}});var fq=ve((h2e,uq)=>{"use strict";uq.exports=Bx;var Ile=Ft().distinctVals;function Bx(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=t.posAxis._id.charAt(0),a=[],s=0;s<e.length;s++){for(var l=e[s],f=0;f<l.length;f++){var h=l[f],v=h.p;v===void 0&&(v=h[i]),v!==void 0&&a.push(v)}l[0]&&l[0].width1&&(r=Math.min(l[0].width1,r))}this.positions=a;var m=Ile(a);this.distinctPositions=m.vals,m.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(m.minDiff,r);var b=(t.posAxis||{}).type;(b==="category"||b==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}Bx.prototype.put=function(t,r,i){var a=this.getLabel(t,r,i),s=this.bins[a]||0;return this.bins[a]=s+i,s};Bx.prototype.get=function(t,r,i){var a=this.getLabel(t,r,i);return this.bins[a]||0};Bx.prototype.getLabel=function(t,r,i){var a=i<0&&this.sepNegVal?"v":"^",s=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+s+"g"+r}});var pq=ve((v2e,dq)=>{"use strict";var nu=Da(),Yh=Ft().isArrayOrTypedArray,Q0=Hi().BADNUM,Rle=la(),qg=Yi(),Fle=og().getAxisGroup,Ox=fq();function qle(e,t){for(var r=t.xaxis,i=t.yaxis,a=e._fullLayout,s=e._fullData,l=e.calcdata,f=[],h=[],v=0;v<s.length;v++){var m=s[v];if(m.visible===!0&&Rle.traceIs(m,"bar")&&m.xaxis===r._id&&m.yaxis===i._id&&(m.orientation==="h"?f.push(l[v]):h.push(l[v]),m._computePh))for(var b=e.calcdata[v],T=0;T<b.length;T++)typeof b[T].ph0=="function"&&(b[T].ph0=b[T].ph0()),typeof b[T].ph1=="function"&&(b[T].ph1=b[T].ph1())}var S={xCat:r.type==="category"||r.type==="multicategory",yCat:i.type==="category"||i.type==="multicategory",mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};I6(e,r,i,h,S),I6(e,i,r,f,S)}function I6(e,t,r,i,a){if(i.length){var s,l,f,h,v;switch(Ole(r,i),a.mode){case"overlay":z6(e,t,r,i,a);break;case"group":for(s=[],l=[],f=0;f<i.length;f++)h=i[f],v=h[0].trace,v.offset===void 0?l.push(h):s.push(h);l.length&&Ule(e,t,r,l,a),s.length&&z6(e,t,r,s,a);break;case"stack":case"relative":for(s=[],l=[],f=0;f<i.length;f++)h=i[f],v=h[0].trace,v.base===void 0?l.push(h):s.push(h);Ble(l),l.length&&Vle(e,t,r,l,a),s.length&&z6(e,t,r,s,a);break}Nle(i),Xle(i,t)}}function Nle(e){var t,r,i,a,s,l,f;for(t=0;t<e.length;t++)r=e[t],i=r[0].trace,a=r[0].t,a.cornerradiusvalue===void 0&&(s=i.marker?i.marker.cornerradius:void 0,s!==void 0&&(l=nu(s)?+s:+s.slice(0,-1),f=nu(s)?"px":"%",a.cornerradiusvalue=l,a.cornerradiusform=f))}function Ble(e){if(!(e.length<2)){var t,r,i,a,s,l,f;for(t=0;t<e.length&&(r=e[t],i=r[0].trace,s=i.marker?i.marker.cornerradius:void 0,s===void 0);t++);if(s!==void 0)for(l=nu(s)?+s:+s.slice(0,-1),f=nu(s)?"px":"%",t=0;t<e.length;t++)r=e[t],a=r[0].t,a.cornerradiusvalue=l,a.cornerradiusform=f}}function Ole(e,t){var r,i;for(r=0;r<t.length;r++){var a=t[r],s=a[0].trace,l=s.type==="funnel"?s._base:s.base,f,h=s.orientation==="h"?s.xcalendar:s.ycalendar,v=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(Yh(l)){for(i=0;i<Math.min(l.length,a.length);i++)f=v(l[i],0,h),nu(f)?(a[i].b=+f,a[i].hasB=1):a[i].b=0;for(;i<a.length;i++)a[i].b=0}else{f=v(l,0,h);var m=nu(f);for(f=m?f:0,i=0;i<a.length;i++)a[i].b=f,m&&(a[i].hasB=1)}}}function z6(e,t,r,i,a){for(var s=0;s<i.length;s++){var l=i[s],f=new Ox([l],{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});R6(e,t,f,a),a.norm?(vq(f),F6(r,f,a)):hq(r,f)}}function Ule(e,t,r,i,a){var s=new Ox(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!a.norm});R6(e,t,s,a),Yle(s,t),a.norm?(vq(s),F6(r,s,a)):hq(r,s)}function Vle(e,t,r,i,a){var s=new Ox(i,{posAxis:t,sepNegVal:a.mode==="relative",overlapNoMerge:!(a.norm||a.mode==="stack"||a.mode==="relative")});R6(e,t,s,a),Zle(r,s,a);for(var l=0;l<i.length;l++)for(var f=i[l],h=f[0].t.offsetindex,v=0;v<f.length;v++){var m=f[v];if(m.s!==Q0){var b=m.b+m.s===s.get(m.p,h,m.s);b&&(m._outmost=!0)}}a.norm&&F6(r,s,a)}function R6(e,t,r,i){var a=e._fullLayout,s=r.positions,l=r.distinctPositions,f=r.minDiff,h=r.traces,v=h.length,m=s.length!==l.length,b=f*(1-i.gap),T,S,C,P;if(t._id==="angularaxis")T=b,S=T*(1-(i.groupgap||0)),C=-S/2;else{var E=Fle(a,t._id)+h[0][0].trace.orientation;P=a._alignmentOpts[E]||{}}for(var I=0;I<v;I++){var q=h[I],B=q[0].trace;if(t._id!=="angularaxis"){var z=P[B.alignmentgroup]||{},O=Object.keys(z.offsetGroups||{}).length;O?T=b/O:T=m?b/v:b,S=T*(1-(i.groupgap||0)),O?C=((2*B._offsetIndex+1-O)*T-S)/2:C=m?((2*I+1-v)*T-S)/2:-S/2}var H=q[0].t;H.barwidth=S,H.offsetindex=B._offsetIndex||0,H.poffset=C,H.bargroupwidth=b,H.bardelta=f}r.binWidth=h[0][0].t.barwidth/100,Hle(r),Gle(t,r),t._id==="angularaxis"?cq(t,r):cq(t,r,m)}function Hle(e){var t=e.traces,r,i;for(r=0;r<t.length;r++){var a=t[r],s=a[0],l=s.trace,f=s.t,h=l._offset||l.offset,v=f.poffset,m;if(Yh(h)){for(m=Array.prototype.slice.call(h,0,a.length),i=0;i<m.length;i++)nu(m[i])||(m[i]=v);for(i=m.length;i<a.length;i++)m.push(v);f.poffset=m}else h!==void 0&&(f.poffset=h);var b=l._width||l.width,T=f.barwidth;if(Yh(b)){var S=Array.prototype.slice.call(b,0,a.length);for(i=0;i<S.length;i++)nu(S[i])||(S[i]=T);for(i=S.length;i<a.length;i++)S.push(T);if(f.barwidth=S,h===void 0){for(m=[],i=0;i<a.length;i++)m.push(v+(T-S[i])/2);f.poffset=m}}else b!==void 0&&(f.barwidth=b,h===void 0&&(f.poffset=v+(T-b)/2))}}function Gle(e,t){for(var r=t.traces,i=$0(e),a=0;a<r.length;a++)for(var s=r[a],l=s[0].t,f=l.poffset,h=Yh(f),v=l.barwidth,m=Yh(v),b=0;b<s.length;b++){var T=s[b],S=T.w=m?v[b]:v;T.p===void 0&&(T.p=T[i],T["orig_"+i]=T[i]);var C=(h?f[b]:f)+S/2;T[i]=T.p+C}}function cq(e,t,r){var i=t.traces,a=t.minDiff,s=a/2;qg.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var l=0;l<i.length;l++){var f=i[l],h=f[0],v=h.trace,m=[],b,T,S,C;for(C=0;C<f.length;C++)b=f[C],T=b.p-s,S=b.p+s,m.push(T,S);if(v.width||v.offset){var P=h.t,E=P.poffset,I=P.barwidth,q=Yh(E),B=Yh(I);for(C=0;C<f.length;C++){b=f[C];var z=q?E[C]:E,O=B?I[C]:I;T=b.p+z,S=T+O,m.push(T,S)}}v._extremes[e._id]=qg.findExtremes(e,m,{padded:!1})}}function hq(e,t){for(var r=t.traces,i=$0(e),a=0;a<r.length;a++){for(var s=r[a],l=s[0].trace,f=l.type==="scatter",h=l.orientation==="v",v=[],m=!1,b=0;b<s.length;b++){var T=s[b],S=f?0:T.b,C=f?h?T.y:T.x:S+T.s;T[i]=C,v.push(C),T.hasB&&v.push(S),(!T.hasB||!T.b)&&(m=!0)}l._extremes[e._id]=qg.findExtremes(e,v,{tozero:m,padded:!0})}}function Zle(e,t,r){var i=$0(e),a=t.traces,s,l,f,h,v,m,b;for(h=0;h<a.length;h++)if(s=a[h],l=s[0].trace,l.type==="funnel")for(b=s[0].t.offsetindex,v=0;v<s.length;v++)m=s[v],m.s!==Q0&&t.put(m.p,b,-.5*m.s);for(h=0;h<a.length;h++){s=a[h],l=s[0].trace,f=l.type==="funnel",b=l.type==="barpolar"?0:s[0].t.offsetindex;var T=[];for(v=0;v<s.length;v++)if(m=s[v],m.s!==Q0){var S;f?S=m.s:S=m.s+m.b;var C=t.put(m.p,b,S),P=C+S;m.b=C,m[i]=P,r.norm||(T.push(P),m.hasB&&T.push(C))}r.norm||(l._extremes[e._id]=qg.findExtremes(e,T,{tozero:!0,padded:!0}))}}function vq(e){for(var t=e.traces,r=0;r<t.length;r++)for(var i=t[r],a=i[0].t.offsetindex,s=0;s<i.length;s++){var l=i[s];l.s!==Q0&&e.put(l.p,a,l.b+l.s)}}function Yle(e,t){for(var r=e.traces,i=0;i<r.length;i++){var a=r[i],s=a[0].trace,l=a[0].t.offsetindex;if(s.base===void 0)for(var f=new Ox([a],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),h=0;h<a.length;h++){var v=a[h];if(v.p!==Q0){var m=f.put(v.p,l,v.b+v.s);m&&(v.b=m)}}}}function F6(e,t,r){var i=t.traces,a=$0(e),s=r.norm==="fraction"?1:100,l=s/1e9,f=e.l2c(e.c2l(0)),h=r.mode==="stack"?s:f;function v(H){return nu(e.c2l(H))&&(H<f-l||H>h+l||!nu(f))}for(var m=0;m<i.length;m++){for(var b=i[m],T=b[0].t.offsetindex,S=b[0].trace,C=[],P=!1,E=!1,I=0;I<b.length;I++){var q=b[I];if(q.s!==Q0){var B=Math.abs(s/t.get(q.p,T,q.s));q.b*=B,q.s*=B;var z=q.b,O=z+q.s;q[a]=O,C.push(O),E=E||v(O),q.hasB&&(C.push(z),E=E||v(z)),(!q.hasB||!q.b)&&(P=!0)}}S._extremes[e._id]=qg.findExtremes(e,C,{tozero:P,padded:E})}}function Wle(e,t,r,i){for(var a=$0(i),s=0;s<e.length;s++)for(var l=e[s],f=0;f<l.length;f++){var h=l[f],v=h[a];h._sMin=t[v],h._sMax=r[v]}}function Xle(e,t){var r=$0(t),i={},a,s,l,f=1/0,h=-1/0;for(a=0;a<e.length;a++)for(l=e[a],s=0;s<l.length;s++){var v=l[s].p;nu(v)&&(f=Math.min(f,v),h=Math.max(h,v))}var m=1e4/(h-f),b=i.round=function(W){return String(Math.round(m*(W-f)))},T={},S={},C=e.some(function(W){var K=W[0].trace;return"marker"in K&&K.marker.cornerradius});for(a=0;a<e.length;a++){l=e[a],l[0].t.extents=i;var P=l[0].t.poffset,E=Yh(P);for(s=0;s<l.length;s++){var I=l[s],q=I[r]-I.w/2;if(nu(q)){var B=I[r]+I.w/2,z=b(I.p);i[z]?i[z]=[Math.min(q,i[z][0]),Math.max(B,i[z][1])]:i[z]=[q,B]}if(I.p0=I.p+(E?P[s]:P),I.p1=I.p0+I.w,I.s0=I.b,I.s1=I.s0+I.s,C){var O=Math.min(I.s0,I.s1)||0,H=Math.max(I.s0,I.s1)||0,V=I[r];T[V]=V in T?Math.min(T[V],O):O,S[V]=V in S?Math.max(S[V],H):H}}}C&&Wle(e,T,S,t)}function $0(e){return e._id.charAt(0)}dq.exports={crossTraceCalc:qle,setGroupPositions:I6}});var _q=ve((d2e,gq)=>{"use strict";var mq=D6(),yq=pq().setGroupPositions;function jle(e,t){for(var r=t.xaxis,i=t.yaxis,a=e._fullLayout,s=e._fullData,l=e.calcdata,f=[],h=[],v=0;v<s.length;v++){var m=s[v];m.visible===!0&&m.type==="scatter"&&m.xaxis===r._id&&m.yaxis===i._id&&(m.orientation==="h"?f.push(l[v]):m.orientation==="v"&&h.push(l[v]))}var b={mode:a.scattermode,gap:a.scattergap};yq(e,r,i,h,b),yq(e,i,r,f,b)}gq.exports=function(t,r){t._fullLayout.scattermode==="group"&&jle(t,r);var i=r.xaxis,a=r.yaxis,s=i._id+a._id,l=t._fullLayout._scatterStackOpts[s];if(l){var f=t.calcdata,h,v,m,b,T,S,C,P,E,I,q,B,z,O,H;for(var V in l){I=l[V];var W=I.traceIndices;if(W.length){for(q=I.stackgaps==="interpolate",B=I.groupnorm,I.orientation==="v"?(z="x",O="y"):(z="y",O="x"),H=new Array(W.length),h=0;h<H.length;h++)H[h]=!1;S=f[W[0]];var K=new Array(S.length);for(h=0;h<S.length;h++)K[h]=S[h][z];for(h=1;h<W.length;h++){for(T=f[W[h]],v=m=0;v<T.length;v++){for(C=T[v][z];C>K[m]&&m<K.length;m++)q6(T,v,K[m],h,H,q,z),v++;if(C!==K[m]){for(b=0;b<h;b++)q6(f[W[b]],m,C,b,H,q,z);K.splice(m,0,C)}m++}for(;m<K.length;m++)q6(T,v,K[m],h,H,q,z),v++}var re=K.length;for(v=0;v<S.length;v++){for(P=S[v][O]=S[v].s,h=1;h<W.length;h++)T=f[W[h]],T[0].trace._rawLength=T[0].trace._length,T[0].trace._length=re,P+=T[v].s,T[v][O]=P;if(B)for(E=(B==="fraction"?P:P/100)||1,h=0;h<W.length;h++){var oe=f[W[h]][v];oe[O]/=E,oe.sNorm=oe.s/E}}for(h=0;h<W.length;h++){T=f[W[h]];var ne=T[0].trace,he=mq.calcMarkerSize(ne,ne._rawLength),de=Array.isArray(he);if(he&&H[h]||de){var Ee=he;for(he=new Array(re),v=0;v<re;v++)he[v]=T[v].gap?0:de?Ee[T[v].i]:Ee}var ke=new Array(re),Te=new Array(re);for(v=0;v<re;v++)ke[v]=T[v].x,Te[v]=T[v].y;mq.calcAxisExpansion(t,ne,i,a,ke,Te,he),T[0].t.orientation=I.orientation}}}}};function q6(e,t,r,i,a,s,l){a[i]=!0;var f={i:null,gap:!0,s:0};if(f[l]=r,e.splice(t,0,f),t&&r===e[t-1][l]){var h=e[t-1];f.s=h.s,f.i=h.i,f.gap=h.gap}else s&&(f.s=Jle(e,t,r,l));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function Jle(e,t,r,i){var a=e[t-1],s=e[t+1];return s?a?a.s+(s.s-a.s)*(r-a[i])/(s[i]-a[i]):s.s:a.s}});var Sq=ve((p2e,Mq)=>{"use strict";var Kle=_i(),Tq=Hi(),Ng=Tq.BADNUM,Aq=Tq.LOG_CLIP,xq=Aq+.5,bq=Aq-.5,Ux=Ft(),Qle=Ux.segmentsIntersect,wq=Ux.constrain,N6=lx();Mq.exports=function(t,r){var i=r.trace||{},a=r.xaxis,s=r.yaxis,l=a.type==="log",f=s.type==="log",h=a._length,v=s._length,m=r.backoff,b=i.marker,T=r.connectGaps,S=r.baseTolerance,C=r.shape,P=C==="linear",E=i.fill&&i.fill!=="none",I=[],q=N6.minTolerance,B=t.length,z=new Array(B),O=0,H,V,W,K,re,oe,ne,he,de,Ee,ke,Te,ye,Ae,Me,De;function at(Ct){var Fe=t[Ct];if(!Fe)return!1;var He=r.linearized?a.l2p(Fe.x):a.c2p(Fe.x),_t=r.linearized?s.l2p(Fe.y):s.c2p(Fe.y);if(He===Ng){if(l&&(He=a.c2p(Fe.x,!0)),He===Ng)return!1;f&&_t===Ng&&(He*=Math.abs(a._m*v*(a._m>0?xq:bq)/(s._m*h*(s._m>0?xq:bq)))),He*=1e3}if(_t===Ng){if(f&&(_t=s.c2p(Fe.y,!0)),_t===Ng)return!1;_t*=1e3}return[He,_t]}function pt(Ct,Fe,He,_t){var ct=He-Ct,yr=_t-Fe,Er=.5-Ct,Tr=.5-Fe,Hr=ct*ct+yr*yr,_a=ct*Er+yr*Tr;if(_a>0&&_a<Hr){var ka=Er*yr-Tr*ct;if(ka*ka<Hr)return!0}}var lt,ut;function Ye(Ct,Fe){var He=Ct[0]/h,_t=Ct[1]/v,ct=Math.max(0,-He,He-1,-_t,_t-1);return ct&&lt!==void 0&&pt(He,_t,lt,ut)&&(ct=0),ct&&Fe&&pt(He,_t,Fe[0]/h,Fe[1]/v)&&(ct=0),(1+N6.toleranceGrowth*ct)*S}function xt(Ct,Fe){var He=Ct[0]-Fe[0],_t=Ct[1]-Fe[1];return Math.sqrt(He*He+_t*_t)}var rt=N6.maxScreensAway,Tt=-h*rt,St=h*(1+rt),mt=-v*rt,ge=v*(1+rt),Re=[[Tt,mt,St,mt],[St,mt,St,ge],[St,ge,Tt,ge],[Tt,ge,Tt,mt]],xe,et,ht,tt,Rt,qt;function Jt(Ct,Fe){for(var He=[],_t=0,ct=0;ct<4;ct++){var yr=Re[ct],Er=Qle(Ct[0],Ct[1],Fe[0],Fe[1],yr[0],yr[1],yr[2],yr[3]);Er&&(!_t||Math.abs(Er.x-He[0][0])>1||Math.abs(Er.y-He[0][1])>1)&&(Er=[Er.x,Er.y],_t&&xt(Er,Ct)<xt(He[0],Ct)?He.unshift(Er):He.push(Er),_t++)}return He}function Ht(Ct){if(Ct[0]<Tt||Ct[0]>St||Ct[1]<mt||Ct[1]>ge)return[wq(Ct[0],Tt,St),wq(Ct[1],mt,ge)]}function ar(Ct,Fe){if(Ct[0]===Fe[0]&&(Ct[0]===Tt||Ct[0]===St)||Ct[1]===Fe[1]&&(Ct[1]===mt||Ct[1]===ge))return!0}function kt(Ct,Fe){var He=[],_t=Ht(Ct),ct=Ht(Fe);return _t&&ct&&ar(_t,ct)||(_t&&He.push(_t),ct&&He.push(ct)),He}function zt(Ct,Fe,He){return function(_t,ct){var yr=Ht(_t),Er=Ht(ct),Tr=[];if(yr&&Er&&ar(yr,Er))return Tr;yr&&Tr.push(yr),Er&&Tr.push(Er);var Hr=2*Ux.constrain((_t[Ct]+ct[Ct])/2,Fe,He)-((yr||_t)[Ct]+(Er||ct)[Ct]);if(Hr){var _a;yr&&Er?_a=Hr>0==yr[Ct]>Er[Ct]?yr:Er:_a=yr||Er,_a[Ct]+=Hr}return Tr}}var _r;C==="linear"||C==="spline"?_r=Jt:C==="hv"||C==="vh"?_r=kt:C==="hvh"?_r=zt(0,Tt,St):C==="vhv"&&(_r=zt(1,mt,ge));function rr(Ct,Fe){var He=Fe[0]-Ct[0],_t=(Fe[1]-Ct[1])/He,ct=(Ct[1]*Fe[0]-Fe[1]*Ct[0])/He;return ct>0?[_t>0?Tt:St,ge]:[_t>0?St:Tt,mt]}function Be(Ct){var Fe=Ct[0],He=Ct[1],_t=Fe===z[O-1][0],ct=He===z[O-1][1];if(!(_t&&ct))if(O>1){var yr=Fe===z[O-2][0],Er=He===z[O-2][1];_t&&(Fe===Tt||Fe===St)&&yr?Er?O--:z[O-1]=Ct:ct&&(He===mt||He===ge)&&Er?yr?O--:z[O-1]=Ct:z[O++]=Ct}else z[O++]=Ct}function vt(Ct){z[O-1][0]!==Ct[0]&&z[O-1][1]!==Ct[1]&&Be([ht,tt]),Be(Ct),Rt=null,ht=tt=0}var gt=Ux.isArrayOrTypedArray(b);function Cr(Ct){if(Ct&&m&&(Ct.i=H,Ct.d=t,Ct.trace=i,Ct.marker=gt?b[Ct.i]:b,Ct.backoff=m),lt=Ct[0]/h,ut=Ct[1]/v,xe=Ct[0]<Tt?Tt:Ct[0]>St?St:0,et=Ct[1]<mt?mt:Ct[1]>ge?ge:0,xe||et){if(!O)z[O++]=[xe||Ct[0],et||Ct[1]];else if(Rt){var Fe=_r(Rt,Ct);Fe.length>1&&(vt(Fe[0]),z[O++]=Fe[1])}else qt=_r(z[O-1],Ct)[0],z[O++]=qt;var He=z[O-1];xe&&et&&(He[0]!==xe||He[1]!==et)?(Rt&&(ht!==xe&&tt!==et?Be(ht&&tt?rr(Rt,Ct):[ht||xe,tt||et]):ht&&tt&&Be([ht,tt])),Be([xe,et])):ht-xe&&tt-et&&Be([xe||ht,et||tt]),Rt=Ct,ht=xe,tt=et}else Rt&&vt(_r(Rt,Ct)[0]),z[O++]=Ct}for(H=0;H<B;H++)if(V=at(H),!!V){for(O=0,Rt=null,Cr(V),H++;H<B;H++){if(K=at(H),!K){if(T)continue;break}if(!P||!r.simplify){Cr(K);continue}var pr=at(H+1);if(Ee=xt(K,V),!(!(E&&(O===0||O===B-1))&&Ee<Ye(K,pr)*q)){for(he=[(K[0]-V[0])/Ee,(K[1]-V[1])/Ee],re=V,ke=Ee,Te=Ae=Me=0,ne=!1,W=K,H++;H<t.length;H++){if(oe=pr,pr=at(H+1),!oe){if(T)continue;break}if(de=[oe[0]-V[0],oe[1]-V[1]],De=de[0]*he[1]-de[1]*he[0],Ae=Math.min(Ae,De),Me=Math.max(Me,De),Me-Ae>Ye(oe,pr))break;W=oe,ye=de[0]*he[0]+de[1]*he[1],ye>ke?(ke=ye,K=oe,ne=!1):ye<Te&&(Te=ye,re=oe,ne=!0)}if(ne?(Cr(K),W!==re&&Cr(re)):(re!==V&&Cr(re),W!==K&&Cr(K)),Cr(W),H>=t.length||!oe)break;Cr(oe),V=oe}}Rt&&Be([ht||Rt[0],tt||Rt[1]]),I.push(z.slice(0,O))}var bt=C.slice(C.length-1);if(m&&bt!=="h"&&bt!=="v"){for(var wt=!1,Ut=-1,Kt=[],Gt=0;Gt<I.length;Gt++)for(var Nt=0;Nt<I[Gt].length-1;Nt++){var $t=I[Gt][Nt],Ar=I[Gt][Nt+1],xr=Kle.applyBackoff(Ar,$t);(xr[0]!==Ar[0]||xr[1]!==Ar[1])&&(wt=!0),Kt[Ut+1]||(Ut++,Kt[Ut]=[$t,[xr[0],xr[1]]])}return wt?Kt:I}return I}});var Eq=ve((m2e,Cq)=>{"use strict";var kq={tonextx:1,tonexty:1,tonext:1};Cq.exports=function(t,r,i){var a,s,l,f,h,v={},m=!1,b=-1,T=0,S=-1;for(s=0;s<i.length;s++)a=i[s][0].trace,l=a.stackgroup||"",l?l in v?h=v[l]:(h=v[l]=T,T++):a.fill in kq&&S>=0?h=S:(h=S=T,T++),h<b&&(m=!0),a._groupIndex=b=h;var C=i.slice();m&&C.sort(function(E,I){var q=E[0].trace,B=I[0].trace;return q._groupIndex-B._groupIndex||q.index-B.index});var P={};for(s=0;s<C.length;s++)a=C[s][0].trace,l=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in kq&&(f=P[l],a._prevtrace=f||null,f&&(f._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),P[l]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return C}});var zq=ve((y2e,Dq)=>{"use strict";var Uu=ja(),$le=la(),Bg=Ft(),em=Bg.ensureSingle,Pq=Bg.identity,pn=_i(),tm=rs(),eue=Sq(),tue=Eq(),Vx=rx().tester;Dq.exports=function(t,r,i,a,s,l){var f,h,v=!s,m=!!s&&s.duration>0,b=tue(t,r,i);if(f=a.selectAll("g.trace").data(b,function(S){return S[0].trace.uid}),f.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),f.order(),rue(t,f,r),m){l&&(h=l());var T=Uu.transition().duration(s.duration).ease(s.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()});T.each(function(){a.selectAll("g.trace").each(function(S,C){Lq(t,C,r,S,b,this,s)})})}else f.each(function(S,C){Lq(t,C,r,S,b,this,s)});v&&f.exit().remove(),a.selectAll("path:not([d])").remove()};function rue(e,t,r){t.each(function(i){var a=em(Uu.select(this),"g","fills");pn.setClipUrl(a,r.layerClipId,e);var s=i[0].trace,l=[];s._ownfill&&l.push("_ownFill"),s._nexttrace&&l.push("_nextFill");var f=a.selectAll("g").data(l,Pq);f.enter().append("g"),f.exit().each(function(h){s[h]=null}).remove(),f.order().each(function(h){s[h]=em(Uu.select(this),"path","js-fill")})})}function Lq(e,t,r,i,a,s,l){var f=e._context.staticPlot,h;aue(e,t,r,i,a);var v=!!l&&l.duration>0;function m(zt){return v?zt.transition():zt}var b=r.xaxis,T=r.yaxis,S=i[0].trace,C=S.line,P=Uu.select(s),E=em(P,"g","errorbars"),I=em(P,"g","lines"),q=em(P,"g","points"),B=em(P,"g","text");if($le.getComponentMethod("errorbars","plot")(e,E,r,l),S.visible!==!0)return;m(P).style("opacity",S.opacity);var z,O,H=S.fill.charAt(S.fill.length-1);H!=="x"&&H!=="y"&&(H="");var V,W;H==="y"?(V=1,W=T.c2p(0,!0)):H==="x"&&(V=0,W=b.c2p(0,!0)),i[0][r.isRangePlot?"nodeRangePlot3":"node3"]=P;var K="",re=[],oe=S._prevtrace,ne=null,he=null;oe&&(K=oe._prevRevpath||"",O=oe._nextFill,re=oe._ownPolygons,ne=oe._fillsegments,he=oe._fillElement);var de,Ee,ke="",Te="",ye,Ae,Me,De,at,pt,lt=[];S._polygons=[];var ut=[],Ye=[],xt=Bg.noop;if(z=S._ownFill,tm.hasLines(S)||S.fill!=="none"){O&&O.datum(i),["hv","vh","hvh","vhv"].indexOf(C.shape)!==-1?(ye=pn.steps(C.shape),Ae=pn.steps(C.shape.split("").reverse().join(""))):C.shape==="spline"?ye=Ae=function(zt){var _r=zt[zt.length-1];return zt.length>1&&zt[0][0]===_r[0]&&zt[0][1]===_r[1]?pn.smoothclosed(zt.slice(1),C.smoothing):pn.smoothopen(zt,C.smoothing)}:ye=Ae=function(zt){return"M"+zt.join("L")},Me=function(zt){return Ae(zt.reverse())},Ye=eue(i,{xaxis:b,yaxis:T,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(C.width||1,3)/4,shape:C.shape,backoff:C.backoff,simplify:C.simplify,fill:S.fill}),ut=new Array(Ye.length);var rt=0;for(h=0;h<Ye.length;h++){var Tt,St=Ye[h];!Tt||!H?(Tt=St.slice(),ut[rt]=Tt,rt++):Tt.push.apply(Tt,St)}S._fillElement=null,S._fillExclusionElement=he,S._fillsegments=ut.slice(0,rt),ut=S._fillsegments,Ye.length&&(De=Ye[0][0].slice(),at=Ye[Ye.length-1],pt=at[at.length-1].slice()),xt=function(zt){return function(_r){if(de=ye(_r),Ee=Me(_r),ke?H?(ke+="L"+de.substr(1),Te=Ee+("L"+Te.substr(1))):(ke+="Z"+de,Te=Ee+"Z"+Te):(ke=de,Te=Ee),tm.hasLines(S)){var rr=Uu.select(this);if(rr.datum(i),zt)m(rr.style("opacity",0).attr("d",de).call(pn.lineGroupStyle)).style("opacity",1);else{var Be=m(rr);Be.attr("d",de),pn.singleLineStyle(i,Be)}}}}}var mt=I.selectAll(".js-line").data(Ye);m(mt.exit()).style("opacity",0).remove(),mt.each(xt(!1)),mt.enter().append("path").classed("js-line",!0).style("vector-effect",f?"none":"non-scaling-stroke").call(pn.lineGroupStyle).each(xt(!0)),pn.setClipUrl(mt,r.layerClipId,e);function ge(zt){m(zt).attr("d","M0,0Z")}var Re=function(){var zt=new Array(ut.length);for(h=0;h<ut.length;h++)zt[h]=Vx(ut[h]);return zt},xe=function(zt){var _r,rr;if(!zt||zt.length===0)for(_r=new Array(ut.length),rr=0;rr<ut.length;rr++){var Be=ut[rr][0].slice(),vt=ut[rr][ut[rr].length-1].slice();Be[V]=vt[V]=W;var gt=[vt,Be],Cr=gt.concat(ut[rr]);_r[rr]=Vx(Cr)}else{for(_r=new Array(zt.length-1+ut.length),rr=0;rr<zt.length-1;rr++)_r[rr]=Vx(zt[rr]);var pr=zt[zt.length-1].slice();for(pr.reverse(),rr=0;rr<ut.length;rr++)_r[zt.length-1+rr]=Vx(ut[rr].concat(pr))}return _r};Ye.length?(z?(z.datum(i),De&&pt&&(H?(De[V]=pt[V]=W,m(z).attr("d","M"+pt+"L"+De+"L"+ke.substr(1)).call(pn.singleFillStyle,e),lt=xe(null)):(m(z).attr("d",ke+"Z").call(pn.singleFillStyle,e),lt=Re())),S._polygons=lt,S._fillElement=z):O&&(S.fill.substr(0,6)==="tonext"&&ke&&K?(S.fill==="tonext"?(m(O).attr("d",ke+"Z"+K+"Z").call(pn.singleFillStyle,e),lt=Re(),S._polygons=lt.concat(re)):(m(O).attr("d",ke+"L"+K.substr(1)+"Z").call(pn.singleFillStyle,e),lt=xe(ne),S._polygons=lt),S._fillElement=O):ge(O)),S._prevRevpath=Te):(z?ge(z):O&&ge(O),S._prevRevpath=null),S._ownPolygons=lt;function et(zt){return zt.filter(function(_r){return!_r.gap&&_r.vis})}function ht(zt){return zt.filter(function(_r){return _r.vis})}function tt(zt){return zt.filter(function(_r){return!_r.gap})}function Rt(zt){return zt.id}function qt(zt){if(zt.ids)return Rt}function Jt(){return!1}function Ht(zt,_r,rr){var Be,vt,gt,Cr=rr[0].trace,pr=tm.hasMarkers(Cr),bt=tm.hasText(Cr),wt=qt(Cr),Ut=Jt,Kt=Jt;if(pr||bt){var Gt=Pq,Nt=Cr.stackgroup,$t=Nt&&e._fullLayout._scatterStackOpts[b._id+T._id][Nt].stackgaps==="infer zero";Cr.marker.maxdisplayed||Cr._needsCull?Gt=$t?ht:et:Nt&&!$t&&(Gt=tt),pr&&(Ut=Gt),bt&&(Kt=Gt)}vt=zt.selectAll("path.point"),Be=vt.data(Ut,wt);var Ar=Be.enter().append("path").classed("point",!0);v&&Ar.call(pn.pointStyle,Cr,e).call(pn.translatePoints,b,T).style("opacity",0).transition().style("opacity",1),Be.order();var xr;pr&&(xr=pn.makePointStyleFns(Cr)),Be.each(function(Ct){var Fe=Uu.select(this),He=m(Fe);gt=pn.translatePoint(Ct,He,b,T),gt?(pn.singlePointStyle(Ct,He,Cr,xr,e),r.layerClipId&&pn.hideOutsideRangePoint(Ct,He,b,T,Cr.xcalendar,Cr.ycalendar),Cr.customdata&&Fe.classed("plotly-customdata",Ct.data!==null&&Ct.data!==void 0)):He.remove()}),v?Be.exit().transition().style("opacity",0).remove():Be.exit().remove(),vt=_r.selectAll("g"),Be=vt.data(Kt,wt),Be.enter().append("g").classed("textpoint",!0).append("text"),Be.order(),Be.each(function(Ct){var Fe=Uu.select(this),He=m(Fe.select("text"));gt=pn.translatePoint(Ct,He,b,T),gt?r.layerClipId&&pn.hideOutsideRangePoint(Ct,Fe,b,T,Cr.xcalendar,Cr.ycalendar):Fe.remove()}),Be.selectAll("text").call(pn.textPointStyle,Cr,e).each(function(Ct){var Fe=b.c2p(Ct.x),He=T.c2p(Ct.y);Uu.select(this).selectAll("tspan.line").each(function(){m(Uu.select(this)).attr({x:Fe,y:He})})}),Be.exit().remove()}q.datum(i),B.datum(i),Ht(q,B,i);var ar=S.cliponaxis===!1,kt=ar?null:r.layerClipId;pn.setClipUrl(q,kt,e),pn.setClipUrl(B,kt,e)}function aue(e,t,r,i,a){var s=r.xaxis,l=r.yaxis,f=Uu.extent(Bg.simpleMap(s.range,s.r2c)),h=Uu.extent(Bg.simpleMap(l.range,l.r2c)),v=i[0].trace;if(tm.hasMarkers(v)){var m=v.marker.maxdisplayed;if(m!==0){var b=i.filter(function(P){return P.x>=f[0]&&P.x<=f[1]&&P.y>=h[0]&&P.y<=h[1]}),T=Math.ceil(b.length/m),S=0;a.forEach(function(P,E){var I=P[0].trace;tm.hasMarkers(I)&&I.marker.maxdisplayed>0&&E<t&&S++});var C=Math.round(S*T/3+Math.floor(S/3)*T/7.1);i.forEach(function(P){delete P.vis}),b.forEach(function(P,E){Math.round((E+C)%T)===0&&(P.vis=!0)})}}}});var B6=ve((g2e,Iq)=>{"use strict";Iq.exports={container:"marker",min:"cmin",max:"cmax"}});var Fq=ve((_2e,Rq)=>{"use strict";var Hx=Yi();Rq.exports=function(t,r,i){var a={},s={_fullLayout:i},l=Hx.getFromTrace(s,r,"x"),f=Hx.getFromTrace(s,r,"y"),h=t.orig_x;h===void 0&&(h=t.x);var v=t.orig_y;return v===void 0&&(v=t.y),a.xLabel=Hx.tickText(l,l.c2l(h),!0).text,a.yLabel=Hx.tickText(f,f.c2l(v),!0).text,a}});var H6=ve((x2e,qq)=>{"use strict";var O6=ja(),rm=_i(),iue=la();function nue(e){var t=O6.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var i=O6.select(this),a=r.trace||r[0].trace;U6(i,a,e)}),t.selectAll("g.text").each(function(r){var i=O6.select(this),a=r.trace||r[0].trace;V6(i,a,e)}),t.selectAll("g.trace path.js-line").call(rm.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(rm.fillGroupStyle,e,!1),iue.getComponentMethod("errorbars","style")(t)}function U6(e,t,r){rm.pointStyle(e.selectAll("path.point"),t,r)}function V6(e,t,r){rm.textPointStyle(e.selectAll("text"),t,r)}function oue(e,t,r){var i=t[0].trace;i.selectedpoints?(rm.selectedPointStyle(r.selectAll("path.point"),i),rm.selectedTextStyle(r.selectAll("text"),i)):(U6(r,i,e),V6(r,i,e))}qq.exports={style:nue,stylePoints:U6,styleText:V6,styleOnSelect:oue}});var G6=ve((b2e,Nq)=>{"use strict";var am=Ua(),sue=rs();Nq.exports=function(t,r){var i,a;if(t.mode==="lines")return i=t.line.color,i&&am.opacity(i)?i:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var s=r.mcc||(t.marker||{}).color,l=r.mlcc||((t.marker||{}).line||{}).color;return a=s&&am.opacity(s)?s:l&&am.opacity(l)&&(r.mlw||((t.marker||{}).line||{}).width)?l:"",a?am.opacity(a)<.3?am.addOpacity(a,.3):a:(i=(t.line||{}).color,i&&am.opacity(i)&&sue.hasLines(t)&&t.line.width?i:t.fillcolor)}});var Uq=ve((w2e,Oq)=>{"use strict";var Gx=Ft(),Bq=If(),lue=la(),uue=G6(),Z6=Ua(),fue=Gx.fillText;Oq.exports=function(t,r,i,a){var s=t.cd,l=s[0].trace,f=t.xa,h=t.ya,v=f.c2p(r),m=h.c2p(i),b=[v,m],T=l.hoveron||"",S=l.mode.indexOf("markers")!==-1?3:.5,C=!!l.xperiodalignment,P=!!l.yperiodalignment;if(T.indexOf("points")!==-1){var E=function(Te){if(C){var ye=f.c2p(Te.xStart),Ae=f.c2p(Te.xEnd);return v>=Math.min(ye,Ae)&&v<=Math.max(ye,Ae)?0:1/0}var Me=Math.max(3,Te.mrc||0),De=1-1/Me,at=Math.abs(f.c2p(Te.x)-v);return at<Me?De*at/Me:at-Me+De},I=function(Te){if(P){var ye=h.c2p(Te.yStart),Ae=h.c2p(Te.yEnd);return m>=Math.min(ye,Ae)&&m<=Math.max(ye,Ae)?0:1/0}var Me=Math.max(3,Te.mrc||0),De=1-1/Me,at=Math.abs(h.c2p(Te.y)-m);return at<Me?De*at/Me:at-Me+De},q=function(Te){var ye=Math.max(S,Te.mrc||0),Ae=f.c2p(Te.x)-v,Me=h.c2p(Te.y)-m;return Math.max(Math.sqrt(Ae*Ae+Me*Me)-ye,1-S/ye)},B=Bq.getDistanceFunction(a,E,I,q);if(Bq.getClosest(s,B,t),t.index!==!1){var z=s[t.index],O=f.c2p(z.x,!0),H=h.c2p(z.y,!0),V=z.mrc||1;t.index=z.i;var W=s[0].t.orientation,K=W&&(z.sNorm||z.s),re=W==="h"?K:z.orig_x!==void 0?z.orig_x:z.x,oe=W==="v"?K:z.orig_y!==void 0?z.orig_y:z.y;return Gx.extendFlat(t,{color:uue(l,z),x0:O-V,x1:O+V,xLabelVal:re,y0:H-V,y1:H+V,yLabelVal:oe,spikeDistance:q(z),hovertemplate:l.hovertemplate}),fue(z,l,t),lue.getComponentMethod("errorbars","hoverInfo")(z,l,t),[t]}}function ne(Te){if(!Te)return!1;var ye=Te.node();try{var Ae=new DOMPoint(b[0],b[1]);return ye.isPointInFill(Ae)}catch(De){var Me=ye.ownerSVGElement.createSVGPoint();return Me.x=b[0],Me.y=b[1],ye.isPointInFill(Me)}}function he(Te){var ye,Ae=[],Me=1/0,De=-1/0,at=1/0,pt=-1/0,lt;for(ye=0;ye<Te.length;ye++){var ut=Te[ye];ut.contains(b)&&(Ae.push(ut),at=Math.min(at,ut.ymin),pt=Math.max(pt,ut.ymax))}if(Ae.length===0)return null;at=Math.max(at,0),pt=Math.min(pt,h._length),lt=(at+pt)/2;var Ye,xt,rt,Tt,St,mt,ge;for(ye=0;ye<Ae.length;ye++)for(xt=Ae[ye].pts,Ye=1;Ye<xt.length;Ye++)mt=xt[Ye-1][1],ge=xt[Ye][1],mt>lt!=ge>=lt&&(Tt=xt[Ye-1][0],St=xt[Ye][0],ge-mt&&(rt=Tt+(St-Tt)*(lt-mt)/(ge-mt),Me=Math.min(Me,rt),De=Math.max(De,rt)));return Me=Math.max(Me,0),De=Math.min(De,f._length),{x0:Me,x1:De,y0:lt,y1:lt}}if(T.indexOf("fills")!==-1&&l._fillElement){var de=ne(l._fillElement)&&!ne(l._fillExclusionElement);if(de){var Ee=he(l._polygons);Ee===null&&(Ee={x0:b[0],x1:b[0],y0:b[1],y1:b[1]});var ke=Z6.defaultLine;return Z6.opacity(l.fillcolor)?ke=l.fillcolor:Z6.opacity((l.line||{}).color)&&(ke=l.line.color),Gx.extendFlat(t,{distance:t.maxHoverDistance,x0:Ee.x0,x1:Ee.x1,y0:Ee.y0,y1:Ee.y1,color:ke,hovertemplate:!1}),delete t.index,l.text&&!Gx.isArrayOrTypedArray(l.text)?t.text=String(l.text):t.text=l.name,[t]}}}});var Gq=ve((T2e,Hq)=>{"use strict";var Vq=rs();Hq.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],f=i[0].trace,h,v,m,b,T=!Vq.hasMarkers(f)&&!Vq.hasText(f);if(T)return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)v=i[h],m=a.c2p(v.x),b=s.c2p(v.y),v.i!==null&&r.contains([m,b],!1,h,t)?(l.push({pointNumber:v.i,x:a.c2d(v.x),y:s.c2d(v.y)}),v.selected=1):v.selected=0;return l}});var Yq=ve((A2e,Zq)=>{"use strict";Zq.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}});var Jq=ve((M2e,jq)=>{"use strict";var Og=la().traceIs,Y6=y5();jq.exports=function(t,r,i,a){i("autotypenumbers",a.autotypenumbersDflt);var s=i("type",(a.splomStash||{}).type);s==="-"&&(cue(r,a.data),r.type==="-"?r.type="linear":t.type=r.type)};function cue(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),a;r.indexOf("scene")!==-1&&(r=i);var s=hue(t,r,i);if(s){if(s.type==="histogram"&&i==={v:"y",h:"x"}[s.orientation||"v"]){e.type="linear";return}var l=i+"calendar",f=s[l],h={noMultiCategory:!Og(s,"cartesian")||Og(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&i==={h:"x",v:"y"}[s.orientation||"v"]&&(h.noMultiCategory=!0),h.autotypenumbers=e.autotypenumbers,Xq(s,i)){var v=Wq(s),m=[];for(a=0;a<t.length;a++){var b=t[a];!Og(b,"box-violin")||(b[i+"axis"]||i)!==r||(b[v]!==void 0?m.push(b[v][0]):b.name!==void 0?m.push(b.name):m.push("text"),b[l]!==f&&(f=void 0))}e.type=Y6(m,f,h)}else if(s.type==="splom"){var T=s.dimensions,S=T[s._axesDim[r]];S.visible&&(e.type=Y6(S.values,f,h))}else e.type=Y6(s[i]||[s[i+"0"]],f,h)}}}function hue(e,t,r){for(var i=0;i<e.length;i++){var a=e[i];if(a.type==="splom"&&a._length>0&&(a["_"+r+"axes"]||{})[t])return a;if((a[r+"axis"]||r)===t){if(Xq(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}function Wq(e){return{v:"x",h:"y"}[e.orientation||"v"]}function Xq(e,t){var r=Wq(e),i=Og(e,"box-violin"),a=Og(e._fullInput||{},"candlestick");return i&&!a&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}});var Qq=ve((S2e,Kq)=>{"use strict";var vue=al().isTypedArraySpec;function due(e,t){var r=t.dataAttr||e._id.charAt(0),i={},a,s,l;if(t.axData)a=t.axData;else for(a=[],s=0;s<t.data.length;s++){var f=t.data[s];f[r+"axis"]===e._id&&a.push(f)}for(s=0;s<a.length;s++){var h=a[s][r];for(l=0;l<h.length;l++){var v=h[l];v!=null&&(i[v]=1)}}return Object.keys(i)}Kq.exports=function(t,r,i,a){if(r.type==="category"){var s=t.categoryarray,l=Array.isArray(s)&&s.length>0||vue(s),f;l&&(f="array");var h=i("categoryorder",f),v;h==="array"&&(v=i("categoryarray")),!l&&h==="array"&&(h=r.categoryorder="trace"),h==="trace"?r._initialCategories=[]:h==="array"?r._initialCategories=v.slice():(v=due(r,a).sort(),h==="category ascending"?r._initialCategories=v:h==="category descending"&&(r._initialCategories=v.reverse()))}}});var tN=ve((k2e,eN)=>{"use strict";var $q=wf().mix,pue=Tf(),mue=Ft();eN.exports=function(t,r,i,a){a=a||{};var s=a.dfltColor;function l(V,W){return mue.coerce2(t,r,a.attributes,V,W)}var f=l("linecolor",s),h=l("linewidth"),v=i("showline",a.showLine||!!f||!!h);v||(delete r.linecolor,delete r.linewidth);var m=$q(s,a.bgColor,a.blend||pue.lightFraction).toRgbString(),b=l("gridcolor",m),T=l("gridwidth"),S=l("griddash"),C=i("showgrid",a.showGrid||!!b||!!T||!!S);if(C||(delete r.gridcolor,delete r.gridwidth,delete r.griddash),a.hasMinor){var P=$q(r.gridcolor,a.bgColor,67).toRgbString(),E=l("minor.gridcolor",P),I=l("minor.gridwidth",r.gridwidth||1),q=l("minor.griddash",r.griddash||"solid"),B=i("minor.showgrid",!!E||!!I||!!q);B||(delete r.minor.gridcolor,delete r.minor.gridwidth,delete r.minor.griddash)}if(!a.noZeroLine){var z=l("zerolinecolor",s),O=l("zerolinewidth"),H=i("zeroline",a.showGrid||!!z||!!O);H||(delete r.zerolinecolor,delete r.zerolinewidth)}}});var X6=ve((C2e,sN)=>{"use strict";var rN=Da(),yue=la(),Ug=Ft(),gue=Di(),_ue=Yl(),W6=Iu(),aN=Ow(),iN=Vw(),xue=Zw(),bue=Yw(),wue=Qq(),Tue=tN(),Aue=q5(),nN=t2(),Zx=Ao().WEEKDAY_PATTERN,Mue=Ao().HOUR_PATTERN;sN.exports=function(t,r,i,a,s){var l=a.letter,f=a.font||{},h=a.splomStash||{},v=i("visible",!a.visibleDflt),m=r._template||{},b=r.type||m.type||"-",T;if(b==="date"){var S=yue.getComponentMethod("calendars","handleDefaults");S(t,r,"calendar",a.calendar),a.noTicklabelmode||(T=i("ticklabelmode"))}!a.noTicklabelindex&&(b==="date"||b==="linear")&&i("ticklabelindex");var C="";(!a.noTicklabelposition||b==="multicategory")&&(C=Ug.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:T==="period"?["outside","inside"]:l==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),a.noTicklabeloverflow||i("ticklabeloverflow",C.indexOf("inside")!==-1?"hide past domain":b==="category"||b==="multicategory"?"allow":"hide past div"),nN(r,s),Aue(t,r,i,a),wue(t,r,i,a),b!=="category"&&!a.noHover&&i("hoverformat");var P=i("color"),E=P!==W6.color.dflt?P:f.color,I=h.label||s._dfltTitle[l];if(bue(t,r,i,b,a),!v)return r;i("title.text",I),Ug.coerceFont(i,"title.font",f,{overrideDflt:{size:Ug.bigFont(f.size),color:E}}),aN(t,r,i,b);var q=a.hasMinor;if(q&&(gue.newContainer(r,"minor"),aN(t,r,i,b,{isMinor:!0})),xue(t,r,i,b,a),iN(t,r,i,a),q){var B=a.isMinor;a.isMinor=!0,iN(t,r,i,a),a.isMinor=B}Tue(t,r,i,{dfltColor:P,bgColor:a.bgColor,showGrid:a.showGrid,hasMinor:q,attributes:W6}),q&&!r.minor.ticks&&!r.minor.showgrid&&delete r.minor,(r.showline||r.ticks)&&i("mirror");var z=b==="multicategory";if(!a.noTickson&&(b==="category"||z)&&(r.ticks||r.showgrid)){var O;z&&(O="boundaries");var H=i("tickson",O);H==="boundaries"&&delete r.ticklabelposition}if(z){var V=i("showdividers");V&&(i("dividercolor"),i("dividerwidth"))}if(b==="date")if(_ue(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:Sue}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var W=0;W<r.rangebreaks.length;W++)if(r.rangebreaks[W].pattern===Zx){r._hasDayOfWeekBreaks=!0;break}if(nN(r,s),s._has("scattergl")||s._has("splom"))for(var K=0;K<a.data.length;K++){var re=a.data[K];(re.type==="scattergl"||re.type==="splom")&&(re.visible=!1,Ug.warn(re.type+" traces do not work on axes with rangebreaks. Setting trace "+re.index+" to `visible: false`."))}}return r};function Sue(e,t,r){function i(T,S){return Ug.coerce(e,t,W6.rangebreaks,T,S)}var a=i("enabled");if(a){var s=i("bounds");if(s&&s.length>=2){var l="",f,h;if(s.length===2){for(f=0;f<2;f++)if(h=oN(s[f]),h){l=Zx;break}}var v=i("pattern",l);if(v===Zx)for(f=0;f<2;f++)h=oN(s[f]),h&&(t.bounds[f]=s[f]=h-1);if(v)for(f=0;f<2;f++)switch(h=s[f],v){case Zx:if(!rN(h)){t.enabled=!1;return}if(h=+h,h!==Math.floor(h)||h<0||h>=7){t.enabled=!1;return}t.bounds[f]=s[f]=h;break;case Mue:if(!rN(h)){t.enabled=!1;return}if(h=+h,h<0||h>24){t.enabled=!1;return}t.bounds[f]=s[f]=h;break}if(r.autorange===!1){var m=r.range;if(m[0]<m[1]){if(s[0]<m[0]&&s[1]>m[1]){t.enabled=!1;return}}else if(s[0]>m[0]&&s[1]<m[1]){t.enabled=!1;return}}}else{var b=i("values");if(b&&b.length)i("dvalue");else{t.enabled=!1;return}}}}var kue={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function oN(e){if(typeof e=="string")return kue[e.substr(0,3).toLowerCase()]}});var j6=ve((E2e,lN)=>{"use strict";var Cue=Da(),Yx=Ft();lN.exports=function(t,r,i,a){var s=a.counterAxes||[],l=a.overlayableAxes||[],f=a.letter,h=a.grid,v=a.overlayingDomain,m,b,T,S,C,P;h&&(b=h._domains[f][h._axisMap[r._id]],m=h._anchors[r._id],b&&(T=h[f+"side"].split(" ")[0],S=h.domain[f][T==="right"||T==="top"?1:0])),b=b||[0,1],m=m||(Cue(t.position)?"free":s[0]||"free"),T=T||(f==="x"?"bottom":"left"),S=S||0,C=0,P=!1;var E=Yx.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:m}},"anchor"),I=Yx.coerce(t,r,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:T}},"side");if(E==="free"){if(f==="y"){var q=i("autoshift");q&&(S=I==="left"?v[0]:v[1],P=r.automargin?r.automargin:!0,C=I==="left"?-3:3),i("shift",C)}i("position",S)}i("automargin",P);var B=!1;if(l.length&&(B=Yx.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!B){var z=i("domain",b);z[0]>z[1]-1/4096&&(r.domain=b),Yx.noneOrAll(t.domain,r.domain,b),r.tickmode==="sync"&&(r.tickmode="auto")}return i("layer"),r}});var yN=ve((L2e,mN)=>{"use strict";var Dd=Ft(),uN=Ua(),Eue=xc().isUnifiedHover,Lue=c4(),fN=Di(),Pue=h0(),cN=Iu(),Due=Jq(),hN=X6(),zue=og(),vN=j6(),K6=$n(),Of=K6.id2name,dN=K6.name2id,Iue=Ao().AX_ID_PATTERN,pN=la(),Wx=pN.traceIs,J6=pN.getComponentMethod;function Xx(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}mN.exports=function(t,r,i){var a=r.autotypenumbers,s={},l={},f={},h={},v={},m={},b={},T={},S={},C={},P,E;for(P=0;P<i.length;P++){var I=i[P];if(Wx(I,"cartesian")){var q;if(I.xaxis)q=Of(I.xaxis),Xx(s,q,I);else if(I.xaxes)for(E=0;E<I.xaxes.length;E++)Xx(s,Of(I.xaxes[E]),I);var B;if(I.yaxis)B=Of(I.yaxis),Xx(s,B,I);else if(I.yaxes)for(E=0;E<I.yaxes.length;E++)Xx(s,Of(I.yaxes[E]),I);if(I.type==="funnel"?I.orientation==="h"?(q&&(l[q]=!0),B&&(b[B]=!0)):B&&(f[B]=!0):I.type==="image"?(B&&(T[B]=!0),q&&(T[q]=!0)):(B&&(v[B]=!0,m[B]=!0),(!Wx(I,"carpet")||I.type==="carpet"&&!I._cheater)&&q&&(h[q]=!0)),I.type==="carpet"&&I._cheater&&q&&(l[q]=!0),Wx(I,"2dMap")&&(S[q]=!0,S[B]=!0),Wx(I,"oriented")){var z=I.orientation==="h"?B:q;C[z]=!0}}}var O=r._subplots,H=O.xaxis,V=O.yaxis,W=Dd.simpleMap(H,Of),K=Dd.simpleMap(V,Of),re=W.concat(K),oe=uN.background;H.length&&V.length&&(oe=Dd.coerce(t,r,Pue,"plot_bgcolor"));var ne=uN.combine(oe,r.paper_bgcolor),he,de,Ee,ke,Te;function ye(){var vt=s[he]||[];Te._traceIndices=vt.map(function(gt){return gt.index}),Te._annIndices=[],Te._shapeIndices=[],Te._selectionIndices=[],Te._imgIndices=[],Te._subplotsWith=[],Te._counterAxes=[],Te._name=Te._attr=he,Te._id=de}function Ae(vt,gt){return Dd.coerce(ke,Te,cN,vt,gt)}function Me(vt,gt){return Dd.coerce2(ke,Te,cN,vt,gt)}function De(vt){return vt==="x"?V:H}function at(vt,gt){for(var Cr=vt==="x"?W:K,pr=[],bt=0;bt<Cr.length;bt++){var wt=Cr[bt];wt!==gt&&!(t[wt]||{}).overlaying&&pr.push(dN(wt))}return pr}var pt={x:De("x"),y:De("y")},lt=pt.x.concat(pt.y),ut={},Ye=[];function xt(){var vt=ke.matches;Iue.test(vt)&&lt.indexOf(vt)===-1&&(ut[vt]=ke.type,Ye=Object.keys(ut))}var rt=Lue(t,r),Tt=Eue(rt);for(P=0;P<re.length;P++){he=re[P],de=dN(he),Ee=he.charAt(0),Dd.isPlainObject(t[he])||(t[he]={}),ke=t[he],Te=fN.newContainer(r,he,Ee+"axis"),ye();var St=Ee==="x"&&!h[he]&&l[he]||Ee==="y"&&!v[he]&&f[he],mt=Ee==="y"&&(!m[he]&&b[he]||T[he]),ge={hasMinor:!0,letter:Ee,font:r.font,outerTicks:S[he],showGrid:!C[he],data:s[he]||[],bgColor:ne,calendar:r.calendar,automargin:!0,visibleDflt:St,reverseDflt:mt,autotypenumbersDflt:a,splomStash:((r._splomAxes||{})[Ee]||{})[de],noAutotickangles:Ee==="y"};Ae("uirevision",r.uirevision),Due(ke,Te,Ae,ge),hN(ke,Te,Ae,ge,r);var Re=Tt&&Ee===rt.charAt(0),xe=Me("spikecolor",Tt?Te.color:void 0),et=Me("spikethickness",Tt?1.5:void 0),ht=Me("spikedash",Tt?"dot":void 0),tt=Me("spikemode",Tt?"across":void 0),Rt=Me("spikesnap"),qt=Ae("showspikes",!!Re||!!xe||!!et||!!ht||!!tt||!!Rt);qt||(delete Te.spikecolor,delete Te.spikethickness,delete Te.spikedash,delete Te.spikemode,delete Te.spikesnap);var Jt=Of(ke.overlaying),Ht=[0,1];if(r[Jt]!==void 0){var ar=Of(r[Jt].anchor);r[ar]!==void 0&&(Ht=r[ar].domain)}vN(ke,Te,Ae,{letter:Ee,counterAxes:pt[Ee],overlayableAxes:at(Ee,he),grid:r.grid,overlayingDomain:Ht}),Ae("title.standoff"),xt(),Te._input=ke}for(P=0;P<Ye.length;){de=Ye[P++],he=Of(de),Ee=he.charAt(0),Dd.isPlainObject(t[he])||(t[he]={}),ke=t[he],Te=fN.newContainer(r,he,Ee+"axis"),ye();var kt={letter:Ee,font:r.font,outerTicks:S[he],showGrid:!C[he],data:[],bgColor:ne,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:a,splomStash:((r._splomAxes||{})[Ee]||{})[de]};Ae("uirevision",r.uirevision),Te.type=ut[de]||"linear",hN(ke,Te,Ae,kt,r),vN(ke,Te,Ae,{letter:Ee,counterAxes:pt[Ee],overlayableAxes:at(Ee,he),grid:r.grid}),Ae("fixedrange"),xt(),Te._input=ke}var zt=J6("rangeslider","handleDefaults"),_r=J6("rangeselector","handleDefaults");for(P=0;P<W.length;P++)he=W[P],ke=t[he],Te=r[he],zt(t,r,he),Te.type==="date"&&_r(ke,Te,r,K,Te.calendar),Ae("fixedrange");for(P=0;P<K.length;P++){he=K[P],ke=t[he],Te=r[he];var rr=r[Of(Te.anchor)],Be=J6("rangeslider","isVisible")(rr);Ae("fixedrange",Be)}zue.handleDefaults(t,r,{axIds:lt.concat(Ye).sort(K6.idSort),axHasImage:T})}});var xN=ve((P2e,_N)=>{"use strict";var Rue=ja(),gN=la(),jx=Ft(),fl=_i(),Jx=Yi();_N.exports=function(t,r,i,a){var s=t._fullLayout;if(r.length===0){Jx.redrawComponents(t);return}function l(E){var I=E.xaxis,q=E.yaxis;s._defs.select("#"+E.clipId+"> rect").call(fl.setTranslate,0,0).call(fl.setScale,1,1),E.plot.call(fl.setTranslate,I._offset,q._offset).call(fl.setScale,1,1);var B=E.plot.selectAll(".scatterlayer .trace");B.selectAll(".point").call(fl.setPointGroupScale,1,1),B.selectAll(".textpoint").call(fl.setTextPointsScale,1,1),B.call(fl.hideOutsideRangePoints,E)}function f(E,I){var q=E.plotinfo,B=q.xaxis,z=q.yaxis,O=B._length,H=z._length,V=!!E.xr1,W=!!E.yr1,K=[];if(V){var re=jx.simpleMap(E.xr0,B.r2l),oe=jx.simpleMap(E.xr1,B.r2l),ne=re[1]-re[0],he=oe[1]-oe[0];K[0]=(re[0]*(1-I)+I*oe[0]-re[0])/(re[1]-re[0])*O,K[2]=O*(1-I+I*he/ne),B.range[0]=B.l2r(re[0]*(1-I)+I*oe[0]),B.range[1]=B.l2r(re[1]*(1-I)+I*oe[1])}else K[0]=0,K[2]=O;if(W){var de=jx.simpleMap(E.yr0,z.r2l),Ee=jx.simpleMap(E.yr1,z.r2l),ke=de[1]-de[0],Te=Ee[1]-Ee[0];K[1]=(de[1]*(1-I)+I*Ee[1]-de[1])/(de[0]-de[1])*H,K[3]=H*(1-I+I*Te/ke),z.range[0]=B.l2r(de[0]*(1-I)+I*Ee[0]),z.range[1]=z.l2r(de[1]*(1-I)+I*Ee[1])}else K[1]=0,K[3]=H;Jx.drawOne(t,B,{skipTitle:!0}),Jx.drawOne(t,z,{skipTitle:!0}),Jx.redrawComponents(t,[B._id,z._id]);var ye=V?O/K[2]:1,Ae=W?H/K[3]:1,Me=V?K[0]:0,De=W?K[1]:0,at=V?K[0]/K[2]*O:0,pt=W?K[1]/K[3]*H:0,lt=B._offset-at,ut=z._offset-pt;q.clipRect.call(fl.setTranslate,Me,De).call(fl.setScale,1/ye,1/Ae),q.plot.call(fl.setTranslate,lt,ut).call(fl.setScale,ye,Ae),fl.setPointGroupScale(q.zoomScalePts,1/ye,1/Ae),fl.setTextPointsScale(q.zoomScaleTxt,1/ye,1/Ae)}var h;a&&(h=a());function v(){for(var E={},I=0;I<r.length;I++){var q=r[I],B=q.plotinfo.xaxis,z=q.plotinfo.yaxis;q.xr1&&(E[B._name+".range"]=q.xr1.slice()),q.yr1&&(E[z._name+".range"]=q.yr1.slice())}return h&&h(),gN.call("relayout",t,E).then(function(){for(var O=0;O<r.length;O++)l(r[O].plotinfo)})}function m(){for(var E={},I=0;I<r.length;I++){var q=r[I],B=q.plotinfo.xaxis,z=q.plotinfo.yaxis;q.xr0&&(E[B._name+".range"]=q.xr0.slice()),q.yr0&&(E[z._name+".range"]=q.yr0.slice())}return gN.call("relayout",t,E).then(function(){for(var O=0;O<r.length;O++)l(r[O].plotinfo)})}var b,T,S,C=Rue.ease(i.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(S),S=null,m()});function P(){T=Date.now();for(var E=Math.min(1,(T-b)/i.duration),I=C(E),q=0;q<r.length;q++)f(r[q],I);T-b>i.duration?(v(),S=window.cancelAnimationFrame(P)):S=window.requestAnimationFrame(P)}return b=Date.now(),S=window.requestAnimationFrame(P),Promise.resolve()}});var Q6=ve(Oo=>{"use strict";var Qx=ja(),bN=la(),zd=Ft(),Fue=eo(),que=_i(),wN=z_().getModuleCalcData,Wh=$n(),Vu=Ao(),Nue=Dh(),oi=zd.ensureSingle;function Kx(e,t,r){return zd.ensureSingle(e,t,r,function(i){i.datum(r)})}var Id=Vu.zindexSeparator;Oo.name="cartesian";Oo.attr=["xaxis","yaxis"];Oo.idRoot=["x","y"];Oo.idRegex=Vu.idRegex;Oo.attrRegex=Vu.attrRegex;Oo.attributes=Yq();Oo.layoutAttributes=Iu();Oo.supplyLayoutDefaults=yN();Oo.transitionAxes=xN();Oo.finalizeSubplots=function(e,t){var r=t._subplots,i=r.xaxis,a=r.yaxis,s=r.cartesian,l=s,f={},h={},v,m,b;for(v=0;v<l.length;v++){var T=l[v].split("y");f[T[0]]=1,h["y"+T[1]]=1}for(v=0;v<i.length;v++)m=i[v],f[m]||(b=(e[Wh.id2name(m)]||{}).anchor,Vu.idRegex.y.test(b)||(b="y"),s.push(m+b),l.push(m+b),h[b]||(h[b]=1,zd.pushUnique(a,b)));for(v=0;v<a.length;v++)b=a[v],h[b]||(m=(e[Wh.id2name(b)]||{}).anchor,Vu.idRegex.x.test(m)||(m="x"),s.push(m+b),l.push(m+b),f[m]||(f[m]=1,zd.pushUnique(i,m)));if(!l.length){m="",b="";for(var S in e)if(Vu.attrRegex.test(S)){var C=S.charAt(0);C==="x"?(!m||+S.substr(5)<+m.substr(5))&&(m=S):(!b||+S.substr(5)<+b.substr(5))&&(b=S)}m=m?Wh.name2id(m):"x",b=b?Wh.name2id(b):"y",i.push(m),a.push(b),s.push(m+b)}};Oo.plot=function(e,t,r,i){var a=e._fullLayout,s=a._subplots.cartesian,l=e.calcdata,f;if(!Array.isArray(t))for(t=[],f=0;f<l.length;f++)t.push(f);for(var h=a._zindices,v=0;v<h.length;v++){var m=h[v];for(f=0;f<s.length;f++){var b=s[f],T=a._plots[b];if(v>0){var S=T.id;if(S.indexOf(Id)!==-1)continue;S+=Id+(v+1),T=zd.extendFlat({},T,{id:S,plot:a._cartesianlayer.selectAll(".subplot").select("."+S)})}for(var C=[],P,E=0;E<l.length;E++){var I=l[E],q=I[0].trace;m===(q.zorder||0)&&q.xaxis+q.yaxis===b&&((t.indexOf(q.index)!==-1||q.carpet)&&(P&&P[0].trace.xaxis+P[0].trace.yaxis===b&&["tonextx","tonexty","tonext"].indexOf(q.fill)!==-1&&C.indexOf(P)===-1&&C.push(P),C.push(I)),P=I)}TN(e,T,C,r,i)}}};function TN(e,t,r,i,a){for(var s=Vu.traceLayerClasses,l=e._fullLayout,f=l._zindices,h=l._modules,v,m,b,T=[],S=[],C=0;C<f.length;C++)for(var P=f[C],E=0;E<h.length;E++){v=h[E];var I=v.name,q=bN.modules[I].categories;if(q.svg){var B=v.layerName||I+"layer",z=B+(C?Number(C)+1:""),O=v.plot;m=wN(r,O,P),b=m[0],r=m[1],b.length&&T.push({i:s.indexOf(B),zindex:C,className:z,plotMethod:O,cdModule:b}),q.zoomScale&&S.push("."+z)}}T.sort(function(W,K){return(W.zindex||0)-(K.zindex||0)||W.i-K.i});var H=t.plot.selectAll("g.mlayer").data(T,function(W){return W.className});if(H.enter().append("g").attr("class",function(W){return W.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),H.exit().remove(),H.order(),H.each(function(W){var K=Qx.select(this),re=W.className;W.plotMethod(e,t,W.cdModule,K,i,a),Vu.clipOnAxisFalseQuery.indexOf("."+re)===-1&&que.setClipUrl(K,t.layerClipId,e)}),l._has("scattergl")&&(v=bN.getModule("scattergl"),b=wN(r,v)[0],v.plot(e,t,b)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(Vu.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),S.length)){var V=t.plot.selectAll(S.join(",")).selectAll(".trace");t.zoomScalePts=V.selectAll("path.point"),t.zoomScaleTxt=V.selectAll(".textpoint")}}Oo.clean=function(e,t,r,i){var a=i._plots||{},s=t._plots||{},l=i._subplots||{},f,h,v;if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(v in a)f=a[v],f.plotgroup&&f.plotgroup.remove();var m=i._has&&i._has("gl"),b=t._has&&t._has("gl");if(m&&!b)for(v in a)f=a[v],f._scene&&f._scene.destroy();if(l.xaxis&&l.yaxis){var T=Wh.listIds({_fullLayout:i});for(h=0;h<T.length;h++){var S=T[h];t[Wh.id2name(S)]||i._infolayer.selectAll(".g-"+S+"title").remove()}}var C=i._has&&i._has("cartesian"),P=t._has&&t._has("cartesian");if(C&&!P)MN(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(l.cartesian)for(h=0;h<l.cartesian.length;h++){var E=l.cartesian[h];if(E.indexOf(Id)===-1&&!s[E]){var I="."+E+",."+E+"-x,."+E+"-y";i._cartesianlayer.selectAll(I).remove(),SN(E,i)}}};Oo.drawFramework=function(e){var t=e._fullLayout,r=e.calcdata,i,a={};for(i=0;i<r.length;i++){var s=r[i][0],l=s.trace,f=l.zorder||0;a[f]||(a[f]=[]),a[f].push(s)}var h=Object.keys(a).map(Number).sort(zd.sorterAsc);h.length||(h=[0]),t._zindices=h;var v=Bue(e),m=v.length,b=[];for(i=0;i<m;i++)b[i]=v[i].slice();for(var T=1;T<h.length;T++){var S=[];for(i=0;i<m;i++)S[i]=v[i].slice(),S[i][0]+=Id+(T+1);b=b.concat(S)}var C=t._cartesianlayer.selectAll(".subplot").data(b,String);C.enter().append("g").attr("class",function(P){return"subplot "+P[0]}),C.order(),C.exit().call(MN,t),C.each(function(P){var E=P[0],I=E.indexOf(Id),q=I!==-1,B=q?E.slice(0,I):E,z=t._plots[E];z||(z=zd.extendFlat({},t._plots[B]),z&&(z.id=E,t._plots[E]=z,t._subplots.cartesian.push(E))),z&&(z.plotgroup=Qx.select(this),AN(e,z),q||(z.draglayer=oi(t._draggers,"g",E)))})};Oo.rangePlot=function(e,t,r){AN(e,t),TN(e,t,r),Fue.style(e)};function Bue(e){var t=e._fullLayout,r=t._zindices.length,i=t._subplots.cartesian,a=i.length,s,l,f,h,v,m,b=[],T=[];for(s=0;s<a;s++){f=i[s],h=t._plots[f],v=h.xaxis,m=h.yaxis;var S=v._mainAxis,C=m._mainAxis,P=S._id+C._id,E=t._plots[P];h.overlays=[],P!==f&&E?(h.mainplot=P,h.mainplotinfo=E,T.push(f)):(h.mainplot=void 0,h.mainplotinfo=void 0,b.push(f))}for(s=0;s<T.length;s++)f=T[s],h=t._plots[f],h.mainplotinfo.overlays.push(h);var I=b.concat(T),q=[];for(s=0;s<a;s++){f=I[s],h=t._plots[f],v=h.xaxis,m=h.yaxis;for(var B=[],z=1;z<=r;z++){var O="";for(z>1&&(O+=Id+z),B.push(f+O),l=0;l<h.overlays.length;l++)B.push(h.overlays[l].id+O)}B=B.concat([v.layer,m.layer,v.overlaying||"",m.overlaying||""]),q.push(B)}return q}function AN(e,t){var r=e._fullLayout,i=t.plotgroup,a=t.id,s=a.indexOf(Id),l=s!==-1,f=Vu.layerValue2layerClass[t.xaxis.layer],h=Vu.layerValue2layerClass[t.yaxis.layer],v=r._hasOnlyLargeSploms,m=r._zindices.length>1,b=t.mainplotinfo;if(!t.mainplot||m)if(v)t.xlines=oi(i,"path","xlines-above"),t.ylines=oi(i,"path","ylines-above"),t.xaxislayer=oi(i,"g","xaxislayer-above"),t.yaxislayer=oi(i,"g","yaxislayer-above");else{if(!l){var T=oi(i,"g","layer-subplot");t.shapelayer=oi(T,"g","shapelayer"),t.imagelayer=oi(T,"g","imagelayer"),b&&m?(t.minorGridlayer=b.minorGridlayer,t.gridlayer=b.gridlayer,t.zerolinelayer=b.zerolinelayer):(t.minorGridlayer=oi(i,"g","minor-gridlayer"),t.gridlayer=oi(i,"g","gridlayer"),t.zerolinelayer=oi(i,"g","zerolinelayer"));var S=oi(i,"g","layer-between");t.shapelayerBetween=oi(S,"g","shapelayer"),t.imagelayerBetween=oi(S,"g","imagelayer"),oi(i,"path","xlines-below"),oi(i,"path","ylines-below"),t.overlinesBelow=oi(i,"g","overlines-below"),oi(i,"g","xaxislayer-below"),oi(i,"g","yaxislayer-below"),t.overaxesBelow=oi(i,"g","overaxes-below")}t.overplot=oi(i,"g","overplot"),t.plot=oi(t.overplot,"g",a),l||(t.xlines=oi(i,"path","xlines-above"),t.ylines=oi(i,"path","ylines-above"),t.overlinesAbove=oi(i,"g","overlines-above"),oi(i,"g","xaxislayer-above"),oi(i,"g","yaxislayer-above"),t.overaxesAbove=oi(i,"g","overaxes-above"),t.xlines=i.select(".xlines-"+f),t.ylines=i.select(".ylines-"+h),t.xaxislayer=i.select(".xaxislayer-"+f),t.yaxislayer=i.select(".yaxislayer-"+h))}else{var C=b.plotgroup,P=a+"-x",E=a+"-y";t.minorGridlayer=b.minorGridlayer,t.gridlayer=b.gridlayer,t.zerolinelayer=b.zerolinelayer,oi(b.overlinesBelow,"path",P),oi(b.overlinesBelow,"path",E),oi(b.overaxesBelow,"g",P),oi(b.overaxesBelow,"g",E),t.plot=oi(b.overplot,"g",a),oi(b.overlinesAbove,"path",P),oi(b.overlinesAbove,"path",E),oi(b.overaxesAbove,"g",P),oi(b.overaxesAbove,"g",E),t.xlines=C.select(".overlines-"+f).select("."+P),t.ylines=C.select(".overlines-"+h).select("."+E),t.xaxislayer=C.select(".overaxes-"+f).select("."+P),t.yaxislayer=C.select(".overaxes-"+h).select("."+E)}l||(v||(Kx(t.minorGridlayer,"g",t.xaxis._id),Kx(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(I){return I[0]}).sort(Wh.idSort),Kx(t.gridlayer,"g",t.xaxis._id),Kx(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(Wh.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0))}function MN(e,t){if(e){var r={};e.each(function(h){var v=h[0],m=Qx.select(this);m.remove(),SN(v,t),r[v]=!0});for(var i in t._plots)for(var a=t._plots[i],s=a.overlays||[],l=0;l<s.length;l++){var f=s[l];r[f.id]&&f.plot.selectAll(".trace").remove()}}}function SN(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}Oo.toSVG=function(e){var t=e._fullLayout._glimages,r=Qx.select(e).selectAll(".svg-container"),i=r.filter(function(s,l){return l===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function a(){var s=this,l=s.toDataURL("image/png"),f=t.append("svg:image");f.attr({xmlns:Nue.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:s.style.width,height:s.style.height})}i.each(a)};Oo.updateFx=a6().updateFx});var CN=ve((z2e,kN)=>{"use strict";var $x=rs();kN.exports={hasLines:$x.hasLines,hasMarkers:$x.hasMarkers,hasText:$x.hasText,isBubble:$x.isBubble,attributes:Sc(),layoutAttributes:L_(),supplyDefaults:UF(),crossTraceDefaults:ZF(),supplyLayoutDefaults:WF(),calc:D6().calc,crossTraceCalc:_q(),arraysToCalcdata:Rg(),plot:zq(),colorbar:B6(),formatLabels:Fq(),style:H6().style,styleOnSelect:H6().styleOnSelect,hoverPoints:Uq(),selectPoints:Gq(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Q6(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}});var PN=ve((I2e,LN)=>{"use strict";var Oue=ja(),Uue=Ua(),EN=j4(),$6=Ft(),Vue=$6.strScale,Hue=$6.strRotate,Gue=$6.strTranslate;LN.exports=function(t,r,i){var a=t.node(),s=EN[i.arrowhead||0],l=EN[i.startarrowhead||0],f=(i.arrowwidth||1)*(i.arrowsize||1),h=(i.arrowwidth||1)*(i.startarrowsize||1),v=r.indexOf("start")>=0,m=r.indexOf("end")>=0,b=s.backoff*f+i.standoff,T=l.backoff*h+i.startstandoff,S,C,P,E;if(a.nodeName==="line"){S={x:+t.attr("x1"),y:+t.attr("y1")},C={x:+t.attr("x2"),y:+t.attr("y2")};var I=S.x-C.x,q=S.y-C.y;if(P=Math.atan2(q,I),E=P+Math.PI,b&&T&&b+T>Math.sqrt(I*I+q*q)){de();return}if(b){if(b*b>I*I+q*q){de();return}var B=b*Math.cos(P),z=b*Math.sin(P);C.x+=B,C.y+=z,t.attr({x2:C.x,y2:C.y})}if(T){if(T*T>I*I+q*q){de();return}var O=T*Math.cos(P),H=T*Math.sin(P);S.x-=O,S.y-=H,t.attr({x1:S.x,y1:S.y})}}else if(a.nodeName==="path"){var V=a.getTotalLength(),W="";if(V<b+T){de();return}var K=a.getPointAtLength(0),re=a.getPointAtLength(.1);P=Math.atan2(K.y-re.y,K.x-re.x),S=a.getPointAtLength(Math.min(T,V)),W="0px,"+T+"px,";var oe=a.getPointAtLength(V),ne=a.getPointAtLength(V-.1);E=Math.atan2(oe.y-ne.y,oe.x-ne.x),C=a.getPointAtLength(Math.max(0,V-b));var he=W?T+b:b;W+=V-he+"px,"+V+"px",t.style("stroke-dasharray",W)}function de(){t.style("stroke-dasharray","0px,100px")}function Ee(ke,Te,ye,Ae){ke.path&&(ke.noRotate&&(ye=0),Oue.select(a.parentNode).append("path").attr({class:t.attr("class"),d:ke.path,transform:Gue(Te.x,Te.y)+Hue(ye*180/Math.PI)+Vue(Ae)}).style({fill:Uue.rgb(i.arrowcolor),"stroke-width":0}))}v&&Ee(l,S,P,h),m&&Ee(s,C,E,f)}});var eb=ve((R2e,FN)=>{"use strict";var DN=ja(),eT=la(),Zue=eo(),jh=Ft(),tT=jh.strTranslate,Hg=Yi(),Rd=Ua(),Cc=_i(),zN=If(),rT=co(),aT=Bh(),Vg=Xl(),Yue=Di().arrayEditor,Wue=PN();FN.exports={draw:Xue,drawOne:IN,drawRaw:RN};function Xue(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&IN(e,r);return Zue.previousPromises(e)}function IN(e,t){var r=e._fullLayout,i=r.annotations[t]||{},a=Hg.getFromId(e,i.xref),s=Hg.getFromId(e,i.yref);a&&a.setScale(),s&&s.setScale(),RN(e,i,t,!1,a,s)}function Xh(e,t,r,i,a){var s=a[r],l=a[r+"ref"],f=r.indexOf("y")!==-1,h=Hg.getRefType(l)==="domain",v=f?i.h:i.w;return e?h?s+(f?-t:t)/e._length:e.p2r(e.r2p(s)+t):s+(f?-t:t)/v}function RN(e,t,r,i,a,s){var l=e._fullLayout,f=e._fullLayout._size,h=e._context.edits,v,m;i?(v="annotation-"+i,m=i+".annotations"):(v="annotation",m="annotations");var b=Yue(e.layout,m,t),T=b.modifyBase,S=b.modifyItem,C=b.getUpdateObj;l._infolayer.selectAll("."+v+'[data-index="'+r+'"]').remove();var P="clip"+l._uid+"_ann"+r;if(!t._input||t.visible===!1){DN.selectAll("#"+P).remove();return}var E={x:{},y:{}},I=+t.textangle||0,q=l._infolayer.append("g").classed(v,!0).attr("data-index",String(r)).style("opacity",t.opacity),B=q.append("g").classed("annotation-text-g",!0),z=h[t.showarrow?"annotationTail":"annotationPosition"],O=t.captureevents||h.annotationText||z;function H(Ae){var Me={index:r,annotation:t._input,fullAnnotation:t,event:Ae};return i&&(Me.subplotId=i),Me}var V=B.append("g").style("pointer-events",O?"all":null).call(aT,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",H(DN.event))});t.hovertext&&V.on("mouseover",function(){var Ae=t.hoverlabel,Me=Ae.font,De=this.getBoundingClientRect(),at=e.getBoundingClientRect();zN.loneHover({x0:De.left-at.left,x1:De.right-at.left,y:(De.top+De.bottom)/2-at.top,text:t.hovertext,color:Ae.bgcolor,borderColor:Ae.bordercolor,fontFamily:Me.family,fontSize:Me.size,fontColor:Me.color,fontWeight:Me.weight,fontStyle:Me.style,fontVariant:Me.variant,fontShadow:Me.fontShadow,fontLineposition:Me.fontLineposition,fontTextcase:Me.fontTextcase},{container:l._hoverlayer.node(),outerContainer:l._paper.node(),gd:e})}).on("mouseout",function(){zN.loneUnhover(l._hoverlayer.node())});var W=t.borderwidth,K=t.borderpad,re=W+K,oe=V.append("rect").attr("class","bg").style("stroke-width",W+"px").call(Rd.stroke,t.bordercolor).call(Rd.fill,t.bgcolor),ne=t.width||t.height,he=l._topclips.selectAll("#"+P).data(ne?[0]:[]);he.enter().append("clipPath").classed("annclip",!0).attr("id",P).append("rect"),he.exit().remove();var de=t.font,Ee=l._meta?jh.templateString(t.text,l._meta):t.text,ke=V.append("text").classed("annotation-text",!0).text(Ee);function Te(Ae){return Ae.call(Cc.font,de).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),rT.convertToTspans(Ae,e,ye),Ae}function ye(){var Ae=ke.selectAll("a");if(Ae.size()===1&&Ae.text()===ke.text()){var Me=V.insert("a",":first-child").attr({"xlink:xlink:href":Ae.attr("xlink:href"),"xlink:xlink:show":Ae.attr("xlink:show")}).style({cursor:"pointer"});Me.node().appendChild(oe.node())}var De=V.select(".annotation-text-math-group"),at=!De.empty(),pt=Cc.bBox((at?De:ke).node()),lt=pt.width,ut=pt.height,Ye=t.width||lt,xt=t.height||ut,rt=Math.round(Ye+2*re),Tt=Math.round(xt+2*re);function St(_t,ct){return ct==="auto"&&(_t<1/3?ct="left":_t>2/3?ct="right":ct="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ct]}for(var mt=!1,ge=["x","y"],Re=0;Re<ge.length;Re++){var xe=ge[Re],et=t[xe+"ref"]||xe,ht=t["a"+xe+"ref"],tt={x:a,y:s}[xe],Rt=(I+(xe==="x"?0:-90))*Math.PI/180,qt=rt*Math.cos(Rt),Jt=Tt*Math.sin(Rt),Ht=Math.abs(qt)+Math.abs(Jt),ar=t[xe+"anchor"],kt=t[xe+"shift"]*(xe==="x"?1:-1),zt=E[xe],_r,rr,Be,vt,gt,Cr=Hg.getRefType(et);if(tt&&Cr!=="domain"){var pr=tt.r2fraction(t[xe]);(pr<0||pr>1)&&(ht===et?(pr=tt.r2fraction(t["a"+xe]),(pr<0||pr>1)&&(mt=!0)):mt=!0),_r=tt._offset+tt.r2p(t[xe]),vt=.5}else{var bt=Cr==="domain";xe==="x"?(Be=t[xe],_r=bt?tt._offset+tt._length*Be:_r=f.l+f.w*Be):(Be=1-t[xe],_r=bt?tt._offset+tt._length*Be:_r=f.t+f.h*Be),vt=t.showarrow?.5:Be}if(t.showarrow){zt.head=_r;var wt=t["a"+xe];if(gt=qt*St(.5,t.xanchor)-Jt*St(.5,t.yanchor),ht===et){var Ut=Hg.getRefType(ht);Ut==="domain"?(xe==="y"&&(wt=1-wt),zt.tail=tt._offset+tt._length*wt):Ut==="paper"?xe==="y"?(wt=1-wt,zt.tail=f.t+f.h*wt):zt.tail=f.l+f.w*wt:zt.tail=tt._offset+tt.r2p(wt),rr=gt}else zt.tail=_r+wt,rr=gt+wt;zt.text=zt.tail+gt;var Kt=l[xe==="x"?"width":"height"];if(et==="paper"&&(zt.head=jh.constrain(zt.head,1,Kt-1)),ht==="pixel"){var Gt=-Math.max(zt.tail-3,zt.text),Nt=Math.min(zt.tail+3,zt.text)-Kt;Gt>0?(zt.tail+=Gt,zt.text+=Gt):Nt>0&&(zt.tail-=Nt,zt.text-=Nt)}zt.tail+=kt,zt.head+=kt}else gt=Ht*St(vt,ar),rr=gt,zt.text=_r+gt;zt.text+=kt,gt+=kt,rr+=kt,t["_"+xe+"padplus"]=Ht/2+rr,t["_"+xe+"padminus"]=Ht/2-rr,t["_"+xe+"size"]=Ht,t["_"+xe+"shift"]=gt}if(mt){V.remove();return}var $t=0,Ar=0;if(t.align!=="left"&&($t=(Ye-lt)*(t.align==="center"?.5:1)),t.valign!=="top"&&(Ar=(xt-ut)*(t.valign==="middle"?.5:1)),at)De.select("svg").attr({x:re+$t-1,y:re+Ar}).call(Cc.setClipUrl,ne?P:null,e);else{var xr=re+Ar-pt.top,Ct=re+$t-pt.left;ke.call(rT.positionText,Ct,xr).call(Cc.setClipUrl,ne?P:null,e)}he.select("rect").call(Cc.setRect,re,re,Ye,xt),oe.call(Cc.setRect,W/2,W/2,rt-W,Tt-W),V.call(Cc.setTranslate,Math.round(E.x.text-rt/2),Math.round(E.y.text-Tt/2)),B.attr({transform:"rotate("+I+","+E.x.text+","+E.y.text+")"});var Fe=function(_t,ct){q.selectAll(".annotation-arrow-g").remove();var yr=E.x.head,Er=E.y.head,Tr=E.x.tail+_t,Hr=E.y.tail+ct,_a=E.x.text+_t,ka=E.y.text+ct,Ea=jh.rotationXYMatrix(I,_a,ka),Ii=jh.apply2DTransform(Ea),Ki=jh.apply2DTransform2(Ea),yn=+oe.attr("width"),Xi=+oe.attr("height"),jn=_a-.5*yn,En=jn+yn,Vi=ka-.5*Xi,pa=Vi+Xi,Gr=[[jn,Vi,jn,pa],[jn,pa,En,pa],[En,pa,En,Vi],[En,Vi,jn,Vi]].map(Ki);if(!Gr.reduce(function(Ve,dt){return Ve^!!jh.segmentsIntersect(yr,Er,yr+1e6,Er+1e6,dt[0],dt[1],dt[2],dt[3])},!1)){Gr.forEach(function(Ve){var dt=jh.segmentsIntersect(Tr,Hr,yr,Er,Ve[0],Ve[1],Ve[2],Ve[3]);dt&&(Tr=dt.x,Hr=dt.y)});var Qa=t.arrowwidth,Zr=t.arrowcolor,vi=t.arrowside,ya=q.append("g").style({opacity:Rd.opacity(Zr)}).classed("annotation-arrow-g",!0),le=ya.append("path").attr("d","M"+Tr+","+Hr+"L"+yr+","+Er).style("stroke-width",Qa+"px").call(Rd.stroke,Rd.rgb(Zr));if(Wue(le,vi,t),h.annotationPosition&&le.node().parentNode&&!i){var ee=yr,se=Er;if(t.standoff){var fe=Math.sqrt(Math.pow(yr-Tr,2)+Math.pow(Er-Hr,2));ee+=t.standoff*(Tr-yr)/fe,se+=t.standoff*(Hr-Er)/fe}var Ce=ya.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Tr-ee)+","+(Hr-se),transform:tT(ee,se)}).style("stroke-width",Qa+6+"px").call(Rd.stroke,"rgba(0,0,0,0)").call(Rd.fill,"rgba(0,0,0,0)"),Ne,$e;Vg.init({element:Ce.node(),gd:e,prepFn:function(){var Ve=Cc.getTranslate(V);Ne=Ve.x,$e=Ve.y,a&&a.autorange&&T(a._name+".autorange",!0),s&&s.autorange&&T(s._name+".autorange",!0)},moveFn:function(Ve,dt){var Et=Ii(Ne,$e),Dt=Et[0]+Ve,Qt=Et[1]+dt;V.call(Cc.setTranslate,Dt,Qt),S("x",Xh(a,Ve,"x",f,t)),S("y",Xh(s,dt,"y",f,t)),t.axref===t.xref&&S("ax",Xh(a,Ve,"ax",f,t)),t.ayref===t.yref&&S("ay",Xh(s,dt,"ay",f,t)),ya.attr("transform",tT(Ve,dt)),B.attr({transform:"rotate("+I+","+Dt+","+Qt+")"})},doneFn:function(){eT.call("_guiRelayout",e,C());var Ve=document.querySelector(".js-notes-box-panel");Ve&&Ve.redraw(Ve.selectedObj)}})}}};if(t.showarrow&&Fe(0,0),z){var He;Vg.init({element:V.node(),gd:e,prepFn:function(){He=B.attr("transform")},moveFn:function(_t,ct){var yr="pointer";if(t.showarrow)t.axref===t.xref?S("ax",Xh(a,_t,"ax",f,t)):S("ax",t.ax+_t),t.ayref===t.yref?S("ay",Xh(s,ct,"ay",f.w,t)):S("ay",t.ay+ct),Fe(_t,ct);else{if(i)return;var Er,Tr;if(a)Er=Xh(a,_t,"x",f,t);else{var Hr=t._xsize/f.w,_a=t.x+(t._xshift-t.xshift)/f.w-Hr/2;Er=Vg.align(_a+_t/f.w,Hr,0,1,t.xanchor)}if(s)Tr=Xh(s,ct,"y",f,t);else{var ka=t._ysize/f.h,Ea=t.y-(t._yshift+t.yshift)/f.h-ka/2;Tr=Vg.align(Ea-ct/f.h,ka,0,1,t.yanchor)}S("x",Er),S("y",Tr),(!a||!s)&&(yr=Vg.getCursor(a?.5:Er,s?.5:Tr,t.xanchor,t.yanchor))}B.attr({transform:tT(_t,ct)+He}),aT(V,yr)},clickFn:function(_t,ct){t.captureevents&&e.emit("plotly_clickannotation",H(ct))},doneFn:function(){aT(V),eT.call("_guiRelayout",e,C());var _t=document.querySelector(".js-notes-box-panel");_t&&_t.redraw(_t.selectedObj)}})}}h.annotationText?ke.call(rT.makeEditable,{delegate:V,gd:e}).call(Te).on("edit",function(Ae){t.text=Ae,this.call(Te),S("text",Ae),a&&a.autorange&&T(a._name+".autorange",!0),s&&s.autorange&&T(s._name+".autorange",!0),eT.call("_guiRelayout",e,C())}):ke.call(Te)}});var VN=ve((F2e,UN)=>{"use strict";var qN=Ft(),jue=la(),NN=Di().arrayEditor;UN.exports={hasClickToShow:Jue,onClick:Kue};function Jue(e,t){var r=ON(e,t);return r.on.length>0||r.explicitOff.length>0}function Kue(e,t){var r=ON(e,t),i=r.on,a=r.off.concat(r.explicitOff),s={},l=e._fullLayout.annotations,f,h;if(i.length||a.length){for(f=0;f<i.length;f++)h=NN(e.layout,"annotations",l[i[f]]),h.modifyItem("visible",!0),qN.extendFlat(s,h.getUpdateObj());for(f=0;f<a.length;f++)h=NN(e.layout,"annotations",l[a[f]]),h.modifyItem("visible",!1),qN.extendFlat(s,h.getUpdateObj());return jue.call("update",e,{},s)}}function ON(e,t){var r=e._fullLayout.annotations,i=[],a=[],s=[],l=(t||[]).length,f,h,v,m,b,T,S,C;for(f=0;f<r.length;f++)if(v=r[f],m=v.clicktoshow,m){for(h=0;h<l;h++)if(b=t[h],T=b.xaxis,S=b.yaxis,T._id===v.xref&&S._id===v.yref&&T.d2r(b.x)===BN(v._xclick,T)&&S.d2r(b.y)===BN(v._yclick,S)){v.visible?m==="onout"?C=a:C=s:C=i,C.push(f);break}h===l&&v.visible&&m==="onout"&&a.push(f)}return{on:i,off:a,explicitOff:s}}function BN(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}});var nT=ve((q2e,HN)=>{"use strict";var iT=Ft(),im=Ua();HN.exports=function(t,r,i,a){a("opacity");var s=a("bgcolor"),l=a("bordercolor"),f=im.opacity(l);a("borderpad");var h=a("borderwidth"),v=a("showarrow");a("text",v?" ":i._dfltTitle.annotation),a("textangle"),iT.coerceFont(a,"font",i.font),a("width"),a("align");var m=a("height");if(m&&a("valign"),v){var b=a("arrowside"),T,S;b.indexOf("end")!==-1&&(T=a("arrowhead"),S=a("arrowsize")),b.indexOf("start")!==-1&&(a("startarrowhead",T),a("startarrowsize",S)),a("arrowcolor",f?r.bordercolor:im.defaultLine),a("arrowwidth",(f&&h||1)*2),a("standoff"),a("startstandoff")}var C=a("hovertext"),P=i.hoverlabel||{};if(C){var E=a("hoverlabel.bgcolor",P.bgcolor||(im.opacity(s)?im.rgb(s):im.defaultLine)),I=a("hoverlabel.bordercolor",P.bordercolor||im.contrast(E)),q=iT.extendFlat({},P.font);q.color||(q.color=I),iT.coerceFont(a,"hoverlabel.font",q)}a("captureevents",!!C)}});var ZN=ve((N2e,GN)=>{"use strict";var oT=Ft(),Fd=Yi(),Que=Yl(),$ue=nT(),efe=j0();GN.exports=function(t,r){Que(t,r,{name:"annotations",handleItemDefaults:tfe})};function tfe(e,t,r){function i(B,z){return oT.coerce(e,t,efe,B,z)}var a=i("visible"),s=i("clicktoshow");if(a||s){$ue(e,t,r,i);for(var l=t.showarrow,f=["x","y"],h=[-10,-30],v={_fullLayout:r},m=0;m<2;m++){var b=f[m],T=Fd.coerceRef(e,t,v,b,"","paper");if(T!=="paper"){var S=Fd.getFromId(v,T);S._annIndices.push(t._index)}if(Fd.coercePosition(t,v,i,T,b,.5),l){var C="a"+b,P=Fd.coerceRef(e,t,v,C,"pixel",["pixel","paper"]);P!=="pixel"&&P!==T&&(P=t[C]="pixel");var E=P==="pixel"?h[m]:.4;Fd.coercePosition(t,v,i,P,C,E)}i(b+"anchor"),i(b+"shift")}if(oT.noneOrAll(e,t,["x","y"]),l&&oT.noneOrAll(e,t,["ax","ay"]),s){var I=i("xclick"),q=i("yclick");t._xclick=I===void 0?t.x:Fd.cleanPosition(I,v,t.xref),t._yclick=q===void 0?t.y:Fd.cleanPosition(q,v,t.yref)}}}});var XN=ve((B2e,WN)=>{"use strict";var sT=Ft(),qd=Yi(),rfe=eb().draw;WN.exports=function(t){var r=t._fullLayout,i=sT.filterVisible(r.annotations);if(i.length&&t._fullData.length)return sT.syncOrAsync([rfe,afe],t)};function afe(e){var t=e._fullLayout;sT.filterVisible(t.annotations).forEach(function(r){var i=qd.getFromId(e,r.xref),a=qd.getFromId(e,r.yref),s=qd.getRefType(r.xref),l=qd.getRefType(r.yref);r._extremes={},s==="range"&&YN(r,i),l==="range"&&YN(r,a)})}function YN(e,t){var r=t._id,i=r.charAt(0),a=e[i],s=e["a"+i],l=e[i+"ref"],f=e["a"+i+"ref"],h=e["_"+i+"padplus"],v=e["_"+i+"padminus"],m={x:1,y:-1}[i]*e[i+"shift"],b=3*e.arrowsize*e.arrowwidth||0,T=b+m,S=b-m,C=3*e.startarrowsize*e.arrowwidth||0,P=C+m,E=C-m,I;if(f===l){var q=qd.findExtremes(t,[t.r2c(a)],{ppadplus:T,ppadminus:S}),B=qd.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(h,P),ppadminus:Math.max(v,E)});I={min:[q.min[0],B.min[0]],max:[q.max[0],B.max[0]]}}else P=s?P+s:P,E=s?E-s:E,I=qd.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(h,T,P),ppadminus:Math.max(v,S,E)});e._extremes[r]=I}});var JN=ve((O2e,jN)=>{"use strict";var ife=Da(),nfe=W1();jN.exports=function(t,r,i,a){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(!(s||l))return;var f=t._fullLayout.annotations,h=r._id.charAt(0),v,m;function b(S){var C=v[S],P=null;s?P=nfe(C,r.range):P=Math.pow(10,C),ife(P)||(P=null),a(m+S,P)}for(var T=0;T<f.length;T++)v=f[T],m="annotations["+T+"].",v[h+"ref"]===r._id&&b(h),v["a"+h+"ref"]===r._id&&b("a"+h)}});var $N=ve((U2e,QN)=>{"use strict";var lT=eb(),KN=VN();QN.exports={moduleType:"component",name:"annotations",layoutAttributes:j0(),supplyLayoutDefaults:ZN(),includeBasePlot:Tg()("annotations"),calcAutorange:XN(),draw:lT.draw,drawOne:lT.drawOne,drawRaw:lT.drawRaw,hasClickToShow:KN.hasClickToShow,onClick:KN.onClick,convertCoords:JN()}});var tb=ve((V2e,eB)=>{"use strict";var Ni=j0(),ofe=il().overrideAll,sfe=Di().templatedArray;eB.exports=ofe(sfe("annotation",{visible:Ni.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:Ni.xanchor,xshift:Ni.xshift,yanchor:Ni.yanchor,yshift:Ni.yshift,text:Ni.text,textangle:Ni.textangle,font:Ni.font,width:Ni.width,height:Ni.height,opacity:Ni.opacity,align:Ni.align,valign:Ni.valign,bgcolor:Ni.bgcolor,bordercolor:Ni.bordercolor,borderpad:Ni.borderpad,borderwidth:Ni.borderwidth,showarrow:Ni.showarrow,arrowcolor:Ni.arrowcolor,arrowhead:Ni.arrowhead,startarrowhead:Ni.startarrowhead,arrowside:Ni.arrowside,arrowsize:Ni.arrowsize,startarrowsize:Ni.startarrowsize,arrowwidth:Ni.arrowwidth,standoff:Ni.standoff,startstandoff:Ni.startstandoff,hovertext:Ni.hovertext,hoverlabel:Ni.hoverlabel,captureevents:Ni.captureevents}),"calc","from-root")});var rB=ve((H2e,tB)=>{"use strict";var uT=Ft(),lfe=Yi(),ufe=Yl(),ffe=nT(),cfe=tb();tB.exports=function(t,r,i){ufe(t,r,{name:"annotations",handleItemDefaults:hfe,fullLayout:i.fullLayout})};function hfe(e,t,r,i){function a(f,h){return uT.coerce(e,t,cfe,f,h)}function s(f){var h=f+"axis",v={_fullLayout:{}};return v._fullLayout[h]=r[h],lfe.coercePosition(t,v,a,f,f,.5)}var l=a("visible");l&&(ffe(e,t,i.fullLayout,a),s("x"),s("y"),s("z"),uT.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",a("ax",-10),a("ay",-30),uT.noneOrAll(e,t,["ax","ay"])))}});var oB=ve((G2e,nB)=>{"use strict";var aB=Ft(),iB=Yi();nB.exports=function(t){for(var r=t.fullSceneLayout,i=r.annotations,a=0;a<i.length;a++)vfe(i[a],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function vfe(e,t){var r=t.fullSceneLayout,i=r.domain,a=t.fullLayout._size,s={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},aB.extendFlat(e._xa,s),iB.setConvert(e._xa),e._xa._offset=a.l+i.x[0]*a.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*a.w*(i.x[1]-i.x[0])},e._ya={},aB.extendFlat(e._ya,s),iB.setConvert(e._ya),e._ya._offset=a.t+(1-i.y[1])*a.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*a.h*(i.y[1]-i.y[0])}}});var lB=ve((Z2e,sB)=>{"use strict";function fT(e,t){var r=[0,0,0,0],i,a;for(i=0;i<4;++i)for(a=0;a<4;++a)r[a]+=e[4*i+a]*t[i];return r}function dfe(e,t){var r=fT(e.projection,fT(e.view,fT(e.model,[t[0],t[1],t[2],1])));return r}sB.exports=dfe});var fB=ve((Y2e,uB)=>{"use strict";var pfe=eb().drawRaw,mfe=lB(),yfe=["x","y","z"];uB.exports=function(t){for(var r=t.fullSceneLayout,i=t.dataScale,a=r.annotations,s=0;s<a.length;s++){for(var l=a[s],f=!1,h=0;h<3;h++){var v=yfe[h],m=l[v],b=r[v+"axis"],T=b.r2fraction(m);if(T<0||T>1){f=!0;break}}f?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=mfe(t.glplot.cameraParams,[r.xaxis.r2l(l.x)*i[0],r.yaxis.r2l(l.y)*i[1],r.zaxis.r2l(l.z)*i[2]]),pfe(t.graphDiv,l,s,t.id,l._xa,l._ya))}}});var vB=ve((W2e,hB)=>{"use strict";var gfe=la(),cB=Ft();hB.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:tb()}}},layoutAttributes:tb(),handleDefaults:rB(),includeBasePlot:_fe,convert:oB(),draw:fB()};function _fe(e,t){var r=gfe.subplotsRegistry.gl3d;if(r)for(var i=r.attrRegex,a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];i.test(l)&&(e[l].annotations||[]).length&&(cB.pushUnique(t._basePlotModules,r),cB.pushUnique(t._subplots.gl3d,l))}}});var cT=ve((j2e,yB)=>{"use strict";var dB=j0(),pB=qo(),mB=Sc().line,xfe=cc().dash,Hu=hn().extendFlat,bfe=Di().templatedArray,X2e=wg(),nm=ms(),wfe=Vl().shapeTexttemplateAttrs,Tfe=s_();yB.exports=bfe("shape",{visible:Hu({},nm.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:Hu({},nm.legend,{editType:"calc+arraydraw"}),legendgroup:Hu({},nm.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:Hu({},nm.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:pB({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:Hu({},nm.legendrank,{editType:"calc+arraydraw"}),legendwidth:Hu({},nm.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:Hu({},dB.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:Hu({},dB.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:Hu({},mB.color,{editType:"arraydraw"}),width:Hu({},mB.width,{editType:"calc+arraydraw"}),dash:Hu({},xfe,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:wfe({},{keys:Object.keys(Tfe)}),font:pB({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})});var xB=ve((J2e,_B)=>{"use strict";var Gg=Ft(),om=Yi(),Afe=Yl(),Mfe=cT(),gB=Vh();_B.exports=function(t,r){Afe(t,r,{name:"shapes",handleItemDefaults:kfe})};function Sfe(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function kfe(e,t,r){function i(Ae,Me){return Gg.coerce(e,t,Mfe,Ae,Me)}t._isShape=!0;var a=i("visible");if(a){var s=i("showlegend");s&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),Gg.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var l=i("path"),f=l?"path":"rect",h=i("type",f),v=h!=="path";v&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var m=i("line.width");m&&(i("line.color"),i("line.dash"));for(var b=i("xsizemode"),T=i("ysizemode"),S=["x","y"],C=0;C<2;C++){var P=S[C],E=P+"anchor",I=P==="x"?b:T,q={_fullLayout:r},B,z,O,H=om.coerceRef(e,t,q,P,void 0,"paper"),V=om.getRefType(H);if(V==="range"?(B=om.getFromId(q,H),B._shapeIndices.push(t._index),O=gB.rangeToShapePosition(B),z=gB.shapePositionToRange(B),(B.type==="category"||B.type==="multicategory")&&(i(P+"0shift"),i(P+"1shift"))):z=O=Gg.identity,v){var W=.25,K=.75,re=P+"0",oe=P+"1",ne=e[re],he=e[oe];e[re]=z(e[re],!0),e[oe]=z(e[oe],!0),I==="pixel"?(i(re,0),i(oe,10)):(om.coercePosition(t,q,i,H,re,W),om.coercePosition(t,q,i,H,oe,K)),t[re]=O(t[re]),t[oe]=O(t[oe]),e[re]=ne,e[oe]=he}if(I==="pixel"){var de=e[E];e[E]=z(e[E],!0),om.coercePosition(t,q,i,H,E,.25),t[E]=O(t[E]),e[E]=de}}v&&Gg.noneOrAll(e,t,["x0","x1","y0","y1"]);var Ee=h==="line",ke,Te;if(v&&(ke=i("label.texttemplate")),ke||(Te=i("label.text")),Te||ke){i("label.textangle");var ye=i("label.textposition",Ee?"middle":"middle center");i("label.xanchor"),i("label.yanchor",Sfe(Ee,ye)),i("label.padding"),Gg.coerceFont(i,"label.font",r.font)}}}});var TB=ve((K2e,wB)=>{"use strict";var Cfe=Ua(),bB=Ft();function Efe(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}wB.exports=function(t,r,i){i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),bB.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var a=i("newshape.line.width");if(a){var s=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",Cfe.contrast(s)),i("newshape.line.dash")}var l=t.dragmode==="drawline",f=i("newshape.label.text"),h=i("newshape.label.texttemplate");if(f||h){i("newshape.label.textangle");var v=i("newshape.label.textposition",l?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",Efe(l,v)),i("newshape.label.padding"),bB.coerceFont(i,"newshape.label.font",r.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}});var CB=ve((Q2e,kB)=>{"use strict";var hT=Ft(),sm=Yi(),lm=rg(),MB=Vh();kB.exports=function(t){var r=t._fullLayout,i=hT.filterVisible(r.shapes);if(!(!i.length||!t._fullData.length))for(var a=0;a<i.length;a++){var s=i[a];s._extremes={};var l,f,h=sm.getRefType(s.xref),v=sm.getRefType(s.yref);s.xref!=="paper"&&h!=="domain"&&(l=sm.getFromId(t,s.xref),f=AB(l,s,lm.paramIsX),f&&(s._extremes[l._id]=sm.findExtremes(l,f,Lfe(s)))),s.yref!=="paper"&&v!=="domain"&&(l=sm.getFromId(t,s.yref),f=AB(l,s,lm.paramIsY),f&&(s._extremes[l._id]=sm.findExtremes(l,f,Pfe(s))))}};function Lfe(e){return SB(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function Pfe(e){return SB(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function SB(e,t,r,i,a,s){var l=e/2,f=s;if(t==="pixel"){var h=a?MB.extractPathCoords(a,s?lm.paramIsY:lm.paramIsX):[r,i],v=hT.aggNums(Math.max,null,h),m=hT.aggNums(Math.min,null,h),b=m<0?Math.abs(m)+l:l,T=v>0?v+l:l;return{ppad:l,ppadplus:f?b:T,ppadminus:f?T:b}}else return{ppad:l}}function AB(e,t,r){var i=e._id.charAt(0)==="x"?"x":"y",a=e.type==="category"||e.type==="multicategory",s,l,f=0,h=0,v=a?e.r2c:e.d2c,m=t[i+"sizemode"]==="scaled";if(m?(s=t[i+"0"],l=t[i+"1"],a&&(f=t[i+"0shift"],h=t[i+"1shift"])):(s=t[i+"anchor"],l=t[i+"anchor"]),s!==void 0)return[v(s)+f,v(l)+h];if(t.path){var b=1/0,T=-1/0,S=t.path.match(lm.segmentRE),C,P,E,I,q;for(e.type==="date"&&(v=MB.decodeDate(v)),C=0;C<S.length;C++)P=S[C],E=r[P.charAt(0)].drawn,E!==void 0&&(I=S[C].substr(1).match(lm.paramRE),!(!I||I.length<E)&&(q=v(I[E]),q<b&&(b=q),q>T&&(T=q)));if(T>=b)return[b,T]}}});var PB=ve(($2e,LB)=>{"use strict";var EB=G2();LB.exports={moduleType:"component",name:"shapes",layoutAttributes:cT(),supplyLayoutDefaults:xB(),supplyDrawNewShapeDefaults:TB(),includeBasePlot:Tg()("shapes"),calcAutorange:CB(),draw:EB.draw,drawOne:EB.drawOne}});var vT=ve((txe,zB)=>{"use strict";var DB=Ao(),Dfe=Di().templatedArray,exe=wg();zB.exports=Dfe("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",DB.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",DB.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})});var RB=ve((rxe,IB)=>{"use strict";var zfe=Ft(),dT=Yi(),Ife=Yl(),Rfe=vT(),Ffe="images";IB.exports=function(t,r){var i={name:Ffe,handleItemDefaults:qfe};Ife(t,r,i)};function qfe(e,t,r){function i(T,S){return zfe.coerce(e,t,Rfe,T,S)}var a=i("source"),s=i("visible",!!a);if(!s)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var l={_fullLayout:r},f=["x","y"],h=0;h<2;h++){var v=f[h],m=dT.coerceRef(e,t,l,v,"paper",void 0);if(m!=="paper"){var b=dT.getFromId(l,m);b._imgIndices.push(t._index)}dT.coercePosition(t,l,i,m,v,0)}return t}});var BB=ve((axe,NB)=>{"use strict";var FB=ja(),Nfe=_i(),um=Yi(),qB=$n(),Bfe=Dh();NB.exports=function(t){var r=t._fullLayout,i=[],a={},s=[],l,f;for(f=0;f<r.images.length;f++){var h=r.images[f];if(h.visible)if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){l=qB.ref2id(h.xref)+qB.ref2id(h.yref);var v=r._plots[l];if(!v){s.push(h);continue}v.mainplot&&(l=v.mainplot.id),a[l]||(a[l]=[]),a[l].push(h)}else h.layer==="above"?i.push(h):s.push(h)}var m={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function b(z){var O=FB.select(this);if(this._imgSrc!==z.source)if(O.attr("xmlns",Bfe.svg),!t._context.staticPlot||z.source&&z.source.slice(0,5)==="data:")O.attr("xlink:href",z.source),this._imgSrc=z.source;else{var H=new Promise(function(V){var W=new Image;this.img=W,W.setAttribute("crossOrigin","anonymous"),W.onerror=K,W.onload=function(){var re=document.createElement("canvas");re.width=this.width,re.height=this.height;var oe=re.getContext("2d",{willReadFrequently:!0});oe.drawImage(this,0,0);var ne=re.toDataURL("image/png");O.attr("xlink:href",ne),V()},O.on("error",K),W.src=z.source,this._imgSrc=z.source;function K(){O.remove(),V()}}.bind(this));t._promises.push(H)}}function T(z){var O=FB.select(this),H=um.getFromId(t,z.xref),V=um.getFromId(t,z.yref),W=um.getRefType(z.xref)==="domain",K=um.getRefType(z.yref)==="domain",re=r._size,oe,ne;H!==void 0?oe=typeof z.xref=="string"&&W?H._length*z.sizex:Math.abs(H.l2p(z.sizex)-H.l2p(0)):oe=z.sizex*re.w,V!==void 0?ne=typeof z.yref=="string"&&K?V._length*z.sizey:Math.abs(V.l2p(z.sizey)-V.l2p(0)):ne=z.sizey*re.h;var he=oe*m.x[z.xanchor].offset,de=ne*m.y[z.yanchor].offset,Ee=m.x[z.xanchor].sizing+m.y[z.yanchor].sizing,ke,Te;switch(H!==void 0?ke=typeof z.xref=="string"&&W?H._length*z.x+H._offset:H.r2p(z.x)+H._offset:ke=z.x*re.w+re.l,ke+=he,V!==void 0?Te=typeof z.yref=="string"&&K?V._length*(1-z.y)+V._offset:V.r2p(z.y)+V._offset:Te=re.h-z.y*re.h+re.t,Te+=de,z.sizing){case"fill":Ee+=" slice";break;case"stretch":Ee="none";break}O.attr({x:ke,y:Te,width:oe,height:ne,preserveAspectRatio:Ee,opacity:z.opacity});var ye=H&&um.getRefType(z.xref)!=="domain"?H._id:"",Ae=V&&um.getRefType(z.yref)!=="domain"?V._id:"",Me=ye+Ae;Nfe.setClipUrl(O,Me?"clip"+r._uid+Me:null,t)}function S(z){return[z.xref,z.x,z.sizex,z.yref,z.y,z.sizey].join("_")}function C(z,O){return z._index-O._index}var P=r._imageLowerLayer.selectAll("image").data(s,S),E=r._imageUpperLayer.selectAll("image").data(i,S);P.enter().append("image"),E.enter().append("image"),P.exit().remove(),E.exit().remove(),P.each(function(z){b.bind(this)(z),T.bind(this)(z)}),E.each(function(z){b.bind(this)(z),T.bind(this)(z)}),P.sort(C),E.sort(C);var I=Object.keys(r._plots);for(f=0;f<I.length;f++){l=I[f];var q=r._plots[l];if(q.imagelayer){var B=q.imagelayer.selectAll("image").data(a[l]||[],S);B.enter().append("image"),B.exit().remove(),B.each(function(z){b.bind(this)(z),T.bind(this)(z)}),B.sort(C)}}}});var VB=ve((ixe,UB)=>{"use strict";var OB=Da(),Ofe=W1();UB.exports=function(t,r,i,a){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(s||l){for(var f=t._fullLayout.images,h=r._id.charAt(0),v,m,b=0;b<f.length;b++)if(v=f[b],m="images["+b+"].",v[h+"ref"]===r._id){var T=v[h],S=v["size"+h],C=null,P=null;if(s){C=Ofe(T,r.range);var E=S/Math.pow(10,C)/2;P=2*Math.log(E+Math.sqrt(1+E*E))/Math.LN10}else C=Math.pow(10,T),P=C*(Math.pow(10,S/2)-Math.pow(10,-S/2));OB(C)?OB(P)||(P=null):(C=null,P=null),a(m+h,C),a(m+"size"+h,P)}}}});var GB=ve((nxe,HB)=>{"use strict";HB.exports={moduleType:"component",name:"images",layoutAttributes:vT(),supplyLayoutDefaults:RB(),includeBasePlot:Tg()("images"),draw:BB(),convertCoords:VB()}});var rb=ve((oxe,ZB)=>{"use strict";ZB.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}});var pT=ve((sxe,WB)=>{"use strict";var Ufe=qo(),Vfe=Tf(),Hfe=hn().extendFlat,Gfe=il().overrideAll,Zfe=l_(),YB=Di().templatedArray,Yfe=YB("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});WB.exports=Gfe(YB("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:Yfe,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Hfe(Zfe({editType:"arraydraw"}),{}),font:Ufe({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:Vfe.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")});var KB=ve((lxe,JB)=>{"use strict";var ab=Ft(),XB=Yl(),jB=pT(),Wfe=rb(),Xfe=Wfe.name,jfe=jB.buttons;JB.exports=function(t,r){var i={name:Xfe,handleItemDefaults:Jfe};XB(t,r,i)};function Jfe(e,t,r){function i(l,f){return ab.coerce(e,t,jB,l,f)}var a=XB(e,t,{name:"buttons",handleItemDefaults:Kfe}),s=i("visible",a.length>0);s&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),ab.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),ab.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function Kfe(e,t){function r(a,s){return ab.coerce(e,t,jfe,a,s)}var i=r("visible",e.method==="skip"||Array.isArray(e.args));i&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}});var eO=ve((uxe,$B)=>{"use strict";$B.exports=rn;var Gu=ja(),QB=Ua(),fm=_i(),ib=Ft();function rn(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}rn.barWidth=2;rn.barLength=20;rn.barRadius=2;rn.barPad=1;rn.barColor="#808BA4";rn.prototype.enable=function(t,r,i){var a=this.gd._fullLayout,s=a.width,l=a.height;this.position=t;var f=this.position.l,h=this.position.w,v=this.position.t,m=this.position.h,b=this.position.direction,T=b==="down",S=b==="left",C=b==="right",P=b==="up",E=h,I=m,q,B,z,O;!T&&!S&&!C&&!P&&(this.position.direction="down",T=!0);var H=T||P;H?(q=f,B=q+E,T?(z=v,O=Math.min(z+I,l),I=O-z):(O=v+I,z=Math.max(O-I,0),I=O-z)):(z=v,O=z+I,S?(B=f+E,q=Math.max(B-E,0),E=B-q):(q=f,B=Math.min(q+E,s),E=B-q)),this._box={l:q,t:z,w:E,h:I};var V=h>E,W=rn.barLength+2*rn.barPad,K=rn.barWidth+2*rn.barPad,re=f,oe=v+m;oe+K>l&&(oe=l-K);var ne=this.container.selectAll("rect.scrollbar-horizontal").data(V?[0]:[]);ne.exit().on(".drag",null).remove(),ne.enter().append("rect").classed("scrollbar-horizontal",!0).call(QB.fill,rn.barColor),V?(this.hbar=ne.attr({rx:rn.barRadius,ry:rn.barRadius,x:re,y:oe,width:W,height:K}),this._hbarXMin=re+W/2,this._hbarTranslateMax=E-W):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var he=m>I,de=rn.barWidth+2*rn.barPad,Ee=rn.barLength+2*rn.barPad,ke=f+h,Te=v;ke+de>s&&(ke=s-de);var ye=this.container.selectAll("rect.scrollbar-vertical").data(he?[0]:[]);ye.exit().on(".drag",null).remove(),ye.enter().append("rect").classed("scrollbar-vertical",!0).call(QB.fill,rn.barColor),he?(this.vbar=ye.attr({rx:rn.barRadius,ry:rn.barRadius,x:ke,y:Te,width:de,height:Ee}),this._vbarYMin=Te+Ee/2,this._vbarTranslateMax=I-Ee):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Ae=this.id,Me=q-.5,De=he?B+de+.5:B+.5,at=z-.5,pt=V?O+K+.5:O+.5,lt=a._topdefs.selectAll("#"+Ae).data(V||he?[0]:[]);if(lt.exit().remove(),lt.enter().append("clipPath").attr("id",Ae).append("rect"),V||he?(this._clipRect=lt.select("rect").attr({x:Math.floor(Me),y:Math.floor(at),width:Math.ceil(De)-Math.floor(Me),height:Math.ceil(pt)-Math.floor(at)}),this.container.call(fm.setClipUrl,Ae,this.gd),this.bg.attr({x:f,y:v,width:h,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(fm.setClipUrl,null),delete this._clipRect),V||he){var ut=Gu.behavior.drag().on("dragstart",function(){Gu.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ut);var Ye=Gu.behavior.drag().on("dragstart",function(){Gu.event.sourceEvent.preventDefault(),Gu.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));V&&this.hbar.on(".drag",null).call(Ye),he&&this.vbar.on(".drag",null).call(Ye)}this.setTranslate(r,i)};rn.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(fm.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};rn.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=Gu.event.dx),this.vbar&&(r-=Gu.event.dy),this.setTranslate(t,r)};rn.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=Gu.event.deltaY),this.vbar&&(r+=Gu.event.deltaY),this.setTranslate(t,r)};rn.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var i=t+this._hbarXMin,a=i+this._hbarTranslateMax,s=ib.constrain(Gu.event.x,i,a),l=(s-i)/(a-i),f=this.position.w-this._box.w;t=l*f}if(this.vbar){var h=r+this._vbarYMin,v=h+this._vbarTranslateMax,m=ib.constrain(Gu.event.y,h,v),b=(m-h)/(v-h),T=this.position.h-this._box.h;r=b*T}this.setTranslate(t,r)};rn.prototype.setTranslate=function(t,r){var i=this.position.w-this._box.w,a=this.position.h-this._box.h;if(t=ib.constrain(t||0,0,i),r=ib.constrain(r||0,0,a),this.translateX=t,this.translateY=r,this.container.call(fm.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var s=t/i;this.hbar.call(fm.setTranslate,t+s*this._hbarTranslateMax,r)}if(this.vbar){var l=r/a;this.vbar.call(fm.setTranslate,t,r+l*this._vbarTranslateMax)}}});var fO=ve((fxe,uO)=>{"use strict";var cm=ja(),Zg=eo(),Yg=Ua(),hm=_i(),cl=Ft(),nb=co(),Qfe=Di().arrayEditor,rO=ts().LINE_SPACING,aa=rb(),$fe=eO();uO.exports=function(t){var r=t._fullLayout,i=cl.filterVisible(r[aa.name]);function a(T){Zg.autoMargin(t,sO(T))}var s=r._menulayer.selectAll("g."+aa.containerClassName).data(i.length>0?[0]:[]);if(s.enter().append("g").classed(aa.containerClassName,!0).style("cursor","pointer"),s.exit().each(function(){cm.select(this).selectAll("g."+aa.headerGroupClassName).each(a)}).remove(),i.length!==0){var l=s.selectAll("g."+aa.headerGroupClassName).data(i,ece);l.enter().append("g").classed(aa.headerGroupClassName,!0);for(var f=cl.ensureSingle(s,"g",aa.dropdownButtonGroupClassName,function(T){T.style("pointer-events","all")}),h=0;h<i.length;h++){var v=i[h];oce(t,v)}var m="updatemenus"+r._uid,b=new $fe(t,f,m);l.enter().size()&&(f.node().parentNode.appendChild(f.node()),f.call(yT)),l.exit().each(function(T){f.call(yT),a(T)}).remove(),l.each(function(T){var S=cm.select(this),C=T.type==="dropdown"?f:null;Zg.manageCommandObserver(t,T,T.buttons,function(P){mT(t,T,T.buttons[P.index],S,C,b,P.index,!0)}),T.type==="dropdown"?(iO(t,S,f,b,T),aO(f,T)&&Wg(t,S,f,b,T)):Wg(t,S,null,null,T)})}};function ece(e){return e._index}function tce(e){return+e.attr(aa.menuIndexAttrName)==-1}function aO(e,t){return+e.attr(aa.menuIndexAttrName)===t._index}function mT(e,t,r,i,a,s,l,f){t.active=l,Qfe(e.layout,aa.name,t).applyUpdate("active",l),t.type==="buttons"?Wg(e,i,null,null,t):t.type==="dropdown"&&(a.attr(aa.menuIndexAttrName,"-1"),iO(e,i,a,s,t),f||Wg(e,i,a,s,t))}function iO(e,t,r,i,a){var s=cl.ensureSingle(t,"g",aa.headerClassName,function(T){T.style("pointer-events","all")}),l=a._dims,f=a.active,h=a.buttons[f]||aa.blankHeaderOpts,v={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},m={width:l.headerWidth,height:l.headerHeight};s.call(gT,a,h,e).call(lO,a,v,m);var b=cl.ensureSingle(t,"text",aa.headerArrowClassName,function(T){T.attr("text-anchor","end").call(hm.font,a.font).text(aa.arrowSymbol[a.direction])});b.attr({x:l.headerWidth-aa.arrowOffsetX+a.pad.l,y:l.headerHeight/2+aa.textOffsetY+a.pad.t}),s.on("click",function(){r.call(yT,String(aO(r,a)?-1:a._index)),Wg(e,t,r,i,a)}),s.on("mouseover",function(){s.call(nO)}),s.on("mouseout",function(){s.call(oO,a)}),hm.setTranslate(t,l.lx,l.ly)}function Wg(e,t,r,i,a){r||(r=t,r.attr("pointer-events","all"));var s=!tce(r)||a.type==="buttons"?a.buttons:[],l=a.type==="dropdown"?aa.dropdownButtonClassName:aa.buttonClassName,f=r.selectAll("g."+l).data(cl.filterVisible(s)),h=f.enter().append("g").classed(l,!0),v=f.exit();a.type==="dropdown"?(h.attr("opacity","0").transition().attr("opacity","1"),v.transition().attr("opacity","0").remove()):v.remove();var m=0,b=0,T=a._dims,S=["up","down"].indexOf(a.direction)!==-1;a.type==="dropdown"&&(S?b=T.headerHeight+aa.gapButtonHeader:m=T.headerWidth+aa.gapButtonHeader),a.type==="dropdown"&&a.direction==="up"&&(b=-aa.gapButtonHeader+aa.gapButton-T.openHeight),a.type==="dropdown"&&a.direction==="left"&&(m=-aa.gapButtonHeader+aa.gapButton-T.openWidth);var C={x:T.lx+m+a.pad.l,y:T.ly+b+a.pad.t,yPad:aa.gapButton,xPad:aa.gapButton,index:0},P={l:C.x+a.borderwidth,t:C.y+a.borderwidth};f.each(function(E,I){var q=cm.select(this);q.call(gT,a,E,e).call(lO,a,C),q.on("click",function(){cm.event.defaultPrevented||(E.execute&&(E.args2&&a.active===I?(mT(e,a,E,t,r,i,-1),Zg.executeAPICommand(e,E.method,E.args2)):(mT(e,a,E,t,r,i,I),Zg.executeAPICommand(e,E.method,E.args))),e.emit("plotly_buttonclicked",{menu:a,button:E,active:a.active}))}),q.on("mouseover",function(){q.call(nO)}),q.on("mouseout",function(){q.call(oO,a),f.call(tO,a)})}),f.call(tO,a),S?(P.w=Math.max(T.openWidth,T.headerWidth),P.h=C.y-P.t):(P.w=C.x-P.l,P.h=Math.max(T.openHeight,T.headerHeight)),P.direction=a.direction,i&&(f.size()?rce(e,t,r,i,a,P):ace(i))}function rce(e,t,r,i,a,s){var l=a.direction,f=l==="up"||l==="down",h=a._dims,v=a.active,m,b,T;if(f)for(b=0,T=0;T<v;T++)b+=h.heights[T]+aa.gapButton;else for(m=0,T=0;T<v;T++)m+=h.widths[T]+aa.gapButton;i.enable(s,m,b),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}function ace(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function gT(e,t,r,i){e.call(ice,t).call(nce,t,r,i)}function ice(e,t){var r=cl.ensureSingle(e,"rect",aa.itemRectClassName,function(i){i.attr({rx:aa.rx,ry:aa.ry,"shape-rendering":"crispEdges"})});r.call(Yg.stroke,t.bordercolor).call(Yg.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function nce(e,t,r,i){var a=cl.ensureSingle(e,"text",aa.itemTextClassName,function(f){f.attr({"text-anchor":"start","data-notex":1})}),s=r.label,l=i._fullLayout._meta;l&&(s=cl.templateString(s,l)),a.call(hm.font,t.font).text(s).call(nb.convertToTspans,i)}function tO(e,t){var r=t.active;e.each(function(i,a){var s=cm.select(this);a===r&&t.showactive&&s.select("rect."+aa.itemRectClassName).call(Yg.fill,aa.activeColor)})}function nO(e){e.select("rect."+aa.itemRectClassName).call(Yg.fill,aa.hoverColor)}function oO(e,t){e.select("rect."+aa.itemRectClassName).call(Yg.fill,t.bgcolor)}function oce(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=hm.tester.selectAll("g."+aa.dropdownButtonClassName).data(cl.filterVisible(t.buttons));i.enter().append("g").classed(aa.dropdownButtonClassName,!0);var a=["up","down"].indexOf(t.direction)!==-1;i.each(function(m,b){var T=cm.select(this);T.call(gT,t,m,e);var S=T.select("."+aa.itemTextClassName),C=S.node()&&hm.bBox(S.node()).width,P=Math.max(C+aa.textPadX,aa.minWidth),E=t.font.size*rO,I=nb.lineCount(S),q=Math.max(E*I,aa.minHeight)+aa.textOffsetY;q=Math.ceil(q),P=Math.ceil(P),r.widths[b]=P,r.heights[b]=q,r.height1=Math.max(r.height1,q),r.width1=Math.max(r.width1,P),a?(r.totalWidth=Math.max(r.totalWidth,P),r.openWidth=r.totalWidth,r.totalHeight+=q+aa.gapButton,r.openHeight+=q+aa.gapButton):(r.totalWidth+=P+aa.gapButton,r.openWidth+=P+aa.gapButton,r.totalHeight=Math.max(r.totalHeight,q),r.openHeight=r.totalHeight)}),a?r.totalHeight-=aa.gapButton:r.totalWidth-=aa.gapButton,r.headerWidth=r.width1+aa.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(a?(r.width1+=aa.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=aa.arrowPadX),i.remove();var s=r.totalWidth+t.pad.l+t.pad.r,l=r.totalHeight+t.pad.t+t.pad.b,f=e._fullLayout._size;r.lx=f.l+f.w*t.x,r.ly=f.t+f.h*(1-t.y);var h="left";cl.isRightAnchor(t)&&(r.lx-=s,h="right"),cl.isCenterAnchor(t)&&(r.lx-=s/2,h="center");var v="top";cl.isBottomAnchor(t)&&(r.ly-=l,v="bottom"),cl.isMiddleAnchor(t)&&(r.ly-=l/2,v="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),Zg.autoMargin(e,sO(t),{x:t.x,y:t.y,l:s*({right:1,center:.5}[h]||0),r:s*({left:1,center:.5}[h]||0),b:l*({top:1,middle:.5}[v]||0),t:l*({bottom:1,middle:.5}[v]||0)})}function sO(e){return aa.autoMarginIdRoot+e._index}function lO(e,t,r,i){i=i||{};var a=e.select("."+aa.itemRectClassName),s=e.select("."+aa.itemTextClassName),l=t.borderwidth,f=r.index,h=t._dims;hm.setTranslate(e,l+r.x,l+r.y);var v=["up","down"].indexOf(t.direction)!==-1,m=i.height||(v?h.heights[f]:h.height1);a.attr({x:0,y:0,width:i.width||(v?h.width1:h.widths[f]),height:m});var b=t.font.size*rO,T=nb.lineCount(s),S=(T-1)*b/2;nb.positionText(s,aa.textOffsetX,m/2-S+aa.textOffsetY),v?r.y+=h.heights[f]+r.yPad:r.x+=h.widths[f]+r.xPad,r.index++}function yT(e,t){e.attr(aa.menuIndexAttrName,t||"-1").selectAll("g."+aa.dropdownButtonClassName).remove()}});var hO=ve((cxe,cO)=>{"use strict";var sce=rb();cO.exports={moduleType:"component",name:sce.name,layoutAttributes:pT(),supplyLayoutDefaults:KB(),draw:fO()}});var Xg=ve((hxe,vO)=>{"use strict";vO.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}});var _T=ve((vxe,mO)=>{"use strict";var dO=qo(),lce=l_(),uce=hn().extendDeepAll,fce=il().overrideAll,cce=ky(),pO=Di().templatedArray,Nd=Xg(),hce=pO("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});mO.exports=fce(pO("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:hce,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:uce(lce({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:cce.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:dO({})},font:dO({}),activebgcolor:{valType:"color",dflt:Nd.gripBgActiveColor},bgcolor:{valType:"color",dflt:Nd.railBgColor},bordercolor:{valType:"color",dflt:Nd.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Nd.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Nd.tickLength},tickcolor:{valType:"color",dflt:Nd.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Nd.minorTickLength}}),"arraydraw","from-root")});var xO=ve((dxe,_O)=>{"use strict";var vm=Ft(),yO=Yl(),gO=_T(),vce=Xg(),dce=vce.name,pce=gO.steps;_O.exports=function(t,r){yO(t,r,{name:dce,handleItemDefaults:mce})};function mce(e,t,r){function i(b,T){return vm.coerce(e,t,gO,b,T)}for(var a=yO(e,t,{name:"steps",handleItemDefaults:yce}),s=0,l=0;l<a.length;l++)a[l].visible&&s++;var f;if(s<2?f=t.visible=!1:f=i("visible"),!!f){t._stepCount=s;var h=t._visibleSteps=vm.filterVisible(a),v=i("active");(a[v]||{}).visible||(t.active=h[0]._index),i("x"),i("y"),vm.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),vm.coerceFont(i,"font",r.font);var m=i("currentvalue.visible");m&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),vm.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function yce(e,t){function r(s,l){return vm.coerce(e,t,pce,s,l)}var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=t.visible=!1:i=r("visible"),i){r("method"),r("args");var a=r("label","step-"+t._index);r("value",a),r("execute")}}});var LO=ve((pxe,EO)=>{"use strict";var Zu=ja(),ob=eo(),Jh=Ua(),Yu=_i(),hl=Ft(),gce=hl.strTranslate,jg=co(),_ce=Di().arrayEditor,ba=Xg(),wT=ts(),TO=wT.LINE_SPACING,xT=wT.FROM_TL,bT=wT.FROM_BR;EO.exports=function(t){var r=t._context.staticPlot,i=t._fullLayout,a=xce(i,t),s=i._infolayer.selectAll("g."+ba.containerClassName).data(a.length>0?[0]:[]);s.enter().append("g").classed(ba.containerClassName,!0).style("cursor",r?null:"ew-resize");function l(m){m._commandObserver&&(m._commandObserver.remove(),delete m._commandObserver),ob.autoMargin(t,AO(m))}if(s.exit().each(function(){Zu.select(this).selectAll("g."+ba.groupClassName).each(l)}).remove(),a.length!==0){var f=s.selectAll("g."+ba.groupClassName).data(a,bce);f.enter().append("g").classed(ba.groupClassName,!0),f.exit().each(l).remove();for(var h=0;h<a.length;h++){var v=a[h];wce(t,v)}f.each(function(m){var b=Zu.select(this);kce(m),ob.manageCommandObserver(t,m,m._visibleSteps,function(T){var S=b.data()[0];S.active!==T.index&&(S._dragging||SO(t,b,S,T.index,!1,!0))}),Tce(t,Zu.select(this),m)})}};function AO(e){return ba.autoMarginIdRoot+e._index}function xce(e,t){for(var r=e[ba.name],i=[],a=0;a<r.length;a++){var s=r[a];s.visible&&(s._gd=t,i.push(s))}return i}function bce(e){return e._index}function wce(e,t){var r=Yu.tester.selectAll("g."+ba.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(ba.labelGroupClass,!0);var i=0,a=0;r.each(function(C){var P=Zu.select(this),E=MO(P,{step:C},t),I=E.node();if(I){var q=Yu.bBox(I);a=Math.max(a,q.height),i=Math.max(i,q.width)}}),r.remove();var s=t._dims={};s.inputAreaWidth=Math.max(ba.railWidth,ba.gripHeight);var l=e._fullLayout._size;s.lx=l.l+l.w*t.x,s.ly=l.t+l.h*(1-t.y),t.lenmode==="fraction"?s.outerLength=Math.round(l.w*t.len):s.outerLength=t.len,s.inputAreaStart=0,s.inputAreaLength=Math.round(s.outerLength-t.pad.l-t.pad.r);var f=s.inputAreaLength-2*ba.stepInset,h=f/(t._stepCount-1),v=i+ba.labelPadding;if(s.labelStride=Math.max(1,Math.ceil(v/h)),s.labelHeight=a,s.currentValueMaxWidth=0,s.currentValueHeight=0,s.currentValueTotalHeight=0,s.currentValueMaxLines=1,t.currentvalue.visible){var m=Yu.tester.append("g");r.each(function(C){var P=sb(m,t,C.label),E=P.node()&&Yu.bBox(P.node())||{width:0,height:0},I=jg.lineCount(P);s.currentValueMaxWidth=Math.max(s.currentValueMaxWidth,Math.ceil(E.width)),s.currentValueHeight=Math.max(s.currentValueHeight,Math.ceil(E.height)),s.currentValueMaxLines=Math.max(s.currentValueMaxLines,I)}),s.currentValueTotalHeight=s.currentValueHeight+t.currentvalue.offset,m.remove()}s.height=s.currentValueTotalHeight+ba.tickOffset+t.ticklen+ba.labelOffset+s.labelHeight+t.pad.t+t.pad.b;var b="left";hl.isRightAnchor(t)&&(s.lx-=s.outerLength,b="right"),hl.isCenterAnchor(t)&&(s.lx-=s.outerLength/2,b="center");var T="top";hl.isBottomAnchor(t)&&(s.ly-=s.height,T="bottom"),hl.isMiddleAnchor(t)&&(s.ly-=s.height/2,T="middle"),s.outerLength=Math.ceil(s.outerLength),s.height=Math.ceil(s.height),s.lx=Math.round(s.lx),s.ly=Math.round(s.ly);var S={y:t.y,b:s.height*bT[T],t:s.height*xT[T]};t.lenmode==="fraction"?(S.l=0,S.xl=t.x-t.len*xT[b],S.r=0,S.xr=t.x+t.len*bT[b]):(S.x=t.x,S.l=s.outerLength*xT[b],S.r=s.outerLength*bT[b]),ob.autoMargin(e,AO(t),S)}function Tce(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(sb,r).call(Ece,r).call(Mce,r).call(Sce,r).call(Cce,e,r).call(Ace,e,r);var i=r._dims;Yu.setTranslate(t,i.lx+r.pad.l,i.ly+r.pad.t),t.call(CO,r,!1),t.call(sb,r)}function sb(e,t,r){if(t.currentvalue.visible){var i=t._dims,a,s;switch(t.currentvalue.xanchor){case"right":a=i.inputAreaLength-ba.currentValueInset-i.currentValueMaxWidth,s="left";break;case"center":a=i.inputAreaLength*.5,s="middle";break;default:a=ba.currentValueInset,s="left"}var l=hl.ensureSingle(e,"text",ba.labelClass,function(T){T.attr({"text-anchor":s,"data-notex":1})}),f=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")f+=r;else{var h=t.steps[t.active].label,v=t._gd._fullLayout._meta;v&&(h=hl.templateString(h,v)),f+=h}t.currentvalue.suffix&&(f+=t.currentvalue.suffix),l.call(Yu.font,t.currentvalue.font).text(f).call(jg.convertToTspans,t._gd);var m=jg.lineCount(l),b=(i.currentValueMaxLines+1-m)*t.currentvalue.font.size*TO;return jg.positionText(l,a,b),l}}function Ace(e,t,r){var i=hl.ensureSingle(e,"rect",ba.gripRectClass,function(a){a.call(kO,t,e,r).style("pointer-events","all")});i.attr({width:ba.gripWidth,height:ba.gripHeight,rx:ba.gripRadius,ry:ba.gripRadius}).call(Jh.stroke,r.bordercolor).call(Jh.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function MO(e,t,r){var i=hl.ensureSingle(e,"text",ba.labelClass,function(l){l.attr({"text-anchor":"middle","data-notex":1})}),a=t.step.label,s=r._gd._fullLayout._meta;return s&&(a=hl.templateString(a,s)),i.call(Yu.font,r.font).text(a).call(jg.convertToTspans,r._gd),i}function Mce(e,t){var r=hl.ensureSingle(e,"g",ba.labelsClass),i=t._dims,a=r.selectAll("g."+ba.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(ba.labelGroupClass,!0),a.exit().remove(),a.each(function(s){var l=Zu.select(this);l.call(MO,s,t),Yu.setTranslate(l,TT(t,s.fraction),ba.tickOffset+t.ticklen+t.font.size*TO+ba.labelOffset+i.currentValueTotalHeight)})}function bO(e,t,r,i,a){var s=Math.round(i*(r._stepCount-1)),l=r._visibleSteps[s]._index;l!==r.active&&SO(e,t,r,l,!0,a)}function SO(e,t,r,i,a,s){var l=r.active;r.active=i,_ce(e.layout,ba.name,r).applyUpdate("active",i);var f=r.steps[r.active];t.call(CO,r,s),t.call(sb,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:a,previousActive:l}),f&&f.method&&a&&(t._nextMethod?(t._nextMethod.step=f,t._nextMethod.doCallback=a,t._nextMethod.doTransition=s):(t._nextMethod={step:f,doCallback:a,doTransition:s},t._nextMethodRaf=window.requestAnimationFrame(function(){var h=t._nextMethod.step;h.method&&(h.execute&&ob.executeAPICommand(e,h.method,h.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function kO(e,t,r){if(t._context.staticPlot)return;var i=r.node(),a=Zu.select(t);function s(){return r.data()[0]}function l(){var f=s();t.emit("plotly_sliderstart",{slider:f});var h=r.select("."+ba.gripRectClass);Zu.event.stopPropagation(),Zu.event.preventDefault(),h.call(Jh.fill,f.activebgcolor);var v=wO(f,Zu.mouse(i)[0]);bO(t,r,f,v,!0),f._dragging=!0;function m(){var T=s(),S=wO(T,Zu.mouse(i)[0]);bO(t,r,T,S,!1)}a.on("mousemove",m),a.on("touchmove",m);function b(){var T=s();T._dragging=!1,h.call(Jh.fill,T.bgcolor),a.on("mouseup",null),a.on("mousemove",null),a.on("touchend",null),a.on("touchmove",null),t.emit("plotly_sliderend",{slider:T,step:T.steps[T.active]})}a.on("mouseup",b),a.on("touchend",b)}e.on("mousedown",l),e.on("touchstart",l)}function Sce(e,t){var r=e.selectAll("rect."+ba.tickRectClass).data(t._visibleSteps),i=t._dims;r.enter().append("rect").classed(ba.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(a,s){var l=s%i.labelStride===0,f=Zu.select(this);f.attr({height:l?t.ticklen:t.minorticklen}).call(Jh.fill,t.tickcolor),Yu.setTranslate(f,TT(t,s/(t._stepCount-1))-.5*t.tickwidth,(l?ba.tickOffset:ba.minorTickOffset)+i.currentValueTotalHeight)})}function kce(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,i=0;i<r;i+=t.labelStride)t.labelSteps.push({fraction:i/(r-1),step:e._visibleSteps[i]})}function CO(e,t,r){for(var i=e.select("rect."+ba.gripRectClass),a=0,s=0;s<t._stepCount;s++)if(t._visibleSteps[s]._index===t.active){a=s;break}var l=TT(t,a/(t._stepCount-1));if(!t._invokingCommand){var f=i;r&&t.transition.duration>0&&(f=f.transition().duration(t.transition.duration).ease(t.transition.easing)),f.attr("transform",gce(l-ba.gripWidth*.5,t._dims.currentValueTotalHeight))}}function TT(e,t){var r=e._dims;return r.inputAreaStart+ba.stepInset+(r.inputAreaLength-2*ba.stepInset)*Math.min(1,Math.max(0,t))}function wO(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-ba.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*ba.stepInset-2*r.inputAreaStart)))}function Cce(e,t,r){var i=r._dims,a=hl.ensureSingle(e,"rect",ba.railTouchRectClass,function(s){s.call(kO,t,e,r).style("pointer-events","all")});a.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,ba.tickOffset+r.ticklen+i.labelHeight)}).call(Jh.fill,r.bgcolor).attr("opacity",0),Yu.setTranslate(a,0,i.currentValueTotalHeight)}function Ece(e,t){var r=t._dims,i=r.inputAreaLength-ba.railInset*2,a=hl.ensureSingle(e,"rect",ba.railRectClass);a.attr({width:i,height:ba.railWidth,rx:ba.railRadius,ry:ba.railRadius,"shape-rendering":"crispEdges"}).call(Jh.stroke,t.bordercolor).call(Jh.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),Yu.setTranslate(a,ba.railInset,(r.inputAreaWidth-ba.railWidth)*.5+r.currentValueTotalHeight)}});var DO=ve((mxe,PO)=>{"use strict";var Lce=Xg();PO.exports={moduleType:"component",name:Lce.name,layoutAttributes:_T(),supplyLayoutDefaults:xO(),draw:LO()}});var lb=ve((yxe,IO)=>{"use strict";var zO=Tf();IO.exports={bgcolor:{valType:"color",dflt:zO.background,editType:"plot"},bordercolor:{valType:"color",dflt:zO.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}});var AT=ve((gxe,RO)=>{"use strict";RO.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}});var ub=ve((_xe,FO)=>{"use strict";FO.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}});var BO=ve(cb=>{"use strict";var Pce=$n(),Dce=co(),qO=ub(),zce=ts().LINE_SPACING,fb=qO.name;function NO(e){var t=e&&e[fb];return t&&t.visible}cb.isVisible=NO;cb.makeData=function(e){for(var t=Pce.list({_fullLayout:e},"x",!0),r=e.margin,i=[],a=0;a<t.length;a++){var s=t[a];if(NO(s)){i.push(s);var l=s[fb];l._id=fb+s._id,l._height=(e.height-r.b-r.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}e._rangeSliderData=i};cb.autoMarginOpts=function(e,t){var r=e._fullLayout,i=t[fb],a=t._id.charAt(0),s=0,l=0;if(t.side==="bottom"&&(s=t._depth,t.title.text!==r._dfltTitle[a])){l=1.5*t.title.font.size+10+i._offsetShift;var f=(t.title.text.match(Dce.BR_TAG_ALL)||[]).length;l+=f*t.title.font.size*zce}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+s+Math.max(r.margin.b,l),pad:qO.extraPad+i._offsetShift*2}}});var HO=ve((bxe,VO)=>{"use strict";var hb=Ft(),OO=Di(),UO=$n(),Ice=lb(),Rce=AT();VO.exports=function(t,r,i){var a=t[i],s=r[i];if(!(a.rangeslider||r._requestRangeslider[s._id]))return;hb.isPlainObject(a.rangeslider)||(a.rangeslider={});var l=a.rangeslider,f=OO.newContainer(s,"rangeslider");function h(O,H){return hb.coerce(l,f,Ice,O,H)}var v,m;function b(O,H){return hb.coerce(v,m,Rce,O,H)}var T=h("visible");if(T){h("bgcolor",r.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!s.isValidRange(l.range)),h("range");var S=r._subplots;if(S)for(var C=S.cartesian.filter(function(O){return O.substr(0,O.indexOf("y"))===UO.name2id(i)}).map(function(O){return O.substr(O.indexOf("y"),O.length)}),P=hb.simpleMap(C,UO.id2name),E=0;E<P.length;E++){var I=P[E];v=l[I]||{},m=OO.newContainer(f,I,"yaxis");var q=r[I],B;v.range&&q.isValidRange(v.range)&&(B="fixed");var z=b("rangemode",B);z!=="match"&&b("range",q.range.slice())}f._input=l}}});var ZO=ve((wxe,GO)=>{"use strict";var Fce=$n().list,qce=Zy().getAutoRange,Nce=ub();GO.exports=function(t){for(var r=Fce(t,"x",!0),i=0;i<r.length;i++){var a=r[i],s=a[Nce.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=qce(t,a))}}});var jO=ve((Txe,XO)=>{"use strict";var vb=ja(),Bce=la(),Oce=eo(),mn=Ft(),db=mn.strTranslate,WO=_i(),Kh=Ua(),Uce=Hy(),Vce=Q6(),MT=$n(),Hce=Xl(),Gce=Bh(),Ra=ub();XO.exports=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,i=0;i<r.length;i++){var a=r[i][Ra.name];a._clipId=a._id+"-"+t._uid}function s(f){return f._name}var l=t._infolayer.selectAll("g."+Ra.containerClassName).data(r,s);l.exit().each(function(f){var h=f[Ra.name];t._topdefs.select("#"+h._clipId).remove()}).remove(),r.length!==0&&(l.enter().append("g").classed(Ra.containerClassName,!0).attr("pointer-events","all"),l.each(function(f){var h=vb.select(this),v=f[Ra.name],m=t[MT.id2name(f.anchor)],b=v[MT.id2name(f.anchor)];if(v.range){var T=mn.simpleMap(v.range,f.r2l),S=mn.simpleMap(f.range,f.r2l),C;S[0]<S[1]?C=[Math.min(T[0],S[0]),Math.max(T[1],S[1])]:C=[Math.max(T[0],S[0]),Math.min(T[1],S[1])],v.range=v._input.range=mn.simpleMap(C,f.l2r)}f.cleanRange("rangeslider.range");var P=t._size,E=f.domain;v._width=P.w*(E[1]-E[0]);var I=Math.round(P.l+P.w*E[0]),q=Math.round(P.t+P.h*(1-f._counterDomainMin)+(f.side==="bottom"?f._depth:0)+v._offsetShift+Ra.extraPad);h.attr("transform",db(I,q)),v._rl=mn.simpleMap(v.range,f.r2l);var B=v._rl[0],z=v._rl[1],O=z-B;if(v.p2d=function(Ee){return Ee/v._width*O+B},v.d2p=function(Ee){return(Ee-B)/O*v._width},f.rangebreaks){var H=f.locateBreaks(B,z);if(H.length){var V,W,K=0;for(V=0;V<H.length;V++)W=H[V],K+=W.max-W.min;var re=v._width/(z-B-K),oe=[-re*B];for(V=0;V<H.length;V++)W=H[V],oe.push(oe[oe.length-1]-re*(W.max-W.min));for(v.d2p=function(Ee){for(var ke=oe[0],Te=0;Te<H.length;Te++){var ye=H[Te];if(Ee>=ye.max)ke=oe[Te+1];else if(Ee<ye.min)break}return ke+re*Ee},V=0;V<H.length;V++)W=H[V],W.pmin=v.d2p(W.min),W.pmax=v.d2p(W.max);v.p2d=function(Ee){for(var ke=oe[0],Te=0;Te<H.length;Te++){var ye=H[Te];if(Ee>=ye.pmax)ke=oe[Te+1];else if(Ee<ye.pmin)break}return(Ee-ke)/re}}}if(b.rangemode!=="match"){var ne=m.r2l(b.range[0]),he=m.r2l(b.range[1]),de=he-ne;v.d2pOppAxis=function(Ee){return(Ee-ne)/de*v._height}}h.call(Xce,e,f,v).call(jce,e,f,v).call(Jce,e,f,v).call(Qce,e,f,v,b).call($ce,e,f,v).call(ehe,e,f,v),Zce(h,e,f,v),Wce(h,e,f,v,m,b),f.side==="bottom"&&Uce.draw(e,f._id+"title",{propContainer:f,propName:f._name+".title",placeholder:t._dfltTitle.x,attributes:{x:f._offset+f._length/2,y:q+v._height+v._offsetShift+10+1.5*f.title.font.size,"text-anchor":"middle"}})}))};function YO(e){return typeof e.clientX=="number"?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function Zce(e,t,r,i){if(t._context.staticPlot)return;var a=e.select("rect."+Ra.slideBoxClassName).node(),s=e.select("rect."+Ra.grabAreaMinClassName).node(),l=e.select("rect."+Ra.grabAreaMaxClassName).node();function f(){var h=vb.event,v=h.target,m=YO(h),b=m-e.node().getBoundingClientRect().left,T=i.d2p(r._rl[0]),S=i.d2p(r._rl[1]),C=Hce.coverSlip();this.addEventListener("touchmove",P),this.addEventListener("touchend",E),C.addEventListener("mousemove",P),C.addEventListener("mouseup",E);function P(I){var q=YO(I),B=+q-m,z,O,H;switch(v){case a:if(H="ew-resize",T+B>r._length||S+B<0)return;z=T+B,O=S+B;break;case s:if(H="col-resize",T+B>r._length)return;z=T+B,O=S;break;case l:if(H="col-resize",S+B<0)return;z=T,O=S+B;break;default:H="ew-resize",z=b,O=b+B;break}if(O<z){var V=O;O=z,z=V}i._pixelMin=z,i._pixelMax=O,Gce(vb.select(C),H),Yce(e,t,r,i)}function E(){C.removeEventListener("mousemove",P),C.removeEventListener("mouseup",E),this.removeEventListener("touchmove",P),this.removeEventListener("touchend",E),mn.removeElement(C)}}e.on("mousedown",f),e.on("touchstart",f)}function Yce(e,t,r,i){function a(f){return r.l2r(mn.constrain(f,i._rl[0],i._rl[1]))}var s=a(i.p2d(i._pixelMin)),l=a(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){Bce.call("_guiRelayout",t,r._name+".range",[s,l])})}function Wce(e,t,r,i,a,s){var l=Ra.handleWidth/2;function f(I){return mn.constrain(I,0,i._width)}function h(I){return mn.constrain(I,0,i._height)}function v(I){return mn.constrain(I,-l,i._width+l)}var m=f(i.d2p(r._rl[0])),b=f(i.d2p(r._rl[1]));if(e.select("rect."+Ra.slideBoxClassName).attr("x",m).attr("width",b-m),e.select("rect."+Ra.maskMinClassName).attr("width",m),e.select("rect."+Ra.maskMaxClassName).attr("x",b).attr("width",i._width-b),s.rangemode!=="match"){var T=i._height-h(i.d2pOppAxis(a._rl[1])),S=i._height-h(i.d2pOppAxis(a._rl[0]));e.select("rect."+Ra.maskMinOppAxisClassName).attr("x",m).attr("height",T).attr("width",b-m),e.select("rect."+Ra.maskMaxOppAxisClassName).attr("x",m).attr("y",S).attr("height",i._height-S).attr("width",b-m),e.select("rect."+Ra.slideBoxClassName).attr("y",T).attr("height",S-T)}var C=.5,P=Math.round(v(m-l))-C,E=Math.round(v(b-l))+C;e.select("g."+Ra.grabberMinClassName).attr("transform",db(P,C)),e.select("g."+Ra.grabberMaxClassName).attr("transform",db(E,C))}function Xce(e,t,r,i){var a=mn.ensureSingle(e,"rect",Ra.bgClassName,function(h){h.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),s=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,l=-i._offsetShift,f=WO.crispRound(t,i.borderwidth);a.attr({width:i._width+s,height:i._height+s,transform:db(l,l),"stroke-width":f}).call(Kh.stroke,i.bordercolor).call(Kh.fill,i.bgcolor)}function jce(e,t,r,i){var a=t._fullLayout,s=mn.ensureSingleById(a._topdefs,"clipPath",i._clipId,function(l){l.append("rect").attr({x:0,y:0})});s.select("rect").attr({width:i._width,height:i._height})}function Jce(e,t,r,i){var a=t.calcdata,s=e.selectAll("g."+Ra.rangePlotClassName).data(r._subplotsWith,mn.identity);s.enter().append("g").attr("class",function(f){return Ra.rangePlotClassName+" "+f}).call(WO.setClipUrl,i._clipId,t),s.order(),s.exit().remove();var l;s.each(function(f,h){var v=vb.select(this),m=h===0,b=MT.getFromId(t,f,"y"),T=b._name,S=i[T],C={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(C.layout.xaxis.rangebreaks=r.rangebreaks),C.layout[T]={type:b.type,domain:[0,1],range:S.rangemode!=="match"?S.range.slice():b.range.slice(),calendar:b.calendar},b.rangebreaks&&(C.layout[T].rangebreaks=b.rangebreaks),Oce.supplyDefaults(C);var P=C._fullLayout.xaxis,E=C._fullLayout[T];P.clearCalc(),P.setScale(),E.clearCalc(),E.setScale();var I={id:f,plotgroup:v,xaxis:P,yaxis:E,isRangePlot:!0};m?l=I:(I.mainplot="xy",I.mainplotinfo=l),Vce.rangePlot(t,I,Kce(a,f))})}function Kce(e,t){for(var r=[],i=0;i<e.length;i++){var a=e[i],s=a[0].trace;s.xaxis+s.yaxis===t&&r.push(a)}return r}function Qce(e,t,r,i,a){var s=mn.ensureSingle(e,"rect",Ra.maskMinClassName,function(v){v.attr({x:0,y:0,"shape-rendering":"crispEdges"})});s.attr("height",i._height).call(Kh.fill,Ra.maskColor);var l=mn.ensureSingle(e,"rect",Ra.maskMaxClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});if(l.attr("height",i._height).call(Kh.fill,Ra.maskColor),a.rangemode!=="match"){var f=mn.ensureSingle(e,"rect",Ra.maskMinOppAxisClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});f.attr("width",i._width).call(Kh.fill,Ra.maskOppAxisColor);var h=mn.ensureSingle(e,"rect",Ra.maskMaxOppAxisClassName,function(v){v.attr({y:0,"shape-rendering":"crispEdges"})});h.attr("width",i._width).style("border-top",Ra.maskOppBorder).call(Kh.fill,Ra.maskOppAxisColor)}}function $ce(e,t,r,i){if(!t._context.staticPlot){var a=mn.ensureSingle(e,"rect",Ra.slideBoxClassName,function(s){s.attr({y:0,cursor:Ra.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:i._height,fill:Ra.slideBoxFill})}}function ehe(e,t,r,i){var a=mn.ensureSingle(e,"g",Ra.grabberMinClassName),s=mn.ensureSingle(e,"g",Ra.grabberMaxClassName),l={x:0,width:Ra.handleWidth,rx:Ra.handleRadius,fill:Kh.background,stroke:Kh.defaultLine,"stroke-width":Ra.handleStrokeWidth,"shape-rendering":"crispEdges"},f={y:Math.round(i._height/4),height:Math.round(i._height/2)},h=mn.ensureSingle(a,"rect",Ra.handleMinClassName,function(S){S.attr(l)});h.attr(f);var v=mn.ensureSingle(s,"rect",Ra.handleMaxClassName,function(S){S.attr(l)});v.attr(f);var m={width:Ra.grabAreaWidth,x:0,y:0,fill:Ra.grabAreaFill,cursor:t._context.staticPlot?void 0:Ra.grabAreaCursor},b=mn.ensureSingle(a,"rect",Ra.grabAreaMinClassName,function(S){S.attr(m)});b.attr("height",i._height);var T=mn.ensureSingle(s,"rect",Ra.grabAreaMaxClassName,function(S){S.attr(m)});T.attr("height",i._height)}});var KO=ve((Axe,JO)=>{"use strict";var the=Ft(),rhe=lb(),ahe=AT(),ST=BO();JO.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:the.extendFlat({},rhe,{yaxis:ahe})}}},layoutAttributes:lb(),handleDefaults:HO(),calcAutorange:ZO(),draw:jO(),isVisible:ST.isVisible,makeData:ST.makeData,autoMarginOpts:ST.autoMarginOpts}});var pb=ve((Mxe,$O)=>{"use strict";var ihe=qo(),QO=Tf(),nhe=Di().templatedArray,ohe=nhe("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$O.exports={visible:{valType:"boolean",editType:"plot"},buttons:ohe,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:ihe({editType:"plot"}),bgcolor:{valType:"color",dflt:QO.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:QO.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}});var kT=ve((Sxe,eU)=>{"use strict";eU.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}});var aU=ve((kxe,rU)=>{"use strict";var mb=Ft(),she=Ua(),lhe=Di(),uhe=Yl(),tU=pb(),CT=kT();rU.exports=function(t,r,i,a,s){var l=t.rangeselector||{},f=lhe.newContainer(r,"rangeselector");function h(S,C){return mb.coerce(l,f,tU,S,C)}var v=uhe(l,f,{name:"buttons",handleItemDefaults:fhe,calendar:s}),m=h("visible",v.length>0);if(m){var b=che(r,i,a);h("x",b[0]),h("y",b[1]),mb.noneOrAll(t,r,["x","y"]),h("xanchor"),h("yanchor"),mb.coerceFont(h,"font",i.font);var T=h("bgcolor");h("activecolor",she.contrast(T,CT.lightAmount,CT.darkAmount)),h("bordercolor"),h("borderwidth")}};function fhe(e,t,r,i){var a=i.calendar;function s(h,v){return mb.coerce(e,t,tU.buttons,h,v)}var l=s("visible");if(l){var f=s("step");f!=="all"&&(a&&a!=="gregorian"&&(f==="month"||f==="year")?t.stepmode="backward":s("stepmode"),s("count")),s("label")}}function che(e,t,r){for(var i=r.filter(function(f){return t[f].anchor===e._id}),a=0,s=0;s<i.length;s++){var l=t[i[s]].domain;l&&(a=Math.max(l[1],a))}return[e.domain[0],a+CT.yPad]}});var nU=ve((Cxe,iU)=>{"use strict";var hhe=L3(),vhe=Ft().titleCase;iU.exports=function(t,r){var i=t._name,a={};if(r.step==="all")a[i+".autorange"]=!0;else{var s=dhe(t,r);a[i+".range[0]"]=s[0],a[i+".range[1]"]=s[1]}return a};function dhe(e,t){var r=e.range,i=new Date(e.r2l(r[1])),a=t.step,s=hhe["utc"+vhe(a)],l=t.count,f;switch(t.stepmode){case"backward":f=e.l2r(+s.offset(i,-l));break;case"todate":var h=s.offset(i,-l);f=e.l2r(+s.ceil(h));break}var v=r[1];return[f,v]}});var vU=ve((Exe,hU)=>{"use strict";var gb=ja(),phe=la(),mhe=eo(),oU=Ua(),cU=_i(),Ec=Ft(),sU=Ec.strTranslate,yb=co(),yhe=$n(),PT=ts(),lU=PT.LINE_SPACING,uU=PT.FROM_TL,fU=PT.FROM_BR,LT=kT(),ghe=nU();hU.exports=function(t){var r=t._fullLayout,i=r._infolayer.selectAll(".rangeselector").data(_he(t),xhe);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(a){var s=gb.select(this),l=a,f=l.rangeselector,h=s.selectAll("g.button").data(Ec.filterVisible(f.buttons));h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(v){var m=gb.select(this),b=ghe(l,v);v._isActive=bhe(l,v,b),m.call(ET,f,v),m.call(The,f,v,t),m.on("click",function(){t._dragged||phe.call("_guiRelayout",t,b)}),m.on("mouseover",function(){v._isHovered=!0,m.call(ET,f,v)}),m.on("mouseout",function(){v._isHovered=!1,m.call(ET,f,v)})}),Mhe(t,h,f,l._name,s)})};function _he(e){for(var t=yhe.list(e,"x",!0),r=[],i=0;i<t.length;i++){var a=t[i];a.rangeselector&&a.rangeselector.visible&&r.push(a)}return r}function xhe(e){return e._id}function bhe(e,t,r){if(t.step==="all")return e.autorange===!0;var i=Object.keys(r);return e.range[0]===r[i[0]]&&e.range[1]===r[i[1]]}function ET(e,t,r){var i=Ec.ensureSingle(e,"rect","selector-rect",function(a){a.attr("shape-rendering","crispEdges")});i.attr({rx:LT.rx,ry:LT.ry}),i.call(oU.stroke,t.bordercolor).call(oU.fill,whe(t,r)).style("stroke-width",t.borderwidth+"px")}function whe(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function The(e,t,r,i){function a(l){yb.convertToTspans(l,i)}var s=Ec.ensureSingle(e,"text","selector-text",function(l){l.attr("text-anchor","middle")});s.call(cU.font,t.font).text(Ahe(r,i._fullLayout._meta)).call(a)}function Ahe(e,t){return e.label?t?Ec.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function Mhe(e,t,r,i,a){var s=0,l=0,f=r.borderwidth;t.each(function(){var S=gb.select(this),C=S.select(".selector-text"),P=r.font.size*lU,E=Math.max(P*yb.lineCount(C),16)+3;l=Math.max(l,E)}),t.each(function(){var S=gb.select(this),C=S.select(".selector-rect"),P=S.select(".selector-text"),E=P.node()&&cU.bBox(P.node()).width,I=r.font.size*lU,q=yb.lineCount(P),B=Math.max(E+10,LT.minButtonWidth);S.attr("transform",sU(f+s,f)),C.attr({x:0,y:0,width:B,height:l}),yb.positionText(P,B/2,l/2-(q-1)*I/2+3),s+=B+5});var h=e._fullLayout._size,v=h.l+h.w*r.x,m=h.t+h.h*(1-r.y),b="left";Ec.isRightAnchor(r)&&(v-=s,b="right"),Ec.isCenterAnchor(r)&&(v-=s/2,b="center");var T="top";Ec.isBottomAnchor(r)&&(m-=l,T="bottom"),Ec.isMiddleAnchor(r)&&(m-=l/2,T="middle"),s=Math.ceil(s),l=Math.ceil(l),v=Math.round(v),m=Math.round(m),mhe.autoMargin(e,i+"-range-selector",{x:r.x,y:r.y,l:s*uU[b],r:s*fU[b],b:l*fU[T],t:l*uU[T]}),a.attr("transform",sU(v,m))}});var pU=ve((Lxe,dU)=>{"use strict";dU.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:pb()}}},layoutAttributes:pb(),handleDefaults:aU(),draw:vU()}});var _b=ve(DT=>{"use strict";var mU=hn().extendFlat;DT.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",a=e.trace?"trace ":"subplot ",s=t.description?" "+t.description:"",l={x:mU({},r,{}),y:mU({},r,{}),editType:e.editType};return e.noGridCell||(l.row={valType:"integer",min:0,dflt:0,editType:e.editType},l.column={valType:"integer",min:0,dflt:0,editType:e.editType}),l};DT.defaults=function(e,t,r,i){var a=i&&i.x||[0,1],s=i&&i.y||[0,1],l=t.grid;if(l){var f=r("domain.column");f!==void 0&&(f<l.columns?a=l._domains.x[f]:delete e.domain.column);var h=r("domain.row");h!==void 0&&(h<l.rows?s=l._domains.y[h]:delete e.domain.row)}var v=r("domain.x",a),m=r("domain.y",s);v[0]<v[1]||(e.domain.x=a.slice()),m[0]<m[1]||(e.domain.y=s.slice())}});var bU=ve((Dxe,xU)=>{"use strict";var She=Ft(),khe=u0().counter,Che=_b().attributes,yU=Ao().idRegex,Ehe=Di(),zT={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[khe("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[yU.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[yU.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:Che({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function xb(e,t,r){var i=t[r+"axes"],a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(i))return i;if(a.length)return a}function Lhe(e,t){var r=e.grid||{},i=xb(t,r,"x"),a=xb(t,r,"y");if(!e.grid&&!i&&!a)return;var s=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),l=Array.isArray(i),f=Array.isArray(a),h=l&&i!==r.xaxes&&f&&a!==r.yaxes,v,m;s?(v=r.subplots.length,m=r.subplots[0].length):(f&&(v=a.length),l&&(m=i.length));var b=Ehe.newContainer(t,"grid");function T(H,V){return She.coerce(r,b,zT,H,V)}var S=T("rows",v),C=T("columns",m);if(!(S*C>1)){delete t.grid;return}if(!s&&!l&&!f){var P=T("pattern")==="independent";P&&(s=!0)}b._hasSubplotGrid=s;var E=T("roworder"),I=E==="top to bottom",q=s?.2:.1,B=s?.3:.1,z,O;h&&t._splomGridDflt&&(z=t._splomGridDflt.xside,O=t._splomGridDflt.yside),b._domains={x:gU("x",T,q,z,C),y:gU("y",T,B,O,S,I)}}function gU(e,t,r,i,a,s){var l=t(e+"gap",r),f=t("domain."+e);t(e+"side",i);for(var h=new Array(a),v=f[0],m=(f[1]-v)/(a-l),b=m*(1-l),T=0;T<a;T++){var S=v+m*T;h[s?a-1-T:T]=[S,S+b]}return h}function Phe(e,t){var r=t.grid;if(!(!r||!r._domains)){var i=e.grid||{},a=t._subplots,s=r._hasSubplotGrid,l=r.rows,f=r.columns,h=r.pattern==="independent",v,m,b,T,S,C,P,E=r._axisMap={};if(s){var I=i.subplots||[];C=r.subplots=new Array(l);var q=1;for(v=0;v<l;v++){var B=C[v]=new Array(f),z=I[v]||[];for(m=0;m<f;m++)if(h?(S=q===1?"xy":"x"+q+"y"+q,q++):S=z[m],B[m]="",a.cartesian.indexOf(S)!==-1){if(P=S.indexOf("y"),b=S.slice(0,P),T=S.slice(P),E[b]!==void 0&&E[b]!==m||E[T]!==void 0&&E[T]!==v)continue;B[m]=S,E[b]=m,E[T]=v}}}else{var O=xb(t,i,"x"),H=xb(t,i,"y");r.xaxes=_U(O,a.xaxis,f,E,"x"),r.yaxes=_U(H,a.yaxis,l,E,"y")}var V=r._anchors={},W=r.roworder==="top to bottom";for(var K in E){var re=K.charAt(0),oe=r[re+"side"],ne,he,de;if(oe.length<8)V[K]="free";else if(re==="x"){if(oe.charAt(0)==="t"===W?(ne=0,he=1,de=l):(ne=l-1,he=-1,de=-1),s){var Ee=E[K];for(v=ne;v!==de;v+=he)if(S=C[v][Ee],!!S&&(P=S.indexOf("y"),S.slice(0,P)===K)){V[K]=S.slice(P);break}}else for(v=ne;v!==de;v+=he)if(T=r.yaxes[v],a.cartesian.indexOf(K+T)!==-1){V[K]=T;break}}else if(oe.charAt(0)==="l"?(ne=0,he=1,de=f):(ne=f-1,he=-1,de=-1),s){var ke=E[K];for(v=ne;v!==de;v+=he)if(S=C[ke][v],!!S&&(P=S.indexOf("y"),S.slice(P)===K)){V[K]=S.slice(0,P);break}}else for(v=ne;v!==de;v+=he)if(b=r.xaxes[v],a.cartesian.indexOf(b+K)!==-1){V[K]=b;break}}}}function _U(e,t,r,i,a){var s=new Array(r),l;function f(h,v){t.indexOf(v)!==-1&&i[v]===void 0?(s[h]=v,i[v]=h):s[h]=""}if(Array.isArray(e))for(l=0;l<r;l++)f(l,e[l]);else for(f(0,a),l=1;l<r;l++)f(l,a+(l+1));return s}xU.exports={moduleType:"component",name:"grid",schema:{layout:{grid:zT}},layoutAttributes:zT,sizeDefaults:Lhe,contentDefaults:Phe}});var IT=ve((zxe,wU)=>{"use strict";wU.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}});var MU=ve((Ixe,AU)=>{"use strict";var TU=Da(),Dhe=la(),zhe=Ft(),Ihe=Di(),Rhe=IT();AU.exports=function(e,t,r,i){var a="error_"+i.axis,s=Ihe.newContainer(t,a),l=e[a]||{};function f(C,P){return zhe.coerce(l,s,Rhe,C,P)}var h=l.array!==void 0||l.value!==void 0||l.type==="sqrt",v=f("visible",h);if(v!==!1){var m=f("type","array"in l?"data":"percent"),b=!0;m!=="sqrt"&&(b=f("symmetric",!((m==="data"?"arrayminus":"valueminus")in l))),m==="data"?(f("array"),f("traceref"),b||(f("arrayminus"),f("tracerefminus"))):(m==="percent"||m==="constant")&&(f("value"),b||f("valueminus"));var T="copy_"+i.inherit+"style";if(i.inherit){var S=t["error_"+i.inherit];(S||{}).visible&&f(T,!(l.color||TU(l.thickness)||TU(l.width)))}(!i.inherit||!s[T])&&(f("color",r),f("thickness"),f("width",Dhe.traceIs(t,"gl3d")?0:4))}}});var RT=ve((Rxe,kU)=>{"use strict";kU.exports=function(t){var r=t.type,i=t.symmetric;if(r==="data"){var a=t.array||[];if(i)return function(v,m){var b=+a[m];return[b,b]};var s=t.arrayminus||[];return function(v,m){var b=+a[m],T=+s[m];return!isNaN(b)||!isNaN(T)?[T||0,b||0]:[NaN,NaN]}}else{var l=SU(r,t.value),f=SU(r,t.valueminus);return i||t.valueminus===void 0?function(v){var m=l(v);return[m,m]}:function(v){return[f(v),l(v)]}}};function SU(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}});var LU=ve((Fxe,EU)=>{"use strict";var FT=Da(),Fhe=la(),qT=Yi(),qhe=Ft(),Nhe=RT();EU.exports=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var a=r[i],s=a[0].trace;if(s.visible===!0&&Fhe.traceIs(s,"errorBarsOK")){var l=qT.getFromId(t,s.xaxis),f=qT.getFromId(t,s.yaxis);CU(a,s,l,"x"),CU(a,s,f,"y")}}};function CU(e,t,r,i){var a=t["error_"+i]||{},s=a.visible&&["linear","log"].indexOf(r.type)!==-1,l=[];if(s){for(var f=Nhe(a),h=0;h<e.length;h++){var v=e[h],m=v.i;if(m===void 0)m=h;else if(m===null)continue;var b=v[i];if(FT(r.c2l(b))){var T=f(b,m);if(FT(T[0])&&FT(T[1])){var S=v[i+"s"]=b-T[0],C=v[i+"h"]=b+T[1];l.push(S,C)}}}var P=r._id,E=t._extremes[P],I=qT.findExtremes(r,l,qhe.extendFlat({tozero:E.opts.tozero},{padded:!0}));E.min=E.min.concat(I.min),E.max=E.max.concat(I.max)}}});var zU=ve((qxe,DU)=>{"use strict";var PU=ja(),Qh=Da(),Bhe=_i(),Ohe=rs();DU.exports=function(t,r,i,a){var s,l=i.xaxis,f=i.yaxis,h=a&&a.duration>0,v=t._context.staticPlot;r.each(function(m){var b=m[0].trace,T=b.error_x||{},S=b.error_y||{},C;b.ids&&(C=function(q){return q.id});var P=Ohe.hasMarkers(b)&&b.marker.maxdisplayed>0;!S.visible&&!T.visible&&(m=[]);var E=PU.select(this).selectAll("g.errorbar").data(m,C);if(E.exit().remove(),!!m.length){T.visible||E.selectAll("path.xerror").remove(),S.visible||E.selectAll("path.yerror").remove(),E.style("opacity",1);var I=E.enter().append("g").classed("errorbar",!0);h&&I.style("opacity",0).transition().duration(a.duration).style("opacity",1),Bhe.setClipUrl(E,i.layerClipId,t),E.each(function(q){var B=PU.select(this),z=Uhe(q,l,f);if(!(P&&!q.vis)){var O,H=B.select("path.yerror");if(S.visible&&Qh(z.x)&&Qh(z.yh)&&Qh(z.ys)){var V=S.width;O="M"+(z.x-V)+","+z.yh+"h"+2*V+"m-"+V+",0V"+z.ys,z.noYS||(O+="m-"+V+",0h"+2*V),s=!H.size(),s?H=B.append("path").style("vector-effect",v?"none":"non-scaling-stroke").classed("yerror",!0):h&&(H=H.transition().duration(a.duration).ease(a.easing)),H.attr("d",O)}else H.remove();var W=B.select("path.xerror");if(T.visible&&Qh(z.y)&&Qh(z.xh)&&Qh(z.xs)){var K=(T.copy_ystyle?S:T).width;O="M"+z.xh+","+(z.y-K)+"v"+2*K+"m0,-"+K+"H"+z.xs,z.noXS||(O+="m0,-"+K+"v"+2*K),s=!W.size(),s?W=B.append("path").style("vector-effect",v?"none":"non-scaling-stroke").classed("xerror",!0):h&&(W=W.transition().duration(a.duration).ease(a.easing)),W.attr("d",O)}else W.remove()}})}})};function Uhe(e,t,r){var i={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(i.yh=r.c2p(e.yh),i.ys=r.c2p(e.ys),Qh(i.ys)||(i.noYS=!0,i.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),Qh(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0))),i}});var FU=ve((Nxe,RU)=>{"use strict";var Vhe=ja(),IU=Ua();RU.exports=function(t){t.each(function(r){var i=r[0].trace,a=i.error_y||{},s=i.error_x||{},l=Vhe.select(this);l.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(IU.stroke,a.color),s.copy_ystyle&&(s=a),l.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(IU.stroke,s.color)})}});var BU=ve((Bxe,NU)=>{"use strict";var Jg=Ft(),qU=il().overrideAll,Kg=IT(),Bd={error_x:Jg.extendFlat({},Kg),error_y:Jg.extendFlat({},Kg)};delete Bd.error_x.copy_zstyle;delete Bd.error_y.copy_zstyle;delete Bd.error_y.copy_ystyle;var Qg={error_x:Jg.extendFlat({},Kg),error_y:Jg.extendFlat({},Kg),error_z:Jg.extendFlat({},Kg)};delete Qg.error_x.copy_ystyle;delete Qg.error_y.copy_ystyle;delete Qg.error_z.copy_ystyle;delete Qg.error_z.copy_zstyle;NU.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Bd,bar:Bd,histogram:Bd,scatter3d:qU(Qg,"calc","nested"),scattergl:qU(Bd,"calc","nested")}},supplyDefaults:MU(),calc:LU(),makeComputeError:RT(),plot:zU(),style:FU(),hoverInfo:Hhe};function Hhe(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}});var UU=ve((Oxe,OU)=>{"use strict";OU.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}});var XU=ve((Uxe,WU)=>{"use strict";var $h=ja(),NT=wf(),wb=eo(),VU=la(),Lc=Yi(),bb=Xl(),ou=Ft(),Xu=ou.strTranslate,YU=hn().extendFlat,BT=Bh(),Wu=_i(),OT=Ua(),Ghe=Hy(),Zhe=co(),Yhe=Sf().flipScale,Whe=X6(),Xhe=j6(),jhe=Iu(),UT=ts(),HU=UT.LINE_SPACING,GU=UT.FROM_TL,ZU=UT.FROM_BR,Ji=UU().cn;function Jhe(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+Ji.colorbar).data(Khe(e),function(i){return i._id});r.enter().append("g").attr("class",function(i){return i._id}).classed(Ji.colorbar,!0),r.each(function(i){var a=$h.select(this);ou.ensureSingle(a,"rect",Ji.cbbg),ou.ensureSingle(a,"g",Ji.cbfills),ou.ensureSingle(a,"g",Ji.cblines),ou.ensureSingle(a,"g",Ji.cbaxis,function(l){l.classed(Ji.crisp,!0)}),ou.ensureSingle(a,"g",Ji.cbtitleunshift,function(l){l.append("g").classed(Ji.cbtitle,!0)}),ou.ensureSingle(a,"rect",Ji.cboutline);var s=Qhe(a,i,e);s&&s.then&&(e._promises||[]).push(s),e._context.edits.colorbarPosition&&$he(a,i,e)}),r.exit().each(function(i){wb.autoMargin(e,i._id)}).remove(),r.order()}function Khe(e){var t=e._fullLayout,r=e.calcdata,i=[],a,s,l,f;function h(B){return YU(B,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function v(){typeof f.calc=="function"?f.calc(e,l,a):(a._fillgradient=s.reversescale?Yhe(s.colorscale):s.colorscale,a._zrange=[s[f.min],s[f.max]])}for(var m=0;m<r.length;m++){var b=r[m];if(l=b[0].trace,!!l._module){var T=l._module.colorbar;if(l.visible===!0&&T)for(var S=Array.isArray(T),C=S?T:[T],P=0;P<C.length;P++){f=C[P];var E=f.container;s=E?l[E]:l,s&&s.showscale&&(a=h(s.colorbar),a._id="cb"+l.uid+(S&&E?"-"+E:""),a._traceIndex=l.index,a._propPrefix=(E?E+".":"")+"colorbar.",a._meta=l._meta,v(),i.push(a))}}}for(var I in t._colorAxes)if(s=t[I],s.showscale){var q=t._colorAxes[I];a=h(s.colorbar),a._id="cb"+I,a._propPrefix=I+".colorbar.",a._meta=t._meta,f={min:"cmin",max:"cmax"},q[0]!=="heatmap"&&(l=q[1],f.calc=l._module.colorbar.calc),v(),i.push(a)}return i}function Qhe(e,t,r){var i=t.orientation==="v",a=t.len,s=t.lenmode,l=t.thickness,f=t.thicknessmode,h=t.outlinewidth,v=t.borderwidth,m=t.bgcolor,b=t.xanchor,T=t.yanchor,S=t.xpad,C=t.ypad,P=t.x,E=i?t.y:1-t.y,I=t.yref==="paper",q=t.xref==="paper",B=r._fullLayout,z=B._size,O=t._fillcolor,H=t._line,V=t.title,W=V.side,K=t._zrange||$h.extent((typeof O=="function"?O:H.color).domain()),re=typeof H.color=="function"?H.color:function(){return H.color},oe=typeof O=="function"?O:function(){return O},ne=t._levels,he=eve(r,t,K),de=he.fill,Ee=he.line,ke=Math.round(l*(f==="fraction"?i?z.w:z.h:1)),Te=ke/(i?z.w:z.h),ye=Math.round(a*(s==="fraction"?i?z.h:z.w:1)),Ae=ye/(i?z.h:z.w),Me=q?z.w:r._fullLayout.width,De=I?z.h:r._fullLayout.height,at=Math.round(i?P*Me+S:E*De+C),pt={center:.5,right:1}[b]||0,lt={top:1,middle:.5}[T]||0,ut=i?P-pt*Te:E-lt*Te,Ye=i?E-lt*Ae:P-pt*Ae,xt=Math.round(i?De*(1-Ye):Me*Ye);t._lenFrac=Ae,t._thickFrac=Te,t._uFrac=ut,t._vFrac=Ye;var rt=t._axis=tve(r,t,K);rt.position=Te+(i?P+S/z.w:E+C/z.h);var Tt=["top","bottom"].indexOf(W)!==-1;if(i&&Tt&&(rt.title.side=W,rt.titlex=P+S/z.w,rt.titley=Ye+(V.side==="top"?Ae-C/z.h:C/z.h)),!i&&!Tt&&(rt.title.side=W,rt.titley=E+C/z.h,rt.titlex=Ye+S/z.w),H.color&&t.tickmode==="auto"){rt.tickmode="linear",rt.tick0=ne.start;var St=ne.size,mt=ou.constrain(ye/50,4,15)+1,ge=(K[1]-K[0])/((t.nticks||mt)*St);if(ge>1){var Re=Math.pow(10,Math.floor(Math.log(ge)/Math.LN10));St*=Re*ou.roundUp(ge/Re,[2,5,10]),(Math.abs(ne.start)/ne.size+1e-6)%1<2e-6&&(rt.tick0=0)}rt.dtick=St}rt.domain=i?[Ye+C/z.h,Ye+Ae-C/z.h]:[Ye+S/z.w,Ye+Ae-S/z.w],rt.setScale(),e.attr("transform",Xu(Math.round(z.l),Math.round(z.t)));var xe=e.select("."+Ji.cbtitleunshift).attr("transform",Xu(-Math.round(z.l),-Math.round(z.t))),et=rt.ticklabelposition,ht=rt.title.font.size,tt=e.select("."+Ji.cbaxis),Rt,qt=0,Jt=0;function Ht(rr,Be){var vt={propContainer:rt,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:B._dfltTitle.colorbar,containerGroup:e.select("."+Ji.cbtitle)},gt=rr.charAt(0)==="h"?rr.substr(1):"h"+rr;e.selectAll("."+gt+",."+gt+"-math-group").remove(),Ghe.draw(r,rr,YU(vt,Be||{}))}function ar(){if(i&&Tt||!i&&!Tt){var rr,Be;W==="top"&&(rr=S+z.l+Me*P,Be=C+z.t+De*(1-Ye-Ae)+3+ht*.75),W==="bottom"&&(rr=S+z.l+Me*P,Be=C+z.t+De*(1-Ye)-3-ht*.25),W==="right"&&(Be=C+z.t+De*E+3+ht*.75,rr=S+z.l+Me*Ye),Ht(rt._id+"title",{attributes:{x:rr,y:Be,"text-anchor":i?"start":"middle"}})}}function kt(){if(i&&!Tt||!i&&Tt){var rr=rt.position||0,Be=rt._offset+rt._length/2,vt,gt;if(W==="right")gt=Be,vt=z.l+Me*rr+10+ht*(rt.showticklabels?1:.5);else if(vt=Be,W==="bottom"&&(gt=z.t+De*rr+10+(et.indexOf("inside")===-1?rt.tickfont.size:0)+(rt.ticks!=="intside"&&t.ticklen||0)),W==="top"){var Cr=V.text.split("<br>").length;gt=z.t+De*rr+10-ke-HU*ht*Cr}Ht((i?"h":"v")+rt._id+"title",{avoid:{selection:$h.select(r).selectAll("g."+rt._id+"tick"),side:W,offsetTop:i?0:z.t,offsetLeft:i?z.l:0,maxShift:i?B.width:B.height},attributes:{x:vt,y:gt,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function zt(){if(!i&&!Tt||i&&Tt){var rr=e.select("."+Ji.cbtitle),Be=rr.select("text"),vt=[-h/2,h/2],gt=rr.select(".h"+rt._id+"title-math-group").node(),Cr=15.6;Be.node()&&(Cr=parseInt(Be.node().style.fontSize,10)*HU);var pr;if(gt?(pr=Wu.bBox(gt),Jt=pr.width,qt=pr.height,qt>Cr&&(vt[1]-=(qt-Cr)/2)):Be.node()&&!Be.classed(Ji.jsPlaceholder)&&(pr=Wu.bBox(Be.node()),Jt=pr.width,qt=pr.height),i){if(qt){if(qt+=5,W==="top")rt.domain[1]-=qt/z.h,vt[1]*=-1;else{rt.domain[0]+=qt/z.h;var bt=Zhe.lineCount(Be);vt[1]+=(1-bt)*Cr}rr.attr("transform",Xu(vt[0],vt[1])),rt.setScale()}}else Jt&&(W==="right"&&(rt.domain[0]+=(Jt+ht/2)/z.w),rr.attr("transform",Xu(vt[0],vt[1])),rt.setScale())}e.selectAll("."+Ji.cbfills+",."+Ji.cblines).attr("transform",i?Xu(0,Math.round(z.h*(1-rt.domain[1]))):Xu(Math.round(z.w*rt.domain[0]),0)),tt.attr("transform",i?Xu(0,Math.round(-z.t)):Xu(Math.round(-z.l),0));var wt=e.select("."+Ji.cbfills).selectAll("rect."+Ji.cbfill).attr("style","").data(de);wt.enter().append("rect").classed(Ji.cbfill,!0).attr("style",""),wt.exit().remove();var Ut=K.map(rt.c2p).map(Math.round).sort(function(Ar,xr){return Ar-xr});wt.each(function(Ar,xr){var Ct=[xr===0?K[0]:(de[xr]+de[xr-1])/2,xr===de.length-1?K[1]:(de[xr]+de[xr+1])/2].map(rt.c2p).map(Math.round);i&&(Ct[1]=ou.constrain(Ct[1]+(Ct[1]>Ct[0])?1:-1,Ut[0],Ut[1]));var Fe=$h.select(this).attr(i?"x":"y",at).attr(i?"y":"x",$h.min(Ct)).attr(i?"width":"height",Math.max(ke,2)).attr(i?"height":"width",Math.max($h.max(Ct)-$h.min(Ct),2));if(t._fillgradient)Wu.gradient(Fe,r,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var He=oe(Ar).replace("e-","");Fe.attr("fill",NT(He).toHexString())}});var Kt=e.select("."+Ji.cblines).selectAll("path."+Ji.cbline).data(H.color&&H.width?Ee:[]);Kt.enter().append("path").classed(Ji.cbline,!0),Kt.exit().remove(),Kt.each(function(Ar){var xr=at,Ct=Math.round(rt.c2p(Ar))+H.width/2%1;$h.select(this).attr("d","M"+(i?xr+","+Ct:Ct+","+xr)+(i?"h":"v")+ke).call(Wu.lineGroupStyle,H.width,re(Ar),H.dash)}),tt.selectAll("g."+rt._id+"tick,path").remove();var Gt=at+ke+(h||0)/2-(t.ticks==="outside"?1:0),Nt=Lc.calcTicks(rt),$t=Lc.getTickSigns(rt)[2];return Lc.drawTicks(r,rt,{vals:rt.ticks==="inside"?Lc.clipEnds(rt,Nt):Nt,layer:tt,path:Lc.makeTickPath(rt,Gt,$t),transFn:Lc.makeTransTickFn(rt)}),Lc.drawLabels(r,rt,{vals:Nt,layer:tt,transFn:Lc.makeTransTickLabelFn(rt),labelFns:Lc.makeLabelFns(rt,Gt)})}function _r(){var rr,Be=ke+h/2;et.indexOf("inside")===-1&&(rr=Wu.bBox(tt.node()),Be+=i?rr.width:rr.height),Rt=xe.select("text");var vt=0,gt=i&&W==="top",Cr=!i&&W==="right",pr=0;if(Rt.node()&&!Rt.classed(Ji.jsPlaceholder)){var bt,wt=xe.select(".h"+rt._id+"title-math-group").node();wt&&(i&&Tt||!i&&!Tt)?(rr=Wu.bBox(wt),vt=rr.width,bt=rr.height):(rr=Wu.bBox(xe.node()),vt=rr.right-z.l-(i?at:xt),bt=rr.bottom-z.t-(i?xt:at),!i&&W==="top"&&(Be+=rr.height,pr=rr.height)),Cr&&(Rt.attr("transform",Xu(vt/2+ht/2,0)),vt*=2),Be=Math.max(Be,i?vt:bt)}var Ut=(i?S:C)*2+Be+v+h/2,Kt=0;!i&&V.text&&T==="bottom"&&E<=0&&(Kt=Ut/2,Ut+=Kt,pr+=Kt),B._hColorbarMoveTitle=Kt,B._hColorbarMoveCBTitle=pr;var Gt=v+h,Nt=(i?at:xt)-Gt/2-(i?S:0),$t=(i?xt:at)-(i?ye:C+pr-Kt);e.select("."+Ji.cbbg).attr("x",Nt).attr("y",$t).attr(i?"width":"height",Math.max(Ut-Kt,2)).attr(i?"height":"width",Math.max(ye+Gt,2)).call(OT.fill,m).call(OT.stroke,t.bordercolor).style("stroke-width",v);var Ar=Cr?Math.max(vt-10,0):0;e.selectAll("."+Ji.cboutline).attr("x",(i?at:xt+S)+Ar).attr("y",(i?xt+C-ye:at)+(gt?qt:0)).attr(i?"width":"height",Math.max(ke,2)).attr(i?"height":"width",Math.max(ye-(i?2*C+qt:2*S+Ar),2)).call(OT.stroke,t.outlinecolor).style({fill:"none","stroke-width":h});var xr=i?pt*Ut:0,Ct=i?0:(1-lt)*Ut-pr;if(xr=q?z.l-xr:-xr,Ct=I?z.t-Ct:-Ct,e.attr("transform",Xu(xr,Ct)),!i&&(v||NT(m).getAlpha()&&!NT.equals(B.paper_bgcolor,m))){var Fe=tt.selectAll("text"),He=Fe[0].length,_t=e.select("."+Ji.cbbg).node(),ct=Wu.bBox(_t),yr=Wu.getTranslate(e),Er=2;Fe.each(function(jn,En){var Vi=0,pa=He-1;if(En===Vi||En===pa){var Gr=Wu.bBox(this),Qa=Wu.getTranslate(this),Zr;if(En===pa){var vi=Gr.right+Qa.x,ya=ct.right+yr.x+xt-v-Er+P;Zr=ya-vi,Zr>0&&(Zr=0)}else if(En===Vi){var le=Gr.left+Qa.x,ee=ct.left+yr.x+xt+v+Er;Zr=ee-le,Zr<0&&(Zr=0)}Zr&&(He<3?this.setAttribute("transform","translate("+Zr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Tr={},Hr=GU[b],_a=ZU[b],ka=GU[T],Ea=ZU[T],Ii=Ut-ke;i?(s==="pixels"?(Tr.y=E,Tr.t=ye*ka,Tr.b=ye*Ea):(Tr.t=Tr.b=0,Tr.yt=E+a*ka,Tr.yb=E-a*Ea),f==="pixels"?(Tr.x=P,Tr.l=Ut*Hr,Tr.r=Ut*_a):(Tr.l=Ii*Hr,Tr.r=Ii*_a,Tr.xl=P-l*Hr,Tr.xr=P+l*_a)):(s==="pixels"?(Tr.x=P,Tr.l=ye*Hr,Tr.r=ye*_a):(Tr.l=Tr.r=0,Tr.xl=P+a*Hr,Tr.xr=P-a*_a),f==="pixels"?(Tr.y=1-E,Tr.t=Ut*ka,Tr.b=Ut*Ea):(Tr.t=Ii*ka,Tr.b=Ii*Ea,Tr.yt=E-l*ka,Tr.yb=E+l*Ea));var Ki=t.y<.5?"b":"t",yn=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var Xi={r:B.width-Nt-xr,l:Nt+Tr.r,b:B.height-$t-Ct,t:$t+Tr.b};q&&I?wb.autoMargin(r,t._id,Tr):q?r._fullLayout._reservedMargin[t._id][Ki]=Xi[Ki]:I||i?r._fullLayout._reservedMargin[t._id][yn]=Xi[yn]:r._fullLayout._reservedMargin[t._id][Ki]=Xi[Ki]}return ou.syncOrAsync([wb.previousPromises,ar,zt,kt,wb.previousPromises,_r],r)}function $he(e,t,r){var i=t.orientation==="v",a=r._fullLayout,s=a._size,l,f,h;bb.init({element:e.node(),gd:r,prepFn:function(){l=e.attr("transform"),BT(e)},moveFn:function(v,m){e.attr("transform",l+Xu(v,m)),f=bb.align((i?t._uFrac:t._vFrac)+v/s.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),h=bb.align((i?t._vFrac:1-t._uFrac)-m/s.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var b=bb.getCursor(f,h,t.xanchor,t.yanchor);BT(e,b)},doneFn:function(){if(BT(e),f!==void 0&&h!==void 0){var v={};v[t._propPrefix+"x"]=f,v[t._propPrefix+"y"]=h,t._traceIndex!==void 0?VU.call("_guiRestyle",r,v,t._traceIndex):VU.call("_guiRelayout",r,v)}}})}function eve(e,t,r){var i=t._levels,a=[],s=[],l,f,h=i.end+i.size/100,v=i.size,m=1.001*r[0]-.001*r[1],b=1.001*r[1]-.001*r[0];for(f=0;f<1e5&&(l=i.start+f*v,!(v>0?l>=h:l<=h));f++)l>m&&l<b&&a.push(l);if(t._fillgradient)s=[0];else if(typeof t._fillcolor=="function"){var T=t._filllevels;if(T)for(h=T.end+T.size/100,v=T.size,f=0;f<1e5&&(l=T.start+f*v,!(v>0?l>=h:l<=h));f++)l>r[0]&&l<r[1]&&s.push(l);else s=a.map(function(S){return S-i.size/2}),s.push(s[s.length-1]+i.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(s=[0]);return i.size<0&&(a.reverse(),s.reverse()),{line:a,fill:s}}function tve(e,t,r){var i=e._fullLayout,a=t.orientation==="v",s={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:a?"right":"bottom",position:1},l=a?"y":"x",f={type:"linear",_id:l+t._id},h={letter:l,font:i.font,noAutotickangles:l==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function v(m,b){return ou.coerce(s,f,jhe,m,b)}return Whe(s,f,v,h,i),Xhe(s,f,v,h),f}WU.exports={draw:Jhe}});var JU=ve((Vxe,jU)=>{"use strict";jU.exports={moduleType:"component",name:"colorbar",attributes:B_(),supplyDefaults:Ww(),draw:XU().draw,hasColorbar:Fw()}});var QU=ve((Hxe,KU)=>{"use strict";KU.exports={moduleType:"component",name:"legend",layoutAttributes:G5(),supplyLayoutDefaults:W5(),draw:o4(),style:r4()}});var eV=ve((Gxe,$U)=>{"use strict";$U.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}});var rV=ve((Zxe,tV)=>{"use strict";tV.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}});var HT=ve((Yxe,oV)=>{"use strict";var rve=la(),nV=Ft(),VT=nV.extendFlat,aV=nV.extendDeep;function iV(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function ave(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}oV.exports=function(t,r){var i,a=t.data,s=t.layout,l=aV([],a),f=aV({},s,iV(r.tileClass)),h=t._context||{};if(r.width&&(f.width=r.width),r.height&&(f.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){f.annotations=[];var v=Object.keys(f);for(i=0;i<v.length;i++)ave(v[i])&&(f[v[i]].title={text:""});for(i=0;i<l.length;i++){var m=l[i];m.showscale=!1,m.marker&&(m.marker.showscale=!1),rve.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(r.annotations))for(i=0;i<r.annotations.length;i++)f.annotations.push(r.annotations[i]);var b=Object.keys(f).filter(function(E){return E.match(/^scene\d*$/)});if(b.length){var T={};for(r.tileClass==="thumbnail"&&(T={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<b.length;i++){var S=f[b[i]];S.xaxis||(S.xaxis={}),S.yaxis||(S.yaxis={}),S.zaxis||(S.zaxis={}),VT(S.xaxis,T),VT(S.yaxis,T),VT(S.zaxis,T),S._scene=null}}var C=document.createElement("div");r.tileClass&&(C.className=r.tileClass);var P={gd:C,td:C,layout:f,data:l,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:h.mapboxAccessToken}};return r.setBackground!=="transparent"&&(P.config.setBackground=r.setBackground||"opaque"),P.gd.defaultLayout=iV(r.tileClass),P}});var uV=ve((Wxe,lV)=>{"use strict";var ive=M_().EventEmitter,nve=la(),ove=Ft(),sV=Ed(),sve=HT(),lve=Lx(),uve=Px();function fve(e,t){var r=new ive,i=sve(e,{format:"png"}),a=i.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);function s(){var f=sV.getDelay(a._fullLayout);setTimeout(function(){var h=lve(a),v=document.createElement("canvas");v.id=ove.randstr(),r=uve({format:t.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:v,emitter:r,svg:h}),r.clean=function(){a&&document.body.removeChild(a)}},f)}var l=sV.getRedrawFunc(a);return nve.call("_doPlot",a,i.data,i.layout,i.config).then(l).then(s).catch(function(f){r.emit("error",f)}),r}lV.exports=fve});var hV=ve((Xxe,cV)=>{"use strict";var fV=Ed(),cve={getDelay:fV.getDelay,getRedrawFunc:fV.getRedrawFunc,clone:HT(),toSVG:Lx(),svgToImg:Px(),toImage:uV(),downloadImage:g6()};cV.exports=cve});var dV=ve(Pc=>{"use strict";Pc.version=N1().version;u7();$9();var hve=la(),$g=Pc.register=hve.register,ZT=gF(),vV=Object.keys(ZT);for(Tb=0;Tb<vV.length;Tb++)dm=vV[Tb],dm.charAt(0)!=="_"&&(Pc[dm]=ZT[dm]),$g({moduleType:"apiMethod",name:dm,fn:ZT[dm]});var dm,Tb;$g(CN());$g([$N(),vB(),qf(),PB(),GB(),hO(),DO(),KO(),pU(),bU(),BU(),C0(),JU(),QU(),If(),k4()]);$g([eV(),rV()]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&($g(window.PlotlyLocales),delete window.PlotlyLocales);Pc.Icons=D2();var Ab=If(),GT=eo();Pc.Plots={resize:GT.resize,graphJson:GT.graphJson,sendDataToCloud:GT.sendDataToCloud};Pc.Fx={hover:Ab.hover,unhover:Ab.unhover,loneHover:Ab.loneHover,loneUnhover:Ab.loneUnhover};Pc.Snapshot=hV();Pc.PlotSchema=T0()});var mV=ve((Jxe,pV)=>{"use strict";pV.exports=dV()});var YT=ve((Kxe,_V)=>{"use strict";var vve=Vl().hovertemplateAttrs,dve=Vl().texttemplateAttrs,pve=ux(),Uf=Sc(),mve=ms(),yV=_c(),yve=cc().dash,Od=hn().extendFlat,gve=il().overrideAll,su=Uf.marker,gV=Uf.line,_ve=su.line;_V.exports=gve({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:Od({},Uf.mode,{dflt:"markers"}),text:Od({},Uf.text,{}),texttemplate:dve({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:Od({},Uf.hovertext,{}),textfont:Uf.textfont,textposition:Uf.textposition,line:{color:gV.color,width:gV.width,dash:yve},connectgaps:Uf.connectgaps,marker:Od({symbol:su.symbol,opacity:su.opacity,angle:su.angle,angleref:Od({},su.angleref,{values:["previous","up","north"]}),standoff:su.standoff,size:su.size,sizeref:su.sizeref,sizemin:su.sizemin,sizemode:su.sizemode,colorbar:su.colorbar,line:Od({width:_ve.width},yV("marker.line")),gradient:su.gradient},yV("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:pve(),selected:Uf.selected,unselected:Uf.unselected,hoverinfo:Od({},mve.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:vve()},"calc","nested")});var Dc=ve((Qxe,SV)=>{"use strict";var xve=p_(),xV="1.13.4",AV='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',bV=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',AV].join(" "),wV=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),bve=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),MV={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:AV,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:bV,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:bV,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:wV,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:wV,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:bve,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},TV=xve(MV);SV.exports={requiredVersion:xV,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:MV,styleValuesNonMapbox:TV,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+xV+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",TV.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}});var e1=ve(($xe,LV)=>{"use strict";var kV=Ft(),CV=Ua().defaultLine,wve=_b().attributes,Tve=qo(),Ave=Sc().textposition,Mve=il().overrideAll,Sve=Di().templatedArray,WT=Dc(),EV=Tve({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});EV.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var kve=LV.exports=Mve({_arrayAttrRegexps:[kV.counterRegex("mapbox",".layers",!0)],domain:wve({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:WT.styleValuesMapbox.concat(WT.styleValuesNonMapbox),dflt:WT.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:Sve("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:CV},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:CV}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:EV,textposition:kV.extendFlat({},Ave,{arrayOk:!1})}})},"plot","from-root");kve.uirevision={valType:"any",editType:"none"}});var Mb=ve((ebe,zV)=>{"use strict";var Cve=Vl().hovertemplateAttrs,Eve=Vl().texttemplateAttrs,Lve=ux(),t1=YT(),pm=Sc(),PV=e1(),Pve=ms(),Dve=_c(),Ud=hn().extendFlat,zve=il().overrideAll,Ive=e1(),DV=t1.line,mm=t1.marker;zV.exports=zve({lon:t1.lon,lat:t1.lat,cluster:{enabled:{valType:"boolean"},maxzoom:Ud({},Ive.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:Ud({},mm.opacity,{dflt:1})},mode:Ud({},pm.mode,{dflt:"markers"}),text:Ud({},pm.text,{}),texttemplate:Eve({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:Ud({},pm.hovertext,{}),line:{color:DV.color,width:DV.width},connectgaps:pm.connectgaps,marker:Ud({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:mm.opacity,size:mm.size,sizeref:mm.sizeref,sizemin:mm.sizemin,sizemode:mm.sizemode},Dve("marker")),fill:t1.fill,fillcolor:Lve(),textfont:PV.layers.symbol.textfont,textposition:PV.layers.symbol.textposition,below:{valType:"string"},selected:{marker:pm.selected.marker},unselected:{marker:pm.unselected.marker},hoverinfo:Ud({},Pve.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:Cve()},"calc","nested")});var XT=ve((tbe,IV)=>{"use strict";var Rve=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];IV.exports={isSupportedFont:function(e){return Rve.indexOf(e)!==-1}}});var qV=ve((rbe,FV)=>{"use strict";var r1=Ft(),jT=rs(),Fve=b6(),qve=w6(),Nve=T6(),Bve=A6(),RV=Mb(),Ove=XT().isSupportedFont;FV.exports=function(t,r,i,a){function s(I,q){return r1.coerce(t,r,RV,I,q)}function l(I,q){return r1.coerce2(t,r,RV,I,q)}var f=Uve(t,r,s);if(!f){r.visible=!1;return}if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),jT.hasMarkers(r)){Fve(t,r,i,a,s,{noLine:!0,noAngle:!0}),s("marker.allowoverlap"),s("marker.angle");var h=r.marker;h.symbol!=="circle"&&(r1.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),r1.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}jT.hasLines(r)&&(qve(t,r,i,a,s,{noDash:!0}),s("connectgaps"));var v=l("cluster.maxzoom"),m=l("cluster.step"),b=l("cluster.color",r.marker&&r.marker.color||i),T=l("cluster.size"),S=l("cluster.opacity"),C=v!==!1||m!==!1||b!==!1||T!==!1||S!==!1,P=s("cluster.enabled",C);if(P||jT.hasText(r)){var E=a.font.family;Nve(t,r,a,s,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:Ove(E)?E:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}s("fill"),r.fill!=="none"&&Bve(t,r,i,s),r1.coerceSelectionMarkerOpacity(r,s)};function Uve(e,t,r){var i=r("lon")||[],a=r("lat")||[],s=Math.min(i.length,a.length);return t._length=s,s}});var JT=ve((abe,BV)=>{"use strict";var NV=Yi();BV.exports=function(t,r,i){var a={},s=i[r.subplot]._subplot,l=s.mockAxis,f=t.lonlat;return a.lonLabel=NV.tickText(l,l.c2l(f[0]),!0).text,a.latLabel=NV.tickText(l,l.c2l(f[1]),!0).text,a}});var GV=ve((ibe,HV)=>{"use strict";var KT=Da(),OV=Hi().BADNUM,Vve=k6(),Hve=Rg(),Gve=Nx(),Zve=Ft().isArrayOrTypedArray,UV=Ft()._;function VV(e){return e&&typeof e=="string"}HV.exports=function(t,r){var i=Zve(r.locations),a=i?r.locations.length:r._length,s=new Array(a),l;r.geojson?l=function(T){return VV(T)||KT(T)}:l=VV;for(var f=0;f<a;f++){var h=s[f]={};if(i){var v=r.locations[f];h.loc=l(v)?v:null}else{var m=r.lon[f],b=r.lat[f];KT(m)&&KT(b)?h.lonlat=[+m,+b]:h.lonlat=[OV,OV]}}return Hve(s,r),Vve(t,r),Gve(s,r),a&&(s[0].t={labels:{lat:UV(t,"lat:")+" ",lon:UV(t,"lon:")+" "}}),s}});var Sb=ve(a1=>{"use strict";var Yve=Hi().BADNUM;a1.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,i=[],a=[],s=0;s<e.length;s++){var l=e[s],f=l.lonlat;f[0]!==Yve?a.push(f):!r&&a.length>0&&(i.push(a),a=[])}return a.length>0&&i.push(a),i};a1.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};a1.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};a1.makeBlank=function(){return{type:"Point",coordinates:[]}}});var QT=ve((obe,YV)=>{"use strict";var ZV=Ft();YV.exports=function(t,r){var i=t.split(" "),a=i[0],s=i[1],l=ZV.isArrayOrTypedArray(r)?ZV.mean(r):r,f=.5+l/100,h=1.5+l/100,v=["",""],m=[0,0];switch(a){case"top":v[0]="top",m[1]=-h;break;case"bottom":v[0]="bottom",m[1]=h;break}switch(s){case"left":v[1]="right",m[0]=-f;break;case"right":v[1]="left",m[0]=f;break}var b;return v[0]&&v[1]?b=v.join("-"):v[0]?b=v[0]:v[1]?b=v[1]:b="center",{anchor:b,offset:m}}});var QV=ve((sbe,KV)=>{"use strict";var jV=Da(),ko=Ft(),Wve=Hi().BADNUM,Cb=Sb(),WV=C0(),Xve=_i(),jve=Kw(),Eb=rs(),Jve=XT().isSupportedFont,Kve=QT(),Qve=xc().appendArrayPointValue,$ve=co().NEWLINES,ede=co().BR_TAG_ALL;KV.exports=function(t,r){var i=r[0].trace,a=i.visible===!0&&i._length!==0,s=i.fill!=="none",l=Eb.hasLines(i),f=Eb.hasMarkers(i),h=Eb.hasText(i),v=f&&i.marker.symbol==="circle",m=f&&i.marker.symbol!=="circle",b=i.cluster&&i.cluster.enabled,T=kb("fill"),S=kb("line"),C=kb("circle"),P=kb("symbol"),E={fill:T,line:S,circle:C,symbol:P};if(!a)return E;var I;if((s||l)&&(I=Cb.calcTraceToLineCoords(r)),s&&(T.geojson=Cb.makePolygon(I),T.layout.visibility="visible",ko.extendFlat(T.paint,{"fill-color":i.fillcolor})),l&&(S.geojson=Cb.makeLine(I),S.layout.visibility="visible",ko.extendFlat(S.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),v){var q=tde(r);C.geojson=q.geojson,C.layout.visibility="visible",b&&(C.filter=["!",["has","point_count"]],E.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":eA(i.cluster.color,i.cluster.step),"circle-radius":eA(i.cluster.size,i.cluster.step),"circle-opacity":eA(i.cluster.opacity,i.cluster.step)}},E.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":XV(i),"text-size":12}}),ko.extendFlat(C.paint,{"circle-color":q.mcc,"circle-radius":q.mrc,"circle-opacity":q.mo})}if(v&&b&&(C.filter=["!",["has","point_count"]]),(m||h)&&(P.geojson=rde(r,t),ko.extendFlat(P.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),m&&(ko.extendFlat(P.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&i.marker.angle!=="auto"&&ko.extendFlat(P.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),P.layout["icon-allow-overlap"]=i.marker.allowoverlap,ko.extendFlat(P.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),h)){var B=(i.marker||{}).size,z=Kve(i.textposition,B);ko.extendFlat(P.layout,{"text-size":i.textfont.size,"text-anchor":z.anchor,"text-offset":z.offset,"text-font":XV(i)}),ko.extendFlat(P.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return E};function kb(e){return{type:e,geojson:Cb.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function tde(e){var t=e[0].trace,r=t.marker,i=t.selectedpoints,a=ko.isArrayOrTypedArray(r.color),s=ko.isArrayOrTypedArray(r.size),l=ko.isArrayOrTypedArray(r.opacity),f;function h(B){return t.opacity*B}function v(B){return B/2}var m;a&&(WV.hasColorscale(t,"marker")?m=WV.makeColorScaleFuncFromTrace(r):m=ko.identity);var b;s&&(b=jve(t));var T;l&&(T=function(B){var z=jV(B)?+ko.constrain(B,0,1):0;return h(z)});var S=[];for(f=0;f<e.length;f++){var C=e[f],P=C.lonlat;if(!JV(P)){var E={};m&&(E.mcc=C.mcc=m(C.mc)),b&&(E.mrc=C.mrc=b(C.ms)),T&&(E.mo=T(C.mo)),i&&(E.selected=C.selected||0),S.push({type:"Feature",id:f+1,geometry:{type:"Point",coordinates:P},properties:E})}}var I;if(i)for(I=Xve.makeSelectedPointStyleFns(t),f=0;f<S.length;f++){var q=S[f].properties;I.selectedOpacityFn&&(q.mo=h(I.selectedOpacityFn(q))),I.selectedColorFn&&(q.mcc=I.selectedColorFn(q)),I.selectedSizeFn&&(q.mrc=I.selectedSizeFn(q))}return{geojson:{type:"FeatureCollection",features:S},mcc:a||I&&I.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:s||I&&I.selectedSizeFn?{type:"identity",property:"mrc"}:v(r.size),mo:l||I&&I.selectedOpacityFn?{type:"identity",property:"mo"}:h(r.opacity)}}function rde(e,t){for(var r=t._fullLayout,i=e[0].trace,a=i.marker||{},s=a.symbol,l=a.angle,f=s!=="circle"?$T(s):Lb,h=l!=="auto"?$T(l,!0):Lb,v=Eb.hasText(i)?$T(i.text):Lb,m=[],b=0;b<e.length;b++){var T=e[b];if(!JV(T.lonlat)){var S=i.texttemplate,C;if(S){var P=Array.isArray(S)?S[b]||"":S,E=i._module.formatLabels(T,i,r),I={};Qve(I,i,T.i);var q=i._meta||{};C=ko.texttemplateString(P,E,r._d3locale,I,T,q)}else C=v(b);C&&(C=C.replace($ve,"").replace(ede,`
`)),m.push({type:"Feature",geometry:{type:"Point",coordinates:T.lonlat},properties:{symbol:f(b),angle:h(b),text:C}})}}return{type:"FeatureCollection",features:m}}function $T(e,t){return ko.isArrayOrTypedArray(e)?t?function(r){return jV(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:Lb}function Lb(){return""}function JV(e){return e[0]===Wve}function eA(e,t){var r;if(ko.isArrayOrTypedArray(e)&&ko.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var i=1;i<e.length;i++)r.push(t[i-1],e[i])}else r=e;return r}function XV(e){var t=e.textfont,r=t.family,i=t.style,a=t.weight,s=r.split(" "),l=s[s.length-1]==="Italic";l&&s.pop(),l=l||i==="italic";var f=s.join(" ");a==="bold"&&s.indexOf("Bold")===-1?f+=" Bold":a<=1e3&&(s[0]==="Metropolis"?(f="Metropolis",a>850?f+=" Black":a>750?f+=" Extra Bold":a>650?f+=" Bold":a>550?f+=" Semi Bold":a>450?f+=" Medium":a>350?f+=" Regular":a>250?f+=" Light":a>150?f+=" Extra Light":f+=" Thin"):s.slice(0,2).join(" ")==="Open Sans"?(f="Open Sans",a>750?f+=" Extrabold":a>650?f+=" Bold":a>550?f+=" Semibold":a>350?f+=" Regular":f+=" Light"):s.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(f="Klokantech Noto Sans",s[3]==="CJK"&&(f+=" CJK"),f+=a>500?" Bold":" Regular")),l&&(f+=" Italic"),f==="Open Sans Regular Italic"?f="Open Sans Italic":f==="Open Sans Regular Bold"?f="Open Sans Bold":f==="Open Sans Regular Bold Italic"?f="Open Sans Bold Italic":f==="Klokantech Noto Sans Regular Italic"&&(f="Klokantech Noto Sans Italic"),Jve(f)||(f=r);var h=f.split(", ");return h}});var rH=ve((lbe,tH)=>{"use strict";var ade=Ft(),$V=QV(),ym=Dc().traceLayerPrefix,lu={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function eH(e,t,r,i){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=r,this.isHidden=i,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:ym+t+"-fill",line:ym+t+"-line",circle:ym+t+"-circle",symbol:ym+t+"-symbol",cluster:ym+t+"-cluster",clusterCount:ym+t+"-cluster-count"},this.below=null}var i1=eH.prototype;i1.addSource=function(e,t,r){var i={type:"geojson",data:t.geojson};r&&r.enabled&&ade.extendFlat(i,{cluster:!0,clusterMaxZoom:r.maxzoom});var a=this.subplot.map.getSource(this.sourceIds[e]);a?a.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],i)};i1.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};i1.addLayer=function(e,t,r){var i={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(i.filter=t.filter);for(var a=this.layerIds[e],s,l=this.subplot.getMapLayers(),f=0;f<l.length;f++)if(l[f].id===a){s=!0;break}s?(this.subplot.setOptions(a,"setLayoutProperty",i.layout),i.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",i.paint)):this.subplot.addLayer(i,r)};i1.update=function(t){var r=t[0].trace,i=this.subplot,a=i.map,s=$V(i.gd,t),l=i.belowLookup["trace-"+this.uid],f=!!(r.cluster&&r.cluster.enabled),h=!!this.clusterEnabled,v=this;function m(B){B||v.addSource("circle",s.circle,r.cluster);for(var z=lu.cluster,O=0;O<z.length;O++){var H=z[O],V=s[H];v.addLayer(H,V,l)}}function b(B){for(var z=lu.cluster,O=z.length-1;O>=0;O--){var H=z[O];a.removeLayer(v.layerIds[H])}B||a.removeSource(v.sourceIds.circle)}function T(B){for(var z=lu.nonCluster,O=0;O<z.length;O++){var H=z[O],V=s[H];B||v.addSource(H,V),v.addLayer(H,V,l)}}function S(B){for(var z=lu.nonCluster,O=z.length-1;O>=0;O--){var H=z[O];a.removeLayer(v.layerIds[H]),B||a.removeSource(v.sourceIds[H])}}function C(B){h?b(B):S(B)}function P(B){f?m(B):T(B)}function E(){for(var B=f?lu.cluster:lu.nonCluster,z=0;z<B.length;z++){var O=B[z],H=s[O];H&&(i.setOptions(v.layerIds[O],"setLayoutProperty",H.layout),H.layout.visibility==="visible"&&(O!=="cluster"&&v.setSourceData(O,H),i.setOptions(v.layerIds[O],"setPaintProperty",H.paint)))}}var I=this.isHidden,q=r.visible!==!0;q?I||C():I?q||P():h!==f?(C(),P()):(this.below!==l&&(C(!0),P(!0)),E()),this.clusterEnabled=f,this.isHidden=q,this.below=l,t[0].trace._glTrace=this};i1.dispose=function(){for(var t=this.subplot.map,r=this.clusterEnabled?lu.cluster:lu.nonCluster,i=r.length-1;i>=0;i--){var a=r[i];t.removeLayer(this.layerIds[a]),t.removeSource(this.sourceIds[a])}};tH.exports=function(t,r){var i=r[0].trace,a=i.cluster&&i.cluster.enabled,s=i.visible!==!0,l=new eH(t,i.uid,a,s),f=$V(t.gd,r),h=l.below=t.belowLookup["trace-"+i.uid],v,m,b;if(a)for(l.addSource("circle",f.circle,i.cluster),v=0;v<lu.cluster.length;v++)m=lu.cluster[v],b=f[m],l.addLayer(m,b,h);else for(v=0;v<lu.nonCluster.length;v++)m=lu.nonCluster[v],b=f[m],l.addSource(m,b,i.cluster),l.addLayer(m,b,h);return r[0].trace._glTrace=l,l}});var Pb=ve((ube,iH)=>{"use strict";var ide=If(),tA=Ft(),nde=G6(),ode=tA.fillText,sde=Hi().BADNUM,lde=Dc().traceLayerPrefix;function ude(e,t,r){var i=e.cd,a=i[0].trace,s=e.xa,l=e.ya,f=e.subplot,h=[],v=lde+a.uid+"-circle",m=a.cluster&&a.cluster.enabled;if(m){var b=f.map.queryRenderedFeatures(null,{layers:[v]});h=b.map(function(W){return W.id})}var T=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),S=T*360,C=t-S;function P(W){var K=W.lonlat;if(K[0]===sde||m&&h.indexOf(W.i+1)===-1)return 1/0;var re=tA.modHalf(K[0],360),oe=K[1],ne=f.project([re,oe]),he=ne.x-s.c2p([C,oe]),de=ne.y-l.c2p([re,r]),Ee=Math.max(3,W.mrc||0);return Math.max(Math.sqrt(he*he+de*de)-Ee,1-3/Ee)}if(ide.getClosest(i,P,e),e.index!==!1){var E=i[e.index],I=E.lonlat,q=[tA.modHalf(I[0],360)+S,I[1]],B=s.c2p(q),z=l.c2p(q),O=E.mrc||1;e.x0=B-O,e.x1=B+O,e.y0=z-O,e.y1=z+O;var H={};H[a.subplot]={_subplot:f};var V=a._module.formatLabels(E,a,H);return e.lonLabel=V.lonLabel,e.latLabel=V.latLabel,e.color=nde(a,E),e.extraText=aH(a,E,i[0].t.labels),e.hovertemplate=a.hovertemplate,[e]}}function aH(e,t,r){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,a=i.split("+"),s=a.indexOf("all")!==-1,l=a.indexOf("lon")!==-1,f=a.indexOf("lat")!==-1,h=t.lonlat,v=[];function m(b){return b+"\xB0"}return s||l&&f?v.push("("+m(h[1])+", "+m(h[0])+")"):l?v.push(r.lon+m(h[0])):f&&v.push(r.lat+m(h[1])),(s||a.indexOf("text")!==-1)&&ode(t,e,v),v.join("<br>")}iH.exports={hoverPoints:ude,getExtraText:aH}});var oH=ve((fbe,nH)=>{"use strict";nH.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t}});var lH=ve((cbe,sH)=>{"use strict";var fde=Ft(),cde=rs(),hde=Hi().BADNUM;sH.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],f=i[0].trace,h;if(!cde.hasMarkers(f))return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++){var v=i[h],m=v.lonlat;if(m[0]!==hde){var b=[fde.modHalf(m[0],360),m[1]],T=[a.c2p(b),s.c2p(b)];r.contains(T,null,h,t)?(l.push({pointNumber:h,lon:m[0],lat:m[1]}),v.selected=1):v.selected=0}}return l}});var iA=ve((rA,aA)=>{(function(e,t){typeof rA=="object"&&typeof aA!="undefined"?aA.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.mapboxgl=t())})(rA,function(){"use strict";var e,t,r;function i(a,s){if(!e)e=s;else if(!t)t=s;else{var l="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",f={};e(f),r=s(f),typeof window!="undefined"&&(r.workerUrl=window.URL.createObjectURL(new Blob([l],{type:"text/javascript"})))}}return i(["exports"],function(a){"use strict";function s(n,o){return o={exports:{}},n(o,o.exports),o.exports}var l="1.13.4",f=h;function h(n,o,u,p){this.cx=3*n,this.bx=3*(u-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=p,this.p2x=u,this.p2y=p}h.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},h.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},h.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},h.prototype.solveCurveX=function(n,o){typeof o=="undefined"&&(o=1e-6);var u,p,_,A,k;for(_=n,k=0;k<8;k++){if(A=this.sampleCurveX(_)-n,Math.abs(A)<o)return _;var F=this.sampleCurveDerivativeX(_);if(Math.abs(F)<1e-6)break;_=_-A/F}if(u=0,p=1,_=n,_<u)return u;if(_>p)return p;for(;u<p;){if(A=this.sampleCurveX(_),Math.abs(A-n)<o)return _;n>A?u=_:p=_,_=(p-u)*.5+u}return _},h.prototype.solve=function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))};var v=m;function m(n,o){this.x=n,this.y=o}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,o){return this.clone()._rotateAround(n,o)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var o=n.x-this.x,u=n.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,o){return Math.atan2(this.x*o-this.y*n,this.x*n+this.y*o)},_matMult:function(n){var o=n[0]*this.x+n[1]*this.y,u=n[2]*this.x+n[3]*this.y;return this.x=o,this.y=u,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var o=Math.cos(n),u=Math.sin(n),p=o*this.x-u*this.y,_=u*this.x+o*this.y;return this.x=p,this.y=_,this},_rotateAround:function(n,o){var u=Math.cos(n),p=Math.sin(n),_=o.x+u*(this.x-o.x)-p*(this.y-o.y),A=o.y+p*(this.x-o.x)+u*(this.y-o.y);return this.x=_,this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(n){return n instanceof m?n:Array.isArray(n)?new m(n[0],n[1]):n};var b=typeof self!="undefined"?self:{};function T(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(var u=0;u<n.length;u++)if(!T(n[u],o[u]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object")return!1;var p=Object.keys(n);if(p.length!==Object.keys(o).length)return!1;for(var _ in n)if(!T(n[_],o[_]))return!1;return!0}return n===o}var S=Math.pow(2,53)-1;function C(n){if(n<=0)return 0;if(n>=1)return 1;var o=n*n,u=o*n;return 4*(n<.5?u:3*(n-o)+u-.75)}function P(n,o,u,p){var _=new f(n,o,u,p);return function(A){return _.solve(A)}}var E=P(.25,.1,.25,1);function I(n,o,u){return Math.min(u,Math.max(o,n))}function q(n,o,u){var p=u-o,_=((n-o)%p+p)%p+o;return _===o?u:_}function B(n,o,u){if(!n.length)return u(null,[]);var p=n.length,_=new Array(n.length),A=null;n.forEach(function(k,F){o(k,function(Y,j){Y&&(A=Y),_[F]=j,--p===0&&u(A,_)})})}function z(n){var o=[];for(var u in n)o.push(n[u]);return o}function O(n,o){var u=[];for(var p in n)p in o||u.push(p);return u}function H(n){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var p=0,_=o;p<_.length;p+=1){var A=_[p];for(var k in A)n[k]=A[k]}return n}function V(n,o){for(var u={},p=0;p<o.length;p++){var _=o[p];_ in n&&(u[_]=n[_])}return u}var W=1;function K(){return W++}function re(){function n(o){return o?(o^Math.random()*16>>o/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}return n()}function oe(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ne(n){return n?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n):!1}function he(n,o){n.forEach(function(u){o[u]&&(o[u]=o[u].bind(o))})}function de(n,o){return n.indexOf(o,n.length-o.length)!==-1}function Ee(n,o,u){var p={};for(var _ in n)p[_]=o.call(u||this,n[_],_,n);return p}function ke(n,o,u){var p={};for(var _ in n)o.call(u||this,n[_],_,n)&&(p[_]=n[_]);return p}function Te(n){return Array.isArray(n)?n.map(Te):typeof n=="object"&&n?Ee(n,Te):n}function ye(n,o){for(var u=0;u<n.length;u++)if(o.indexOf(n[u])>=0)return!0;return!1}var Ae={};function Me(n){Ae[n]||(typeof console!="undefined"&&console.warn(n),Ae[n]=!0)}function De(n,o,u){return(u.y-n.y)*(o.x-n.x)>(o.y-n.y)*(u.x-n.x)}function at(n){for(var o=0,u=0,p=n.length,_=p-1,A=void 0,k=void 0;u<p;_=u++)A=n[u],k=n[_],o+=(k.x-A.x)*(A.y+k.y);return o}function pt(n){var o=n[0],u=n[1],p=n[2];return u+=90,u*=Math.PI/180,p*=Math.PI/180,{x:o*Math.cos(u)*Math.sin(p),y:o*Math.sin(u)*Math.sin(p),z:o*Math.cos(p)}}function lt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ut(n){var o=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,u={};if(n.replace(o,function(_,A,k,F){var Y=k||F;return u[A]=Y?Y.toLowerCase():!0,""}),u["max-age"]){var p=parseInt(u["max-age"],10);isNaN(p)?delete u["max-age"]:u["max-age"]=p}return u}var Ye=null;function xt(n){if(Ye==null){var o=n.navigator?n.navigator.userAgent:null;Ye=!!n.safari||!!(o&&(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ye}function rt(n){try{var o=b[n];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch(u){return!1}}function Tt(n){return b.btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(o,u){return String.fromCharCode(+("0x"+u))}))}function St(n){return decodeURIComponent(b.atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var mt=b.performance&&b.performance.now?b.performance.now.bind(b.performance):Date.now.bind(Date),ge=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame,Re=b.cancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelAnimationFrame||b.msCancelAnimationFrame,xe,et,ht={now:mt,frame:function(o){var u=ge(o);return{cancel:function(){return Re(u)}}},getImageData:function(o,u){u===void 0&&(u=0);var p=b.document.createElement("canvas"),_=p.getContext("2d");if(!_)throw new Error("failed to create canvas 2d context");return p.width=o.width,p.height=o.height,_.drawImage(o,0,0,o.width,o.height),_.getImageData(-u,-u,o.width+2*u,o.height+2*u)},resolveURL:function(o){return xe||(xe=b.document.createElement("a")),xe.href=o,xe.href},hardwareConcurrency:b.navigator&&b.navigator.hardwareConcurrency||4,get devicePixelRatio(){return b.devicePixelRatio},get prefersReducedMotion(){return b.matchMedia?(et==null&&(et=b.matchMedia("(prefers-reduced-motion: reduce)")),et.matches):!1}},tt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Rt={supported:!1,testSupport:kt},qt,Jt=!1,Ht,ar=!1;b.document&&(Ht=b.document.createElement("img"),Ht.onload=function(){qt&&zt(qt),qt=null,ar=!0},Ht.onerror=function(){Jt=!0,qt=null},Ht.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function kt(n){Jt||!Ht||(ar?zt(n):qt=n)}function zt(n){var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Ht),n.isContextLost())return;Rt.supported=!0}catch(u){}n.deleteTexture(o),Jt=!0}var _r="01";function rr(){for(var n="1",o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",u="",p=0;p<10;p++)u+=o[Math.floor(Math.random()*62)];var _=12*60*60*1e3,A=[n,_r,u].join(""),k=Date.now()+_;return{token:A,tokenExpiresAt:k}}var Be=function(o,u){this._transformRequestFn=o,this._customAccessToken=u,this._createSkuToken()};Be.prototype._createSkuToken=function(){var o=rr();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},Be.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Be.prototype.transformRequest=function(o,u){return this._transformRequestFn?this._transformRequestFn(o,u)||{url:o}:{url:o}},Be.prototype.normalizeStyleURL=function(o,u){if(!vt(o))return o;var p=Ut(o);return p.path="/styles/v1"+p.path,this._makeAPIURL(p,this._customAccessToken||u)},Be.prototype.normalizeGlyphsURL=function(o,u){if(!vt(o))return o;var p=Ut(o);return p.path="/fonts/v1"+p.path,this._makeAPIURL(p,this._customAccessToken||u)},Be.prototype.normalizeSourceURL=function(o,u){if(!vt(o))return o;var p=Ut(o);return p.path="/v4/"+p.authority+".json",p.params.push("secure"),this._makeAPIURL(p,this._customAccessToken||u)},Be.prototype.normalizeSpriteURL=function(o,u,p,_){var A=Ut(o);return vt(o)?(A.path="/styles/v1"+A.path+"/sprite"+u+p,this._makeAPIURL(A,this._customAccessToken||_)):(A.path+=""+u+p,Kt(A))},Be.prototype.normalizeTileURL=function(o,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!vt(o))return o;var p=Ut(o),_=/(\.(png|jpg)\d*)(?=$)/,A=/^.+\/v4\//,k=ht.devicePixelRatio>=2||u===512?"@2x":"",F=Rt.supported?".webp":"$1";p.path=p.path.replace(_,""+k+F),p.path=p.path.replace(A,"/"),p.path="/v4"+p.path;var Y=this._customAccessToken||bt(p.params)||tt.ACCESS_TOKEN;return tt.REQUIRE_ACCESS_TOKEN&&Y&&this._skuToken&&p.params.push("sku="+this._skuToken),this._makeAPIURL(p,Y)},Be.prototype.canonicalizeTileURL=function(o,u){var p="/v4/",_=/\.[\w]+$/,A=Ut(o);if(!A.path.match(/(^\/v4\/)/)||!A.path.match(_))return o;var k="mapbox://tiles/";k+=A.path.replace(p,"");var F=A.params;return u&&(F=F.filter(function(Y){return!Y.match(/^access_token=/)})),F.length&&(k+="?"+F.join("&")),k},Be.prototype.canonicalizeTileset=function(o,u){for(var p=u?vt(u):!1,_=[],A=0,k=o.tiles||[];A<k.length;A+=1){var F=k[A];Cr(F)?_.push(this.canonicalizeTileURL(F,p)):_.push(F)}return _},Be.prototype._makeAPIURL=function(o,u){var p="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",_=Ut(tt.API_URL);if(o.protocol=_.protocol,o.authority=_.authority,o.protocol==="http"){var A=o.params.indexOf("secure");A>=0&&o.params.splice(A,1)}if(_.path!=="/"&&(o.path=""+_.path+o.path),!tt.REQUIRE_ACCESS_TOKEN)return Kt(o);if(u=u||tt.ACCESS_TOKEN,!u)throw new Error("An API access token is required to use Mapbox GL. "+p);if(u[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+p);return o.params=o.params.filter(function(k){return k.indexOf("access_token")===-1}),o.params.push("access_token="+u),Kt(o)};function vt(n){return n.indexOf("mapbox:")===0}var gt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Cr(n){return gt.test(n)}function pr(n){return n.indexOf("sku=")>0&&Cr(n)}function bt(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o],_=p.match(/^access_token=(.*)$/);if(_)return _[1]}return null}var wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ut(n){var o=n.match(wt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function Kt(n){var o=n.params.length?"?"+n.params.join("&"):"";return n.protocol+"://"+n.authority+n.path+o}var Gt="mapbox.eventData";function Nt(n){if(!n)return null;var o=n.split(".");if(!o||o.length!==3)return null;try{var u=JSON.parse(St(o[1]));return u}catch(p){return null}}var $t=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$t.prototype.getStorageKey=function(o){var u=Nt(tt.ACCESS_TOKEN),p="";return u&&u.u?p=Tt(u.u):p=tt.ACCESS_TOKEN||"",o?Gt+"."+o+":"+p:Gt+":"+p},$t.prototype.fetchEventData=function(){var o=rt("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(o)try{var _=b.localStorage.getItem(u);_&&(this.eventData=JSON.parse(_));var A=b.localStorage.getItem(p);A&&(this.anonId=A)}catch(k){Me("Unable to read from LocalStorage")}},$t.prototype.saveEventData=function(){var o=rt("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(o)try{b.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&b.localStorage.setItem(u,JSON.stringify(this.eventData))}catch(_){Me("Unable to write to LocalStorage")}},$t.prototype.processRequests=function(o){},$t.prototype.postEvent=function(o,u,p,_){var A=this;if(tt.EVENTS_URL){var k=Ut(tt.EVENTS_URL);k.params.push("access_token="+(_||tt.ACCESS_TOKEN||""));var F={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:l,skuId:_r,userId:this.anonId},Y=u?H(F,u):F,j={url:Kt(k),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Y])};this.pendingRequest=Ve(j,function(Q){A.pendingRequest=null,p(Q),A.saveEventData(),A.processRequests(_)})}},$t.prototype.queueRequest=function(o,u){this.queue.push(o),this.processRequests(u)};var Ar=function(n){function o(){n.call(this,"map.load"),this.success={},this.skuToken=""}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.postMapLoadEvent=function(p,_,A,k){this.skuToken=A,(tt.EVENTS_URL&&k||tt.ACCESS_TOKEN&&Array.isArray(p)&&p.some(function(F){return vt(F)||Cr(F)}))&&this.queueRequest({id:_,timestamp:Date.now()},k)},o.prototype.processRequests=function(p){var _=this;if(!(this.pendingRequest||this.queue.length===0)){var A=this.queue.shift(),k=A.id,F=A.timestamp;k&&this.success[k]||(this.anonId||this.fetchEventData(),ne(this.anonId)||(this.anonId=re()),this.postEvent(F,{skuToken:this.skuToken},function(Y){Y||k&&(_.success[k]=!0)},p))}},o}($t),xr=function(n){function o(u){n.call(this,"appUserTurnstile"),this._customAccessToken=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.postTurnstileEvent=function(p,_){tt.EVENTS_URL&&tt.ACCESS_TOKEN&&Array.isArray(p)&&p.some(function(A){return vt(A)||Cr(A)})&&this.queueRequest(Date.now(),_)},o.prototype.processRequests=function(p){var _=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var A=Nt(tt.ACCESS_TOKEN),k=A?A.u:tt.ACCESS_TOKEN,F=k!==this.eventData.tokenU;ne(this.anonId)||(this.anonId=re(),F=!0);var Y=this.queue.shift();if(this.eventData.lastSuccess){var j=new Date(this.eventData.lastSuccess),Q=new Date(Y),ie=(Y-this.eventData.lastSuccess)/(24*60*60*1e3);F=F||ie>=1||ie<-1||j.getDate()!==Q.getDate()}else F=!0;if(!F)return this.processRequests();this.postEvent(Y,{"enabled.telemetry":!1},function(me){me||(_.eventData.lastSuccess=Y,_.eventData.tokenU=k)},p)}},o}($t),Ct=new xr,Fe=Ct.postTurnstileEvent.bind(Ct),He=new Ar,_t=He.postMapLoadEvent.bind(He),ct="mapbox-tiles",yr=500,Er=50,Tr=1e3*60*7,Hr;function _a(){b.caches&&!Hr&&(Hr=b.caches.open(ct))}var ka;function Ea(n,o){if(ka===void 0)try{new Response(new ReadableStream),ka=!0}catch(u){ka=!1}ka?o(n.body):n.blob().then(o)}function Ii(n,o,u){if(_a(),!!Hr){var p={status:o.status,statusText:o.statusText,headers:new b.Headers};o.headers.forEach(function(k,F){return p.headers.set(F,k)});var _=ut(o.headers.get("Cache-Control")||"");if(!_["no-store"]){_["max-age"]&&p.headers.set("Expires",new Date(u+_["max-age"]*1e3).toUTCString());var A=new Date(p.headers.get("Expires")).getTime()-u;A<Tr||Ea(o,function(k){var F=new b.Response(k,p);_a(),Hr&&Hr.then(function(Y){return Y.put(Ki(n.url),F)}).catch(function(Y){return Me(Y.message)})})}}}function Ki(n){var o=n.indexOf("?");return o<0?n:n.slice(0,o)}function yn(n,o){if(_a(),!Hr)return o(null);var u=Ki(n.url);Hr.then(function(p){p.match(u).then(function(_){var A=Xi(_);p.delete(u),A&&p.put(u,_.clone()),o(null,_,A)}).catch(o)}).catch(o)}function Xi(n){if(!n)return!1;var o=new Date(n.headers.get("Expires")||0),u=ut(n.headers.get("Cache-Control")||"");return o>Date.now()&&!u["no-cache"]}var jn=1/0;function En(n){jn++,jn>Er&&(n.getActor().send("enforceCacheSizeLimit",yr),jn=0)}function Vi(n){_a(),Hr&&Hr.then(function(o){o.keys().then(function(u){for(var p=0;p<u.length-n;p++)o.delete(u[p])})})}function pa(n){var o=b.caches.delete(ct);n&&o.catch(n).then(function(){return n()})}function Gr(n,o){yr=n,Er=o}var Qa;function Zr(){return Qa==null&&(Qa=b.OffscreenCanvas&&new b.OffscreenCanvas(1,1).getContext("2d")&&typeof b.createImageBitmap=="function"),Qa}var vi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vi);var ya=function(n){function o(u,p,_){p===401&&Cr(_)&&(u+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,u),this.status=p,this.url=_,this.name=this.constructor.name,this.message=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},o}(Error),le=lt()?function(){return self.worker&&self.worker.referrer}:function(){return(b.location.protocol==="blob:"?b.parent:b).location.href},ee=function(n){return/^file:/.test(n)||/^file:/.test(le())&&!/^\w+:/.test(n)};function se(n,o){var u=new b.AbortController,p=new b.Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:le(),signal:u.signal}),_=!1,A=!1,k=pr(p.url);n.type==="json"&&p.headers.set("Accept","application/json");var F=function(j,Q,ie){if(!A){if(j&&j.message!=="SecurityError"&&Me(j),Q&&ie)return Y(Q);var me=Date.now();b.fetch(p).then(function(ce){if(ce.ok){var Se=k?ce.clone():null;return Y(ce,Se,me)}else return o(new ya(ce.statusText,ce.status,n.url))}).catch(function(ce){ce.code!==20&&o(new Error(ce.message))})}},Y=function(j,Q,ie){(n.type==="arrayBuffer"?j.arrayBuffer():n.type==="json"?j.json():j.text()).then(function(me){A||(Q&&ie&&Ii(p,Q,ie),_=!0,o(null,me,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(function(me){A||o(new Error(me.message))})};return k?yn(p,F):F(null,null),{cancel:function(){A=!0,_||u.abort()}}}function fe(n,o){var u=new b.XMLHttpRequest;u.open(n.method||"GET",n.url,!0),n.type==="arrayBuffer"&&(u.responseType="arraybuffer");for(var p in n.headers)u.setRequestHeader(p,n.headers[p]);return n.type==="json"&&(u.responseType="text",u.setRequestHeader("Accept","application/json")),u.withCredentials=n.credentials==="include",u.onerror=function(){o(new Error(u.statusText))},u.onload=function(){if((u.status>=200&&u.status<300||u.status===0)&&u.response!==null){var _=u.response;if(n.type==="json")try{_=JSON.parse(u.response)}catch(A){return o(A)}o(null,_,u.getResponseHeader("Cache-Control"),u.getResponseHeader("Expires"))}else o(new ya(u.statusText,u.status,n.url))},u.send(n.body),{cancel:function(){return u.abort()}}}var Ce=function(n,o){if(!ee(n.url)){if(b.fetch&&b.Request&&b.AbortController&&b.Request.prototype.hasOwnProperty("signal"))return se(n,o);if(lt()&&self.worker&&self.worker.actor){var u=!0;return self.worker.actor.send("getResource",n,o,void 0,u)}}return fe(n,o)},Ne=function(n,o){return Ce(H(n,{type:"json"}),o)},$e=function(n,o){return Ce(H(n,{type:"arrayBuffer"}),o)},Ve=function(n,o){return Ce(H(n,{method:"POST"}),o)};function dt(n){var o=b.document.createElement("a");return o.href=n,o.protocol===b.document.location.protocol&&o.host===b.document.location.host}var Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Dt(n,o,u,p){var _=new b.Image,A=b.URL;_.onload=function(){o(null,_),A.revokeObjectURL(_.src),_.onload=null,b.requestAnimationFrame(function(){_.src=Et})},_.onerror=function(){return o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var k=new b.Blob([new Uint8Array(n)],{type:"image/png"});_.cacheControl=u,_.expires=p,_.src=n.byteLength?A.createObjectURL(k):Et}function Qt(n,o){var u=new b.Blob([new Uint8Array(n)],{type:"image/png"});b.createImageBitmap(u).then(function(p){o(null,p)}).catch(function(p){o(new Error("Could not load image because of "+p.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var Vt,wr,Yr=function(){Vt=[],wr=0};Yr();var Br=function(n,o){if(Rt.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),wr>=tt.MAX_PARALLEL_IMAGE_REQUESTS){var u={requestParameters:n,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return Vt.push(u),u}wr++;var p=!1,_=function(){if(!p)for(p=!0,wr--;Vt.length&&wr<tt.MAX_PARALLEL_IMAGE_REQUESTS;){var k=Vt.shift(),F=k.requestParameters,Y=k.callback,j=k.cancelled;j||(k.cancel=Br(F,Y).cancel)}},A=$e(n,function(k,F,Y,j){_(),k?o(k):F&&(Zr()?Qt(F,o):Dt(F,o,Y,j))});return{cancel:function(){A.cancel(),_()}}},ca=function(n,o){var u=b.document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(var p=0;p<n.length;p++){var _=b.document.createElement("source");dt(n[p])||(u.crossOrigin="Anonymous"),_.src=n[p],u.appendChild(_)}return{cancel:function(){}}};function ua(n,o,u){var p=u[n]&&u[n].indexOf(o)!==-1;p||(u[n]=u[n]||[],u[n].push(o))}function Na(n,o,u){if(u&&u[n]){var p=u[n].indexOf(o);p!==-1&&u[n].splice(p,1)}}var ii=function(o,u){u===void 0&&(u={}),H(this,u),this.type=o},Wr=function(n){function o(u,p){p===void 0&&(p={}),n.call(this,"error",H({error:u},p))}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(ii),vr=function(){};vr.prototype.on=function(o,u){return this._listeners=this._listeners||{},ua(o,u,this._listeners),this},vr.prototype.off=function(o,u){return Na(o,u,this._listeners),Na(o,u,this._oneTimeListeners),this},vr.prototype.once=function(o,u){return this._oneTimeListeners=this._oneTimeListeners||{},ua(o,u,this._oneTimeListeners),this},vr.prototype.fire=function(o,u){typeof o=="string"&&(o=new ii(o,u||{}));var p=o.type;if(this.listens(p)){o.target=this;for(var _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[],A=0,k=_;A<k.length;A+=1){var F=k[A];F.call(this,o)}for(var Y=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[],j=0,Q=Y;j<Q.length;j+=1){var ie=Q[j];Na(p,ie,this._oneTimeListeners),ie.call(this,o)}var me=this._eventedParent;me&&(H(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),me.fire(o))}else o instanceof Wr&&console.error(o.error);return this},vr.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},vr.prototype.setEventedParent=function(o,u){return this._eventedParent=o,this._eventedParentData=u,this};var $r=8,ga={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},ir={"*":{type:"source"}},wi=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],La={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},si={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},fa={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ln={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Co={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},xs={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ga={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Jn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],cu={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Bi={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vl={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jd={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Fc={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qc={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},cv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},hv={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},hu={type:"array",value:"*"},dl={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Kd={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ju={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Gf={type:"array",value:"*",minimum:1},Qi={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Ho=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],mo={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},pl={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Go={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},vu={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Qd={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},vv={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ku={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dv={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pv={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},oo={"*":{type:"string"}},Zt={$version:$r,$root:ga,sources:ir,source:wi,source_vector:La,source_raster:si,source_raster_dem:fa,source_geojson:Ln,source_video:Co,source_image:xs,layer:Ga,layout:Jn,layout_background:cu,layout_fill:Bi,layout_circle:vl,layout_heatmap:Jd,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Fc,layout_symbol:qc,layout_raster:cv,layout_hillshade:hv,filter:hu,filter_operator:dl,geometry_type:Kd,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ju,expression:Gf,light:Qi,paint:Ho,paint_fill:mo,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:pl,paint_circle:Go,paint_heatmap:vu,paint_symbol:Qd,paint_raster:vv,paint_hillshade:Ku,paint_background:dv,transition:pv,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:oo},Or=function(o,u,p,_){this.message=(o?o+": ":"")+p,_&&(this.identifier=_),u!=null&&u.__line__&&(this.line=u.__line__)};function $d(n){var o=n.key,u=n.value;return u?[new Or(o,u,"constants have been deprecated as of v8")]:[]}function du(n){for(var o=[],u=arguments.length-1;u-- >0;)o[u]=arguments[u+1];for(var p=0,_=o;p<_.length;p+=1){var A=_[p];for(var k in A)n[k]=A[k]}return n}function an(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function ml(n){if(Array.isArray(n))return n.map(ml);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var o={};for(var u in n)o[u]=ml(n[u]);return o}return an(n)}var bs=function(n){function o(u,p){n.call(this,p),this.message=p,this.key=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(Error),Qu=function(o,u){u===void 0&&(u=[]),this.parent=o,this.bindings={};for(var p=0,_=u;p<_.length;p+=1){var A=_[p],k=A[0],F=A[1];this.bindings[k]=F}};Qu.prototype.concat=function(o){return new Qu(this,o)},Qu.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},Qu.prototype.has=function(o){return this.bindings[o]?!0:this.parent?this.parent.has(o):!1};var $u={kind:"null"},kr={kind:"number"},wa={kind:"string"},Ta={kind:"boolean"},ws={kind:"color"},yl={kind:"object"},Ma={kind:"value"},Ws={kind:"error"},pu={kind:"collator"},us={kind:"formatted"},gl={kind:"resolvedImage"};function yo(n,o){return{kind:"array",itemType:n,N:o}}function ki(n){if(n.kind==="array"){var o=ki(n.itemType);return typeof n.N=="number"?"array<"+o+", "+n.N+">":n.itemType.kind==="value"?"array":"array<"+o+">"}else return n.kind}var Ts=[$u,kr,wa,Ta,ws,us,yl,yo(Ma),gl];function fs(n,o){if(o.kind==="error")return null;if(n.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!fs(n.itemType,o.itemType))&&(typeof n.N!="number"||n.N===o.N))return null}else{if(n.kind===o.kind)return null;if(n.kind==="value")for(var u=0,p=Ts;u<p.length;u+=1){var _=p[u];if(!fs(_,o))return null}}return"Expected "+ki(n)+" but found "+ki(o)+" instead."}function Nc(n,o){return o.some(function(u){return u.kind===n.kind})}function mu(n,o){return o.some(function(u){return u==="null"?n===null:u==="array"?Array.isArray(n):u==="object"?n&&!Array.isArray(n)&&typeof n=="object":u===typeof n})}var wm=s(function(n,o){var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(j){return j=Math.round(j),j<0?0:j>255?255:j}function _(j){return j<0?0:j>1?1:j}function A(j){return j[j.length-1]==="%"?p(parseFloat(j)/100*255):p(parseInt(j))}function k(j){return j[j.length-1]==="%"?_(parseFloat(j)/100):_(parseFloat(j))}function F(j,Q,ie){return ie<0?ie+=1:ie>1&&(ie-=1),ie*6<1?j+(Q-j)*ie*6:ie*2<1?Q:ie*3<2?j+(Q-j)*(2/3-ie)*6:j}function Y(j){var Q=j.replace(/ /g,"").toLowerCase();if(Q in u)return u[Q].slice();if(Q[0]==="#"){if(Q.length===4){var ie=parseInt(Q.substr(1),16);return ie>=0&&ie<=4095?[(ie&3840)>>4|(ie&3840)>>8,ie&240|(ie&240)>>4,ie&15|(ie&15)<<4,1]:null}else if(Q.length===7){var ie=parseInt(Q.substr(1),16);return ie>=0&&ie<=16777215?[(ie&16711680)>>16,(ie&65280)>>8,ie&255,1]:null}return null}var me=Q.indexOf("("),ce=Q.indexOf(")");if(me!==-1&&ce+1===Q.length){var Se=Q.substr(0,me),qe=Q.substr(me+1,ce-(me+1)).split(","),ot=1;switch(Se){case"rgba":if(qe.length!==4)return null;ot=k(qe.pop());case"rgb":return qe.length!==3?null:[A(qe[0]),A(qe[1]),A(qe[2]),ot];case"hsla":if(qe.length!==4)return null;ot=k(qe.pop());case"hsl":if(qe.length!==3)return null;var Ke=(parseFloat(qe[0])%360+360)%360/360,Mt=k(qe[1]),yt=k(qe[2]),At=yt<=.5?yt*(Mt+1):yt+Mt-yt*Mt,Pt=yt*2-At;return[p(F(Pt,At,Ke+1/3)*255),p(F(Pt,At,Ke)*255),p(F(Pt,At,Ke-1/3)*255),ot];default:return null}}return null}try{o.parseCSSColor=Y}catch(j){}}),Zf=wm.parseCSSColor,ni=function(o,u,p,_){_===void 0&&(_=1),this.r=o,this.g=u,this.b=p,this.a=_};ni.parse=function(o){if(o){if(o instanceof ni)return o;if(typeof o=="string"){var u=Zf(o);if(u)return new ni(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}}},ni.prototype.toString=function(){var o=this.toArray(),u=o[0],p=o[1],_=o[2],A=o[3];return"rgba("+Math.round(u)+","+Math.round(p)+","+Math.round(_)+","+A+")"},ni.prototype.toArray=function(){var o=this,u=o.r,p=o.g,_=o.b,A=o.a;return A===0?[0,0,0,0]:[u*255/A,p*255/A,_*255/A,A]},ni.black=new ni(0,0,0,1),ni.white=new ni(1,1,1,1),ni.transparent=new ni(0,0,0,0),ni.red=new ni(1,0,0,1);var Yf=function(o,u,p){o?this.sensitivity=u?"variant":"case":this.sensitivity=u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Yf.prototype.compare=function(o,u){return this.collator.compare(o,u)},Yf.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var mv=function(o,u,p,_,A){this.text=o,this.image=u,this.scale=p,this.fontStack=_,this.textColor=A},gn=function(o){this.sections=o};gn.fromString=function(o){return new gn([new mv(o,null,null,null,null)])},gn.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(o){return o.text.length!==0||o.image&&o.image.name.length!==0})},gn.factory=function(o){return o instanceof gn?o:gn.fromString(o)},gn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(o){return o.text}).join("")},gn.prototype.serialize=function(){for(var o=["format"],u=0,p=this.sections;u<p.length;u+=1){var _=p[u];if(_.image){o.push(["image",_.image.name]);continue}o.push(_.text);var A={};_.fontStack&&(A["text-font"]=["literal",_.fontStack.split(",")]),_.scale&&(A["font-scale"]=_.scale),_.textColor&&(A["text-color"]=["rgba"].concat(_.textColor.toArray())),o.push(A)}return o};var Pn=function(o){this.name=o.name,this.available=o.available};Pn.prototype.toString=function(){return this.name},Pn.fromString=function(o){return o?new Pn({name:o,available:!1}):null},Pn.prototype.serialize=function(){return["image",this.name]};function ep(n,o,u,p){if(!(typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255)){var _=typeof p=="number"?[n,o,u,p]:[n,o,u];return"Invalid rgba value ["+_.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof p=="undefined"||typeof p=="number"&&p>=0&&p<=1?null:"Invalid rgba value ["+[n,o,u,p].join(", ")+"]: 'a' must be between 0 and 1."}function ef(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof ni)return!0;if(n instanceof Yf)return!0;if(n instanceof gn)return!0;if(n instanceof Pn)return!0;if(Array.isArray(n)){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(!ef(p))return!1}return!0}else if(typeof n=="object"){for(var _ in n)if(!ef(n[_]))return!1;return!0}else return!1}function nn(n){if(n===null)return $u;if(typeof n=="string")return wa;if(typeof n=="boolean")return Ta;if(typeof n=="number")return kr;if(n instanceof ni)return ws;if(n instanceof Yf)return pu;if(n instanceof gn)return us;if(n instanceof Pn)return gl;if(Array.isArray(n)){for(var o=n.length,u,p=0,_=n;p<_.length;p+=1){var A=_[p],k=nn(A);if(!u)u=k;else{if(u===k)continue;u=Ma;break}}return yo(u||Ma,o)}else return yl}function Eo(n){var o=typeof n;return n===null?"":o==="string"||o==="number"||o==="boolean"?String(n):n instanceof ni||n instanceof gn||n instanceof Pn?n.toString():JSON.stringify(n)}var Zo=function(o,u){this.type=o,this.value=u};Zo.parse=function(o,u){if(o.length!==2)return u.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!ef(o[1]))return u.error("invalid value");var p=o[1],_=nn(p),A=u.expectedType;return _.kind==="array"&&_.N===0&&A&&A.kind==="array"&&(typeof A.N!="number"||A.N===0)&&(_=A),new Zo(_,p)},Zo.prototype.evaluate=function(){return this.value},Zo.prototype.eachChild=function(){},Zo.prototype.outputDefined=function(){return!0},Zo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ni?["rgba"].concat(this.value.toArray()):this.value instanceof gn?this.value.serialize():this.value};var un=function(o){this.name="ExpressionEvaluationError",this.message=o};un.prototype.toJSON=function(){return this.message};var Wf={string:wa,number:kr,boolean:Ta,object:yl},on=function(o,u){this.type=o,this.args=u};on.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var p=1,_,A=o[0];if(A==="array"){var k;if(o.length>2){var F=o[1];if(typeof F!="string"||!(F in Wf)||F==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);k=Wf[F],p++}else k=Ma;var Y;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);Y=o[2],p++}_=yo(k,Y)}else _=Wf[A];for(var j=[];p<o.length;p++){var Q=u.parse(o[p],p,Ma);if(!Q)return null;j.push(Q)}return new on(_,j)},on.prototype.evaluate=function(o){for(var u=0;u<this.args.length;u++){var p=this.args[u].evaluate(o),_=fs(this.type,nn(p));if(_){if(u===this.args.length-1)throw new un("Expected value to be of type "+ki(this.type)+", but found "+ki(nn(p))+" instead.")}else return p}return null},on.prototype.eachChild=function(o){this.args.forEach(o)},on.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},on.prototype.serialize=function(){var o=this.type,u=[o.kind];if(o.kind==="array"){var p=o.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){u.push(p.kind);var _=o.N;(typeof _=="number"||this.args.length>1)&&u.push(_)}}return u.concat(this.args.map(function(A){return A.serialize()}))};var Yo=function(o){this.type=us,this.sections=o};Yo.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var p=o[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");for(var _=[],A=!1,k=1;k<=o.length-1;++k){var F=o[k];if(A&&typeof F=="object"&&!Array.isArray(F)){A=!1;var Y=null;if(F["font-scale"]&&(Y=u.parse(F["font-scale"],1,kr),!Y))return null;var j=null;if(F["text-font"]&&(j=u.parse(F["text-font"],1,yo(wa)),!j))return null;var Q=null;if(F["text-color"]&&(Q=u.parse(F["text-color"],1,ws),!Q))return null;var ie=_[_.length-1];ie.scale=Y,ie.font=j,ie.textColor=Q}else{var me=u.parse(o[k],1,Ma);if(!me)return null;var ce=me.type.kind;if(ce!=="string"&&ce!=="value"&&ce!=="null"&&ce!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");A=!0,_.push({content:me,scale:null,font:null,textColor:null})}}return new Yo(_)},Yo.prototype.evaluate=function(o){var u=function(p){var _=p.content.evaluate(o);return nn(_)===gl?new mv("",_,null,null,null):new mv(Eo(_),null,p.scale?p.scale.evaluate(o):null,p.font?p.font.evaluate(o).join(","):null,p.textColor?p.textColor.evaluate(o):null)};return new gn(this.sections.map(u))},Yo.prototype.eachChild=function(o){for(var u=0,p=this.sections;u<p.length;u+=1){var _=p[u];o(_.content),_.scale&&o(_.scale),_.font&&o(_.font),_.textColor&&o(_.textColor)}},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){for(var o=["format"],u=0,p=this.sections;u<p.length;u+=1){var _=p[u];o.push(_.content.serialize());var A={};_.scale&&(A["font-scale"]=_.scale.serialize()),_.font&&(A["text-font"]=_.font.serialize()),_.textColor&&(A["text-color"]=_.textColor.serialize()),o.push(A)}return o};var Xs=function(o){this.type=gl,this.input=o};Xs.parse=function(o,u){if(o.length!==2)return u.error("Expected two arguments.");var p=u.parse(o[1],1,wa);return p?new Xs(p):u.error("No image name provided.")},Xs.prototype.evaluate=function(o){var u=this.input.evaluate(o),p=Pn.fromString(u);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(u)>-1),p},Xs.prototype.eachChild=function(o){o(this.input)},Xs.prototype.outputDefined=function(){return!1},Xs.prototype.serialize=function(){return["image",this.input.serialize()]};var Tm={"to-boolean":Ta,"to-color":ws,"to-number":kr,"to-string":wa},Wo=function(o,u){this.type=o,this.args=u};Wo.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var p=o[0];if((p==="to-boolean"||p==="to-string")&&o.length!==2)return u.error("Expected one argument.");for(var _=Tm[p],A=[],k=1;k<o.length;k++){var F=u.parse(o[k],k,Ma);if(!F)return null;A.push(F)}return new Wo(_,A)},Wo.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var u,p,_=0,A=this.args;_<A.length;_+=1){var k=A[_];if(u=k.evaluate(o),p=null,u instanceof ni)return u;if(typeof u=="string"){var F=o.parseColor(u);if(F)return F}else if(Array.isArray(u)&&(u.length<3||u.length>4?p="Invalid rbga value "+JSON.stringify(u)+": expected an array containing either three or four numeric values.":p=ep(u[0],u[1],u[2],u[3]),!p))return new ni(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new un(p||"Could not parse color from value '"+(typeof u=="string"?u:String(JSON.stringify(u)))+"'")}else if(this.type.kind==="number"){for(var Y=null,j=0,Q=this.args;j<Q.length;j+=1){var ie=Q[j];if(Y=ie.evaluate(o),Y===null)return 0;var me=Number(Y);if(!isNaN(me))return me}throw new un("Could not convert "+JSON.stringify(Y)+" to number.")}else return this.type.kind==="formatted"?gn.fromString(Eo(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Pn.fromString(Eo(this.args[0].evaluate(o))):Eo(this.args[0].evaluate(o))},Wo.prototype.eachChild=function(o){this.args.forEach(o)},Wo.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},Wo.prototype.serialize=function(){if(this.type.kind==="formatted")return new Yo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Xs(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild(function(u){o.push(u.serialize())}),o};var Am=["Unknown","Point","LineString","Polygon"],js=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};js.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},js.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Am[this.feature.type]:this.feature.type:null},js.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},js.prototype.canonicalID=function(){return this.canonical},js.prototype.properties=function(){return this.feature&&this.feature.properties||{}},js.prototype.parseColor=function(o){var u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=ni.parse(o)),u};var Dn=function(o,u,p,_){this.name=o,this.type=u,this._evaluate=p,this.args=_};Dn.prototype.evaluate=function(o){return this._evaluate(o,this.args)},Dn.prototype.eachChild=function(o){this.args.forEach(o)},Dn.prototype.outputDefined=function(){return!1},Dn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(o){return o.serialize()}))},Dn.parse=function(o,u){var p,_=o[0],A=Dn.definitions[_];if(!A)return u.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0);for(var k=Array.isArray(A)?A[0]:A.type,F=Array.isArray(A)?[[A[1],A[2]]]:A.overloads,Y=F.filter(function(Fr){var Nr=Fr[0];return!Array.isArray(Nr)||Nr.length===o.length-1}),j=null,Q=0,ie=Y;Q<ie.length;Q+=1){var me=ie[Q],ce=me[0],Se=me[1];j=new Tl(u.registry,u.path,null,u.scope);for(var qe=[],ot=!1,Ke=1;Ke<o.length;Ke++){var Mt=o[Ke],yt=Array.isArray(ce)?ce[Ke-1]:ce.type,At=j.parse(Mt,1+qe.length,yt);if(!At){ot=!0;break}qe.push(At)}if(!ot){if(Array.isArray(ce)&&ce.length!==qe.length){j.error("Expected "+ce.length+" arguments, but found "+qe.length+" instead.");continue}for(var Pt=0;Pt<qe.length;Pt++){var Wt=Array.isArray(ce)?ce[Pt]:ce.type,cr=qe[Pt];j.concat(Pt+1).checkSubtype(Wt,cr.type)}if(j.errors.length===0)return new Dn(_,k,Se,qe)}}if(Y.length===1)(p=u.errors).push.apply(p,j.errors);else{for(var lr=Y.length?Y:F,Rr=lr.map(function(Fr){var Nr=Fr[0];return Mm(Nr)}).join(" | "),Sr=[],zr=1;zr<o.length;zr++){var Qr=u.parse(o[zr],1+Sr.length);if(!Qr)return null;Sr.push(ki(Qr.type))}u.error("Expected arguments of type "+Rr+", but found ("+Sr.join(", ")+") instead.")}return null},Dn.register=function(o,u){Dn.definitions=u;for(var p in u)o[p]=Dn};function Mm(n){return Array.isArray(n)?"("+n.map(ki).join(", ")+")":"("+ki(n.type)+"...)"}var _l=function(o,u,p){this.type=pu,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=u};_l.parse=function(o,u){if(o.length!==2)return u.error("Expected one argument.");var p=o[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");var _=u.parse(p["case-sensitive"]===void 0?!1:p["case-sensitive"],1,Ta);if(!_)return null;var A=u.parse(p["diacritic-sensitive"]===void 0?!1:p["diacritic-sensitive"],1,Ta);if(!A)return null;var k=null;return p.locale&&(k=u.parse(p.locale,1,wa),!k)?null:new _l(_,A,k)},_l.prototype.evaluate=function(o){return new Yf(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},_l.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},_l.prototype.outputDefined=function(){return!1},_l.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var xl=8192;function yv(n,o){n[0]=Math.min(n[0],o[0]),n[1]=Math.min(n[1],o[1]),n[2]=Math.max(n[2],o[0]),n[3]=Math.max(n[3],o[1])}function Sm(n){return(180+n)/360}function km(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Bc(n,o){return!(n[0]<=o[0]||n[2]>=o[2]||n[1]<=o[1]||n[3]>=o[3])}function Cm(n,o){var u=Sm(n[0]),p=km(n[1]),_=Math.pow(2,o.z);return[Math.round(u*_*xl),Math.round(p*_*xl)]}function Em(n,o,u){var p=n[0]-o[0],_=n[1]-o[1],A=n[0]-u[0],k=n[1]-u[1];return p*k-A*_===0&&p*A<=0&&_*k<=0}function Lm(n,o,u){return o[1]>n[1]!=u[1]>n[1]&&n[0]<(u[0]-o[0])*(n[1]-o[1])/(u[1]-o[1])+o[0]}function gv(n,o){for(var u=!1,p=0,_=o.length;p<_;p++)for(var A=o[p],k=0,F=A.length;k<F-1;k++){if(Em(n,A[k],A[k+1]))return!1;Lm(n,A[k],A[k+1])&&(u=!u)}return u}function Pm(n,o){for(var u=0;u<o.length;u++)if(gv(n,o[u]))return!0;return!1}function Dm(n,o){return n[0]*o[1]-n[1]*o[0]}function _v(n,o,u,p){var _=n[0]-u[0],A=n[1]-u[1],k=o[0]-u[0],F=o[1]-u[1],Y=p[0]-u[0],j=p[1]-u[1],Q=_*j-Y*A,ie=k*j-Y*F;return Q>0&&ie<0||Q<0&&ie>0}function tp(n,o,u,p){var _=[o[0]-n[0],o[1]-n[1]],A=[p[0]-u[0],p[1]-u[1]];return Dm(A,_)===0?!1:!!(_v(n,o,u,p)&&_v(u,p,n,o))}function rp(n,o,u){for(var p=0,_=u;p<_.length;p+=1)for(var A=_[p],k=0;k<A.length-1;++k)if(tp(n,o,A[k],A[k+1]))return!0;return!1}function xv(n,o){for(var u=0;u<n.length;++u)if(!gv(n[u],o))return!1;for(var p=0;p<n.length-1;++p)if(rp(n[p],n[p+1],o))return!1;return!0}function zm(n,o){for(var u=0;u<o.length;u++)if(xv(n,o[u]))return!0;return!1}function bv(n,o,u){for(var p=[],_=0;_<n.length;_++){for(var A=[],k=0;k<n[_].length;k++){var F=Cm(n[_][k],u);yv(o,F),A.push(F)}p.push(A)}return p}function yu(n,o,u){for(var p=[],_=0;_<n.length;_++){var A=bv(n[_],o,u);p.push(A)}return p}function ap(n,o,u,p){if(n[0]<u[0]||n[0]>u[2]){var _=p*.5,A=n[0]-u[0]>_?-p:u[0]-n[0]>_?p:0;A===0&&(A=n[0]-u[2]>_?-p:u[2]-n[0]>_?p:0),n[0]+=A}yv(o,n)}function Im(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function ip(n,o,u,p){for(var _=Math.pow(2,p.z)*xl,A=[p.x*xl,p.y*xl],k=[],F=0,Y=n;F<Y.length;F+=1)for(var j=Y[F],Q=0,ie=j;Q<ie.length;Q+=1){var me=ie[Q],ce=[me.x+A[0],me.y+A[1]];ap(ce,o,u,_),k.push(ce)}return k}function np(n,o,u,p){for(var _=Math.pow(2,p.z)*xl,A=[p.x*xl,p.y*xl],k=[],F=0,Y=n;F<Y.length;F+=1){for(var j=Y[F],Q=[],ie=0,me=j;ie<me.length;ie+=1){var ce=me[ie],Se=[ce.x+A[0],ce.y+A[1]];yv(o,Se),Q.push(Se)}k.push(Q)}if(o[2]-o[0]<=_/2){Im(o);for(var qe=0,ot=k;qe<ot.length;qe+=1)for(var Ke=ot[qe],Mt=0,yt=Ke;Mt<yt.length;Mt+=1){var At=yt[Mt];ap(At,o,u,_)}}return k}function op(n,o){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],_=n.canonicalID();if(o.type==="Polygon"){var A=bv(o.coordinates,p,_),k=ip(n.geometry(),u,p,_);if(!Bc(u,p))return!1;for(var F=0,Y=k;F<Y.length;F+=1){var j=Y[F];if(!gv(j,A))return!1}}if(o.type==="MultiPolygon"){var Q=yu(o.coordinates,p,_),ie=ip(n.geometry(),u,p,_);if(!Bc(u,p))return!1;for(var me=0,ce=ie;me<ce.length;me+=1){var Se=ce[me];if(!Pm(Se,Q))return!1}}return!0}function Rm(n,o){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],_=n.canonicalID();if(o.type==="Polygon"){var A=bv(o.coordinates,p,_),k=np(n.geometry(),u,p,_);if(!Bc(u,p))return!1;for(var F=0,Y=k;F<Y.length;F+=1){var j=Y[F];if(!xv(j,A))return!1}}if(o.type==="MultiPolygon"){var Q=yu(o.coordinates,p,_),ie=np(n.geometry(),u,p,_);if(!Bc(u,p))return!1;for(var me=0,ce=ie;me<ce.length;me+=1){var Se=ce[me];if(!zm(Se,Q))return!1}}return!0}var cs=function(o,u){this.type=Ta,this.geojson=o,this.geometries=u};cs.parse=function(o,u){if(o.length!==2)return u.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(ef(o[1])){var p=o[1];if(p.type==="FeatureCollection")for(var _=0;_<p.features.length;++_){var A=p.features[_].geometry.type;if(A==="Polygon"||A==="MultiPolygon")return new cs(p,p.features[_].geometry)}else if(p.type==="Feature"){var k=p.geometry.type;if(k==="Polygon"||k==="MultiPolygon")return new cs(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new cs(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")},cs.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return op(o,this.geometries);if(o.geometryType()==="LineString")return Rm(o,this.geometries)}return!1},cs.prototype.eachChild=function(){},cs.prototype.outputDefined=function(){return!0},cs.prototype.serialize=function(){return["within",this.geojson]};function Oc(n){if(n instanceof Dn){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof cs)return!1;var o=!0;return n.eachChild(function(u){o&&!Oc(u)&&(o=!1)}),o}function bl(n){if(n instanceof Dn&&n.name==="feature-state")return!1;var o=!0;return n.eachChild(function(u){o&&!bl(u)&&(o=!1)}),o}function Uc(n,o){if(n instanceof Dn&&o.indexOf(n.name)>=0)return!1;var u=!0;return n.eachChild(function(p){u&&!Uc(p,o)&&(u=!1)}),u}var wl=function(o,u){this.type=u.type,this.name=o,this.boundExpression=u};wl.parse=function(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");var p=o[1];return u.scope.has(p)?new wl(p,u.scope.get(p)):u.error('Unknown variable "'+p+'". Make sure "'+p+'" has been bound in an enclosing "let" expression before using it.',1)},wl.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},wl.prototype.eachChild=function(){},wl.prototype.outputDefined=function(){return!1},wl.prototype.serialize=function(){return["var",this.name]};var Tl=function(o,u,p,_,A){u===void 0&&(u=[]),_===void 0&&(_=new Qu),A===void 0&&(A=[]),this.registry=o,this.path=u,this.key=u.map(function(k){return"["+k+"]"}).join(""),this.scope=_,this.errors=A,this.expectedType=p};Tl.prototype.parse=function(o,u,p,_,A){return A===void 0&&(A={}),u?this.concat(u,p,_)._parse(o,A):this._parse(o,A)},Tl.prototype._parse=function(o,u){(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number")&&(o=["literal",o]);function p(Q,ie,me){return me==="assert"?new on(ie,[Q]):me==="coerce"?new Wo(ie,[Q]):Q}if(Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var _=o[0];if(typeof _!="string")return this.error("Expression name must be a string, but found "+typeof _+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var A=this.registry[_];if(A){var k=A.parse(o,this);if(!k)return null;if(this.expectedType){var F=this.expectedType,Y=k.type;if((F.kind==="string"||F.kind==="number"||F.kind==="boolean"||F.kind==="object"||F.kind==="array")&&Y.kind==="value")k=p(k,F,u.typeAnnotation||"assert");else if((F.kind==="color"||F.kind==="formatted"||F.kind==="resolvedImage")&&(Y.kind==="value"||Y.kind==="string"))k=p(k,F,u.typeAnnotation||"coerce");else if(this.checkSubtype(F,Y))return null}if(!(k instanceof Zo)&&k.type.kind!=="resolvedImage"&&wv(k)){var j=new js;try{k=new Zo(k.type,k.evaluate(j))}catch(Q){return this.error(Q.message),null}}return k}return this.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof o=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof o=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof o+" instead.")},Tl.prototype.concat=function(o,u,p){var _=typeof o=="number"?this.path.concat(o):this.path,A=p?this.scope.concat(p):this.scope;return new Tl(this.registry,_,u||null,A,this.errors)},Tl.prototype.error=function(o){for(var u=[],p=arguments.length-1;p-- >0;)u[p]=arguments[p+1];var _=""+this.key+u.map(function(A){return"["+A+"]"}).join("");this.errors.push(new bs(_,o))},Tl.prototype.checkSubtype=function(o,u){var p=fs(o,u);return p&&this.error(p),p};function wv(n){if(n instanceof wl)return wv(n.boundExpression);if(n instanceof Dn&&n.name==="error")return!1;if(n instanceof _l)return!1;if(n instanceof cs)return!1;var o=n instanceof Wo||n instanceof on,u=!0;return n.eachChild(function(p){o?u=u&&wv(p):u=u&&p instanceof Zo}),u?Oc(n)&&Uc(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Vc(n,o){for(var u=n.length-1,p=0,_=u,A=0,k,F;p<=_;)if(A=Math.floor((p+_)/2),k=n[A],F=n[A+1],k<=o){if(A===u||o<F)return A;p=A+1}else if(k>o)_=A-1;else throw new un("Input is not a number.");return 0}var As=function(o,u,p){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(var _=0,A=p;_<A.length;_+=1){var k=A[_],F=k[0],Y=k[1];this.labels.push(F),this.outputs.push(Y)}};As.parse=function(o,u){if(o.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!==0)return u.error("Expected an even number of arguments.");var p=u.parse(o[1],1,kr);if(!p)return null;var _=[],A=null;u.expectedType&&u.expectedType.kind!=="value"&&(A=u.expectedType);for(var k=1;k<o.length;k+=2){var F=k===1?-1/0:o[k],Y=o[k+1],j=k,Q=k+1;if(typeof F!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(_.length&&_[_.length-1][0]>=F)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);var ie=u.parse(Y,Q,A);if(!ie)return null;A=A||ie.type,_.push([F,ie])}return new As(A,p,_)},As.prototype.evaluate=function(o){var u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);var _=this.input.evaluate(o);if(_<=u[0])return p[0].evaluate(o);var A=u.length;if(_>=u[A-1])return p[A-1].evaluate(o);var k=Vc(u,_);return p[k].evaluate(o)},As.prototype.eachChild=function(o){o(this.input);for(var u=0,p=this.outputs;u<p.length;u+=1){var _=p[u];o(_)}},As.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},As.prototype.serialize=function(){for(var o=["step",this.input.serialize()],u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o};function fn(n,o,u){return n*(1-u)+o*u}function Fm(n,o,u){return new ni(fn(n.r,o.r,u),fn(n.g,o.g,u),fn(n.b,o.b,u),fn(n.a,o.a,u))}function qm(n,o,u){return n.map(function(p,_){return fn(p,o[_],u)})}var Al=Object.freeze({__proto__:null,number:fn,color:Fm,array:qm}),tf=.95047,hs=1,sp=1.08883,lp=4/29,rf=6/29,up=3*rf*rf,fp=rf*rf*rf,Nm=Math.PI/180,Bm=180/Math.PI;function Tv(n){return n>fp?Math.pow(n,1/3):n/up+lp}function Av(n){return n>rf?n*n*n:up*(n-lp)}function Mv(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Xf(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Hc(n){var o=Xf(n.r),u=Xf(n.g),p=Xf(n.b),_=Tv((.4124564*o+.3575761*u+.1804375*p)/tf),A=Tv((.2126729*o+.7151522*u+.072175*p)/hs),k=Tv((.0193339*o+.119192*u+.9503041*p)/sp);return{l:116*A-16,a:500*(_-A),b:200*(A-k),alpha:n.a}}function cp(n){var o=(n.l+16)/116,u=isNaN(n.a)?o:o+n.a/500,p=isNaN(n.b)?o:o-n.b/200;return o=hs*Av(o),u=tf*Av(u),p=sp*Av(p),new ni(Mv(3.2404542*u-1.5371385*o-.4985314*p),Mv(-.969266*u+1.8760108*o+.041556*p),Mv(.0556434*u-.2040259*o+1.0572252*p),n.alpha)}function Ri(n,o,u){return{l:fn(n.l,o.l,u),a:fn(n.a,o.a,u),b:fn(n.b,o.b,u),alpha:fn(n.alpha,o.alpha,u)}}function Om(n){var o=Hc(n),u=o.l,p=o.a,_=o.b,A=Math.atan2(_,p)*Bm;return{h:A<0?A+360:A,c:Math.sqrt(p*p+_*_),l:u,alpha:n.a}}function Gc(n){var o=n.h*Nm,u=n.c,p=n.l;return cp({l:p,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:n.alpha})}function Sv(n,o,u){var p=o-n;return n+u*(p>180||p<-180?p-360*Math.round(p/360):p)}function hp(n,o,u){return{h:Sv(n.h,o.h,u),c:fn(n.c,o.c,u),l:fn(n.l,o.l,u),alpha:fn(n.alpha,o.alpha,u)}}var af={forward:Hc,reverse:cp,interpolate:Ri},gu={forward:Om,reverse:Gc,interpolate:hp},kv=Object.freeze({__proto__:null,lab:af,hcl:gu}),_n=function(o,u,p,_,A){this.type=o,this.operator=u,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(var k=0,F=A;k<F.length;k+=1){var Y=F[k],j=Y[0],Q=Y[1];this.labels.push(j),this.outputs.push(Q)}};_n.interpolationFactor=function(o,u,p,_){var A=0;if(o.name==="exponential")A=jf(u,o.base,p,_);else if(o.name==="linear")A=jf(u,1,p,_);else if(o.name==="cubic-bezier"){var k=o.controlPoints,F=new f(k[0],k[1],k[2],k[3]);A=F.solve(jf(u,1,p,_))}return A},_n.parse=function(o,u){var p=o[0],_=o[1],A=o[2],k=o.slice(3);if(!Array.isArray(_)||_.length===0)return u.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){var F=_[1];if(typeof F!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:F}}else if(_[0]==="cubic-bezier"){var Y=_.slice(1);if(Y.length!==4||Y.some(function(Ke){return typeof Ke!="number"||Ke<0||Ke>1}))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:Y}}else return u.error("Unknown interpolation type "+String(_[0]),1,0);if(o.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!==0)return u.error("Expected an even number of arguments.");if(A=u.parse(A,2,kr),!A)return null;var j=[],Q=null;p==="interpolate-hcl"||p==="interpolate-lab"?Q=ws:u.expectedType&&u.expectedType.kind!=="value"&&(Q=u.expectedType);for(var ie=0;ie<k.length;ie+=2){var me=k[ie],ce=k[ie+1],Se=ie+3,qe=ie+4;if(typeof me!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Se);if(j.length&&j[j.length-1][0]>=me)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Se);var ot=u.parse(ce,qe,Q);if(!ot)return null;Q=Q||ot.type,j.push([me,ot])}return Q.kind!=="number"&&Q.kind!=="color"&&!(Q.kind==="array"&&Q.itemType.kind==="number"&&typeof Q.N=="number")?u.error("Type "+ki(Q)+" is not interpolatable."):new _n(Q,p,_,A,j)},_n.prototype.evaluate=function(o){var u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);var _=this.input.evaluate(o);if(_<=u[0])return p[0].evaluate(o);var A=u.length;if(_>=u[A-1])return p[A-1].evaluate(o);var k=Vc(u,_),F=u[k],Y=u[k+1],j=_n.interpolationFactor(this.interpolation,_,F,Y),Q=p[k].evaluate(o),ie=p[k+1].evaluate(o);return this.operator==="interpolate"?Al[this.type.kind.toLowerCase()](Q,ie,j):this.operator==="interpolate-hcl"?gu.reverse(gu.interpolate(gu.forward(Q),gu.forward(ie),j)):af.reverse(af.interpolate(af.forward(Q),af.forward(ie),j))},_n.prototype.eachChild=function(o){o(this.input);for(var u=0,p=this.outputs;u<p.length;u+=1){var _=p[u];o(_)}},_n.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},_n.prototype.serialize=function(){var o;this.interpolation.name==="linear"?o=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?o=["linear"]:o=["exponential",this.interpolation.base]:o=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var u=[this.operator,o,this.input.serialize()],p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u};function jf(n,o,u,p){var _=p-u,A=n-u;return _===0?0:o===1?A/_:(Math.pow(o,A)-1)/(Math.pow(o,_)-1)}var Js=function(o,u){this.type=o,this.args=u};Js.parse=function(o,u){if(o.length<2)return u.error("Expectected at least one argument.");var p=null,_=u.expectedType;_&&_.kind!=="value"&&(p=_);for(var A=[],k=0,F=o.slice(1);k<F.length;k+=1){var Y=F[k],j=u.parse(Y,1+A.length,p,void 0,{typeAnnotation:"omit"});if(!j)return null;p=p||j.type,A.push(j)}var Q=_&&A.some(function(ie){return fs(_,ie.type)});return Q?new Js(Ma,A):new Js(p,A)},Js.prototype.evaluate=function(o){for(var u=null,p=0,_,A=0,k=this.args;A<k.length;A+=1){var F=k[A];if(p++,u=F.evaluate(o),u&&u instanceof Pn&&!u.available&&(_||(_=u.name),u=null,p===this.args.length&&(u=_)),u!==null)break}return u},Js.prototype.eachChild=function(o){this.args.forEach(o)},Js.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},Js.prototype.serialize=function(){var o=["coalesce"];return this.eachChild(function(u){o.push(u.serialize())}),o};var Ml=function(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u};Ml.prototype.evaluate=function(o){return this.result.evaluate(o)},Ml.prototype.eachChild=function(o){for(var u=0,p=this.bindings;u<p.length;u+=1){var _=p[u];o(_[1])}o(this.result)},Ml.parse=function(o,u){if(o.length<4)return u.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var p=[],_=1;_<o.length-1;_+=2){var A=o[_];if(typeof A!="string")return u.error("Expected string, but found "+typeof A+" instead.",_);if(/[^a-zA-Z0-9_]/.test(A))return u.error("Variable names must contain only alphanumeric characters or '_'.",_);var k=u.parse(o[_+1],_+1);if(!k)return null;p.push([A,k])}var F=u.parse(o[o.length-1],o.length-1,u.expectedType,p);return F?new Ml(p,F):null},Ml.prototype.outputDefined=function(){return this.result.outputDefined()},Ml.prototype.serialize=function(){for(var o=["let"],u=0,p=this.bindings;u<p.length;u+=1){var _=p[u],A=_[0],k=_[1];o.push(A,k.serialize())}return o.push(this.result.serialize()),o};var Sl=function(o,u,p){this.type=o,this.index=u,this.input=p};Sl.parse=function(o,u){if(o.length!==3)return u.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,kr),_=u.parse(o[2],2,yo(u.expectedType||Ma));if(!p||!_)return null;var A=_.type;return new Sl(A.itemType,p,_)},Sl.prototype.evaluate=function(o){var u=this.index.evaluate(o),p=this.input.evaluate(o);if(u<0)throw new un("Array index out of bounds: "+u+" < 0.");if(u>=p.length)throw new un("Array index out of bounds: "+u+" > "+(p.length-1)+".");if(u!==Math.floor(u))throw new un("Array index must be an integer, but found "+u+" instead.");return p[u]},Sl.prototype.eachChild=function(o){o(this.index),o(this.input)},Sl.prototype.outputDefined=function(){return!1},Sl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var kl=function(o,u){this.type=Ta,this.needle=o,this.haystack=u};kl.parse=function(o,u){if(o.length!==3)return u.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Ma),_=u.parse(o[2],2,Ma);return!p||!_?null:Nc(p.type,[Ta,wa,kr,$u,Ma])?new kl(p,_):u.error("Expected first argument to be of type boolean, string, number or null, but found "+ki(p.type)+" instead")},kl.prototype.evaluate=function(o){var u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!mu(u,["boolean","string","number","null"]))throw new un("Expected first argument to be of type boolean, string, number or null, but found "+ki(nn(u))+" instead.");if(!mu(p,["string","array"]))throw new un("Expected second argument to be of type array or string, but found "+ki(nn(p))+" instead.");return p.indexOf(u)>=0},kl.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},kl.prototype.outputDefined=function(){return!0},kl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ks=function(o,u,p){this.type=kr,this.needle=o,this.haystack=u,this.fromIndex=p};Ks.parse=function(o,u){if(o.length<=2||o.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Ma),_=u.parse(o[2],2,Ma);if(!p||!_)return null;if(!Nc(p.type,[Ta,wa,kr,$u,Ma]))return u.error("Expected first argument to be of type boolean, string, number or null, but found "+ki(p.type)+" instead");if(o.length===4){var A=u.parse(o[3],3,kr);return A?new Ks(p,_,A):null}else return new Ks(p,_)},Ks.prototype.evaluate=function(o){var u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!mu(u,["boolean","string","number","null"]))throw new un("Expected first argument to be of type boolean, string, number or null, but found "+ki(nn(u))+" instead.");if(!mu(p,["string","array"]))throw new un("Expected second argument to be of type array or string, but found "+ki(nn(p))+" instead.");if(this.fromIndex){var _=this.fromIndex.evaluate(o);return p.indexOf(u,_)}return p.indexOf(u)},Ks.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},Ks.prototype.outputDefined=function(){return!1},Ks.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ms=function(o,u,p,_,A,k){this.inputType=o,this.type=u,this.input=p,this.cases=_,this.outputs=A,this.otherwise=k};Ms.parse=function(o,u){if(o.length<5)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!==1)return u.error("Expected an even number of arguments.");var p,_;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);for(var A={},k=[],F=2;F<o.length-1;F+=2){var Y=o[F],j=o[F+1];Array.isArray(Y)||(Y=[Y]);var Q=u.concat(F);if(Y.length===0)return Q.error("Expected at least one branch label.");for(var ie=0,me=Y;ie<me.length;ie+=1){var ce=me[ie];if(typeof ce!="number"&&typeof ce!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof ce=="number"&&Math.abs(ce)>Number.MAX_SAFE_INTEGER)return Q.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof ce=="number"&&Math.floor(ce)!==ce)return Q.error("Numeric branch labels must be integer values.");if(!p)p=nn(ce);else if(Q.checkSubtype(p,nn(ce)))return null;if(typeof A[String(ce)]!="undefined")return Q.error("Branch labels must be unique.");A[String(ce)]=k.length}var Se=u.parse(j,F,_);if(!Se)return null;_=_||Se.type,k.push(Se)}var qe=u.parse(o[1],1,Ma);if(!qe)return null;var ot=u.parse(o[o.length-1],o.length-1,_);return!ot||qe.type.kind!=="value"&&u.concat(1).checkSubtype(p,qe.type)?null:new Ms(p,_,qe,A,k,ot)},Ms.prototype.evaluate=function(o){var u=this.input.evaluate(o),p=nn(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise;return p.evaluate(o)},Ms.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},Ms.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})&&this.otherwise.outputDefined()},Ms.prototype.serialize=function(){for(var o=this,u=["match",this.input.serialize()],p=Object.keys(this.cases).sort(),_=[],A={},k=0,F=p;k<F.length;k+=1){var Y=F[k],j=A[this.cases[Y]];j===void 0?(A[this.cases[Y]]=_.length,_.push([this.cases[Y],[Y]])):_[j][1].push(Y)}for(var Q=function(qe){return o.inputType.kind==="number"?Number(qe):qe},ie=0,me=_;ie<me.length;ie+=1){var ce=me[ie],j=ce[0],Se=ce[1];Se.length===1?u.push(Q(Se[0])):u.push(Se.map(Q)),u.push(this.outputs[outputIndex$1].serialize())}return u.push(this.otherwise.serialize()),u};var Ss=function(o,u,p){this.type=o,this.branches=u,this.otherwise=p};Ss.parse=function(o,u){if(o.length<4)return u.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!==0)return u.error("Expected an odd number of arguments.");var p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);for(var _=[],A=1;A<o.length-1;A+=2){var k=u.parse(o[A],A,Ta);if(!k)return null;var F=u.parse(o[A+1],A+1,p);if(!F)return null;_.push([k,F]),p=p||F.type}var Y=u.parse(o[o.length-1],o.length-1,p);return Y?new Ss(p,_,Y):null},Ss.prototype.evaluate=function(o){for(var u=0,p=this.branches;u<p.length;u+=1){var _=p[u],A=_[0],k=_[1];if(A.evaluate(o))return k.evaluate(o)}return this.otherwise.evaluate(o)},Ss.prototype.eachChild=function(o){for(var u=0,p=this.branches;u<p.length;u+=1){var _=p[u],A=_[0],k=_[1];o(A),o(k)}o(this.otherwise)},Ss.prototype.outputDefined=function(){return this.branches.every(function(o){var u=o[0],p=o[1];return p.outputDefined()})&&this.otherwise.outputDefined()},Ss.prototype.serialize=function(){var o=["case"];return this.eachChild(function(u){o.push(u.serialize())}),o};var Cl=function(o,u,p,_){this.type=o,this.input=u,this.beginIndex=p,this.endIndex=_};Cl.parse=function(o,u){if(o.length<=2||o.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1,Ma),_=u.parse(o[2],2,kr);if(!p||!_)return null;if(!Nc(p.type,[yo(Ma),wa,Ma]))return u.error("Expected first argument to be of type array or string, but found "+ki(p.type)+" instead");if(o.length===4){var A=u.parse(o[3],3,kr);return A?new Cl(p.type,p,_,A):null}else return new Cl(p.type,p,_)},Cl.prototype.evaluate=function(o){var u=this.input.evaluate(o),p=this.beginIndex.evaluate(o);if(!mu(u,["string","array"]))throw new un("Expected first argument to be of type array or string, but found "+ki(nn(u))+" instead.");if(this.endIndex){var _=this.endIndex.evaluate(o);return u.slice(p,_)}return u.slice(p)},Cl.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},Cl.prototype.outputDefined=function(){return!1},Cl.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function vp(n,o){return n==="=="||n==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Um(n,o,u){return o===u}function Vm(n,o,u){return o!==u}function Hm(n,o,u){return o<u}function dp(n,o,u){return o>u}function pp(n,o,u){return o<=u}function Cv(n,o,u){return o>=u}function Ev(n,o,u,p){return p.compare(o,u)===0}function Jf(n,o,u,p){return!Ev(n,o,u,p)}function Zc(n,o,u,p){return p.compare(o,u)<0}function mp(n,o,u,p){return p.compare(o,u)>0}function Lv(n,o,u,p){return p.compare(o,u)<=0}function yp(n,o,u,p){return p.compare(o,u)>=0}function nf(n,o,u){var p=n!=="=="&&n!=="!=";return function(){function _(A,k,F){this.type=Ta,this.lhs=A,this.rhs=k,this.collator=F,this.hasUntypedArgument=A.type.kind==="value"||k.type.kind==="value"}return _.parse=function(k,F){if(k.length!==3&&k.length!==4)return F.error("Expected two or three arguments.");var Y=k[0],j=F.parse(k[1],1,Ma);if(!j)return null;if(!vp(Y,j.type))return F.concat(1).error('"'+Y+`" comparisons are not supported for type '`+ki(j.type)+"'.");var Q=F.parse(k[2],2,Ma);if(!Q)return null;if(!vp(Y,Q.type))return F.concat(2).error('"'+Y+`" comparisons are not supported for type '`+ki(Q.type)+"'.");if(j.type.kind!==Q.type.kind&&j.type.kind!=="value"&&Q.type.kind!=="value")return F.error("Cannot compare types '"+ki(j.type)+"' and '"+ki(Q.type)+"'.");p&&(j.type.kind==="value"&&Q.type.kind!=="value"?j=new on(Q.type,[j]):j.type.kind!=="value"&&Q.type.kind==="value"&&(Q=new on(j.type,[Q])));var ie=null;if(k.length===4){if(j.type.kind!=="string"&&Q.type.kind!=="string"&&j.type.kind!=="value"&&Q.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(ie=F.parse(k[3],3,pu),!ie)return null}return new _(j,Q,ie)},_.prototype.evaluate=function(k){var F=this.lhs.evaluate(k),Y=this.rhs.evaluate(k);if(p&&this.hasUntypedArgument){var j=nn(F),Q=nn(Y);if(j.kind!==Q.kind||!(j.kind==="string"||j.kind==="number"))throw new un('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+j.kind+", "+Q.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var ie=nn(F),me=nn(Y);if(ie.kind!=="string"||me.kind!=="string")return o(k,F,Y)}return this.collator?u(k,F,Y,this.collator.evaluate(k)):o(k,F,Y)},_.prototype.eachChild=function(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)},_.prototype.outputDefined=function(){return!0},_.prototype.serialize=function(){var k=[n];return this.eachChild(function(F){k.push(F.serialize())}),k},_}()}var Gm=nf("==",Um,Ev),gp=nf("!=",Vm,Jf),_p=nf("<",Hm,Zc),xp=nf(">",dp,mp),Pv=nf("<=",pp,Lv),Dv=nf(">=",Cv,yp),_u=function(o,u,p,_,A){this.type=wa,this.number=o,this.locale=u,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=A};_u.parse=function(o,u){if(o.length!==3)return u.error("Expected two arguments.");var p=u.parse(o[1],1,kr);if(!p)return null;var _=o[2];if(typeof _!="object"||Array.isArray(_))return u.error("NumberFormat options argument must be an object.");var A=null;if(_.locale&&(A=u.parse(_.locale,1,wa),!A))return null;var k=null;if(_.currency&&(k=u.parse(_.currency,1,wa),!k))return null;var F=null;if(_["min-fraction-digits"]&&(F=u.parse(_["min-fraction-digits"],1,kr),!F))return null;var Y=null;return _["max-fraction-digits"]&&(Y=u.parse(_["max-fraction-digits"],1,kr),!Y)?null:new _u(p,A,k,F,Y)},_u.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},_u.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},_u.prototype.outputDefined=function(){return!1},_u.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var El=function(o){this.type=kr,this.input=o};El.parse=function(o,u){if(o.length!==2)return u.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var p=u.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error("Expected argument of type string or array, but found "+ki(p.type)+" instead."):new El(p):null},El.prototype.evaluate=function(o){var u=this.input.evaluate(o);if(typeof u=="string")return u.length;if(Array.isArray(u))return u.length;throw new un("Expected value to be of type string or array, but found "+ki(nn(u))+" instead.")},El.prototype.eachChild=function(o){o(this.input)},El.prototype.outputDefined=function(){return!1},El.prototype.serialize=function(){var o=["length"];return this.eachChild(function(u){o.push(u.serialize())}),o};var Kf={"==":Gm,"!=":gp,">":xp,"<":_p,">=":Dv,"<=":Pv,array:on,at:Sl,boolean:on,case:Ss,coalesce:Js,collator:_l,format:Yo,image:Xs,in:kl,"index-of":Ks,interpolate:_n,"interpolate-hcl":_n,"interpolate-lab":_n,length:El,let:Ml,literal:Zo,match:Ms,number:on,"number-format":_u,object:on,slice:Cl,step:As,string:on,"to-boolean":Wo,"to-color":Wo,"to-number":Wo,"to-string":Wo,var:wl,within:cs};function zv(n,o){var u=o[0],p=o[1],_=o[2],A=o[3];u=u.evaluate(n),p=p.evaluate(n),_=_.evaluate(n);var k=A?A.evaluate(n):1,F=ep(u,p,_,k);if(F)throw new un(F);return new ni(u/255*k,p/255*k,_/255*k,k)}function Yc(n,o){return n in o}function Wc(n,o){var u=o[n];return typeof u=="undefined"?null:u}function Xc(n,o,u,p){for(;u<=p;){var _=u+p>>1;if(o[_]===n)return!0;o[_]>n?p=_-1:u=_+1}return!1}function Ll(n){return{type:n}}Dn.register(Kf,{error:[Ws,[wa],function(n,o){var u=o[0];throw new un(u.evaluate(n))}],typeof:[wa,[Ma],function(n,o){var u=o[0];return ki(nn(u.evaluate(n)))}],"to-rgba":[yo(kr,4),[ws],function(n,o){var u=o[0];return u.evaluate(n).toArray()}],rgb:[ws,[kr,kr,kr],zv],rgba:[ws,[kr,kr,kr,kr],zv],has:{type:Ta,overloads:[[[wa],function(n,o){var u=o[0];return Yc(u.evaluate(n),n.properties())}],[[wa,yl],function(n,o){var u=o[0],p=o[1];return Yc(u.evaluate(n),p.evaluate(n))}]]},get:{type:Ma,overloads:[[[wa],function(n,o){var u=o[0];return Wc(u.evaluate(n),n.properties())}],[[wa,yl],function(n,o){var u=o[0],p=o[1];return Wc(u.evaluate(n),p.evaluate(n))}]]},"feature-state":[Ma,[wa],function(n,o){var u=o[0];return Wc(u.evaluate(n),n.featureState||{})}],properties:[yl,[],function(n){return n.properties()}],"geometry-type":[wa,[],function(n){return n.geometryType()}],id:[Ma,[],function(n){return n.id()}],zoom:[kr,[],function(n){return n.globals.zoom}],"heatmap-density":[kr,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[kr,[],function(n){return n.globals.lineProgress||0}],accumulated:[Ma,[],function(n){return n.globals.accumulated===void 0?null:n.globals.accumulated}],"+":[kr,Ll(kr),function(n,o){for(var u=0,p=0,_=o;p<_.length;p+=1){var A=_[p];u+=A.evaluate(n)}return u}],"*":[kr,Ll(kr),function(n,o){for(var u=1,p=0,_=o;p<_.length;p+=1){var A=_[p];u*=A.evaluate(n)}return u}],"-":{type:kr,overloads:[[[kr,kr],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)-p.evaluate(n)}],[[kr],function(n,o){var u=o[0];return-u.evaluate(n)}]]},"/":[kr,[kr,kr],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)/p.evaluate(n)}],"%":[kr,[kr,kr],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)%p.evaluate(n)}],ln2:[kr,[],function(){return Math.LN2}],pi:[kr,[],function(){return Math.PI}],e:[kr,[],function(){return Math.E}],"^":[kr,[kr,kr],function(n,o){var u=o[0],p=o[1];return Math.pow(u.evaluate(n),p.evaluate(n))}],sqrt:[kr,[kr],function(n,o){var u=o[0];return Math.sqrt(u.evaluate(n))}],log10:[kr,[kr],function(n,o){var u=o[0];return Math.log(u.evaluate(n))/Math.LN10}],ln:[kr,[kr],function(n,o){var u=o[0];return Math.log(u.evaluate(n))}],log2:[kr,[kr],function(n,o){var u=o[0];return Math.log(u.evaluate(n))/Math.LN2}],sin:[kr,[kr],function(n,o){var u=o[0];return Math.sin(u.evaluate(n))}],cos:[kr,[kr],function(n,o){var u=o[0];return Math.cos(u.evaluate(n))}],tan:[kr,[kr],function(n,o){var u=o[0];return Math.tan(u.evaluate(n))}],asin:[kr,[kr],function(n,o){var u=o[0];return Math.asin(u.evaluate(n))}],acos:[kr,[kr],function(n,o){var u=o[0];return Math.acos(u.evaluate(n))}],atan:[kr,[kr],function(n,o){var u=o[0];return Math.atan(u.evaluate(n))}],min:[kr,Ll(kr),function(n,o){return Math.min.apply(Math,o.map(function(u){return u.evaluate(n)}))}],max:[kr,Ll(kr),function(n,o){return Math.max.apply(Math,o.map(function(u){return u.evaluate(n)}))}],abs:[kr,[kr],function(n,o){var u=o[0];return Math.abs(u.evaluate(n))}],round:[kr,[kr],function(n,o){var u=o[0],p=u.evaluate(n);return p<0?-Math.round(-p):Math.round(p)}],floor:[kr,[kr],function(n,o){var u=o[0];return Math.floor(u.evaluate(n))}],ceil:[kr,[kr],function(n,o){var u=o[0];return Math.ceil(u.evaluate(n))}],"filter-==":[Ta,[wa,Ma],function(n,o){var u=o[0],p=o[1];return n.properties()[u.value]===p.value}],"filter-id-==":[Ta,[Ma],function(n,o){var u=o[0];return n.id()===u.value}],"filter-type-==":[Ta,[wa],function(n,o){var u=o[0];return n.geometryType()===u.value}],"filter-<":[Ta,[wa,Ma],function(n,o){var u=o[0],p=o[1],_=n.properties()[u.value],A=p.value;return typeof _==typeof A&&_<A}],"filter-id-<":[Ta,[Ma],function(n,o){var u=o[0],p=n.id(),_=u.value;return typeof p==typeof _&&p<_}],"filter->":[Ta,[wa,Ma],function(n,o){var u=o[0],p=o[1],_=n.properties()[u.value],A=p.value;return typeof _==typeof A&&_>A}],"filter-id->":[Ta,[Ma],function(n,o){var u=o[0],p=n.id(),_=u.value;return typeof p==typeof _&&p>_}],"filter-<=":[Ta,[wa,Ma],function(n,o){var u=o[0],p=o[1],_=n.properties()[u.value],A=p.value;return typeof _==typeof A&&_<=A}],"filter-id-<=":[Ta,[Ma],function(n,o){var u=o[0],p=n.id(),_=u.value;return typeof p==typeof _&&p<=_}],"filter->=":[Ta,[wa,Ma],function(n,o){var u=o[0],p=o[1],_=n.properties()[u.value],A=p.value;return typeof _==typeof A&&_>=A}],"filter-id->=":[Ta,[Ma],function(n,o){var u=o[0],p=n.id(),_=u.value;return typeof p==typeof _&&p>=_}],"filter-has":[Ta,[Ma],function(n,o){var u=o[0];return u.value in n.properties()}],"filter-has-id":[Ta,[],function(n){return n.id()!==null&&n.id()!==void 0}],"filter-type-in":[Ta,[yo(wa)],function(n,o){var u=o[0];return u.value.indexOf(n.geometryType())>=0}],"filter-id-in":[Ta,[yo(Ma)],function(n,o){var u=o[0];return u.value.indexOf(n.id())>=0}],"filter-in-small":[Ta,[wa,yo(Ma)],function(n,o){var u=o[0],p=o[1];return p.value.indexOf(n.properties()[u.value])>=0}],"filter-in-large":[Ta,[wa,yo(Ma)],function(n,o){var u=o[0],p=o[1];return Xc(n.properties()[u.value],p.value,0,p.value.length-1)}],all:{type:Ta,overloads:[[[Ta,Ta],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)&&p.evaluate(n)}],[Ll(Ta),function(n,o){for(var u=0,p=o;u<p.length;u+=1){var _=p[u];if(!_.evaluate(n))return!1}return!0}]]},any:{type:Ta,overloads:[[[Ta,Ta],function(n,o){var u=o[0],p=o[1];return u.evaluate(n)||p.evaluate(n)}],[Ll(Ta),function(n,o){for(var u=0,p=o;u<p.length;u+=1){var _=p[u];if(_.evaluate(n))return!0}return!1}]]},"!":[Ta,[Ta],function(n,o){var u=o[0];return!u.evaluate(n)}],"is-supported-script":[Ta,[wa],function(n,o){var u=o[0],p=n.globals&&n.globals.isSupportedScript;return p?p(u.evaluate(n)):!0}],upcase:[wa,[wa],function(n,o){var u=o[0];return u.evaluate(n).toUpperCase()}],downcase:[wa,[wa],function(n,o){var u=o[0];return u.evaluate(n).toLowerCase()}],concat:[wa,Ll(Ma),function(n,o){return o.map(function(u){return Eo(u.evaluate(n))}).join("")}],"resolved-locale":[wa,[pu],function(n,o){var u=o[0];return u.evaluate(n).resolvedLocale()}]});function jc(n){return{result:"success",value:n}}function xu(n){return{result:"error",value:n}}function of(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function bp(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Jc(n){return!!n.expression&&n.expression.interpolated}function di(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Qf(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function wp(n){return n}function Tp(n,o){var u=o.type==="color",p=n.stops&&typeof n.stops[0][0]=="object",_=p||n.property!==void 0,A=p||!_,k=n.type||(Jc(o)?"exponential":"interval");if(u&&(n=du({},n),n.stops&&(n.stops=n.stops.map(function(lr){return[lr[0],ni.parse(lr[1])]})),n.default?n.default=ni.parse(n.default):n.default=ni.parse(o.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!kv[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);var F,Y,j;if(k==="exponential")F=Iv;else if(k==="interval")F=Mp;else if(k==="categorical"){F=Ap,Y=Object.create(null);for(var Q=0,ie=n.stops;Q<ie.length;Q+=1){var me=ie[Q];Y[me[0]]=me[1]}j=typeof n.stops[0][0]}else if(k==="identity")F=Sp;else throw new Error('Unknown function type "'+k+'"');if(p){for(var ce={},Se=[],qe=0;qe<n.stops.length;qe++){var ot=n.stops[qe],Ke=ot[0].zoom;ce[Ke]===void 0&&(ce[Ke]={zoom:Ke,type:n.type,property:n.property,default:n.default,stops:[]},Se.push(Ke)),ce[Ke].stops.push([ot[0].value,ot[1]])}for(var Mt=[],yt=0,At=Se;yt<At.length;yt+=1){var Pt=At[yt];Mt.push([ce[Pt].zoom,Tp(ce[Pt],o)])}var Wt={name:"linear"};return{kind:"composite",interpolationType:Wt,interpolationFactor:_n.interpolationFactor.bind(void 0,Wt),zoomStops:Mt.map(function(lr){return lr[0]}),evaluate:function(Rr,Sr){var zr=Rr.zoom;return Iv({stops:Mt,base:n.base},o,zr).evaluate(zr,Sr)}}}else if(A){var cr=k==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:cr,interpolationFactor:_n.interpolationFactor.bind(void 0,cr),zoomStops:n.stops.map(function(lr){return lr[0]}),evaluate:function(lr){var Rr=lr.zoom;return F(n,o,Rr,Y,j)}}}else return{kind:"source",evaluate:function(Rr,Sr){var zr=Sr&&Sr.properties?Sr.properties[n.property]:void 0;return zr===void 0?Pl(n.default,o.default):F(n,o,zr,Y,j)}}}function Pl(n,o,u){if(n!==void 0)return n;if(o!==void 0)return o;if(u!==void 0)return u}function Ap(n,o,u,p,_){var A=typeof u===_?p[u]:void 0;return Pl(A,n.default,o.default)}function Mp(n,o,u){if(di(u)!=="number")return Pl(n.default,o.default);var p=n.stops.length;if(p===1||u<=n.stops[0][0])return n.stops[0][1];if(u>=n.stops[p-1][0])return n.stops[p-1][1];var _=Vc(n.stops.map(function(A){return A[0]}),u);return n.stops[_][1]}function Iv(n,o,u){var p=n.base!==void 0?n.base:1;if(di(u)!=="number")return Pl(n.default,o.default);var _=n.stops.length;if(_===1||u<=n.stops[0][0])return n.stops[0][1];if(u>=n.stops[_-1][0])return n.stops[_-1][1];var A=Vc(n.stops.map(function(ie){return ie[0]}),u),k=Zm(u,p,n.stops[A][0],n.stops[A+1][0]),F=n.stops[A][1],Y=n.stops[A+1][1],j=Al[o.type]||wp;if(n.colorSpace&&n.colorSpace!=="rgb"){var Q=kv[n.colorSpace];j=function(ie,me){return Q.reverse(Q.interpolate(Q.forward(ie),Q.forward(me),k))}}return typeof F.evaluate=="function"?{evaluate:function(){for(var me=[],ce=arguments.length;ce--;)me[ce]=arguments[ce];var Se=F.evaluate.apply(void 0,me),qe=Y.evaluate.apply(void 0,me);if(!(Se===void 0||qe===void 0))return j(Se,qe,k)}}:j(F,Y,k)}function Sp(n,o,u){return o.type==="color"?u=ni.parse(u):o.type==="formatted"?u=gn.fromString(u.toString()):o.type==="resolvedImage"?u=Pn.fromString(u.toString()):di(u)!==o.type&&(o.type!=="enum"||!o.values[u])&&(u=void 0),Pl(u,n.default,o.default)}function Zm(n,o,u,p){var _=p-u,A=n-u;return _===0?0:o===1?A/_:(Math.pow(o,A)-1)/(Math.pow(o,_)-1)}var Dl=function(o,u){this.expression=o,this._warningHistory={},this._evaluator=new js,this._defaultValue=u?Wm(u):null,this._enumValues=u&&u.type==="enum"?u.values:null};Dl.prototype.evaluateWithoutErrorHandling=function(o,u,p,_,A,k){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)},Dl.prototype.evaluate=function(o,u,p,_,A,k){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=k||null;try{var F=this.expression.evaluate(this._evaluator);if(F==null||typeof F=="number"&&F!==F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new un("Expected value to be one of "+Object.keys(this._enumValues).map(function(Y){return JSON.stringify(Y)}).join(", ")+", but found "+JSON.stringify(F)+" instead.");return F}catch(Y){return this._warningHistory[Y.message]||(this._warningHistory[Y.message]=!0,typeof console!="undefined"&&console.warn(Y.message)),this._defaultValue}};function bu(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Kf}function $f(n,o){var u=new Tl(Kf,[],o?Rv(o):void 0),p=u.parse(n,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?jc(new Dl(p,o)):xu(u.errors)}var ks=function(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!bl(u.expression)};ks.prototype.evaluateWithoutErrorHandling=function(o,u,p,_,A,k){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,_,A,k)},ks.prototype.evaluate=function(o,u,p,_,A,k){return this._styleExpression.evaluate(o,u,p,_,A,k)};var Cs=function(o,u,p,_){this.kind=o,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!bl(u.expression),this.interpolationType=_};Cs.prototype.evaluateWithoutErrorHandling=function(o,u,p,_,A,k){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,_,A,k)},Cs.prototype.evaluate=function(o,u,p,_,A,k){return this._styleExpression.evaluate(o,u,p,_,A,k)},Cs.prototype.interpolationFactor=function(o,u,p){return this.interpolationType?_n.interpolationFactor(this.interpolationType,o,u,p):0};function Xo(n,o){if(n=$f(n,o),n.result==="error")return n;var u=n.value.expression,p=Oc(u);if(!p&&!of(o))return xu([new bs("","data expressions not supported")]);var _=Uc(u,["zoom"]);if(!_&&!bp(o))return xu([new bs("","zoom expressions not supported")]);var A=lf(u);if(!A&&!_)return xu([new bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(A instanceof bs)return xu([A]);if(A instanceof _n&&!Jc(o))return xu([new bs("",'"interpolate" expressions cannot be used with this property')]);if(!A)return jc(p?new ks("constant",n.value):new ks("source",n.value));var k=A instanceof _n?A.interpolation:void 0;return jc(p?new Cs("camera",n.value,A.labels,k):new Cs("composite",n.value,A.labels,k))}var sf=function(o,u){this._parameters=o,this._specification=u,du(this,Tp(this._parameters,this._specification))};sf.deserialize=function(o){return new sf(o._parameters,o._specification)},sf.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};function Ym(n,o){if(Qf(n))return new sf(n,o);if(bu(n)){var u=Xo(n,o);if(u.result==="error")throw new Error(u.value.map(function(_){return _.key+": "+_.message}).join(", "));return u.value}else{var p=n;return typeof n=="string"&&o.type==="color"&&(p=ni.parse(n)),{kind:"constant",evaluate:function(){return p}}}}function lf(n){var o=null;if(n instanceof Ml)o=lf(n.result);else if(n instanceof Js)for(var u=0,p=n.args;u<p.length;u+=1){var _=p[u];if(o=lf(_),o)break}else(n instanceof As||n instanceof _n)&&n.input instanceof Dn&&n.input.name==="zoom"&&(o=n);return o instanceof bs||n.eachChild(function(A){var k=lf(A);k instanceof bs?o=k:!o&&k?o=new bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&k&&o!==k&&(o=new bs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function Rv(n){var o={color:ws,string:wa,number:kr,enum:wa,boolean:Ta,formatted:us,resolvedImage:gl};return n.type==="array"?yo(o[n.value]||Ma,n.length):o[n.type]}function Wm(n){return n.type==="color"&&Qf(n.default)?new ni(0,0,0,0):n.type==="color"?ni.parse(n.default)||null:n.default===void 0?null:n.default}function vs(n){var o=n.key,u=n.value,p=n.valueSpec||{},_=n.objectElementValidators||{},A=n.style,k=n.styleSpec,F=[],Y=di(u);if(Y!=="object")return[new Or(o,u,"object expected, "+Y+" found")];for(var j in u){var Q=j.split(".")[0],ie=p[Q]||p["*"],me=void 0;if(_[Q])me=_[Q];else if(p[Q])me=li;else if(_["*"])me=_["*"];else if(p["*"])me=li;else{F.push(new Or(o,u[j],'unknown property "'+j+'"'));continue}F=F.concat(me({key:(o&&o+".")+j,value:u[j],valueSpec:ie,style:A,styleSpec:k,object:u,objectKey:j},u))}for(var ce in p)_[ce]||p[ce].required&&p[ce].default===void 0&&u[ce]===void 0&&F.push(new Or(o,u,'missing required property "'+ce+'"'));return F}function Fv(n){var o=n.value,u=n.valueSpec,p=n.style,_=n.styleSpec,A=n.key,k=n.arrayElementValidator||li;if(di(o)!=="array")return[new Or(A,o,"array expected, "+di(o)+" found")];if(u.length&&o.length!==u.length)return[new Or(A,o,"array length "+u.length+" expected, length "+o.length+" found")];if(u["min-length"]&&o.length<u["min-length"])return[new Or(A,o,"array length at least "+u["min-length"]+" expected, length "+o.length+" found")];var F={type:u.value,values:u.values};_.$version<7&&(F.function=u.function),di(u.value)==="object"&&(F=u.value);for(var Y=[],j=0;j<o.length;j++)Y=Y.concat(k({array:o,arrayIndex:j,value:o[j],valueSpec:F,style:p,styleSpec:_,key:A+"["+j+"]"}));return Y}function uf(n){var o=n.key,u=n.value,p=n.valueSpec,_=di(u);return _==="number"&&u!==u&&(_="NaN"),_!=="number"?[new Or(o,u,"number expected, "+_+" found")]:"minimum"in p&&u<p.minimum?[new Or(o,u,u+" is less than the minimum value "+p.minimum)]:"maximum"in p&&u>p.maximum?[new Or(o,u,u+" is greater than the maximum value "+p.maximum)]:[]}function Kc(n){var o=n.valueSpec,u=an(n.value.type),p,_={},A,k,F=u!=="categorical"&&n.value.property===void 0,Y=!F,j=di(n.value.stops)==="array"&&di(n.value.stops[0])==="array"&&di(n.value.stops[0][0])==="object",Q=vs({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:ie,default:Se}});return u==="identity"&&F&&Q.push(new Or(n.key,n.value,'missing required property "property"')),u!=="identity"&&!n.value.stops&&Q.push(new Or(n.key,n.value,'missing required property "stops"')),u==="exponential"&&n.valueSpec.expression&&!Jc(n.valueSpec)&&Q.push(new Or(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(Y&&!of(n.valueSpec)?Q.push(new Or(n.key,n.value,"property functions not supported")):F&&!bp(n.valueSpec)&&Q.push(new Or(n.key,n.value,"zoom functions not supported"))),(u==="categorical"||j)&&n.value.property===void 0&&Q.push(new Or(n.key,n.value,'"property" property is required')),Q;function ie(qe){if(u==="identity")return[new Or(qe.key,qe.value,'identity function may not have a "stops" property')];var ot=[],Ke=qe.value;return ot=ot.concat(Fv({key:qe.key,value:Ke,valueSpec:qe.valueSpec,style:qe.style,styleSpec:qe.styleSpec,arrayElementValidator:me})),di(Ke)==="array"&&Ke.length===0&&ot.push(new Or(qe.key,Ke,"array must have at least one stop")),ot}function me(qe){var ot=[],Ke=qe.value,Mt=qe.key;if(di(Ke)!=="array")return[new Or(Mt,Ke,"array expected, "+di(Ke)+" found")];if(Ke.length!==2)return[new Or(Mt,Ke,"array length 2 expected, length "+Ke.length+" found")];if(j){if(di(Ke[0])!=="object")return[new Or(Mt,Ke,"object expected, "+di(Ke[0])+" found")];if(Ke[0].zoom===void 0)return[new Or(Mt,Ke,"object stop key must have zoom")];if(Ke[0].value===void 0)return[new Or(Mt,Ke,"object stop key must have value")];if(k&&k>an(Ke[0].zoom))return[new Or(Mt,Ke[0].zoom,"stop zoom values must appear in ascending order")];an(Ke[0].zoom)!==k&&(k=an(Ke[0].zoom),A=void 0,_={}),ot=ot.concat(vs({key:Mt+"[0]",value:Ke[0],valueSpec:{zoom:{}},style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{zoom:uf,value:ce}}))}else ot=ot.concat(ce({key:Mt+"[0]",value:Ke[0],valueSpec:{},style:qe.style,styleSpec:qe.styleSpec},Ke));return bu(ml(Ke[1]))?ot.concat([new Or(Mt+"[1]",Ke[1],"expressions are not allowed in function stops.")]):ot.concat(li({key:Mt+"[1]",value:Ke[1],valueSpec:o,style:qe.style,styleSpec:qe.styleSpec}))}function ce(qe,ot){var Ke=di(qe.value),Mt=an(qe.value),yt=qe.value!==null?qe.value:ot;if(!p)p=Ke;else if(Ke!==p)return[new Or(qe.key,yt,Ke+" stop domain type must match previous stop domain type "+p)];if(Ke!=="number"&&Ke!=="string"&&Ke!=="boolean")return[new Or(qe.key,yt,"stop domain value must be a number, string, or boolean")];if(Ke!=="number"&&u!=="categorical"){var At="number expected, "+Ke+" found";return of(o)&&u===void 0&&(At+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Or(qe.key,yt,At)]}return u==="categorical"&&Ke==="number"&&(!isFinite(Mt)||Math.floor(Mt)!==Mt)?[new Or(qe.key,yt,"integer expected, found "+Mt)]:u!=="categorical"&&Ke==="number"&&A!==void 0&&Mt<A?[new Or(qe.key,yt,"stop domain values must appear in ascending order")]:(A=Mt,u==="categorical"&&Mt in _?[new Or(qe.key,yt,"stop domain values must be unique")]:(_[Mt]=!0,[]))}function Se(qe){return li({key:qe.key,value:qe.value,valueSpec:o,style:qe.style,styleSpec:qe.styleSpec})}}function wu(n){var o=(n.expressionContext==="property"?Xo:$f)(ml(n.value),n.valueSpec);if(o.result==="error")return o.value.map(function(p){return new Or(""+n.key+p.key,n.value,p.message)});var u=o.value.expression||o.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!u.outputDefined())return[new Or(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!bl(u))return[new Or(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!bl(u))return[new Or(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Uc(u,["zoom","feature-state"]))return[new Or(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Oc(u))return[new Or(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xm(n){var o=n.value,u=n.key,p=di(o);return p!=="boolean"?[new Or(u,o,"boolean expected, "+p+" found")]:[]}function jm(n){var o=n.key,u=n.value,p=di(u);return p!=="string"?[new Or(o,u,"color expected, "+p+" found")]:Zf(u)===null?[new Or(o,u,'color expected, "'+u+'" found')]:[]}function Qc(n){var o=n.key,u=n.value,p=n.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(an(u))===-1&&_.push(new Or(o,u,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(u)+" found")):Object.keys(p.values).indexOf(an(u))===-1&&_.push(new Or(o,u,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(u)+" found")),_}function go(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var o=0,u=n.slice(1);o<u.length;o+=1){var p=u[o];if(!go(p)&&typeof p!="boolean")return!1}return!0;default:return!0}}var kp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ff(n){if(n==null)return{filter:function(){return!0},needGeometry:!1};go(n)||(n=hf(n));var o=$f(n,kp);if(o.result==="error")throw new Error(o.value.map(function(p){return p.key+": "+p.message}).join(", "));var u=cf(n);return{filter:function(p,_,A){return o.value.evaluate(p,_,{},A)},needGeometry:u}}function zl(n,o){return n<o?-1:n>o?1:0}function cf(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(var o=1;o<n.length;o++)if(cf(n[o]))return!0;return!1}function hf(n){if(!n)return!0;var o=n[0];if(n.length<=1)return o!=="any";var u=o==="=="?qv(n[1],n[2],"=="):o==="!="?ec(qv(n[1],n[2],"==")):o==="<"||o===">"||o==="<="||o===">="?qv(n[1],n[2],o):o==="any"?Jm(n.slice(1)):o==="all"?["all"].concat(n.slice(1).map(hf)):o==="none"?["all"].concat(n.slice(1).map(hf).map(ec)):o==="in"?Cp(n[1],n.slice(2)):o==="!in"?ec(Cp(n[1],n.slice(2))):o==="has"?Nv(n[1]):o==="!has"?ec(Nv(n[1])):o==="within"?n:!0;return u}function qv(n,o,u){switch(n){case"$type":return["filter-type-"+u,o];case"$id":return["filter-id-"+u,o];default:return["filter-"+u,n,o]}}function Jm(n){return["any"].concat(n.map(hf))}function Cp(n,o){if(o.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(function(u){return typeof u!=typeof o[0]})?["filter-in-large",n,["literal",o.sort(zl)]]:["filter-in-small",n,["literal",o]]}}function Nv(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function ec(n){return["!",n]}function $c(n){return go(ml(n.value))?wu(du({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bv(n)}function Bv(n){var o=n.value,u=n.key;if(di(o)!=="array")return[new Or(u,o,"array expected, "+di(o)+" found")];var p=n.styleSpec,_,A=[];if(o.length<1)return[new Or(u,o,"filter array must have at least 1 element")];switch(A=A.concat(Qc({key:u+"[0]",value:o[0],valueSpec:p.filter_operator,style:n.style,styleSpec:n.styleSpec})),an(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&an(o[1])==="$type"&&A.push(new Or(u,o,'"$type" cannot be use with operator "'+o[0]+'"'));case"==":case"!=":o.length!==3&&A.push(new Or(u,o,'filter array for operator "'+o[0]+'" must have 3 elements'));case"in":case"!in":o.length>=2&&(_=di(o[1]),_!=="string"&&A.push(new Or(u+"[1]",o[1],"string expected, "+_+" found")));for(var k=2;k<o.length;k++)_=di(o[k]),an(o[1])==="$type"?A=A.concat(Qc({key:u+"["+k+"]",value:o[k],valueSpec:p.geometry_type,style:n.style,styleSpec:n.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&A.push(new Or(u+"["+k+"]",o[k],"string, number, or boolean expected, "+_+" found"));break;case"any":case"all":case"none":for(var F=1;F<o.length;F++)A=A.concat(Bv({key:u+"["+F+"]",value:o[F],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":_=di(o[1]),o.length!==2?A.push(new Or(u,o,'filter array for "'+o[0]+'" operator must have 2 elements')):_!=="string"&&A.push(new Or(u+"[1]",o[1],"string expected, "+_+" found"));break;case"within":_=di(o[1]),o.length!==2?A.push(new Or(u,o,'filter array for "'+o[0]+'" operator must have 2 elements')):_!=="object"&&A.push(new Or(u+"[1]",o[1],"object expected, "+_+" found"));break}return A}function Ep(n,o){var u=n.key,p=n.style,_=n.styleSpec,A=n.value,k=n.objectKey,F=_[o+"_"+n.layerType];if(!F)return[];var Y=k.match(/^(.*)-transition$/);if(o==="paint"&&Y&&F[Y[1]]&&F[Y[1]].transition)return li({key:u,value:A,valueSpec:_.transition,style:p,styleSpec:_});var j=n.valueSpec||F[k];if(!j)return[new Or(u,A,'unknown property "'+k+'"')];var Q;if(di(A)==="string"&&of(j)&&!j.tokens&&(Q=/^{([^}]+)}$/.exec(A)))return[new Or(u,A,'"'+k+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Q[1])+" }`.")];var ie=[];return n.layerType==="symbol"&&(k==="text-field"&&p&&!p.glyphs&&ie.push(new Or(u,A,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&Qf(ml(A))&&an(A.type)==="identity"&&ie.push(new Or(u,A,'"text-font" does not support identity functions'))),ie.concat(li({key:n.key,value:A,valueSpec:j,style:p,styleSpec:_,expressionContext:"property",propertyType:o,propertyKey:k}))}function Ov(n){return Ep(n,"paint")}function Lp(n){return Ep(n,"layout")}function Pp(n){var o=[],u=n.value,p=n.key,_=n.style,A=n.styleSpec;!u.type&&!u.ref&&o.push(new Or(p,u,'either "type" or "ref" is required'));var k=an(u.type),F=an(u.ref);if(u.id)for(var Y=an(u.id),j=0;j<n.arrayIndex;j++){var Q=_.layers[j];an(Q.id)===Y&&o.push(new Or(p,u.id,'duplicate layer id "'+u.id+'", previously used at line '+Q.id.__line__))}if("ref"in u){["type","source","source-layer","filter","layout"].forEach(function(Se){Se in u&&o.push(new Or(p,u[Se],'"'+Se+'" is prohibited for ref layers'))});var ie;_.layers.forEach(function(Se){an(Se.id)===F&&(ie=Se)}),ie?ie.ref?o.push(new Or(p,u.ref,"ref cannot reference another ref layer")):k=an(ie.type):o.push(new Or(p,u.ref,'ref layer "'+F+'" not found'))}else if(k!=="background")if(!u.source)o.push(new Or(p,u,'missing required property "source"'));else{var me=_.sources&&_.sources[u.source],ce=me&&an(me.type);me?ce==="vector"&&k==="raster"?o.push(new Or(p,u.source,'layer "'+u.id+'" requires a raster source')):ce==="raster"&&k!=="raster"?o.push(new Or(p,u.source,'layer "'+u.id+'" requires a vector source')):ce==="vector"&&!u["source-layer"]?o.push(new Or(p,u,'layer "'+u.id+'" must specify a "source-layer"')):ce==="raster-dem"&&k!=="hillshade"?o.push(new Or(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):k==="line"&&u.paint&&u.paint["line-gradient"]&&(ce!=="geojson"||!me.lineMetrics)&&o.push(new Or(p,u,'layer "'+u.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):o.push(new Or(p,u.source,'source "'+u.source+'" not found'))}return o=o.concat(vs({key:p,value:u,valueSpec:A.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return li({key:p+".type",value:u.type,valueSpec:A.layer.type,style:n.style,styleSpec:n.styleSpec,object:u,objectKey:"type"})},filter:$c,layout:function(qe){return vs({layer:u,key:qe.key,value:qe.value,style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{"*":function(Ke){return Lp(du({layerType:k},Ke))}}})},paint:function(qe){return vs({layer:u,key:qe.key,value:qe.value,style:qe.style,styleSpec:qe.styleSpec,objectElementValidators:{"*":function(Ke){return Ov(du({layerType:k},Ke))}}})}}})),o}function vf(n){var o=n.value,u=n.key,p=di(o);return p!=="string"?[new Or(u,o,"string expected, "+p+" found")]:[]}var eh={promoteId:Tu};function th(n){var o=n.value,u=n.key,p=n.styleSpec,_=n.style;if(!o.type)return[new Or(u,o,'"type" is required')];var A=an(o.type),k;switch(A){case"vector":case"raster":case"raster-dem":return k=vs({key:u,value:o,valueSpec:p["source_"+A.replace("-","_")],style:n.style,styleSpec:p,objectElementValidators:eh}),k;case"geojson":if(k=vs({key:u,value:o,valueSpec:p.source_geojson,style:_,styleSpec:p,objectElementValidators:eh}),o.cluster)for(var F in o.clusterProperties){var Y=o.clusterProperties[F],j=Y[0],Q=Y[1],ie=typeof j=="string"?[j,["accumulated"],["get",F]]:j;k.push.apply(k,wu({key:u+"."+F+".map",value:Q,expressionContext:"cluster-map"})),k.push.apply(k,wu({key:u+"."+F+".reduce",value:ie,expressionContext:"cluster-reduce"}))}return k;case"video":return vs({key:u,value:o,valueSpec:p.source_video,style:_,styleSpec:p});case"image":return vs({key:u,value:o,valueSpec:p.source_image,style:_,styleSpec:p});case"canvas":return[new Or(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qc({key:u+".type",value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,styleSpec:p})}}function Tu(n){var o=n.key,u=n.value;if(di(u)==="string")return vf({key:o,value:u});var p=[];for(var _ in u)p.push.apply(p,vf({key:o+"."+_,value:u[_]}));return p}function Uv(n){var o=n.value,u=n.styleSpec,p=u.light,_=n.style,A=[],k=di(o);if(o===void 0)return A;if(k!=="object")return A=A.concat([new Or("light",o,"object expected, "+k+" found")]),A;for(var F in o){var Y=F.match(/^(.*)-transition$/);Y&&p[Y[1]]&&p[Y[1]].transition?A=A.concat(li({key:F,value:o[F],valueSpec:u.transition,style:_,styleSpec:u})):p[F]?A=A.concat(li({key:F,value:o[F],valueSpec:p[F],style:_,styleSpec:u})):A=A.concat([new Or(F,o[F],'unknown property "'+F+'"')])}return A}function rh(n){return vf(n).length===0?[]:wu(n)}function Dp(n){return vf(n).length===0?[]:wu(n)}var df={"*":function(){return[]},array:Fv,boolean:Xm,number:uf,color:jm,constants:$d,enum:Qc,filter:$c,function:Kc,layer:Pp,object:vs,source:th,light:Uv,string:vf,formatted:rh,resolvedImage:Dp};function li(n){var o=n.value,u=n.valueSpec,p=n.styleSpec;if(u.expression&&Qf(an(o)))return Kc(n);if(u.expression&&bu(ml(o)))return wu(n);if(u.type&&df[u.type])return df[u.type](n);var _=vs(du({},n,{valueSpec:u.type?p[u.type]:u}));return _}function Ci(n){var o=n.value,u=n.key,p=vf(n);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new Or(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new Or(u,o,'"glyphs" url must include a "{range}" token'))),p}function so(n,o){o===void 0&&(o=Zt);var u=[];return u=u.concat(li({key:"",value:n,valueSpec:o.$root,styleSpec:o,style:n,objectElementValidators:{glyphs:Ci,"*":function(){return[]}}})),n.constants&&(u=u.concat($d({key:"constants",value:n.constants,style:n,styleSpec:o}))),Es(u)}so.source=_o(th),so.light=_o(Uv),so.layer=_o(Pp),so.filter=_o($c),so.paintProperty=_o(Ov),so.layoutProperty=_o(Lp);function Es(n){return[].concat(n).sort(function(o,u){return o.line-u.line})}function _o(n){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];return Es(n.apply(this,o))}}var ti=so,fi=ti.light,ah=ti.paintProperty,Il=ti.layoutProperty;function tc(n,o){var u=!1;if(o&&o.length)for(var p=0,_=o;p<_.length;p+=1){var A=_[p];n.fire(new Wr(new Error(A.message))),u=!0}return u}var pf=Ls,Rl=3;function Ls(n,o,u){var p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var _=new Int32Array(this.arrayBuffer);n=_[0],o=_[1],u=_[2],this.d=o+2*u;for(var A=0;A<this.d*this.d;A++){var k=_[Rl+A],F=_[Rl+A+1];p.push(k===F?null:_.subarray(k,F))}var Y=_[Rl+p.length],j=_[Rl+p.length+1];this.keys=_.subarray(Y,j),this.bboxes=_.subarray(j),this.insert=this._insertReadonly}else{this.d=o+2*u;for(var Q=0;Q<this.d*this.d;Q++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=u,this.scale=o/n,this.uid=0;var ie=u/o*n;this.min=-ie,this.max=n+ie}Ls.prototype.insert=function(n,o,u,p,_){this._forEachCell(o,u,p,_,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(_)},Ls.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ls.prototype._insertCell=function(n,o,u,p,_,A){this.cells[_].push(A)},Ls.prototype.query=function(n,o,u,p,_){var A=this.min,k=this.max;if(n<=A&&o<=A&&k<=u&&k<=p&&!_)return Array.prototype.slice.call(this.keys);var F=[],Y={};return this._forEachCell(n,o,u,p,this._queryCell,F,Y,_),F},Ls.prototype._queryCell=function(n,o,u,p,_,A,k,F){var Y=this.cells[_];if(Y!==null)for(var j=this.keys,Q=this.bboxes,ie=0;ie<Y.length;ie++){var me=Y[ie];if(k[me]===void 0){var ce=me*4;(F?F(Q[ce+0],Q[ce+1],Q[ce+2],Q[ce+3]):n<=Q[ce+2]&&o<=Q[ce+3]&&u>=Q[ce+0]&&p>=Q[ce+1])?(k[me]=!0,A.push(j[me])):k[me]=!1}}},Ls.prototype._forEachCell=function(n,o,u,p,_,A,k,F){for(var Y=this._convertToCellCoord(n),j=this._convertToCellCoord(o),Q=this._convertToCellCoord(u),ie=this._convertToCellCoord(p),me=Y;me<=Q;me++)for(var ce=j;ce<=ie;ce++){var Se=this.d*ce+me;if(!(F&&!F(this._convertFromCellCoord(me),this._convertFromCellCoord(ce),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ce+1)))&&_.call(this,n,o,u,p,Se,A,k,F))return}},Ls.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},Ls.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},Ls.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,o=Rl+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var _=new Int32Array(o+u+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var A=o,k=0;k<n.length;k++){var F=n[k];_[Rl+k]=A,_.set(F,A),A+=F.length}return _[Rl+n.length]=A,_.set(this.keys,A),A+=this.keys.length,_[Rl+n.length+1]=A,_.set(this.bboxes,A),A+=this.bboxes.length,_.buffer};var ih=b.ImageData,mf=b.ImageBitmap,Fl={};function y(n,o,u){u===void 0&&(u={}),Object.defineProperty(o,"_classRegistryKey",{value:n,writeable:!1}),Fl[n]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}y("Object",Object),pf.serialize=function(o,u){var p=o.toArrayBuffer();return u&&u.push(p),{buffer:p}},pf.deserialize=function(o){return new pf(o.buffer)},y("Grid",pf),y("Color",ni),y("Error",Error),y("ResolvedImage",Pn),y("StylePropertyFunction",sf),y("StyleExpression",Dl,{omit:["_evaluator"]}),y("ZoomDependentExpression",Cs),y("ZoomConstantExpression",ks),y("CompoundExpression",Dn,{omit:["_evaluate"]});for(var M in Kf)Kf[M]._classRegistryKey||y("Expression_"+M,Kf[M]);function D(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function N(n){return mf&&n instanceof mf}function U(n,o){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(D(n)||N(n))return o&&o.push(n),n;if(ArrayBuffer.isView(n)){var u=n;return o&&o.push(u.buffer),u}if(n instanceof ih)return o&&o.push(n.data.buffer),n;if(Array.isArray(n)){for(var p=[],_=0,A=n;_<A.length;_+=1){var k=A[_];p.push(U(k,o))}return p}if(typeof n=="object"){var F=n.constructor,Y=F._classRegistryKey;if(!Y)throw new Error("can't serialize object of unregistered class");var j=F.serialize?F.serialize(n,o):{};if(!F.serialize){for(var Q in n)if(n.hasOwnProperty(Q)&&!(Fl[Y].omit.indexOf(Q)>=0)){var ie=n[Q];j[Q]=Fl[Y].shallow.indexOf(Q)>=0?ie:U(ie,o)}n instanceof Error&&(j.message=n.message)}if(j.$name)throw new Error("$name property is reserved for worker serialization logic.");return Y!=="Object"&&(j.$name=Y),j}throw new Error("can't serialize object of type "+typeof n)}function Z(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||D(n)||N(n)||ArrayBuffer.isView(n)||n instanceof ih)return n;if(Array.isArray(n))return n.map(Z);if(typeof n=="object"){var o=n.$name||"Object",u=Fl[o],p=u.klass;if(!p)throw new Error("can't deserialize unregistered class "+o);if(p.deserialize)return p.deserialize(n);for(var _=Object.create(p.prototype),A=0,k=Object.keys(n);A<k.length;A+=1){var F=k[A];if(F!=="$name"){var Y=n[F];_[F]=Fl[o].shallow.indexOf(F)>=0?Y:Z(Y)}}return _}throw new Error("can't deserialize object of type "+typeof n)}var $=function(){this.first=!0};$.prototype.update=function(o,u){var p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),o!==this.lastZoom?(this.lastZoom=o,this.lastFloorZoom=p,!0):!1)};var X={"Latin-1 Supplement":function(n){return n>=128&&n<=255},Arabic:function(n){return n>=1536&&n<=1791},"Arabic Supplement":function(n){return n>=1872&&n<=1919},"Arabic Extended-A":function(n){return n>=2208&&n<=2303},"Hangul Jamo":function(n){return n>=4352&&n<=4607},"Unified Canadian Aboriginal Syllabics":function(n){return n>=5120&&n<=5759},Khmer:function(n){return n>=6016&&n<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(n){return n>=6320&&n<=6399},"General Punctuation":function(n){return n>=8192&&n<=8303},"Letterlike Symbols":function(n){return n>=8448&&n<=8527},"Number Forms":function(n){return n>=8528&&n<=8591},"Miscellaneous Technical":function(n){return n>=8960&&n<=9215},"Control Pictures":function(n){return n>=9216&&n<=9279},"Optical Character Recognition":function(n){return n>=9280&&n<=9311},"Enclosed Alphanumerics":function(n){return n>=9312&&n<=9471},"Geometric Shapes":function(n){return n>=9632&&n<=9727},"Miscellaneous Symbols":function(n){return n>=9728&&n<=9983},"Miscellaneous Symbols and Arrows":function(n){return n>=11008&&n<=11263},"CJK Radicals Supplement":function(n){return n>=11904&&n<=12031},"Kangxi Radicals":function(n){return n>=12032&&n<=12255},"Ideographic Description Characters":function(n){return n>=12272&&n<=12287},"CJK Symbols and Punctuation":function(n){return n>=12288&&n<=12351},Hiragana:function(n){return n>=12352&&n<=12447},Katakana:function(n){return n>=12448&&n<=12543},Bopomofo:function(n){return n>=12544&&n<=12591},"Hangul Compatibility Jamo":function(n){return n>=12592&&n<=12687},Kanbun:function(n){return n>=12688&&n<=12703},"Bopomofo Extended":function(n){return n>=12704&&n<=12735},"CJK Strokes":function(n){return n>=12736&&n<=12783},"Katakana Phonetic Extensions":function(n){return n>=12784&&n<=12799},"Enclosed CJK Letters and Months":function(n){return n>=12800&&n<=13055},"CJK Compatibility":function(n){return n>=13056&&n<=13311},"CJK Unified Ideographs Extension A":function(n){return n>=13312&&n<=19903},"Yijing Hexagram Symbols":function(n){return n>=19904&&n<=19967},"CJK Unified Ideographs":function(n){return n>=19968&&n<=40959},"Yi Syllables":function(n){return n>=40960&&n<=42127},"Yi Radicals":function(n){return n>=42128&&n<=42191},"Hangul Jamo Extended-A":function(n){return n>=43360&&n<=43391},"Hangul Syllables":function(n){return n>=44032&&n<=55215},"Hangul Jamo Extended-B":function(n){return n>=55216&&n<=55295},"Private Use Area":function(n){return n>=57344&&n<=63743},"CJK Compatibility Ideographs":function(n){return n>=63744&&n<=64255},"Arabic Presentation Forms-A":function(n){return n>=64336&&n<=65023},"Vertical Forms":function(n){return n>=65040&&n<=65055},"CJK Compatibility Forms":function(n){return n>=65072&&n<=65103},"Small Form Variants":function(n){return n>=65104&&n<=65135},"Arabic Presentation Forms-B":function(n){return n>=65136&&n<=65279},"Halfwidth and Fullwidth Forms":function(n){return n>=65280&&n<=65519}};function ae(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(Le(p.charCodeAt(0)))return!0}return!1}function pe(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(!_e(p.charCodeAt(0)))return!1}return!0}function _e(n){return!(X.Arabic(n)||X["Arabic Supplement"](n)||X["Arabic Extended-A"](n)||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n))}function Pe(n){return n<11904?!1:!!(X["Bopomofo Extended"](n)||X.Bopomofo(n)||X["CJK Compatibility Forms"](n)||X["CJK Compatibility Ideographs"](n)||X["CJK Compatibility"](n)||X["CJK Radicals Supplement"](n)||X["CJK Strokes"](n)||X["CJK Symbols and Punctuation"](n)||X["CJK Unified Ideographs Extension A"](n)||X["CJK Unified Ideographs"](n)||X["Enclosed CJK Letters and Months"](n)||X["Halfwidth and Fullwidth Forms"](n)||X.Hiragana(n)||X["Ideographic Description Characters"](n)||X["Kangxi Radicals"](n)||X["Katakana Phonetic Extensions"](n)||X.Katakana(n)||X["Vertical Forms"](n)||X["Yi Radicals"](n)||X["Yi Syllables"](n))}function Le(n){return n===746||n===747?!0:n<4352?!1:!!(X["Bopomofo Extended"](n)||X.Bopomofo(n)||X["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||X["CJK Compatibility Ideographs"](n)||X["CJK Compatibility"](n)||X["CJK Radicals Supplement"](n)||X["CJK Strokes"](n)||X["CJK Symbols and Punctuation"](n)&&!(n>=12296&&n<=12305)&&!(n>=12308&&n<=12319)&&n!==12336||X["CJK Unified Ideographs Extension A"](n)||X["CJK Unified Ideographs"](n)||X["Enclosed CJK Letters and Months"](n)||X["Hangul Compatibility Jamo"](n)||X["Hangul Jamo Extended-A"](n)||X["Hangul Jamo Extended-B"](n)||X["Hangul Jamo"](n)||X["Hangul Syllables"](n)||X.Hiragana(n)||X["Ideographic Description Characters"](n)||X.Kanbun(n)||X["Kangxi Radicals"](n)||X["Katakana Phonetic Extensions"](n)||X.Katakana(n)&&n!==12540||X["Halfwidth and Fullwidth Forms"](n)&&n!==65288&&n!==65289&&n!==65293&&!(n>=65306&&n<=65310)&&n!==65339&&n!==65341&&n!==65343&&!(n>=65371&&n<=65503)&&n!==65507&&!(n>=65512&&n<=65519)||X["Small Form Variants"](n)&&!(n>=65112&&n<=65118)&&!(n>=65123&&n<=65126)||X["Unified Canadian Aboriginal Syllabics"](n)||X["Unified Canadian Aboriginal Syllabics Extended"](n)||X["Vertical Forms"](n)||X["Yijing Hexagram Symbols"](n)||X["Yi Syllables"](n)||X["Yi Radicals"](n))}function Je(n){return!!(X["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||X["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||X["Letterlike Symbols"](n)||X["Number Forms"](n)||X["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||X["Control Pictures"](n)&&n!==9251||X["Optical Character Recognition"](n)||X["Enclosed Alphanumerics"](n)||X["Geometric Shapes"](n)||X["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||X["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||X["CJK Symbols and Punctuation"](n)||X.Katakana(n)||X["Private Use Area"](n)||X["CJK Compatibility Forms"](n)||X["Small Form Variants"](n)||X["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}function nt(n){return!(Le(n)||Je(n))}function ze(n){return X.Arabic(n)||X["Arabic Supplement"](n)||X["Arabic Extended-A"](n)||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n)}function Ue(n){return n>=1424&&n<=2303||X["Arabic Presentation Forms-A"](n)||X["Arabic Presentation Forms-B"](n)}function je(n,o){return!(!o&&Ue(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||X.Khmer(n))}function st(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(Ue(p.charCodeAt(0)))return!0}return!1}function it(n,o){for(var u=0,p=n;u<p.length;u+=1){var _=p[u];if(!je(_.charCodeAt(0),o))return!1}return!0}var We={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Bt=null,nr=We.unavailable,ur=null,sr=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(nr=We.error),Bt&&Bt(n)};function Dr(){Ir.fire(new ii("pluginStateChange",{pluginStatus:nr,pluginURL:ur}))}var Ir=new vr,ea=function(){return nr},Ur=function(n){return n({pluginStatus:nr,pluginURL:ur}),Ir.on("pluginStateChange",n),n},Kr=function(n,o,u){if(u===void 0&&(u=!1),nr===We.deferred||nr===We.loading||nr===We.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");ur=ht.resolveURL(n),nr=We.deferred,Bt=o,Dr(),u||Ba()},Ba=function(){if(nr!==We.deferred||!ur)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nr=We.loading,Dr(),ur&&$e({url:ur},function(n){n?sr(n):(nr=We.loaded,Dr())})},ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return nr===We.loaded||ri.applyArabicShaping!=null},isLoading:function(){return nr===We.loading},setState:function(o){nr=o.pluginStatus,ur=o.pluginURL},isParsed:function(){return ri.applyArabicShaping!=null&&ri.processBidirectionalText!=null&&ri.processStyledBidirectionalText!=null},getPluginURL:function(){return ur}},$a=function(){!ri.isLoading()&&!ri.isLoaded()&&ea()==="deferred"&&Ba()},Yt=function(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $,this.transition={})};Yt.prototype.isSupportedScript=function(o){return it(o,ri.isLoaded())},Yt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Yt.prototype.getCrossfadeParameters=function(){var o=this.zoom,u=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}};var Jr=function(o,u){this.property=o,this.value=u,this.expression=Ym(u===void 0?o.specification.default:u,o.specification)};Jr.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Jr.prototype.possiblyEvaluate=function(o,u,p){return this.property.possiblyEvaluate(this,o,u,p)};var oa=function(o){this.property=o,this.value=new Jr(o,void 0)};oa.prototype.transitioned=function(o,u){return new Ei(this.property,this.value,u,H({},o.transition,this.transition),o.now)},oa.prototype.untransitioned=function(){return new Ei(this.property,this.value,null,{},0)};var sa=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};sa.prototype.getValue=function(o){return Te(this._values[o].value.value)},sa.prototype.setValue=function(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new oa(this._values[o].property)),this._values[o].value=new Jr(this._values[o].property,u===null?void 0:Te(u))},sa.prototype.getTransition=function(o){return Te(this._values[o].transition)},sa.prototype.setTransition=function(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new oa(this._values[o].property)),this._values[o].transition=Te(u)||void 0},sa.prototype.serialize=function(){for(var o={},u=0,p=Object.keys(this._values);u<p.length;u+=1){var _=p[u],A=this.getValue(_);A!==void 0&&(o[_]=A);var k=this.getTransition(_);k!==void 0&&(o[_+"-transition"]=k)}return o},sa.prototype.transitioned=function(o,u){for(var p=new Oi(this._properties),_=0,A=Object.keys(this._values);_<A.length;_+=1){var k=A[_];p._values[k]=this._values[k].transitioned(o,u._values[k])}return p},sa.prototype.untransitioned=function(){for(var o=new Oi(this._properties),u=0,p=Object.keys(this._values);u<p.length;u+=1){var _=p[u];o._values[_]=this._values[_].untransitioned()}return o};var Ei=function(o,u,p,_,A){this.property=o,this.value=u,this.begin=A+_.delay||0,this.end=this.begin+_.duration||0,o.specification.transition&&(_.delay||_.duration)&&(this.prior=p)};Ei.prototype.possiblyEvaluate=function(o,u,p){var _=o.now||0,A=this.value.possiblyEvaluate(o,u,p),k=this.prior;if(k){if(_>this.end)return this.prior=null,A;if(this.value.isDataDriven())return this.prior=null,A;if(_<this.begin)return k.possiblyEvaluate(o,u,p);var F=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(o,u,p),A,C(F))}else return A};var Oi=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};Oi.prototype.possiblyEvaluate=function(o,u,p){for(var _=new xn(this._properties),A=0,k=Object.keys(this._values);A<k.length;A+=1){var F=k[A];_._values[F]=this._values[F].possiblyEvaluate(o,u,p)}return _},Oi.prototype.hasTransition=function(){for(var o=0,u=Object.keys(this._values);o<u.length;o+=1){var p=u[o];if(this._values[p].prior)return!0}return!1};var $i=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};$i.prototype.getValue=function(o){return Te(this._values[o].value)},$i.prototype.setValue=function(o,u){this._values[o]=new Jr(this._values[o].property,u===null?void 0:Te(u))},$i.prototype.serialize=function(){for(var o={},u=0,p=Object.keys(this._values);u<p.length;u+=1){var _=p[u],A=this.getValue(_);A!==void 0&&(o[_]=A)}return o},$i.prototype.possiblyEvaluate=function(o,u,p){for(var _=new xn(this._properties),A=0,k=Object.keys(this._values);A<k.length;A+=1){var F=k[A];_._values[F]=this._values[F].possiblyEvaluate(o,u,p)}return _};var xi=function(o,u,p){this.property=o,this.value=u,this.parameters=p};xi.prototype.isConstant=function(){return this.value.kind==="constant"},xi.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},xi.prototype.evaluate=function(o,u,p,_){return this.property.evaluate(this.value,this.parameters,o,u,p,_)};var xn=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};xn.prototype.get=function(o){return this._values[o]};var br=function(o){this.specification=o};br.prototype.possiblyEvaluate=function(o,u){return o.expression.evaluate(u)},br.prototype.interpolate=function(o,u,p){var _=Al[this.specification.type];return _?_(o,u,p):o};var Vr=function(o,u){this.specification=o,this.overrides=u};Vr.prototype.possiblyEvaluate=function(o,u,p,_){return o.expression.kind==="constant"||o.expression.kind==="camera"?new xi(this,{kind:"constant",value:o.expression.evaluate(u,null,{},p,_)},u):new xi(this,o.expression,u)},Vr.prototype.interpolate=function(o,u,p){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},o.parameters);var _=Al[this.specification.type];return _?new xi(this,{kind:"constant",value:_(o.value.value,u.value.value,p)},o.parameters):o},Vr.prototype.evaluate=function(o,u,p,_,A,k){return o.kind==="constant"?o.value:o.evaluate(u,p,_,A,k)};var Fi=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.possiblyEvaluate=function(p,_,A,k){if(p.value===void 0)return new xi(this,{kind:"constant",value:void 0},_);if(p.expression.kind==="constant"){var F=p.expression.evaluate(_,null,{},A,k),Y=p.property.specification.type==="resolvedImage",j=Y&&typeof F!="string"?F.name:F,Q=this._calculate(j,j,j,_);return new xi(this,{kind:"constant",value:Q},_)}else if(p.expression.kind==="camera"){var ie=this._calculate(p.expression.evaluate({zoom:_.zoom-1}),p.expression.evaluate({zoom:_.zoom}),p.expression.evaluate({zoom:_.zoom+1}),_);return new xi(this,{kind:"constant",value:ie},_)}else return new xi(this,p.expression,_)},o.prototype.evaluate=function(p,_,A,k,F,Y){if(p.kind==="source"){var j=p.evaluate(_,A,k,F,Y);return this._calculate(j,j,j,_)}else return p.kind==="composite"?this._calculate(p.evaluate({zoom:Math.floor(_.zoom)-1},A,k),p.evaluate({zoom:Math.floor(_.zoom)},A,k),p.evaluate({zoom:Math.floor(_.zoom)+1},A,k),_):p.value},o.prototype._calculate=function(p,_,A,k){var F=k.zoom;return F>k.zoomHistory.lastIntegerZoom?{from:p,to:_}:{from:A,to:_}},o.prototype.interpolate=function(p){return p},o}(Vr),Ti=function(o){this.specification=o};Ti.prototype.possiblyEvaluate=function(o,u,p,_){if(o.value!==void 0)if(o.expression.kind==="constant"){var A=o.expression.evaluate(u,null,{},p,_);return this._calculate(A,A,A,u)}else return this._calculate(o.expression.evaluate(new Yt(Math.floor(u.zoom-1),u)),o.expression.evaluate(new Yt(Math.floor(u.zoom),u)),o.expression.evaluate(new Yt(Math.floor(u.zoom+1),u)),u)},Ti.prototype._calculate=function(o,u,p,_){var A=_.zoom;return A>_.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:p,to:u}},Ti.prototype.interpolate=function(o){return o};var lo=function(o){this.specification=o};lo.prototype.possiblyEvaluate=function(o,u,p,_){return!!o.expression.evaluate(u,null,{},p,_)},lo.prototype.interpolate=function(){return!1};var zn=function(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var u in o){var p=o[u];p.specification.overridable&&this.overridableProperties.push(u);var _=this.defaultPropertyValues[u]=new Jr(p,void 0),A=this.defaultTransitionablePropertyValues[u]=new oa(p);this.defaultTransitioningPropertyValues[u]=A.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=_.possiblyEvaluate({})}};y("DataDrivenProperty",Vr),y("DataConstantProperty",br),y("CrossFadedDataDrivenProperty",Fi),y("CrossFadedProperty",Ti),y("ColorRampProperty",lo);var cn="-transition",pi=function(n){function o(u,p){if(n.call(this),this.id=u.id,this.type=u.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},u.type!=="custom"&&(u=u,this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),p.layout&&(this._unevaluatedLayout=new $i(p.layout)),p.paint)){this._transitionablePaint=new sa(p.paint);for(var _ in u.paint)this.setPaintProperty(_,u.paint[_],{validate:!1});for(var A in u.layout)this.setLayoutProperty(A,u.layout[A],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xn(p.paint)}}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},o.prototype.getLayoutProperty=function(p){return p==="visibility"?this.visibility:this._unevaluatedLayout.getValue(p)},o.prototype.setLayoutProperty=function(p,_,A){if(A===void 0&&(A={}),_!=null){var k="layers."+this.id+".layout."+p;if(this._validate(Il,k,p,_,A))return}if(p==="visibility"){this.visibility=_;return}this._unevaluatedLayout.setValue(p,_)},o.prototype.getPaintProperty=function(p){return de(p,cn)?this._transitionablePaint.getTransition(p.slice(0,-cn.length)):this._transitionablePaint.getValue(p)},o.prototype.setPaintProperty=function(p,_,A){if(A===void 0&&(A={}),_!=null){var k="layers."+this.id+".paint."+p;if(this._validate(ah,k,p,_,A))return!1}if(de(p,cn))return this._transitionablePaint.setTransition(p.slice(0,-cn.length),_||void 0),!1;var F=this._transitionablePaint._values[p],Y=F.property.specification["property-type"]==="cross-faded-data-driven",j=F.value.isDataDriven(),Q=F.value;this._transitionablePaint.setValue(p,_),this._handleSpecialPaintPropertyUpdate(p);var ie=this._transitionablePaint._values[p].value,me=ie.isDataDriven();return me||j||Y||this._handleOverridablePaintPropertyUpdate(p,Q,ie)},o.prototype._handleSpecialPaintPropertyUpdate=function(p){},o.prototype._handleOverridablePaintPropertyUpdate=function(p,_,A){return!1},o.prototype.isHidden=function(p){return this.minzoom&&p<this.minzoom||this.maxzoom&&p>=this.maxzoom?!0:this.visibility==="none"},o.prototype.updateTransitions=function(p){this._transitioningPaint=this._transitionablePaint.transitioned(p,this._transitioningPaint)},o.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},o.prototype.recalculate=function(p,_){p.getCrossfadeParameters&&(this._crossfadeParameters=p.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(p,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(p,void 0,_)},o.prototype.serialize=function(){var p={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(p.layout=p.layout||{},p.layout.visibility=this.visibility),ke(p,function(_,A){return _!==void 0&&!(A==="layout"&&!Object.keys(_).length)&&!(A==="paint"&&!Object.keys(_).length)})},o.prototype._validate=function(p,_,A,k,F){return F===void 0&&(F={}),F&&F.validate===!1?!1:tc(this,p.call(ti,{key:_,layerType:this.type,objectKey:A,value:k,styleSpec:Zt,style:{glyphs:!0,sprite:!0}}))},o.prototype.is3D=function(){return!1},o.prototype.isTileClipped=function(){return!1},o.prototype.hasOffscreenPass=function(){return!1},o.prototype.resize=function(){},o.prototype.isStateDependent=function(){for(var p in this.paint._values){var _=this.paint.get(p);if(!(!(_ instanceof xi)||!of(_.property.specification))&&(_.value.kind==="source"||_.value.kind==="composite")&&_.value.isStateDependent)return!0}return!1},o}(vr),jo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},uo=function(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ci=128,yf=5,Aa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Aa.serialize=function(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},Aa.deserialize=function(o){var u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u},Aa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Aa.prototype.clear=function(){this.length=0},Aa.prototype.resize=function(o){this.reserve(o),this.length=o},Aa.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(this.capacity*yf),ci),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}},Aa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function ui(n,o){o===void 0&&(o=1);var u=0,p=0,_=n.map(function(k){var F=ql(k.type),Y=u=Vv(u,Math.max(o,F)),j=k.components||1;return p=Math.max(p,F),u+=F*j,{name:k.name,type:k.type,components:j,offset:Y}}),A=Vv(u,Math.max(p,o));return{members:_,size:A,alignment:o}}function ql(n){return jo[n].BYTES_PER_ELEMENT}function Vv(n,o){return Math.ceil(n/o)*o}var rc=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_){var A=this.length;return this.resize(A+1),this.emplace(A,p,_)},o.prototype.emplace=function(p,_,A){var k=p*2;return this.int16[k+0]=_,this.int16[k+1]=A,p},o}(Aa);rc.prototype.bytesPerElement=4,y("StructArrayLayout2i4",rc);var Km=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k){var F=this.length;return this.resize(F+1),this.emplace(F,p,_,A,k)},o.prototype.emplace=function(p,_,A,k,F){var Y=p*4;return this.int16[Y+0]=_,this.int16[Y+1]=A,this.int16[Y+2]=k,this.int16[Y+3]=F,p},o}(Aa);Km.prototype.bytesPerElement=8,y("StructArrayLayout4i8",Km);var gf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y){var j=this.length;return this.resize(j+1),this.emplace(j,p,_,A,k,F,Y)},o.prototype.emplace=function(p,_,A,k,F,Y,j){var Q=p*6;return this.int16[Q+0]=_,this.int16[Q+1]=A,this.int16[Q+2]=k,this.int16[Q+3]=F,this.int16[Q+4]=Y,this.int16[Q+5]=j,p},o}(Aa);gf.prototype.bytesPerElement=12,y("StructArrayLayout2i4i12",gf);var nh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y){var j=this.length;return this.resize(j+1),this.emplace(j,p,_,A,k,F,Y)},o.prototype.emplace=function(p,_,A,k,F,Y,j){var Q=p*4,ie=p*8;return this.int16[Q+0]=_,this.int16[Q+1]=A,this.uint8[ie+4]=k,this.uint8[ie+5]=F,this.uint8[ie+6]=Y,this.uint8[ie+7]=j,p},o}(Aa);nh.prototype.bytesPerElement=8,y("StructArrayLayout2i4ub8",nh);var oh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_){var A=this.length;return this.resize(A+1),this.emplace(A,p,_)},o.prototype.emplace=function(p,_,A){var k=p*2;return this.float32[k+0]=_,this.float32[k+1]=A,p},o}(Aa);oh.prototype.bytesPerElement=8,y("StructArrayLayout2f8",oh);var Lo=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y,j,Q,ie,me){var ce=this.length;return this.resize(ce+1),this.emplace(ce,p,_,A,k,F,Y,j,Q,ie,me)},o.prototype.emplace=function(p,_,A,k,F,Y,j,Q,ie,me,ce){var Se=p*10;return this.uint16[Se+0]=_,this.uint16[Se+1]=A,this.uint16[Se+2]=k,this.uint16[Se+3]=F,this.uint16[Se+4]=Y,this.uint16[Se+5]=j,this.uint16[Se+6]=Q,this.uint16[Se+7]=ie,this.uint16[Se+8]=me,this.uint16[Se+9]=ce,p},o}(Aa);Lo.prototype.bytesPerElement=20,y("StructArrayLayout10ui20",Lo);var _f=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y,j,Q,ie,me,ce,Se){var qe=this.length;return this.resize(qe+1),this.emplace(qe,p,_,A,k,F,Y,j,Q,ie,me,ce,Se)},o.prototype.emplace=function(p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe){var ot=p*12;return this.int16[ot+0]=_,this.int16[ot+1]=A,this.int16[ot+2]=k,this.int16[ot+3]=F,this.uint16[ot+4]=Y,this.uint16[ot+5]=j,this.uint16[ot+6]=Q,this.uint16[ot+7]=ie,this.int16[ot+8]=me,this.int16[ot+9]=ce,this.int16[ot+10]=Se,this.int16[ot+11]=qe,p},o}(Aa);_f.prototype.bytesPerElement=24,y("StructArrayLayout4i4ui4i24",_f);var Qm=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,_,A)},o.prototype.emplace=function(p,_,A,k){var F=p*3;return this.float32[F+0]=_,this.float32[F+1]=A,this.float32[F+2]=k,p},o}(Aa);Qm.prototype.bytesPerElement=12,y("StructArrayLayout3f12",Qm);var $m=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var _=this.length;return this.resize(_+1),this.emplace(_,p)},o.prototype.emplace=function(p,_){var A=p*1;return this.uint32[A+0]=_,p},o}(Aa);$m.prototype.bytesPerElement=4,y("StructArrayLayout1ul4",$m);var Hv=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y,j,Q,ie){var me=this.length;return this.resize(me+1),this.emplace(me,p,_,A,k,F,Y,j,Q,ie)},o.prototype.emplace=function(p,_,A,k,F,Y,j,Q,ie,me){var ce=p*10,Se=p*5;return this.int16[ce+0]=_,this.int16[ce+1]=A,this.int16[ce+2]=k,this.int16[ce+3]=F,this.int16[ce+4]=Y,this.int16[ce+5]=j,this.uint32[Se+3]=Q,this.uint16[ce+8]=ie,this.uint16[ce+9]=me,p},o}(Aa);Hv.prototype.bytesPerElement=20,y("StructArrayLayout6i1ul2ui20",Hv);var zp=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y){var j=this.length;return this.resize(j+1),this.emplace(j,p,_,A,k,F,Y)},o.prototype.emplace=function(p,_,A,k,F,Y,j){var Q=p*6;return this.int16[Q+0]=_,this.int16[Q+1]=A,this.int16[Q+2]=k,this.int16[Q+3]=F,this.int16[Q+4]=Y,this.int16[Q+5]=j,p},o}(Aa);zp.prototype.bytesPerElement=12,y("StructArrayLayout2i2i2i12",zp);var Au=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F){var Y=this.length;return this.resize(Y+1),this.emplace(Y,p,_,A,k,F)},o.prototype.emplace=function(p,_,A,k,F,Y){var j=p*4,Q=p*8;return this.float32[j+0]=_,this.float32[j+1]=A,this.float32[j+2]=k,this.int16[Q+6]=F,this.int16[Q+7]=Y,p},o}(Aa);Au.prototype.bytesPerElement=16,y("StructArrayLayout2f1f2i16",Au);var Jo=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k){var F=this.length;return this.resize(F+1),this.emplace(F,p,_,A,k)},o.prototype.emplace=function(p,_,A,k,F){var Y=p*12,j=p*3;return this.uint8[Y+0]=_,this.uint8[Y+1]=A,this.float32[j+1]=k,this.float32[j+2]=F,p},o}(Aa);Jo.prototype.bytesPerElement=12,y("StructArrayLayout2ub2f12",Jo);var Mu=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,_,A)},o.prototype.emplace=function(p,_,A,k){var F=p*3;return this.uint16[F+0]=_,this.uint16[F+1]=A,this.uint16[F+2]=k,p},o}(Aa);Mu.prototype.bytesPerElement=6,y("StructArrayLayout3ui6",Mu);var Gv=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt){var At=this.length;return this.resize(At+1),this.emplace(At,p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt)},o.prototype.emplace=function(p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt,At){var Pt=p*24,Wt=p*12,cr=p*48;return this.int16[Pt+0]=_,this.int16[Pt+1]=A,this.uint16[Pt+2]=k,this.uint16[Pt+3]=F,this.uint32[Wt+2]=Y,this.uint32[Wt+3]=j,this.uint32[Wt+4]=Q,this.uint16[Pt+10]=ie,this.uint16[Pt+11]=me,this.uint16[Pt+12]=ce,this.float32[Wt+7]=Se,this.float32[Wt+8]=qe,this.uint8[cr+36]=ot,this.uint8[cr+37]=Ke,this.uint8[cr+38]=Mt,this.uint32[Wt+10]=yt,this.int16[Pt+22]=At,p},o}(Aa);Gv.prototype.bytesPerElement=48,y("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Gv);var Ip=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt,At,Pt,Wt,cr,lr,Rr,Sr,zr,Qr,Fr,Nr){var ma=this.length;return this.resize(ma+1),this.emplace(ma,p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt,At,Pt,Wt,cr,lr,Rr,Sr,zr,Qr,Fr,Nr)},o.prototype.emplace=function(p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt,At,Pt,Wt,cr,lr,Rr,Sr,zr,Qr,Fr,Nr,ma){var jr=p*34,Ya=p*17;return this.int16[jr+0]=_,this.int16[jr+1]=A,this.int16[jr+2]=k,this.int16[jr+3]=F,this.int16[jr+4]=Y,this.int16[jr+5]=j,this.int16[jr+6]=Q,this.int16[jr+7]=ie,this.uint16[jr+8]=me,this.uint16[jr+9]=ce,this.uint16[jr+10]=Se,this.uint16[jr+11]=qe,this.uint16[jr+12]=ot,this.uint16[jr+13]=Ke,this.uint16[jr+14]=Mt,this.uint16[jr+15]=yt,this.uint16[jr+16]=At,this.uint16[jr+17]=Pt,this.uint16[jr+18]=Wt,this.uint16[jr+19]=cr,this.uint16[jr+20]=lr,this.uint16[jr+21]=Rr,this.uint16[jr+22]=Sr,this.uint32[Ya+12]=zr,this.float32[Ya+13]=Qr,this.float32[Ya+14]=Fr,this.float32[Ya+15]=Nr,this.float32[Ya+16]=ma,p},o}(Aa);Ip.prototype.bytesPerElement=68,y("StructArrayLayout8i15ui1ul4f68",Ip);var sh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var _=this.length;return this.resize(_+1),this.emplace(_,p)},o.prototype.emplace=function(p,_){var A=p*1;return this.float32[A+0]=_,p},o}(Aa);sh.prototype.bytesPerElement=4,y("StructArrayLayout1f4",sh);var ey=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,_,A)},o.prototype.emplace=function(p,_,A,k){var F=p*3;return this.int16[F+0]=_,this.int16[F+1]=A,this.int16[F+2]=k,p},o}(Aa);ey.prototype.bytesPerElement=6,y("StructArrayLayout3i6",ey);var xf=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A){var k=this.length;return this.resize(k+1),this.emplace(k,p,_,A)},o.prototype.emplace=function(p,_,A,k){var F=p*2,Y=p*4;return this.uint32[F+0]=_,this.uint16[Y+2]=A,this.uint16[Y+3]=k,p},o}(Aa);xf.prototype.bytesPerElement=8,y("StructArrayLayout1ul2ui8",xf);var Zv=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_){var A=this.length;return this.resize(A+1),this.emplace(A,p,_)},o.prototype.emplace=function(p,_,A){var k=p*2;return this.uint16[k+0]=_,this.uint16[k+1]=A,p},o}(Aa);Zv.prototype.bytesPerElement=4,y("StructArrayLayout2ui4",Zv);var lh=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p){var _=this.length;return this.resize(_+1),this.emplace(_,p)},o.prototype.emplace=function(p,_){var A=p*1;return this.uint16[A+0]=_,p},o}(Aa);lh.prototype.bytesPerElement=2,y("StructArrayLayout1ui2",lh);var ac=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},o.prototype.emplaceBack=function(p,_,A,k){var F=this.length;return this.resize(F+1),this.emplace(F,p,_,A,k)},o.prototype.emplace=function(p,_,A,k,F){var Y=p*4;return this.float32[Y+0]=_,this.float32[Y+1]=A,this.float32[Y+2]=k,this.float32[Y+3]=F,p},o}(Aa);ac.prototype.bytesPerElement=16,y("StructArrayLayout4f16",ac);var c1=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return u.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},u.x1.get=function(){return this._structArray.int16[this._pos2+2]},u.y1.get=function(){return this._structArray.int16[this._pos2+3]},u.x2.get=function(){return this._structArray.int16[this._pos2+4]},u.y2.get=function(){return this._structArray.int16[this._pos2+5]},u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(o.prototype,u),o}(uo);c1.prototype.size=20;var ty=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new c1(this,p)},o}(Hv);y("CollisionBoxArray",ty);var ic=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},u.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},u.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},u.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},u.segment.get=function(){return this._structArray.uint16[this._pos2+10]},u.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},u.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},u.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},u.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},u.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},u.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},u.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},u.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},u.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},u.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},u.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(o.prototype,u),o}(uo);ic.prototype.size=48;var ry=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new ic(this,p)},o}(Gv);y("PlacedSymbolArray",ry);var uh=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return u.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},u.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},u.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},u.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},u.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},u.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},u.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},u.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},u.key.get=function(){return this._structArray.uint16[this._pos2+8]},u.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},u.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},u.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},u.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},u.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},u.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},u.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},u.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},u.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},u.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},u.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},u.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},u.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},u.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},u.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},u.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},u.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},u.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},u.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},u.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(o.prototype,u),o}(uo);uh.prototype.size=68;var h1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new uh(this,p)},o}(Ip);y("SymbolInstanceArray",h1);var v1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getoffsetX=function(p){return this.float32[p*1+0]},o}(sh);y("GlyphOffsetArray",v1);var Qs=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.getx=function(p){return this.int16[p*3+0]},o.prototype.gety=function(p){return this.int16[p*3+1]},o.prototype.gettileUnitDistanceFromAnchor=function(p){return this.int16[p*3+2]},o}(ey);y("SymbolLineVertexArray",Qs);var d1=function(n){function o(){n.apply(this,arguments)}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var u={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return u.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},u.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},u.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(o.prototype,u),o}(uo);d1.prototype.size=8;var p1=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.get=function(p){return new d1(this,p)},o}(xf);y("FeatureIndexArray",p1);var e3=ui([{name:"a_pos",components:2,type:"Int16"}],4),m1=e3.members,bn=function(o){o===void 0&&(o=[]),this.segments=o};bn.prototype.prepareSegment=function(o,u,p,_){var A=this.segments[this.segments.length-1];return o>bn.MAX_VERTEX_ARRAY_LENGTH&&Me("Max vertices per segment is "+bn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!A||A.vertexLength+o>bn.MAX_VERTEX_ARRAY_LENGTH||A.sortKey!==_)&&(A={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},_!==void 0&&(A.sortKey=_),this.segments.push(A)),A},bn.prototype.get=function(){return this.segments},bn.prototype.destroy=function(){for(var o=0,u=this.segments;o<u.length;o+=1){var p=u[o];for(var _ in p.vaos)p.vaos[_].destroy()}},bn.simpleSegment=function(o,u,p,_){return new bn([{vertexOffset:o,primitiveOffset:u,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])},bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,y("SegmentVector",bn);function g(n,o){return n=I(Math.floor(n),0,255),o=I(Math.floor(o),0,255),256*n+o}var c=ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),x=s(function(n){function o(u,p){var _,A,k,F,Y,j,Q,ie;for(_=u.length&3,A=u.length-_,k=p,Y=3432918353,j=461845907,ie=0;ie<A;)Q=u.charCodeAt(ie)&255|(u.charCodeAt(++ie)&255)<<8|(u.charCodeAt(++ie)&255)<<16|(u.charCodeAt(++ie)&255)<<24,++ie,Q=(Q&65535)*Y+(((Q>>>16)*Y&65535)<<16)&4294967295,Q=Q<<15|Q>>>17,Q=(Q&65535)*j+(((Q>>>16)*j&65535)<<16)&4294967295,k^=Q,k=k<<13|k>>>19,F=(k&65535)*5+(((k>>>16)*5&65535)<<16)&4294967295,k=(F&65535)+27492+(((F>>>16)+58964&65535)<<16);switch(Q=0,_){case 3:Q^=(u.charCodeAt(ie+2)&255)<<16;case 2:Q^=(u.charCodeAt(ie+1)&255)<<8;case 1:Q^=u.charCodeAt(ie)&255,Q=(Q&65535)*Y+(((Q>>>16)*Y&65535)<<16)&4294967295,Q=Q<<15|Q>>>17,Q=(Q&65535)*j+(((Q>>>16)*j&65535)<<16)&4294967295,k^=Q}return k^=u.length,k^=k>>>16,k=(k&65535)*2246822507+(((k>>>16)*2246822507&65535)<<16)&4294967295,k^=k>>>13,k=(k&65535)*3266489909+(((k>>>16)*3266489909&65535)<<16)&4294967295,k^=k>>>16,k>>>0}n.exports=o}),d=s(function(n){function o(u,p){for(var _=u.length,A=p^_,k=0,F;_>=4;)F=u.charCodeAt(k)&255|(u.charCodeAt(++k)&255)<<8|(u.charCodeAt(++k)&255)<<16|(u.charCodeAt(++k)&255)<<24,F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16),F^=F>>>24,F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16),A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16)^F,_-=4,++k;switch(_){case 3:A^=(u.charCodeAt(k+2)&255)<<16;case 2:A^=(u.charCodeAt(k+1)&255)<<8;case 1:A^=u.charCodeAt(k)&255,A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16)}return A^=A>>>13,A=(A&65535)*1540483477+(((A>>>16)*1540483477&65535)<<16),A^=A>>>15,A>>>0}n.exports=o}),w=x,L=x,R=d;w.murmur3=L,w.murmur2=R;var G=function(){this.ids=[],this.positions=[],this.indexed=!1};G.prototype.add=function(o,u,p,_){this.ids.push(te(o)),this.positions.push(u,p,_)},G.prototype.getPositions=function(o){for(var u=te(o),p=0,_=this.ids.length-1;p<_;){var A=p+_>>1;this.ids[A]>=u?_=A:p=A+1}for(var k=[];this.ids[p]===u;){var F=this.positions[3*p],Y=this.positions[3*p+1],j=this.positions[3*p+2];k.push({index:F,start:Y,end:j}),p++}return k},G.serialize=function(o,u){var p=new Float64Array(o.ids),_=new Uint32Array(o.positions);return ue(p,_,0,p.length-1),u&&u.push(p.buffer,_.buffer),{ids:p,positions:_}},G.deserialize=function(o){var u=new G;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u};var J=Math.pow(2,53)-1;function te(n){var o=+n;return!isNaN(o)&&o<=J?o:w(String(n))}function ue(n,o,u,p){for(;u<p;){for(var _=n[u+p>>1],A=u-1,k=p+1;;){do A++;while(n[A]<_);do k--;while(n[k]>_);if(A>=k)break;we(n,A,k),we(o,3*A,3*k),we(o,3*A+1,3*k+1),we(o,3*A+2,3*k+2)}k-u<p-k?(ue(n,o,u,k),u=k+1):(ue(n,o,k+1,p),p=k)}}function we(n,o,u){var p=n[o];n[o]=n[u],n[u]=p}y("FeaturePositionMap",G);var be=function(o,u){this.gl=o.gl,this.location=u},Ie=function(n){function o(u,p){n.call(this,u,p),this.current=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))},o}(be),Ze=function(n){function o(u,p){n.call(this,u,p),this.current=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))},o}(be),Ge=function(n){function o(u,p){n.call(this,u,p),this.current=[0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1])&&(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))},o}(be),Oe=function(n){function o(u,p){n.call(this,u,p),this.current=[0,0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1]||p[2]!==this.current[2])&&(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))},o}(be),Xe=function(n){function o(u,p){n.call(this,u,p),this.current=[0,0,0,0]}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p[0]!==this.current[0]||p[1]!==this.current[1]||p[2]!==this.current[2]||p[3]!==this.current[3])&&(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3]))},o}(be),ft=function(n){function o(u,p){n.call(this,u,p),this.current=ni.transparent}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){(p.r!==this.current.r||p.g!==this.current.g||p.b!==this.current.b||p.a!==this.current.a)&&(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a))},o}(be),Lt=new Float32Array(16),It=function(n){function o(u,p){n.call(this,u,p),this.current=Lt}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.set=function(p){if(p[12]!==this.current[12]||p[0]!==this.current[0]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);return}for(var _=1;_<16;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}},o}(be);function Xt(n){return[g(255*n.r,255*n.g),g(255*n.b,255*n.a)]}var er=function(o,u,p){this.value=o,this.uniformNames=u.map(function(_){return"u_"+_}),this.type=p};er.prototype.setUniform=function(o,u,p){o.set(p.constantOr(this.value))},er.prototype.getBinding=function(o,u,p){return this.type==="color"?new ft(o,u):new Ze(o,u)};var Ot=function(o,u){this.uniformNames=u.map(function(p){return"u_"+p}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ot.prototype.setConstantPatternPositions=function(o,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=o.tlbr},Ot.prototype.setUniform=function(o,u,p,_){var A=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;A&&o.set(A)},Ot.prototype.getBinding=function(o,u,p){return p.substr(0,9)==="u_pattern"?new Xe(o,u):new Ze(o,u)};var tr=function(o,u,p,_){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(function(A){return{name:"a_"+A,type:"Float32",components:p==="color"?2:1,offset:0}}),this.paintVertexArray=new _};tr.prototype.populatePaintArray=function(o,u,p,_,A){var k=this.paintVertexArray.length,F=this.expression.evaluate(new Yt(0),u,{},_,[],A);this.paintVertexArray.resize(o),this._setPaintValue(k,o,F)},tr.prototype.updatePaintArray=function(o,u,p,_){var A=this.expression.evaluate({zoom:0},p,_);this._setPaintValue(o,u,A)},tr.prototype._setPaintValue=function(o,u,p){if(this.type==="color")for(var _=Xt(p),A=o;A<u;A++)this.paintVertexArray.emplace(A,_[0],_[1]);else{for(var k=o;k<u;k++)this.paintVertexArray.emplace(k,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}},tr.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},tr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var fr=function(o,u,p,_,A,k){this.expression=o,this.uniformNames=u.map(function(F){return"u_"+F+"_t"}),this.type=p,this.useIntegerZoom=_,this.zoom=A,this.maxValue=0,this.paintVertexAttributes=u.map(function(F){return{name:"a_"+F,type:"Float32",components:p==="color"?4:2,offset:0}}),this.paintVertexArray=new k};fr.prototype.populatePaintArray=function(o,u,p,_,A){var k=this.expression.evaluate(new Yt(this.zoom),u,{},_,[],A),F=this.expression.evaluate(new Yt(this.zoom+1),u,{},_,[],A),Y=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(Y,o,k,F)},fr.prototype.updatePaintArray=function(o,u,p,_){var A=this.expression.evaluate({zoom:this.zoom},p,_),k=this.expression.evaluate({zoom:this.zoom+1},p,_);this._setPaintValue(o,u,A,k)},fr.prototype._setPaintValue=function(o,u,p,_){if(this.type==="color")for(var A=Xt(p),k=Xt(_),F=o;F<u;F++)this.paintVertexArray.emplace(F,A[0],A[1],k[0],k[1]);else{for(var Y=o;Y<u;Y++)this.paintVertexArray.emplace(Y,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}},fr.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},fr.prototype.setUniform=function(o,u){var p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,_=I(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(_)},fr.prototype.getBinding=function(o,u,p){return new Ze(o,u)};var gr=function(o,u,p,_,A,k){this.expression=o,this.type=u,this.useIntegerZoom=p,this.zoom=_,this.layerId=k,this.zoomInPaintVertexArray=new A,this.zoomOutPaintVertexArray=new A};gr.prototype.populatePaintArray=function(o,u,p){var _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(_,o,u.patterns&&u.patterns[this.layerId],p)},gr.prototype.updatePaintArray=function(o,u,p,_,A){this._setPaintValues(o,u,p.patterns&&p.patterns[this.layerId],A)},gr.prototype._setPaintValues=function(o,u,p,_){if(!(!_||!p)){var A=p.min,k=p.mid,F=p.max,Y=_[A],j=_[k],Q=_[F];if(!(!Y||!j||!Q))for(var ie=o;ie<u;ie++)this.zoomInPaintVertexArray.emplace(ie,j.tl[0],j.tl[1],j.br[0],j.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],j.pixelRatio,Y.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,j.tl[0],j.tl[1],j.br[0],j.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],j.pixelRatio,Q.pixelRatio)}},gr.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,c.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,c.members,this.expression.isStateDependent))},gr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Lr=function(o,u,p){this.binders={},this._buffers=[];var _=[];for(var A in o.paint._values)if(p(A)){var k=o.paint.get(A);if(!(!(k instanceof xi)||!of(k.property.specification))){var F=Xr(A,o.type),Y=k.value,j=k.property.specification.type,Q=k.property.useIntegerZoom,ie=k.property.specification["property-type"],me=ie==="cross-faded"||ie==="cross-faded-data-driven";if(Y.kind==="constant")this.binders[A]=me?new Ot(Y.value,F):new er(Y.value,F,j),_.push("/u_"+A);else if(Y.kind==="source"||me){var ce=xa(A,j,"source");this.binders[A]=me?new gr(Y,j,Q,u,ce,o.id):new tr(Y,F,j,ce),_.push("/a_"+A)}else{var Se=xa(A,j,"composite");this.binders[A]=new fr(Y,F,j,Q,u,Se),_.push("/z_"+A)}}}this.cacheKey=_.sort().join("")};Lr.prototype.getMaxValue=function(o){var u=this.binders[o];return u instanceof tr||u instanceof fr?u.maxValue:0},Lr.prototype.populatePaintArrays=function(o,u,p,_,A){for(var k in this.binders){var F=this.binders[k];(F instanceof tr||F instanceof fr||F instanceof gr)&&F.populatePaintArray(o,u,p,_,A)}},Lr.prototype.setConstantPatternPositions=function(o,u){for(var p in this.binders){var _=this.binders[p];_ instanceof Ot&&_.setConstantPatternPositions(o,u)}},Lr.prototype.updatePaintArrays=function(o,u,p,_,A){var k=!1;for(var F in o)for(var Y=u.getPositions(F),j=0,Q=Y;j<Q.length;j+=1){var ie=Q[j],me=p.feature(ie.index);for(var ce in this.binders){var Se=this.binders[ce];if((Se instanceof tr||Se instanceof fr||Se instanceof gr)&&Se.expression.isStateDependent===!0){var qe=_.paint.get(ce);Se.expression=qe.value,Se.updatePaintArray(ie.start,ie.end,me,o[F],A),k=!0}}}return k},Lr.prototype.defines=function(){var o=[];for(var u in this.binders){var p=this.binders[u];(p instanceof er||p instanceof Ot)&&o.push.apply(o,p.uniformNames.map(function(_){return"#define HAS_UNIFORM_"+_}))}return o},Lr.prototype.getBinderAttributes=function(){var o=[];for(var u in this.binders){var p=this.binders[u];if(p instanceof tr||p instanceof fr)for(var _=0;_<p.paintVertexAttributes.length;_++)o.push(p.paintVertexAttributes[_].name);else if(p instanceof gr)for(var A=0;A<c.members.length;A++)o.push(c.members[A].name)}return o},Lr.prototype.getBinderUniforms=function(){var o=[];for(var u in this.binders){var p=this.binders[u];if(p instanceof er||p instanceof Ot||p instanceof fr)for(var _=0,A=p.uniformNames;_<A.length;_+=1){var k=A[_];o.push(k)}}return o},Lr.prototype.getPaintVertexBuffers=function(){return this._buffers},Lr.prototype.getUniforms=function(o,u){var p=[];for(var _ in this.binders){var A=this.binders[_];if(A instanceof er||A instanceof Ot||A instanceof fr)for(var k=0,F=A.uniformNames;k<F.length;k+=1){var Y=F[k];if(u[Y]){var j=A.getBinding(o,u[Y],Y);p.push({name:Y,property:_,binding:j})}}}return p},Lr.prototype.setUniforms=function(o,u,p,_){for(var A=0,k=u;A<k.length;A+=1){var F=k[A],Y=F.name,j=F.property,Q=F.binding;this.binders[j].setUniform(Q,_,p.get(j),Y)}},Lr.prototype.updatePaintBuffers=function(o){this._buffers=[];for(var u in this.binders){var p=this.binders[u];if(o&&p instanceof gr){var _=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof tr||p instanceof fr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}},Lr.prototype.upload=function(o){for(var u in this.binders){var p=this.binders[u];(p instanceof tr||p instanceof fr||p instanceof gr)&&p.upload(o)}this.updatePaintBuffers()},Lr.prototype.destroy=function(){for(var o in this.binders){var u=this.binders[o];(u instanceof tr||u instanceof fr||u instanceof gr)&&u.destroy()}};var Mr=function(o,u,p){p===void 0&&(p=function(){return!0}),this.programConfigurations={};for(var _=0,A=o;_<A.length;_+=1){var k=A[_];this.programConfigurations[k.id]=new Lr(k,u,p)}this.needsUpload=!1,this._featureMap=new G,this._bufferOffset=0};Mr.prototype.populatePaintArrays=function(o,u,p,_,A,k){for(var F in this.programConfigurations)this.programConfigurations[F].populatePaintArrays(o,u,_,A,k);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},Mr.prototype.updatePaintArrays=function(o,u,p,_){for(var A=0,k=p;A<k.length;A+=1){var F=k[A];this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(o,this._featureMap,u,F,_)||this.needsUpload}},Mr.prototype.get=function(o){return this.programConfigurations[o]},Mr.prototype.upload=function(o){if(this.needsUpload){for(var u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}},Mr.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()};function Xr(n,o){var u={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return u[n]||[n.replace(o+"-","").replace(/-/g,"_")]}function Fa(n){var o={"line-pattern":{source:Lo,composite:Lo},"fill-pattern":{source:Lo,composite:Lo},"fill-extrusion-pattern":{source:Lo,composite:Lo}};return o[n]}function xa(n,o,u){var p={color:{source:oh,composite:ac},number:{source:sh,composite:oh}},_=Fa(n);return _&&_[u]||p[o][u]}y("ConstantBinder",er),y("CrossFadedConstantBinder",Ot),y("SourceExpressionBinder",tr),y("CrossFadedCompositeBinder",gr),y("CompositeExpressionBinder",fr),y("ProgramConfiguration",Lr,{omit:["_buffers"]}),y("ProgramConfigurationSet",Mr);var qr=8192,Sa=15,ia=Math.pow(2,Sa-1)-1,Za=-ia-1;function Va(n){for(var o=qr/n.extent,u=n.loadGeometry(),p=0;p<u.length;p++)for(var _=u[p],A=0;A<_.length;A++){var k=_[A],F=Math.round(k.x*o),Y=Math.round(k.y*o);k.x=I(F,Za,ia),k.y=I(Y,Za,ia),(F<k.x||F>k.x+1||Y<k.y||Y>k.y+1)&&Me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return u}function Ai(n,o){return{type:n.type,id:n.id,properties:n.properties,geometry:o?Va(n):[]}}function Pa(n,o,u,p,_){n.emplaceBack(o*2+(p+1)/2,u*2+(_+1)/2)}var mi=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new rc,this.indexArray=new Mu,this.segments=new bn,this.programConfigurations=new Mr(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};mi.prototype.populate=function(o,u,p){var _=this.layers[0],A=[],k=null;_.type==="circle"&&(k=_.layout.get("circle-sort-key"));for(var F=0,Y=o;F<Y.length;F+=1){var j=Y[F],Q=j.feature,ie=j.id,me=j.index,ce=j.sourceLayerIndex,Se=this.layers[0]._featureFilter.needGeometry,qe=Ai(Q,Se);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),qe,p)){var ot=k?k.evaluate(qe,{},p):void 0,Ke={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:ce,index:me,geometry:Se?qe.geometry:Va(Q),patterns:{},sortKey:ot};A.push(Ke)}}k&&A.sort(function(Sr,zr){return Sr.sortKey-zr.sortKey});for(var Mt=0,yt=A;Mt<yt.length;Mt+=1){var At=yt[Mt],Pt=At,Wt=Pt.geometry,cr=Pt.index,lr=Pt.sourceLayerIndex,Rr=o[cr].feature;this.addFeature(At,Wt,cr,p),u.featureIndex.insert(Rr,Wt,cr,lr,this.index)}},mi.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},mi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mi.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,m1),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},mi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mi.prototype.addFeature=function(o,u,p,_){for(var A=0,k=u;A<k.length;A+=1)for(var F=k[A],Y=0,j=F;Y<j.length;Y+=1){var Q=j[Y],ie=Q.x,me=Q.y;if(!(ie<0||ie>=qr||me<0||me>=qr)){var ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Se=ce.vertexLength;Pa(this.layoutVertexArray,ie,me,-1,-1),Pa(this.layoutVertexArray,ie,me,1,-1),Pa(this.layoutVertexArray,ie,me,1,1),Pa(this.layoutVertexArray,ie,me,-1,1),this.indexArray.emplaceBack(Se,Se+1,Se+2),this.indexArray.emplaceBack(Se,Se+3,Se+2),ce.vertexLength+=4,ce.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},_)},y("CircleBucket",mi,{omit:["layers"]});function na(n,o){for(var u=0;u<n.length;u++)if(Po(o,n[u]))return!0;for(var p=0;p<o.length;p++)if(Po(n,o[p]))return!0;return!!Ds(n,o)}function Oa(n,o,u){return!!(Po(n,o)||Nl(o,n,u))}function en(n,o){if(n.length===1)return Bl(o,n[0]);for(var u=0;u<o.length;u++)for(var p=o[u],_=0;_<p.length;_++)if(Po(n,p[_]))return!0;for(var A=0;A<n.length;A++)if(Bl(o,n[A]))return!0;for(var k=0;k<o.length;k++)if(Ds(n,o[k]))return!0;return!1}function In(n,o,u){for(var p=0;p<o.length;p++){var _=o[p];if(n.length>=3){for(var A=0;A<_.length;A++)if(Po(n,_[A]))return!0}if(Ps(n,_,u))return!0}return!1}function Ps(n,o,u){if(n.length>1){if(Ds(n,o))return!0;for(var p=0;p<o.length;p++)if(Nl(o[p],n,u))return!0}for(var _=0;_<n.length;_++)if(Nl(n[_],o,u))return!0;return!1}function Ds(n,o){if(n.length===0||o.length===0)return!1;for(var u=0;u<n.length-1;u++)for(var p=n[u],_=n[u+1],A=0;A<o.length-1;A++){var k=o[A],F=o[A+1];if($s(p,_,k,F))return!0}return!1}function $s(n,o,u,p){return De(n,u,p)!==De(o,u,p)&&De(n,o,u)!==De(n,o,p)}function Nl(n,o,u){var p=u*u;if(o.length===1)return n.distSqr(o[0])<p;for(var _=1;_<o.length;_++){var A=o[_-1],k=o[_];if(nc(n,A,k)<p)return!0}return!1}function nc(n,o,u){var p=o.distSqr(u);if(p===0)return n.distSqr(o);var _=((n.x-o.x)*(u.x-o.x)+(n.y-o.y)*(u.y-o.y))/p;return _<0?n.distSqr(o):_>1?n.distSqr(u):n.distSqr(u.sub(o)._mult(_)._add(o))}function Bl(n,o){for(var u=!1,p,_,A,k=0;k<n.length;k++){p=n[k];for(var F=0,Y=p.length-1;F<p.length;Y=F++)_=p[F],A=p[Y],_.y>o.y!=A.y>o.y&&o.x<(A.x-_.x)*(o.y-_.y)/(A.y-_.y)+_.x&&(u=!u)}return u}function Po(n,o){for(var u=!1,p=0,_=n.length-1;p<n.length;_=p++){var A=n[p],k=n[_];A.y>o.y!=k.y>o.y&&o.x<(k.x-A.x)*(o.y-A.y)/(k.y-A.y)+A.x&&(u=!u)}return u}function Ol(n,o,u,p,_){for(var A=0,k=n;A<k.length;A+=1){var F=k[A];if(o<=F.x&&u<=F.y&&p>=F.x&&_>=F.y)return!0}var Y=[new v(o,u),new v(o,_),new v(p,_),new v(p,u)];if(n.length>2)for(var j=0,Q=Y;j<Q.length;j+=1){var ie=Q[j];if(Po(n,ie))return!0}for(var me=0;me<n.length-1;me++){var ce=n[me],Se=n[me+1];if(Ko(ce,Se,Y))return!0}return!1}function Ko(n,o,u){var p=u[0],_=u[2];if(n.x<p.x&&o.x<p.x||n.x>_.x&&o.x>_.x||n.y<p.y&&o.y<p.y||n.y>_.y&&o.y>_.y)return!1;var A=De(n,o,u[0]);return A!==De(n,o,u[1])||A!==De(n,o,u[2])||A!==De(n,o,u[3])}function Do(n,o,u){var p=o.paint.get(n).value;return p.kind==="constant"?p.value:u.programConfigurations.get(o.id).getMaxValue(n)}function el(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Su(n,o,u,p,_){if(!o[0]&&!o[1])return n;var A=v.convert(o)._mult(_);u==="viewport"&&A._rotate(-p);for(var k=[],F=0;F<n.length;F++){var Y=n[F];k.push(Y.sub(A))}return k}var tl=new zn({"circle-sort-key":new Vr(Zt.layout_circle["circle-sort-key"])}),Rp=new zn({"circle-radius":new Vr(Zt.paint_circle["circle-radius"]),"circle-color":new Vr(Zt.paint_circle["circle-color"]),"circle-blur":new Vr(Zt.paint_circle["circle-blur"]),"circle-opacity":new Vr(Zt.paint_circle["circle-opacity"]),"circle-translate":new br(Zt.paint_circle["circle-translate"]),"circle-translate-anchor":new br(Zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new br(Zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new br(Zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vr(Zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vr(Zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vr(Zt.paint_circle["circle-stroke-opacity"])}),fh={paint:Rp,layout:tl},Vn=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=arguments,o=0,u=arguments.length;u--;)o+=n[u]*n[u];return Math.sqrt(o)});function Fp(){var n=new Vn(4);return Vn!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n}function Yv(n,o,u){var p=o[0],_=o[1],A=o[2],k=o[3],F=Math.sin(u),Y=Math.cos(u);return n[0]=p*Y+A*F,n[1]=_*Y+k*F,n[2]=p*-F+A*Y,n[3]=_*-F+k*Y,n}function xo(){var n=new Vn(9);return Vn!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function ch(n,o){var u=Math.sin(o),p=Math.cos(o);return n[0]=p,n[1]=u,n[2]=0,n[3]=-u,n[4]=p,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function qp(){var n=new Vn(16);return Vn!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function Np(n){var o=new Vn(16);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o}function Bp(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function hh(n,o){var u=o[0],p=o[1],_=o[2],A=o[3],k=o[4],F=o[5],Y=o[6],j=o[7],Q=o[8],ie=o[9],me=o[10],ce=o[11],Se=o[12],qe=o[13],ot=o[14],Ke=o[15],Mt=u*F-p*k,yt=u*Y-_*k,At=u*j-A*k,Pt=p*Y-_*F,Wt=p*j-A*F,cr=_*j-A*Y,lr=Q*qe-ie*Se,Rr=Q*ot-me*Se,Sr=Q*Ke-ce*Se,zr=ie*ot-me*qe,Qr=ie*Ke-ce*qe,Fr=me*Ke-ce*ot,Nr=Mt*Fr-yt*Qr+At*zr+Pt*Sr-Wt*Rr+cr*lr;return Nr?(Nr=1/Nr,n[0]=(F*Fr-Y*Qr+j*zr)*Nr,n[1]=(_*Qr-p*Fr-A*zr)*Nr,n[2]=(qe*cr-ot*Wt+Ke*Pt)*Nr,n[3]=(me*Wt-ie*cr-ce*Pt)*Nr,n[4]=(Y*Sr-k*Fr-j*Rr)*Nr,n[5]=(u*Fr-_*Sr+A*Rr)*Nr,n[6]=(ot*At-Se*cr-Ke*yt)*Nr,n[7]=(Q*cr-me*At+ce*yt)*Nr,n[8]=(k*Qr-F*Sr+j*lr)*Nr,n[9]=(p*Sr-u*Qr-A*lr)*Nr,n[10]=(Se*Wt-qe*At+Ke*Mt)*Nr,n[11]=(ie*At-Q*Wt-ce*Mt)*Nr,n[12]=(F*Rr-k*zr-Y*lr)*Nr,n[13]=(u*zr-p*Rr+_*lr)*Nr,n[14]=(qe*yt-Se*Pt-ot*Mt)*Nr,n[15]=(Q*Pt-ie*yt+me*Mt)*Nr,n):null}function vh(n,o,u){var p=o[0],_=o[1],A=o[2],k=o[3],F=o[4],Y=o[5],j=o[6],Q=o[7],ie=o[8],me=o[9],ce=o[10],Se=o[11],qe=o[12],ot=o[13],Ke=o[14],Mt=o[15],yt=u[0],At=u[1],Pt=u[2],Wt=u[3];return n[0]=yt*p+At*F+Pt*ie+Wt*qe,n[1]=yt*_+At*Y+Pt*me+Wt*ot,n[2]=yt*A+At*j+Pt*ce+Wt*Ke,n[3]=yt*k+At*Q+Pt*Se+Wt*Mt,yt=u[4],At=u[5],Pt=u[6],Wt=u[7],n[4]=yt*p+At*F+Pt*ie+Wt*qe,n[5]=yt*_+At*Y+Pt*me+Wt*ot,n[6]=yt*A+At*j+Pt*ce+Wt*Ke,n[7]=yt*k+At*Q+Pt*Se+Wt*Mt,yt=u[8],At=u[9],Pt=u[10],Wt=u[11],n[8]=yt*p+At*F+Pt*ie+Wt*qe,n[9]=yt*_+At*Y+Pt*me+Wt*ot,n[10]=yt*A+At*j+Pt*ce+Wt*Ke,n[11]=yt*k+At*Q+Pt*Se+Wt*Mt,yt=u[12],At=u[13],Pt=u[14],Wt=u[15],n[12]=yt*p+At*F+Pt*ie+Wt*qe,n[13]=yt*_+At*Y+Pt*me+Wt*ot,n[14]=yt*A+At*j+Pt*ce+Wt*Ke,n[15]=yt*k+At*Q+Pt*Se+Wt*Mt,n}function sn(n,o,u){var p=u[0],_=u[1],A=u[2],k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke;return o===n?(n[12]=o[0]*p+o[4]*_+o[8]*A+o[12],n[13]=o[1]*p+o[5]*_+o[9]*A+o[13],n[14]=o[2]*p+o[6]*_+o[10]*A+o[14],n[15]=o[3]*p+o[7]*_+o[11]*A+o[15]):(k=o[0],F=o[1],Y=o[2],j=o[3],Q=o[4],ie=o[5],me=o[6],ce=o[7],Se=o[8],qe=o[9],ot=o[10],Ke=o[11],n[0]=k,n[1]=F,n[2]=Y,n[3]=j,n[4]=Q,n[5]=ie,n[6]=me,n[7]=ce,n[8]=Se,n[9]=qe,n[10]=ot,n[11]=Ke,n[12]=k*p+Q*_+Se*A+o[12],n[13]=F*p+ie*_+qe*A+o[13],n[14]=Y*p+me*_+ot*A+o[14],n[15]=j*p+ce*_+Ke*A+o[15]),n}function Qo(n,o,u){var p=u[0],_=u[1],A=u[2];return n[0]=o[0]*p,n[1]=o[1]*p,n[2]=o[2]*p,n[3]=o[3]*p,n[4]=o[4]*_,n[5]=o[5]*_,n[6]=o[6]*_,n[7]=o[7]*_,n[8]=o[8]*A,n[9]=o[9]*A,n[10]=o[10]*A,n[11]=o[11]*A,n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n}function $o(n,o,u){var p=Math.sin(u),_=Math.cos(u),A=o[4],k=o[5],F=o[6],Y=o[7],j=o[8],Q=o[9],ie=o[10],me=o[11];return o!==n&&(n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15]),n[4]=A*_+j*p,n[5]=k*_+Q*p,n[6]=F*_+ie*p,n[7]=Y*_+me*p,n[8]=j*_-A*p,n[9]=Q*_-k*p,n[10]=ie*_-F*p,n[11]=me*_-Y*p,n}function Op(n,o,u){var p=Math.sin(u),_=Math.cos(u),A=o[0],k=o[1],F=o[2],Y=o[3],j=o[4],Q=o[5],ie=o[6],me=o[7];return o!==n&&(n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15]),n[0]=A*_+j*p,n[1]=k*_+Q*p,n[2]=F*_+ie*p,n[3]=Y*_+me*p,n[4]=j*_-A*p,n[5]=Q*_-k*p,n[6]=ie*_-F*p,n[7]=me*_-Y*p,n}function ay(n,o,u,p,_){var A=1/Math.tan(o/2),k;return n[0]=A/u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,_!=null&&_!==1/0?(k=1/(p-_),n[10]=(_+p)*k,n[14]=2*_*p*k):(n[10]=-1,n[14]=-2*p),n}function t3(n,o,u,p,_,A,k){var F=1/(o-u),Y=1/(p-_),j=1/(A-k);return n[0]=-2*F,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*Y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*j,n[11]=0,n[12]=(o+u)*F,n[13]=(_+p)*Y,n[14]=(k+A)*j,n[15]=1,n}var r3=vh;function Wv(){var n=new Vn(3);return Vn!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function a3(n){var o=new Vn(3);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o}function Up(n,o,u){return n[0]=o[0]+u[0],n[1]=o[1]+u[1],n[2]=o[2]+u[2],n}function i3(n,o,u){return n[0]=o[0]-u[0],n[1]=o[1]-u[1],n[2]=o[2]-u[2],n}function n3(n,o,u){return n[0]=o[0]*u,n[1]=o[1]*u,n[2]=o[2]*u,n}function iy(n,o){var u=o[0],p=o[1],_=o[2],A=u*u+p*p+_*_;return A>0&&(A=1/Math.sqrt(A)),n[0]=o[0]*A,n[1]=o[1]*A,n[2]=o[2]*A,n}function OZ(n,o){return n[0]*o[0]+n[1]*o[1]+n[2]*o[2]}function UZ(n,o,u){var p=o[0],_=o[1],A=o[2],k=u[0],F=u[1],Y=u[2];return n[0]=_*Y-A*F,n[1]=A*k-p*Y,n[2]=p*F-_*k,n}function VZ(n,o,u){var p=o[0],_=o[1],A=o[2];return n[0]=p*u[0]+_*u[3]+A*u[6],n[1]=p*u[1]+_*u[4]+A*u[7],n[2]=p*u[2]+_*u[5]+A*u[8],n}var HZ=i3,j0e=function(){var n=Wv();return function(o,u,p,_,A,k){var F,Y;for(u||(u=3),p||(p=0),_?Y=Math.min(_*u+p,o.length):Y=o.length,F=p;F<Y;F+=u)n[0]=o[F],n[1]=o[F+1],n[2]=o[F+2],A(n,n,k),o[F]=n[0],o[F+1]=n[1],o[F+2]=n[2];return o}}();function GZ(){var n=new Vn(4);return Vn!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function ZZ(n,o,u){return n[0]=o[0]*u,n[1]=o[1]*u,n[2]=o[2]*u,n[3]=o[3]*u,n}function YZ(n,o){return n[0]*o[0]+n[1]*o[1]+n[2]*o[2]+n[3]*o[3]}function y1(n,o,u){var p=o[0],_=o[1],A=o[2],k=o[3];return n[0]=u[0]*p+u[4]*_+u[8]*A+u[12]*k,n[1]=u[1]*p+u[5]*_+u[9]*A+u[13]*k,n[2]=u[2]*p+u[6]*_+u[10]*A+u[14]*k,n[3]=u[3]*p+u[7]*_+u[11]*A+u[15]*k,n}var J0e=function(){var n=GZ();return function(o,u,p,_,A,k){var F,Y;for(u||(u=4),p||(p=0),_?Y=Math.min(_*u+p,o.length):Y=o.length,F=p;F<Y;F+=u)n[0]=o[F],n[1]=o[F+1],n[2]=o[F+2],n[3]=o[F+3],A(n,n,k),o[F]=n[0],o[F+1]=n[1],o[F+2]=n[2],o[F+3]=n[3];return o}}();function WZ(){var n=new Vn(2);return Vn!=Float32Array&&(n[0]=0,n[1]=0),n}function XZ(n){var o=n[0],u=n[1];return o*o+u*u}var jZ=XZ,K0e=function(){var n=WZ();return function(o,u,p,_,A,k){var F,Y;for(u||(u=2),p||(p=0),_?Y=Math.min(_*u+p,o.length):Y=o.length,F=p;F<Y;F+=u)n[0]=o[F],n[1]=o[F+1],A(n,n,k),o[F]=n[0],o[F+1]=n[1];return o}}(),JZ=function(n){function o(u){n.call(this,u,fh)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new mi(p)},o.prototype.queryRadius=function(p){var _=p;return Do("circle-radius",this,_)+Do("circle-stroke-width",this,_)+el(this.paint.get("circle-translate"))},o.prototype.queryIntersectsFeature=function(p,_,A,k,F,Y,j,Q){for(var ie=Su(p,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Y.angle,j),me=this.paint.get("circle-radius").evaluate(_,A),ce=this.paint.get("circle-stroke-width").evaluate(_,A),Se=me+ce,qe=this.paint.get("circle-pitch-alignment")==="map",ot=qe?ie:KZ(ie,Q),Ke=qe?Se*j:Se,Mt=0,yt=k;Mt<yt.length;Mt+=1)for(var At=yt[Mt],Pt=0,Wt=At;Pt<Wt.length;Pt+=1){var cr=Wt[Pt],lr=qe?cr:KA(cr,Q),Rr=Ke,Sr=y1([],[cr.x,cr.y,0,1],Q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Rr*=Sr[3]/Y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Rr*=Y.cameraToCenterDistance/Sr[3]),Oa(ot,lr,Rr))return!0}return!1},o}(pi);function KA(n,o){var u=y1([],[n.x,n.y,0,1],o);return new v(u[0]/u[3],u[1]/u[3])}function KZ(n,o){return n.map(function(u){return KA(u,o)})}var QA=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(mi);y("HeatmapBucket",QA,{omit:["layers"]});function o3(n,o,u,p){var _=o.width,A=o.height;if(!p)p=new Uint8Array(_*A*u);else if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==_*A*u)throw new RangeError("mismatched image size");return n.width=_,n.height=A,n.data=p,n}function $A(n,o,u){var p=o.width,_=o.height;if(!(p===n.width&&_===n.height)){var A=o3({},{width:p,height:_},u);s3(n,A,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,p),height:Math.min(n.height,_)},u),n.width=p,n.height=_,n.data=A.data}}function s3(n,o,u,p,_,A){if(_.width===0||_.height===0)return o;if(_.width>n.width||_.height>n.height||u.x>n.width-_.width||u.y>n.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>o.width||_.height>o.height||p.x>o.width-_.width||p.y>o.height-_.height)throw new RangeError("out of range destination coordinates for image copy");for(var k=n.data,F=o.data,Y=0;Y<_.height;Y++)for(var j=((u.y+Y)*n.width+u.x)*A,Q=((p.y+Y)*o.width+p.x)*A,ie=0;ie<_.width*A;ie++)F[Q+ie]=k[j+ie];return o}var Xv=function(o,u){o3(this,o,1,u)};Xv.prototype.resize=function(o){$A(this,o,1)},Xv.prototype.clone=function(){return new Xv({width:this.width,height:this.height},new Uint8Array(this.data))},Xv.copy=function(o,u,p,_,A){s3(o,u,p,_,A,1)};var es=function(o,u){o3(this,o,4,u)};es.prototype.resize=function(o){$A(this,o,4)},es.prototype.replace=function(o,u){u?this.data.set(o):o instanceof Uint8ClampedArray?this.data=new Uint8Array(o.buffer):this.data=o},es.prototype.clone=function(){return new es({width:this.width,height:this.height},new Uint8Array(this.data))},es.copy=function(o,u,p,_,A){s3(o,u,p,_,A,4)},y("AlphaImage",Xv),y("RGBAImage",es);var QZ=new zn({"heatmap-radius":new Vr(Zt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vr(Zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new br(Zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lo(Zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new br(Zt.paint_heatmap["heatmap-opacity"])}),$Z={paint:QZ};function eM(n){var o={},u=n.resolution||256,p=n.clips?n.clips.length:1,_=n.image||new es({width:u,height:p}),A=function(Mt,yt,At){o[n.evaluationKey]=At;var Pt=n.expression.evaluate(o);_.data[Mt+yt+0]=Math.floor(Pt.r*255/Pt.a),_.data[Mt+yt+1]=Math.floor(Pt.g*255/Pt.a),_.data[Mt+yt+2]=Math.floor(Pt.b*255/Pt.a),_.data[Mt+yt+3]=Math.floor(Pt.a*255)};if(n.clips)for(var j=0,Q=0;j<p;++j,Q+=u*4)for(var ie=0,me=0;ie<u;ie++,me+=4){var ce=ie/(u-1),Se=n.clips[j],qe=Se.start,ot=Se.end,Ke=qe*(1-ce)+ot*ce;A(Q,me,Ke)}else for(var k=0,F=0;k<u;k++,F+=4){var Y=k/(u-1);A(0,F,Y)}return _}var eY=function(n){function o(u){n.call(this,u,$Z),this._updateColorRamp()}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new QA(p)},o.prototype._handleSpecialPaintPropertyUpdate=function(p){p==="heatmap-color"&&this._updateColorRamp()},o.prototype._updateColorRamp=function(){var p=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=eM({expression:p,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},o.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},o}(pi),tY=new zn({"hillshade-illumination-direction":new br(Zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new br(Zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new br(Zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new br(Zt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new br(Zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new br(Zt.paint_hillshade["hillshade-accent-color"])}),rY={paint:tY},aY=function(n){function o(u){n.call(this,u,rY)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},o}(pi),iY=ui([{name:"a_pos",components:2,type:"Int16"}],4),nY=iY.members,l3=g1,oY=g1;function g1(n,o,u){u=u||2;var p=o&&o.length,_=p?o[0]*u:n.length,A=tM(n,0,_,u,!0),k=[];if(!A||A.next===A.prev)return k;var F,Y,j,Q,ie,me,ce;if(p&&(A=cY(n,o,A,u)),n.length>80*u){F=j=n[0],Y=Q=n[1];for(var Se=u;Se<_;Se+=u)ie=n[Se],me=n[Se+1],ie<F&&(F=ie),me<Y&&(Y=me),ie>j&&(j=ie),me>Q&&(Q=me);ce=Math.max(j-F,Q-Y),ce=ce!==0?1/ce:0}return ny(A,k,u,F,Y,ce),k}function tM(n,o,u,p,_){var A,k;if(_===c3(n,o,u,p)>0)for(A=o;A<u;A+=p)k=iM(A,n[A],n[A+1],k);else for(A=u-p;A>=o;A-=p)k=iM(A,n[A],n[A+1],k);return k&&_1(k,k.next)&&(sy(k),k=k.next),k}function dh(n,o){if(!n)return n;o||(o=n);var u=n,p;do if(p=!1,!u.steiner&&(_1(u,u.next)||wn(u.prev,u,u.next)===0)){if(sy(u),u=o=u.prev,u===u.next)break;p=!0}else u=u.next;while(p||u!==o);return o}function ny(n,o,u,p,_,A,k){if(n){!k&&A&&mY(n,p,_,A);for(var F=n,Y,j;n.prev!==n.next;){if(Y=n.prev,j=n.next,A?lY(n,p,_,A):sY(n)){o.push(Y.i/u),o.push(n.i/u),o.push(j.i/u),sy(n),n=j.next,F=j.next;continue}if(n=j,n===F){k?k===1?(n=uY(dh(n),o,u),ny(n,o,u,p,_,A,2)):k===2&&fY(n,o,u,p,_,A):ny(dh(n),o,u,p,_,A,1);break}}}}function sY(n){var o=n.prev,u=n,p=n.next;if(wn(o,u,p)>=0)return!1;for(var _=n.next.next;_!==n.prev;){if(Vp(o.x,o.y,u.x,u.y,p.x,p.y,_.x,_.y)&&wn(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function lY(n,o,u,p){var _=n.prev,A=n,k=n.next;if(wn(_,A,k)>=0)return!1;for(var F=_.x<A.x?_.x<k.x?_.x:k.x:A.x<k.x?A.x:k.x,Y=_.y<A.y?_.y<k.y?_.y:k.y:A.y<k.y?A.y:k.y,j=_.x>A.x?_.x>k.x?_.x:k.x:A.x>k.x?A.x:k.x,Q=_.y>A.y?_.y>k.y?_.y:k.y:A.y>k.y?A.y:k.y,ie=u3(F,Y,o,u,p),me=u3(j,Q,o,u,p),ce=n.prevZ,Se=n.nextZ;ce&&ce.z>=ie&&Se&&Se.z<=me;){if(ce!==n.prev&&ce!==n.next&&Vp(_.x,_.y,A.x,A.y,k.x,k.y,ce.x,ce.y)&&wn(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,Se!==n.prev&&Se!==n.next&&Vp(_.x,_.y,A.x,A.y,k.x,k.y,Se.x,Se.y)&&wn(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;ce&&ce.z>=ie;){if(ce!==n.prev&&ce!==n.next&&Vp(_.x,_.y,A.x,A.y,k.x,k.y,ce.x,ce.y)&&wn(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;Se&&Se.z<=me;){if(Se!==n.prev&&Se!==n.next&&Vp(_.x,_.y,A.x,A.y,k.x,k.y,Se.x,Se.y)&&wn(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function uY(n,o,u){var p=n;do{var _=p.prev,A=p.next.next;!_1(_,A)&&rM(_,p,p.next,A)&&oy(_,A)&&oy(A,_)&&(o.push(_.i/u),o.push(p.i/u),o.push(A.i/u),sy(p),sy(p.next),p=n=A),p=p.next}while(p!==n);return dh(p)}function fY(n,o,u,p,_,A){var k=n;do{for(var F=k.next.next;F!==k.prev;){if(k.i!==F.i&&_Y(k,F)){var Y=aM(k,F);k=dh(k,k.next),Y=dh(Y,Y.next),ny(k,o,u,p,_,A),ny(Y,o,u,p,_,A);return}F=F.next}k=k.next}while(k!==n)}function cY(n,o,u,p){var _=[],A,k,F,Y,j;for(A=0,k=o.length;A<k;A++)F=o[A]*p,Y=A<k-1?o[A+1]*p:n.length,j=tM(n,F,Y,p,!1),j===j.next&&(j.steiner=!0),_.push(gY(j));for(_.sort(hY),A=0;A<_.length;A++)vY(_[A],u),u=dh(u,u.next);return u}function hY(n,o){return n.x-o.x}function vY(n,o){if(o=dY(n,o),o){var u=aM(o,n);dh(o,o.next),dh(u,u.next)}}function dY(n,o){var u=o,p=n.x,_=n.y,A=-1/0,k;do{if(_<=u.y&&_>=u.next.y&&u.next.y!==u.y){var F=u.x+(_-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(F<=p&&F>A){if(A=F,F===p){if(_===u.y)return u;if(_===u.next.y)return u.next}k=u.x<u.next.x?u:u.next}}u=u.next}while(u!==o);if(!k)return null;if(p===A)return k;var Y=k,j=k.x,Q=k.y,ie=1/0,me;u=k;do p>=u.x&&u.x>=j&&p!==u.x&&Vp(_<Q?p:A,_,j,Q,_<Q?A:p,_,u.x,u.y)&&(me=Math.abs(_-u.y)/(p-u.x),oy(u,n)&&(me<ie||me===ie&&(u.x>k.x||u.x===k.x&&pY(k,u)))&&(k=u,ie=me)),u=u.next;while(u!==Y);return k}function pY(n,o){return wn(n.prev,n,o.prev)<0&&wn(o.next,n,n.next)<0}function mY(n,o,u,p){var _=n;do _.z===null&&(_.z=u3(_.x,_.y,o,u,p)),_.prevZ=_.prev,_.nextZ=_.next,_=_.next;while(_!==n);_.prevZ.nextZ=null,_.prevZ=null,yY(_)}function yY(n){var o,u,p,_,A,k,F,Y,j=1;do{for(u=n,n=null,A=null,k=0;u;){for(k++,p=u,F=0,o=0;o<j&&(F++,p=p.nextZ,!!p);o++);for(Y=j;F>0||Y>0&&p;)F!==0&&(Y===0||!p||u.z<=p.z)?(_=u,u=u.nextZ,F--):(_=p,p=p.nextZ,Y--),A?A.nextZ=_:n=_,_.prevZ=A,A=_;u=p}A.nextZ=null,j*=2}while(k>1);return n}function u3(n,o,u,p,_){return n=32767*(n-u)*_,o=32767*(o-p)*_,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,n|o<<1}function gY(n){var o=n,u=n;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==n);return u}function Vp(n,o,u,p,_,A,k,F){return(_-k)*(o-F)-(n-k)*(A-F)>=0&&(n-k)*(p-F)-(u-k)*(o-F)>=0&&(u-k)*(A-F)-(_-k)*(p-F)>=0}function _Y(n,o){return n.next.i!==o.i&&n.prev.i!==o.i&&!xY(n,o)&&(oy(n,o)&&oy(o,n)&&bY(n,o)&&(wn(n.prev,n,o.prev)||wn(n,o.prev,o))||_1(n,o)&&wn(n.prev,n,n.next)>0&&wn(o.prev,o,o.next)>0)}function wn(n,o,u){return(o.y-n.y)*(u.x-o.x)-(o.x-n.x)*(u.y-o.y)}function _1(n,o){return n.x===o.x&&n.y===o.y}function rM(n,o,u,p){var _=b1(wn(n,o,u)),A=b1(wn(n,o,p)),k=b1(wn(u,p,n)),F=b1(wn(u,p,o));return!!(_!==A&&k!==F||_===0&&x1(n,u,o)||A===0&&x1(n,p,o)||k===0&&x1(u,n,p)||F===0&&x1(u,o,p))}function x1(n,o,u){return o.x<=Math.max(n.x,u.x)&&o.x>=Math.min(n.x,u.x)&&o.y<=Math.max(n.y,u.y)&&o.y>=Math.min(n.y,u.y)}function b1(n){return n>0?1:n<0?-1:0}function xY(n,o){var u=n;do{if(u.i!==n.i&&u.next.i!==n.i&&u.i!==o.i&&u.next.i!==o.i&&rM(u,u.next,n,o))return!0;u=u.next}while(u!==n);return!1}function oy(n,o){return wn(n.prev,n,n.next)<0?wn(n,o,n.next)>=0&&wn(n,n.prev,o)>=0:wn(n,o,n.prev)<0||wn(n,n.next,o)<0}function bY(n,o){var u=n,p=!1,_=(n.x+o.x)/2,A=(n.y+o.y)/2;do u.y>A!=u.next.y>A&&u.next.y!==u.y&&_<(u.next.x-u.x)*(A-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==n);return p}function aM(n,o){var u=new f3(n.i,n.x,n.y),p=new f3(o.i,o.x,o.y),_=n.next,A=o.prev;return n.next=o,o.prev=n,u.next=_,_.prev=u,p.next=u,u.prev=p,A.next=p,p.prev=A,p}function iM(n,o,u,p){var _=new f3(n,o,u);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function sy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function f3(n,o,u){this.i=n,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}g1.deviation=function(n,o,u,p){var _=o&&o.length,A=_?o[0]*u:n.length,k=Math.abs(c3(n,0,A,u));if(_)for(var F=0,Y=o.length;F<Y;F++){var j=o[F]*u,Q=F<Y-1?o[F+1]*u:n.length;k-=Math.abs(c3(n,j,Q,u))}var ie=0;for(F=0;F<p.length;F+=3){var me=p[F]*u,ce=p[F+1]*u,Se=p[F+2]*u;ie+=Math.abs((n[me]-n[Se])*(n[ce+1]-n[me+1])-(n[me]-n[ce])*(n[Se+1]-n[me+1]))}return k===0&&ie===0?0:Math.abs((ie-k)/k)};function c3(n,o,u,p){for(var _=0,A=o,k=u-p;A<u;A+=p)_+=(n[k]-n[A])*(n[A+1]+n[k+1]),k=A;return _}g1.flatten=function(n){for(var o=n[0][0].length,u={vertices:[],holes:[],dimensions:o},p=0,_=0;_<n.length;_++){for(var A=0;A<n[_].length;A++)for(var k=0;k<o;k++)u.vertices.push(n[_][A][k]);_>0&&(p+=n[_-1].length,u.holes.push(p))}return u},l3.default=oY;function wY(n,o,u,p,_){nM(n,o,u||0,p||n.length-1,_||TY)}function nM(n,o,u,p,_){for(;p>u;){if(p-u>600){var A=p-u+1,k=o-u+1,F=Math.log(A),Y=.5*Math.exp(2*F/3),j=.5*Math.sqrt(F*Y*(A-Y)/A)*(k-A/2<0?-1:1),Q=Math.max(u,Math.floor(o-k*Y/A+j)),ie=Math.min(p,Math.floor(o+(A-k)*Y/A+j));nM(n,o,Q,ie,_)}var me=n[o],ce=u,Se=p;for(ly(n,u,o),_(n[p],me)>0&&ly(n,u,p);ce<Se;){for(ly(n,ce,Se),ce++,Se--;_(n[ce],me)<0;)ce++;for(;_(n[Se],me)>0;)Se--}_(n[u],me)===0?ly(n,u,Se):(Se++,ly(n,Se,p)),Se<=o&&(u=Se+1),o<=Se&&(p=Se-1)}}function ly(n,o,u){var p=n[o];n[o]=n[u],n[u]=p}function TY(n,o){return n<o?-1:n>o?1:0}function h3(n,o){var u=n.length;if(u<=1)return[n];for(var p=[],_,A,k=0;k<u;k++){var F=at(n[k]);F!==0&&(n[k].area=Math.abs(F),A===void 0&&(A=F<0),A===F<0?(_&&p.push(_),_=[n[k]]):_.push(n[k]))}if(_&&p.push(_),o>1)for(var Y=0;Y<p.length;Y++)p[Y].length<=o||(wY(p[Y],o,1,p[Y].length-1,AY),p[Y]=p[Y].slice(0,o));return p}function AY(n,o){return o.area-n.area}function v3(n,o,u){for(var p=u.patternDependencies,_=!1,A=0,k=o;A<k.length;A+=1){var F=k[A],Y=F.paint.get(n+"-pattern");Y.isConstant()||(_=!0);var j=Y.constantOr(null);j&&(_=!0,p[j.to]=!0,p[j.from]=!0)}return _}function d3(n,o,u,p,_){for(var A=_.patternDependencies,k=0,F=o;k<F.length;k+=1){var Y=F[k],j=Y.paint.get(n+"-pattern"),Q=j.value;if(Q.kind!=="constant"){var ie=Q.evaluate({zoom:p-1},u,{},_.availableImages),me=Q.evaluate({zoom:p},u,{},_.availableImages),ce=Q.evaluate({zoom:p+1},u,{},_.availableImages);ie=ie&&ie.name?ie.name:ie,me=me&&me.name?me.name:me,ce=ce&&ce.name?ce.name:ce,A[ie]=!0,A[me]=!0,A[ce]=!0,u.patterns[Y.id]={min:ie,mid:me,max:ce}}}return u}var MY=500,ku=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rc,this.indexArray=new Mu,this.indexArray2=new Zv,this.programConfigurations=new Mr(o.layers,o.zoom),this.segments=new bn,this.segments2=new bn,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};ku.prototype.populate=function(o,u,p){this.hasPattern=v3("fill",this.layers,u);for(var _=this.layers[0].layout.get("fill-sort-key"),A=[],k=0,F=o;k<F.length;k+=1){var Y=F[k],j=Y.feature,Q=Y.id,ie=Y.index,me=Y.sourceLayerIndex,ce=this.layers[0]._featureFilter.needGeometry,Se=Ai(j,ce);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),Se,p)){var qe=_?_.evaluate(Se,{},p,u.availableImages):void 0,ot={id:Q,properties:j.properties,type:j.type,sourceLayerIndex:me,index:ie,geometry:ce?Se.geometry:Va(j),patterns:{},sortKey:qe};A.push(ot)}}_&&A.sort(function(Sr,zr){return Sr.sortKey-zr.sortKey});for(var Ke=0,Mt=A;Ke<Mt.length;Ke+=1){var yt=Mt[Ke],At=yt,Pt=At.geometry,Wt=At.index,cr=At.sourceLayerIndex;if(this.hasPattern){var lr=d3("fill",this.layers,yt,this.zoom,u);this.patternFeatures.push(lr)}else this.addFeature(yt,Pt,Wt,p,{});var Rr=o[Wt].feature;u.featureIndex.insert(Rr,Pt,Wt,cr,this.index)}},ku.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},ku.prototype.addFeatures=function(o,u,p){for(var _=0,A=this.patternFeatures;_<A.length;_+=1){var k=A[_];this.addFeature(k,k.geometry,k.index,u,p)}},ku.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ku.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ku.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,nY),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},ku.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ku.prototype.addFeature=function(o,u,p,_,A){for(var k=0,F=h3(u,MY);k<F.length;k+=1){for(var Y=F[k],j=0,Q=0,ie=Y;Q<ie.length;Q+=1){var me=ie[Q];j+=me.length}for(var ce=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),Se=ce.vertexLength,qe=[],ot=[],Ke=0,Mt=Y;Ke<Mt.length;Ke+=1){var yt=Mt[Ke];if(yt.length!==0){yt!==Y[0]&&ot.push(qe.length/2);var At=this.segments2.prepareSegment(yt.length,this.layoutVertexArray,this.indexArray2),Pt=At.vertexLength;this.layoutVertexArray.emplaceBack(yt[0].x,yt[0].y),this.indexArray2.emplaceBack(Pt+yt.length-1,Pt),qe.push(yt[0].x),qe.push(yt[0].y);for(var Wt=1;Wt<yt.length;Wt++)this.layoutVertexArray.emplaceBack(yt[Wt].x,yt[Wt].y),this.indexArray2.emplaceBack(Pt+Wt-1,Pt+Wt),qe.push(yt[Wt].x),qe.push(yt[Wt].y);At.vertexLength+=yt.length,At.primitiveLength+=yt.length}}for(var cr=l3(qe,ot),lr=0;lr<cr.length;lr+=3)this.indexArray.emplaceBack(Se+cr[lr],Se+cr[lr+1],Se+cr[lr+2]);ce.vertexLength+=j,ce.primitiveLength+=cr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,_)},y("FillBucket",ku,{omit:["layers","patternFeatures"]});var SY=new zn({"fill-sort-key":new Vr(Zt.layout_fill["fill-sort-key"])}),kY=new zn({"fill-antialias":new br(Zt.paint_fill["fill-antialias"]),"fill-opacity":new Vr(Zt.paint_fill["fill-opacity"]),"fill-color":new Vr(Zt.paint_fill["fill-color"]),"fill-outline-color":new Vr(Zt.paint_fill["fill-outline-color"]),"fill-translate":new br(Zt.paint_fill["fill-translate"]),"fill-translate-anchor":new br(Zt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fi(Zt.paint_fill["fill-pattern"])}),CY={paint:kY,layout:SY},EY=function(n){function o(u){n.call(this,u,CY)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.recalculate=function(p,_){n.prototype.recalculate.call(this,p,_);var A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},o.prototype.createBucket=function(p){return new ku(p)},o.prototype.queryRadius=function(){return el(this.paint.get("fill-translate"))},o.prototype.queryIntersectsFeature=function(p,_,A,k,F,Y,j){var Q=Su(p,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Y.angle,j);return en(Q,k)},o.prototype.isTileClipped=function(){return!0},o}(pi),LY=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),PY=LY.members,oM=Hp;function Hp(n,o,u,p,_){this.properties={},this.extent=u,this.type=0,this._pbf=n,this._geometry=-1,this._keys=p,this._values=_,n.readFields(DY,this,o)}function DY(n,o,u){n==1?o.id=u.readVarint():n==2?zY(u,o):n==3?o.type=u.readVarint():n==4&&(o._geometry=u.pos)}function zY(n,o){for(var u=n.readVarint()+n.pos;n.pos<u;){var p=o._keys[n.readVarint()],_=o._values[n.readVarint()];o.properties[p]=_}}Hp.types=["Unknown","Point","LineString","Polygon"],Hp.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var o=n.readVarint()+n.pos,u=1,p=0,_=0,A=0,k=[],F;n.pos<o;){if(p<=0){var Y=n.readVarint();u=Y&7,p=Y>>3}if(p--,u===1||u===2)_+=n.readSVarint(),A+=n.readSVarint(),u===1&&(F&&k.push(F),F=[]),F.push(new v(_,A));else if(u===7)F&&F.push(F[0].clone());else throw new Error("unknown command "+u)}return F&&k.push(F),k},Hp.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var o=n.readVarint()+n.pos,u=1,p=0,_=0,A=0,k=1/0,F=-1/0,Y=1/0,j=-1/0;n.pos<o;){if(p<=0){var Q=n.readVarint();u=Q&7,p=Q>>3}if(p--,u===1||u===2)_+=n.readSVarint(),A+=n.readSVarint(),_<k&&(k=_),_>F&&(F=_),A<Y&&(Y=A),A>j&&(j=A);else if(u!==7)throw new Error("unknown command "+u)}return[k,Y,F,j]},Hp.prototype.toGeoJSON=function(n,o,u){var p=this.extent*Math.pow(2,u),_=this.extent*n,A=this.extent*o,k=this.loadGeometry(),F=Hp.types[this.type],Y,j;function Q(ce){for(var Se=0;Se<ce.length;Se++){var qe=ce[Se],ot=180-(qe.y+A)*360/p;ce[Se]=[(qe.x+_)*360/p-180,360/Math.PI*Math.atan(Math.exp(ot*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(Y=0;Y<k.length;Y++)ie[Y]=k[Y][0];k=ie,Q(k);break;case 2:for(Y=0;Y<k.length;Y++)Q(k[Y]);break;case 3:for(k=IY(k),Y=0;Y<k.length;Y++)for(j=0;j<k[Y].length;j++)Q(k[Y][j]);break}k.length===1?k=k[0]:F="Multi"+F;var me={type:"Feature",geometry:{type:F,coordinates:k},properties:this.properties};return"id"in this&&(me.id=this.id),me};function IY(n){var o=n.length;if(o<=1)return[n];for(var u=[],p,_,A=0;A<o;A++){var k=RY(n[A]);k!==0&&(_===void 0&&(_=k<0),_===k<0?(p&&u.push(p),p=[n[A]]):p.push(n[A]))}return p&&u.push(p),u}function RY(n){for(var o=0,u=0,p=n.length,_=p-1,A,k;u<p;_=u++)A=n[u],k=n[_],o+=(k.x-A.x)*(A.y+k.y);return o}var sM=lM;function lM(n,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(FY,this,o),this.length=this._features.length}function FY(n,o,u){n===15?o.version=u.readVarint():n===1?o.name=u.readString():n===5?o.extent=u.readVarint():n===2?o._features.push(u.pos):n===3?o._keys.push(u.readString()):n===4&&o._values.push(qY(u))}function qY(n){for(var o=null,u=n.readVarint()+n.pos;n.pos<u;){var p=n.readVarint()>>3;o=p===1?n.readString():p===2?n.readFloat():p===3?n.readDouble():p===4?n.readVarint64():p===5?n.readVarint():p===6?n.readSVarint():p===7?n.readBoolean():null}return o}lM.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var o=this._pbf.readVarint()+this._pbf.pos;return new oM(this._pbf,o,this.extent,this._keys,this._values)};var NY=BY;function BY(n,o){this.layers=n.readFields(OY,{},o)}function OY(n,o,u){if(n===3){var p=new sM(u,u.readVarint()+u.pos);p.length&&(o[p.name]=p)}}var UY=NY,VY=oM,HY=sM,Gp={VectorTile:UY,VectorTileFeature:VY,VectorTileLayer:HY},GY=Gp.VectorTileFeature.types,ZY=500,p3=Math.pow(2,13);function uy(n,o,u,p,_,A,k,F){n.emplaceBack(o,u,Math.floor(p*p3)*2+k,_*p3*2,A*p3*2,Math.round(F))}var Cu=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new gf,this.indexArray=new Mu,this.programConfigurations=new Mr(o.layers,o.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};Cu.prototype.populate=function(o,u,p){this.features=[],this.hasPattern=v3("fill-extrusion",this.layers,u);for(var _=0,A=o;_<A.length;_+=1){var k=A[_],F=k.feature,Y=k.id,j=k.index,Q=k.sourceLayerIndex,ie=this.layers[0]._featureFilter.needGeometry,me=Ai(F,ie);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),me,p)){var ce={id:Y,sourceLayerIndex:Q,index:j,geometry:ie?me.geometry:Va(F),properties:F.properties,type:F.type,patterns:{}};this.hasPattern?this.features.push(d3("fill-extrusion",this.layers,ce,this.zoom,u)):this.addFeature(ce,ce.geometry,j,p,{}),u.featureIndex.insert(F,ce.geometry,j,Q,this.index,!0)}}},Cu.prototype.addFeatures=function(o,u,p){for(var _=0,A=this.features;_<A.length;_+=1){var k=A[_],F=k.geometry;this.addFeature(k,F,k.index,u,p)}},Cu.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},Cu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Cu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cu.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,PY),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cu.prototype.addFeature=function(o,u,p,_,A){for(var k=0,F=h3(u,ZY);k<F.length;k+=1){for(var Y=F[k],j=0,Q=0,ie=Y;Q<ie.length;Q+=1){var me=ie[Q];j+=me.length}for(var ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Se=0,qe=Y;Se<qe.length;Se+=1){var ot=qe[Se];if(ot.length!==0&&!WY(ot))for(var Ke=0,Mt=0;Mt<ot.length;Mt++){var yt=ot[Mt];if(Mt>=1){var At=ot[Mt-1];if(!YY(yt,At)){ce.vertexLength+4>bn.MAX_VERTEX_ARRAY_LENGTH&&(ce=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Pt=yt.sub(At)._perp()._unit(),Wt=At.dist(yt);Ke+Wt>32768&&(Ke=0),uy(this.layoutVertexArray,yt.x,yt.y,Pt.x,Pt.y,0,0,Ke),uy(this.layoutVertexArray,yt.x,yt.y,Pt.x,Pt.y,0,1,Ke),Ke+=Wt,uy(this.layoutVertexArray,At.x,At.y,Pt.x,Pt.y,0,0,Ke),uy(this.layoutVertexArray,At.x,At.y,Pt.x,Pt.y,0,1,Ke);var cr=ce.vertexLength;this.indexArray.emplaceBack(cr,cr+2,cr+1),this.indexArray.emplaceBack(cr+1,cr+2,cr+3),ce.vertexLength+=4,ce.primitiveLength+=2}}}}if(ce.vertexLength+j>bn.MAX_VERTEX_ARRAY_LENGTH&&(ce=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray)),GY[o.type]==="Polygon"){for(var lr=[],Rr=[],Sr=ce.vertexLength,zr=0,Qr=Y;zr<Qr.length;zr+=1){var Fr=Qr[zr];if(Fr.length!==0){Fr!==Y[0]&&Rr.push(lr.length/2);for(var Nr=0;Nr<Fr.length;Nr++){var ma=Fr[Nr];uy(this.layoutVertexArray,ma.x,ma.y,0,0,1,1,0),lr.push(ma.x),lr.push(ma.y)}}}for(var jr=l3(lr,Rr),Ya=0;Ya<jr.length;Ya+=3)this.indexArray.emplaceBack(Sr+jr[Ya],Sr+jr[Ya+2],Sr+jr[Ya+1]);ce.primitiveLength+=jr.length/3,ce.vertexLength+=j}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,_)},y("FillExtrusionBucket",Cu,{omit:["layers","features"]});function YY(n,o){return n.x===o.x&&(n.x<0||n.x>qr)||n.y===o.y&&(n.y<0||n.y>qr)}function WY(n){return n.every(function(o){return o.x<0})||n.every(function(o){return o.x>qr})||n.every(function(o){return o.y<0})||n.every(function(o){return o.y>qr})}var XY=new zn({"fill-extrusion-opacity":new br(Zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vr(Zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new br(Zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new br(Zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fi(Zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vr(Zt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vr(Zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new br(Zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),jY={paint:XY},JY=function(n){function o(u){n.call(this,u,jY)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.createBucket=function(p){return new Cu(p)},o.prototype.queryRadius=function(){return el(this.paint.get("fill-extrusion-translate"))},o.prototype.is3D=function(){return!0},o.prototype.queryIntersectsFeature=function(p,_,A,k,F,Y,j,Q){var ie=Su(p,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Y.angle,j),me=this.paint.get("fill-extrusion-height").evaluate(_,A),ce=this.paint.get("fill-extrusion-base").evaluate(_,A),Se=$Y(ie,Q,Y,0),qe=QY(k,ce,me,Q),ot=qe[0],Ke=qe[1];return KY(ot,Ke,Se)},o}(pi);function fy(n,o){return n.x*o.x+n.y*o.y}function uM(n,o){if(n.length===1){for(var u=0,p=o[u++],_;!_||p.equals(_);)if(_=o[u++],!_)return 1/0;for(;u<o.length;u++){var A=o[u],k=n[0],F=_.sub(p),Y=A.sub(p),j=k.sub(p),Q=fy(F,F),ie=fy(F,Y),me=fy(Y,Y),ce=fy(j,F),Se=fy(j,Y),qe=Q*me-ie*ie,ot=(me*ce-ie*Se)/qe,Ke=(Q*Se-ie*ce)/qe,Mt=1-ot-Ke,yt=p.z*Mt+_.z*ot+A.z*Ke;if(isFinite(yt))return yt}return 1/0}else{for(var At=1/0,Pt=0,Wt=o;Pt<Wt.length;Pt+=1){var cr=Wt[Pt];At=Math.min(At,cr.z)}return At}}function KY(n,o,u){var p=1/0;en(u,o)&&(p=uM(u,o[0]));for(var _=0;_<o.length;_++)for(var A=o[_],k=n[_],F=0;F<A.length-1;F++){var Y=A[F],j=A[F+1],Q=k[F],ie=k[F+1],me=[Y,j,ie,Q,Y];na(u,me)&&(p=Math.min(p,uM(u,me)))}return p===1/0?!1:p}function QY(n,o,u,p){for(var _=[],A=[],k=p[8]*o,F=p[9]*o,Y=p[10]*o,j=p[11]*o,Q=p[8]*u,ie=p[9]*u,me=p[10]*u,ce=p[11]*u,Se=0,qe=n;Se<qe.length;Se+=1){for(var ot=qe[Se],Ke=[],Mt=[],yt=0,At=ot;yt<At.length;yt+=1){var Pt=At[yt],Wt=Pt.x,cr=Pt.y,lr=p[0]*Wt+p[4]*cr+p[12],Rr=p[1]*Wt+p[5]*cr+p[13],Sr=p[2]*Wt+p[6]*cr+p[14],zr=p[3]*Wt+p[7]*cr+p[15],Qr=lr+k,Fr=Rr+F,Nr=Sr+Y,ma=zr+j,jr=lr+Q,Ya=Rr+ie,gi=Sr+me,Wa=zr+ce,Xa=new v(Qr/ma,Fr/ma);Xa.z=Nr/ma,Ke.push(Xa);var Ha=new v(jr/Wa,Ya/Wa);Ha.z=gi/Wa,Mt.push(Ha)}_.push(Ke),A.push(Mt)}return[_,A]}function $Y(n,o,u,p){for(var _=[],A=0,k=n;A<k.length;A+=1){var F=k[A],Y=[F.x,F.y,p,1];y1(Y,Y,o),_.push(new v(Y[0]/Y[3],Y[1]/Y[3]))}return _}var eW=ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),tW=eW.members,rW=ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),aW=rW.members,iW=Gp.VectorTileFeature.types,fM=63,nW=Math.cos(75/2*(Math.PI/180)),oW=15,sW=20,lW=15,cM=1/2,hM=Math.pow(2,lW-1)/cM,zo=function(o){var u=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(p){return p.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(p){u.gradients[p.id]={}}),this.layoutVertexArray=new nh,this.layoutVertexArray2=new oh,this.indexArray=new Mu,this.programConfigurations=new Mr(o.layers,o.zoom),this.segments=new bn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(p){return p.isStateDependent()}).map(function(p){return p.id})};zo.prototype.populate=function(o,u,p){this.hasPattern=v3("line",this.layers,u);for(var _=this.layers[0].layout.get("line-sort-key"),A=[],k=0,F=o;k<F.length;k+=1){var Y=F[k],j=Y.feature,Q=Y.id,ie=Y.index,me=Y.sourceLayerIndex,ce=this.layers[0]._featureFilter.needGeometry,Se=Ai(j,ce);if(this.layers[0]._featureFilter.filter(new Yt(this.zoom),Se,p)){var qe=_?_.evaluate(Se,{},p):void 0,ot={id:Q,properties:j.properties,type:j.type,sourceLayerIndex:me,index:ie,geometry:ce?Se.geometry:Va(j),patterns:{},sortKey:qe};A.push(ot)}}_&&A.sort(function(Sr,zr){return Sr.sortKey-zr.sortKey});for(var Ke=0,Mt=A;Ke<Mt.length;Ke+=1){var yt=Mt[Ke],At=yt,Pt=At.geometry,Wt=At.index,cr=At.sourceLayerIndex;if(this.hasPattern){var lr=d3("line",this.layers,yt,this.zoom,u);this.patternFeatures.push(lr)}else this.addFeature(yt,Pt,Wt,p,{});var Rr=o[Wt].feature;u.featureIndex.insert(Rr,Pt,Wt,cr,this.index)}},zo.prototype.update=function(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)},zo.prototype.addFeatures=function(o,u,p){for(var _=0,A=this.patternFeatures;_<A.length;_+=1){var k=A[_];this.addFeature(k,k.geometry,k.index,u,p)}},zo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},zo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zo.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,aW)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,tW),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},zo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},zo.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end")){var u=+o.properties.mapbox_clip_start,p=+o.properties.mapbox_clip_end;return{start:u,end:p}}},zo.prototype.addFeature=function(o,u,p,_,A){var k=this.layers[0].layout,F=k.get("line-join").evaluate(o,{}),Y=k.get("line-cap"),j=k.get("line-miter-limit"),Q=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var ie=0,me=u;ie<me.length;ie+=1){var ce=me[ie];this.addLine(ce,o,F,Y,j,Q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,A,_)},zo.prototype.addLine=function(o,u,p,_,A,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var F=0;F<o.length-1;F++)this.totalDistance+=o[F].dist(o[F+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Y=iW[u.type]==="Polygon",j=o.length;j>=2&&o[j-1].equals(o[j-2]);)j--;for(var Q=0;Q<j-1&&o[Q].equals(o[Q+1]);)Q++;if(!(j<(Y?3:2))){p==="bevel"&&(A=1.05);var ie=this.overscaling<=16?oW*qr/(512*this.overscaling):0,me=this.segments.prepareSegment(j*10,this.layoutVertexArray,this.indexArray),ce,Se=void 0,qe=void 0,ot=void 0,Ke=void 0;this.e1=this.e2=-1,Y&&(ce=o[j-2],Ke=o[Q].sub(ce)._unit()._perp());for(var Mt=Q;Mt<j;Mt++)if(qe=Mt===j-1?Y?o[Q+1]:void 0:o[Mt+1],!(qe&&o[Mt].equals(qe))){Ke&&(ot=Ke),ce&&(Se=ce),ce=o[Mt],Ke=qe?qe.sub(ce)._unit()._perp():ot,ot=ot||Ke;var yt=ot.add(Ke);(yt.x!==0||yt.y!==0)&&yt._unit();var At=ot.x*Ke.x+ot.y*Ke.y,Pt=yt.x*Ke.x+yt.y*Ke.y,Wt=Pt!==0?1/Pt:1/0,cr=2*Math.sqrt(2-2*Pt),lr=Pt<nW&&Se&&qe,Rr=ot.x*Ke.y-ot.y*Ke.x>0;if(lr&&Mt>Q){var Sr=ce.dist(Se);if(Sr>2*ie){var zr=ce.sub(ce.sub(Se)._mult(ie/Sr)._round());this.updateDistance(Se,zr),this.addCurrentVertex(zr,ot,0,0,me),Se=zr}}var Qr=Se&&qe,Fr=Qr?p:Y?"butt":_;if(Qr&&Fr==="round"&&(Wt<k?Fr="miter":Wt<=2&&(Fr="fakeround")),Fr==="miter"&&Wt>A&&(Fr="bevel"),Fr==="bevel"&&(Wt>2&&(Fr="flipbevel"),Wt<A&&(Fr="miter")),Se&&this.updateDistance(Se,ce),Fr==="miter")yt._mult(Wt),this.addCurrentVertex(ce,yt,0,0,me);else if(Fr==="flipbevel"){if(Wt>100)yt=Ke.mult(-1);else{var Nr=Wt*ot.add(Ke).mag()/ot.sub(Ke).mag();yt._perp()._mult(Nr*(Rr?-1:1))}this.addCurrentVertex(ce,yt,0,0,me),this.addCurrentVertex(ce,yt.mult(-1),0,0,me)}else if(Fr==="bevel"||Fr==="fakeround"){var ma=-Math.sqrt(Wt*Wt-1),jr=Rr?ma:0,Ya=Rr?0:ma;if(Se&&this.addCurrentVertex(ce,ot,jr,Ya,me),Fr==="fakeround")for(var gi=Math.round(cr*180/Math.PI/sW),Wa=1;Wa<gi;Wa++){var Xa=Wa/gi;if(Xa!==.5){var Ha=Xa-.5,Mi=1.0904+At*(-3.2452+At*(3.55645-At*1.43519)),Pi=.848013+At*(-1.06021+At*.215638);Xa=Xa+Xa*Ha*(Xa-1)*(Mi*Ha*Ha+Pi)}var tn=Ke.sub(ot)._mult(Xa)._add(ot)._unit()._mult(Rr?-1:1);this.addHalfVertex(ce,tn.x,tn.y,!1,Rr,0,me)}qe&&this.addCurrentVertex(ce,Ke,-jr,-Ya,me)}else if(Fr==="butt")this.addCurrentVertex(ce,yt,0,0,me);else if(Fr==="square"){var ln=Se?1:-1;this.addCurrentVertex(ce,yt,ln,ln,me)}else Fr==="round"&&(Se&&(this.addCurrentVertex(ce,ot,0,0,me),this.addCurrentVertex(ce,ot,1,1,me,!0)),qe&&(this.addCurrentVertex(ce,Ke,-1,-1,me,!0),this.addCurrentVertex(ce,Ke,0,0,me)));if(lr&&Mt<j-1){var Gn=ce.dist(qe);if(Gn>2*ie){var Mn=ce.add(qe.sub(ce)._mult(ie/Gn)._round());this.updateDistance(ce,Mn),this.addCurrentVertex(Mn,Ke,0,0,me),ce=Mn}}}}},zo.prototype.addCurrentVertex=function(o,u,p,_,A,k){k===void 0&&(k=!1);var F=u.x+u.y*p,Y=u.y-u.x*p,j=-u.x+u.y*_,Q=-u.y-u.x*_;this.addHalfVertex(o,F,Y,k,!1,p,A),this.addHalfVertex(o,j,Q,k,!0,-_,A),this.distance>hM/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,u,p,_,A,k))},zo.prototype.addHalfVertex=function(o,u,p,_,A,k,F){var Y=o.x,j=o.y,Q=this.lineClips?this.scaledDistance*(hM-1):this.scaledDistance,ie=Q*cM;if(this.layoutVertexArray.emplaceBack((Y<<1)+(_?1:0),(j<<1)+(A?1:0),Math.round(fM*u)+128,Math.round(fM*p)+128,(k===0?0:k<0?-1:1)+1|(ie&63)<<2,ie>>6),this.lineClips){var me=this.scaledDistance-this.lineClips.start,ce=this.lineClips.end-this.lineClips.start,Se=me/ce;this.layoutVertexArray2.emplaceBack(Se,this.lineClipsArray.length)}var qe=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,qe),F.primitiveLength++),A?this.e2=qe:this.e1=qe},zo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},zo.prototype.updateDistance=function(o,u){this.distance+=o.dist(u),this.updateScaledDistance()},y("LineBucket",zo,{omit:["layers","patternFeatures"]});var uW=new zn({"line-cap":new br(Zt.layout_line["line-cap"]),"line-join":new Vr(Zt.layout_line["line-join"]),"line-miter-limit":new br(Zt.layout_line["line-miter-limit"]),"line-round-limit":new br(Zt.layout_line["line-round-limit"]),"line-sort-key":new Vr(Zt.layout_line["line-sort-key"])}),fW=new zn({"line-opacity":new Vr(Zt.paint_line["line-opacity"]),"line-color":new Vr(Zt.paint_line["line-color"]),"line-translate":new br(Zt.paint_line["line-translate"]),"line-translate-anchor":new br(Zt.paint_line["line-translate-anchor"]),"line-width":new Vr(Zt.paint_line["line-width"]),"line-gap-width":new Vr(Zt.paint_line["line-gap-width"]),"line-offset":new Vr(Zt.paint_line["line-offset"]),"line-blur":new Vr(Zt.paint_line["line-blur"]),"line-dasharray":new Ti(Zt.paint_line["line-dasharray"]),"line-pattern":new Fi(Zt.paint_line["line-pattern"]),"line-gradient":new lo(Zt.paint_line["line-gradient"])}),vM={paint:fW,layout:uW},cW=function(n){function o(){n.apply(this,arguments)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.possiblyEvaluate=function(p,_){return _=new Yt(Math.floor(_.zoom),{now:_.now,fadeDuration:_.fadeDuration,zoomHistory:_.zoomHistory,transition:_.transition}),n.prototype.possiblyEvaluate.call(this,p,_)},o.prototype.evaluate=function(p,_,A,k){return _=H({},_,{zoom:Math.floor(_.zoom)}),n.prototype.evaluate.call(this,p,_,A,k)},o}(Vr),dM=new cW(vM.paint.properties["line-width"].specification);dM.useIntegerZoom=!0;var hW=function(n){function o(u){n.call(this,u,vM),this.gradientVersion=0}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._handleSpecialPaintPropertyUpdate=function(p){if(p==="line-gradient"){var _=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=_._styleExpression.expression instanceof As,this.gradientVersion=(this.gradientVersion+1)%S}},o.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},o.prototype.recalculate=function(p,_){n.prototype.recalculate.call(this,p,_),this.paint._values["line-floorwidth"]=dM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,p)},o.prototype.createBucket=function(p){return new zo(p)},o.prototype.queryRadius=function(p){var _=p,A=pM(Do("line-width",this,_),Do("line-gap-width",this,_)),k=Do("line-offset",this,_);return A/2+Math.abs(k)+el(this.paint.get("line-translate"))},o.prototype.queryIntersectsFeature=function(p,_,A,k,F,Y,j){var Q=Su(p,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Y.angle,j),ie=j/2*pM(this.paint.get("line-width").evaluate(_,A),this.paint.get("line-gap-width").evaluate(_,A)),me=this.paint.get("line-offset").evaluate(_,A);return me&&(k=vW(k,me*j)),In(Q,k,ie)},o.prototype.isTileClipped=function(){return!0},o}(pi);function pM(n,o){return o>0?o+2*n:n}function vW(n,o){for(var u=[],p=new v(0,0),_=0;_<n.length;_++){for(var A=n[_],k=[],F=0;F<A.length;F++){var Y=A[F-1],j=A[F],Q=A[F+1],ie=F===0?p:j.sub(Y)._unit()._perp(),me=F===A.length-1?p:Q.sub(j)._unit()._perp(),ce=ie._add(me)._unit(),Se=ce.x*me.x+ce.y*me.y;ce._mult(1/Se),k.push(ce._mult(o)._add(j))}u.push(k)}return u}var dW=ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pW=ui([{name:"a_projected_pos",components:3,type:"Float32"}],4),Q0e=ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),mW=ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),$0e=ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),mM=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),yW=ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),eme=ui([{name:"triangle",components:3,type:"Uint16"}]),tme=ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),rme=ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ame=ui([{type:"Float32",name:"offsetX"}]),ime=ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function gW(n,o,u){var p=o.layout.get("text-transform").evaluate(u,{});return p==="uppercase"?n=n.toLocaleUpperCase():p==="lowercase"&&(n=n.toLocaleLowerCase()),ri.applyArabicShaping&&(n=ri.applyArabicShaping(n)),n}function _W(n,o,u){return n.sections.forEach(function(p){p.text=gW(p.text,o,u)}),n}function xW(n){var o={},u={},p=[],_=0;function A(Ke){p.push(n[Ke]),_++}function k(Ke,Mt,yt){var At=u[Ke];return delete u[Ke],u[Mt]=At,p[At].geometry[0].pop(),p[At].geometry[0]=p[At].geometry[0].concat(yt[0]),At}function F(Ke,Mt,yt){var At=o[Mt];return delete o[Mt],o[Ke]=At,p[At].geometry[0].shift(),p[At].geometry[0]=yt[0].concat(p[At].geometry[0]),At}function Y(Ke,Mt,yt){var At=yt?Mt[0][Mt[0].length-1]:Mt[0][0];return Ke+":"+At.x+":"+At.y}for(var j=0;j<n.length;j++){var Q=n[j],ie=Q.geometry,me=Q.text?Q.text.toString():null;if(!me){A(j);continue}var ce=Y(me,ie),Se=Y(me,ie,!0);if(ce in u&&Se in o&&u[ce]!==o[Se]){var qe=F(ce,Se,ie),ot=k(ce,Se,p[qe].geometry);delete o[ce],delete u[Se],u[Y(me,p[ot].geometry,!0)]=ot,p[qe].geometry=null}else ce in u?k(ce,Se,ie):Se in o?F(ce,Se,ie):(A(j),o[ce]=_-1,u[Se]=_-1)}return p.filter(function(Ke){return Ke.geometry})}var cy={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function bW(n){for(var o="",u=0;u<n.length;u++){var p=n.charCodeAt(u+1)||null,_=n.charCodeAt(u-1)||null,A=(!p||!nt(p)||cy[n[u+1]])&&(!_||!nt(_)||cy[n[u-1]]);A&&cy[n[u]]?o+=cy[n[u]]:o+=n[u]}return o}var Kn=24,wW=function(n,o,u,p,_){var A,k,F=_*8-p-1,Y=(1<<F)-1,j=Y>>1,Q=-7,ie=u?_-1:0,me=u?-1:1,ce=n[o+ie];for(ie+=me,A=ce&(1<<-Q)-1,ce>>=-Q,Q+=F;Q>0;A=A*256+n[o+ie],ie+=me,Q-=8);for(k=A&(1<<-Q)-1,A>>=-Q,Q+=p;Q>0;k=k*256+n[o+ie],ie+=me,Q-=8);if(A===0)A=1-j;else{if(A===Y)return k?NaN:(ce?-1:1)*(1/0);k=k+Math.pow(2,p),A=A-j}return(ce?-1:1)*k*Math.pow(2,A-p)},TW=function(n,o,u,p,_,A){var k,F,Y,j=A*8-_-1,Q=(1<<j)-1,ie=Q>>1,me=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=p?0:A-1,Se=p?1:-1,qe=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(F=isNaN(o)?1:0,k=Q):(k=Math.floor(Math.log(o)/Math.LN2),o*(Y=Math.pow(2,-k))<1&&(k--,Y*=2),k+ie>=1?o+=me/Y:o+=me*Math.pow(2,1-ie),o*Y>=2&&(k++,Y/=2),k+ie>=Q?(F=0,k=Q):k+ie>=1?(F=(o*Y-1)*Math.pow(2,_),k=k+ie):(F=o*Math.pow(2,ie-1)*Math.pow(2,_),k=0));_>=8;n[u+ce]=F&255,ce+=Se,F/=256,_-=8);for(k=k<<_|F,j+=_;j>0;n[u+ce]=k&255,ce+=Se,k/=256,j-=8);n[u+ce-Se]|=qe*128},w1={read:wW,write:TW},T1=Li;function Li(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var m3=65536*65536,yM=1/m3,AW=12,gM=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Li.prototype={destroy:function(){this.buf=null},readFields:function(n,o,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),_=p>>3,A=this.pos;this.type=p&7,n(_,o,this),this.pos===A&&this.skip(p)}return o},readMessage:function(n,o){return this.readFields(n,o,this.readVarint()+this.pos)},readFixed32:function(){var n=A1(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=xM(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=A1(this.buf,this.pos)+A1(this.buf,this.pos+4)*m3;return this.pos+=8,n},readSFixed64:function(){var n=A1(this.buf,this.pos)+xM(this.buf,this.pos+4)*m3;return this.pos+=8,n},readFloat:function(){var n=w1.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=w1.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var o=this.buf,u,p;return p=o[this.pos++],u=p&127,p<128||(p=o[this.pos++],u|=(p&127)<<7,p<128)||(p=o[this.pos++],u|=(p&127)<<14,p<128)||(p=o[this.pos++],u|=(p&127)<<21,p<128)?u:(p=o[this.pos],u|=(p&15)<<28,MW(u,n,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2===1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=AW&&gM?BW(this.buf,o,n):NW(this.buf,o,n)},readBytes:function(){var n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o},readPackedVarint:function(n,o){if(this.type!==Li.Bytes)return n.push(this.readVarint(o));var u=oc(this);for(n=n||[];this.pos<u;)n.push(this.readVarint(o));return n},readPackedSVarint:function(n){if(this.type!==Li.Bytes)return n.push(this.readSVarint());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Li.Bytes)return n.push(this.readBoolean());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Li.Bytes)return n.push(this.readFloat());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Li.Bytes)return n.push(this.readDouble());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Li.Bytes)return n.push(this.readFixed32());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Li.Bytes)return n.push(this.readSFixed32());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Li.Bytes)return n.push(this.readFixed64());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Li.Bytes)return n.push(this.readSFixed64());var o=oc(this);for(n=n||[];this.pos<o;)n.push(this.readSFixed64());return n},skip:function(n){var o=n&7;if(o===Li.Varint)for(;this.buf[this.pos++]>127;);else if(o===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Li.Fixed32)this.pos+=4;else if(o===Li.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+o)},writeTag:function(n,o){this.writeVarint(n<<3|o)},realloc:function(n){for(var o=this.length||16;o<this.pos+n;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Yp(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Yp(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Yp(this.buf,n&-1,this.pos),Yp(this.buf,Math.floor(n*yM),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Yp(this.buf,n&-1,this.pos),Yp(this.buf,Math.floor(n*yM),this.pos+4),this.pos+=8},writeVarint:function(n){if(n=+n||0,n>268435455||n<0){SW(n,this);return}this.realloc(4),this.buf[this.pos++]=n&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=n>>>7&127)))},writeSVarint:function(n){this.writeVarint(n<0?-n*2-1:n*2)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(n.length*4),this.pos++;var o=this.pos;this.pos=OW(this.buf,n,this.pos);var u=this.pos-o;u>=128&&_M(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(n){this.realloc(4),w1.write(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),w1.write(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var o=n.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=n[u]},writeRawMessage:function(n,o){this.pos++;var u=this.pos;n(o,this);var p=this.pos-u;p>=128&&_M(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(n,o,u){this.writeTag(n,Li.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(n,o){o.length&&this.writeMessage(n,EW,o)},writePackedSVarint:function(n,o){o.length&&this.writeMessage(n,LW,o)},writePackedBoolean:function(n,o){o.length&&this.writeMessage(n,zW,o)},writePackedFloat:function(n,o){o.length&&this.writeMessage(n,PW,o)},writePackedDouble:function(n,o){o.length&&this.writeMessage(n,DW,o)},writePackedFixed32:function(n,o){o.length&&this.writeMessage(n,IW,o)},writePackedSFixed32:function(n,o){o.length&&this.writeMessage(n,RW,o)},writePackedFixed64:function(n,o){o.length&&this.writeMessage(n,FW,o)},writePackedSFixed64:function(n,o){o.length&&this.writeMessage(n,qW,o)},writeBytesField:function(n,o){this.writeTag(n,Li.Bytes),this.writeBytes(o)},writeFixed32Field:function(n,o){this.writeTag(n,Li.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(n,o){this.writeTag(n,Li.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(n,o){this.writeTag(n,Li.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(n,o){this.writeTag(n,Li.Fixed64),this.writeSFixed64(o)},writeVarintField:function(n,o){this.writeTag(n,Li.Varint),this.writeVarint(o)},writeSVarintField:function(n,o){this.writeTag(n,Li.Varint),this.writeSVarint(o)},writeStringField:function(n,o){this.writeTag(n,Li.Bytes),this.writeString(o)},writeFloatField:function(n,o){this.writeTag(n,Li.Fixed32),this.writeFloat(o)},writeDoubleField:function(n,o){this.writeTag(n,Li.Fixed64),this.writeDouble(o)},writeBooleanField:function(n,o){this.writeVarintField(n,!!o)}};function MW(n,o,u){var p=u.buf,_,A;if(A=p[u.pos++],_=(A&112)>>4,A<128||(A=p[u.pos++],_|=(A&127)<<3,A<128)||(A=p[u.pos++],_|=(A&127)<<10,A<128)||(A=p[u.pos++],_|=(A&127)<<17,A<128)||(A=p[u.pos++],_|=(A&127)<<24,A<128)||(A=p[u.pos++],_|=(A&1)<<31,A<128))return Zp(n,_,o);throw new Error("Expected varint not more than 10 bytes")}function oc(n){return n.type===Li.Bytes?n.readVarint()+n.pos:n.pos+1}function Zp(n,o,u){return u?o*4294967296+(n>>>0):(o>>>0)*4294967296+(n>>>0)}function SW(n,o){var u,p;if(n>=0?(u=n%4294967296|0,p=n/4294967296|0):(u=~(-n%4294967296),p=~(-n/4294967296),u^4294967295?u=u+1|0:(u=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),kW(u,p,o),CW(p,o)}function kW(n,o,u){u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos++]=n&127|128,n>>>=7,u.buf[u.pos]=n&127}function CW(n,o){var u=(n&7)<<4;o.buf[o.pos++]|=u|((n>>>=3)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=n&127)))))}function _M(n,o,u){var p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(Math.LN2*7));u.realloc(p);for(var _=u.pos-1;_>=n;_--)u.buf[_+p]=u.buf[_]}function EW(n,o){for(var u=0;u<n.length;u++)o.writeVarint(n[u])}function LW(n,o){for(var u=0;u<n.length;u++)o.writeSVarint(n[u])}function PW(n,o){for(var u=0;u<n.length;u++)o.writeFloat(n[u])}function DW(n,o){for(var u=0;u<n.length;u++)o.writeDouble(n[u])}function zW(n,o){for(var u=0;u<n.length;u++)o.writeBoolean(n[u])}function IW(n,o){for(var u=0;u<n.length;u++)o.writeFixed32(n[u])}function RW(n,o){for(var u=0;u<n.length;u++)o.writeSFixed32(n[u])}function FW(n,o){for(var u=0;u<n.length;u++)o.writeFixed64(n[u])}function qW(n,o){for(var u=0;u<n.length;u++)o.writeSFixed64(n[u])}function A1(n,o){return(n[o]|n[o+1]<<8|n[o+2]<<16)+n[o+3]*16777216}function Yp(n,o,u){n[u]=o,n[u+1]=o>>>8,n[u+2]=o>>>16,n[u+3]=o>>>24}function xM(n,o){return(n[o]|n[o+1]<<8|n[o+2]<<16)+(n[o+3]<<24)}function NW(n,o,u){for(var p="",_=o;_<u;){var A=n[_],k=null,F=A>239?4:A>223?3:A>191?2:1;if(_+F>u)break;var Y,j,Q;F===1?A<128&&(k=A):F===2?(Y=n[_+1],(Y&192)===128&&(k=(A&31)<<6|Y&63,k<=127&&(k=null))):F===3?(Y=n[_+1],j=n[_+2],(Y&192)===128&&(j&192)===128&&(k=(A&15)<<12|(Y&63)<<6|j&63,(k<=2047||k>=55296&&k<=57343)&&(k=null))):F===4&&(Y=n[_+1],j=n[_+2],Q=n[_+3],(Y&192)===128&&(j&192)===128&&(Q&192)===128&&(k=(A&15)<<18|(Y&63)<<12|(j&63)<<6|Q&63,(k<=65535||k>=1114112)&&(k=null))),k===null?(k=65533,F=1):k>65535&&(k-=65536,p+=String.fromCharCode(k>>>10&1023|55296),k=56320|k&1023),p+=String.fromCharCode(k),_+=F}return p}function BW(n,o,u){return gM.decode(n.subarray(o,u))}function OW(n,o,u){for(var p=0,_,A;p<o.length;p++){if(_=o.charCodeAt(p),_>55295&&_<57344)if(A)if(_<56320){n[u++]=239,n[u++]=191,n[u++]=189,A=_;continue}else _=A-55296<<10|_-56320|65536,A=null;else{_>56319||p+1===o.length?(n[u++]=239,n[u++]=191,n[u++]=189):A=_;continue}else A&&(n[u++]=239,n[u++]=191,n[u++]=189,A=null);_<128?n[u++]=_:(_<2048?n[u++]=_>>6|192:(_<65536?n[u++]=_>>12|224:(n[u++]=_>>18|240,n[u++]=_>>12&63|128),n[u++]=_>>6&63|128),n[u++]=_&63|128)}return u}var y3=3;function UW(n,o,u){n===1&&u.readMessage(VW,o)}function VW(n,o,u){if(n===3){var p=u.readMessage(HW,{}),_=p.id,A=p.bitmap,k=p.width,F=p.height,Y=p.left,j=p.top,Q=p.advance;o.push({id:_,bitmap:new Xv({width:k+2*y3,height:F+2*y3},A),metrics:{width:k,height:F,left:Y,top:j,advance:Q}})}}function HW(n,o,u){n===1?o.id=u.readVarint():n===2?o.bitmap=u.readBytes():n===3?o.width=u.readVarint():n===4?o.height=u.readVarint():n===5?o.left=u.readSVarint():n===6?o.top=u.readSVarint():n===7&&(o.advance=u.readVarint())}function GW(n){return new T1(n).readFields(UW,[])}var bM=y3;function wM(n){for(var o=0,u=0,p=0,_=n;p<_.length;p+=1){var A=_[p];o+=A.w*A.h,u=Math.max(u,A.w)}n.sort(function(ot,Ke){return Ke.h-ot.h});for(var k=Math.max(Math.ceil(Math.sqrt(o/.95)),u),F=[{x:0,y:0,w:k,h:1/0}],Y=0,j=0,Q=0,ie=n;Q<ie.length;Q+=1)for(var me=ie[Q],ce=F.length-1;ce>=0;ce--){var Se=F[ce];if(!(me.w>Se.w||me.h>Se.h)){if(me.x=Se.x,me.y=Se.y,j=Math.max(j,me.y+me.h),Y=Math.max(Y,me.x+me.w),me.w===Se.w&&me.h===Se.h){var qe=F.pop();ce<F.length&&(F[ce]=qe)}else me.h===Se.h?(Se.x+=me.w,Se.w-=me.w):me.w===Se.w?(Se.y+=me.h,Se.h-=me.h):(F.push({x:Se.x+me.w,y:Se.y,w:Se.w-me.w,h:me.h}),Se.y+=me.h,Se.h-=me.h);break}}return{w:Y,h:j,fill:o/(Y*j)||0}}var ds=1,M1=function(o,u){var p=u.pixelRatio,_=u.version,A=u.stretchX,k=u.stretchY,F=u.content;this.paddedRect=o,this.pixelRatio=p,this.stretchX=A,this.stretchY=k,this.content=F,this.version=_},hy={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hy.tl.get=function(){return[this.paddedRect.x+ds,this.paddedRect.y+ds]},hy.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ds,this.paddedRect.y+this.paddedRect.h-ds]},hy.tlbr.get=function(){return this.tl.concat(this.br)},hy.displaySize.get=function(){return[(this.paddedRect.w-ds*2)/this.pixelRatio,(this.paddedRect.h-ds*2)/this.pixelRatio]},Object.defineProperties(M1.prototype,hy);var vy=function(o,u){var p={},_={};this.haveRenderCallbacks=[];var A=[];this.addImages(o,p,A),this.addImages(u,_,A);var k=wM(A),F=k.w,Y=k.h,j=new es({width:F||1,height:Y||1});for(var Q in o){var ie=o[Q],me=p[Q].paddedRect;es.copy(ie.data,j,{x:0,y:0},{x:me.x+ds,y:me.y+ds},ie.data)}for(var ce in u){var Se=u[ce],qe=_[ce].paddedRect,ot=qe.x+ds,Ke=qe.y+ds,Mt=Se.data.width,yt=Se.data.height;es.copy(Se.data,j,{x:0,y:0},{x:ot,y:Ke},Se.data),es.copy(Se.data,j,{x:0,y:yt-1},{x:ot,y:Ke-1},{width:Mt,height:1}),es.copy(Se.data,j,{x:0,y:0},{x:ot,y:Ke+yt},{width:Mt,height:1}),es.copy(Se.data,j,{x:Mt-1,y:0},{x:ot-1,y:Ke},{width:1,height:yt}),es.copy(Se.data,j,{x:0,y:0},{x:ot+Mt,y:Ke},{width:1,height:yt})}this.image=j,this.iconPositions=p,this.patternPositions=_};vy.prototype.addImages=function(o,u,p){for(var _ in o){var A=o[_],k={x:0,y:0,w:A.data.width+2*ds,h:A.data.height+2*ds};p.push(k),u[_]=new M1(k,A),A.hasRenderCallback&&this.haveRenderCallbacks.push(_)}},vy.prototype.patchUpdatedImages=function(o,u){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),u)},vy.prototype.patchUpdatedImage=function(o,u,p){if(!(!o||!u)&&o.version!==u.version){o.version=u.version;var _=o.tl,A=_[0],k=_[1];p.update(u.data,void 0,{x:A,y:k})}},y("ImagePosition",M1),y("ImageAtlas",vy);var zs={horizontal:1,vertical:2,horizontalOnly:3},dy=-17;function ZW(n){for(var o=0,u=n;o<u.length;o+=1){var p=u[o];if(p.positionedGlyphs.length!==0)return!1}return!0}var TM=57344,AM=63743,Wp=function(){this.scale=1,this.fontStack="",this.imageName=null};Wp.forText=function(o,u){var p=new Wp;return p.scale=o||1,p.fontStack=u,p},Wp.forImage=function(o){var u=new Wp;return u.imageName=o,u};var bo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};bo.fromFeature=function(o,u){for(var p=new bo,_=0;_<o.sections.length;_++){var A=o.sections[_];A.image?p.addImageSection(A):p.addTextSection(A,u)}return p},bo.prototype.length=function(){return this.text.length},bo.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},bo.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},bo.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},bo.prototype.verticalizePunctuation=function(){this.text=bW(this.text)},bo.prototype.trim=function(){for(var o=0,u=0;u<this.text.length&&bf[this.text.charCodeAt(u)];u++)o++;for(var p=this.text.length,_=this.text.length-1;_>=0&&_>=o&&bf[this.text.charCodeAt(_)];_--)p--;this.text=this.text.substring(o,p),this.sectionIndex=this.sectionIndex.slice(o,p)},bo.prototype.substring=function(o,u){var p=new bo;return p.text=this.text.substring(o,u),p.sectionIndex=this.sectionIndex.slice(o,u),p.sections=this.sections,p},bo.prototype.toString=function(){return this.text},bo.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(u,p){return Math.max(u,o.sections[p].scale)},0)},bo.prototype.addTextSection=function(o,u){this.text+=o.text,this.sections.push(Wp.forText(o.scale,o.fontStack||u));for(var p=this.sections.length-1,_=0;_<o.text.length;++_)this.sectionIndex.push(p)},bo.prototype.addImageSection=function(o){var u=o.image?o.image.name:"";if(u.length===0){Me("Can't add FormattedSection with an empty image.");return}var p=this.getNextImageSectionCharCode();if(!p){Me("Reached maximum number of images "+(AM-TM+2));return}this.text+=String.fromCharCode(p),this.sections.push(Wp.forImage(u)),this.sectionIndex.push(this.sections.length-1)},bo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=AM?null:++this.imageSectionID:(this.imageSectionID=TM,this.imageSectionID)};function YW(n,o){for(var u=[],p=n.text,_=0,A=0,k=o;A<k.length;A+=1){var F=k[A];u.push(n.substring(_,F)),_=F}return _<p.length&&u.push(n.substring(_,p.length)),u}function S1(n,o,u,p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe){var ot=bo.fromFeature(n,_);ie===zs.vertical&&ot.verticalizePunctuation();var Ke,Mt=ri.processBidirectionalText,yt=ri.processStyledBidirectionalText;if(Mt&&ot.sections.length===1){Ke=[];for(var At=Mt(ot.toString(),g3(ot,j,A,o,p,ce,Se)),Pt=0,Wt=At;Pt<Wt.length;Pt+=1){var cr=Wt[Pt],lr=new bo;lr.text=cr,lr.sections=ot.sections;for(var Rr=0;Rr<cr.length;Rr++)lr.sectionIndex.push(0);Ke.push(lr)}}else if(yt){Ke=[];for(var Sr=yt(ot.text,ot.sectionIndex,g3(ot,j,A,o,p,ce,Se)),zr=0,Qr=Sr;zr<Qr.length;zr+=1){var Fr=Qr[zr],Nr=new bo;Nr.text=Fr[0],Nr.sectionIndex=Fr[1],Nr.sections=ot.sections,Ke.push(Nr)}}else Ke=YW(ot,g3(ot,j,A,o,p,ce,Se));var ma=[],jr={positionedLines:ma,text:ot.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return jW(jr,o,u,p,Ke,k,F,Y,ie,j,me,qe),ZW(ma)?!1:jr}var bf={};bf[9]=!0,bf[10]=!0,bf[11]=!0,bf[12]=!0,bf[13]=!0,bf[32]=!0;var ps={};ps[10]=!0,ps[32]=!0,ps[38]=!0,ps[40]=!0,ps[41]=!0,ps[43]=!0,ps[45]=!0,ps[47]=!0,ps[173]=!0,ps[183]=!0,ps[8203]=!0,ps[8208]=!0,ps[8211]=!0,ps[8231]=!0;function MM(n,o,u,p,_,A){if(o.imageName){var Y=p[o.imageName];return Y?Y.displaySize[0]*o.scale*Kn/A+_:0}else{var k=u[o.fontStack],F=k&&k[n];return F?F.metrics.advance*o.scale+_:0}}function WW(n,o,u,p,_,A){for(var k=0,F=0;F<n.length();F++){var Y=n.getSection(F);k+=MM(n.getCharCode(F),Y,p,_,o,A)}var j=Math.max(1,Math.ceil(k/u));return k/j}function SM(n,o,u,p){var _=Math.pow(n-o,2);return p?n<o?_/2:_*2:_+Math.abs(u)*u}function XW(n,o,u){var p=0;return n===10&&(p-=1e4),u&&(p+=150),(n===40||n===65288)&&(p+=50),(o===41||o===65289)&&(p+=50),p}function kM(n,o,u,p,_,A){for(var k=null,F=SM(o,u,_,A),Y=0,j=p;Y<j.length;Y+=1){var Q=j[Y],ie=o-Q.x,me=SM(ie,u,_,A)+Q.badness;me<=F&&(k=Q,F=me)}return{index:n,x:o,priorBreak:k,badness:F}}function CM(n){return n?CM(n.priorBreak).concat(n.index):[]}function g3(n,o,u,p,_,A,k){if(A!=="point")return[];if(!n)return[];for(var F=[],Y=WW(n,o,u,p,_,k),j=n.text.indexOf("\u200B")>=0,Q=0,ie=0;ie<n.length();ie++){var me=n.getSection(ie),ce=n.getCharCode(ie);if(bf[ce]||(Q+=MM(ce,me,p,_,o,k)),ie<n.length()-1){var Se=Pe(ce);(ps[ce]||Se||me.imageName)&&F.push(kM(ie+1,Q,Y,F,XW(ce,n.getCharCode(ie+1),Se&&j),!1))}}return CM(kM(n.length(),Q,Y,F,0,!0))}function _3(n){var o=.5,u=.5;switch(n){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break}switch(n){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0;break}return{horizontalAlign:o,verticalAlign:u}}function jW(n,o,u,p,_,A,k,F,Y,j,Q,ie){for(var me=0,ce=dy,Se=0,qe=0,ot=F==="right"?1:F==="left"?0:.5,Ke=0,Mt=0,yt=_;Mt<yt.length;Mt+=1){var At=yt[Mt];At.trim();var Pt=At.getMaxScale(),Wt=(Pt-1)*Kn,cr={positionedGlyphs:[],lineOffset:0};n.positionedLines[Ke]=cr;var lr=cr.positionedGlyphs,Rr=0;if(!At.length()){ce+=A,++Ke;continue}for(var Sr=0;Sr<At.length();Sr++){var zr=At.getSection(Sr),Qr=At.getSectionIndex(Sr),Fr=At.getCharCode(Sr),Nr=0,ma=null,jr=null,Ya=null,gi=Kn,Wa=!(Y===zs.horizontal||!Q&&!Le(Fr)||Q&&(bf[Fr]||ze(Fr)));if(zr.imageName){var tn=p[zr.imageName];if(!tn)continue;Ya=zr.imageName,n.iconsInText=n.iconsInText||!0,jr=tn.paddedRect;var ln=tn.displaySize;zr.scale=zr.scale*Kn/ie,ma={width:ln[0],height:ln[1],left:ds,top:-bM,advance:Wa?ln[1]:ln[0]};var Gn=Kn-ln[1]*zr.scale;Nr=Wt+Gn,gi=ma.advance;var Mn=Wa?ln[0]*zr.scale-Kn*Pt:ln[1]*zr.scale-Kn*Pt;Mn>0&&Mn>Rr&&(Rr=Mn)}else{var Xa=u[zr.fontStack],Ha=Xa&&Xa[Fr];if(Ha&&Ha.rect)jr=Ha.rect,ma=Ha.metrics;else{var Mi=o[zr.fontStack],Pi=Mi&&Mi[Fr];if(!Pi)continue;ma=Pi.metrics}Nr=(Pt-zr.scale)*Kn}Wa?(n.verticalizable=!0,lr.push({glyph:Fr,imageName:Ya,x:me,y:ce+Nr,vertical:Wa,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Qr,metrics:ma,rect:jr}),me+=gi*zr.scale+j):(lr.push({glyph:Fr,imageName:Ya,x:me,y:ce+Nr,vertical:Wa,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Qr,metrics:ma,rect:jr}),me+=ma.advance*zr.scale+j)}if(lr.length!==0){var wo=me-j;Se=Math.max(wo,Se),JW(lr,0,lr.length-1,ot,Rr)}me=0;var To=A*Pt+Rr;cr.lineOffset=Math.max(Rr,Wt),ce+=To,qe=Math.max(To,qe),++Ke}var Zn=ce-dy,Io=_3(k),Ro=Io.horizontalAlign,Rn=Io.verticalAlign;KW(n.positionedLines,ot,Ro,Rn,Se,qe,A,Zn,_.length),n.top+=-Rn*Zn,n.bottom=n.top+Zn,n.left+=-Ro*Se,n.right=n.left+Se}function JW(n,o,u,p,_){if(!(!p&&!_))for(var A=n[u],k=A.metrics.advance*A.scale,F=(n[u].x+k)*p,Y=o;Y<=u;Y++)n[Y].x-=F,n[Y].y+=_}function KW(n,o,u,p,_,A,k,F,Y){var j=(o-u)*_,Q=0;A!==k?Q=-F*p-dy:Q=(-p*Y+.5)*k;for(var ie=0,me=n;ie<me.length;ie+=1)for(var ce=me[ie],Se=0,qe=ce.positionedGlyphs;Se<qe.length;Se+=1){var ot=qe[Se];ot.x+=j,ot.y+=Q}}function QW(n,o,u){var p=_3(u),_=p.horizontalAlign,A=p.verticalAlign,k=o[0],F=o[1],Y=k-n.displaySize[0]*_,j=Y+n.displaySize[0],Q=F-n.displaySize[1]*A,ie=Q+n.displaySize[1];return{image:n,top:Q,bottom:ie,left:Y,right:j}}function EM(n,o,u,p,_,A){var k=n.image,F;if(k.content){var Y=k.content,j=k.pixelRatio||1;F=[Y[0]/j,Y[1]/j,k.displaySize[0]-Y[2]/j,k.displaySize[1]-Y[3]/j]}var Q=o.left*A,ie=o.right*A,me,ce,Se,qe;u==="width"||u==="both"?(qe=_[0]+Q-p[3],ce=_[0]+ie+p[1]):(qe=_[0]+(Q+ie-k.displaySize[0])/2,ce=qe+k.displaySize[0]);var ot=o.top*A,Ke=o.bottom*A;return u==="height"||u==="both"?(me=_[1]+ot-p[0],Se=_[1]+Ke+p[2]):(me=_[1]+(ot+Ke-k.displaySize[1])/2,Se=me+k.displaySize[1]),{image:k,top:me,right:ce,bottom:Se,left:qe,collisionPadding:F}}var Xp=function(n){function o(u,p,_,A){n.call(this,u,p),this.angle=_,A!==void 0&&(this.segment=A)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.clone=function(){return new o(this.x,this.y,this.angle,this.segment)},o}(v);y("Anchor",Xp);var Eu=128;function x3(n,o){var u=o.expression;if(u.kind==="constant"){var p=u.evaluate(new Yt(n+1));return{kind:"constant",layoutSize:p}}else{if(u.kind==="source")return{kind:"source"};for(var _=u.zoomStops,A=u.interpolationType,k=0;k<_.length&&_[k]<=n;)k++;k=Math.max(0,k-1);for(var F=k;F<_.length&&_[F]<n+1;)F++;F=Math.min(_.length-1,F);var Y=_[k],j=_[F];if(u.kind==="composite")return{kind:"composite",minZoom:Y,maxZoom:j,interpolationType:A};var Q=u.evaluate(new Yt(Y)),ie=u.evaluate(new Yt(j));return{kind:"camera",minZoom:Y,maxZoom:j,minSize:Q,maxSize:ie,interpolationType:A}}}function LM(n,o,u){var p=o.uSize,_=o.uSizeT,A=u.lowerSize,k=u.upperSize;return n.kind==="source"?A/Eu:n.kind==="composite"?fn(A/Eu,k/Eu,_):p}function PM(n,o){var u=0,p=0;if(n.kind==="constant")p=n.layoutSize;else if(n.kind!=="source"){var _=n.interpolationType,A=n.minZoom,k=n.maxZoom,F=_?I(_n.interpolationFactor(_,o,A,k),0,1):0;n.kind==="camera"?p=fn(n.minSize,n.maxSize,F):u=F}return{uSizeT:u,uSize:p}}var $W=Object.freeze({__proto__:null,getSizeData:x3,evaluateSizeForFeature:LM,evaluateSizeForZoom:PM,SIZE_PACK_FACTOR:Eu});function DM(n,o,u,p,_){if(o.segment===void 0)return!0;for(var A=o,k=o.segment+1,F=0;F>-u/2;){if(k--,k<0)return!1;F-=n[k].dist(A),A=n[k]}F+=n[k].dist(n[k+1]),k++;for(var Y=[],j=0;F<u/2;){var Q=n[k-1],ie=n[k],me=n[k+1];if(!me)return!1;var ce=Q.angleTo(ie)-ie.angleTo(me);for(ce=Math.abs((ce+3*Math.PI)%(Math.PI*2)-Math.PI),Y.push({distance:F,angleDelta:ce}),j+=ce;F-Y[0].distance>p;)j-=Y.shift().angleDelta;if(j>_)return!1;k++,F+=ie.dist(me)}return!0}function zM(n){for(var o=0,u=0;u<n.length-1;u++)o+=n[u].dist(n[u+1]);return o}function IM(n,o,u){return n?3/5*o*u:0}function RM(n,o){return Math.max(n?n.right-n.left:0,o?o.right-o.left:0)}function eX(n,o,u,p,_,A){for(var k=IM(u,_,A),F=RM(u,p)*A,Y=0,j=zM(n)/2,Q=0;Q<n.length-1;Q++){var ie=n[Q],me=n[Q+1],ce=ie.dist(me);if(Y+ce>j){var Se=(j-Y)/ce,qe=fn(ie.x,me.x,Se),ot=fn(ie.y,me.y,Se),Ke=new Xp(qe,ot,me.angleTo(ie),Q);return Ke._round(),!k||DM(n,Ke,F,k,o)?Ke:void 0}Y+=ce}}function tX(n,o,u,p,_,A,k,F,Y){var j=IM(p,A,k),Q=RM(p,_),ie=Q*k,me=n[0].x===0||n[0].x===Y||n[0].y===0||n[0].y===Y;o-ie<o/4&&(o=ie+o/4);var ce=A*2,Se=me?o/2*F%o:(Q/2+ce)*k*F%o;return FM(n,Se,o,j,u,ie,me,!1,Y)}function FM(n,o,u,p,_,A,k,F,Y){for(var j=A/2,Q=zM(n),ie=0,me=o-u,ce=[],Se=0;Se<n.length-1;Se++){for(var qe=n[Se],ot=n[Se+1],Ke=qe.dist(ot),Mt=ot.angleTo(qe);me+u<ie+Ke;){me+=u;var yt=(me-ie)/Ke,At=fn(qe.x,ot.x,yt),Pt=fn(qe.y,ot.y,yt);if(At>=0&&At<Y&&Pt>=0&&Pt<Y&&me-j>=0&&me+j<=Q){var Wt=new Xp(At,Pt,Mt,Se);Wt._round(),(!p||DM(n,Wt,A,p,_))&&ce.push(Wt)}}ie+=Ke}return!F&&!ce.length&&!k&&(ce=FM(n,ie/2,u,p,_,A,k,!0,Y)),ce}function qM(n,o,u,p,_){for(var A=[],k=0;k<n.length;k++)for(var F=n[k],Y=void 0,j=0;j<F.length-1;j++){var Q=F[j],ie=F[j+1];Q.x<o&&ie.x<o||(Q.x<o?Q=new v(o,Q.y+(ie.y-Q.y)*((o-Q.x)/(ie.x-Q.x)))._round():ie.x<o&&(ie=new v(o,Q.y+(ie.y-Q.y)*((o-Q.x)/(ie.x-Q.x)))._round()),!(Q.y<u&&ie.y<u)&&(Q.y<u?Q=new v(Q.x+(ie.x-Q.x)*((u-Q.y)/(ie.y-Q.y)),u)._round():ie.y<u&&(ie=new v(Q.x+(ie.x-Q.x)*((u-Q.y)/(ie.y-Q.y)),u)._round()),!(Q.x>=p&&ie.x>=p)&&(Q.x>=p?Q=new v(p,Q.y+(ie.y-Q.y)*((p-Q.x)/(ie.x-Q.x)))._round():ie.x>=p&&(ie=new v(p,Q.y+(ie.y-Q.y)*((p-Q.x)/(ie.x-Q.x)))._round()),!(Q.y>=_&&ie.y>=_)&&(Q.y>=_?Q=new v(Q.x+(ie.x-Q.x)*((_-Q.y)/(ie.y-Q.y)),_)._round():ie.y>=_&&(ie=new v(Q.x+(ie.x-Q.x)*((_-Q.y)/(ie.y-Q.y)),_)._round()),(!Y||!Q.equals(Y[Y.length-1]))&&(Y=[Q],A.push(Y)),Y.push(ie)))))}return A}var jp=ds;function NM(n,o,u,p){var _=[],A=n.image,k=A.pixelRatio,F=A.paddedRect.w-2*jp,Y=A.paddedRect.h-2*jp,j=n.right-n.left,Q=n.bottom-n.top,ie=A.stretchX||[[0,F]],me=A.stretchY||[[0,Y]],ce=function(Xa,Ha){return Xa+Ha[1]-Ha[0]},Se=ie.reduce(ce,0),qe=me.reduce(ce,0),ot=F-Se,Ke=Y-qe,Mt=0,yt=Se,At=0,Pt=qe,Wt=0,cr=ot,lr=0,Rr=Ke;if(A.content&&p){var Sr=A.content;Mt=k1(ie,0,Sr[0]),At=k1(me,0,Sr[1]),yt=k1(ie,Sr[0],Sr[2]),Pt=k1(me,Sr[1],Sr[3]),Wt=Sr[0]-Mt,lr=Sr[1]-At,cr=Sr[2]-Sr[0]-yt,Rr=Sr[3]-Sr[1]-Pt}var zr=function(Xa,Ha,Mi,Pi){var tn=C1(Xa.stretch-Mt,yt,j,n.left),ln=E1(Xa.fixed-Wt,cr,Xa.stretch,Se),Gn=C1(Ha.stretch-At,Pt,Q,n.top),Mn=E1(Ha.fixed-lr,Rr,Ha.stretch,qe),wo=C1(Mi.stretch-Mt,yt,j,n.left),To=E1(Mi.fixed-Wt,cr,Mi.stretch,Se),Zn=C1(Pi.stretch-At,Pt,Q,n.top),Io=E1(Pi.fixed-lr,Rr,Pi.stretch,qe),Ro=new v(tn,Gn),Rn=new v(wo,Gn),Fo=new v(wo,Zn),Is=new v(tn,Zn),uc=new v(ln/k,Mn/k),yh=new v(To/k,Io/k),gh=o*Math.PI/180;if(gh){var _h=Math.sin(gh),a0=Math.cos(gh),Ul=[a0,-_h,_h,a0];Ro._matMult(Ul),Rn._matMult(Ul),Is._matMult(Ul),Fo._matMult(Ul)}var R1=Xa.stretch+Xa.fixed,C3=Mi.stretch+Mi.fixed,F1=Ha.stretch+Ha.fixed,E3=Pi.stretch+Pi.fixed,rl={x:A.paddedRect.x+jp+R1,y:A.paddedRect.y+jp+F1,w:C3-R1,h:E3-F1},i0=cr/k/j,q1=Rr/k/Q;return{tl:Ro,tr:Rn,bl:Is,br:Fo,tex:rl,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:uc,pixelOffsetBR:yh,minFontScaleX:i0,minFontScaleY:q1,isSDF:u}};if(!p||!A.stretchX&&!A.stretchY)_.push(zr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:Y+1}));else for(var Qr=BM(ie,ot,Se),Fr=BM(me,Ke,qe),Nr=0;Nr<Qr.length-1;Nr++)for(var ma=Qr[Nr],jr=Qr[Nr+1],Ya=0;Ya<Fr.length-1;Ya++){var gi=Fr[Ya],Wa=Fr[Ya+1];_.push(zr(ma,gi,jr,Wa))}return _}function k1(n,o,u){for(var p=0,_=0,A=n;_<A.length;_+=1){var k=A[_];p+=Math.max(o,Math.min(u,k[1]))-Math.max(o,Math.min(u,k[0]))}return p}function BM(n,o,u){for(var p=[{fixed:-jp,stretch:0}],_=0,A=n;_<A.length;_+=1){var k=A[_],F=k[0],Y=k[1],j=p[p.length-1];p.push({fixed:F-j.stretch,stretch:j.stretch}),p.push({fixed:F-j.stretch,stretch:j.stretch+(Y-F)})}return p.push({fixed:o+jp,stretch:u}),p}function C1(n,o,u,p){return n/o*u+p}function E1(n,o,u,p){return n-o*u/p}function rX(n,o,u,p,_,A,k,F){for(var Y=p.layout.get("text-rotate").evaluate(A,{})*Math.PI/180,j=[],Q=0,ie=o.positionedLines;Q<ie.length;Q+=1)for(var me=ie[Q],ce=0,Se=me.positionedGlyphs;ce<Se.length;ce+=1){var qe=Se[ce];if(qe.rect){var ot=qe.rect||{},Ke=1,Mt=bM+Ke,yt=!0,At=1,Pt=0,Wt=(_||F)&&qe.vertical,cr=qe.metrics.advance*qe.scale/2;if(F&&o.verticalizable){var lr=(qe.scale-1)*Kn,Rr=(Kn-qe.metrics.width*qe.scale)/2;Pt=me.lineOffset/2-(qe.imageName?-Rr:lr)}if(qe.imageName){var Sr=k[qe.imageName];yt=Sr.sdf,At=Sr.pixelRatio,Mt=ds/At}var zr=_?[qe.x+cr,qe.y]:[0,0],Qr=_?[0,0]:[qe.x+cr+u[0],qe.y+u[1]-Pt],Fr=[0,0];Wt&&(Fr=Qr,Qr=[0,0]);var Nr=(qe.metrics.left-Mt)*qe.scale-cr+Qr[0],ma=(-qe.metrics.top-Mt)*qe.scale+Qr[1],jr=Nr+ot.w*qe.scale/At,Ya=ma+ot.h*qe.scale/At,gi=new v(Nr,ma),Wa=new v(jr,ma),Xa=new v(Nr,Ya),Ha=new v(jr,Ya);if(Wt){var Mi=new v(-cr,cr-dy),Pi=-Math.PI/2,tn=Kn/2-cr,ln=qe.imageName?tn:0,Gn=new v(5-dy-tn,-ln),Mn=new(Function.prototype.bind.apply(v,[null].concat(Fr)));gi._rotateAround(Pi,Mi)._add(Gn)._add(Mn),Wa._rotateAround(Pi,Mi)._add(Gn)._add(Mn),Xa._rotateAround(Pi,Mi)._add(Gn)._add(Mn),Ha._rotateAround(Pi,Mi)._add(Gn)._add(Mn)}if(Y){var wo=Math.sin(Y),To=Math.cos(Y),Zn=[To,-wo,wo,To];gi._matMult(Zn),Wa._matMult(Zn),Xa._matMult(Zn),Ha._matMult(Zn)}var Io=new v(0,0),Ro=new v(0,0),Rn=0,Fo=0;j.push({tl:gi,tr:Wa,bl:Xa,br:Ha,tex:ot,writingMode:o.writingMode,glyphOffset:zr,sectionIndex:qe.sectionIndex,isSDF:yt,pixelOffsetTL:Io,pixelOffsetBR:Ro,minFontScaleX:Rn,minFontScaleY:Fo})}}return j}var L1=function(o,u,p,_,A,k,F,Y,j,Q){if(this.boxStartIndex=o.length,j){var ie=k.top,me=k.bottom,ce=k.collisionPadding;ce&&(ie-=ce[1],me+=ce[3]);var Se=me-ie;Se>0&&(Se=Math.max(10,Se),this.circleDiameter=Se)}else{var qe=k.top*F-Y,ot=k.bottom*F+Y,Ke=k.left*F-Y,Mt=k.right*F+Y,yt=k.collisionPadding;if(yt&&(Ke-=yt[0]*F,qe-=yt[1]*F,Mt+=yt[2]*F,ot+=yt[3]*F),Q){var At=new v(Ke,qe),Pt=new v(Mt,qe),Wt=new v(Ke,ot),cr=new v(Mt,ot),lr=Q*Math.PI/180;At._rotate(lr),Pt._rotate(lr),Wt._rotate(lr),cr._rotate(lr),Ke=Math.min(At.x,Pt.x,Wt.x,cr.x),Mt=Math.max(At.x,Pt.x,Wt.x,cr.x),qe=Math.min(At.y,Pt.y,Wt.y,cr.y),ot=Math.max(At.y,Pt.y,Wt.y,cr.y)}o.emplaceBack(u.x,u.y,Ke,qe,Mt,ot,p,_,A)}this.boxEndIndex=o.length},Jp=function(o,u){if(o===void 0&&(o=[]),u===void 0&&(u=aX),this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(var p=(this.length>>1)-1;p>=0;p--)this._down(p)};Jp.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},Jp.prototype.pop=function(){if(this.length!==0){var o=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),o}},Jp.prototype.peek=function(){return this.data[0]},Jp.prototype._up=function(o){for(var u=this,p=u.data,_=u.compare,A=p[o];o>0;){var k=o-1>>1,F=p[k];if(_(A,F)>=0)break;p[o]=F,o=k}p[o]=A},Jp.prototype._down=function(o){for(var u=this,p=u.data,_=u.compare,A=this.length>>1,k=p[o];o<A;){var F=(o<<1)+1,Y=p[F],j=F+1;if(j<this.length&&_(p[j],Y)<0&&(F=j,Y=p[j]),_(Y,k)>=0)break;p[o]=Y,o=F}p[o]=k};function aX(n,o){return n<o?-1:n>o?1:0}function iX(n,o,u){o===void 0&&(o=1),u===void 0&&(u=!1);for(var p=1/0,_=1/0,A=-1/0,k=-1/0,F=n[0],Y=0;Y<F.length;Y++){var j=F[Y];(!Y||j.x<p)&&(p=j.x),(!Y||j.y<_)&&(_=j.y),(!Y||j.x>A)&&(A=j.x),(!Y||j.y>k)&&(k=j.y)}var Q=A-p,ie=k-_,me=Math.min(Q,ie),ce=me/2,Se=new Jp([],nX);if(me===0)return new v(p,_);for(var qe=p;qe<A;qe+=me)for(var ot=_;ot<k;ot+=me)Se.push(new Kp(qe+ce,ot+ce,ce,n));for(var Ke=sX(n),Mt=Se.length;Se.length;){var yt=Se.pop();(yt.d>Ke.d||!Ke.d)&&(Ke=yt,u&&console.log("found best %d after %d probes",Math.round(1e4*yt.d)/1e4,Mt)),!(yt.max-Ke.d<=o)&&(ce=yt.h/2,Se.push(new Kp(yt.p.x-ce,yt.p.y-ce,ce,n)),Se.push(new Kp(yt.p.x+ce,yt.p.y-ce,ce,n)),Se.push(new Kp(yt.p.x-ce,yt.p.y+ce,ce,n)),Se.push(new Kp(yt.p.x+ce,yt.p.y+ce,ce,n)),Mt+=4)}return u&&(console.log("num probes: "+Mt),console.log("best distance: "+Ke.d)),Ke.p}function nX(n,o){return o.max-n.max}function Kp(n,o,u,p){this.p=new v(n,o),this.h=u,this.d=oX(this.p,p),this.max=this.d+this.h*Math.SQRT2}function oX(n,o){for(var u=!1,p=1/0,_=0;_<o.length;_++)for(var A=o[_],k=0,F=A.length,Y=F-1;k<F;Y=k++){var j=A[k],Q=A[Y];j.y>n.y!=Q.y>n.y&&n.x<(Q.x-j.x)*(n.y-j.y)/(Q.y-j.y)+j.x&&(u=!u),p=Math.min(p,nc(n,j,Q))}return(u?1:-1)*Math.sqrt(p)}function sX(n){for(var o=0,u=0,p=0,_=n[0],A=0,k=_.length,F=k-1;A<k;F=A++){var Y=_[A],j=_[F],Q=Y.x*j.y-j.x*Y.y;u+=(Y.x+j.x)*Q,p+=(Y.y+j.y)*Q,o+=Q*3}return new Kp(u/o,p/o,0,n)}var Qp=7,b3=Number.POSITIVE_INFINITY;function OM(n,o){function u(_,A){var k=0,F=0;A<0&&(A=0);var Y=A/Math.sqrt(2);switch(_){case"top-right":case"top-left":F=Y-Qp;break;case"bottom-right":case"bottom-left":F=-Y+Qp;break;case"bottom":F=-A+Qp;break;case"top":F=A-Qp;break}switch(_){case"top-right":case"bottom-right":k=-Y;break;case"top-left":case"bottom-left":k=Y;break;case"left":k=A;break;case"right":k=-A;break}return[k,F]}function p(_,A,k){var F=0,Y=0;switch(A=Math.abs(A),k=Math.abs(k),_){case"top-right":case"top-left":case"top":Y=k-Qp;break;case"bottom-right":case"bottom-left":case"bottom":Y=-k+Qp;break}switch(_){case"top-right":case"bottom-right":case"right":F=-A;break;case"top-left":case"bottom-left":case"left":F=A;break}return[F,Y]}return o[1]!==b3?p(n,o[0],o[1]):u(n,o[0])}function lX(n,o,u,p,_,A,k){n.createArrays();var F=512*n.overscaling;n.tilePixelRatio=qr/F,n.compareText={},n.iconsNeedLinear=!1;var Y=n.layers[0].layout,j=n.layers[0]._unevaluatedLayout._values,Q={};if(n.textSizeData.kind==="composite"){var ie=n.textSizeData,me=ie.minZoom,ce=ie.maxZoom;Q.compositeTextSizes=[j["text-size"].possiblyEvaluate(new Yt(me),k),j["text-size"].possiblyEvaluate(new Yt(ce),k)]}if(n.iconSizeData.kind==="composite"){var Se=n.iconSizeData,qe=Se.minZoom,ot=Se.maxZoom;Q.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new Yt(qe),k),j["icon-size"].possiblyEvaluate(new Yt(ot),k)]}Q.layoutTextSize=j["text-size"].possiblyEvaluate(new Yt(n.zoom+1),k),Q.layoutIconSize=j["icon-size"].possiblyEvaluate(new Yt(n.zoom+1),k),Q.textMaxSize=j["text-size"].possiblyEvaluate(new Yt(18));for(var Ke=Y.get("text-line-height")*Kn,Mt=Y.get("text-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",yt=Y.get("text-keep-upright"),At=Y.get("text-size"),Pt=function(){var lr=cr[Wt],Rr=Y.get("text-font").evaluate(lr,{},k).join(","),Sr=At.evaluate(lr,{},k),zr=Q.layoutTextSize.evaluate(lr,{},k),Qr=Q.layoutIconSize.evaluate(lr,{},k),Fr={horizontal:{},vertical:void 0},Nr=lr.text,ma=[0,0];if(Nr){var jr=Nr.toString(),Ya=Y.get("text-letter-spacing").evaluate(lr,{},k)*Kn,gi=pe(jr)?Ya:0,Wa=Y.get("text-anchor").evaluate(lr,{},k),Xa=Y.get("text-variable-anchor");if(!Xa){var Ha=Y.get("text-radial-offset").evaluate(lr,{},k);Ha?ma=OM(Wa,[Ha*Kn,b3]):ma=Y.get("text-offset").evaluate(lr,{},k).map(function(uc){return uc*Kn})}var Mi=Mt?"center":Y.get("text-justify").evaluate(lr,{},k),Pi=Y.get("symbol-placement"),tn=Pi==="point"?Y.get("text-max-width").evaluate(lr,{},k)*Kn:0,ln=function(){n.allowVerticalPlacement&&ae(jr)&&(Fr.vertical=S1(Nr,o,u,_,Rr,tn,Ke,Wa,"left",gi,ma,zs.vertical,!0,Pi,zr,Sr))};if(!Mt&&Xa){for(var Gn=Mi==="auto"?Xa.map(function(uc){return w3(uc)}):[Mi],Mn=!1,wo=0;wo<Gn.length;wo++){var To=Gn[wo];if(!Fr.horizontal[To])if(Mn)Fr.horizontal[To]=Fr.horizontal[0];else{var Zn=S1(Nr,o,u,_,Rr,tn,Ke,"center",To,gi,ma,zs.horizontal,!1,Pi,zr,Sr);Zn&&(Fr.horizontal[To]=Zn,Mn=Zn.positionedLines.length===1)}}ln()}else{Mi==="auto"&&(Mi=w3(Wa));var Io=S1(Nr,o,u,_,Rr,tn,Ke,Wa,Mi,gi,ma,zs.horizontal,!1,Pi,zr,Sr);Io&&(Fr.horizontal[Mi]=Io),ln(),ae(jr)&&Mt&&yt&&(Fr.vertical=S1(Nr,o,u,_,Rr,tn,Ke,Wa,Mi,gi,ma,zs.vertical,!1,Pi,zr,Sr))}}var Ro=void 0,Rn=!1;if(lr.icon&&lr.icon.name){var Fo=p[lr.icon.name];Fo&&(Ro=QW(_[lr.icon.name],Y.get("icon-offset").evaluate(lr,{},k),Y.get("icon-anchor").evaluate(lr,{},k)),Rn=Fo.sdf,n.sdfIcons===void 0?n.sdfIcons=Fo.sdf:n.sdfIcons!==Fo.sdf&&Me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fo.pixelRatio!==n.pixelRatio||Y.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}var Is=VM(Fr.horizontal)||Fr.vertical;n.iconsInText=Is?Is.iconsInText:!1,(Is||Ro)&&uX(n,lr,Fr,Ro,p,Q,zr,Qr,ma,Rn,k)},Wt=0,cr=n.features;Wt<cr.length;Wt+=1)Pt();A&&n.generateCollisionDebugBuffers()}function w3(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uX(n,o,u,p,_,A,k,F,Y,j,Q){var ie=A.textMaxSize.evaluate(o,{});ie===void 0&&(ie=k);var me=n.layers[0].layout,ce=me.get("icon-offset").evaluate(o,{},Q),Se=VM(u.horizontal),qe=24,ot=k/qe,Ke=n.tilePixelRatio*ot,Mt=n.tilePixelRatio*ie/qe,yt=n.tilePixelRatio*F,At=n.tilePixelRatio*me.get("symbol-spacing"),Pt=me.get("text-padding")*n.tilePixelRatio,Wt=me.get("icon-padding")*n.tilePixelRatio,cr=me.get("text-max-angle")/180*Math.PI,lr=me.get("text-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point",Rr=me.get("icon-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point",Sr=me.get("symbol-placement"),zr=At/2,Qr=me.get("icon-text-fit"),Fr;p&&Qr!=="none"&&(n.allowVerticalPlacement&&u.vertical&&(Fr=EM(p,u.vertical,Qr,me.get("icon-text-fit-padding"),ce,ot)),Se&&(p=EM(p,Se,Qr,me.get("icon-text-fit-padding"),ce,ot)));var Nr=function(a0,Ul){Ul.x<0||Ul.x>=qr||Ul.y<0||Ul.y>=qr||fX(n,Ul,a0,u,p,_,Fr,n.layers[0],n.collisionBoxArray,o.index,o.sourceLayerIndex,n.index,Ke,Pt,lr,Y,yt,Wt,Rr,ce,o,A,j,Q,k)};if(Sr==="line")for(var ma=0,jr=qM(o.geometry,0,0,qr,qr);ma<jr.length;ma+=1)for(var Ya=jr[ma],gi=tX(Ya,At,cr,u.vertical||Se,p,qe,Mt,n.overscaling,qr),Wa=0,Xa=gi;Wa<Xa.length;Wa+=1){var Ha=Xa[Wa],Mi=Se;(!Mi||!cX(n,Mi.text,zr,Ha))&&Nr(Ya,Ha)}else if(Sr==="line-center")for(var Pi=0,tn=o.geometry;Pi<tn.length;Pi+=1){var ln=tn[Pi];if(ln.length>1){var Gn=eX(ln,cr,u.vertical||Se,p,qe,Mt);Gn&&Nr(ln,Gn)}}else if(o.type==="Polygon")for(var Mn=0,wo=h3(o.geometry,0);Mn<wo.length;Mn+=1){var To=wo[Mn],Zn=iX(To,16);Nr(To[0],new Xp(Zn.x,Zn.y,0))}else if(o.type==="LineString")for(var Io=0,Ro=o.geometry;Io<Ro.length;Io+=1){var Rn=Ro[Io];Nr(Rn,new Xp(Rn[0].x,Rn[0].y,0))}else if(o.type==="Point")for(var Fo=0,Is=o.geometry;Fo<Is.length;Fo+=1)for(var uc=Is[Fo],yh=0,gh=uc;yh<gh.length;yh+=1){var _h=gh[yh];Nr([_h],new Xp(_h.x,_h.y,0))}}var py=255,ph=py*Eu;function UM(n,o,u,p,_,A,k,F,Y,j,Q,ie,me,ce,Se){var qe=rX(o,u,F,_,A,k,p,n.allowVerticalPlacement),ot=n.textSizeData,Ke=null;ot.kind==="source"?(Ke=[Eu*_.layout.get("text-size").evaluate(k,{})],Ke[0]>ph&&Me(n.layerIds[0]+': Value for "text-size" is >= '+py+'. Reduce your "text-size".')):ot.kind==="composite"&&(Ke=[Eu*ce.compositeTextSizes[0].evaluate(k,{},Se),Eu*ce.compositeTextSizes[1].evaluate(k,{},Se)],(Ke[0]>ph||Ke[1]>ph)&&Me(n.layerIds[0]+': Value for "text-size" is >= '+py+'. Reduce your "text-size".')),n.addSymbols(n.text,qe,Ke,F,A,k,j,o,Y.lineStartIndex,Y.lineLength,me,Se);for(var Mt=0,yt=Q;Mt<yt.length;Mt+=1){var At=yt[Mt];ie[At]=n.text.placedSymbolArray.length-1}return qe.length*4}function VM(n){for(var o in n)return n[o];return null}function fX(n,o,u,p,_,A,k,F,Y,j,Q,ie,me,ce,Se,qe,ot,Ke,Mt,yt,At,Pt,Wt,cr,lr){var Rr,Sr=n.addToLineVertexArray(o,u),zr,Qr,Fr,Nr,ma=0,jr=0,Ya=0,gi=0,Wa=-1,Xa=-1,Ha={},Mi=w(""),Pi=0,tn=0;if(F._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Rr=F.layout.get("text-offset").evaluate(At,{},cr).map(function(gy){return gy*Kn}),Pi=Rr[0],tn=Rr[1]):(Pi=F.layout.get("text-radial-offset").evaluate(At,{},cr)*Kn,tn=b3),n.allowVerticalPlacement&&p.vertical){var ln=F.layout.get("text-rotate").evaluate(At,{},cr),Gn=ln+90,Mn=p.vertical;Fr=new L1(Y,o,j,Q,ie,Mn,me,ce,Se,Gn),k&&(Nr=new L1(Y,o,j,Q,ie,k,ot,Ke,Se,Gn))}if(_){var wo=F.layout.get("icon-rotate").evaluate(At,{}),To=F.layout.get("icon-text-fit")!=="none",Zn=NM(_,wo,Wt,To),Io=k?NM(k,wo,Wt,To):void 0;Qr=new L1(Y,o,j,Q,ie,_,ot,Ke,!1,wo),ma=Zn.length*4;var Ro=n.iconSizeData,Rn=null;Ro.kind==="source"?(Rn=[Eu*F.layout.get("icon-size").evaluate(At,{})],Rn[0]>ph&&Me(n.layerIds[0]+': Value for "icon-size" is >= '+py+'. Reduce your "icon-size".')):Ro.kind==="composite"&&(Rn=[Eu*Pt.compositeIconSizes[0].evaluate(At,{},cr),Eu*Pt.compositeIconSizes[1].evaluate(At,{},cr)],(Rn[0]>ph||Rn[1]>ph)&&Me(n.layerIds[0]+': Value for "icon-size" is >= '+py+'. Reduce your "icon-size".')),n.addSymbols(n.icon,Zn,Rn,yt,Mt,At,!1,o,Sr.lineStartIndex,Sr.lineLength,-1,cr),Wa=n.icon.placedSymbolArray.length-1,Io&&(jr=Io.length*4,n.addSymbols(n.icon,Io,Rn,yt,Mt,At,zs.vertical,o,Sr.lineStartIndex,Sr.lineLength,-1,cr),Xa=n.icon.placedSymbolArray.length-1)}for(var Fo in p.horizontal){var Is=p.horizontal[Fo];if(!zr){Mi=w(Is.text);var uc=F.layout.get("text-rotate").evaluate(At,{},cr);zr=new L1(Y,o,j,Q,ie,Is,me,ce,Se,uc)}var yh=Is.positionedLines.length===1;if(Ya+=UM(n,o,Is,A,F,Se,At,qe,Sr,p.vertical?zs.horizontal:zs.horizontalOnly,yh?Object.keys(p.horizontal):[Fo],Ha,Wa,Pt,cr),yh)break}p.vertical&&(gi+=UM(n,o,p.vertical,A,F,Se,At,qe,Sr,zs.vertical,["vertical"],Ha,Xa,Pt,cr));var gh=zr?zr.boxStartIndex:n.collisionBoxArray.length,_h=zr?zr.boxEndIndex:n.collisionBoxArray.length,a0=Fr?Fr.boxStartIndex:n.collisionBoxArray.length,Ul=Fr?Fr.boxEndIndex:n.collisionBoxArray.length,R1=Qr?Qr.boxStartIndex:n.collisionBoxArray.length,C3=Qr?Qr.boxEndIndex:n.collisionBoxArray.length,F1=Nr?Nr.boxStartIndex:n.collisionBoxArray.length,E3=Nr?Nr.boxEndIndex:n.collisionBoxArray.length,rl=-1,i0=function(gy,i7){return gy&&gy.circleDiameter?Math.max(gy.circleDiameter,i7):i7};rl=i0(zr,rl),rl=i0(Fr,rl),rl=i0(Qr,rl),rl=i0(Nr,rl);var q1=rl>-1?1:0;q1&&(rl*=lr/Kn),n.glyphOffsetArray.length>=yi.MAX_GLYPHS&&Me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),At.sortKey!==void 0&&n.addToSortKeyRanges(n.symbolInstances.length,At.sortKey),n.symbolInstances.emplaceBack(o.x,o.y,Ha.right>=0?Ha.right:-1,Ha.center>=0?Ha.center:-1,Ha.left>=0?Ha.left:-1,Ha.vertical||-1,Wa,Xa,Mi,gh,_h,a0,Ul,R1,C3,F1,E3,j,Ya,gi,ma,jr,q1,0,me,Pi,tn,rl)}function cX(n,o,u,p){var _=n.compareText;if(!(o in _))_[o]=[];else for(var A=_[o],k=A.length-1;k>=0;k--)if(p.dist(A[k])<u)return!0;return _[o].push(p),!1}var hX=Gp.VectorTileFeature.types,vX=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function P1(n,o,u,p,_,A,k,F,Y,j,Q,ie,me){var ce=F?Math.min(ph,Math.round(F[0])):0,Se=F?Math.min(ph,Math.round(F[1])):0;n.emplaceBack(o,u,Math.round(p*32),Math.round(_*32),A,k,(ce<<1)+(Y?1:0),Se,j*16,Q*16,ie*256,me*256)}function T3(n,o,u){n.emplaceBack(o.x,o.y,u),n.emplaceBack(o.x,o.y,u),n.emplaceBack(o.x,o.y,u),n.emplaceBack(o.x,o.y,u)}function dX(n){for(var o=0,u=n.sections;o<u.length;o+=1){var p=u[o];if(st(p.text))return!0}return!1}var $p=function(o){this.layoutVertexArray=new _f,this.indexArray=new Mu,this.programConfigurations=o,this.segments=new bn,this.dynamicLayoutVertexArray=new Qm,this.opacityVertexArray=new $m,this.placedSymbolArray=new ry};$p.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},$p.prototype.upload=function(o,u,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,dW.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,pW.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,vX,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(o))},$p.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},y("SymbolBuffers",$p);var my=function(o,u,p){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new p,this.segments=new bn,this.collisionVertexArray=new Jo};my.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,mW.members,!0)},my.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},y("CollisionBuffers",my);var yi=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(Y){return Y.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bp([]),this.placementViewportMatrix=Bp([]);var u=this.layers[0],p=u._unevaluatedLayout._values;this.textSizeData=x3(this.zoom,p["text-size"]),this.iconSizeData=x3(this.zoom,p["icon-size"]);var _=this.layers[0].layout,A=_.get("symbol-sort-key"),k=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&A.constantOr(1)!==void 0;var F=k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=F&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(function(Y){return zs[Y]})),this.stateDependentLayerIds=this.layers.filter(function(Y){return Y.isStateDependent()}).map(function(Y){return Y.id}),this.sourceID=o.sourceID};yi.prototype.createArrays=function(){this.text=new $p(new Mr(this.layers,this.zoom,function(o){return/^text/.test(o)})),this.icon=new $p(new Mr(this.layers,this.zoom,function(o){return/^icon/.test(o)})),this.glyphOffsetArray=new v1,this.lineVertexArray=new Qs,this.symbolInstances=new h1},yi.prototype.calculateGlyphDependencies=function(o,u,p,_,A){for(var k=0;k<o.length;k++)if(u[o.charCodeAt(k)]=!0,(p||_)&&A){var F=cy[o.charAt(k)];F&&(u[F.charCodeAt(0)]=!0)}},yi.prototype.populate=function(o,u,p){var _=this.layers[0],A=_.layout,k=A.get("text-font"),F=A.get("text-field"),Y=A.get("icon-image"),j=(F.value.kind!=="constant"||F.value.value instanceof gn&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),Q=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,ie=A.get("symbol-sort-key");if(this.features=[],!(!j&&!Q)){for(var me=u.iconDependencies,ce=u.glyphDependencies,Se=u.availableImages,qe=new Yt(this.zoom),ot=0,Ke=o;ot<Ke.length;ot+=1){var Mt=Ke[ot],yt=Mt.feature,At=Mt.id,Pt=Mt.index,Wt=Mt.sourceLayerIndex,cr=_._featureFilter.needGeometry,lr=Ai(yt,cr);if(_._featureFilter.filter(qe,lr,p)){cr||(lr.geometry=Va(yt));var Rr=void 0;if(j){var Sr=_.getValueAndResolveTokens("text-field",lr,p,Se),zr=gn.factory(Sr);dX(zr)&&(this.hasRTLText=!0),(!this.hasRTLText||ea()==="unavailable"||this.hasRTLText&&ri.isParsed())&&(Rr=_W(zr,_,lr))}var Qr=void 0;if(Q){var Fr=_.getValueAndResolveTokens("icon-image",lr,p,Se);Fr instanceof Pn?Qr=Fr:Qr=Pn.fromString(Fr)}if(!(!Rr&&!Qr)){var Nr=this.sortFeaturesByKey?ie.evaluate(lr,{},p):void 0,ma={id:At,text:Rr,icon:Qr,index:Pt,sourceLayerIndex:Wt,geometry:lr.geometry,properties:yt.properties,type:hX[yt.type],sortKey:Nr};if(this.features.push(ma),Qr&&(me[Qr.name]=!0),Rr){var jr=k.evaluate(lr,{},p).join(","),Ya=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zs.vertical)>=0;for(var gi=0,Wa=Rr.sections;gi<Wa.length;gi+=1){var Xa=Wa[gi];if(Xa.image)me[Xa.image.name]=!0;else{var Ha=ae(Rr.toString()),Mi=Xa.fontStack||jr,Pi=ce[Mi]=ce[Mi]||{};this.calculateGlyphDependencies(Xa.text,Pi,Ya,this.allowVerticalPlacement,Ha)}}}}}}A.get("symbol-placement")==="line"&&(this.features=xW(this.features)),this.sortFeaturesByKey&&this.features.sort(function(tn,ln){return tn.sortKey-ln.sortKey})}},yi.prototype.update=function(o,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,p))},yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yi.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yi.prototype.addToLineVertexArray=function(o,u){var p=this.lineVertexArray.length;if(o.segment!==void 0){for(var _=o.dist(u[o.segment+1]),A=o.dist(u[o.segment]),k={},F=o.segment+1;F<u.length;F++)k[F]={x:u[F].x,y:u[F].y,tileUnitDistanceFromAnchor:_},F<u.length-1&&(_+=u[F+1].dist(u[F]));for(var Y=o.segment||0;Y>=0;Y--)k[Y]={x:u[Y].x,y:u[Y].y,tileUnitDistanceFromAnchor:A},Y>0&&(A+=u[Y-1].dist(u[Y]));for(var j=0;j<u.length;j++){var Q=k[j];this.lineVertexArray.emplaceBack(Q.x,Q.y,Q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}},yi.prototype.addSymbols=function(o,u,p,_,A,k,F,Y,j,Q,ie,me){for(var ce=o.indexArray,Se=o.layoutVertexArray,qe=o.segments.prepareSegment(4*u.length,Se,ce,this.canOverlap?k.sortKey:void 0),ot=this.glyphOffsetArray.length,Ke=qe.vertexLength,Mt=this.allowVerticalPlacement&&F===zs.vertical?Math.PI/2:0,yt=k.text&&k.text.sections,At=0;At<u.length;At++){var Pt=u[At],Wt=Pt.tl,cr=Pt.tr,lr=Pt.bl,Rr=Pt.br,Sr=Pt.tex,zr=Pt.pixelOffsetTL,Qr=Pt.pixelOffsetBR,Fr=Pt.minFontScaleX,Nr=Pt.minFontScaleY,ma=Pt.glyphOffset,jr=Pt.isSDF,Ya=Pt.sectionIndex,gi=qe.vertexLength,Wa=ma[1];P1(Se,Y.x,Y.y,Wt.x,Wa+Wt.y,Sr.x,Sr.y,p,jr,zr.x,zr.y,Fr,Nr),P1(Se,Y.x,Y.y,cr.x,Wa+cr.y,Sr.x+Sr.w,Sr.y,p,jr,Qr.x,zr.y,Fr,Nr),P1(Se,Y.x,Y.y,lr.x,Wa+lr.y,Sr.x,Sr.y+Sr.h,p,jr,zr.x,Qr.y,Fr,Nr),P1(Se,Y.x,Y.y,Rr.x,Wa+Rr.y,Sr.x+Sr.w,Sr.y+Sr.h,p,jr,Qr.x,Qr.y,Fr,Nr),T3(o.dynamicLayoutVertexArray,Y,Mt),ce.emplaceBack(gi,gi+1,gi+2),ce.emplaceBack(gi+1,gi+2,gi+3),qe.vertexLength+=4,qe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ma[0]),(At===u.length-1||Ya!==u[At+1].sectionIndex)&&o.programConfigurations.populatePaintArrays(Se.length,k,k.index,{},me,yt&&yt[Ya])}o.placedSymbolArray.emplaceBack(Y.x,Y.y,ot,this.glyphOffsetArray.length-ot,Ke,j,Q,Y.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],F,0,!1,0,ie)},yi.prototype._addCollisionDebugVertex=function(o,u,p,_,A,k){return u.emplaceBack(0,0),o.emplaceBack(p.x,p.y,_,A,Math.round(k.x),Math.round(k.y))},yi.prototype.addCollisionDebugVertices=function(o,u,p,_,A,k,F){var Y=A.segments.prepareSegment(4,A.layoutVertexArray,A.indexArray),j=Y.vertexLength,Q=A.layoutVertexArray,ie=A.collisionVertexArray,me=F.anchorX,ce=F.anchorY;this._addCollisionDebugVertex(Q,ie,k,me,ce,new v(o,u)),this._addCollisionDebugVertex(Q,ie,k,me,ce,new v(p,u)),this._addCollisionDebugVertex(Q,ie,k,me,ce,new v(p,_)),this._addCollisionDebugVertex(Q,ie,k,me,ce,new v(o,_)),Y.vertexLength+=4;var Se=A.indexArray;Se.emplaceBack(j,j+1),Se.emplaceBack(j+1,j+2),Se.emplaceBack(j+2,j+3),Se.emplaceBack(j+3,j),Y.primitiveLength+=4},yi.prototype.addDebugCollisionBoxes=function(o,u,p,_){for(var A=o;A<u;A++){var k=this.collisionBoxArray.get(A),F=k.x1,Y=k.y1,j=k.x2,Q=k.y2;this.addCollisionDebugVertices(F,Y,j,Q,_?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,p)}},yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new my(zp,mM.members,Zv),this.iconCollisionBox=new my(zp,mM.members,Zv);for(var o=0;o<this.symbolInstances.length;o++){var u=this.symbolInstances.get(o);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}},yi.prototype._deserializeCollisionBoxesForSymbol=function(o,u,p,_,A,k,F,Y,j){for(var Q={},ie=u;ie<p;ie++){var me=o.get(ie);Q.textBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},Q.textFeatureIndex=me.featureIndex;break}for(var ce=_;ce<A;ce++){var Se=o.get(ce);Q.verticalTextBox={x1:Se.x1,y1:Se.y1,x2:Se.x2,y2:Se.y2,anchorPointX:Se.anchorPointX,anchorPointY:Se.anchorPointY},Q.verticalTextFeatureIndex=Se.featureIndex;break}for(var qe=k;qe<F;qe++){var ot=o.get(qe);Q.iconBox={x1:ot.x1,y1:ot.y1,x2:ot.x2,y2:ot.y2,anchorPointX:ot.anchorPointX,anchorPointY:ot.anchorPointY},Q.iconFeatureIndex=ot.featureIndex;break}for(var Ke=Y;Ke<j;Ke++){var Mt=o.get(Ke);Q.verticalIconBox={x1:Mt.x1,y1:Mt.y1,x2:Mt.x2,y2:Mt.y2,anchorPointX:Mt.anchorPointX,anchorPointY:Mt.anchorPointY},Q.verticalIconFeatureIndex=Mt.featureIndex;break}return Q},yi.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var u=0;u<this.symbolInstances.length;u++){var p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}},yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yi.prototype.addIndicesForPlacedSymbol=function(o,u){for(var p=o.placedSymbolArray.get(u),_=p.vertexStartIndex+p.numGlyphs*4,A=p.vertexStartIndex;A<_;A+=4)o.indexArray.emplaceBack(A,A+1,A+2),o.indexArray.emplaceBack(A+1,A+2,A+3)},yi.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var u=Math.sin(o),p=Math.cos(o),_=[],A=[],k=[],F=0;F<this.symbolInstances.length;++F){k.push(F);var Y=this.symbolInstances.get(F);_.push(Math.round(u*Y.anchorX+p*Y.anchorY)|0),A.push(Y.featureIndex)}return k.sort(function(j,Q){return _[j]-_[Q]||A[Q]-A[j]}),k},yi.prototype.addToSortKeyRanges=function(o,u){var p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})},yi.prototype.sortFeatures=function(o){var u=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var p=0,_=this.symbolInstanceIndexes;p<_.length;p+=1){var A=_[p],k=this.symbolInstances.get(A);this.featureSortOrder.push(k.featureIndex),[k.rightJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.leftJustifiedTextSymbolIndex].forEach(function(F,Y,j){F>=0&&j.indexOf(F)===Y&&u.addIndicesForPlacedSymbol(u.text,F)}),k.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,k.verticalPlacedTextSymbolIndex),k.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.placedIconSymbolIndex),k.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},y("SymbolBucket",yi,{omit:["layers","collisionBoxArray","features","compareText"]}),yi.MAX_GLYPHS=65535,yi.addDynamicAttributes=T3;function pX(n,o){return o.replace(/{([^{}]+)}/g,function(u,p){return p in n?String(n[p]):""})}var mX=new zn({"symbol-placement":new br(Zt.layout_symbol["symbol-placement"]),"symbol-spacing":new br(Zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new br(Zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vr(Zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new br(Zt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new br(Zt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new br(Zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new br(Zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new br(Zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vr(Zt.layout_symbol["icon-size"]),"icon-text-fit":new br(Zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new br(Zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vr(Zt.layout_symbol["icon-image"]),"icon-rotate":new Vr(Zt.layout_symbol["icon-rotate"]),"icon-padding":new br(Zt.layout_symbol["icon-padding"]),"icon-keep-upright":new br(Zt.layout_symbol["icon-keep-upright"]),"icon-offset":new Vr(Zt.layout_symbol["icon-offset"]),"icon-anchor":new Vr(Zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new br(Zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new br(Zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new br(Zt.layout_symbol["text-rotation-alignment"]),"text-field":new Vr(Zt.layout_symbol["text-field"]),"text-font":new Vr(Zt.layout_symbol["text-font"]),"text-size":new Vr(Zt.layout_symbol["text-size"]),"text-max-width":new Vr(Zt.layout_symbol["text-max-width"]),"text-line-height":new br(Zt.layout_symbol["text-line-height"]),"text-letter-spacing":new Vr(Zt.layout_symbol["text-letter-spacing"]),"text-justify":new Vr(Zt.layout_symbol["text-justify"]),"text-radial-offset":new Vr(Zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new br(Zt.layout_symbol["text-variable-anchor"]),"text-anchor":new Vr(Zt.layout_symbol["text-anchor"]),"text-max-angle":new br(Zt.layout_symbol["text-max-angle"]),"text-writing-mode":new br(Zt.layout_symbol["text-writing-mode"]),"text-rotate":new Vr(Zt.layout_symbol["text-rotate"]),"text-padding":new br(Zt.layout_symbol["text-padding"]),"text-keep-upright":new br(Zt.layout_symbol["text-keep-upright"]),"text-transform":new Vr(Zt.layout_symbol["text-transform"]),"text-offset":new Vr(Zt.layout_symbol["text-offset"]),"text-allow-overlap":new br(Zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new br(Zt.layout_symbol["text-ignore-placement"]),"text-optional":new br(Zt.layout_symbol["text-optional"])}),yX=new zn({"icon-opacity":new Vr(Zt.paint_symbol["icon-opacity"]),"icon-color":new Vr(Zt.paint_symbol["icon-color"]),"icon-halo-color":new Vr(Zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vr(Zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vr(Zt.paint_symbol["icon-halo-blur"]),"icon-translate":new br(Zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new br(Zt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vr(Zt.paint_symbol["text-opacity"]),"text-color":new Vr(Zt.paint_symbol["text-color"],{runtimeType:ws,getOverride:function(n){return n.textColor},hasOverride:function(n){return!!n.textColor}}),"text-halo-color":new Vr(Zt.paint_symbol["text-halo-color"]),"text-halo-width":new Vr(Zt.paint_symbol["text-halo-width"]),"text-halo-blur":new Vr(Zt.paint_symbol["text-halo-blur"]),"text-translate":new br(Zt.paint_symbol["text-translate"]),"text-translate-anchor":new br(Zt.paint_symbol["text-translate-anchor"])}),A3={paint:yX,layout:mX},e0=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:$u,this.defaultValue=o};e0.prototype.evaluate=function(o){if(o.formattedSection){var u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},e0.prototype.eachChild=function(o){if(!this.defaultValue.isConstant()){var u=this.defaultValue.value;o(u._styleExpression.expression)}},e0.prototype.outputDefined=function(){return!1},e0.prototype.serialize=function(){return null},y("FormatSectionOverride",e0,{omit:["defaultValue"]});var gX=function(n){function o(u){n.call(this,u,A3)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.recalculate=function(p,_){if(n.prototype.recalculate.call(this,p,_),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var A=this.layout.get("text-writing-mode");if(A){for(var k=[],F=0,Y=A;F<Y.length;F+=1){var j=Y[F];k.indexOf(j)<0&&k.push(j)}this.layout._values["text-writing-mode"]=k}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},o.prototype.getValueAndResolveTokens=function(p,_,A,k){var F=this.layout.get(p).evaluate(_,{},A,k),Y=this._unevaluatedLayout._values[p];return!Y.isDataDriven()&&!bu(Y.value)&&F?pX(_.properties,F):F},o.prototype.createBucket=function(p){return new yi(p)},o.prototype.queryRadius=function(){return 0},o.prototype.queryIntersectsFeature=function(){return!1},o.prototype._setPaintOverrides=function(){for(var p=0,_=A3.paint.overridableProperties;p<_.length;p+=1){var A=_[p];if(o.hasPaintOverride(this.layout,A)){var k=this.paint.get(A),F=new e0(k),Y=new Dl(F,k.property.specification),j=null;k.value.kind==="constant"||k.value.kind==="source"?j=new ks("source",Y):j=new Cs("composite",Y,k.value.zoomStops,k.value._interpolationType),this.paint._values[A]=new xi(k.property,j,k.parameters)}}},o.prototype._handleOverridablePaintPropertyUpdate=function(p,_,A){return!this.layout||_.isDataDriven()||A.isDataDriven()?!1:o.hasPaintOverride(this.layout,p)},o.hasPaintOverride=function(p,_){var A=p.get("text-field"),k=A3.paint.properties[_],F=!1,Y=function(ie){for(var me=0,ce=ie;me<ce.length;me+=1){var Se=ce[me];if(k.overrides&&k.overrides.hasOverride(Se)){F=!0;return}}};if(A.value.kind==="constant"&&A.value.value instanceof gn)Y(A.value.value.sections);else if(A.value.kind==="source"){var j=function(ie){if(!F)if(ie instanceof Zo&&nn(ie.value)===us){var me=ie.value;Y(me.sections)}else ie instanceof Yo?Y(ie.sections):ie.eachChild(j)},Q=A.value;Q._styleExpression&&j(Q._styleExpression.expression)}return F},o}(pi),_X=new zn({"background-color":new br(Zt.paint_background["background-color"]),"background-pattern":new Ti(Zt.paint_background["background-pattern"]),"background-opacity":new br(Zt.paint_background["background-opacity"])}),xX={paint:_X},bX=function(n){function o(u){n.call(this,u,xX)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(pi),wX=new zn({"raster-opacity":new br(Zt.paint_raster["raster-opacity"]),"raster-hue-rotate":new br(Zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new br(Zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new br(Zt.paint_raster["raster-brightness-max"]),"raster-saturation":new br(Zt.paint_raster["raster-saturation"]),"raster-contrast":new br(Zt.paint_raster["raster-contrast"]),"raster-resampling":new br(Zt.paint_raster["raster-resampling"]),"raster-fade-duration":new br(Zt.paint_raster["raster-fade-duration"])}),TX={paint:wX},AX=function(n){function o(u){n.call(this,u,TX)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o}(pi);function MX(n){var o=[],u=n.id;return u===void 0&&o.push({message:"layers."+u+': missing required property "id"'}),n.render===void 0&&o.push({message:"layers."+u+': missing required method "render"'}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&o.push({message:"layers."+u+': property "renderingMode" must be either "2d" or "3d"'}),o}var SX=function(n){function o(u){n.call(this,u,{}),this.implementation=u}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},o.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},o.prototype.recalculate=function(){},o.prototype.updateTransitions=function(){},o.prototype.hasTransition=function(){},o.prototype.serialize=function(){},o.prototype.onAdd=function(p){this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},o.prototype.onRemove=function(p){this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},o}(pi),kX={circle:JZ,heatmap:eY,hillshade:aY,fill:EY,"fill-extrusion":JY,line:hW,symbol:gX,background:bX,raster:AX};function CX(n){return n.type==="custom"?new SX(n):new kX[n.type](n)}var HM=b.HTMLImageElement,GM=b.HTMLCanvasElement,ZM=b.HTMLVideoElement,YM=b.ImageData,D1=b.ImageBitmap,jv=function(o,u,p,_){this.context=o,this.format=p,this.texture=o.gl.createTexture(),this.update(u,_)};jv.prototype.update=function(o,u,p){var _=o.width,A=o.height,k=(!this.size||this.size[0]!==_||this.size[1]!==A)&&!p,F=this,Y=F.context,j=Y.gl;if(this.useMipmap=!!(u&&u.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),Y.pixelStoreUnpackFlipY.set(!1),Y.pixelStoreUnpack.set(1),Y.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!u||u.premultiply!==!1)),k)this.size=[_,A],o instanceof HM||o instanceof GM||o instanceof ZM||o instanceof YM||D1&&o instanceof D1?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,o):j.texImage2D(j.TEXTURE_2D,0,this.format,_,A,0,this.format,j.UNSIGNED_BYTE,o.data);else{var Q=p||{x:0,y:0},ie=Q.x,me=Q.y;o instanceof HM||o instanceof GM||o instanceof ZM||o instanceof YM||D1&&o instanceof D1?j.texSubImage2D(j.TEXTURE_2D,0,ie,me,j.RGBA,j.UNSIGNED_BYTE,o):j.texSubImage2D(j.TEXTURE_2D,0,ie,me,_,A,j.RGBA,j.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D)},jv.prototype.bind=function(o,u,p){var _=this,A=_.context,k=A.gl;k.bindTexture(k.TEXTURE_2D,this.texture),p===k.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(p=k.LINEAR),o!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,o),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,p||o),this.filter=o),u!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,u),this.wrap=u)},jv.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},jv.prototype.destroy=function(){var o=this.context,u=o.gl;u.deleteTexture(this.texture),this.texture=null};var M3=function(o){var u=this;this._callback=o,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){u._triggered=!1,u._callback()})};M3.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){o._triggered=!1,o._callback()},0))},M3.prototype.remove=function(){delete this._channel,this._callback=function(){}};var t0=function(o,u,p){this.target=o,this.parent=u,this.mapId=p,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},he(["receive","process"],this),this.invoker=new M3(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=lt()?o:b};t0.prototype.send=function(o,u,p,_,A){var k=this;A===void 0&&(A=!1);var F=Math.round(Math.random()*1e18).toString(36).substring(0,10);p&&(this.callbacks[F]=p);var Y=xt(this.globalScope)?void 0:[];return this.target.postMessage({id:F,type:o,hasCallback:!!p,targetMapId:_,mustQueue:A,sourceMapId:this.mapId,data:U(u,Y)},Y),{cancel:function(){p&&delete k.callbacks[F],k.target.postMessage({id:F,type:"<cancel>",targetMapId:_,sourceMapId:k.mapId})}}},t0.prototype.receive=function(o){var u=o.data,p=u.id;if(p&&!(u.targetMapId&&this.mapId!==u.targetMapId))if(u.type==="<cancel>"){delete this.tasks[p];var _=this.cancelCallbacks[p];delete this.cancelCallbacks[p],_&&_()}else lt()||u.mustQueue?(this.tasks[p]=u,this.taskQueue.push(p),this.invoker.trigger()):this.processTask(p,u)},t0.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),u=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(o,u)}},t0.prototype.processTask=function(o,u){var p=this;if(u.type==="<response>"){var _=this.callbacks[o];delete this.callbacks[o],_&&(u.error?_(Z(u.error)):_(null,Z(u.data)))}else{var A=!1,k=xt(this.globalScope)?void 0:[],F=u.hasCallback?function(me,ce){A=!0,delete p.cancelCallbacks[o],p.target.postMessage({id:o,type:"<response>",sourceMapId:p.mapId,error:me?U(me):null,data:U(ce,k)},k)}:function(me){A=!0},Y=null,j=Z(u.data);if(this.parent[u.type])Y=this.parent[u.type](u.sourceMapId,j,F);else if(this.parent.getWorkerSource){var Q=u.type.split("."),ie=this.parent.getWorkerSource(u.sourceMapId,Q[0],j.source);Y=ie[Q[1]](j,F)}else F(new Error("Could not find function "+u.type));!A&&Y&&Y.cancel&&(this.cancelCallbacks[o]=Y.cancel)}},t0.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function EX(n,o,u){o=Math.pow(2,u)-o-1;var p=WM(n*256,o*256,u),_=WM((n+1)*256,(o+1)*256,u);return p[0]+","+p[1]+","+_[0]+","+_[1]}function WM(n,o,u){var p=2*Math.PI*6378137/256/Math.pow(2,u),_=n*p-2*Math.PI*6378137/2,A=o*p-2*Math.PI*6378137/2;return[_,A]}var Tn=function(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};Tn.prototype.setNorthEast=function(o){return this._ne=o instanceof Ui?new Ui(o.lng,o.lat):Ui.convert(o),this},Tn.prototype.setSouthWest=function(o){return this._sw=o instanceof Ui?new Ui(o.lng,o.lat):Ui.convert(o),this},Tn.prototype.extend=function(o){var u=this._sw,p=this._ne,_,A;if(o instanceof Ui)_=o,A=o;else if(o instanceof Tn){if(_=o._sw,A=o._ne,!_||!A)return this}else{if(Array.isArray(o))if(o.length===4||o.every(Array.isArray)){var k=o;return this.extend(Tn.convert(k))}else{var F=o;return this.extend(Ui.convert(F))}return this}return!u&&!p?(this._sw=new Ui(_.lng,_.lat),this._ne=new Ui(A.lng,A.lat)):(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(A.lng,p.lng),p.lat=Math.max(A.lat,p.lat)),this},Tn.prototype.getCenter=function(){return new Ui((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Tn.prototype.getSouthWest=function(){return this._sw},Tn.prototype.getNorthEast=function(){return this._ne},Tn.prototype.getNorthWest=function(){return new Ui(this.getWest(),this.getNorth())},Tn.prototype.getSouthEast=function(){return new Ui(this.getEast(),this.getSouth())},Tn.prototype.getWest=function(){return this._sw.lng},Tn.prototype.getSouth=function(){return this._sw.lat},Tn.prototype.getEast=function(){return this._ne.lng},Tn.prototype.getNorth=function(){return this._ne.lat},Tn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Tn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Tn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Tn.prototype.contains=function(o){var u=Ui.convert(o),p=u.lng,_=u.lat,A=this._sw.lat<=_&&_<=this._ne.lat,k=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=p&&p>=this._ne.lng),A&&k},Tn.convert=function(o){return!o||o instanceof Tn?o:new Tn(o)};var XM=63710088e-1,Ui=function(o,u){if(isNaN(o)||isNaN(u))throw new Error("Invalid LngLat object: ("+o+", "+u+")");if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ui.prototype.wrap=function(){return new Ui(q(this.lng,-180,180),this.lat)},Ui.prototype.toArray=function(){return[this.lng,this.lat]},Ui.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ui.prototype.distanceTo=function(o){var u=Math.PI/180,p=this.lat*u,_=o.lat*u,A=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((o.lng-this.lng)*u),k=XM*Math.acos(Math.min(A,1));return k},Ui.prototype.toBounds=function(o){o===void 0&&(o=0);var u=40075017,p=360*o/u,_=p/Math.cos(Math.PI/180*this.lat);return new Tn(new Ui(this.lng-_,this.lat-p),new Ui(this.lng+_,this.lat+p))},Ui.convert=function(o){if(o instanceof Ui)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Ui(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Ui(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var jM=2*Math.PI*XM;function JM(n){return jM*Math.cos(n*Math.PI/180)}function KM(n){return(180+n)/360}function QM(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function $M(n,o){return n/JM(o)}function LX(n){return n*360-180}function S3(n){var o=180-n*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}function PX(n,o){return n*JM(S3(o))}function DX(n){return 1/Math.cos(n*Math.PI/180)}var Jv=function(o,u,p){p===void 0&&(p=0),this.x=+o,this.y=+u,this.z=+p};Jv.fromLngLat=function(o,u){u===void 0&&(u=0);var p=Ui.convert(o);return new Jv(KM(p.lng),QM(p.lat),$M(u,p.lat))},Jv.prototype.toLngLat=function(){return new Ui(LX(this.x),S3(this.y))},Jv.prototype.toAltitude=function(){return PX(this.z,this.y)},Jv.prototype.meterInMercatorCoordinateUnits=function(){return 1/jM*DX(S3(this.y))};var Kv=function(o,u,p){this.z=o,this.x=u,this.y=p,this.key=yy(0,o,o,u,p)};Kv.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},Kv.prototype.url=function(o,u){var p=EX(this.x,this.y,this.z),_=zX(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",p)},Kv.prototype.getTilePoint=function(o){var u=Math.pow(2,this.z);return new v((o.x*u-this.x)*qr,(o.y*u-this.y)*qr)},Kv.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var e7=function(o,u){this.wrap=o,this.canonical=u,this.key=yy(o,u.z,u.z,u.x,u.y)},An=function(o,u,p,_,A){this.overscaledZ=o,this.wrap=u,this.canonical=new Kv(p,+_,+A),this.key=yy(u,o,p,_,A)};An.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},An.prototype.scaledTo=function(o){var u=this.canonical.z-o;return o>this.canonical.z?new An(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new An(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)},An.prototype.calculateScaledKey=function(o,u){var p=this.canonical.z-o;return o>this.canonical.z?yy(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y):yy(this.wrap*+u,o,o,this.canonical.x>>p,this.canonical.y>>p)},An.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u},An.prototype.children=function(o){if(this.overscaledZ>=o)return[new An(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var u=this.canonical.z+1,p=this.canonical.x*2,_=this.canonical.y*2;return[new An(u,this.wrap,u,p,_),new An(u,this.wrap,u,p+1,_),new An(u,this.wrap,u,p,_+1),new An(u,this.wrap,u,p+1,_+1)]},An.prototype.isLessThan=function(o){return this.wrap<o.wrap?!0:this.wrap>o.wrap?!1:this.overscaledZ<o.overscaledZ?!0:this.overscaledZ>o.overscaledZ?!1:this.canonical.x<o.canonical.x?!0:this.canonical.x>o.canonical.x?!1:this.canonical.y<o.canonical.y},An.prototype.wrapped=function(){return new An(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},An.prototype.unwrapTo=function(o){return new An(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},An.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},An.prototype.toUnwrapped=function(){return new e7(this.wrap,this.canonical)},An.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},An.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new Jv(o.x-this.wrap,o.y))};function yy(n,o,u,p,_){n*=2,n<0&&(n=n*-1-1);var A=1<<u;return(A*A*n+A*_+p).toString(36)+u.toString(36)+o.toString(36)}function zX(n,o,u){for(var p="",_,A=n;A>0;A--)_=1<<A-1,p+=(o&_?1:0)+(u&_?2:0);return p}y("CanonicalTileID",Kv),y("OverscaledTileID",An,{omit:["posMatrix"]});var sc=function(o,u,p){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return Me('"'+p+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=u.height;var _=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=p||"mapbox";for(var A=0;A<_;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(_,A)]=this.data[this._idx(_-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,_)]=this.data[this._idx(A,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)]};sc.prototype.get=function(o,u){var p=new Uint8Array(this.data.buffer),_=this._idx(o,u)*4,A=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return A(p[_],p[_+1],p[_+2])},sc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},sc.prototype._idx=function(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)},sc.prototype._unpackMapbox=function(o,u,p){return(o*256*256+u*256+p)/10-1e4},sc.prototype._unpackTerrarium=function(o,u,p){return o*256+u+p/256-32768},sc.prototype.getPixels=function(){return new es({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},sc.prototype.backfillBorder=function(o,u,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var _=u*this.dim,A=u*this.dim+this.dim,k=p*this.dim,F=p*this.dim+this.dim;switch(u){case-1:_=A-1;break;case 1:A=_+1;break}switch(p){case-1:k=F-1;break;case 1:F=k+1;break}for(var Y=-u*this.dim,j=-p*this.dim,Q=k;Q<F;Q++)for(var ie=_;ie<A;ie++)this.data[this._idx(ie,Q)]=o.data[this._idx(ie+Y,Q+j)]},y("DEMData",sc);function IX(n,o){var u={};if(!o)return u;for(var p=function(){var k=A[_],F=k.layerIds.map(function(ie){return o.getLayer(ie)}).filter(Boolean);if(F.length!==0){k.layers=F,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(function(ie){return F.filter(function(me){return me.id===ie})[0]}));for(var Y=0,j=F;Y<j.length;Y+=1){var Q=j[Y];u[Q.id]=k}}},_=0,A=n;_<A.length;_+=1)p();return u}var z1=function(o){this._stringToNumber={},this._numberToString=[];for(var u=0;u<o.length;u++){var p=o[u];this._stringToNumber[p]=u,this._numberToString[u]=p}};z1.prototype.encode=function(o){return this._stringToNumber[o]},z1.prototype.decode=function(o){return this._numberToString[o]};var I1=function(o,u,p,_,A){this.type="Feature",this._vectorTileFeature=o,o._z=u,o._x=p,o._y=_,this.properties=o.properties,this.id=A},k3={geometry:{configurable:!0}};k3.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},k3.geometry.set=function(n){this._geometry=n},I1.prototype.toJSON=function(){var o={geometry:this.geometry};for(var u in this)u==="_geometry"||u==="_vectorTileFeature"||(o[u]=this[u]);return o},Object.defineProperties(I1.prototype,k3);var r0=function(){this.state={},this.stateChanges={},this.deletedStates={}};r0.prototype.updateState=function(o,u,p){var _=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][_]=this.stateChanges[o][_]||{},H(this.stateChanges[o][_],p),this.deletedStates[o]===null){this.deletedStates[o]={};for(var A in this.state[o])A!==_&&(this.deletedStates[o][A]=null)}else{var k=this.deletedStates[o]&&this.deletedStates[o][_]===null;if(k){this.deletedStates[o][_]={};for(var F in this.state[o][_])p[F]||(this.deletedStates[o][_][F]=null)}else for(var Y in p){var j=this.deletedStates[o]&&this.deletedStates[o][_]&&this.deletedStates[o][_][Y]===null;j&&delete this.deletedStates[o][_][Y]}}},r0.prototype.removeFeatureState=function(o,u,p){var _=this.deletedStates[o]===null;if(!_){var A=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},p&&u!==void 0)this.deletedStates[o][A]!==null&&(this.deletedStates[o][A]=this.deletedStates[o][A]||{},this.deletedStates[o][A][p]=null);else if(u!==void 0){var k=this.stateChanges[o]&&this.stateChanges[o][A];if(k){this.deletedStates[o][A]={};for(p in this.stateChanges[o][A])this.deletedStates[o][A][p]=null}else this.deletedStates[o][A]=null}else this.deletedStates[o]=null}},r0.prototype.getState=function(o,u){var p=String(u),_=this.state[o]||{},A=this.stateChanges[o]||{},k=H({},_[p],A[p]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var F=this.deletedStates[o][u];if(F===null)return{};for(var Y in F)delete k[Y]}return k},r0.prototype.initializeTileState=function(o,u){o.setFeatureState(this.state,u)},r0.prototype.coalesceChanges=function(o,u){var p={};for(var _ in this.stateChanges){this.state[_]=this.state[_]||{};var A={};for(var k in this.stateChanges[_])this.state[_][k]||(this.state[_][k]={}),H(this.state[_][k],this.stateChanges[_][k]),A[k]=this.state[_][k];p[_]=A}for(var F in this.deletedStates){this.state[F]=this.state[F]||{};var Y={};if(this.deletedStates[F]===null)for(var j in this.state[F])Y[j]={},this.state[F][j]={};else for(var Q in this.deletedStates[F]){var ie=this.deletedStates[F][Q]===null;if(ie)this.state[F][Q]={};else for(var me=0,ce=Object.keys(this.deletedStates[F][Q]);me<ce.length;me+=1){var Se=ce[me];delete this.state[F][Q][Se]}Y[Q]=this.state[F][Q]}p[F]=p[F]||{},H(p[F],Y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(var qe in o){var ot=o[qe];ot.setFeatureState(p,u)}};var lc=function(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new pf(qr,16,0),this.grid3D=new pf(qr,16,0),this.featureIndexArray=new p1,this.promoteId=u};lc.prototype.insert=function(o,u,p,_,A,k){var F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,A);for(var Y=k?this.grid3D:this.grid,j=0;j<u.length;j++){for(var Q=u[j],ie=[1/0,1/0,-1/0,-1/0],me=0;me<Q.length;me++){var ce=Q[me];ie[0]=Math.min(ie[0],ce.x),ie[1]=Math.min(ie[1],ce.y),ie[2]=Math.max(ie[2],ce.x),ie[3]=Math.max(ie[3],ce.y)}ie[0]<qr&&ie[1]<qr&&ie[2]>=0&&ie[3]>=0&&Y.insert(F,ie[0],ie[1],ie[2],ie[3])}},lc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Gp.VectorTile(new T1(this.rawTileData)).layers,this.sourceLayerCoder=new z1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},lc.prototype.query=function(o,u,p,_){var A=this;this.loadVTLayers();for(var k=o.params||{},F=qr/o.tileSize/o.scale,Y=ff(k.filter),j=o.queryGeometry,Q=o.queryPadding*F,ie=r7(j),me=this.grid.query(ie.minX-Q,ie.minY-Q,ie.maxX+Q,ie.maxY+Q),ce=r7(o.cameraQueryGeometry),Se=this.grid3D.query(ce.minX-Q,ce.minY-Q,ce.maxX+Q,ce.maxY+Q,function(Wt,cr,lr,Rr){return Ol(o.cameraQueryGeometry,Wt-Q,cr-Q,lr+Q,Rr+Q)}),qe=0,ot=Se;qe<ot.length;qe+=1){var Ke=ot[qe];me.push(Ke)}me.sort(RX);for(var Mt={},yt,At=function(Wt){var cr=me[Wt];if(cr!==yt){yt=cr;var lr=A.featureIndexArray.get(cr),Rr=null;A.loadMatchingFeature(Mt,lr.bucketIndex,lr.sourceLayerIndex,lr.featureIndex,Y,k.layers,k.availableImages,u,p,_,function(Sr,zr,Qr){return Rr||(Rr=Va(Sr)),zr.queryIntersectsFeature(j,Sr,Qr,Rr,A.z,o.transform,F,o.pixelPosMatrix)})}},Pt=0;Pt<me.length;Pt++)At(Pt);return Mt},lc.prototype.loadMatchingFeature=function(o,u,p,_,A,k,F,Y,j,Q,ie){var me=this.bucketLayerIDs[u];if(!(k&&!ye(k,me))){var ce=this.sourceLayerCoder.decode(p),Se=this.vtLayers[ce],qe=Se.feature(_);if(A.needGeometry){var ot=Ai(qe,!0);if(!A.filter(new Yt(this.tileID.overscaledZ),ot,this.tileID.canonical))return}else if(!A.filter(new Yt(this.tileID.overscaledZ),qe))return;for(var Ke=this.getId(qe,ce),Mt=0;Mt<me.length;Mt++){var yt=me[Mt];if(!(k&&k.indexOf(yt)<0)){var At=Y[yt];if(At){var Pt={};Ke!==void 0&&Q&&(Pt=Q.getState(At.sourceLayer||"_geojsonTileLayer",Ke));var Wt=H({},j[yt]);Wt.paint=t7(Wt.paint,At.paint,qe,Pt,F),Wt.layout=t7(Wt.layout,At.layout,qe,Pt,F);var cr=!ie||ie(qe,At,Pt);if(cr){var lr=new I1(qe,this.z,this.x,this.y,Ke);lr.layer=Wt;var Rr=o[yt];Rr===void 0&&(Rr=o[yt]=[]),Rr.push({featureIndex:_,feature:lr,intersectionZ:cr})}}}}}},lc.prototype.lookupSymbolFeatures=function(o,u,p,_,A,k,F,Y){var j={};this.loadVTLayers();for(var Q=ff(A),ie=0,me=o;ie<me.length;ie+=1){var ce=me[ie];this.loadMatchingFeature(j,p,_,ce,Q,k,F,Y,u)}return j},lc.prototype.hasLayer=function(o){for(var u=0,p=this.bucketLayerIDs;u<p.length;u+=1)for(var _=p[u],A=0,k=_;A<k.length;A+=1){var F=k[A];if(o===F)return!0}return!1},lc.prototype.getId=function(o,u){var p=o.id;if(this.promoteId){var _=typeof this.promoteId=="string"?this.promoteId:this.promoteId[u];p=o.properties[_],typeof p=="boolean"&&(p=Number(p))}return p},y("FeatureIndex",lc,{omit:["rawTileData","sourceLayerCoder"]});function t7(n,o,u,p,_){return Ee(n,function(A,k){var F=o instanceof xn?o.get(k):null;return F&&F.evaluate?F.evaluate(u,p,_):F})}function r7(n){for(var o=1/0,u=1/0,p=-1/0,_=-1/0,A=0,k=n;A<k.length;A+=1){var F=k[A];o=Math.min(o,F.x),u=Math.min(u,F.y),p=Math.max(p,F.x),_=Math.max(_,F.y)}return{minX:o,minY:u,maxX:p,maxY:_}}function RX(n,o){return o-n}var FX=3e4,Hn=function(o,u){this.tileID=o,this.uid=K(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Hn.prototype.registerFadeDuration=function(o){var u=o+this.timeAdded;u<ht.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)},Hn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Hn.prototype.loadVectorData=function(o,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!o){this.collisionBoxArray=new ty;return}o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=IX(o.buckets,u.style),this.hasSymbolBuckets=!1;for(var _ in this.buckets){var A=this.buckets[_];if(A instanceof yi)if(this.hasSymbolBuckets=!0,p)A.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var k in this.buckets){var F=this.buckets[k];if(F instanceof yi&&F.hasRTLText){this.hasRTLText=!0,$a();break}}this.queryPadding=0;for(var Y in this.buckets){var j=this.buckets[Y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(Y).queryRadius(j))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)},Hn.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Hn.prototype.getBucket=function(o){return this.buckets[o.id]},Hn.prototype.upload=function(o){for(var u in this.buckets){var p=this.buckets[u];p.uploadPending()&&p.upload(o)}var _=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new jv(o,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new jv(o,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)},Hn.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},Hn.prototype.queryRenderedFeatures=function(o,u,p,_,A,k,F,Y,j,Q){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:A,scale:k,tileSize:this.tileSize,pixelPosMatrix:Q,transform:Y,params:F,queryPadding:this.queryPadding*j},o,u,p)},Hn.prototype.querySourceFeatures=function(o,u){var p=this.latestFeatureIndex;if(!(!p||!p.rawTileData)){var _=p.loadVTLayers(),A=u?u.sourceLayer:"",k=_._geojsonTileLayer||_[A];if(k)for(var F=ff(u&&u.filter),Y=this.tileID.canonical,j=Y.z,Q=Y.x,ie=Y.y,me={z:j,x:Q,y:ie},ce=0;ce<k.length;ce++){var Se=k.feature(ce);if(F.needGeometry){var qe=Ai(Se,!0);if(!F.filter(new Yt(this.tileID.overscaledZ),qe,this.tileID.canonical))continue}else if(!F.filter(new Yt(this.tileID.overscaledZ),Se))continue;var ot=p.getId(Se,A),Ke=new I1(Se,j,Q,ie,ot);Ke.tile=me,o.push(Ke)}}},Hn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Hn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Hn.prototype.setExpiryData=function(o){var u=this.expirationTime;if(o.cacheControl){var p=ut(o.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+p["max-age"]*1e3)}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var _=Date.now(),A=!1;if(this.expirationTime>_)A=!1;else if(!u)A=!0;else if(this.expirationTime<u)A=!0;else{var k=this.expirationTime-u;k?this.expirationTime=_+Math.max(k,FX):A=!0}A?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Hn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Hn.prototype.setFeatureState=function(o,u){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)){var p=this.latestFeatureIndex.loadVTLayers();for(var _ in this.buckets)if(u.style.hasLayer(_)){var A=this.buckets[_],k=A.layers[0].sourceLayer||"_geojsonTileLayer",F=p[k],Y=o[k];if(!(!F||!Y||Object.keys(Y).length===0)){A.update(Y,F,this.imageAtlas&&this.imageAtlas.patternPositions||{});var j=u&&u.style&&u.style.getLayer(_);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(A)))}}}},Hn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Hn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ht.now()},Hn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Hn.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=ht.now()+o},Hn.prototype.setDependencies=function(o,u){for(var p={},_=0,A=u;_<A.length;_+=1){var k=A[_];p[k]=!0}this.dependencies[o]=p},Hn.prototype.hasDependency=function(o,u){for(var p=0,_=o;p<_.length;p+=1){var A=_[p],k=this.dependencies[A];if(k)for(var F=0,Y=u;F<Y.length;F+=1){var j=Y[F];if(k[j])return!0}}return!1};var qX=["type","source","source-layer","minzoom","maxzoom","filter","layout"],mh=b.performance,a7=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},mh.mark(this._marks.start)};a7.prototype.finish=function(){mh.mark(this._marks.end);var o=mh.getEntriesByName(this._marks.measure);return o.length===0&&(mh.measure(this._marks.measure,this._marks.start,this._marks.end),o=mh.getEntriesByName(this._marks.measure),mh.clearMarks(this._marks.start),mh.clearMarks(this._marks.end),mh.clearMeasures(this._marks.measure)),o},a.Actor=t0,a.AlphaImage=Xv,a.CanonicalTileID=Kv,a.CollisionBoxArray=ty,a.Color=ni,a.DEMData=sc,a.DataConstantProperty=br,a.DictionaryCoder=z1,a.EXTENT=qr,a.ErrorEvent=Wr,a.EvaluationParameters=Yt,a.Event=ii,a.Evented=vr,a.FeatureIndex=lc,a.FillBucket=ku,a.FillExtrusionBucket=Cu,a.ImageAtlas=vy,a.ImagePosition=M1,a.LineBucket=zo,a.LngLat=Ui,a.LngLatBounds=Tn,a.MercatorCoordinate=Jv,a.ONE_EM=Kn,a.OverscaledTileID=An,a.Point=v,a.Point$1=v,a.Properties=zn,a.Protobuf=T1,a.RGBAImage=es,a.RequestManager=Be,a.RequestPerformance=a7,a.ResourceType=vi,a.SegmentVector=bn,a.SourceFeatureState=r0,a.StructArrayLayout1ui2=lh,a.StructArrayLayout2f1f2i16=Au,a.StructArrayLayout2i4=rc,a.StructArrayLayout3ui6=Mu,a.StructArrayLayout4i8=Km,a.SymbolBucket=yi,a.Texture=jv,a.Tile=Hn,a.Transitionable=sa,a.Uniform1f=Ze,a.Uniform1i=Ie,a.Uniform2f=Ge,a.Uniform3f=Oe,a.Uniform4f=Xe,a.UniformColor=ft,a.UniformMatrix4f=It,a.UnwrappedTileID=e7,a.ValidationError=Or,a.WritingMode=zs,a.ZoomHistory=$,a.add=Up,a.addDynamicAttributes=T3,a.asyncAll=B,a.bezier=P,a.bindAll=he,a.browser=ht,a.cacheEntryPossiblyAdded=En,a.clamp=I,a.clearTileCache=pa,a.clipLine=qM,a.clone=Np,a.clone$1=Te,a.clone$2=a3,a.collisionCircleLayout=yW,a.config=tt,a.create=qp,a.create$1=xo,a.create$2=Fp,a.createCommonjsModule=s,a.createExpression=$f,a.createLayout=ui,a.createStyleLayer=CX,a.cross=UZ,a.deepEqual=T,a.dot=OZ,a.dot$1=YZ,a.ease=E,a.emitValidationErrors=tc,a.endsWith=de,a.enforceCacheSizeLimit=Vi,a.evaluateSizeForFeature=LM,a.evaluateSizeForZoom=PM,a.evaluateVariableOffset=OM,a.evented=Ir,a.extend=H,a.featureFilter=ff,a.filterObject=ke,a.fromRotation=ch,a.getAnchorAlignment=_3,a.getAnchorJustification=w3,a.getArrayBuffer=$e,a.getImage=Br,a.getJSON=Ne,a.getRTLTextPluginStatus=ea,a.getReferrer=le,a.getVideo=ca,a.identity=Bp,a.invert=hh,a.isChar=X,a.isMapboxURL=vt,a.keysDifference=O,a.makeRequest=Ce,a.mapObject=Ee,a.mercatorXfromLng=KM,a.mercatorYfromLat=QM,a.mercatorZfromAltitude=$M,a.mul=r3,a.multiply=vh,a.mvt=Gp,a.nextPowerOfTwo=oe,a.normalize=iy,a.number=fn,a.offscreenCanvasSupported=Zr,a.ortho=t3,a.parseGlyphPBF=GW,a.pbf=T1,a.performSymbolLayout=lX,a.perspective=ay,a.pick=V,a.plugin=ri,a.polygonIntersectsPolygon=na,a.postMapLoadEvent=_t,a.postTurnstileEvent=Fe,a.potpack=wM,a.refProperties=qX,a.register=y,a.registerForPluginStateChange=Ur,a.renderColorRamp=eM,a.rotate=Yv,a.rotateX=$o,a.rotateZ=Op,a.scale=Qo,a.scale$1=ZZ,a.scale$2=n3,a.setCacheLimits=Gr,a.setRTLTextPlugin=Kr,a.sphericalToCartesian=pt,a.sqrLen=jZ,a.styleSpec=Zt,a.sub=HZ,a.symbolSize=$W,a.transformMat3=VZ,a.transformMat4=y1,a.translate=sn,a.triggerPluginCompletionEvent=sr,a.uniqueId=K,a.validateCustomStyleLayer=MX,a.validateLight=fi,a.validateStyle=ti,a.values=z,a.vectorTile=Gp,a.version=l,a.warnOnce=Me,a.webpSupported=Rt,a.window=b,a.wrap=q}),i(["./shared"],function(a){"use strict";function s(le){var ee=typeof le;if(ee==="number"||ee==="boolean"||ee==="string"||le===void 0||le===null)return JSON.stringify(le);if(Array.isArray(le)){for(var se="[",fe=0,Ce=le;fe<Ce.length;fe+=1){var Ne=Ce[fe];se+=s(Ne)+","}return se+"]"}for(var $e=Object.keys(le).sort(),Ve="{",dt=0;dt<$e.length;dt++)Ve+=JSON.stringify($e[dt])+":"+s(le[$e[dt]])+",";return Ve+"}"}function l(le){for(var ee="",se=0,fe=a.refProperties;se<fe.length;se+=1){var Ce=fe[se];ee+="/"+s(le[Ce])}return ee}function f(le,ee){for(var se={},fe=0;fe<le.length;fe++){var Ce=ee&&ee[le[fe].id]||l(le[fe]);ee&&(ee[le[fe].id]=Ce);var Ne=se[Ce];Ne||(Ne=se[Ce]=[]),Ne.push(le[fe])}var $e=[];for(var Ve in se)$e.push(se[Ve]);return $e}var h=function(ee){this.keyCache={},ee&&this.replace(ee)};h.prototype.replace=function(ee){this._layerConfigs={},this._layers={},this.update(ee,[])},h.prototype.update=function(ee,se){for(var fe=this,Ce=0,Ne=ee;Ce<Ne.length;Ce+=1){var $e=Ne[Ce];this._layerConfigs[$e.id]=$e;var Ve=this._layers[$e.id]=a.createStyleLayer($e);Ve._featureFilter=a.featureFilter(Ve.filter),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(var dt=0,Et=se;dt<Et.length;dt+=1){var Dt=Et[dt];delete this.keyCache[Dt],delete this._layerConfigs[Dt],delete this._layers[Dt]}this.familiesBySource={};for(var Qt=f(a.values(this._layerConfigs),this.keyCache),Vt=0,wr=Qt;Vt<wr.length;Vt+=1){var Yr=wr[Vt],Br=Yr.map(function(vr){return fe._layers[vr.id]}),ca=Br[0];if(ca.visibility!=="none"){var ua=ca.source||"",Na=this.familiesBySource[ua];Na||(Na=this.familiesBySource[ua]={});var ii=ca.sourceLayer||"_geojsonTileLayer",Wr=Na[ii];Wr||(Wr=Na[ii]=[]),Wr.push(Br)}}};var v=1,m=function(ee){var se={},fe=[];for(var Ce in ee){var Ne=ee[Ce],$e=se[Ce]={};for(var Ve in Ne){var dt=Ne[+Ve];if(!(!dt||dt.bitmap.width===0||dt.bitmap.height===0)){var Et={x:0,y:0,w:dt.bitmap.width+2*v,h:dt.bitmap.height+2*v};fe.push(Et),$e[Ve]={rect:Et,metrics:dt.metrics}}}}var Dt=a.potpack(fe),Qt=Dt.w,Vt=Dt.h,wr=new a.AlphaImage({width:Qt||1,height:Vt||1});for(var Yr in ee){var Br=ee[Yr];for(var ca in Br){var ua=Br[+ca];if(!(!ua||ua.bitmap.width===0||ua.bitmap.height===0)){var Na=se[Yr][ca].rect;a.AlphaImage.copy(ua.bitmap,wr,{x:0,y:0},{x:Na.x+v,y:Na.y+v},ua.bitmap)}}}this.image=wr,this.positions=se};a.register("GlyphAtlas",m);var b=function(ee){this.tileID=new a.OverscaledTileID(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId};b.prototype.parse=function(ee,se,fe,Ce,Ne){var $e=this;this.status="parsing",this.data=ee,this.collisionBoxArray=new a.CollisionBoxArray;var Ve=new a.DictionaryCoder(Object.keys(ee.layers).sort()),dt=new a.FeatureIndex(this.tileID,this.promoteId);dt.bucketLayerIDs=[];var Et={},Dt={featureIndex:dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},Qt=se.familiesBySource[this.source];for(var Vt in Qt){var wr=ee.layers[Vt];if(wr){wr.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Vt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Yr=Ve.encode(Vt),Br=[],ca=0;ca<wr.length;ca++){var ua=wr.feature(ca),Na=dt.getId(ua,Vt);Br.push({feature:ua,id:Na,index:ca,sourceLayerIndex:Yr})}for(var ii=0,Wr=Qt[Vt];ii<Wr.length;ii+=1){var vr=Wr[ii],$r=vr[0];if(!($r.minzoom&&this.zoom<Math.floor($r.minzoom))&&!($r.maxzoom&&this.zoom>=$r.maxzoom)&&$r.visibility!=="none"){T(vr,this.zoom,fe);var ga=Et[$r.id]=$r.createBucket({index:dt.bucketLayerIDs.length,layers:vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yr,sourceID:this.source});ga.populate(Br,Dt,this.tileID.canonical),dt.bucketLayerIDs.push(vr.map(function(Ga){return Ga.id}))}}}}var ir,wi,La,si,fa=a.mapObject(Dt.glyphDependencies,function(Ga){return Object.keys(Ga).map(Number)});Object.keys(fa).length?Ce.send("getGlyphs",{uid:this.uid,stacks:fa},function(Ga,Jn){ir||(ir=Ga,wi=Jn,xs.call($e))}):wi={};var Ln=Object.keys(Dt.iconDependencies);Ln.length?Ce.send("getImages",{icons:Ln,source:this.source,tileID:this.tileID,type:"icons"},function(Ga,Jn){ir||(ir=Ga,La=Jn,xs.call($e))}):La={};var Co=Object.keys(Dt.patternDependencies);Co.length?Ce.send("getImages",{icons:Co,source:this.source,tileID:this.tileID,type:"patterns"},function(Ga,Jn){ir||(ir=Ga,si=Jn,xs.call($e))}):si={},xs.call(this);function xs(){if(ir)return Ne(ir);if(wi&&La&&si){var Ga=new m(wi),Jn=new a.ImageAtlas(La,si);for(var cu in Et){var Bi=Et[cu];Bi instanceof a.SymbolBucket?(T(Bi.layers,this.zoom,fe),a.performSymbolLayout(Bi,wi,Ga.positions,La,Jn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Bi.hasPattern&&(Bi instanceof a.LineBucket||Bi instanceof a.FillBucket||Bi instanceof a.FillExtrusionBucket)&&(T(Bi.layers,this.zoom,fe),Bi.addFeatures(Dt,this.tileID.canonical,Jn.patternPositions))}this.status="done",Ne(null,{buckets:a.values(Et).filter(function(vl){return!vl.isEmpty()}),featureIndex:dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ga.image,imageAtlas:Jn,glyphMap:this.returnDependencies?wi:null,iconMap:this.returnDependencies?La:null,glyphPositions:this.returnDependencies?Ga.positions:null})}}};function T(le,ee,se){for(var fe=new a.EvaluationParameters(ee),Ce=0,Ne=le;Ce<Ne.length;Ce+=1){var $e=Ne[Ce];$e.recalculate(fe,se)}}function S(le,ee){var se=a.getArrayBuffer(le.request,function(fe,Ce,Ne,$e){fe?ee(fe):Ce&&ee(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Ce)),rawData:Ce,cacheControl:Ne,expires:$e})});return function(){se.cancel(),ee()}}var C=function(ee,se,fe,Ce){this.actor=ee,this.layerIndex=se,this.availableImages=fe,this.loadVectorData=Ce||S,this.loading={},this.loaded={}};C.prototype.loadTile=function(ee,se){var fe=this,Ce=ee.uid;this.loading||(this.loading={});var Ne=ee&&ee.request&&ee.request.collectResourceTiming?new a.RequestPerformance(ee.request):!1,$e=this.loading[Ce]=new b(ee);$e.abort=this.loadVectorData(ee,function(Ve,dt){if(delete fe.loading[Ce],Ve||!dt)return $e.status="done",fe.loaded[Ce]=$e,se(Ve);var Et=dt.rawData,Dt={};dt.expires&&(Dt.expires=dt.expires),dt.cacheControl&&(Dt.cacheControl=dt.cacheControl);var Qt={};if(Ne){var Vt=Ne.finish();Vt&&(Qt.resourceTiming=JSON.parse(JSON.stringify(Vt)))}$e.vectorTile=dt.vectorTile,$e.parse(dt.vectorTile,fe.layerIndex,fe.availableImages,fe.actor,function(wr,Yr){if(wr||!Yr)return se(wr);se(null,a.extend({rawTileData:Et.slice(0)},Yr,Dt,Qt))}),fe.loaded=fe.loaded||{},fe.loaded[Ce]=$e})},C.prototype.reloadTile=function(ee,se){var fe=this,Ce=this.loaded,Ne=ee.uid,$e=this;if(Ce&&Ce[Ne]){var Ve=Ce[Ne];Ve.showCollisionBoxes=ee.showCollisionBoxes;var dt=function(Et,Dt){var Qt=Ve.reloadCallback;Qt&&(delete Ve.reloadCallback,Ve.parse(Ve.vectorTile,$e.layerIndex,fe.availableImages,$e.actor,Qt)),se(Et,Dt)};Ve.status==="parsing"?Ve.reloadCallback=dt:Ve.status==="done"&&(Ve.vectorTile?Ve.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,dt):dt())}},C.prototype.abortTile=function(ee,se){var fe=this.loading,Ce=ee.uid;fe&&fe[Ce]&&fe[Ce].abort&&(fe[Ce].abort(),delete fe[Ce]),se()},C.prototype.removeTile=function(ee,se){var fe=this.loaded,Ce=ee.uid;fe&&fe[Ce]&&delete fe[Ce],se()};var P=a.window.ImageBitmap,E=function(){this.loaded={}};E.prototype.loadTile=function(ee,se){var fe=ee.uid,Ce=ee.encoding,Ne=ee.rawImageData,$e=P&&Ne instanceof P?this.getImageData(Ne):Ne,Ve=new a.DEMData(fe,$e,Ce);this.loaded=this.loaded||{},this.loaded[fe]=Ve,se(null,Ve)},E.prototype.getImageData=function(ee){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);var se=this.offscreenCanvasContext.getImageData(-1,-1,ee.width+2,ee.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:se.width,height:se.height},se.data)},E.prototype.removeTile=function(ee){var se=this.loaded,fe=ee.uid;se&&se[fe]&&delete se[fe]};var I=q;function q(le,ee){var se=le&&le.type,fe;if(se==="FeatureCollection")for(fe=0;fe<le.features.length;fe++)q(le.features[fe],ee);else if(se==="GeometryCollection")for(fe=0;fe<le.geometries.length;fe++)q(le.geometries[fe],ee);else if(se==="Feature")q(le.geometry,ee);else if(se==="Polygon")B(le.coordinates,ee);else if(se==="MultiPolygon")for(fe=0;fe<le.coordinates.length;fe++)B(le.coordinates[fe],ee);return le}function B(le,ee){if(le.length!==0){z(le[0],ee);for(var se=1;se<le.length;se++)z(le[se],!ee)}}function z(le,ee){for(var se=0,fe=0,Ce=le.length,Ne=Ce-1;fe<Ce;Ne=fe++)se+=(le[fe][0]-le[Ne][0])*(le[Ne][1]+le[fe][1]);se>=0!=!!ee&&le.reverse()}var O=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,H=function(ee){this._feature=ee,this.extent=a.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))};H.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ee=[],se=0,fe=this._feature.geometry;se<fe.length;se+=1){var Ce=fe[se];ee.push([new a.Point$1(Ce[0],Ce[1])])}return ee}else{for(var Ne=[],$e=0,Ve=this._feature.geometry;$e<Ve.length;$e+=1){for(var dt=Ve[$e],Et=[],Dt=0,Qt=dt;Dt<Qt.length;Dt+=1){var Vt=Qt[Dt];Et.push(new a.Point$1(Vt[0],Vt[1]))}Ne.push(Et)}return Ne}},H.prototype.toGeoJSON=function(ee,se,fe){return O.call(this,ee,se,fe)};var V=function(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=ee.length,this._features=ee};V.prototype.feature=function(ee){return new H(this._features[ee])};var W=a.vectorTile.VectorTileFeature,K=re;function re(le,ee){this.options=ee||{},this.features=le,this.length=le.length}re.prototype.feature=function(le){return new oe(this.features[le],this.options.extent)};function oe(le,ee){this.id=typeof le.id=="number"?le.id:void 0,this.type=le.type,this.rawGeometry=le.type===1?[le.geometry]:le.geometry,this.properties=le.tags,this.extent=ee||4096}oe.prototype.loadGeometry=function(){var le=this.rawGeometry;this.geometry=[];for(var ee=0;ee<le.length;ee++){for(var se=le[ee],fe=[],Ce=0;Ce<se.length;Ce++)fe.push(new a.Point$1(se[Ce][0],se[Ce][1]));this.geometry.push(fe)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var le=this.geometry,ee=1/0,se=-1/0,fe=1/0,Ce=-1/0,Ne=0;Ne<le.length;Ne++)for(var $e=le[Ne],Ve=0;Ve<$e.length;Ve++){var dt=$e[Ve];ee=Math.min(ee,dt.x),se=Math.max(se,dt.x),fe=Math.min(fe,dt.y),Ce=Math.max(Ce,dt.y)}return[ee,fe,se,Ce]},oe.prototype.toGeoJSON=W.prototype.toGeoJSON;var ne=ke,he=ke,de=Te,Ee=K;function ke(le){var ee=new a.pbf;return ye(le,ee),ee.finish()}function Te(le,ee){ee=ee||{};var se={};for(var fe in le)se[fe]=new K(le[fe].features,ee),se[fe].name=fe,se[fe].version=ee.version,se[fe].extent=ee.extent;return ke({layers:se})}function ye(le,ee){for(var se in le.layers)ee.writeMessage(3,Ae,le.layers[se])}function Ae(le,ee){ee.writeVarintField(15,le.version||1),ee.writeStringField(1,le.name||""),ee.writeVarintField(5,le.extent||4096);var se,fe={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<le.length;se++)fe.feature=le.feature(se),ee.writeMessage(2,Me,fe);var Ce=fe.keys;for(se=0;se<Ce.length;se++)ee.writeStringField(3,Ce[se]);var Ne=fe.values;for(se=0;se<Ne.length;se++)ee.writeMessage(4,ut,Ne[se])}function Me(le,ee){var se=le.feature;se.id!==void 0&&ee.writeVarintField(1,se.id),ee.writeMessage(2,De,le),ee.writeVarintField(3,se.type),ee.writeMessage(4,lt,se)}function De(le,ee){var se=le.feature,fe=le.keys,Ce=le.values,Ne=le.keycache,$e=le.valuecache;for(var Ve in se.properties){var dt=Ne[Ve];typeof dt=="undefined"&&(fe.push(Ve),dt=fe.length-1,Ne[Ve]=dt),ee.writeVarint(dt);var Et=se.properties[Ve],Dt=typeof Et;Dt!=="string"&&Dt!=="boolean"&&Dt!=="number"&&(Et=JSON.stringify(Et));var Qt=Dt+":"+Et,Vt=$e[Qt];typeof Vt=="undefined"&&(Ce.push(Et),Vt=Ce.length-1,$e[Qt]=Vt),ee.writeVarint(Vt)}}function at(le,ee){return(ee<<3)+(le&7)}function pt(le){return le<<1^le>>31}function lt(le,ee){for(var se=le.loadGeometry(),fe=le.type,Ce=0,Ne=0,$e=se.length,Ve=0;Ve<$e;Ve++){var dt=se[Ve],Et=1;fe===1&&(Et=dt.length),ee.writeVarint(at(1,Et));for(var Dt=fe===3?dt.length-1:dt.length,Qt=0;Qt<Dt;Qt++){Qt===1&&fe!==1&&ee.writeVarint(at(2,Dt-1));var Vt=dt[Qt].x-Ce,wr=dt[Qt].y-Ne;ee.writeVarint(pt(Vt)),ee.writeVarint(pt(wr)),Ce+=Vt,Ne+=wr}fe===3&&ee.writeVarint(at(7,1))}}function ut(le,ee){var se=typeof le;se==="string"?ee.writeStringField(1,le):se==="boolean"?ee.writeBooleanField(7,le):se==="number"&&(le%1!==0?ee.writeDoubleField(3,le):le<0?ee.writeSVarintField(6,le):ee.writeVarintField(5,le))}ne.fromVectorTileJs=he,ne.fromGeojsonVt=de,ne.GeoJSONWrapper=Ee;function Ye(le,ee,se,fe,Ce,Ne){if(!(Ce-fe<=se)){var $e=fe+Ce>>1;xt(le,ee,$e,fe,Ce,Ne%2),Ye(le,ee,se,fe,$e-1,Ne+1),Ye(le,ee,se,$e+1,Ce,Ne+1)}}function xt(le,ee,se,fe,Ce,Ne){for(;Ce>fe;){if(Ce-fe>600){var $e=Ce-fe+1,Ve=se-fe+1,dt=Math.log($e),Et=.5*Math.exp(2*dt/3),Dt=.5*Math.sqrt(dt*Et*($e-Et)/$e)*(Ve-$e/2<0?-1:1),Qt=Math.max(fe,Math.floor(se-Ve*Et/$e+Dt)),Vt=Math.min(Ce,Math.floor(se+($e-Ve)*Et/$e+Dt));xt(le,ee,se,Qt,Vt,Ne)}var wr=ee[2*se+Ne],Yr=fe,Br=Ce;for(rt(le,ee,fe,se),ee[2*Ce+Ne]>wr&&rt(le,ee,fe,Ce);Yr<Br;){for(rt(le,ee,Yr,Br),Yr++,Br--;ee[2*Yr+Ne]<wr;)Yr++;for(;ee[2*Br+Ne]>wr;)Br--}ee[2*fe+Ne]===wr?rt(le,ee,fe,Br):(Br++,rt(le,ee,Br,Ce)),Br<=se&&(fe=Br+1),se<=Br&&(Ce=Br-1)}}function rt(le,ee,se,fe){Tt(le,se,fe),Tt(ee,2*se,2*fe),Tt(ee,2*se+1,2*fe+1)}function Tt(le,ee,se){var fe=le[ee];le[ee]=le[se],le[se]=fe}function St(le,ee,se,fe,Ce,Ne,$e){for(var Ve=[0,le.length-1,0],dt=[],Et,Dt;Ve.length;){var Qt=Ve.pop(),Vt=Ve.pop(),wr=Ve.pop();if(Vt-wr<=$e){for(var Yr=wr;Yr<=Vt;Yr++)Et=ee[2*Yr],Dt=ee[2*Yr+1],Et>=se&&Et<=Ce&&Dt>=fe&&Dt<=Ne&&dt.push(le[Yr]);continue}var Br=Math.floor((wr+Vt)/2);Et=ee[2*Br],Dt=ee[2*Br+1],Et>=se&&Et<=Ce&&Dt>=fe&&Dt<=Ne&&dt.push(le[Br]);var ca=(Qt+1)%2;(Qt===0?se<=Et:fe<=Dt)&&(Ve.push(wr),Ve.push(Br-1),Ve.push(ca)),(Qt===0?Ce>=Et:Ne>=Dt)&&(Ve.push(Br+1),Ve.push(Vt),Ve.push(ca))}return dt}function mt(le,ee,se,fe,Ce,Ne){for(var $e=[0,le.length-1,0],Ve=[],dt=Ce*Ce;$e.length;){var Et=$e.pop(),Dt=$e.pop(),Qt=$e.pop();if(Dt-Qt<=Ne){for(var Vt=Qt;Vt<=Dt;Vt++)ge(ee[2*Vt],ee[2*Vt+1],se,fe)<=dt&&Ve.push(le[Vt]);continue}var wr=Math.floor((Qt+Dt)/2),Yr=ee[2*wr],Br=ee[2*wr+1];ge(Yr,Br,se,fe)<=dt&&Ve.push(le[wr]);var ca=(Et+1)%2;(Et===0?se-Ce<=Yr:fe-Ce<=Br)&&($e.push(Qt),$e.push(wr-1),$e.push(ca)),(Et===0?se+Ce>=Yr:fe+Ce>=Br)&&($e.push(wr+1),$e.push(Dt),$e.push(ca))}return Ve}function ge(le,ee,se,fe){var Ce=le-se,Ne=ee-fe;return Ce*Ce+Ne*Ne}var Re=function(le){return le[0]},xe=function(le){return le[1]},et=function(ee,se,fe,Ce,Ne){se===void 0&&(se=Re),fe===void 0&&(fe=xe),Ce===void 0&&(Ce=64),Ne===void 0&&(Ne=Float64Array),this.nodeSize=Ce,this.points=ee;for(var $e=ee.length<65536?Uint16Array:Uint32Array,Ve=this.ids=new $e(ee.length),dt=this.coords=new Ne(ee.length*2),Et=0;Et<ee.length;Et++)Ve[Et]=Et,dt[2*Et]=se(ee[Et]),dt[2*Et+1]=fe(ee[Et]);Ye(Ve,dt,Ce,0,Ve.length-1,0)};et.prototype.range=function(ee,se,fe,Ce){return St(this.ids,this.coords,ee,se,fe,Ce,this.nodeSize)},et.prototype.within=function(ee,se,fe){return mt(this.ids,this.coords,ee,se,fe,this.nodeSize)};var ht={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(le){return le}},tt=function(ee){this.options=rr(Object.create(ht),ee),this.trees=new Array(this.options.maxZoom+1)};tt.prototype.load=function(ee){var se=this.options,fe=se.log,Ce=se.minZoom,Ne=se.maxZoom,$e=se.nodeSize;fe&&console.time("total time");var Ve="prepare "+ee.length+" points";fe&&console.time(Ve),this.points=ee;for(var dt=[],Et=0;Et<ee.length;Et++)ee[Et].geometry&&dt.push(qt(ee[Et],Et));this.trees[Ne+1]=new et(dt,Be,vt,$e,Float32Array),fe&&console.timeEnd(Ve);for(var Dt=Ne;Dt>=Ce;Dt--){var Qt=+Date.now();dt=this._cluster(dt,Dt),this.trees[Dt]=new et(dt,Be,vt,$e,Float32Array),fe&&console.log("z%d: %d clusters in %dms",Dt,dt.length,+Date.now()-Qt)}return fe&&console.timeEnd("total time"),this},tt.prototype.getClusters=function(ee,se){var fe=((ee[0]+180)%360+360)%360-180,Ce=Math.max(-90,Math.min(90,ee[1])),Ne=ee[2]===180?180:((ee[2]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)fe=-180,Ne=180;else if(fe>Ne){var Ve=this.getClusters([fe,Ce,180,$e],se),dt=this.getClusters([-180,Ce,Ne,$e],se);return Ve.concat(dt)}for(var Et=this.trees[this._limitZoom(se)],Dt=Et.range(ar(fe),kt($e),ar(Ne),kt(Ce)),Qt=[],Vt=0,wr=Dt;Vt<wr.length;Vt+=1){var Yr=wr[Vt],Br=Et.points[Yr];Qt.push(Br.numPoints?Jt(Br):this.points[Br.index])}return Qt},tt.prototype.getChildren=function(ee){var se=this._getOriginId(ee),fe=this._getOriginZoom(ee),Ce="No cluster with the specified id.",Ne=this.trees[fe];if(!Ne)throw new Error(Ce);var $e=Ne.points[se];if(!$e)throw new Error(Ce);for(var Ve=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),dt=Ne.within($e.x,$e.y,Ve),Et=[],Dt=0,Qt=dt;Dt<Qt.length;Dt+=1){var Vt=Qt[Dt],wr=Ne.points[Vt];wr.parentId===ee&&Et.push(wr.numPoints?Jt(wr):this.points[wr.index])}if(Et.length===0)throw new Error(Ce);return Et},tt.prototype.getLeaves=function(ee,se,fe){se=se||10,fe=fe||0;var Ce=[];return this._appendLeaves(Ce,ee,se,fe,0),Ce},tt.prototype.getTile=function(ee,se,fe){var Ce=this.trees[this._limitZoom(ee)],Ne=Math.pow(2,ee),$e=this.options,Ve=$e.extent,dt=$e.radius,Et=dt/Ve,Dt=(fe-Et)/Ne,Qt=(fe+1+Et)/Ne,Vt={features:[]};return this._addTileFeatures(Ce.range((se-Et)/Ne,Dt,(se+1+Et)/Ne,Qt),Ce.points,se,fe,Ne,Vt),se===0&&this._addTileFeatures(Ce.range(1-Et/Ne,Dt,1,Qt),Ce.points,Ne,fe,Ne,Vt),se===Ne-1&&this._addTileFeatures(Ce.range(0,Dt,Et/Ne,Qt),Ce.points,-1,fe,Ne,Vt),Vt.features.length?Vt:null},tt.prototype.getClusterExpansionZoom=function(ee){for(var se=this._getOriginZoom(ee)-1;se<=this.options.maxZoom;){var fe=this.getChildren(ee);if(se++,fe.length!==1)break;ee=fe[0].properties.cluster_id}return se},tt.prototype._appendLeaves=function(ee,se,fe,Ce,Ne){for(var $e=this.getChildren(se),Ve=0,dt=$e;Ve<dt.length;Ve+=1){var Et=dt[Ve],Dt=Et.properties;if(Dt&&Dt.cluster?Ne+Dt.point_count<=Ce?Ne+=Dt.point_count:Ne=this._appendLeaves(ee,Dt.cluster_id,fe,Ce,Ne):Ne<Ce?Ne++:ee.push(Et),ee.length===fe)break}return Ne},tt.prototype._addTileFeatures=function(ee,se,fe,Ce,Ne,$e){for(var Ve=0,dt=ee;Ve<dt.length;Ve+=1){var Et=dt[Ve],Dt=se[Et],Qt=Dt.numPoints,Vt={type:1,geometry:[[Math.round(this.options.extent*(Dt.x*Ne-fe)),Math.round(this.options.extent*(Dt.y*Ne-Ce))]],tags:Qt?Ht(Dt):this.points[Dt.index].properties},wr=void 0;Qt?wr=Dt.id:this.options.generateId?wr=Dt.index:this.points[Dt.index].id&&(wr=this.points[Dt.index].id),wr!==void 0&&(Vt.id=wr),$e.features.push(Vt)}},tt.prototype._limitZoom=function(ee){return Math.max(this.options.minZoom,Math.min(+ee,this.options.maxZoom+1))},tt.prototype._cluster=function(ee,se){for(var fe=[],Ce=this.options,Ne=Ce.radius,$e=Ce.extent,Ve=Ce.reduce,dt=Ce.minPoints,Et=Ne/($e*Math.pow(2,se)),Dt=0;Dt<ee.length;Dt++){var Qt=ee[Dt];if(!(Qt.zoom<=se)){Qt.zoom=se;for(var Vt=this.trees[se+1],wr=Vt.within(Qt.x,Qt.y,Et),Yr=Qt.numPoints||1,Br=Yr,ca=0,ua=wr;ca<ua.length;ca+=1){var Na=ua[ca],ii=Vt.points[Na];ii.zoom>se&&(Br+=ii.numPoints||1)}if(Br>=dt){for(var Wr=Qt.x*Yr,vr=Qt.y*Yr,$r=Ve&&Yr>1?this._map(Qt,!0):null,ga=(Dt<<5)+(se+1)+this.points.length,ir=0,wi=wr;ir<wi.length;ir+=1){var La=wi[ir],si=Vt.points[La];if(!(si.zoom<=se)){si.zoom=se;var fa=si.numPoints||1;Wr+=si.x*fa,vr+=si.y*fa,si.parentId=ga,Ve&&($r||($r=this._map(Qt,!0)),Ve($r,this._map(si)))}}Qt.parentId=ga,fe.push(Rt(Wr/Br,vr/Br,ga,Br,$r))}else if(fe.push(Qt),Br>1)for(var Ln=0,Co=wr;Ln<Co.length;Ln+=1){var xs=Co[Ln],Ga=Vt.points[xs];Ga.zoom<=se||(Ga.zoom=se,fe.push(Ga))}}}return fe},tt.prototype._getOriginId=function(ee){return ee-this.points.length>>5},tt.prototype._getOriginZoom=function(ee){return(ee-this.points.length)%32},tt.prototype._map=function(ee,se){if(ee.numPoints)return se?rr({},ee.properties):ee.properties;var fe=this.points[ee.index].properties,Ce=this.options.map(fe);return se&&Ce===fe?rr({},Ce):Ce};function Rt(le,ee,se,fe,Ce){return{x:le,y:ee,zoom:1/0,id:se,parentId:-1,numPoints:fe,properties:Ce}}function qt(le,ee){var se=le.geometry.coordinates,fe=se[0],Ce=se[1];return{x:ar(fe),y:kt(Ce),zoom:1/0,index:ee,parentId:-1}}function Jt(le){return{type:"Feature",id:le.id,properties:Ht(le),geometry:{type:"Point",coordinates:[zt(le.x),_r(le.y)]}}}function Ht(le){var ee=le.numPoints,se=ee>=1e4?Math.round(ee/1e3)+"k":ee>=1e3?Math.round(ee/100)/10+"k":ee;return rr(rr({},le.properties),{cluster:!0,cluster_id:le.id,point_count:ee,point_count_abbreviated:se})}function ar(le){return le/360+.5}function kt(le){var ee=Math.sin(le*Math.PI/180),se=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return se<0?0:se>1?1:se}function zt(le){return(le-.5)*360}function _r(le){var ee=(180-le*360)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function rr(le,ee){for(var se in ee)le[se]=ee[se];return le}function Be(le){return le.x}function vt(le){return le.y}function gt(le,ee,se,fe){for(var Ce=fe,Ne=se-ee>>1,$e=se-ee,Ve,dt=le[ee],Et=le[ee+1],Dt=le[se],Qt=le[se+1],Vt=ee+3;Vt<se;Vt+=3){var wr=Cr(le[Vt],le[Vt+1],dt,Et,Dt,Qt);if(wr>Ce)Ve=Vt,Ce=wr;else if(wr===Ce){var Yr=Math.abs(Vt-Ne);Yr<$e&&(Ve=Vt,$e=Yr)}}Ce>fe&&(Ve-ee>3&&gt(le,ee,Ve,fe),le[Ve+2]=Ce,se-Ve>3&&gt(le,Ve,se,fe))}function Cr(le,ee,se,fe,Ce,Ne){var $e=Ce-se,Ve=Ne-fe;if($e!==0||Ve!==0){var dt=((le-se)*$e+(ee-fe)*Ve)/($e*$e+Ve*Ve);dt>1?(se=Ce,fe=Ne):dt>0&&(se+=$e*dt,fe+=Ve*dt)}return $e=le-se,Ve=ee-fe,$e*$e+Ve*Ve}function pr(le,ee,se,fe){var Ce={id:typeof le=="undefined"?null:le,type:ee,geometry:se,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return bt(Ce),Ce}function bt(le){var ee=le.geometry,se=le.type;if(se==="Point"||se==="MultiPoint"||se==="LineString")wt(le,ee);else if(se==="Polygon"||se==="MultiLineString")for(var fe=0;fe<ee.length;fe++)wt(le,ee[fe]);else if(se==="MultiPolygon")for(fe=0;fe<ee.length;fe++)for(var Ce=0;Ce<ee[fe].length;Ce++)wt(le,ee[fe][Ce])}function wt(le,ee){for(var se=0;se<ee.length;se+=3)le.minX=Math.min(le.minX,ee[se]),le.minY=Math.min(le.minY,ee[se+1]),le.maxX=Math.max(le.maxX,ee[se]),le.maxY=Math.max(le.maxY,ee[se+1])}function Ut(le,ee){var se=[];if(le.type==="FeatureCollection")for(var fe=0;fe<le.features.length;fe++)Kt(se,le.features[fe],ee,fe);else le.type==="Feature"?Kt(se,le,ee):Kt(se,{geometry:le},ee);return se}function Kt(le,ee,se,fe){if(ee.geometry){var Ce=ee.geometry.coordinates,Ne=ee.geometry.type,$e=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ve=[],dt=ee.id;if(se.promoteId?dt=ee.properties[se.promoteId]:se.generateId&&(dt=fe||0),Ne==="Point")Gt(Ce,Ve);else if(Ne==="MultiPoint")for(var Et=0;Et<Ce.length;Et++)Gt(Ce[Et],Ve);else if(Ne==="LineString")Nt(Ce,Ve,$e,!1);else if(Ne==="MultiLineString")if(se.lineMetrics){for(Et=0;Et<Ce.length;Et++)Ve=[],Nt(Ce[Et],Ve,$e,!1),le.push(pr(dt,"LineString",Ve,ee.properties));return}else $t(Ce,Ve,$e,!1);else if(Ne==="Polygon")$t(Ce,Ve,$e,!0);else if(Ne==="MultiPolygon")for(Et=0;Et<Ce.length;Et++){var Dt=[];$t(Ce[Et],Dt,$e,!0),Ve.push(Dt)}else if(Ne==="GeometryCollection"){for(Et=0;Et<ee.geometry.geometries.length;Et++)Kt(le,{id:dt,geometry:ee.geometry.geometries[Et],properties:ee.properties},se,fe);return}else throw new Error("Input data is not a valid GeoJSON object.");le.push(pr(dt,Ne,Ve,ee.properties))}}function Gt(le,ee){ee.push(Ar(le[0])),ee.push(xr(le[1])),ee.push(0)}function Nt(le,ee,se,fe){for(var Ce,Ne,$e=0,Ve=0;Ve<le.length;Ve++){var dt=Ar(le[Ve][0]),Et=xr(le[Ve][1]);ee.push(dt),ee.push(Et),ee.push(0),Ve>0&&(fe?$e+=(Ce*Et-dt*Ne)/2:$e+=Math.sqrt(Math.pow(dt-Ce,2)+Math.pow(Et-Ne,2))),Ce=dt,Ne=Et}var Dt=ee.length-3;ee[2]=1,gt(ee,0,Dt,se),ee[Dt+2]=1,ee.size=Math.abs($e),ee.start=0,ee.end=ee.size}function $t(le,ee,se,fe){for(var Ce=0;Ce<le.length;Ce++){var Ne=[];Nt(le[Ce],Ne,se,fe),ee.push(Ne)}}function Ar(le){return le/360+.5}function xr(le){var ee=Math.sin(le*Math.PI/180),se=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return se<0?0:se>1?1:se}function Ct(le,ee,se,fe,Ce,Ne,$e,Ve){if(se/=ee,fe/=ee,Ne>=se&&$e<fe)return le;if($e<se||Ne>=fe)return null;for(var dt=[],Et=0;Et<le.length;Et++){var Dt=le[Et],Qt=Dt.geometry,Vt=Dt.type,wr=Ce===0?Dt.minX:Dt.minY,Yr=Ce===0?Dt.maxX:Dt.maxY;if(wr>=se&&Yr<fe){dt.push(Dt);continue}else if(Yr<se||wr>=fe)continue;var Br=[];if(Vt==="Point"||Vt==="MultiPoint")Fe(Qt,Br,se,fe,Ce);else if(Vt==="LineString")He(Qt,Br,se,fe,Ce,!1,Ve.lineMetrics);else if(Vt==="MultiLineString")ct(Qt,Br,se,fe,Ce,!1);else if(Vt==="Polygon")ct(Qt,Br,se,fe,Ce,!0);else if(Vt==="MultiPolygon")for(var ca=0;ca<Qt.length;ca++){var ua=[];ct(Qt[ca],ua,se,fe,Ce,!0),ua.length&&Br.push(ua)}if(Br.length){if(Ve.lineMetrics&&Vt==="LineString"){for(ca=0;ca<Br.length;ca++)dt.push(pr(Dt.id,Vt,Br[ca],Dt.tags));continue}(Vt==="LineString"||Vt==="MultiLineString")&&(Br.length===1?(Vt="LineString",Br=Br[0]):Vt="MultiLineString"),(Vt==="Point"||Vt==="MultiPoint")&&(Vt=Br.length===3?"Point":"MultiPoint"),dt.push(pr(Dt.id,Vt,Br,Dt.tags))}}return dt.length?dt:null}function Fe(le,ee,se,fe,Ce){for(var Ne=0;Ne<le.length;Ne+=3){var $e=le[Ne+Ce];$e>=se&&$e<=fe&&(ee.push(le[Ne]),ee.push(le[Ne+1]),ee.push(le[Ne+2]))}}function He(le,ee,se,fe,Ce,Ne,$e){for(var Ve=_t(le),dt=Ce===0?Er:Tr,Et=le.start,Dt,Qt,Vt=0;Vt<le.length-3;Vt+=3){var wr=le[Vt],Yr=le[Vt+1],Br=le[Vt+2],ca=le[Vt+3],ua=le[Vt+4],Na=Ce===0?wr:Yr,ii=Ce===0?ca:ua,Wr=!1;$e&&(Dt=Math.sqrt(Math.pow(wr-ca,2)+Math.pow(Yr-ua,2))),Na<se?ii>se&&(Qt=dt(Ve,wr,Yr,ca,ua,se),$e&&(Ve.start=Et+Dt*Qt)):Na>fe?ii<fe&&(Qt=dt(Ve,wr,Yr,ca,ua,fe),$e&&(Ve.start=Et+Dt*Qt)):yr(Ve,wr,Yr,Br),ii<se&&Na>=se&&(Qt=dt(Ve,wr,Yr,ca,ua,se),Wr=!0),ii>fe&&Na<=fe&&(Qt=dt(Ve,wr,Yr,ca,ua,fe),Wr=!0),!Ne&&Wr&&($e&&(Ve.end=Et+Dt*Qt),ee.push(Ve),Ve=_t(le)),$e&&(Et+=Dt)}var vr=le.length-3;wr=le[vr],Yr=le[vr+1],Br=le[vr+2],Na=Ce===0?wr:Yr,Na>=se&&Na<=fe&&yr(Ve,wr,Yr,Br),vr=Ve.length-3,Ne&&vr>=3&&(Ve[vr]!==Ve[0]||Ve[vr+1]!==Ve[1])&&yr(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&ee.push(Ve)}function _t(le){var ee=[];return ee.size=le.size,ee.start=le.start,ee.end=le.end,ee}function ct(le,ee,se,fe,Ce,Ne){for(var $e=0;$e<le.length;$e++)He(le[$e],ee,se,fe,Ce,Ne,!1)}function yr(le,ee,se,fe){le.push(ee),le.push(se),le.push(fe)}function Er(le,ee,se,fe,Ce,Ne){var $e=(Ne-ee)/(fe-ee);return le.push(Ne),le.push(se+(Ce-se)*$e),le.push(1),$e}function Tr(le,ee,se,fe,Ce,Ne){var $e=(Ne-se)/(Ce-se);return le.push(ee+(fe-ee)*$e),le.push(Ne),le.push(1),$e}function Hr(le,ee){var se=ee.buffer/ee.extent,fe=le,Ce=Ct(le,1,-1-se,se,0,-1,2,ee),Ne=Ct(le,1,1-se,2+se,0,-1,2,ee);return(Ce||Ne)&&(fe=Ct(le,1,-se,1+se,0,-1,2,ee)||[],Ce&&(fe=_a(Ce,1).concat(fe)),Ne&&(fe=fe.concat(_a(Ne,-1)))),fe}function _a(le,ee){for(var se=[],fe=0;fe<le.length;fe++){var Ce=le[fe],Ne=Ce.type,$e;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")$e=ka(Ce.geometry,ee);else if(Ne==="MultiLineString"||Ne==="Polygon"){$e=[];for(var Ve=0;Ve<Ce.geometry.length;Ve++)$e.push(ka(Ce.geometry[Ve],ee))}else if(Ne==="MultiPolygon")for($e=[],Ve=0;Ve<Ce.geometry.length;Ve++){for(var dt=[],Et=0;Et<Ce.geometry[Ve].length;Et++)dt.push(ka(Ce.geometry[Ve][Et],ee));$e.push(dt)}se.push(pr(Ce.id,Ne,$e,Ce.tags))}return se}function ka(le,ee){var se=[];se.size=le.size,le.start!==void 0&&(se.start=le.start,se.end=le.end);for(var fe=0;fe<le.length;fe+=3)se.push(le[fe]+ee,le[fe+1],le[fe+2]);return se}function Ea(le,ee){if(le.transformed)return le;var se=1<<le.z,fe=le.x,Ce=le.y,Ne,$e,Ve;for(Ne=0;Ne<le.features.length;Ne++){var dt=le.features[Ne],Et=dt.geometry,Dt=dt.type;if(dt.geometry=[],Dt===1)for($e=0;$e<Et.length;$e+=2)dt.geometry.push(Ii(Et[$e],Et[$e+1],ee,se,fe,Ce));else for($e=0;$e<Et.length;$e++){var Qt=[];for(Ve=0;Ve<Et[$e].length;Ve+=2)Qt.push(Ii(Et[$e][Ve],Et[$e][Ve+1],ee,se,fe,Ce));dt.geometry.push(Qt)}}return le.transformed=!0,le}function Ii(le,ee,se,fe,Ce,Ne){return[Math.round(se*(le*fe-Ce)),Math.round(se*(ee*fe-Ne))]}function Ki(le,ee,se,fe,Ce){for(var Ne=ee===Ce.maxZoom?0:Ce.tolerance/((1<<ee)*Ce.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:fe,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<le.length;Ve++){$e.numFeatures++,yn($e,le[Ve],Ne,Ce);var dt=le[Ve].minX,Et=le[Ve].minY,Dt=le[Ve].maxX,Qt=le[Ve].maxY;dt<$e.minX&&($e.minX=dt),Et<$e.minY&&($e.minY=Et),Dt>$e.maxX&&($e.maxX=Dt),Qt>$e.maxY&&($e.maxY=Qt)}return $e}function yn(le,ee,se,fe){var Ce=ee.geometry,Ne=ee.type,$e=[];if(Ne==="Point"||Ne==="MultiPoint")for(var Ve=0;Ve<Ce.length;Ve+=3)$e.push(Ce[Ve]),$e.push(Ce[Ve+1]),le.numPoints++,le.numSimplified++;else if(Ne==="LineString")Xi($e,Ce,le,se,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(Ve=0;Ve<Ce.length;Ve++)Xi($e,Ce[Ve],le,se,Ne==="Polygon",Ve===0);else if(Ne==="MultiPolygon")for(var dt=0;dt<Ce.length;dt++){var Et=Ce[dt];for(Ve=0;Ve<Et.length;Ve++)Xi($e,Et[Ve],le,se,!0,Ve===0)}if($e.length){var Dt=ee.tags||null;if(Ne==="LineString"&&fe.lineMetrics){Dt={};for(var Qt in ee.tags)Dt[Qt]=ee.tags[Qt];Dt.mapbox_clip_start=Ce.start/Ce.size,Dt.mapbox_clip_end=Ce.end/Ce.size}var Vt={geometry:$e,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:Dt};ee.id!==null&&(Vt.id=ee.id),le.features.push(Vt)}}function Xi(le,ee,se,fe,Ce,Ne){var $e=fe*fe;if(fe>0&&ee.size<(Ce?$e:fe)){se.numPoints+=ee.length/3;return}for(var Ve=[],dt=0;dt<ee.length;dt+=3)(fe===0||ee[dt+2]>$e)&&(se.numSimplified++,Ve.push(ee[dt]),Ve.push(ee[dt+1])),se.numPoints++;Ce&&jn(Ve,Ne),le.push(Ve)}function jn(le,ee){for(var se=0,fe=0,Ce=le.length,Ne=Ce-2;fe<Ce;Ne=fe,fe+=2)se+=(le[fe]-le[Ne])*(le[fe+1]+le[Ne+1]);if(se>0===ee)for(fe=0,Ce=le.length;fe<Ce/2;fe+=2){var $e=le[fe],Ve=le[fe+1];le[fe]=le[Ce-2-fe],le[fe+1]=le[Ce-1-fe],le[Ce-2-fe]=$e,le[Ce-1-fe]=Ve}}function En(le,ee){return new Vi(le,ee)}function Vi(le,ee){ee=this.options=Gr(Object.create(this.options),ee);var se=ee.debug;if(se&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe=Ut(le,ee);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=Hr(fe,ee),fe.length&&this.splitTile(fe,0,0,0),se&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Vi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Vi.prototype.splitTile=function(le,ee,se,fe,Ce,Ne,$e){for(var Ve=[le,ee,se,fe],dt=this.options,Et=dt.debug;Ve.length;){fe=Ve.pop(),se=Ve.pop(),ee=Ve.pop(),le=Ve.pop();var Dt=1<<ee,Qt=pa(ee,se,fe),Vt=this.tiles[Qt];if(!Vt&&(Et>1&&console.time("creation"),Vt=this.tiles[Qt]=Ki(le,ee,se,fe,dt),this.tileCoords.push({z:ee,x:se,y:fe}),Et)){Et>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,se,fe,Vt.numFeatures,Vt.numPoints,Vt.numSimplified),console.timeEnd("creation"));var wr="z"+ee;this.stats[wr]=(this.stats[wr]||0)+1,this.total++}if(Vt.source=le,Ce){if(ee===dt.maxZoom||ee===Ce)continue;var Yr=1<<Ce-ee;if(se!==Math.floor(Ne/Yr)||fe!==Math.floor($e/Yr))continue}else if(ee===dt.indexMaxZoom||Vt.numPoints<=dt.indexMaxPoints)continue;if(Vt.source=null,le.length!==0){Et>1&&console.time("clipping");var Br=.5*dt.buffer/dt.extent,ca=.5-Br,ua=.5+Br,Na=1+Br,ii,Wr,vr,$r,ga,ir;ii=Wr=vr=$r=null,ga=Ct(le,Dt,se-Br,se+ua,0,Vt.minX,Vt.maxX,dt),ir=Ct(le,Dt,se+ca,se+Na,0,Vt.minX,Vt.maxX,dt),le=null,ga&&(ii=Ct(ga,Dt,fe-Br,fe+ua,1,Vt.minY,Vt.maxY,dt),Wr=Ct(ga,Dt,fe+ca,fe+Na,1,Vt.minY,Vt.maxY,dt),ga=null),ir&&(vr=Ct(ir,Dt,fe-Br,fe+ua,1,Vt.minY,Vt.maxY,dt),$r=Ct(ir,Dt,fe+ca,fe+Na,1,Vt.minY,Vt.maxY,dt),ir=null),Et>1&&console.timeEnd("clipping"),Ve.push(ii||[],ee+1,se*2,fe*2),Ve.push(Wr||[],ee+1,se*2,fe*2+1),Ve.push(vr||[],ee+1,se*2+1,fe*2),Ve.push($r||[],ee+1,se*2+1,fe*2+1)}}},Vi.prototype.getTile=function(le,ee,se){var fe=this.options,Ce=fe.extent,Ne=fe.debug;if(le<0||le>24)return null;var $e=1<<le;ee=(ee%$e+$e)%$e;var Ve=pa(le,ee,se);if(this.tiles[Ve])return Ea(this.tiles[Ve],Ce);Ne>1&&console.log("drilling down to z%d-%d-%d",le,ee,se);for(var dt=le,Et=ee,Dt=se,Qt;!Qt&&dt>0;)dt--,Et=Math.floor(Et/2),Dt=Math.floor(Dt/2),Qt=this.tiles[pa(dt,Et,Dt)];return!Qt||!Qt.source?null:(Ne>1&&console.log("found parent tile z%d-%d-%d",dt,Et,Dt),Ne>1&&console.time("drilling down"),this.splitTile(Qt.source,dt,Et,Dt,le,ee,se),Ne>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Ea(this.tiles[Ve],Ce):null)};function pa(le,ee,se){return((1<<le)*se+ee)*32+le}function Gr(le,ee){for(var se in ee)le[se]=ee[se];return le}function Qa(le,ee){var se=le.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);var fe=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!fe)return ee(null,null);var Ce=new V(fe.features),Ne=ne(Ce);(Ne.byteOffset!==0||Ne.byteLength!==Ne.buffer.byteLength)&&(Ne=new Uint8Array(Ne)),ee(null,{vectorTile:Ce,rawData:Ne.buffer})}var Zr=function(le){function ee(se,fe,Ce,Ne){le.call(this,se,fe,Ce,Qa),Ne&&(this.loadGeoJSON=Ne)}return le&&(ee.__proto__=le),ee.prototype=Object.create(le&&le.prototype),ee.prototype.constructor=ee,ee.prototype.loadData=function(fe,Ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ce,this._pendingLoadDataParams=fe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ee.prototype._loadData=function(){var fe=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ce=this._pendingCallback,Ne=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var $e=Ne&&Ne.request&&Ne.request.collectResourceTiming?new a.RequestPerformance(Ne.request):!1;this.loadGeoJSON(Ne,function(Ve,dt){if(Ve||!dt)return Ce(Ve);if(typeof dt!="object")return Ce(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));I(dt,!0);try{if(Ne.filter){var Et=a.createExpression(Ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map(function(wr){return wr.key+": "+wr.message}).join(", "));var Dt=dt.features.filter(function(wr){return Et.value.evaluate({zoom:0},wr)});dt={type:"FeatureCollection",features:Dt}}fe._geoJSONIndex=Ne.cluster?new tt(vi(Ne)).load(dt.features):En(dt,Ne.geojsonVtOptions)}catch(wr){return Ce(wr)}fe.loaded={};var Qt={};if($e){var Vt=$e.finish();Vt&&(Qt.resourceTiming={},Qt.resourceTiming[Ne.source]=JSON.parse(JSON.stringify(Vt)))}Ce(null,Qt)})}},ee.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ee.prototype.reloadTile=function(fe,Ce){var Ne=this.loaded,$e=fe.uid;return Ne&&Ne[$e]?le.prototype.reloadTile.call(this,fe,Ce):this.loadTile(fe,Ce)},ee.prototype.loadGeoJSON=function(fe,Ce){if(fe.request)a.getJSON(fe.request,Ce);else if(typeof fe.data=="string")try{return Ce(null,JSON.parse(fe.data))}catch(Ne){return Ce(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))}else return Ce(new Error("Input data given to '"+fe.source+"' is not a valid GeoJSON object."))},ee.prototype.removeSource=function(fe,Ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ce()},ee.prototype.getClusterExpansionZoom=function(fe,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Ne){Ce(Ne)}},ee.prototype.getClusterChildren=function(fe,Ce){try{Ce(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Ne){Ce(Ne)}},ee.prototype.getClusterLeaves=function(fe,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Ne){Ce(Ne)}},ee}(C);function vi(le){var ee=le.superclusterOptions,se=le.clusterProperties;if(!se||!ee)return ee;for(var fe={},Ce={},Ne={accumulated:null,zoom:0},$e={properties:null},Ve=Object.keys(se),dt=0,Et=Ve;dt<Et.length;dt+=1){var Dt=Et[dt],Qt=se[Dt],Vt=Qt[0],wr=Qt[1],Yr=a.createExpression(wr),Br=a.createExpression(typeof Vt=="string"?[Vt,["accumulated"],["get",Dt]]:Vt);fe[Dt]=Yr.value,Ce[Dt]=Br.value}return ee.map=function(ca){$e.properties=ca;for(var ua={},Na=0,ii=Ve;Na<ii.length;Na+=1){var Wr=ii[Na];ua[Wr]=fe[Wr].evaluate(Ne,$e)}return ua},ee.reduce=function(ca,ua){$e.properties=ua;for(var Na=0,ii=Ve;Na<ii.length;Na+=1){var Wr=ii[Na];Ne.accumulated=ca[Wr],ca[Wr]=Ce[Wr].evaluate(Ne,$e)}},ee}var ya=function(ee){var se=this;this.self=ee,this.actor=new a.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:C,geojson:Zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(fe,Ce){if(se.workerSourceTypes[fe])throw new Error('Worker source with name "'+fe+'" already registered.');se.workerSourceTypes[fe]=Ce},this.self.registerRTLTextPlugin=function(fe){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=fe.applyArabicShaping,a.plugin.processBidirectionalText=fe.processBidirectionalText,a.plugin.processStyledBidirectionalText=fe.processStyledBidirectionalText}};return ya.prototype.setReferrer=function(ee,se){this.referrer=se},ya.prototype.setImages=function(ee,se,fe){this.availableImages[ee]=se;for(var Ce in this.workerSources[ee]){var Ne=this.workerSources[ee][Ce];for(var $e in Ne)Ne[$e].availableImages=se}fe()},ya.prototype.setLayers=function(ee,se,fe){this.getLayerIndex(ee).replace(se),fe()},ya.prototype.updateLayers=function(ee,se,fe){this.getLayerIndex(ee).update(se.layers,se.removedIds),fe()},ya.prototype.loadTile=function(ee,se,fe){this.getWorkerSource(ee,se.type,se.source).loadTile(se,fe)},ya.prototype.loadDEMTile=function(ee,se,fe){this.getDEMWorkerSource(ee,se.source).loadTile(se,fe)},ya.prototype.reloadTile=function(ee,se,fe){this.getWorkerSource(ee,se.type,se.source).reloadTile(se,fe)},ya.prototype.abortTile=function(ee,se,fe){this.getWorkerSource(ee,se.type,se.source).abortTile(se,fe)},ya.prototype.removeTile=function(ee,se,fe){this.getWorkerSource(ee,se.type,se.source).removeTile(se,fe)},ya.prototype.removeDEMTile=function(ee,se){this.getDEMWorkerSource(ee,se.source).removeTile(se)},ya.prototype.removeSource=function(ee,se,fe){if(!(!this.workerSources[ee]||!this.workerSources[ee][se.type]||!this.workerSources[ee][se.type][se.source])){var Ce=this.workerSources[ee][se.type][se.source];delete this.workerSources[ee][se.type][se.source],Ce.removeSource!==void 0?Ce.removeSource(se,fe):fe()}},ya.prototype.loadWorkerSource=function(ee,se,fe){try{this.self.importScripts(se.url),fe()}catch(Ce){fe(Ce.toString())}},ya.prototype.syncRTLPluginState=function(ee,se,fe){try{a.plugin.setState(se);var Ce=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Ce!=null){this.self.importScripts(Ce);var Ne=a.plugin.isParsed(),$e=Ne?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ce);fe($e,Ne)}}catch(Ve){fe(Ve.toString())}},ya.prototype.getAvailableImages=function(ee){var se=this.availableImages[ee];return se||(se=[]),se},ya.prototype.getLayerIndex=function(ee){var se=this.layerIndexes[ee];return se||(se=this.layerIndexes[ee]=new h),se},ya.prototype.getWorkerSource=function(ee,se,fe){var Ce=this;if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][se]||(this.workerSources[ee][se]={}),!this.workerSources[ee][se][fe]){var Ne={send:function($e,Ve,dt){Ce.actor.send($e,Ve,dt,ee)}};this.workerSources[ee][se][fe]=new this.workerSourceTypes[se](Ne,this.getLayerIndex(ee),this.getAvailableImages(ee))}return this.workerSources[ee][se][fe]},ya.prototype.getDEMWorkerSource=function(ee,se){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][se]||(this.demWorkerSources[ee][se]=new E),this.demWorkerSources[ee][se]},ya.prototype.enforceCacheSizeLimit=function(ee,se){a.enforceCacheSizeLimit(se)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ya(self)),ya}),i(["./shared"],function(a){"use strict";var s=a.createCommonjsModule(function(g){g.exports?g.exports=c:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=c,window.mapboxgl.notSupportedReason=x);function c(Oe){return!x(Oe)}function x(Oe){if(!d())return"not a browser";if(!w())return"insufficent Array support";if(!L())return"insufficient Function support";if(!R())return"insufficient Object support";if(!G())return"insufficient JSON support";if(!J())return"insufficient worker support";if(!te())return"insufficient Uint8ClampedArray support";if(!ue())return"insufficient ArrayBuffer support";if(!we())return"insufficient Canvas/getImageData support";if(!Ie(Oe&&Oe.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function d(){return typeof window!="undefined"&&typeof document!="undefined"}function w(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function L(){return Function.prototype&&Function.prototype.bind}function R(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function G(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function J(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Oe=new Blob([""],{type:"text/javascript"}),Xe=URL.createObjectURL(Oe),ft,Lt;try{Lt=new Worker(Xe),ft=!0}catch(It){ft=!1}return Lt&&Lt.terminate(),URL.revokeObjectURL(Xe),ft}function te(){return"Uint8ClampedArray"in window}function ue(){return ArrayBuffer.isView}function we(){var Oe=document.createElement("canvas");Oe.width=Oe.height=1;var Xe=Oe.getContext("2d");if(!Xe)return!1;var ft=Xe.getImageData(0,0,1,1);return ft&&ft.width===Oe.width}var be={};function Ie(Oe){return be[Oe]===void 0&&(be[Oe]=Ge(Oe)),be[Oe]}c.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Ze(Oe){var Xe=document.createElement("canvas"),ft=Object.create(c.webGLContextAttributes);return ft.failIfMajorPerformanceCaveat=Oe,Xe.probablySupportsContext?Xe.probablySupportsContext("webgl",ft)||Xe.probablySupportsContext("experimental-webgl",ft):Xe.supportsContext?Xe.supportsContext("webgl",ft)||Xe.supportsContext("experimental-webgl",ft):Xe.getContext("webgl",ft)||Xe.getContext("experimental-webgl",ft)}function Ge(Oe){var Xe=Ze(Oe);if(!Xe)return!1;var ft=Xe.createShader(Xe.VERTEX_SHADER);return!ft||Xe.isContextLost()?!1:(Xe.shaderSource(ft,"void main() {}"),Xe.compileShader(ft),Xe.getShaderParameter(ft,Xe.COMPILE_STATUS)===!0)}}),l={};l.create=function(g,c,x){var d=a.window.document.createElement(g);return c!==void 0&&(d.className=c),x&&x.appendChild(d),d},l.createNS=function(g,c){var x=a.window.document.createElementNS(g,c);return x};var f=a.window.document&&a.window.document.documentElement.style;function h(g){if(!f)return g[0];for(var c=0;c<g.length;c++)if(g[c]in f)return g[c];return g[0]}var v=h(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),m;l.disableDrag=function(){f&&v&&(m=f[v],f[v]="none")},l.enableDrag=function(){f&&v&&(f[v]=m)};var b=h(["transform","WebkitTransform"]);l.setTransform=function(g,c){g.style[b]=c};var T=!1;try{var S=Object.defineProperty({},"passive",{get:function(){T=!0}});a.window.addEventListener("test",S,S),a.window.removeEventListener("test",S,S)}catch(g){T=!1}l.addEventListener=function(g,c,x,d){d===void 0&&(d={}),"passive"in d&&T?g.addEventListener(c,x,d):g.addEventListener(c,x,d.capture)},l.removeEventListener=function(g,c,x,d){d===void 0&&(d={}),"passive"in d&&T?g.removeEventListener(c,x,d):g.removeEventListener(c,x,d.capture)};var C=function(g){g.preventDefault(),g.stopPropagation(),a.window.removeEventListener("click",C,!0)};l.suppressClick=function(){a.window.addEventListener("click",C,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",C,!0)},0)},l.mousePos=function(g,c){var x=g.getBoundingClientRect();return new a.Point(c.clientX-x.left-g.clientLeft,c.clientY-x.top-g.clientTop)},l.touchPos=function(g,c){for(var x=g.getBoundingClientRect(),d=[],w=0;w<c.length;w++)d.push(new a.Point(c[w].clientX-x.left-g.clientLeft,c[w].clientY-x.top-g.clientTop));return d},l.mouseButton=function(g){return typeof a.window.InstallTrigger!="undefined"&&g.button===2&&g.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button},l.remove=function(g){g.parentNode&&g.parentNode.removeChild(g)};function P(g,c,x){var d,w,L,R=a.browser.devicePixelRatio>1?"@2x":"",G=a.getJSON(c.transformRequest(c.normalizeSpriteURL(g,R,".json"),a.ResourceType.SpriteJSON),function(ue,we){G=null,L||(L=ue,d=we,te())}),J=a.getImage(c.transformRequest(c.normalizeSpriteURL(g,R,".png"),a.ResourceType.SpriteImage),function(ue,we){J=null,L||(L=ue,w=we,te())});function te(){if(L)x(L);else if(d&&w){var ue=a.browser.getImageData(w),we={};for(var be in d){var Ie=d[be],Ze=Ie.width,Ge=Ie.height,Oe=Ie.x,Xe=Ie.y,ft=Ie.sdf,Lt=Ie.pixelRatio,It=Ie.stretchX,Xt=Ie.stretchY,er=Ie.content,Ot=new a.RGBAImage({width:Ze,height:Ge});a.RGBAImage.copy(ue,Ot,{x:Oe,y:Xe},{x:0,y:0},{width:Ze,height:Ge}),we[be]={data:Ot,pixelRatio:Lt,sdf:ft,stretchX:It,stretchY:Xt,content:er}}x(null,we)}}return{cancel:function(){G&&(G.cancel(),G=null),J&&(J.cancel(),J=null)}}}function E(g){var c=g.userImage;if(c&&c.render){var x=c.render();if(x)return g.data.replace(new Uint8Array(c.data.buffer)),!0}return!1}var I=1,q=function(g){function c(){g.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.isLoaded=function(){return this.loaded},c.prototype.setLoaded=function(d){if(this.loaded!==d&&(this.loaded=d,d)){for(var w=0,L=this.requestors;w<L.length;w+=1){var R=L[w],G=R.ids,J=R.callback;this._notify(G,J)}this.requestors=[]}},c.prototype.getImage=function(d){return this.images[d]},c.prototype.addImage=function(d,w){this._validate(d,w)&&(this.images[d]=w)},c.prototype._validate=function(d,w){var L=!0;return this._validateStretch(w.stretchX,w.data&&w.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "stretchX" value'))),L=!1),this._validateStretch(w.stretchY,w.data&&w.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "stretchY" value'))),L=!1),this._validateContent(w.content,w)||(this.fire(new a.ErrorEvent(new Error('Image "'+d+'" has invalid "content" value'))),L=!1),L},c.prototype._validateStretch=function(d,w){if(!d)return!0;for(var L=0,R=0,G=d;R<G.length;R+=1){var J=G[R];if(J[0]<L||J[1]<J[0]||w<J[1])return!1;L=J[1]}return!0},c.prototype._validateContent=function(d,w){return d?!(d.length!==4||d[0]<0||w.data.width<d[0]||d[1]<0||w.data.height<d[1]||d[2]<0||w.data.width<d[2]||d[3]<0||w.data.height<d[3]||d[2]<d[0]||d[3]<d[1]):!0},c.prototype.updateImage=function(d,w){var L=this.images[d];w.version=L.version+1,this.images[d]=w,this.updatedImages[d]=!0},c.prototype.removeImage=function(d){var w=this.images[d];delete this.images[d],delete this.patterns[d],w.userImage&&w.userImage.onRemove&&w.userImage.onRemove()},c.prototype.listImages=function(){return Object.keys(this.images)},c.prototype.getImages=function(d,w){var L=!0;if(!this.isLoaded())for(var R=0,G=d;R<G.length;R+=1){var J=G[R];this.images[J]||(L=!1)}this.isLoaded()||L?this._notify(d,w):this.requestors.push({ids:d,callback:w})},c.prototype._notify=function(d,w){for(var L={},R=0,G=d;R<G.length;R+=1){var J=G[R];this.images[J]||this.fire(new a.Event("styleimagemissing",{id:J}));var te=this.images[J];te?L[J]={data:te.data.clone(),pixelRatio:te.pixelRatio,sdf:te.sdf,version:te.version,stretchX:te.stretchX,stretchY:te.stretchY,content:te.content,hasRenderCallback:!!(te.userImage&&te.userImage.render)}:a.warnOnce('Image "'+J+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}w(null,L)},c.prototype.getPixelSize=function(){var d=this.atlasImage,w=d.width,L=d.height;return{width:w,height:L}},c.prototype.getPattern=function(d){var w=this.patterns[d],L=this.getImage(d);if(!L)return null;if(w&&w.position.version===L.version)return w.position;if(w)w.position.version=L.version;else{var R=L.data.width+I*2,G=L.data.height+I*2,J={w:R,h:G,x:0,y:0},te=new a.ImagePosition(J,L);this.patterns[d]={bin:J,position:te}}return this._updatePatternAtlas(),this.patterns[d].position},c.prototype.bind=function(d){var w=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(d,this.atlasImage,w.RGBA),this.atlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE)},c.prototype._updatePatternAtlas=function(){var d=[];for(var w in this.patterns)d.push(this.patterns[w].bin);var L=a.potpack(d),R=L.w,G=L.h,J=this.atlasImage;J.resize({width:R||1,height:G||1});for(var te in this.patterns){var ue=this.patterns[te],we=ue.bin,be=we.x+I,Ie=we.y+I,Ze=this.images[te].data,Ge=Ze.width,Oe=Ze.height;a.RGBAImage.copy(Ze,J,{x:0,y:0},{x:be,y:Ie},{width:Ge,height:Oe}),a.RGBAImage.copy(Ze,J,{x:0,y:Oe-1},{x:be,y:Ie-1},{width:Ge,height:1}),a.RGBAImage.copy(Ze,J,{x:0,y:0},{x:be,y:Ie+Oe},{width:Ge,height:1}),a.RGBAImage.copy(Ze,J,{x:Ge-1,y:0},{x:be-1,y:Ie},{width:1,height:Oe}),a.RGBAImage.copy(Ze,J,{x:0,y:0},{x:be+Ge,y:Ie},{width:1,height:Oe})}this.dirty=!0},c.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},c.prototype.dispatchRenderCallbacks=function(d){for(var w=0,L=d;w<L.length;w+=1){var R=L[w];if(!this.callbackDispatchedThisFrame[R]){this.callbackDispatchedThisFrame[R]=!0;var G=this.images[R],J=E(G);J&&this.updateImage(R,G)}}},c}(a.Evented);function B(g,c,x,d,w){var L=c*256,R=L+255,G=d.transformRequest(d.normalizeGlyphsURL(x).replace("{fontstack}",g).replace("{range}",L+"-"+R),a.ResourceType.Glyphs);a.getArrayBuffer(G,function(J,te){if(J)w(J);else if(te){for(var ue={},we=0,be=a.parseGlyphPBF(te);we<be.length;we+=1){var Ie=be[we];ue[Ie.id]=Ie}w(null,ue)}})}var z=V,O=V,H=1e20;function V(g,c,x,d,w,L){this.fontSize=g||24,this.buffer=c===void 0?3:c,this.cutoff=d||.25,this.fontFamily=w||"sans-serif",this.fontWeight=L||"normal",this.radius=x||8;var R=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=R,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.d=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Int16Array(R),this.middle=Math.round(R/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}V.prototype.draw=function(g){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(g,this.buffer,this.middle);for(var c=this.ctx.getImageData(0,0,this.size,this.size),x=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var w=c.data[d*4+3]/255;this.gridOuter[d]=w===1?0:w===0?H:Math.pow(Math.max(0,.5-w),2),this.gridInner[d]=w===1?H:w===0?0:Math.pow(Math.max(0,w-.5),2)}for(W(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),W(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++){var L=this.gridOuter[d]-this.gridInner[d];x[d]=Math.max(0,Math.min(255,Math.round(255-255*(L/this.radius+this.cutoff))))}return x};function W(g,c,x,d,w,L,R){for(var G=0;G<c;G++){for(var J=0;J<x;J++)d[J]=g[J*c+G];for(K(d,w,L,R,x),J=0;J<x;J++)g[J*c+G]=w[J]}for(J=0;J<x;J++){for(G=0;G<c;G++)d[G]=g[J*c+G];for(K(d,w,L,R,c),G=0;G<c;G++)g[J*c+G]=Math.sqrt(w[G])}}function K(g,c,x,d,w){x[0]=0,d[0]=-H,d[1]=+H;for(var L=1,R=0;L<w;L++){for(var G=(g[L]+L*L-(g[x[R]]+x[R]*x[R]))/(2*L-2*x[R]);G<=d[R];)R--,G=(g[L]+L*L-(g[x[R]]+x[R]*x[R]))/(2*L-2*x[R]);R++,x[R]=L,d[R]=G,d[R+1]=+H}for(L=0,R=0;L<w;L++){for(;d[R+1]<L;)R++;c[L]=(L-x[R])*(L-x[R])+g[x[R]]}}z.default=O;var re=function(c,x){this.requestManager=c,this.localIdeographFontFamily=x,this.entries={}};re.prototype.setURL=function(c){this.url=c},re.prototype.getGlyphs=function(c,x){var d=this,w=[];for(var L in c)for(var R=0,G=c[L];R<G.length;R+=1){var J=G[R];w.push({stack:L,id:J})}a.asyncAll(w,function(te,ue){var we=te.stack,be=te.id,Ie=d.entries[we];Ie||(Ie=d.entries[we]={glyphs:{},requests:{},ranges:{}});var Ze=Ie.glyphs[be];if(Ze!==void 0){ue(null,{stack:we,id:be,glyph:Ze});return}if(Ze=d._tinySDF(Ie,we,be),Ze){Ie.glyphs[be]=Ze,ue(null,{stack:we,id:be,glyph:Ze});return}var Ge=Math.floor(be/256);if(Ge*256>65535){ue(new Error("glyphs > 65535 not supported"));return}if(Ie.ranges[Ge]){ue(null,{stack:we,id:be,glyph:Ze});return}var Oe=Ie.requests[Ge];Oe||(Oe=Ie.requests[Ge]=[],re.loadGlyphRange(we,Ge,d.url,d.requestManager,function(Xe,ft){if(ft){for(var Lt in ft)d._doesCharSupportLocalGlyph(+Lt)||(Ie.glyphs[+Lt]=ft[+Lt]);Ie.ranges[Ge]=!0}for(var It=0,Xt=Oe;It<Xt.length;It+=1){var er=Xt[It];er(Xe,ft)}delete Ie.requests[Ge]})),Oe.push(function(Xe,ft){Xe?ue(Xe):ft&&ue(null,{stack:we,id:be,glyph:ft[be]||null})})},function(te,ue){if(te)x(te);else if(ue){for(var we={},be=0,Ie=ue;be<Ie.length;be+=1){var Ze=Ie[be],Ge=Ze.stack,Oe=Ze.id,Xe=Ze.glyph;(we[Ge]||(we[Ge]={}))[Oe]=Xe&&{id:Xe.id,bitmap:Xe.bitmap.clone(),metrics:Xe.metrics}}x(null,we)}})},re.prototype._doesCharSupportLocalGlyph=function(c){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](c)||a.isChar["Hangul Syllables"](c)||a.isChar.Hiragana(c)||a.isChar.Katakana(c))},re.prototype._tinySDF=function(c,x,d){var w=this.localIdeographFontFamily;if(w&&this._doesCharSupportLocalGlyph(d)){var L=c.tinySDF;if(!L){var R="400";/bold/i.test(x)?R="900":/medium/i.test(x)?R="500":/light/i.test(x)&&(R="200"),L=c.tinySDF=new re.TinySDF(24,3,8,.25,w,R)}return{id:d,bitmap:new a.AlphaImage({width:30,height:30},L.draw(String.fromCharCode(d))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},re.loadGlyphRange=B,re.TinySDF=z;var oe=function(){this.specification=a.styleSpec.light.position};oe.prototype.possiblyEvaluate=function(c,x){return a.sphericalToCartesian(c.expression.evaluate(x))},oe.prototype.interpolate=function(c,x,d){return{x:a.number(c.x,x.x,d),y:a.number(c.y,x.y,d),z:a.number(c.z,x.z,d)}};var ne=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new oe,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),he="-transition",de=function(g){function c(x){g.call(this),this._transitionable=new a.Transitionable(ne),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getLight=function(){return this._transitionable.serialize()},c.prototype.setLight=function(d,w){if(w===void 0&&(w={}),!this._validate(a.validateLight,d,w))for(var L in d){var R=d[L];a.endsWith(L,he)?this._transitionable.setTransition(L.slice(0,-he.length),R):this._transitionable.setValue(L,R)}},c.prototype.updateTransitions=function(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)},c.prototype.hasTransition=function(){return this._transitioning.hasTransition()},c.prototype.recalculate=function(d){this.properties=this._transitioning.possiblyEvaluate(d)},c.prototype._validate=function(d,w,L){return L&&L.validate===!1?!1:a.emitValidationErrors(this,d.call(a.validateStyle,a.extend({value:w,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},c}(a.Evented),Ee=function(c,x){this.width=c,this.height=x,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ee.prototype.getDash=function(c,x){var d=c.join(",")+String(x);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(c,x)),this.dashEntry[d]},Ee.prototype.getDashRanges=function(c,x,d){var w=c.length%2===1,L=[],R=w?-c[c.length-1]*d:0,G=c[0]*d,J=!0;L.push({left:R,right:G,isDash:J,zeroLength:c[0]===0});for(var te=c[0],ue=1;ue<c.length;ue++){J=!J;var we=c[ue];R=te*d,te+=we,G=te*d,L.push({left:R,right:G,isDash:J,zeroLength:we===0})}return L},Ee.prototype.addRoundDash=function(c,x,d){for(var w=x/2,L=-d;L<=d;L++)for(var R=this.nextRow+d+L,G=this.width*R,J=0,te=c[J],ue=0;ue<this.width;ue++){ue/te.right>1&&(te=c[++J]);var we=Math.abs(ue-te.left),be=Math.abs(ue-te.right),Ie=Math.min(we,be),Ze=void 0,Ge=L/d*(w+1);if(te.isDash){var Oe=w-Math.abs(Ge);Ze=Math.sqrt(Ie*Ie+Oe*Oe)}else Ze=w-Math.sqrt(Ie*Ie+Ge*Ge);this.data[G+ue]=Math.max(0,Math.min(255,Ze+128))}},Ee.prototype.addRegularDash=function(c){for(var x=c.length-1;x>=0;--x){var d=c[x],w=c[x+1];d.zeroLength?c.splice(x,1):w&&w.isDash===d.isDash&&(w.left=d.left,c.splice(x,1))}var L=c[0],R=c[c.length-1];L.isDash===R.isDash&&(L.left=R.left-this.width,R.right=L.right+this.width);for(var G=this.width*this.nextRow,J=0,te=c[J],ue=0;ue<this.width;ue++){ue/te.right>1&&(te=c[++J]);var we=Math.abs(ue-te.left),be=Math.abs(ue-te.right),Ie=Math.min(we,be),Ze=te.isDash?Ie:-Ie;this.data[G+ue]=Math.max(0,Math.min(255,Ze+128))}},Ee.prototype.addDash=function(c,x){var d=x?7:0,w=2*d+1;if(this.nextRow+w>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var L=0,R=0;R<c.length;R++)L+=c[R];if(L!==0){var G=this.width/L,J=this.getDashRanges(c,this.width,G);x?this.addRoundDash(J,G,d):this.addRegularDash(J)}var te={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:L};return this.nextRow+=w,this.dirty=!0,te},Ee.prototype.bind=function(c){var x=c.gl;this.texture?(x.bindTexture(x.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,x.texSubImage2D(x.TEXTURE_2D,0,0,0,this.width,this.height,x.ALPHA,x.UNSIGNED_BYTE,this.data))):(this.texture=x.createTexture(),x.bindTexture(x.TEXTURE_2D,this.texture),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texImage2D(x.TEXTURE_2D,0,x.ALPHA,this.width,this.height,0,x.ALPHA,x.UNSIGNED_BYTE,this.data))};var ke=function g(c,x){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var d=this.workerPool.acquire(this.id),w=0;w<d.length;w++){var L=d[w],R=new g.Actor(L,x,this.id);R.name="Worker "+w,this.actors.push(R)}};ke.prototype.broadcast=function(c,x,d){d=d||function(){},a.asyncAll(this.actors,function(w,L){w.send(c,x,L)},d)},ke.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ke.prototype.remove=function(){this.actors.forEach(function(c){c.remove()}),this.actors=[],this.workerPool.release(this.id)},ke.Actor=a.Actor;function Te(g,c,x){var d=function(w,L){if(w)return x(w);if(L){var R=a.pick(a.extend(L,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);L.vector_layers&&(R.vectorLayers=L.vector_layers,R.vectorLayerIds=R.vectorLayers.map(function(G){return G.id})),R.tiles=c.canonicalizeTileset(R,g.url),x(null,R)}};return g.url?a.getJSON(c.transformRequest(c.normalizeSourceURL(g.url),a.ResourceType.Source),d):a.browser.frame(function(){return d(null,g)})}var ye=function(c,x,d){this.bounds=a.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=x||0,this.maxzoom=d||24};ye.prototype.validateBounds=function(c){return!Array.isArray(c)||c.length!==4?[-180,-90,180,90]:[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]},ye.prototype.contains=function(c){var x=Math.pow(2,c.z),d={minX:Math.floor(a.mercatorXfromLng(this.bounds.getWest())*x),minY:Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*x),maxX:Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*x),maxY:Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*x)},w=c.x>=d.minX&&c.x<d.maxX&&c.y>=d.minY&&c.y<d.maxY;return w};var Ae=function(g){function c(x,d,w,L){if(g.call(this),this.id=x,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(L)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Te(this._options,this.map._requestManager,function(w,L){d._tileJSONRequest=null,d._loaded=!0,w?d.fire(new a.ErrorEvent(w)):L&&(a.extend(d,L),L.bounds&&(d.tileBounds=new ye(L.bounds,d.minzoom,d.maxzoom)),a.postTurnstileEvent(L.tiles,d.map._requestManager._customAccessToken),a.postMapLoadEvent(L.tiles,d.map._getMapId(),d.map._requestManager._skuToken,d.map._requestManager._customAccessToken),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.hasTile=function(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.setSourceProperty=function(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d();var w=this.map.style.sourceCaches[this.id];w.clearTiles(),this.load()},c.prototype.setTiles=function(d){var w=this;return this.setSourceProperty(function(){w._options.tiles=d}),this},c.prototype.setUrl=function(d){var w=this;return this.setSourceProperty(function(){w.url=d,w._options.url=d}),this},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return a.extend({},this._options)},c.prototype.loadTile=function(d,w){var L=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),R={request:this.map._requestManager.transformRequest(L,a.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};R.request.collectResourceTiming=this._collectResourceTiming,!d.actor||d.state==="expired"?(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",R,G.bind(this))):d.state==="loading"?d.reloadCallback=w:d.request=d.actor.send("reloadTile",R,G.bind(this));function G(J,te){if(delete d.request,d.aborted)return w(null);if(J&&J.status!==404)return w(J);te&&te.resourceTiming&&(d.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&d.setExpiryData(te),d.loadVectorData(te,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),w(null),d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)}},c.prototype.abortTile=function(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)},c.prototype.unloadTile=function(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)},c.prototype.hasTransition=function(){return!1},c}(a.Evented),Me=function(g){function c(x,d,w,L){g.call(this),this.id=x,this.dispatcher=w,this.setEventedParent(L),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Te(this._options,this.map._requestManager,function(w,L){d._tileJSONRequest=null,d._loaded=!0,w?d.fire(new a.ErrorEvent(w)):L&&(a.extend(d,L),L.bounds&&(d.tileBounds=new ye(L.bounds,d.minzoom,d.maxzoom)),a.postTurnstileEvent(L.tiles),a.postMapLoadEvent(L.tiles,d.map._getMapId(),d.map._requestManager._skuToken),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),d.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return a.extend({},this._options)},c.prototype.hasTile=function(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)},c.prototype.loadTile=function(d,w){var L=this,R=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);d.request=a.getImage(this.map._requestManager.transformRequest(R,a.ResourceType.Tile),function(G,J){if(delete d.request,d.aborted)d.state="unloaded",w(null);else if(G)d.state="errored",w(G);else if(J){L.map._refreshExpiredTiles&&d.setExpiryData(J),delete J.cacheControl,delete J.expires;var te=L.map.painter.context,ue=te.gl;d.texture=L.map.painter.getTileTexture(J.width),d.texture?d.texture.update(J,{useMipmap:!0}):(d.texture=new a.Texture(te,J,ue.RGBA,{useMipmap:!0}),d.texture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),te.extTextureFilterAnisotropic&&ue.texParameterf(ue.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax)),d.state="loaded",a.cacheEntryPossiblyAdded(L.dispatcher),w(null)}})},c.prototype.abortTile=function(d,w){d.request&&(d.request.cancel(),delete d.request),w()},c.prototype.unloadTile=function(d,w){d.texture&&this.map.painter.saveTileTexture(d.texture),w()},c.prototype.hasTransition=function(){return!1},c}(a.Evented),De=function(g){function c(x,d,w,L){g.call(this,x,d,w,L),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},c.prototype.loadTile=function(d,w){var L=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);d.request=a.getImage(this.map._requestManager.transformRequest(L,a.ResourceType.Tile),R.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID);function R(J,te){if(delete d.request,d.aborted)d.state="unloaded",w(null);else if(J)d.state="errored",w(J);else if(te){this.map._refreshExpiredTiles&&d.setExpiryData(te),delete te.cacheControl,delete te.expires;var ue=a.window.ImageBitmap&&te instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported(),we=ue?te:a.browser.getImageData(te,1),be={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:we,encoding:this.encoding};(!d.actor||d.state==="expired")&&(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",be,G.bind(this)))}}function G(J,te){J&&(d.state="errored",w(J)),te&&(d.dem=te,d.needsHillshadePrepare=!0,d.state="loaded",w(null))}},c.prototype._getNeighboringTiles=function(d){var w=d.canonical,L=Math.pow(2,w.z),R=(w.x-1+L)%L,G=w.x===0?d.wrap-1:d.wrap,J=(w.x+1+L)%L,te=w.x+1===L?d.wrap+1:d.wrap,ue={};return ue[new a.OverscaledTileID(d.overscaledZ,G,w.z,R,w.y).key]={backfilled:!1},ue[new a.OverscaledTileID(d.overscaledZ,te,w.z,J,w.y).key]={backfilled:!1},w.y>0&&(ue[new a.OverscaledTileID(d.overscaledZ,G,w.z,R,w.y-1).key]={backfilled:!1},ue[new a.OverscaledTileID(d.overscaledZ,d.wrap,w.z,w.x,w.y-1).key]={backfilled:!1},ue[new a.OverscaledTileID(d.overscaledZ,te,w.z,J,w.y-1).key]={backfilled:!1}),w.y+1<L&&(ue[new a.OverscaledTileID(d.overscaledZ,G,w.z,R,w.y+1).key]={backfilled:!1},ue[new a.OverscaledTileID(d.overscaledZ,d.wrap,w.z,w.x,w.y+1).key]={backfilled:!1},ue[new a.OverscaledTileID(d.overscaledZ,te,w.z,J,w.y+1).key]={backfilled:!1}),ue},c.prototype.unloadTile=function(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})},c}(Me),at=function(g){function c(x,d,w,L){g.call(this),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=w.getActor(),this.setEventedParent(L),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var R=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*R,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*R,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*R,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(w){if(w){d.fire(new a.ErrorEvent(w));return}var L={dataType:"source",sourceDataType:"metadata"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(L.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new a.Event("data",L))})},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.setData=function(d){var w=this;return this._data=d,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L){w.fire(new a.ErrorEvent(L));return}var R={dataType:"source",sourceDataType:"content"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(R.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new a.Event("data",R))}),this},c.prototype.getClusterExpansionZoom=function(d,w){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},w),this},c.prototype.getClusterChildren=function(d,w){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},w),this},c.prototype.getClusterLeaves=function(d,w,L,R){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:w,offset:L},R),this},c.prototype._updateWorkerData=function(d){var w=this;this._loaded=!1;var L=a.extend({},this.workerOptions),R=this._data;typeof R=="string"?(L.request=this.map._requestManager.transformRequest(a.browser.resolveURL(R),a.ResourceType.Source),L.request.collectResourceTiming=this._collectResourceTiming):L.data=JSON.stringify(R),this.actor.send(this.type+".loadData",L,function(G,J){w._removed||J&&J.abandoned||(w._loaded=!0,J&&J.resourceTiming&&J.resourceTiming[w.id]&&(w._resourceTiming=J.resourceTiming[w.id].slice(0)),w.actor.send(w.type+".coalesce",{source:L.source},null),d(G))})},c.prototype.loaded=function(){return this._loaded},c.prototype.loadTile=function(d,w){var L=this,R=d.actor?"reloadTile":"loadTile";d.actor=this.actor;var G={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(R,G,function(J,te){return delete d.request,d.unloadVectorData(),d.aborted?w(null):J?w(J):(d.loadVectorData(te,L.map.painter,R==="reloadTile"),w(null))})},c.prototype.abortTile=function(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0},c.prototype.unloadTile=function(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})},c.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},c.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(a.Evented),pt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),lt=function(g){function c(x,d,w,L){g.call(this),this.id=x,this.dispatcher=w,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(L),this.options=d}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(d,w){var L=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(R,G){L._loaded=!0,R?L.fire(new a.ErrorEvent(R)):G&&(L.image=G,d&&(L.coordinates=d),w&&w(),L._finishLoading())})},c.prototype.loaded=function(){return this._loaded},c.prototype.updateImage=function(d){var w=this;return!this.image||!d.url?this:(this.options.url=d.url,this.load(d.coordinates,function(){w.texture=null}),this)},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(d){this.map=d,this.load()},c.prototype.setCoordinates=function(d){var w=this;this.coordinates=d;var L=d.map(a.MercatorCoordinate.fromLngLat);this.tileID=ut(L),this.minzoom=this.maxzoom=this.tileID.z;var R=L.map(function(G){return w.tileID.getTilePoint(G)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(R[0].x,R[0].y,0,0),this._boundsArray.emplaceBack(R[1].x,R[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(R[3].x,R[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(R[2].x,R[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(d,this.image,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(var L in this.tiles){var R=this.tiles[L];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}},c.prototype.loadTile=function(d,w){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},w(null)):(d.state="errored",w(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return!1},c}(a.Evented);function ut(g){for(var c=1/0,x=1/0,d=-1/0,w=-1/0,L=0,R=g;L<R.length;L+=1){var G=R[L];c=Math.min(c,G.x),x=Math.min(x,G.y),d=Math.max(d,G.x),w=Math.max(w,G.y)}var J=d-c,te=w-x,ue=Math.max(J,te),we=Math.max(0,Math.floor(-Math.log(ue)/Math.LN2)),be=Math.pow(2,we);return new a.CanonicalTileID(we,Math.floor((c+d)/2*be),Math.floor((x+w)/2*be))}var Ye=function(g){function c(x,d,w,L){g.call(this,x,d,w,L),this.roundZoom=!0,this.type="video",this.options=d}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){var d=this;this._loaded=!1;var w=this.options;this.urls=[];for(var L=0,R=w.urls;L<R.length;L+=1){var G=R[L];this.urls.push(this.map._requestManager.transformRequest(G,a.ResourceType.Source).url)}a.getVideo(this.urls,function(J,te){d._loaded=!0,J?d.fire(new a.ErrorEvent(J)):te&&(d.video=te,d.video.loop=!0,d.video.addEventListener("playing",function(){d.map.triggerRepaint()}),d.map&&d.video.play(),d._finishLoading())})},c.prototype.pause=function(){this.video&&this.video.pause()},c.prototype.play=function(){this.video&&this.video.play()},c.prototype.seek=function(d){if(this.video){var w=this.video.seekable;d<w.start(0)||d>w.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+w.start(0)+" and "+w.end(0)+"-second mark."))):this.video.currentTime=d}},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var d=this.map.painter.context,w=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE),w.texSubImage2D(w.TEXTURE_2D,0,0,0,w.RGBA,w.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(d,this.video,w.RGBA),this.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE));for(var L in this.tiles){var R=this.tiles[L];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}}},c.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(lt),xt=function(g){function c(x,d,w,L){g.call(this,x,d,w,L),d.coordinates?(!Array.isArray(d.coordinates)||d.coordinates.length!==4||d.coordinates.some(function(R){return!Array.isArray(R)||R.length!==2||R.some(function(G){return typeof G!="number"})}))&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+x,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+x,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+x,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas!="string"&&!(d.canvas instanceof a.window.HTMLCanvasElement)&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+x,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+x,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate!==void 0?d.animate:!0}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var w=this.map.painter.context,L=w.gl;this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(w,this.canvas,L.RGBA,{premultiply:!0});for(var R in this.tiles){var G=this.tiles[R];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var d=0,w=[this.canvas.width,this.canvas.height];d<w.length;d+=1){var L=w[d];if(isNaN(L)||L<=0)return!0}return!1},c}(lt),rt={vector:Ae,raster:Me,"raster-dem":De,geojson:at,video:Ye,image:lt,canvas:xt},Tt=function(g,c,x,d){var w=new rt[c.type](g,c,x,d);if(w.id!==g)throw new Error("Expected Source id to be "+g+" instead of "+w.id);return a.bindAll(["load","abort","unload","serialize","prepare"],w),w},St=function(g){return rt[g]},mt=function(g,c){rt[g]=c};function ge(g,c){var x=a.identity([]);return a.translate(x,x,[1,1,0]),a.scale(x,x,[g.width*.5,g.height*.5,1]),a.multiply(x,x,g.calculatePosMatrix(c.toUnwrapped()))}function Re(g,c,x){if(g)for(var d=0,w=g;d<w.length;d+=1){var L=w[d],R=c[L];if(R&&R.source===x&&R.type==="fill-extrusion")return!0}else for(var G in c){var J=c[G];if(J.source===x&&J.type==="fill-extrusion")return!0}return!1}function xe(g,c,x,d,w,L){var R=Re(w&&w.layers,c,g.id),G=L.maxPitchScaleFactor(),J=g.tilesIn(d,G,R);J.sort(tt);for(var te=[],ue=0,we=J;ue<we.length;ue+=1){var be=we[ue];te.push({wrappedTileID:be.tileID.wrapped().key,queryResults:be.tile.queryRenderedFeatures(c,x,g._state,be.queryGeometry,be.cameraQueryGeometry,be.scale,w,L,G,ge(g.transform,be.tileID))})}var Ie=Rt(te);for(var Ze in Ie)Ie[Ze].forEach(function(Ge){var Oe=Ge.feature,Xe=g.getFeatureState(Oe.layer["source-layer"],Oe.id);Oe.source=Oe.layer.source,Oe.layer["source-layer"]&&(Oe.sourceLayer=Oe.layer["source-layer"]),Oe.state=Xe});return Ie}function et(g,c,x,d,w,L,R){for(var G={},J=L.queryRenderedSymbols(d),te=[],ue=0,we=Object.keys(J).map(Number);ue<we.length;ue+=1){var be=we[ue];te.push(R[be])}te.sort(tt);for(var Ie=function(){var ft=Ge[Ze],Lt=ft.featureIndex.lookupSymbolFeatures(J[ft.bucketInstanceId],c,ft.bucketIndex,ft.sourceLayerIndex,w.filter,w.layers,w.availableImages,g);for(var It in Lt){var Xt=G[It]=G[It]||[],er=Lt[It];er.sort(function(gr,Lr){var Mr=ft.featureSortOrder;if(Mr){var Xr=Mr.indexOf(gr.featureIndex),Fa=Mr.indexOf(Lr.featureIndex);return Fa-Xr}else return Lr.featureIndex-gr.featureIndex});for(var Ot=0,tr=er;Ot<tr.length;Ot+=1){var fr=tr[Ot];Xt.push(fr)}}},Ze=0,Ge=te;Ze<Ge.length;Ze+=1)Ie();var Oe=function(ft){G[ft].forEach(function(Lt){var It=Lt.feature,Xt=g[ft],er=x[Xt.source],Ot=er.getFeatureState(It.layer["source-layer"],It.id);It.source=It.layer.source,It.layer["source-layer"]&&(It.sourceLayer=It.layer["source-layer"]),It.state=Ot})};for(var Xe in G)Oe(Xe);return G}function ht(g,c){for(var x=g.getRenderableIds().map(function(J){return g.getTileByID(J)}),d=[],w={},L=0;L<x.length;L++){var R=x[L],G=R.tileID.canonical.key;w[G]||(w[G]=!0,R.querySourceFeatures(d,c))}return d}function tt(g,c){var x=g.tileID,d=c.tileID;return x.overscaledZ-d.overscaledZ||x.canonical.y-d.canonical.y||x.wrap-d.wrap||x.canonical.x-d.canonical.x}function Rt(g){for(var c={},x={},d=0,w=g;d<w.length;d+=1){var L=w[d],R=L.queryResults,G=L.wrappedTileID,J=x[G]=x[G]||{};for(var te in R)for(var ue=R[te],we=J[te]=J[te]||{},be=c[te]=c[te]||[],Ie=0,Ze=ue;Ie<Ze.length;Ie+=1){var Ge=Ze[Ie];we[Ge.featureIndex]||(we[Ge.featureIndex]=!0,be.push(Ge))}}return c}var qt=function(c,x){this.max=c,this.onRemove=x,this.reset()};qt.prototype.reset=function(){for(var c in this.data)for(var x=0,d=this.data[c];x<d.length;x+=1){var w=d[x];w.timeout&&clearTimeout(w.timeout),this.onRemove(w.value)}return this.data={},this.order=[],this},qt.prototype.add=function(c,x,d){var w=this,L=c.wrapped().key;this.data[L]===void 0&&(this.data[L]=[]);var R={value:x,timeout:void 0};if(d!==void 0&&(R.timeout=setTimeout(function(){w.remove(c,R)},d)),this.data[L].push(R),this.order.push(L),this.order.length>this.max){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},qt.prototype.has=function(c){return c.wrapped().key in this.data},qt.prototype.getAndRemove=function(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null},qt.prototype._getAndRemoveByKey=function(c){var x=this.data[c].shift();return x.timeout&&clearTimeout(x.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),x.value},qt.prototype.getByKey=function(c){var x=this.data[c];return x?x[0].value:null},qt.prototype.get=function(c){if(!this.has(c))return null;var x=this.data[c.wrapped().key][0];return x.value},qt.prototype.remove=function(c,x){if(!this.has(c))return this;var d=c.wrapped().key,w=x===void 0?0:this.data[d].indexOf(x),L=this.data[d][w];return this.data[d].splice(w,1),L.timeout&&clearTimeout(L.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(L.value),this.order.splice(this.order.indexOf(d),1),this},qt.prototype.setMaxSize=function(c){for(this.max=c;this.order.length>this.max;){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},qt.prototype.filter=function(c){var x=[];for(var d in this.data)for(var w=0,L=this.data[d];w<L.length;w+=1){var R=L[w];c(R.value)||x.push(R)}for(var G=0,J=x;G<J.length;G+=1){var te=J[G];this.remove(te.value.tileID,te)}};var Jt=function(c,x,d){this.context=c;var w=c.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,x.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete x.arrayBuffer};Jt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Jt.prototype.updateData=function(c){var x=this.context.gl;this.context.unbindVAO(),this.bind(),x.bufferSubData(x.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)},Jt.prototype.destroy=function(){var c=this.context.gl;this.buffer&&(c.deleteBuffer(this.buffer),delete this.buffer)};var Ht={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ar=function(c,x,d,w){this.length=x.length,this.attributes=d,this.itemSize=x.bytesPerElement,this.dynamicDraw=w,this.context=c;var L=c.gl;this.buffer=L.createBuffer(),c.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,x.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete x.arrayBuffer};ar.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ar.prototype.updateData=function(c){var x=this.context.gl;this.bind(),x.bufferSubData(x.ARRAY_BUFFER,0,c.arrayBuffer)},ar.prototype.enableAttributes=function(c,x){for(var d=0;d<this.attributes.length;d++){var w=this.attributes[d],L=x.attributes[w.name];L!==void 0&&c.enableVertexAttribArray(L)}},ar.prototype.setVertexAttribPointers=function(c,x,d){for(var w=0;w<this.attributes.length;w++){var L=this.attributes[w],R=x.attributes[L.name];R!==void 0&&c.vertexAttribPointer(R,L.components,c[Ht[L.type]],!1,this.itemSize,L.offset+this.itemSize*(d||0))}},ar.prototype.destroy=function(){var c=this.context.gl;this.buffer&&(c.deleteBuffer(this.buffer),delete this.buffer)};var kt=function(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};kt.prototype.get=function(){return this.current},kt.prototype.set=function(c){},kt.prototype.getDefault=function(){return this.default},kt.prototype.setDefault=function(){this.set(this.default)};var zt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return a.Color.transparent},c.prototype.set=function(d){var w=this.current;d.r===w.r&&d.g===w.g&&d.b===w.b&&d.a===w.a&&!this.dirty||(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)},c}(kt),_r=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 1},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.clearDepth(d),this.current=d,this.dirty=!1)},c}(kt),rr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 0},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.clearStencil(d),this.current=d,this.dirty=!1)},c}(kt),Be=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return[!0,!0,!0,!0]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&d[3]===w[3]&&!this.dirty||(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)},c}(kt),vt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!0},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.depthMask(d),this.current=d,this.dirty=!1)},c}(kt),gt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 255},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.stencilMask(d),this.current=d,this.dirty=!1)},c}(kt),Cr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},c.prototype.set=function(d){var w=this.current;d.func===w.func&&d.ref===w.ref&&d.mask===w.mask&&!this.dirty||(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)},c}(kt),pr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&!this.dirty||(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)},c}(kt),bt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this.current=d,this.dirty=!1}},c}(kt),wt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return[0,1]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&!this.dirty||(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)},c}(kt),Ut=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this.current=d,this.dirty=!1}},c}(kt),Kt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.LESS},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.depthFunc(d),this.current=d,this.dirty=!1)},c}(kt),Gt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.BLEND):w.disable(w.BLEND),this.current=d,this.dirty=!1}},c}(kt),Nt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var d=this.gl;return[d.ONE,d.ZERO]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&!this.dirty||(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)},c}(kt),$t=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return a.Color.transparent},c.prototype.set=function(d){var w=this.current;d.r===w.r&&d.g===w.g&&d.b===w.b&&d.a===w.a&&!this.dirty||(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)},c}(kt),Ar=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.FUNC_ADD},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.blendEquation(d),this.current=d,this.dirty=!1)},c}(kt),xr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;d?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this.current=d,this.dirty=!1}},c}(kt),Ct=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.BACK},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.cullFace(d),this.current=d,this.dirty=!1)},c}(kt),Fe=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.CCW},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.frontFace(d),this.current=d,this.dirty=!1)},c}(kt),He=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.useProgram(d),this.current=d,this.dirty=!1)},c}(kt),_t=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return this.gl.TEXTURE0},c.prototype.set=function(d){d===this.current&&!this.dirty||(this.gl.activeTexture(d),this.current=d,this.dirty=!1)},c}(kt),ct=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){var d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]},c.prototype.set=function(d){var w=this.current;d[0]===w[0]&&d[1]===w[1]&&d[2]===w[2]&&d[3]===w[3]&&!this.dirty||(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)},c}(kt),yr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,d),this.current=d,this.dirty=!1}},c}(kt),Er=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindRenderbuffer(w.RENDERBUFFER,d),this.current=d,this.dirty=!1}},c}(kt),Tr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindTexture(w.TEXTURE_2D,d),this.current=d,this.dirty=!1}},c}(kt),Hr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.bindBuffer(w.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}},c}(kt),_a=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){var w=this.gl;w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1},c}(kt),ka=function(g){function c(x){g.call(this,x),this.vao=x.extVertexArrayObject}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(d){!this.vao||d===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)},c}(kt),Ea=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return 4},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}},c}(kt),Ii=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}},c}(kt),Ki=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){var w=this.gl;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}},c}(kt),yn=function(g){function c(x,d){g.call(this,x),this.context=x,this.parent=d}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getDefault=function(){return null},c}(kt),Xi=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.setDirty=function(){this.dirty=!0},c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}},c}(yn),jn=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.set=function(d){if(!(d===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var w=this.gl;w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,d),this.current=d,this.dirty=!1}},c}(yn),En=function(c,x,d,w){this.context=c,this.width=x,this.height=d;var L=c.gl,R=this.framebuffer=L.createFramebuffer();this.colorAttachment=new Xi(c,R),w&&(this.depthAttachment=new jn(c,R))};En.prototype.destroy=function(){var c=this.context.gl,x=this.colorAttachment.get();if(x&&c.deleteTexture(x),this.depthAttachment){var d=this.depthAttachment.get();d&&c.deleteRenderbuffer(d)}c.deleteFramebuffer(this.framebuffer)};var Vi=519,pa=function(c,x,d){this.func=c,this.mask=x,this.range=d};pa.ReadOnly=!1,pa.ReadWrite=!0,pa.disabled=new pa(Vi,pa.ReadOnly,[0,1]);var Gr=519,Qa=7680,Zr=function(c,x,d,w,L,R){this.test=c,this.ref=x,this.mask=d,this.fail=w,this.depthFail=L,this.pass=R};Zr.disabled=new Zr({func:Gr,mask:0},0,0,Qa,Qa,Qa);var vi=0,ya=1,le=771,ee=function(c,x,d){this.blendFunction=c,this.blendColor=x,this.mask=d};ee.Replace=[ya,vi],ee.disabled=new ee(ee.Replace,a.Color.transparent,[!1,!1,!1,!1]),ee.unblended=new ee(ee.Replace,a.Color.transparent,[!0,!0,!0,!0]),ee.alphaBlended=new ee([ya,le],a.Color.transparent,[!0,!0,!0,!0]);var se=1029,fe=2305,Ce=function(c,x,d){this.enable=c,this.mode=x,this.frontFace=d};Ce.disabled=new Ce(!1,se,fe),Ce.backCCW=new Ce(!0,se,fe);var Ne=function(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zt(this),this.clearDepth=new _r(this),this.clearStencil=new rr(this),this.colorMask=new Be(this),this.depthMask=new vt(this),this.stencilMask=new gt(this),this.stencilFunc=new Cr(this),this.stencilOp=new pr(this),this.stencilTest=new bt(this),this.depthRange=new wt(this),this.depthTest=new Ut(this),this.depthFunc=new Kt(this),this.blend=new Gt(this),this.blendFunc=new Nt(this),this.blendColor=new $t(this),this.blendEquation=new Ar(this),this.cullFace=new xr(this),this.cullFaceSide=new Ct(this),this.frontFace=new Fe(this),this.program=new He(this),this.activeTexture=new _t(this),this.viewport=new ct(this),this.bindFramebuffer=new yr(this),this.bindRenderbuffer=new Er(this),this.bindTexture=new Tr(this),this.bindVertexBuffer=new Hr(this),this.bindElementBuffer=new _a(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ka(this),this.pixelStoreUnpack=new Ea(this),this.pixelStoreUnpackPremultiplyAlpha=new Ii(this),this.pixelStoreUnpackFlipY=new Ki(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)};Ne.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ne.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ne.prototype.createIndexBuffer=function(c,x){return new Jt(this,c,x)},Ne.prototype.createVertexBuffer=function(c,x,d){return new ar(this,c,x,d)},Ne.prototype.createRenderbuffer=function(c,x,d){var w=this.gl,L=w.createRenderbuffer();return this.bindRenderbuffer.set(L),w.renderbufferStorage(w.RENDERBUFFER,c,x,d),this.bindRenderbuffer.set(null),L},Ne.prototype.createFramebuffer=function(c,x,d){return new En(this,c,x,d)},Ne.prototype.clear=function(c){var x=c.color,d=c.depth,w=this.gl,L=0;x&&(L|=w.COLOR_BUFFER_BIT,this.clearColor.set(x),this.colorMask.set([!0,!0,!0,!0])),typeof d!="undefined"&&(L|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),w.clear(L)},Ne.prototype.setCullFace=function(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))},Ne.prototype.setDepthMode=function(c){c.func===this.gl.ALWAYS&&!c.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range))},Ne.prototype.setStencilMode=function(c){c.test.func===this.gl.ALWAYS&&!c.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask}))},Ne.prototype.setColorMode=function(c){a.deepEqual(c.blendFunction,ee.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)},Ne.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var $e=function(g){function c(x,d,w){var L=this;g.call(this),this.id=x,this.dispatcher=w,this.on("data",function(R){R.dataType==="source"&&R.sourceDataType==="metadata"&&(L._sourceLoaded=!0),L._sourceLoaded&&!L._paused&&R.dataType==="source"&&R.sourceDataType==="content"&&(L.reload(),L.transform&&L.update(L.transform))}),this.on("error",function(){L._sourceErrored=!0}),this._source=Tt(x,d,w,this),this._tiles={},this._cache=new qt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)},c.prototype.onRemove=function(d){this._source&&this._source.onRemove&&this._source.onRemove(d)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var d in this._tiles){var w=this._tiles[d];if(w.state!=="loaded"&&w.state!=="errored")return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform)}},c.prototype._loadTile=function(d,w){return this._source.loadTile(d,w)},c.prototype._unloadTile=function(d){if(this._source.unloadTile)return this._source.unloadTile(d,function(){})},c.prototype._abortTile=function(d){if(this._source.abortTile)return this._source.abortTile(d,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var w in this._tiles){var L=this._tiles[w];L.upload(d),L.prepare(this.map.style.imageManager)}},c.prototype.getIds=function(){return a.values(this._tiles).map(function(d){return d.tileID}).sort(Ve).map(function(d){return d.key})},c.prototype.getRenderableIds=function(d){var w=this,L=[];for(var R in this._tiles)this._isIdRenderable(R,d)&&L.push(this._tiles[R]);return d?L.sort(function(G,J){var te=G.tileID,ue=J.tileID,we=new a.Point(te.canonical.x,te.canonical.y)._rotate(w.transform.angle),be=new a.Point(ue.canonical.x,ue.canonical.y)._rotate(w.transform.angle);return te.overscaledZ-ue.overscaledZ||be.y-we.y||be.x-we.x}).map(function(G){return G.tileID.key}):L.map(function(G){return G.tileID}).sort(Ve).map(function(G){return G.key})},c.prototype.hasRenderableParent=function(d){var w=this.findLoadedParent(d,0);return w?this._isIdRenderable(w.tileID.key):!1},c.prototype._isIdRenderable=function(d,w){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(w||!this._tiles[d].holdingForFade())},c.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")},c.prototype._reloadTile=function(d,w){var L=this._tiles[d];L&&(L.state!=="loading"&&(L.state=w),this._loadTile(L,this._tileLoaded.bind(this,L,d,w)))},c.prototype._tileLoaded=function(d,w,L,R){if(R){d.state="errored",R.status!==404?this._source.fire(new a.ErrorEvent(R,{tile:d})):this.update(this.transform);return}d.timeAdded=a.browser.now(),L==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(w,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:d,coord:d.tileID}))},c.prototype._backfillDEM=function(d){for(var w=this.getRenderableIds(),L=0;L<w.length;L++){var R=w[L];if(d.neighboringTiles&&d.neighboringTiles[R]){var G=this.getTileByID(R);J(d,G),J(G,d)}}function J(te,ue){te.needsHillshadePrepare=!0;var we=ue.tileID.canonical.x-te.tileID.canonical.x,be=ue.tileID.canonical.y-te.tileID.canonical.y,Ie=Math.pow(2,te.tileID.canonical.z),Ze=ue.tileID.key;we===0&&be===0||Math.abs(be)>1||(Math.abs(we)>1&&(Math.abs(we+Ie)===1?we+=Ie:Math.abs(we-Ie)===1&&(we-=Ie)),!(!ue.dem||!te.dem)&&(te.dem.backfillBorder(ue.dem,we,be),te.neighboringTiles&&te.neighboringTiles[Ze]&&(te.neighboringTiles[Ze].backfilled=!0)))}},c.prototype.getTile=function(d){return this.getTileByID(d.key)},c.prototype.getTileByID=function(d){return this._tiles[d]},c.prototype._retainLoadedChildren=function(d,w,L,R){for(var G in this._tiles){var J=this._tiles[G];if(!(R[G]||!J.hasData()||J.tileID.overscaledZ<=w||J.tileID.overscaledZ>L)){for(var te=J.tileID;J&&J.tileID.overscaledZ>w+1;){var ue=J.tileID.scaledTo(J.tileID.overscaledZ-1);J=this._tiles[ue.key],J&&J.hasData()&&(te=ue)}for(var we=te;we.overscaledZ>w;)if(we=we.scaledTo(we.overscaledZ-1),d[we.key]){R[te.key]=te;break}}}},c.prototype.findLoadedParent=function(d,w){if(d.key in this._loadedParentTiles){var L=this._loadedParentTiles[d.key];return L&&L.tileID.overscaledZ>=w?L:null}for(var R=d.overscaledZ-1;R>=w;R--){var G=d.scaledTo(R),J=this._getLoadedTile(G);if(J)return J}},c.prototype._getLoadedTile=function(d){var w=this._tiles[d.key];if(w&&w.hasData())return w;var L=this._cache.getByKey(d.wrapped().key);return L},c.prototype.updateCacheSize=function(d){var w=Math.ceil(d.width/this._source.tileSize)+1,L=Math.ceil(d.height/this._source.tileSize)+1,R=w*L,G=5,J=Math.floor(R*G),te=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,J):J;this._cache.setMaxSize(te)},c.prototype.handleWrapJump=function(d){var w=this._prevLng===void 0?d:this._prevLng,L=d-w,R=L/360,G=Math.round(R);if(this._prevLng=d,G){var J={};for(var te in this._tiles){var ue=this._tiles[te];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+G),J[ue.tileID.key]=ue}this._tiles=J;for(var we in this._timers)clearTimeout(this._timers[we]),delete this._timers[we];for(var be in this._tiles){var Ie=this._tiles[be];this._setTileReloadTimer(be,Ie)}}},c.prototype.update=function(d){var w=this;if(this.transform=d,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var L;this.used?this._source.tileID?L=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(gr){return new a.OverscaledTileID(gr.canonical.z,gr.wrap,gr.canonical.z,gr.canonical.x,gr.canonical.y)}):(L=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(L=L.filter(function(gr){return w._source.hasTile(gr)}))):L=[];var R=d.coveringZoomLevel(this._source),G=Math.max(R-c.maxOverzooming,this._source.minzoom),J=Math.max(R+c.maxUnderzooming,this._source.minzoom),te=this._updateRetainedTiles(L,R);if(dt(this._source.type)){for(var ue={},we={},be=Object.keys(te),Ie=0,Ze=be;Ie<Ze.length;Ie+=1){var Ge=Ze[Ie],Oe=te[Ge],Xe=this._tiles[Ge];if(!(!Xe||Xe.fadeEndTime&&Xe.fadeEndTime<=a.browser.now())){var ft=this.findLoadedParent(Oe,G);ft&&(this._addTile(ft.tileID),ue[ft.tileID.key]=ft.tileID),we[Ge]=Oe}}this._retainLoadedChildren(we,R,J,te);for(var Lt in ue)te[Lt]||(this._coveredTiles[Lt]=!0,te[Lt]=ue[Lt])}for(var It in te)this._tiles[It].clearFadeHold();for(var Xt=a.keysDifference(this._tiles,te),er=0,Ot=Xt;er<Ot.length;er+=1){var tr=Ot[er],fr=this._tiles[tr];fr.hasSymbolBuckets&&!fr.holdingForFade()?fr.setHoldDuration(this.map._fadeDuration):(!fr.hasSymbolBuckets||fr.symbolFadeFinished())&&this._removeTile(tr)}this._updateLoadedParentTileCache()}},c.prototype.releaseSymbolFadeTiles=function(){for(var d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)},c.prototype._updateRetainedTiles=function(d,w){for(var L={},R={},G=Math.max(w-c.maxOverzooming,this._source.minzoom),J=Math.max(w+c.maxUnderzooming,this._source.minzoom),te={},ue=0,we=d;ue<we.length;ue+=1){var be=we[ue],Ie=this._addTile(be);L[be.key]=be,!Ie.hasData()&&w<this._source.maxzoom&&(te[be.key]=be)}this._retainLoadedChildren(te,w,J,L);for(var Ze=0,Ge=d;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze],Xe=this._tiles[Oe.key];if(!Xe.hasData()){if(w+1>this._source.maxzoom){var ft=Oe.children(this._source.maxzoom)[0],Lt=this.getTile(ft);if(Lt&&Lt.hasData()){L[ft.key]=ft;continue}}else{var It=Oe.children(this._source.maxzoom);if(L[It[0].key]&&L[It[1].key]&&L[It[2].key]&&L[It[3].key])continue}for(var Xt=Xe.wasRequested(),er=Oe.overscaledZ-1;er>=G;--er){var Ot=Oe.scaledTo(er);if(R[Ot.key]||(R[Ot.key]=!0,Xe=this.getTile(Ot),!Xe&&Xt&&(Xe=this._addTile(Ot)),Xe&&(L[Ot.key]=Ot,Xt=Xe.wasRequested(),Xe.hasData())))break}}}return L},c.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var d in this._tiles){for(var w=[],L=void 0,R=this._tiles[d].tileID;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){L=this._loadedParentTiles[R.key];break}w.push(R.key);var G=R.scaledTo(R.overscaledZ-1);if(L=this._getLoadedTile(G),L)break;R=G}for(var J=0,te=w;J<te.length;J+=1){var ue=te[J];this._loadedParentTiles[ue]=L}}},c.prototype._addTile=function(d){var w=this._tiles[d.key];if(w)return w;w=this._cache.getAndRemove(d),w&&(this._setTileReloadTimer(d.key,w),w.tileID=d,this._state.initializeTileState(w,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,w)));var L=!!w;return L||(w=new a.Tile(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(w,this._tileLoaded.bind(this,w,d.key,w.state))),w?(w.uses++,this._tiles[d.key]=w,L||this._source.fire(new a.Event("dataloading",{tile:w,coord:w.tileID,dataType:"source"})),w):null},c.prototype._setTileReloadTimer=function(d,w){var L=this;d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);var R=w.getExpiryTimeout();R&&(this._timers[d]=setTimeout(function(){L._reloadTile(d,"expired"),delete L._timers[d]},R))},c.prototype._removeTile=function(d){var w=this._tiles[d];w&&(w.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),!(w.uses>0)&&(w.hasData()&&w.state!=="reloading"?this._cache.add(w.tileID,w,w.getExpiryTimeout()):(w.aborted=!0,this._abortTile(w),this._unloadTile(w))))},c.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var d in this._tiles)this._removeTile(d);this._cache.reset()},c.prototype.tilesIn=function(d,w,L){var R=this,G=[],J=this.transform;if(!J)return G;for(var te=L?J.getCameraQueryGeometry(d):d,ue=d.map(function(er){return J.pointCoordinate(er)}),we=te.map(function(er){return J.pointCoordinate(er)}),be=this.getIds(),Ie=1/0,Ze=1/0,Ge=-1/0,Oe=-1/0,Xe=0,ft=we;Xe<ft.length;Xe+=1){var Lt=ft[Xe];Ie=Math.min(Ie,Lt.x),Ze=Math.min(Ze,Lt.y),Ge=Math.max(Ge,Lt.x),Oe=Math.max(Oe,Lt.y)}for(var It=function(er){var Ot=R._tiles[be[er]];if(!Ot.holdingForFade()){var tr=Ot.tileID,fr=Math.pow(2,J.zoom-Ot.tileID.overscaledZ),gr=w*Ot.queryPadding*a.EXTENT/Ot.tileSize/fr,Lr=[tr.getTilePoint(new a.MercatorCoordinate(Ie,Ze)),tr.getTilePoint(new a.MercatorCoordinate(Ge,Oe))];if(Lr[0].x-gr<a.EXTENT&&Lr[0].y-gr<a.EXTENT&&Lr[1].x+gr>=0&&Lr[1].y+gr>=0){var Mr=ue.map(function(Fa){return tr.getTilePoint(Fa)}),Xr=we.map(function(Fa){return tr.getTilePoint(Fa)});G.push({tile:Ot,tileID:tr,queryGeometry:Mr,cameraQueryGeometry:Xr,scale:fr})}}},Xt=0;Xt<be.length;Xt++)It(Xt);return G},c.prototype.getVisibleCoordinates=function(d){for(var w=this,L=this.getRenderableIds(d).map(function(te){return w._tiles[te].tileID}),R=0,G=L;R<G.length;R+=1){var J=G[R];J.posMatrix=this.transform.calculatePosMatrix(J.toUnwrapped())}return L},c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(dt(this._source.type))for(var d in this._tiles){var w=this._tiles[d];if(w.fadeEndTime!==void 0&&w.fadeEndTime>=a.browser.now())return!0}return!1},c.prototype.setFeatureState=function(d,w,L){d=d||"_geojsonTileLayer",this._state.updateState(d,w,L)},c.prototype.removeFeatureState=function(d,w,L){d=d||"_geojsonTileLayer",this._state.removeFeatureState(d,w,L)},c.prototype.getFeatureState=function(d,w){return d=d||"_geojsonTileLayer",this._state.getState(d,w)},c.prototype.setDependencies=function(d,w,L){var R=this._tiles[d];R&&R.setDependencies(w,L)},c.prototype.reloadTilesForDependencies=function(d,w){for(var L in this._tiles){var R=this._tiles[L];R.hasDependency(d,w)&&this._reloadTile(L,"reloading")}this._cache.filter(function(G){return!G.hasDependency(d,w)})},c}(a.Evented);$e.maxOverzooming=10,$e.maxUnderzooming=3;function Ve(g,c){var x=Math.abs(g.wrap*2)-+(g.wrap<0),d=Math.abs(c.wrap*2)-+(c.wrap<0);return g.overscaledZ-c.overscaledZ||d-x||c.canonical.y-g.canonical.y||c.canonical.x-g.canonical.x}function dt(g){return g==="raster"||g==="image"||g==="video"}function Et(){return new a.window.Worker(bn.workerUrl)}var Dt="mapboxgl_preloaded_worker_pool",Qt=function(){this.active={}};Qt.prototype.acquire=function(c){if(!this.workers)for(this.workers=[];this.workers.length<Qt.workerCount;)this.workers.push(new Et);return this.active[c]=!0,this.workers.slice()},Qt.prototype.release=function(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(function(x){x.terminate()}),this.workers=null)},Qt.prototype.isPreloaded=function(){return!!this.active[Dt]},Qt.prototype.numActive=function(){return Object.keys(this.active).length};var Vt=Math.floor(a.browser.hardwareConcurrency/2);Qt.workerCount=Math.max(Math.min(Vt,6),1);var wr;function Yr(){return wr||(wr=new Qt),wr}function Br(){var g=Yr();g.acquire(Dt)}function ca(){var g=wr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Dt),wr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function ua(g,c){var x={};for(var d in g)d!=="ref"&&(x[d]=g[d]);return a.refProperties.forEach(function(w){w in c&&(x[w]=c[w])}),x}function Na(g){g=g.slice();for(var c=Object.create(null),x=0;x<g.length;x++)c[g[x].id]=g[x];for(var d=0;d<g.length;d++)"ref"in g[d]&&(g[d]=ua(g[d],c[g[d].ref]));return g}function ii(){var g={},c=a.styleSpec.$version;for(var x in a.styleSpec.$root){var d=a.styleSpec.$root[x];if(d.required){var w=null;x==="version"?w=c:d.type==="array"?w=[]:w={},w!=null&&(g[x]=w)}}return g}var Wr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function vr(g,c,x){x.push({command:Wr.addSource,args:[g,c[g]]})}function $r(g,c,x){c.push({command:Wr.removeSource,args:[g]}),x[g]=!0}function ga(g,c,x,d){$r(g,x,d),vr(g,c,x)}function ir(g,c,x){var d;for(d in g[x])if(g[x].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(g[x][d],c[x][d]))return!1;for(d in c[x])if(c[x].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(g[x][d],c[x][d]))return!1;return!0}function wi(g,c,x,d){g=g||{},c=c||{};var w;for(w in g)g.hasOwnProperty(w)&&(c.hasOwnProperty(w)||$r(w,x,d));for(w in c)c.hasOwnProperty(w)&&(g.hasOwnProperty(w)?a.deepEqual(g[w],c[w])||(g[w].type==="geojson"&&c[w].type==="geojson"&&ir(g,c,w)?x.push({command:Wr.setGeoJSONSourceData,args:[w,c[w].data]}):ga(w,c,x,d)):vr(w,c,x))}function La(g,c,x,d,w,L){g=g||{},c=c||{};var R;for(R in g)g.hasOwnProperty(R)&&(a.deepEqual(g[R],c[R])||x.push({command:L,args:[d,R,c[R],w]}));for(R in c)!c.hasOwnProperty(R)||g.hasOwnProperty(R)||a.deepEqual(g[R],c[R])||x.push({command:L,args:[d,R,c[R],w]})}function si(g){return g.id}function fa(g,c){return g[c.id]=c,g}function Ln(g,c,x){g=g||[],c=c||[];var d=g.map(si),w=c.map(si),L=g.reduce(fa,{}),R=c.reduce(fa,{}),G=d.slice(),J=Object.create(null),te,ue,we,be,Ie,Ze,Ge;for(te=0,ue=0;te<d.length;te++)we=d[te],R.hasOwnProperty(we)?ue++:(x.push({command:Wr.removeLayer,args:[we]}),G.splice(G.indexOf(we,ue),1));for(te=0,ue=0;te<w.length;te++)we=w[w.length-1-te],G[G.length-1-te]!==we&&(L.hasOwnProperty(we)?(x.push({command:Wr.removeLayer,args:[we]}),G.splice(G.lastIndexOf(we,G.length-ue),1)):ue++,Ze=G[G.length-te],x.push({command:Wr.addLayer,args:[R[we],Ze]}),G.splice(G.length-te,0,we),J[we]=!0);for(te=0;te<w.length;te++)if(we=w[te],be=L[we],Ie=R[we],!(J[we]||a.deepEqual(be,Ie))){if(!a.deepEqual(be.source,Ie.source)||!a.deepEqual(be["source-layer"],Ie["source-layer"])||!a.deepEqual(be.type,Ie.type)){x.push({command:Wr.removeLayer,args:[we]}),Ze=G[G.lastIndexOf(we)+1],x.push({command:Wr.addLayer,args:[Ie,Ze]});continue}La(be.layout,Ie.layout,x,we,null,Wr.setLayoutProperty),La(be.paint,Ie.paint,x,we,null,Wr.setPaintProperty),a.deepEqual(be.filter,Ie.filter)||x.push({command:Wr.setFilter,args:[we,Ie.filter]}),(!a.deepEqual(be.minzoom,Ie.minzoom)||!a.deepEqual(be.maxzoom,Ie.maxzoom))&&x.push({command:Wr.setLayerZoomRange,args:[we,Ie.minzoom,Ie.maxzoom]});for(Ge in be)be.hasOwnProperty(Ge)&&(Ge==="layout"||Ge==="paint"||Ge==="filter"||Ge==="metadata"||Ge==="minzoom"||Ge==="maxzoom"||(Ge.indexOf("paint.")===0?La(be[Ge],Ie[Ge],x,we,Ge.slice(6),Wr.setPaintProperty):a.deepEqual(be[Ge],Ie[Ge])||x.push({command:Wr.setLayerProperty,args:[we,Ge,Ie[Ge]]})));for(Ge in Ie)!Ie.hasOwnProperty(Ge)||be.hasOwnProperty(Ge)||Ge==="layout"||Ge==="paint"||Ge==="filter"||Ge==="metadata"||Ge==="minzoom"||Ge==="maxzoom"||(Ge.indexOf("paint.")===0?La(be[Ge],Ie[Ge],x,we,Ge.slice(6),Wr.setPaintProperty):a.deepEqual(be[Ge],Ie[Ge])||x.push({command:Wr.setLayerProperty,args:[we,Ge,Ie[Ge]]}))}}function Co(g,c){if(!g)return[{command:Wr.setStyle,args:[c]}];var x=[];try{if(!a.deepEqual(g.version,c.version))return[{command:Wr.setStyle,args:[c]}];a.deepEqual(g.center,c.center)||x.push({command:Wr.setCenter,args:[c.center]}),a.deepEqual(g.zoom,c.zoom)||x.push({command:Wr.setZoom,args:[c.zoom]}),a.deepEqual(g.bearing,c.bearing)||x.push({command:Wr.setBearing,args:[c.bearing]}),a.deepEqual(g.pitch,c.pitch)||x.push({command:Wr.setPitch,args:[c.pitch]}),a.deepEqual(g.sprite,c.sprite)||x.push({command:Wr.setSprite,args:[c.sprite]}),a.deepEqual(g.glyphs,c.glyphs)||x.push({command:Wr.setGlyphs,args:[c.glyphs]}),a.deepEqual(g.transition,c.transition)||x.push({command:Wr.setTransition,args:[c.transition]}),a.deepEqual(g.light,c.light)||x.push({command:Wr.setLight,args:[c.light]});var d={},w=[];wi(g.sources,c.sources,w,d);var L=[];g.layers&&g.layers.forEach(function(R){d[R.source]?x.push({command:Wr.removeLayer,args:[R.id]}):L.push(R)}),x=x.concat(w),Ln(L,c.layers,x)}catch(R){console.warn("Unable to compute style diff:",R),x=[{command:Wr.setStyle,args:[c]}]}return x}var xs=function(c,x){this.reset(c,x)};xs.prototype.reset=function(c,x){this.points=c||[],this._distances=[0];for(var d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(x||0,this.length*.5),this.paddedLength=this.length-this.padding*2},xs.prototype.lerp=function(c){if(this.points.length===1)return this.points[0];c=a.clamp(c,0,1);for(var x=1,d=this._distances[x],w=c*this.paddedLength+this.padding;d<w&&x<this._distances.length;)d=this._distances[++x];var L=x-1,R=this._distances[L],G=d-R,J=G>0?(w-R)/G:0;return this.points[L].mult(1-J).add(this.points[x].mult(J))};var Ga=function(c,x,d){var w=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(c/d),this.yCellCount=Math.ceil(x/d);for(var R=0;R<this.xCellCount*this.yCellCount;R++)w.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=x,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/x,this.boxUid=0,this.circleUid=0};Ga.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ga.prototype.insert=function(c,x,d,w,L){this._forEachCell(x,d,w,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(x),this.bboxes.push(d),this.bboxes.push(w),this.bboxes.push(L)},Ga.prototype.insertCircle=function(c,x,d,w){this._forEachCell(x-w,d-w,x+w,d+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(x),this.circles.push(d),this.circles.push(w)},Ga.prototype._insertBoxCell=function(c,x,d,w,L,R){this.boxCells[L].push(R)},Ga.prototype._insertCircleCell=function(c,x,d,w,L,R){this.circleCells[L].push(R)},Ga.prototype._query=function(c,x,d,w,L,R){if(d<0||c>this.width||w<0||x>this.height)return L?!1:[];var G=[];if(c<=0&&x<=0&&this.width<=d&&this.height<=w){if(L)return!0;for(var J=0;J<this.boxKeys.length;J++)G.push({key:this.boxKeys[J],x1:this.bboxes[J*4],y1:this.bboxes[J*4+1],x2:this.bboxes[J*4+2],y2:this.bboxes[J*4+3]});for(var te=0;te<this.circleKeys.length;te++){var ue=this.circles[te*3],we=this.circles[te*3+1],be=this.circles[te*3+2];G.push({key:this.circleKeys[te],x1:ue-be,y1:we-be,x2:ue+be,y2:we+be})}return R?G.filter(R):G}else{var Ie={hitTest:L,seenUids:{box:{},circle:{}}};return this._forEachCell(c,x,d,w,this._queryCell,G,Ie,R),L?G.length>0:G}},Ga.prototype._queryCircle=function(c,x,d,w,L){var R=c-d,G=c+d,J=x-d,te=x+d;if(G<0||R>this.width||te<0||J>this.height)return w?!1:[];var ue=[],we={hitTest:w,circle:{x:c,y:x,radius:d},seenUids:{box:{},circle:{}}};return this._forEachCell(R,J,G,te,this._queryCellCircle,ue,we,L),w?ue.length>0:ue},Ga.prototype.query=function(c,x,d,w,L){return this._query(c,x,d,w,!1,L)},Ga.prototype.hitTest=function(c,x,d,w,L){return this._query(c,x,d,w,!0,L)},Ga.prototype.hitTestCircle=function(c,x,d,w){return this._queryCircle(c,x,d,!0,w)},Ga.prototype._queryCell=function(c,x,d,w,L,R,G,J){var te=G.seenUids,ue=this.boxCells[L];if(ue!==null)for(var we=this.bboxes,be=0,Ie=ue;be<Ie.length;be+=1){var Ze=Ie[be];if(!te.box[Ze]){te.box[Ze]=!0;var Ge=Ze*4;if(c<=we[Ge+2]&&x<=we[Ge+3]&&d>=we[Ge+0]&&w>=we[Ge+1]&&(!J||J(this.boxKeys[Ze]))){if(G.hitTest)return R.push(!0),!0;R.push({key:this.boxKeys[Ze],x1:we[Ge],y1:we[Ge+1],x2:we[Ge+2],y2:we[Ge+3]})}}}var Oe=this.circleCells[L];if(Oe!==null)for(var Xe=this.circles,ft=0,Lt=Oe;ft<Lt.length;ft+=1){var It=Lt[ft];if(!te.circle[It]){te.circle[It]=!0;var Xt=It*3;if(this._circleAndRectCollide(Xe[Xt],Xe[Xt+1],Xe[Xt+2],c,x,d,w)&&(!J||J(this.circleKeys[It]))){if(G.hitTest)return R.push(!0),!0;var er=Xe[Xt],Ot=Xe[Xt+1],tr=Xe[Xt+2];R.push({key:this.circleKeys[It],x1:er-tr,y1:Ot-tr,x2:er+tr,y2:Ot+tr})}}}},Ga.prototype._queryCellCircle=function(c,x,d,w,L,R,G,J){var te=G.circle,ue=G.seenUids,we=this.boxCells[L];if(we!==null)for(var be=this.bboxes,Ie=0,Ze=we;Ie<Ze.length;Ie+=1){var Ge=Ze[Ie];if(!ue.box[Ge]){ue.box[Ge]=!0;var Oe=Ge*4;if(this._circleAndRectCollide(te.x,te.y,te.radius,be[Oe+0],be[Oe+1],be[Oe+2],be[Oe+3])&&(!J||J(this.boxKeys[Ge])))return R.push(!0),!0}}var Xe=this.circleCells[L];if(Xe!==null)for(var ft=this.circles,Lt=0,It=Xe;Lt<It.length;Lt+=1){var Xt=It[Lt];if(!ue.circle[Xt]){ue.circle[Xt]=!0;var er=Xt*3;if(this._circlesCollide(ft[er],ft[er+1],ft[er+2],te.x,te.y,te.radius)&&(!J||J(this.circleKeys[Xt])))return R.push(!0),!0}}},Ga.prototype._forEachCell=function(c,x,d,w,L,R,G,J){for(var te=this._convertToXCellCoord(c),ue=this._convertToYCellCoord(x),we=this._convertToXCellCoord(d),be=this._convertToYCellCoord(w),Ie=te;Ie<=we;Ie++)for(var Ze=ue;Ze<=be;Ze++){var Ge=this.xCellCount*Ze+Ie;if(L.call(this,c,x,d,w,Ge,R,G,J))return}},Ga.prototype._convertToXCellCoord=function(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))},Ga.prototype._convertToYCellCoord=function(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))},Ga.prototype._circlesCollide=function(c,x,d,w,L,R){var G=w-c,J=L-x,te=d+R;return te*te>G*G+J*J},Ga.prototype._circleAndRectCollide=function(c,x,d,w,L,R,G){var J=(R-w)/2,te=Math.abs(c-(w+J));if(te>J+d)return!1;var ue=(G-L)/2,we=Math.abs(x-(L+ue));if(we>ue+d)return!1;if(te<=J||we<=ue)return!0;var be=te-J,Ie=we-ue;return be*be+Ie*Ie<=d*d};function Jn(g,c,x,d,w){var L=a.create();return c?(a.scale(L,L,[1/w,1/w,1]),x||a.rotateZ(L,L,d.angle)):a.multiply(L,d.labelPlaneMatrix,g),L}function cu(g,c,x,d,w){if(c){var L=a.clone(g);return a.scale(L,L,[w,w,1]),x||a.rotateZ(L,L,-d.angle),L}else return d.glCoordMatrix}function Bi(g,c){var x=[g.x,g.y,0,1];Gf(x,x,c);var d=x[3];return{point:new a.Point(x[0]/d,x[1]/d),signedDistanceFromCamera:d}}function vl(g,c){return .5+.5*(g/c)}function Jd(g,c){var x=g[0]/g[3],d=g[1]/g[3],w=x>=-c[0]&&x<=c[0]&&d>=-c[1]&&d<=c[1];return w}function Fc(g,c,x,d,w,L,R,G){var J=d?g.textSizeData:g.iconSizeData,te=a.evaluateSizeForZoom(J,x.transform.zoom),ue=[256/x.width*2+1,256/x.height*2+1],we=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;we.clear();for(var be=g.lineVertexArray,Ie=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ze=x.transform.width/x.transform.height,Ge=!1,Oe=0;Oe<Ie.length;Oe++){var Xe=Ie.get(Oe);if(Xe.hidden||Xe.writingMode===a.WritingMode.vertical&&!Ge){Ju(Xe.numGlyphs,we);continue}Ge=!1;var ft=[Xe.anchorX,Xe.anchorY,0,1];if(a.transformMat4(ft,ft,c),!Jd(ft,ue)){Ju(Xe.numGlyphs,we);continue}var Lt=ft[3],It=vl(x.transform.cameraToCenterDistance,Lt),Xt=a.evaluateSizeForFeature(J,te,Xe),er=R?Xt/It:Xt*It,Ot=new a.Point(Xe.anchorX,Xe.anchorY),tr=Bi(Ot,w).point,fr={},gr=hv(Xe,er,!1,G,c,w,L,g.glyphOffsetArray,be,we,tr,Ot,fr,Ze);Ge=gr.useVertical,(gr.notEnoughRoom||Ge||gr.needsFlipping&&hv(Xe,er,!0,G,c,w,L,g.glyphOffsetArray,be,we,tr,Ot,fr,Ze).notEnoughRoom)&&Ju(Xe.numGlyphs,we)}d?g.text.dynamicLayoutVertexBuffer.updateData(we):g.icon.dynamicLayoutVertexBuffer.updateData(we)}function qc(g,c,x,d,w,L,R,G,J,te,ue){var we=G.glyphStartIndex+G.numGlyphs,be=G.lineStartIndex,Ie=G.lineStartIndex+G.lineLength,Ze=c.getoffsetX(G.glyphStartIndex),Ge=c.getoffsetX(we-1),Oe=dl(g*Ze,x,d,w,L,R,G.segment,be,Ie,J,te,ue);if(!Oe)return null;var Xe=dl(g*Ge,x,d,w,L,R,G.segment,be,Ie,J,te,ue);return Xe?{first:Oe,last:Xe}:null}function cv(g,c,x,d){if(g===a.WritingMode.horizontal){var w=Math.abs(x.y-c.y),L=Math.abs(x.x-c.x)*d;if(w>L)return{useVertical:!0}}return(g===a.WritingMode.vertical?c.y<x.y:c.x>x.x)?{needsFlipping:!0}:null}function hv(g,c,x,d,w,L,R,G,J,te,ue,we,be,Ie){var Ze=c/24,Ge=g.lineOffsetX*Ze,Oe=g.lineOffsetY*Ze,Xe;if(g.numGlyphs>1){var ft=g.glyphStartIndex+g.numGlyphs,Lt=g.lineStartIndex,It=g.lineStartIndex+g.lineLength,Xt=qc(Ze,G,Ge,Oe,x,ue,we,g,J,L,be);if(!Xt)return{notEnoughRoom:!0};var er=Bi(Xt.first.point,R).point,Ot=Bi(Xt.last.point,R).point;if(d&&!x){var tr=cv(g.writingMode,er,Ot,Ie);if(tr)return tr}Xe=[Xt.first];for(var fr=g.glyphStartIndex+1;fr<ft-1;fr++)Xe.push(dl(Ze*G.getoffsetX(fr),Ge,Oe,x,ue,we,g.segment,Lt,It,J,L,be));Xe.push(Xt.last)}else{if(d&&!x){var gr=Bi(we,w).point,Lr=g.lineStartIndex+g.segment+1,Mr=new a.Point(J.getx(Lr),J.gety(Lr)),Xr=Bi(Mr,w),Fa=Xr.signedDistanceFromCamera>0?Xr.point:hu(we,Mr,gr,1,w),xa=cv(g.writingMode,gr,Fa,Ie);if(xa)return xa}var qr=dl(Ze*G.getoffsetX(g.glyphStartIndex),Ge,Oe,x,ue,we,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,J,L,be);if(!qr)return{notEnoughRoom:!0};Xe=[qr]}for(var Sa=0,ia=Xe;Sa<ia.length;Sa+=1){var Za=ia[Sa];a.addDynamicAttributes(te,Za.point,Za.angle)}return{}}function hu(g,c,x,d,w){var L=Bi(g.add(g.sub(c)._unit()),w).point,R=x.sub(L);return x.add(R._mult(d/R.mag()))}function dl(g,c,x,d,w,L,R,G,J,te,ue,we){var be=d?g-c:g+c,Ie=be>0?1:-1,Ze=0;d&&(Ie*=-1,Ze=Math.PI),Ie<0&&(Ze+=Math.PI);for(var Ge=Ie>0?G+R:G+R+1,Oe=w,Xe=w,ft=0,Lt=0,It=Math.abs(be),Xt=[];ft+Lt<=It;){if(Ge+=Ie,Ge<G||Ge>=J)return null;if(Xe=Oe,Xt.push(Oe),Oe=we[Ge],Oe===void 0){var er=new a.Point(te.getx(Ge),te.gety(Ge)),Ot=Bi(er,ue);if(Ot.signedDistanceFromCamera>0)Oe=we[Ge]=Ot.point;else{var tr=Ge-Ie,fr=ft===0?L:new a.Point(te.getx(tr),te.gety(tr));Oe=hu(fr,er,Xe,It-ft+1,ue)}}ft+=Lt,Lt=Xe.dist(Oe)}var gr=(It-ft)/Lt,Lr=Oe.sub(Xe),Mr=Lr.mult(gr)._add(Xe);Mr._add(Lr._unit()._perp()._mult(x*Ie));var Xr=Ze+Math.atan2(Oe.y-Xe.y,Oe.x-Xe.x);return Xt.push(Mr),{point:Mr,angle:Xr,path:Xt}}var Kd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ju(g,c){for(var x=0;x<g;x++){var d=c.length;c.resize(d+4),c.float32.set(Kd,d*3)}}function Gf(g,c,x){var d=c[0],w=c[1];return g[0]=x[0]*d+x[4]*w+x[12],g[1]=x[1]*d+x[5]*w+x[13],g[3]=x[3]*d+x[7]*w+x[15],g}var Qi=100,Ho=function(c,x,d){x===void 0&&(x=new Ga(c.width+2*Qi,c.height+2*Qi,25)),d===void 0&&(d=new Ga(c.width+2*Qi,c.height+2*Qi,25)),this.transform=c,this.grid=x,this.ignoredGrid=d,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Qi,this.screenBottomBoundary=c.height+Qi,this.gridRightBoundary=c.width+2*Qi,this.gridBottomBoundary=c.height+2*Qi};Ho.prototype.placeCollisionBox=function(c,x,d,w,L){var R=this.projectAndGetPerspectiveRatio(w,c.anchorPointX,c.anchorPointY),G=d*R.perspectiveRatio,J=c.x1*G+R.point.x,te=c.y1*G+R.point.y,ue=c.x2*G+R.point.x,we=c.y2*G+R.point.y;return!this.isInsideGrid(J,te,ue,we)||!x&&this.grid.hitTest(J,te,ue,we,L)?{box:[],offscreen:!1}:{box:[J,te,ue,we],offscreen:this.isOffscreen(J,te,ue,we)}},Ho.prototype.placeCollisionCircles=function(c,x,d,w,L,R,G,J,te,ue,we,be,Ie){var Ze=[],Ge=new a.Point(x.anchorX,x.anchorY),Oe=Bi(Ge,R),Xe=vl(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),ft=ue?L/Xe:L*Xe,Lt=ft/a.ONE_EM,It=Bi(Ge,G).point,Xt={},er=x.lineOffsetX*Lt,Ot=x.lineOffsetY*Lt,tr=qc(Lt,w,er,Ot,!1,It,Ge,x,d,G,Xt),fr=!1,gr=!1,Lr=!0;if(tr){for(var Mr=be*.5*Xe+Ie,Xr=new a.Point(-Qi,-Qi),Fa=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),xa=new xs,qr=tr.first,Sa=tr.last,ia=[],Za=qr.path.length-1;Za>=1;Za--)ia.push(qr.path[Za]);for(var Va=1;Va<Sa.path.length;Va++)ia.push(Sa.path[Va]);var Ai=Mr*2.5;if(J){var Pa=ia.map(function(tl){return Bi(tl,J)});Pa.some(function(tl){return tl.signedDistanceFromCamera<=0})?ia=[]:ia=Pa.map(function(tl){return tl.point})}var mi=[];if(ia.length>0){for(var na=ia[0].clone(),Oa=ia[0].clone(),en=1;en<ia.length;en++)na.x=Math.min(na.x,ia[en].x),na.y=Math.min(na.y,ia[en].y),Oa.x=Math.max(Oa.x,ia[en].x),Oa.y=Math.max(Oa.y,ia[en].y);na.x>=Xr.x&&Oa.x<=Fa.x&&na.y>=Xr.y&&Oa.y<=Fa.y?mi=[ia]:Oa.x<Xr.x||na.x>Fa.x||Oa.y<Xr.y||na.y>Fa.y?mi=[]:mi=a.clipLine([ia],Xr.x,Xr.y,Fa.x,Fa.y)}for(var In=0,Ps=mi;In<Ps.length;In+=1){var Ds=Ps[In];xa.reset(Ds,Mr*.25);var $s=0;xa.length<=.5*Mr?$s=1:$s=Math.ceil(xa.paddedLength/Ai)+1;for(var Nl=0;Nl<$s;Nl++){var nc=Nl/Math.max($s-1,1),Bl=xa.lerp(nc),Po=Bl.x+Qi,Ol=Bl.y+Qi;Ze.push(Po,Ol,Mr,0);var Ko=Po-Mr,Do=Ol-Mr,el=Po+Mr,Su=Ol+Mr;if(Lr=Lr&&this.isOffscreen(Ko,Do,el,Su),gr=gr||this.isInsideGrid(Ko,Do,el,Su),!c&&this.grid.hitTestCircle(Po,Ol,Mr,we)&&(fr=!0,!te))return{circles:[],offscreen:!1,collisionDetected:fr}}}}return{circles:!te&&fr||!gr?[]:Ze,offscreen:Lr,collisionDetected:fr}},Ho.prototype.queryRenderedSymbols=function(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var x=[],d=1/0,w=1/0,L=-1/0,R=-1/0,G=0,J=c;G<J.length;G+=1){var te=J[G],ue=new a.Point(te.x+Qi,te.y+Qi);d=Math.min(d,ue.x),w=Math.min(w,ue.y),L=Math.max(L,ue.x),R=Math.max(R,ue.y),x.push(ue)}for(var we=this.grid.query(d,w,L,R).concat(this.ignoredGrid.query(d,w,L,R)),be={},Ie={},Ze=0,Ge=we;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze],Xe=Oe.key;if(be[Xe.bucketInstanceId]===void 0&&(be[Xe.bucketInstanceId]={}),!be[Xe.bucketInstanceId][Xe.featureIndex]){var ft=[new a.Point(Oe.x1,Oe.y1),new a.Point(Oe.x2,Oe.y1),new a.Point(Oe.x2,Oe.y2),new a.Point(Oe.x1,Oe.y2)];a.polygonIntersectsPolygon(x,ft)&&(be[Xe.bucketInstanceId][Xe.featureIndex]=!0,Ie[Xe.bucketInstanceId]===void 0&&(Ie[Xe.bucketInstanceId]=[]),Ie[Xe.bucketInstanceId].push(Xe.featureIndex))}}return Ie},Ho.prototype.insertCollisionBox=function(c,x,d,w,L){var R=x?this.ignoredGrid:this.grid,G={bucketInstanceId:d,featureIndex:w,collisionGroupID:L};R.insert(G,c[0],c[1],c[2],c[3])},Ho.prototype.insertCollisionCircles=function(c,x,d,w,L){for(var R=x?this.ignoredGrid:this.grid,G={bucketInstanceId:d,featureIndex:w,collisionGroupID:L},J=0;J<c.length;J+=4)R.insertCircle(G,c[J],c[J+1],c[J+2])},Ho.prototype.projectAndGetPerspectiveRatio=function(c,x,d){var w=[x,d,0,1];Gf(w,w,c);var L=new a.Point((w[0]/w[3]+1)/2*this.transform.width+Qi,(-w[1]/w[3]+1)/2*this.transform.height+Qi);return{point:L,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/w[3])}},Ho.prototype.isOffscreen=function(c,x,d,w){return d<Qi||c>=this.screenRightBoundary||w<Qi||x>this.screenBottomBoundary},Ho.prototype.isInsideGrid=function(c,x,d,w){return d>=0&&c<this.gridRightBoundary&&w>=0&&x<this.gridBottomBoundary},Ho.prototype.getViewportMatrix=function(){var c=a.identity([]);return a.translate(c,c,[-Qi,-Qi,0]),c};function mo(g,c,x){return c*(a.EXTENT/(g.tileSize*Math.pow(2,x-g.tileID.overscaledZ)))}var pl=function(c,x,d,w){c?this.opacity=Math.max(0,Math.min(1,c.opacity+(c.placed?x:-x))):this.opacity=w&&d?1:0,this.placed=d};pl.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Go=function(c,x,d,w,L){this.text=new pl(c?c.text:null,x,d,L),this.icon=new pl(c?c.icon:null,x,w,L)};Go.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var vu=function(c,x,d){this.text=c,this.icon=x,this.skipFade=d},Qd=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},vv=function(c,x,d,w,L){this.bucketInstanceId=c,this.featureIndex=x,this.sourceLayerIndex=d,this.bucketIndex=w,this.tileID=L},Ku=function(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}};Ku.prototype.get=function(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){var x=++this.maxGroupID;this.collisionGroups[c]={ID:x,predicate:function(d){return d.collisionGroupID===x}}}return this.collisionGroups[c]};function dv(g,c,x,d,w){var L=a.getAnchorAlignment(g),R=L.horizontalAlign,G=L.verticalAlign,J=-(R-.5)*c,te=-(G-.5)*x,ue=a.evaluateVariableOffset(g,d);return new a.Point(J+ue[0]*w,te+ue[1]*w)}function pv(g,c,x,d,w,L){var R=g.x1,G=g.x2,J=g.y1,te=g.y2,ue=g.anchorPointX,we=g.anchorPointY,be=new a.Point(c,x);return d&&be._rotate(w?L:-L),{x1:R+be.x,y1:J+be.y,x2:G+be.x,y2:te+be.y,anchorPointX:ue,anchorPointY:we}}var oo=function(c,x,d,w){this.transform=c.clone(),this.collisionIndex=new Ho(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new Ku(d),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}};oo.prototype.getBucketParts=function(c,x,d,w){var L=d.getBucket(x),R=d.latestFeatureIndex;if(!(!L||!R||x.id!==L.layerIds[0])){var G=d.collisionBoxArray,J=L.layers[0].layout,te=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),ue=d.tileSize/a.EXTENT,we=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),be=J.get("text-pitch-alignment")==="map",Ie=J.get("text-rotation-alignment")==="map",Ze=mo(d,1,this.transform.zoom),Ge=Jn(we,be,Ie,this.transform,Ze),Oe=null;if(be){var Xe=cu(we,be,Ie,this.transform,Ze);Oe=a.multiply([],this.transform.labelPlaneMatrix,Xe)}this.retainedQueryData[L.bucketInstanceId]=new vv(L.bucketInstanceId,R,L.sourceLayerIndex,L.index,d.tileID);var ft={bucket:L,layout:J,posMatrix:we,textLabelPlaneMatrix:Ge,labelToScreenMatrix:Oe,scale:te,textPixelRatio:ue,holdingForFade:d.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(L.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(w)for(var Lt=0,It=L.sortKeyRanges;Lt<It.length;Lt+=1){var Xt=It[Lt],er=Xt.sortKey,Ot=Xt.symbolInstanceStart,tr=Xt.symbolInstanceEnd;c.push({sortKey:er,symbolInstanceStart:Ot,symbolInstanceEnd:tr,parameters:ft})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:ft})}},oo.prototype.attemptAnchorPlacement=function(c,x,d,w,L,R,G,J,te,ue,we,be,Ie,Ze,Ge){var Oe=[be.textOffset0,be.textOffset1],Xe=dv(c,d,w,Oe,L),ft=this.collisionIndex.placeCollisionBox(pv(x,Xe.x,Xe.y,R,G,this.transform.angle),we,J,te,ue.predicate);if(Ge){var Lt=this.collisionIndex.placeCollisionBox(pv(Ge,Xe.x,Xe.y,R,G,this.transform.angle),we,J,te,ue.predicate);if(Lt.box.length===0)return}if(ft.box.length>0){var It;return this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(It=this.prevPlacement.variableOffsets[be.crossTileID].anchor),this.variableOffsets[be.crossTileID]={textOffset:Oe,width:d,height:w,anchor:c,textBoxScale:L,prevAnchor:It},this.markUsedJustification(Ie,c,be,Ze),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Ze,be),this.placedOrientations[be.crossTileID]=Ze),{shift:Xe,placedGlyphBoxes:ft}}},oo.prototype.placeLayerBucketPart=function(c,x,d){var w=this,L=c.parameters,R=L.bucket,G=L.layout,J=L.posMatrix,te=L.textLabelPlaneMatrix,ue=L.labelToScreenMatrix,we=L.textPixelRatio,be=L.holdingForFade,Ie=L.collisionBoxArray,Ze=L.partiallyEvaluatedTextSize,Ge=L.collisionGroup,Oe=G.get("text-optional"),Xe=G.get("icon-optional"),ft=G.get("text-allow-overlap"),Lt=G.get("icon-allow-overlap"),It=G.get("text-rotation-alignment")==="map",Xt=G.get("text-pitch-alignment")==="map",er=G.get("icon-text-fit")!=="none",Ot=G.get("symbol-z-order")==="viewport-y",tr=ft&&(Lt||!R.hasIconData()||Xe),fr=Lt&&(ft||!R.hasTextData()||Oe);!R.collisionArrays&&Ie&&R.deserializeCollisionBoxes(Ie);var gr=function(qr,Sa){if(!x[qr.crossTileID]){if(be){w.placements[qr.crossTileID]=new vu(!1,!1,!1);return}var ia=!1,Za=!1,Va=!0,Ai=null,Pa={box:null,offscreen:null},mi={box:null,offscreen:null},na=null,Oa=null,en=null,In=0,Ps=0,Ds=0;Sa.textFeatureIndex?In=Sa.textFeatureIndex:qr.useRuntimeCollisionCircles&&(In=qr.featureIndex),Sa.verticalTextFeatureIndex&&(Ps=Sa.verticalTextFeatureIndex);var $s=Sa.textBox;if($s){var Nl=function(sn){var Qo=a.WritingMode.horizontal;if(R.allowVerticalPlacement&&!sn&&w.prevPlacement){var $o=w.prevPlacement.placedOrientations[qr.crossTileID];$o&&(w.placedOrientations[qr.crossTileID]=$o,Qo=$o,w.markUsedOrientation(R,Qo,qr))}return Qo},nc=function(sn,Qo){if(R.allowVerticalPlacement&&qr.numVerticalGlyphVertices>0&&Sa.verticalTextBox)for(var $o=0,Op=R.writingModes;$o<Op.length;$o+=1){var ay=Op[$o];if(ay===a.WritingMode.vertical?(Pa=Qo(),mi=Pa):Pa=sn(),Pa&&Pa.box&&Pa.box.length)break}else Pa=sn()};if(G.get("text-variable-anchor")){var Ko=G.get("text-variable-anchor");if(w.prevPlacement&&w.prevPlacement.variableOffsets[qr.crossTileID]){var Do=w.prevPlacement.variableOffsets[qr.crossTileID];Ko.indexOf(Do.anchor)>0&&(Ko=Ko.filter(function(sn){return sn!==Do.anchor}),Ko.unshift(Do.anchor))}var el=function(sn,Qo,$o){for(var Op=sn.x2-sn.x1,ay=sn.y2-sn.y1,t3=qr.textBoxScale,r3=er&&!Lt?Qo:null,Wv={box:[],offscreen:!1},a3=ft?Ko.length*2:Ko.length,Up=0;Up<a3;++Up){var i3=Ko[Up%Ko.length],n3=Up>=Ko.length,iy=w.attemptAnchorPlacement(i3,sn,Op,ay,t3,It,Xt,we,J,Ge,n3,qr,R,$o,r3);if(iy&&(Wv=iy.placedGlyphBoxes,Wv&&Wv.box&&Wv.box.length)){ia=!0,Ai=iy.shift;break}}return Wv},Su=function(){return el($s,Sa.iconBox,a.WritingMode.horizontal)},tl=function(){var sn=Sa.verticalTextBox,Qo=Pa&&Pa.box&&Pa.box.length;return R.allowVerticalPlacement&&!Qo&&qr.numVerticalGlyphVertices>0&&sn?el(sn,Sa.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}};nc(Su,tl),Pa&&(ia=Pa.box,Va=Pa.offscreen);var Rp=Nl(Pa&&Pa.box);if(!ia&&w.prevPlacement){var fh=w.prevPlacement.variableOffsets[qr.crossTileID];fh&&(w.variableOffsets[qr.crossTileID]=fh,w.markUsedJustification(R,fh.anchor,qr,Rp))}}else{var Bl=function(sn,Qo){var $o=w.collisionIndex.placeCollisionBox(sn,ft,we,J,Ge.predicate);return $o&&$o.box&&$o.box.length&&(w.markUsedOrientation(R,Qo,qr),w.placedOrientations[qr.crossTileID]=Qo),$o},Po=function(){return Bl($s,a.WritingMode.horizontal)},Ol=function(){var sn=Sa.verticalTextBox;return R.allowVerticalPlacement&&qr.numVerticalGlyphVertices>0&&sn?Bl(sn,a.WritingMode.vertical):{box:null,offscreen:null}};nc(Po,Ol),Nl(Pa&&Pa.box&&Pa.box.length)}}if(na=Pa,ia=na&&na.box&&na.box.length>0,Va=na&&na.offscreen,qr.useRuntimeCollisionCircles){var Vn=R.text.placedSymbolArray.get(qr.centerJustifiedTextSymbolIndex),Fp=a.evaluateSizeForFeature(R.textSizeData,Ze,Vn),Yv=G.get("text-padding"),xo=qr.collisionCircleDiameter;Oa=w.collisionIndex.placeCollisionCircles(ft,Vn,R.lineVertexArray,R.glyphOffsetArray,Fp,J,te,ue,d,Xt,Ge.predicate,xo,Yv),ia=ft||Oa.circles.length>0&&!Oa.collisionDetected,Va=Va&&Oa.offscreen}if(Sa.iconFeatureIndex&&(Ds=Sa.iconFeatureIndex),Sa.iconBox){var ch=function(sn){var Qo=er&&Ai?pv(sn,Ai.x,Ai.y,It,Xt,w.transform.angle):sn;return w.collisionIndex.placeCollisionBox(Qo,Lt,we,J,Ge.predicate)};mi&&mi.box&&mi.box.length&&Sa.verticalIconBox?(en=ch(Sa.verticalIconBox),Za=en.box.length>0):(en=ch(Sa.iconBox),Za=en.box.length>0),Va=Va&&en.offscreen}var qp=Oe||qr.numHorizontalGlyphVertices===0&&qr.numVerticalGlyphVertices===0,Np=Xe||qr.numIconVertices===0;if(!qp&&!Np?Za=ia=Za&&ia:Np?qp||(Za=Za&&ia):ia=Za&&ia,ia&&na&&na.box&&(mi&&mi.box&&Ps?w.collisionIndex.insertCollisionBox(na.box,G.get("text-ignore-placement"),R.bucketInstanceId,Ps,Ge.ID):w.collisionIndex.insertCollisionBox(na.box,G.get("text-ignore-placement"),R.bucketInstanceId,In,Ge.ID)),Za&&en&&w.collisionIndex.insertCollisionBox(en.box,G.get("icon-ignore-placement"),R.bucketInstanceId,Ds,Ge.ID),Oa&&(ia&&w.collisionIndex.insertCollisionCircles(Oa.circles,G.get("text-ignore-placement"),R.bucketInstanceId,In,Ge.ID),d)){var Bp=R.bucketInstanceId,hh=w.collisionCircleArrays[Bp];hh===void 0&&(hh=w.collisionCircleArrays[Bp]=new Qd);for(var vh=0;vh<Oa.circles.length;vh+=4)hh.circles.push(Oa.circles[vh+0]),hh.circles.push(Oa.circles[vh+1]),hh.circles.push(Oa.circles[vh+2]),hh.circles.push(Oa.collisionDetected?1:0)}w.placements[qr.crossTileID]=new vu(ia||tr,Za||fr,Va||R.justReloaded),x[qr.crossTileID]=!0}};if(Ot)for(var Lr=R.getSortedSymbolIndexes(this.transform.angle),Mr=Lr.length-1;Mr>=0;--Mr){var Xr=Lr[Mr];gr(R.symbolInstances.get(Xr),R.collisionArrays[Xr])}else for(var Fa=c.symbolInstanceStart;Fa<c.symbolInstanceEnd;Fa++)gr(R.symbolInstances.get(Fa),R.collisionArrays[Fa]);if(d&&R.bucketInstanceId in this.collisionCircleArrays){var xa=this.collisionCircleArrays[R.bucketInstanceId];a.invert(xa.invProjMatrix,J),xa.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1},oo.prototype.markUsedJustification=function(c,x,d,w){var L={left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex},R;w===a.WritingMode.vertical?R=d.verticalPlacedTextSymbolIndex:R=L[a.getAnchorJustification(x)];for(var G=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex],J=0,te=G;J<te.length;J+=1){var ue=te[J];ue>=0&&(R>=0&&ue!==R?c.text.placedSymbolArray.get(ue).crossTileID=0:c.text.placedSymbolArray.get(ue).crossTileID=d.crossTileID)}},oo.prototype.markUsedOrientation=function(c,x,d){for(var w=x===a.WritingMode.horizontal||x===a.WritingMode.horizontalOnly?x:0,L=x===a.WritingMode.vertical?x:0,R=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex],G=0,J=R;G<J.length;G+=1){var te=J[G];c.text.placedSymbolArray.get(te).placedOrientation=w}d.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=L)},oo.prototype.commit=function(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;var x=this.prevPlacement,d=!1;this.prevZoomAdjustment=x?x.zoomAdjustment(this.transform.zoom):0;var w=x?x.symbolFadeChange(c):1,L=x?x.opacities:{},R=x?x.variableOffsets:{},G=x?x.placedOrientations:{};for(var J in this.placements){var te=this.placements[J],ue=L[J];ue?(this.opacities[J]=new Go(ue,w,te.text,te.icon),d=d||te.text!==ue.text.placed||te.icon!==ue.icon.placed):(this.opacities[J]=new Go(null,w,te.text,te.icon,te.skipFade),d=d||te.text||te.icon)}for(var we in L){var be=L[we];if(!this.opacities[we]){var Ie=new Go(be,w,!1,!1);Ie.isHidden()||(this.opacities[we]=Ie,d=d||be.text.placed||be.icon.placed)}}for(var Ze in R)!this.variableOffsets[Ze]&&this.opacities[Ze]&&!this.opacities[Ze].isHidden()&&(this.variableOffsets[Ze]=R[Ze]);for(var Ge in G)!this.placedOrientations[Ge]&&this.opacities[Ge]&&!this.opacities[Ge].isHidden()&&(this.placedOrientations[Ge]=G[Ge]);d?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=x?x.lastPlacementChangeTime:c)},oo.prototype.updateLayerOpacities=function(c,x){for(var d={},w=0,L=x;w<L.length;w+=1){var R=L[w],G=R.getBucket(c);G&&R.latestFeatureIndex&&c.id===G.layerIds[0]&&this.updateBucketOpacities(G,d,R.collisionBoxArray)}},oo.prototype.updateBucketOpacities=function(c,x,d){var w=this;c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();var L=c.layers[0].layout,R=new Go(null,0,!1,!1,!0),G=L.get("text-allow-overlap"),J=L.get("icon-allow-overlap"),te=L.get("text-variable-anchor"),ue=L.get("text-rotation-alignment")==="map",we=L.get("text-pitch-alignment")==="map",be=L.get("icon-text-fit")!=="none",Ie=new Go(null,0,G&&(J||!c.hasIconData()||L.get("icon-optional")),J&&(G||!c.hasTextData()||L.get("text-optional")),!0);!c.collisionArrays&&d&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(d);for(var Ze=function(ft,Lt,It){for(var Xt=0;Xt<Lt/4;Xt++)ft.opacityVertexArray.emplaceBack(It)},Ge=function(ft){var Lt=c.symbolInstances.get(ft),It=Lt.numHorizontalGlyphVertices,Xt=Lt.numVerticalGlyphVertices,er=Lt.crossTileID,Ot=x[er],tr=w.opacities[er];Ot?tr=R:tr||(tr=Ie,w.opacities[er]=tr),x[er]=!0;var fr=It>0||Xt>0,gr=Lt.numIconVertices>0,Lr=w.placedOrientations[Lt.crossTileID],Mr=Lr===a.WritingMode.vertical,Xr=Lr===a.WritingMode.horizontal||Lr===a.WritingMode.horizontalOnly;if(fr){var Fa=$u(tr.text),xa=Mr?kr:Fa;Ze(c.text,It,xa);var qr=Xr?kr:Fa;Ze(c.text,Xt,qr);var Sa=tr.text.isHidden();[Lt.rightJustifiedTextSymbolIndex,Lt.centerJustifiedTextSymbolIndex,Lt.leftJustifiedTextSymbolIndex].forEach(function(Ds){Ds>=0&&(c.text.placedSymbolArray.get(Ds).hidden=Sa||Mr?1:0)}),Lt.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(Lt.verticalPlacedTextSymbolIndex).hidden=Sa||Xr?1:0);var ia=w.variableOffsets[Lt.crossTileID];ia&&w.markUsedJustification(c,ia.anchor,Lt,Lr);var Za=w.placedOrientations[Lt.crossTileID];Za&&(w.markUsedJustification(c,"left",Lt,Za),w.markUsedOrientation(c,Za,Lt))}if(gr){var Va=$u(tr.icon),Ai=!(be&&Lt.verticalPlacedIconSymbolIndex&&Mr);if(Lt.placedIconSymbolIndex>=0){var Pa=Ai?Va:kr;Ze(c.icon,Lt.numIconVertices,Pa),c.icon.placedSymbolArray.get(Lt.placedIconSymbolIndex).hidden=tr.icon.isHidden()}if(Lt.verticalPlacedIconSymbolIndex>=0){var mi=Ai?kr:Va;Ze(c.icon,Lt.numVerticalIconVertices,mi),c.icon.placedSymbolArray.get(Lt.verticalPlacedIconSymbolIndex).hidden=tr.icon.isHidden()}}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){var na=c.collisionArrays[ft];if(na){var Oa=new a.Point(0,0);if(na.textBox||na.verticalTextBox){var en=!0;if(te){var In=w.variableOffsets[er];In?(Oa=dv(In.anchor,In.width,In.height,In.textOffset,In.textBoxScale),ue&&Oa._rotate(we?w.transform.angle:-w.transform.angle)):en=!1}na.textBox&&Zt(c.textCollisionBox.collisionVertexArray,tr.text.placed,!en||Mr,Oa.x,Oa.y),na.verticalTextBox&&Zt(c.textCollisionBox.collisionVertexArray,tr.text.placed,!en||Xr,Oa.x,Oa.y)}var Ps=!!(!Xr&&na.verticalIconBox);na.iconBox&&Zt(c.iconCollisionBox.collisionVertexArray,tr.icon.placed,Ps,be?Oa.x:0,be?Oa.y:0),na.verticalIconBox&&Zt(c.iconCollisionBox.collisionVertexArray,tr.icon.placed,!Ps,be?Oa.x:0,be?Oa.y:0)}}},Oe=0;Oe<c.symbolInstances.length;Oe++)Ge(Oe);if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){var Xe=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Xe.invProjMatrix,c.placementViewportMatrix=Xe.viewportMatrix,c.collisionCircleArray=Xe.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}},oo.prototype.symbolFadeChange=function(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},oo.prototype.zoomAdjustment=function(c){return Math.max(0,(this.transform.zoom-c)/1.5)},oo.prototype.hasTransitions=function(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration},oo.prototype.stillRecent=function(c,x){var d=this.zoomAtLastRecencyCheck===x?1-this.zoomAdjustment(x):1;return this.zoomAtLastRecencyCheck=x,this.commitTime+this.fadeDuration*d>c},oo.prototype.setStale=function(){this.stale=!0};function Zt(g,c,x,d,w){g.emplaceBack(c?1:0,x?1:0,d||0,w||0),g.emplaceBack(c?1:0,x?1:0,d||0,w||0),g.emplaceBack(c?1:0,x?1:0,d||0,w||0),g.emplaceBack(c?1:0,x?1:0,d||0,w||0)}var Or=Math.pow(2,25),$d=Math.pow(2,24),du=Math.pow(2,17),an=Math.pow(2,16),ml=Math.pow(2,9),bs=Math.pow(2,8),Qu=Math.pow(2,1);function $u(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;var c=g.placed?1:0,x=Math.floor(g.opacity*127);return x*Or+c*$d+x*du+c*an+x*ml+c*bs+x*Qu+c}var kr=0,wa=function(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};wa.prototype.continuePlacement=function(c,x,d,w,L){for(var R=this._bucketParts;this._currentTileIndex<c.length;){var G=c[this._currentTileIndex];if(x.getBucketParts(R,w,G,this._sortAcrossTiles),this._currentTileIndex++,L())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort(function(te,ue){return te.sortKey-ue.sortKey}));this._currentPartIndex<R.length;){var J=R[this._currentPartIndex];if(x.placeLayerBucketPart(J,this._seenCrossTileIDs,d),this._currentPartIndex++,L())return!0}return!1};var Ta=function(c,x,d,w,L,R,G){this.placement=new oo(c,L,R,G),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=w,this._done=!1};Ta.prototype.isDone=function(){return this._done},Ta.prototype.continuePlacement=function(c,x,d){for(var w=this,L=a.browser.now(),R=function(){var we=a.browser.now()-L;return w._forceFullPlacement?!1:we>2};this._currentPlacementIndex>=0;){var G=c[this._currentPlacementIndex],J=x[G],te=this.placement.collisionIndex.transform.zoom;if(J.type==="symbol"&&(!J.minzoom||J.minzoom<=te)&&(!J.maxzoom||J.maxzoom>te)){this._inProgressLayer||(this._inProgressLayer=new wa(J));var ue=this._inProgressLayer.continuePlacement(d[J.source],this.placement,this._showCollisionBoxes,J,R);if(ue)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ta.prototype.commit=function(c){return this.placement.commit(c),this.placement};var ws=512/a.EXTENT/2,yl=function(c,x,d){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(var w=0;w<x.length;w++){var L=x.get(w),R=L.key;this.indexedSymbolInstances[R]||(this.indexedSymbolInstances[R]=[]),this.indexedSymbolInstances[R].push({crossTileID:L.crossTileID,coord:this.getScaledCoordinates(L,c)})}};yl.prototype.getScaledCoordinates=function(c,x){var d=x.canonical.z-this.tileID.canonical.z,w=ws/Math.pow(2,d);return{x:Math.floor((x.canonical.x*a.EXTENT+c.anchorX)*w),y:Math.floor((x.canonical.y*a.EXTENT+c.anchorY)*w)}},yl.prototype.findMatches=function(c,x,d){for(var w=this.tileID.canonical.z<x.canonical.z?1:Math.pow(2,this.tileID.canonical.z-x.canonical.z),L=0;L<c.length;L++){var R=c.get(L);if(!R.crossTileID){var G=this.indexedSymbolInstances[R.key];if(G)for(var J=this.getScaledCoordinates(R,x),te=0,ue=G;te<ue.length;te+=1){var we=ue[te];if(Math.abs(we.coord.x-J.x)<=w&&Math.abs(we.coord.y-J.y)<=w&&!d[we.crossTileID]){d[we.crossTileID]=!0,R.crossTileID=we.crossTileID;break}}}}};var Ma=function(){this.maxCrossTileID=0};Ma.prototype.generate=function(){return++this.maxCrossTileID};var Ws=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ws.prototype.handleWrapJump=function(c){var x=Math.round((c-this.lng)/360);if(x!==0)for(var d in this.indexes){var w=this.indexes[d],L={};for(var R in w){var G=w[R];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+x),L[G.tileID.key]=G}this.indexes[d]=L}this.lng=c},Ws.prototype.addBucket=function(c,x,d){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===x.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(var w=0;w<x.symbolInstances.length;w++){var L=x.symbolInstances.get(w);L.crossTileID=0}this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});var R=this.usedCrossTileIDs[c.overscaledZ];for(var G in this.indexes){var J=this.indexes[G];if(Number(G)>c.overscaledZ)for(var te in J){var ue=J[te];ue.tileID.isChildOf(c)&&ue.findMatches(x.symbolInstances,c,R)}else{var we=c.scaledTo(Number(G)),be=J[we.key];be&&be.findMatches(x.symbolInstances,c,R)}}for(var Ie=0;Ie<x.symbolInstances.length;Ie++){var Ze=x.symbolInstances.get(Ie);Ze.crossTileID||(Ze.crossTileID=d.generate(),R[Ze.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new yl(c,x.symbolInstances,x.bucketInstanceId),!0},Ws.prototype.removeBucketCrossTileIDs=function(c,x){for(var d in x.indexedSymbolInstances)for(var w=0,L=x.indexedSymbolInstances[d];w<L.length;w+=1){var R=L[w];delete this.usedCrossTileIDs[c][R.crossTileID]}},Ws.prototype.removeStaleBuckets=function(c){var x=!1;for(var d in this.indexes){var w=this.indexes[d];for(var L in w)c[w[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,w[L]),delete w[L],x=!0)}return x};var pu=function(){this.layerIndexes={},this.crossTileIDs=new Ma,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};pu.prototype.addLayer=function(c,x,d){var w=this.layerIndexes[c.id];w===void 0&&(w=this.layerIndexes[c.id]=new Ws);var L=!1,R={};w.handleWrapJump(d);for(var G=0,J=x;G<J.length;G+=1){var te=J[G],ue=te.getBucket(c);!ue||c.id!==ue.layerIds[0]||(ue.bucketInstanceId||(ue.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(te.tileID,ue,this.crossTileIDs)&&(L=!0),R[ue.bucketInstanceId]=!0)}return w.removeStaleBuckets(R)&&(L=!0),L},pu.prototype.pruneUnusedLayers=function(c){var x={};c.forEach(function(w){x[w]=!0});for(var d in this.layerIndexes)x[d]||delete this.layerIndexes[d]};var us=function(g,c){return a.emitValidationErrors(g,c&&c.filter(function(x){return x.identifier!=="source.canvas"}))},gl=a.pick(Wr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),yo=a.pick(Wr,["setCenter","setZoom","setBearing","setPitch"]),ki=ii(),Ts=function(g){function c(x,d){var w=this;d===void 0&&(d={}),g.call(this),this.map=x,this.dispatcher=new ke(Yr(),this),this.imageManager=new q,this.imageManager.setEventedParent(this),this.glyphManager=new re(x._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new pu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var L=this;this._rtlTextPluginCallback=c.registerForPluginStateChange(function(R){var G={pluginStatus:R.pluginStatus,pluginURL:R.pluginURL};L.dispatcher.broadcast("syncRTLPluginState",G,function(J,te){if(a.triggerPluginCompletionEvent(J),te){var ue=te.every(function(be){return be});if(ue)for(var we in L.sourceCaches)L.sourceCaches[we].reload()}})}),this.on("data",function(R){if(!(R.dataType!=="source"||R.sourceDataType!=="metadata")){var G=w.sourceCaches[R.sourceId];if(G){var J=G.getSource();if(!(!J||!J.vectorLayerIds))for(var te in w._layers){var ue=w._layers[te];ue.source===J.id&&w._validateLayer(ue)}}}})}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.loadURL=function(d,w){var L=this;w===void 0&&(w={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var R=typeof w.validate=="boolean"?w.validate:!a.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,w.accessToken);var G=this.map._requestManager.transformRequest(d,a.ResourceType.Style);this._request=a.getJSON(G,function(J,te){L._request=null,J?L.fire(new a.ErrorEvent(J)):te&&L._load(te,R)})},c.prototype.loadJSON=function(d,w){var L=this;w===void 0&&(w={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){L._request=null,L._load(d,w.validate!==!1)})},c.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ki,!1)},c.prototype._load=function(d,w){if(!(w&&us(this,a.validateStyle(d)))){this._loaded=!0,this.stylesheet=d;for(var L in d.sources)this.addSource(L,d.sources[L],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);var R=Na(this.stylesheet.layers);this._order=R.map(function(ue){return ue.id}),this._layers={},this._serializedLayers={};for(var G=0,J=R;G<J.length;G+=1){var te=J[G];te=a.createStyleLayer(te),te.setEventedParent(this,{layer:{id:te.id}}),this._layers[te.id]=te,this._serializedLayers[te.id]=te.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new de(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},c.prototype._loadSprite=function(d){var w=this;this._spriteRequest=P(d,this.map._requestManager,function(L,R){if(w._spriteRequest=null,L)w.fire(new a.ErrorEvent(L));else if(R)for(var G in R)w.imageManager.addImage(G,R[G]);w.imageManager.setLoaded(!0),w._availableImages=w.imageManager.listImages(),w.dispatcher.broadcast("setImages",w._availableImages),w.fire(new a.Event("data",{dataType:"style"}))})},c.prototype._validateLayer=function(d){var w=this.sourceCaches[d.source];if(w){var L=d.sourceLayer;if(L){var R=w.getSource();(R.type==="geojson"||R.vectorLayerIds&&R.vectorLayerIds.indexOf(L)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+L+'" does not exist on source "'+R.id+'" as specified by style layer "'+d.id+'"')))}}},c.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()},c.prototype._serializeLayers=function(d){for(var w=[],L=0,R=d;L<R.length;L+=1){var G=R[L],J=this._layers[G];J.type!=="custom"&&w.push(J.serialize())}return w},c.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(var w in this._layers)if(this._layers[w].hasTransition())return!0;return!1},c.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},c.prototype.update=function(d){if(this._loaded){var w=this._changed;if(this._changed){var L=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(L.length||R.length)&&this._updateWorkerLayers(L,R);for(var G in this._updatedSources){var J=this._updatedSources[G];J==="reload"?this._reloadSource(G):J==="clear"&&this._clearSource(G)}this._updateTilesForChangedImages();for(var te in this._updatedPaintProps)this._layers[te].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}var ue={};for(var we in this.sourceCaches){var be=this.sourceCaches[we];ue[we]=be.used,be.used=!1}for(var Ie=0,Ze=this._order;Ie<Ze.length;Ie+=1){var Ge=Ze[Ie],Oe=this._layers[Ge];Oe.recalculate(d,this._availableImages),!Oe.isHidden(d.zoom)&&Oe.source&&(this.sourceCaches[Oe.source].used=!0)}for(var Xe in ue){var ft=this.sourceCaches[Xe];ue[Xe]!==ft.used&&ft.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Xe}))}this.light.recalculate(d),this.z=d.zoom,w&&this.fire(new a.Event("data",{dataType:"style"}))}},c.prototype._updateTilesForChangedImages=function(){var d=Object.keys(this._changedImages);if(d.length){for(var w in this.sourceCaches)this.sourceCaches[w].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}},c.prototype._updateWorkerLayers=function(d,w){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:w})},c.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},c.prototype.setState=function(d){var w=this;if(this._checkLoaded(),us(this,a.validateStyle(d)))return!1;d=a.clone$1(d),d.layers=Na(d.layers);var L=Co(this.serialize(),d).filter(function(G){return!(G.command in yo)});if(L.length===0)return!1;var R=L.filter(function(G){return!(G.command in gl)});if(R.length>0)throw new Error("Unimplemented: "+R.map(function(G){return G.command}).join(", ")+".");return L.forEach(function(G){G.command!=="setTransition"&&w[G.command].apply(w,G.args)}),this.stylesheet=d,!0},c.prototype.addImage=function(d,w){if(this.getImage(d))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(d,w),this._afterImageUpdated(d)},c.prototype.updateImage=function(d,w){this.imageManager.updateImage(d,w)},c.prototype.getImage=function(d){return this.imageManager.getImage(d)},c.prototype.removeImage=function(d){if(!this.getImage(d))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(d),this._afterImageUpdated(d)},c.prototype._afterImageUpdated=function(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},c.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},c.prototype.addSource=function(d,w,L){var R=this;if(L===void 0&&(L={}),this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error("There is already a source with this ID");if(!w.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(w).join(", ")+".");var G=["vector","raster","geojson","video","image"],J=G.indexOf(w.type)>=0;if(!(J&&this._validate(a.validateStyle.source,"sources."+d,w,null,L))){this.map&&this.map._collectResourceTiming&&(w.collectResourceTiming=!0);var te=this.sourceCaches[d]=new $e(d,w,this.dispatcher);te.style=this,te.setEventedParent(this,function(){return{isSourceLoaded:R.loaded(),source:te.serialize(),sourceId:d}}),te.onAdd(this.map),this._changed=!0}},c.prototype.removeSource=function(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(var w in this._layers)if(this._layers[w].source===d)return this.fire(new a.ErrorEvent(new Error('Source "'+d+'" cannot be removed while layer "'+w+'" is using it.')));var L=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],L.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),L.setEventedParent(null),L.clearTiles(),L.onRemove&&L.onRemove(this.map),this._changed=!0},c.prototype.setGeoJSONSourceData=function(d,w){this._checkLoaded();var L=this.sourceCaches[d].getSource();L.setData(w),this._changed=!0},c.prototype.getSource=function(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()},c.prototype.addLayer=function(d,w,L){L===void 0&&(L={}),this._checkLoaded();var R=d.id;if(this.getLayer(R)){this.fire(new a.ErrorEvent(new Error('Layer with id "'+R+'" already exists on this map')));return}var G;if(d.type==="custom"){if(us(this,a.validateCustomStyleLayer(d)))return;G=a.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(R,d.source),d=a.clone$1(d),d=a.extend(d,{source:R})),this._validate(a.validateStyle.layer,"layers."+R,d,{arrayIndex:-1},L))return;G=a.createStyleLayer(d),this._validateLayer(G),G.setEventedParent(this,{layer:{id:R}}),this._serializedLayers[G.id]=G.serialize()}var J=w?this._order.indexOf(w):this._order.length;if(w&&J===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));return}if(this._order.splice(J,0,R),this._layerOrderChanged=!0,this._layers[R]=G,this._removedLayers[R]&&G.source&&G.type!=="custom"){var te=this._removedLayers[R];delete this._removedLayers[R],te.type!==G.type?this._updatedSources[G.source]="clear":(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause())}this._updateLayer(G),G.onAdd&&G.onAdd(this.map)},c.prototype.moveLayer=function(d,w){this._checkLoaded(),this._changed=!0;var L=this._layers[d];if(!L){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be moved.")));return}if(d!==w){var R=this._order.indexOf(d);this._order.splice(R,1);var G=w?this._order.indexOf(w):this._order.length;if(w&&G===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" does not exist on this map.')));return}this._order.splice(G,0,d),this._layerOrderChanged=!0}},c.prototype.removeLayer=function(d){this._checkLoaded();var w=this._layers[d];if(!w){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be removed.")));return}w.setEventedParent(null);var L=this._order.indexOf(d);this._order.splice(L,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=w,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],w.onRemove&&w.onRemove(this.map)},c.prototype.getLayer=function(d){return this._layers[d]},c.prototype.hasLayer=function(d){return d in this._layers},c.prototype.setLayerZoomRange=function(d,w,L){this._checkLoaded();var R=this.getLayer(d);if(!R){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot have zoom extent.")));return}R.minzoom===w&&R.maxzoom===L||(w!=null&&(R.minzoom=w),L!=null&&(R.maxzoom=L),this._updateLayer(R))},c.prototype.setFilter=function(d,w,L){L===void 0&&(L={}),this._checkLoaded();var R=this.getLayer(d);if(!R){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be filtered.")));return}if(!a.deepEqual(R.filter,w)){if(w==null){R.filter=void 0,this._updateLayer(R);return}this._validate(a.validateStyle.filter,"layers."+R.id+".filter",w,null,L)||(R.filter=a.clone$1(w),this._updateLayer(R))}},c.prototype.getFilter=function(d){return a.clone$1(this.getLayer(d).filter)},c.prototype.setLayoutProperty=function(d,w,L,R){R===void 0&&(R={}),this._checkLoaded();var G=this.getLayer(d);if(!G){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be styled.")));return}a.deepEqual(G.getLayoutProperty(w),L)||(G.setLayoutProperty(w,L,R),this._updateLayer(G))},c.prototype.getLayoutProperty=function(d,w){var L=this.getLayer(d);if(!L){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style.")));return}return L.getLayoutProperty(w)},c.prototype.setPaintProperty=function(d,w,L,R){R===void 0&&(R={}),this._checkLoaded();var G=this.getLayer(d);if(!G){this.fire(new a.ErrorEvent(new Error("The layer '"+d+"' does not exist in the map's style and cannot be styled.")));return}if(!a.deepEqual(G.getPaintProperty(w),L)){var J=G.setPaintProperty(w,L,R);J&&this._updateLayer(G),this._changed=!0,this._updatedPaintProps[d]=!0}},c.prototype.getPaintProperty=function(d,w){return this.getLayer(d).getPaintProperty(w)},c.prototype.setFeatureState=function(d,w){this._checkLoaded();var L=d.source,R=d.sourceLayer,G=this.sourceCaches[L];if(G===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")));return}var J=G.getSource().type;if(J==="geojson"&&R){this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(J==="vector"&&!R){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}d.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),G.setFeatureState(R,d.id,w)},c.prototype.removeFeatureState=function(d,w){this._checkLoaded();var L=d.source,R=this.sourceCaches[L];if(R===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")));return}var G=R.getSource().type,J=G==="vector"?d.sourceLayer:void 0;if(G==="vector"&&!J){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(w&&typeof d.id!="string"&&typeof d.id!="number"){this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}R.removeFeatureState(J,d.id,w)},c.prototype.getFeatureState=function(d){this._checkLoaded();var w=d.source,L=d.sourceLayer,R=this.sourceCaches[w];if(R===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+w+"' does not exist in the map's style.")));return}var G=R.getSource().type;if(G==="vector"&&!L){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return d.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),R.getFeatureState(L,d.id)},c.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},c.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(d){return d.serialize()}),layers:this._serializeLayers(this._order)},function(d){return d!==void 0})},c.prototype._updateLayer=function(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0},c.prototype._flattenAndSortRenderedFeatures=function(d){for(var w=this,L=function(Xr){return w._layers[Xr].type==="fill-extrusion"},R={},G=[],J=this._order.length-1;J>=0;J--){var te=this._order[J];if(L(te)){R[te]=J;for(var ue=0,we=d;ue<we.length;ue+=1){var be=we[ue],Ie=be[te];if(Ie)for(var Ze=0,Ge=Ie;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze];G.push(Oe)}}}}G.sort(function(Xr,Fa){return Fa.intersectionZ-Xr.intersectionZ});for(var Xe=[],ft=this._order.length-1;ft>=0;ft--){var Lt=this._order[ft];if(L(Lt))for(var It=G.length-1;It>=0;It--){var Xt=G[It].feature;if(R[Xt.layer.id]<ft)break;Xe.push(Xt),G.pop()}else for(var er=0,Ot=d;er<Ot.length;er+=1){var tr=Ot[er],fr=tr[Lt];if(fr)for(var gr=0,Lr=fr;gr<Lr.length;gr+=1){var Mr=Lr[gr];Xe.push(Mr.feature)}}}return Xe},c.prototype.queryRenderedFeatures=function(d,w,L){w&&w.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",w.filter,null,w);var R={};if(w&&w.layers){if(!Array.isArray(w.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var G=0,J=w.layers;G<J.length;G+=1){var te=J[G],ue=this._layers[te];if(!ue)return this.fire(new a.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be queried for features."))),[];R[ue.source]=!0}}var we=[];w.availableImages=this._availableImages;for(var be in this.sourceCaches)w.layers&&!R[be]||we.push(xe(this.sourceCaches[be],this._layers,this._serializedLayers,d,w,L));return this.placement&&we.push(et(this._layers,this._serializedLayers,this.sourceCaches,d,w,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(we)},c.prototype.querySourceFeatures=function(d,w){w&&w.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",w.filter,null,w);var L=this.sourceCaches[d];return L?ht(L,w):[]},c.prototype.addSourceType=function(d,w,L){if(c.getSourceType(d))return L(new Error('A source type called "'+d+'" already exists.'));if(c.setSourceType(d,w),!w.workerSourceURL)return L(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:d,url:w.workerSourceURL},L)},c.prototype.getLight=function(){return this.light.getLight()},c.prototype.setLight=function(d,w){w===void 0&&(w={}),this._checkLoaded();var L=this.light.getLight(),R=!1;for(var G in d)if(!a.deepEqual(d[G],L[G])){R=!0;break}if(R){var J={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,w),this.light.updateTransitions(J)}},c.prototype._validate=function(d,w,L,R,G){return G===void 0&&(G={}),G&&G.validate===!1?!1:us(this,d.call(a.validateStyle,a.extend({key:w,style:this.serialize(),value:L,styleSpec:a.styleSpec},R)))},c.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var d in this._layers){var w=this._layers[d];w.setEventedParent(null)}for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},c.prototype._clearSource=function(d){this.sourceCaches[d].clearTiles()},c.prototype._reloadSource=function(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()},c.prototype._updateSources=function(d){for(var w in this.sourceCaches)this.sourceCaches[w].update(d)},c.prototype._generateCollisionBoxes=function(){for(var d in this.sourceCaches)this._reloadSource(d)},c.prototype._updatePlacement=function(d,w,L,R,G){G===void 0&&(G=!1);for(var J=!1,te=!1,ue={},we=0,be=this._order;we<be.length;we+=1){var Ie=be[we],Ze=this._layers[Ie];if(Ze.type==="symbol"){if(!ue[Ze.source]){var Ge=this.sourceCaches[Ze.source];ue[Ze.source]=Ge.getRenderableIds(!0).map(function(er){return Ge.getTileByID(er)}).sort(function(er,Ot){return Ot.tileID.overscaledZ-er.tileID.overscaledZ||(er.tileID.isLessThan(Ot.tileID)?-1:1)})}var Oe=this.crossTileSymbolIndex.addLayer(Ze,ue[Ze.source],d.center.lng);J=J||Oe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),G=G||this._layerOrderChanged||L===0,(G||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),d.zoom))&&(this.pauseablePlacement=new Ta(d,this._order,G,w,L,R,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),te=!0),J&&this.pauseablePlacement.placement.setStale()),te||J)for(var Xe=0,ft=this._order;Xe<ft.length;Xe+=1){var Lt=ft[Xe],It=this._layers[Lt];It.type==="symbol"&&this.placement.updateLayerOpacities(It,ue[It.source])}var Xt=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now());return Xt},c.prototype._releaseSymbolFadeTiles=function(){for(var d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()},c.prototype.getImages=function(d,w,L){this.imageManager.getImages(w.icons,L),this._updateTilesForChangedImages();var R=this.sourceCaches[w.source];R&&R.setDependencies(w.tileID.key,w.type,w.icons)},c.prototype.getGlyphs=function(d,w,L){this.glyphManager.getGlyphs(w.stacks,L)},c.prototype.getResource=function(d,w,L){return a.makeRequest(w,L)},c}(a.Evented);Ts.getSourceType=St,Ts.setSourceType=mt,Ts.registerForPluginStateChange=a.registerForPluginStateChange;var fs=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Nc=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,mu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,wm=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zf="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ni=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yf="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",mv=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,gn=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Pn="void main() {gl_FragColor=vec4(1.0);}",ep="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ef=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nn=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Eo=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Zo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",un="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Wf="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",on="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Yo="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Xs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Tm="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Wo=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Am=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,js=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Dn=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Mm=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_l=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,xl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Sm=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,km=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Bc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cm=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Em=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lm="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",gv=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pm="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Dm=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_v=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,tp=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rp=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,xv=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zm=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,bv=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,ap=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Im="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",ip=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,np=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,op=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Rm=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,cs=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Oc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,bl=Ri(Nc,mu),Uc=Ri(wm,Zf),wl=Ri(ni,Yf),Tl=Ri(mv,gn),wv=Ri(Pn,ep),Vc=Ri(ef,nn),As=Ri(Eo,Zo),fn=Ri(un,Wf),Fm=Ri(on,Yo),qm=Ri(Xs,Tm),Al=Ri(Wo,Am),tf=Ri(js,Dn),hs=Ri(Mm,_l),sp=Ri(xl,yv),lp=Ri(Sm,km),rf=Ri(Bc,Cm),up=Ri(Em,Lm),fp=Ri(gv,Pm),Nm=Ri(Dm,_v),Bm=Ri(tp,rp),Tv=Ri(xv,zm),Av=Ri(bv,yu),Mv=Ri(ap,Im),Xf=Ri(ip,np),Hc=Ri(op,Rm),cp=Ri(cs,Oc);function Ri(g,c){var x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=c.match(/attribute ([\w]+) ([\w]+)/g),w=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=L?L.concat(w):w,G={};return g=g.replace(x,function(J,te,ue,we,be){return G[be]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
varying `+ue+" "+we+" "+be+`;
#else
uniform `+ue+" "+we+" u_"+be+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+be+`
    `+ue+" "+we+" "+be+" = u_"+be+`;
#endif
`}),c=c.replace(x,function(J,te,ue,we,be){var Ie=we==="float"?"vec2":"vec4",Ze=be.match(/color/)?"color":Ie;return G[be]?te==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+ue+" "+Ie+" a_"+be+`;
varying `+ue+" "+we+" "+be+`;
#else
uniform `+ue+" "+we+" u_"+be+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = a_"+be+`;
#else
    `+ue+" "+we+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+be+" = unpack_mix_"+Ze+"(a_"+be+", u_"+be+`_t);
#else
    `+ue+" "+we+" "+be+" = u_"+be+`;
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_`+be+`
uniform lowp float u_`+be+`_t;
attribute `+ue+" "+Ie+" a_"+be+`;
#else
uniform `+ue+" "+we+" u_"+be+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+be+`
    `+ue+" "+we+" "+be+" = a_"+be+`;
#else
    `+ue+" "+we+" "+be+" = u_"+be+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+be+`
    `+ue+" "+we+" "+be+" = unpack_mix_"+Ze+"(a_"+be+", u_"+be+`_t);
#else
    `+ue+" "+we+" "+be+" = u_"+be+`;
#endif
`}),{fragmentSource:g,vertexSource:c,staticAttributes:d,staticUniforms:R}}var Om=Object.freeze({__proto__:null,prelude:bl,background:Uc,backgroundPattern:wl,circle:Tl,clippingMask:wv,heatmap:Vc,heatmapTexture:As,collisionBox:fn,collisionCircle:Fm,debug:qm,fill:Al,fillOutline:tf,fillOutlinePattern:hs,fillPattern:sp,fillExtrusion:lp,fillExtrusionPattern:rf,hillshadePrepare:up,hillshade:fp,line:Nm,lineGradient:Bm,linePattern:Tv,lineSDF:Av,raster:Mv,symbolIcon:Xf,symbolSDF:Hc,symbolTextAndIcon:cp}),Gc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Gc.prototype.bind=function(c,x,d,w,L,R,G,J){this.context=c;for(var te=this.boundPaintVertexBuffers.length!==w.length,ue=0;!te&&ue<w.length;ue++)this.boundPaintVertexBuffers[ue]!==w[ue]&&(te=!0);var we=!this.vao||this.boundProgram!==x||this.boundLayoutVertexBuffer!==d||te||this.boundIndexBuffer!==L||this.boundVertexOffset!==R||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==J;!c.extVertexArrayObject||we?this.freshBind(x,d,w,L,R,G,J):(c.bindVertexArrayOES.set(this.vao),G&&G.bind(),L&&L.dynamicDraw&&L.bind(),J&&J.bind())},Gc.prototype.freshBind=function(c,x,d,w,L,R,G){var J,te=c.numAttributes,ue=this.context,we=ue.gl;if(ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ue.extVertexArrayObject.createVertexArrayOES(),ue.bindVertexArrayOES.set(this.vao),J=0,this.boundProgram=c,this.boundLayoutVertexBuffer=x,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=w,this.boundVertexOffset=L,this.boundDynamicVertexBuffer=R,this.boundDynamicVertexBuffer2=G;else{J=ue.currentNumAttributes||0;for(var be=te;be<J;be++)we.disableVertexAttribArray(be)}x.enableAttributes(we,c);for(var Ie=0,Ze=d;Ie<Ze.length;Ie+=1){var Ge=Ze[Ie];Ge.enableAttributes(we,c)}R&&R.enableAttributes(we,c),G&&G.enableAttributes(we,c),x.bind(),x.setVertexAttribPointers(we,c,L);for(var Oe=0,Xe=d;Oe<Xe.length;Oe+=1){var ft=Xe[Oe];ft.bind(),ft.setVertexAttribPointers(we,c,L)}R&&(R.bind(),R.setVertexAttribPointers(we,c,L)),w&&w.bind(),G&&(G.bind(),G.setVertexAttribPointers(we,c,L)),ue.currentNumAttributes=te},Gc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Sv(g){for(var c=[],x=0;x<g.length;x++)if(g[x]!==null){var d=g[x].split(" ");c.push(d.pop())}return c}var hp=function(c,x,d,w,L,R){var G=c.gl;this.program=G.createProgram();for(var J=Sv(d.staticAttributes),te=w?w.getBinderAttributes():[],ue=J.concat(te),we=d.staticUniforms?Sv(d.staticUniforms):[],be=w?w.getBinderUniforms():[],Ie=we.concat(be),Ze=[],Ge=0,Oe=Ie;Ge<Oe.length;Ge+=1){var Xe=Oe[Ge];Ze.indexOf(Xe)<0&&Ze.push(Xe)}var ft=w?w.defines():[];R&&ft.push("#define OVERDRAW_INSPECTOR;");var Lt=ft.concat(bl.fragmentSource,d.fragmentSource).join(`
`),It=ft.concat(bl.vertexSource,d.vertexSource).join(`
`),Xt=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost()){this.failedToCreate=!0;return}G.shaderSource(Xt,Lt),G.compileShader(Xt),G.attachShader(this.program,Xt);var er=G.createShader(G.VERTEX_SHADER);if(G.isContextLost()){this.failedToCreate=!0;return}G.shaderSource(er,It),G.compileShader(er),G.attachShader(this.program,er),this.attributes={};var Ot={};this.numAttributes=ue.length;for(var tr=0;tr<this.numAttributes;tr++)ue[tr]&&(G.bindAttribLocation(this.program,tr,ue[tr]),this.attributes[ue[tr]]=tr);G.linkProgram(this.program),G.deleteShader(er),G.deleteShader(Xt);for(var fr=0;fr<Ze.length;fr++){var gr=Ze[fr];if(gr&&!Ot[gr]){var Lr=G.getUniformLocation(this.program,gr);Lr&&(Ot[gr]=Lr)}}this.fixedUniforms=L(c,Ot),this.binderUniforms=w?w.getUniforms(c,Ot):[]};hp.prototype.draw=function(c,x,d,w,L,R,G,J,te,ue,we,be,Ie,Ze,Ge,Oe){var Xe,ft=c.gl;if(!this.failedToCreate){c.program.set(this.program),c.setDepthMode(d),c.setStencilMode(w),c.setColorMode(L),c.setCullFace(R);for(var Lt in this.fixedUniforms)this.fixedUniforms[Lt].set(G[Lt]);Ze&&Ze.setUniforms(c,this.binderUniforms,be,{zoom:Ie});for(var It=(Xe={},Xe[ft.LINES]=2,Xe[ft.TRIANGLES]=3,Xe[ft.LINE_STRIP]=1,Xe)[x],Xt=0,er=we.get();Xt<er.length;Xt+=1){var Ot=er[Xt],tr=Ot.vaos||(Ot.vaos={}),fr=tr[J]||(tr[J]=new Gc);fr.bind(c,this,te,Ze?Ze.getPaintVertexBuffers():[],ue,Ot.vertexOffset,Ge,Oe),ft.drawElements(x,Ot.primitiveLength*It,ft.UNSIGNED_SHORT,Ot.primitiveOffset*It*2)}}};function af(g,c,x){var d=1/mo(x,1,c.transform.tileZoom),w=Math.pow(2,x.tileID.overscaledZ),L=x.tileSize*Math.pow(2,c.transform.tileZoom)/w,R=L*(x.tileID.canonical.x+x.tileID.wrap*w),G=L*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[R>>16,G>>16],u_pixel_coord_lower:[R&65535,G&65535]}}function gu(g,c,x,d){var w=x.imageManager.getPattern(g.from.toString()),L=x.imageManager.getPattern(g.to.toString()),R=x.imageManager.getPixelSize(),G=R.width,J=R.height,te=Math.pow(2,d.tileID.overscaledZ),ue=d.tileSize*Math.pow(2,x.transform.tileZoom)/te,we=ue*(d.tileID.canonical.x+d.tileID.wrap*te),be=ue*d.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:w.tl,u_pattern_br_a:w.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[G,J],u_mix:c.t,u_pattern_size_a:w.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/mo(d,1,x.transform.tileZoom),u_pixel_coord_upper:[we>>16,be>>16],u_pixel_coord_lower:[we&65535,be&65535]}}var kv=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_lightpos:new a.Uniform3f(g,c.u_lightpos),u_lightintensity:new a.Uniform1f(g,c.u_lightintensity),u_lightcolor:new a.Uniform3f(g,c.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,c.u_vertical_gradient),u_opacity:new a.Uniform1f(g,c.u_opacity)}},_n=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_lightpos:new a.Uniform3f(g,c.u_lightpos),u_lightintensity:new a.Uniform1f(g,c.u_lightintensity),u_lightcolor:new a.Uniform3f(g,c.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,c.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,c.u_height_factor),u_image:new a.Uniform1i(g,c.u_image),u_texsize:new a.Uniform2f(g,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade),u_opacity:new a.Uniform1f(g,c.u_opacity)}},jf=function(g,c,x,d){var w=c.style.light,L=w.properties.get("position"),R=[L.x,L.y,L.z],G=a.create$1();w.properties.get("anchor")==="viewport"&&a.fromRotation(G,-c.transform.angle),a.transformMat3(R,R,G);var J=w.properties.get("color");return{u_matrix:g,u_lightpos:R,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[J.r,J.g,J.b],u_vertical_gradient:+x,u_opacity:d}},Js=function(g,c,x,d,w,L,R){return a.extend(jf(g,c,x,d),af(L,c,R),{u_height_factor:-Math.pow(2,w.overscaledZ)/R.tileSize/8})},Ml=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},Sl=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_image:new a.Uniform1i(g,c.u_image),u_texsize:new a.Uniform2f(g,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade)}},kl=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_world:new a.Uniform2f(g,c.u_world)}},Ks=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_world:new a.Uniform2f(g,c.u_world),u_image:new a.Uniform1i(g,c.u_image),u_texsize:new a.Uniform2f(g,c.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade)}},Ms=function(g){return{u_matrix:g}},Ss=function(g,c,x,d){return a.extend(Ms(g),af(x,c,d))},Cl=function(g,c){return{u_matrix:g,u_world:c}},vp=function(g,c,x,d,w){return a.extend(Ss(g,c,x,d),{u_world:w})},Um=function(g,c){return{u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,c.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,c.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},Vm=function(g,c,x,d){var w=g.transform,L,R;if(d.paint.get("circle-pitch-alignment")==="map"){var G=mo(x,1,w.zoom);L=!0,R=[G,G]}else L=!1,R=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(c.posMatrix,x,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+L,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:R}},Hm=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,c.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,c.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,c.u_overscale_factor)}},dp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,c.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,c.u_viewport_size)}},pp=function(g,c,x){var d=mo(x,1,c.zoom),w=Math.pow(2,c.zoom-x.tileID.overscaledZ),L=x.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[c.pixelsToGLUnits[0]/(d*w),c.pixelsToGLUnits[1]/(d*w)],u_overscale_factor:L}},Cv=function(g,c,x){return{u_matrix:g,u_inv_matrix:c,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]}},Ev=function(g,c){return{u_color:new a.UniformColor(g,c.u_color),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_overlay:new a.Uniform1i(g,c.u_overlay),u_overlay_scale:new a.Uniform1f(g,c.u_overlay_scale)}},Jf=function(g,c,x){return x===void 0&&(x=1),{u_matrix:g,u_color:c,u_overlay:0,u_overlay_scale:x}},Zc=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},mp=function(g){return{u_matrix:g}},Lv=function(g,c){return{u_extrude_scale:new a.Uniform1f(g,c.u_extrude_scale),u_intensity:new a.Uniform1f(g,c.u_intensity),u_matrix:new a.UniformMatrix4f(g,c.u_matrix)}},yp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_world:new a.Uniform2f(g,c.u_world),u_image:new a.Uniform1i(g,c.u_image),u_color_ramp:new a.Uniform1i(g,c.u_color_ramp),u_opacity:new a.Uniform1f(g,c.u_opacity)}},nf=function(g,c,x,d){return{u_matrix:g,u_extrude_scale:mo(c,1,x),u_intensity:d}},Gm=function(g,c,x,d){var w=a.create();a.ortho(w,0,g.width,g.height,0,0,1);var L=g.context.gl;return{u_matrix:w,u_world:[L.drawingBufferWidth,L.drawingBufferHeight],u_image:x,u_color_ramp:d,u_opacity:c.paint.get("heatmap-opacity")}},gp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_image:new a.Uniform1i(g,c.u_image),u_latrange:new a.Uniform2f(g,c.u_latrange),u_light:new a.Uniform2f(g,c.u_light),u_shadow:new a.UniformColor(g,c.u_shadow),u_highlight:new a.UniformColor(g,c.u_highlight),u_accent:new a.UniformColor(g,c.u_accent)}},_p=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_image:new a.Uniform1i(g,c.u_image),u_dimension:new a.Uniform2f(g,c.u_dimension),u_zoom:new a.Uniform1f(g,c.u_zoom),u_unpack:new a.Uniform4f(g,c.u_unpack)}},xp=function(g,c,x){var d=x.paint.get("hillshade-shadow-color"),w=x.paint.get("hillshade-highlight-color"),L=x.paint.get("hillshade-accent-color"),R=x.paint.get("hillshade-illumination-direction")*(Math.PI/180);x.paint.get("hillshade-illumination-anchor")==="viewport"&&(R-=g.transform.angle);var G=!g.options.moving;return{u_matrix:g.transform.calculatePosMatrix(c.tileID.toUnwrapped(),G),u_image:0,u_latrange:Dv(g,c.tileID),u_light:[x.paint.get("hillshade-exaggeration"),R],u_shadow:d,u_highlight:w,u_accent:L}},Pv=function(g,c){var x=c.stride,d=a.create();return a.ortho(d,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(d,d,[0,-a.EXTENT,0]),{u_matrix:d,u_image:1,u_dimension:[x,x],u_zoom:g.overscaledZ,u_unpack:c.getUnpackVector()}};function Dv(g,c){var x=Math.pow(2,c.canonical.z),d=c.canonical.y;return[new a.MercatorCoordinate(0,d/x).toLngLat().lat,new a.MercatorCoordinate(0,(d+1)/x).toLngLat().lat]}var _u=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels)}},El=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels),u_image:new a.Uniform1i(g,c.u_image),u_image_height:new a.Uniform1f(g,c.u_image_height)}},Kf=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_texsize:new a.Uniform2f(g,c.u_texsize),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_image:new a.Uniform1i(g,c.u_image),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels),u_scale:new a.Uniform3f(g,c.u_scale),u_fade:new a.Uniform1f(g,c.u_fade)}},zv=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_ratio:new a.Uniform1f(g,c.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,c.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,c.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,c.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,c.u_sdfgamma),u_image:new a.Uniform1i(g,c.u_image),u_tex_y_a:new a.Uniform1f(g,c.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,c.u_tex_y_b),u_mix:new a.Uniform1f(g,c.u_mix)}},Yc=function(g,c,x){var d=g.transform;return{u_matrix:xu(g,c,x),u_ratio:1/mo(c,1,d.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Wc=function(g,c,x,d){return a.extend(Yc(g,c,x),{u_image:0,u_image_height:d})},Xc=function(g,c,x,d){var w=g.transform,L=jc(c,w);return{u_matrix:xu(g,c,x),u_texsize:c.imageAtlasTexture.size,u_ratio:1/mo(c,1,w.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[L,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Ll=function(g,c,x,d,w){var L=g.transform,R=g.lineAtlas,G=jc(c,L),J=x.layout.get("line-cap")==="round",te=R.getDash(d.from,J),ue=R.getDash(d.to,J),we=te.width*w.fromScale,be=ue.width*w.toScale;return a.extend(Yc(g,c,x),{u_patternscale_a:[G/we,-te.height/2],u_patternscale_b:[G/be,-ue.height/2],u_sdfgamma:R.width/(Math.min(we,be)*256*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:ue.y,u_mix:w.t})};function jc(g,c){return 1/mo(g,1,c.tileZoom)}function xu(g,c,x){return g.translatePosMatrix(c.tileID.posMatrix,c,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}var of=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_tl_parent:new a.Uniform2f(g,c.u_tl_parent),u_scale_parent:new a.Uniform1f(g,c.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,c.u_buffer_scale),u_fade_t:new a.Uniform1f(g,c.u_fade_t),u_opacity:new a.Uniform1f(g,c.u_opacity),u_image0:new a.Uniform1i(g,c.u_image0),u_image1:new a.Uniform1i(g,c.u_image1),u_brightness_low:new a.Uniform1f(g,c.u_brightness_low),u_brightness_high:new a.Uniform1f(g,c.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,c.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,c.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,c.u_spin_weights)}},bp=function(g,c,x,d,w){return{u_matrix:g,u_tl_parent:c,u_scale_parent:x,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:Qf(w.paint.get("raster-saturation")),u_contrast_factor:di(w.paint.get("raster-contrast")),u_spin_weights:Jc(w.paint.get("raster-hue-rotate"))}};function Jc(g){g*=Math.PI/180;var c=Math.sin(g),x=Math.cos(g);return[(2*x+1)/3,(-Math.sqrt(3)*c-x+1)/3,(Math.sqrt(3)*c-x+1)/3]}function di(g){return g>0?1/(1-g):1+g}function Qf(g){return g>0?1-1/(1.001-g):-g}var wp=function(g,c){return{u_is_size_zoom_constant:new a.Uniform1i(g,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,c.u_size_t),u_size:new a.Uniform1f(g,c.u_size),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,c.u_pitch),u_rotate_symbol:new a.Uniform1i(g,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,c.u_fade_change),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,c.u_coord_matrix),u_is_text:new a.Uniform1i(g,c.u_is_text),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_texsize:new a.Uniform2f(g,c.u_texsize),u_texture:new a.Uniform1i(g,c.u_texture)}},Tp=function(g,c){return{u_is_size_zoom_constant:new a.Uniform1i(g,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,c.u_size_t),u_size:new a.Uniform1f(g,c.u_size),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,c.u_pitch),u_rotate_symbol:new a.Uniform1i(g,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,c.u_fade_change),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,c.u_coord_matrix),u_is_text:new a.Uniform1i(g,c.u_is_text),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_texsize:new a.Uniform2f(g,c.u_texsize),u_texture:new a.Uniform1i(g,c.u_texture),u_gamma_scale:new a.Uniform1f(g,c.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,c.u_is_halo)}},Pl=function(g,c){return{u_is_size_zoom_constant:new a.Uniform1i(g,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,c.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,c.u_size_t),u_size:new a.Uniform1f(g,c.u_size),u_camera_to_center_distance:new a.Uniform1f(g,c.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,c.u_pitch),u_rotate_symbol:new a.Uniform1i(g,c.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,c.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,c.u_fade_change),u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,c.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,c.u_coord_matrix),u_is_text:new a.Uniform1i(g,c.u_is_text),u_pitch_with_map:new a.Uniform1i(g,c.u_pitch_with_map),u_texsize:new a.Uniform2f(g,c.u_texsize),u_texsize_icon:new a.Uniform2f(g,c.u_texsize_icon),u_texture:new a.Uniform1i(g,c.u_texture),u_texture_icon:new a.Uniform1i(g,c.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,c.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,c.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,c.u_is_halo)}},Ap=function(g,c,x,d,w,L,R,G,J,te){var ue=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ue.cameraToCenterDistance,u_pitch:ue.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:ue.width/ue.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:L,u_label_plane_matrix:R,u_coord_matrix:G,u_is_text:+J,u_pitch_with_map:+d,u_texsize:te,u_texture:0}},Mp=function(g,c,x,d,w,L,R,G,J,te,ue){var we=w.transform;return a.extend(Ap(g,c,x,d,w,L,R,G,J,te),{u_gamma_scale:d?Math.cos(we._pitch)*we.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+ue})},Iv=function(g,c,x,d,w,L,R,G,J,te){return a.extend(Mp(g,c,x,d,w,L,R,G,!0,J,!0),{u_texsize_icon:te,u_texture_icon:1})},Sp=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_opacity:new a.Uniform1f(g,c.u_opacity),u_color:new a.UniformColor(g,c.u_color)}},Zm=function(g,c){return{u_matrix:new a.UniformMatrix4f(g,c.u_matrix),u_opacity:new a.Uniform1f(g,c.u_opacity),u_image:new a.Uniform1i(g,c.u_image),u_pattern_tl_a:new a.Uniform2f(g,c.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,c.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,c.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,c.u_pattern_br_b),u_texsize:new a.Uniform2f(g,c.u_texsize),u_mix:new a.Uniform1f(g,c.u_mix),u_pattern_size_a:new a.Uniform2f(g,c.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,c.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,c.u_scale_a),u_scale_b:new a.Uniform1f(g,c.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,c.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,c.u_tile_units_to_pixels)}},Dl=function(g,c,x){return{u_matrix:g,u_opacity:c,u_color:x}},bu=function(g,c,x,d,w,L){return a.extend(gu(d,L,x,w),{u_matrix:g,u_opacity:c})},$f={fillExtrusion:kv,fillExtrusionPattern:_n,fill:Ml,fillPattern:Sl,fillOutline:kl,fillOutlinePattern:Ks,circle:Um,collisionBox:Hm,collisionCircle:dp,debug:Ev,clippingMask:Zc,heatmap:Lv,heatmapTexture:yp,hillshade:gp,hillshadePrepare:_p,line:_u,lineGradient:El,linePattern:Kf,lineSDF:zv,raster:of,symbolIcon:wp,symbolSDF:Tp,symbolTextAndIcon:Pl,background:Sp,backgroundPattern:Zm},ks;function Cs(g,c,x,d,w,L,R){for(var G=g.context,J=G.gl,te=g.useProgram("collisionBox"),ue=[],we=0,be=0,Ie=0;Ie<d.length;Ie++){var Ze=d[Ie],Ge=c.getTile(Ze),Oe=Ge.getBucket(x);if(Oe){var Xe=Ze.posMatrix;(w[0]!==0||w[1]!==0)&&(Xe=g.translatePosMatrix(Ze.posMatrix,Ge,w,L));var ft=R?Oe.textCollisionBox:Oe.iconCollisionBox,Lt=Oe.collisionCircleArray;if(Lt.length>0){var It=a.create(),Xt=Xe;a.mul(It,Oe.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(It,It,Oe.placementViewportMatrix),ue.push({circleArray:Lt,circleOffset:be,transform:Xt,invTransform:It}),we+=Lt.length/4,be=we}ft&&te.draw(G,J.LINES,pa.disabled,Zr.disabled,g.colorModeForRenderPass(),Ce.disabled,pp(Xe,g.transform,Ge),x.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,null,g.transform.zoom,null,null,ft.collisionVertexBuffer)}}if(!(!R||!ue.length)){var er=g.useProgram("collisionCircle"),Ot=new a.StructArrayLayout2f1f2i16;Ot.resize(we*4),Ot._trim();for(var tr=0,fr=0,gr=ue;fr<gr.length;fr+=1)for(var Lr=gr[fr],Mr=0;Mr<Lr.circleArray.length/4;Mr++){var Xr=Mr*4,Fa=Lr.circleArray[Xr+0],xa=Lr.circleArray[Xr+1],qr=Lr.circleArray[Xr+2],Sa=Lr.circleArray[Xr+3];Ot.emplace(tr++,Fa,xa,qr,Sa,0),Ot.emplace(tr++,Fa,xa,qr,Sa,1),Ot.emplace(tr++,Fa,xa,qr,Sa,2),Ot.emplace(tr++,Fa,xa,qr,Sa,3)}(!ks||ks.length<we*2)&&(ks=Xo(we));for(var ia=G.createIndexBuffer(ks,!0),Za=G.createVertexBuffer(Ot,a.collisionCircleLayout.members,!0),Va=0,Ai=ue;Va<Ai.length;Va+=1){var Pa=Ai[Va],mi=Cv(Pa.transform,Pa.invTransform,g.transform);er.draw(G,J.TRIANGLES,pa.disabled,Zr.disabled,g.colorModeForRenderPass(),Ce.disabled,mi,x.id,Za,ia,a.SegmentVector.simpleSegment(0,Pa.circleOffset*2,Pa.circleArray.length,Pa.circleArray.length/2),null,g.transform.zoom,null,null,null)}Za.destroy(),ia.destroy()}}function Xo(g){var c=g*2,x=new a.StructArrayLayout3ui6;x.resize(c),x._trim();for(var d=0;d<c;d++){var w=d*6;x.uint16[w+0]=d*4+0,x.uint16[w+1]=d*4+1,x.uint16[w+2]=d*4+2,x.uint16[w+3]=d*4+2,x.uint16[w+4]=d*4+3,x.uint16[w+5]=d*4+0}return x}var sf=a.identity(new Float32Array(16));function Ym(g,c,x,d,w){if(g.renderPass==="translucent"){var L=Zr.disabled,R=g.colorModeForRenderPass(),G=x.layout.get("text-variable-anchor");G&&Rv(d,g,x,c,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),w),x.paint.get("icon-opacity").constantOr(1)!==0&&Fv(g,c,x,d,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),L,R),x.paint.get("text-opacity").constantOr(1)!==0&&Fv(g,c,x,d,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),L,R),c.map.showCollisionBoxes&&(Cs(g,c,x,d,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),Cs(g,c,x,d,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}}function lf(g,c,x,d,w,L){var R=a.getAnchorAlignment(g),G=R.horizontalAlign,J=R.verticalAlign,te=-(G-.5)*c,ue=-(J-.5)*x,we=a.evaluateVariableOffset(g,d);return new a.Point((te/w+we[0])*L,(ue/w+we[1])*L)}function Rv(g,c,x,d,w,L,R){for(var G=c.transform,J=w==="map",te=L==="map",ue=0,we=g;ue<we.length;ue+=1){var be=we[ue],Ie=d.getTile(be),Ze=Ie.getBucket(x);if(!(!Ze||!Ze.text||!Ze.text.segments.get().length)){var Ge=Ze.textSizeData,Oe=a.evaluateSizeForZoom(Ge,G.zoom),Xe=mo(Ie,1,c.transform.zoom),ft=Jn(be.posMatrix,te,J,c.transform,Xe),Lt=x.layout.get("icon-text-fit")!=="none"&&Ze.hasIconData();if(Oe){var It=Math.pow(2,G.zoom-Ie.tileID.overscaledZ);Wm(Ze,J,te,R,a.symbolSize,G,ft,be.posMatrix,It,Oe,Lt)}}}}function Wm(g,c,x,d,w,L,R,G,J,te,ue){var we=g.text.placedSymbolArray,be=g.text.dynamicLayoutVertexArray,Ie=g.icon.dynamicLayoutVertexArray,Ze={};be.clear();for(var Ge=0;Ge<we.length;Ge++){var Oe=we.get(Ge),Xe=g.allowVerticalPlacement&&!Oe.placedOrientation,ft=!Oe.hidden&&Oe.crossTileID&&!Xe?d[Oe.crossTileID]:null;if(!ft)Ju(Oe.numGlyphs,be);else{var Lt=new a.Point(Oe.anchorX,Oe.anchorY),It=Bi(Lt,x?G:R),Xt=vl(L.cameraToCenterDistance,It.signedDistanceFromCamera),er=w.evaluateSizeForFeature(g.textSizeData,te,Oe)*Xt/a.ONE_EM;x&&(er*=g.tilePixelRatio/J);for(var Ot=ft.width,tr=ft.height,fr=ft.anchor,gr=ft.textOffset,Lr=ft.textBoxScale,Mr=lf(fr,Ot,tr,gr,Lr,er),Xr=x?Bi(Lt.add(Mr),R).point:It.point.add(c?Mr.rotate(-L.angle):Mr),Fa=g.allowVerticalPlacement&&Oe.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,xa=0;xa<Oe.numGlyphs;xa++)a.addDynamicAttributes(be,Xr,Fa);ue&&Oe.associatedIconIndex>=0&&(Ze[Oe.associatedIconIndex]={shiftedAnchor:Xr,angle:Fa})}}if(ue){Ie.clear();for(var qr=g.icon.placedSymbolArray,Sa=0;Sa<qr.length;Sa++){var ia=qr.get(Sa);if(ia.hidden)Ju(ia.numGlyphs,Ie);else{var Za=Ze[Sa];if(!Za)Ju(ia.numGlyphs,Ie);else for(var Va=0;Va<ia.numGlyphs;Va++)a.addDynamicAttributes(Ie,Za.shiftedAnchor,Za.angle)}}g.icon.dynamicLayoutVertexBuffer.updateData(Ie)}g.text.dynamicLayoutVertexBuffer.updateData(be)}function vs(g,c,x){return x.iconsInText&&c?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Fv(g,c,x,d,w,L,R,G,J,te,ue,we){for(var be=g.context,Ie=be.gl,Ze=g.transform,Ge=G==="map",Oe=J==="map",Xe=Ge&&x.layout.get("symbol-placement")!=="point",ft=Ge&&!Oe&&!Xe,Lt=x.layout.get("symbol-sort-key").constantOr(1)!==void 0,It=!1,Xt=g.depthModeForSublayer(0,pa.ReadOnly),er=x.layout.get("text-variable-anchor"),Ot=[],tr=0,fr=d;tr<fr.length;tr+=1){var gr=fr[tr],Lr=c.getTile(gr),Mr=Lr.getBucket(x);if(Mr){var Xr=w?Mr.text:Mr.icon;if(!(!Xr||!Xr.segments.get().length)){var Fa=Xr.programConfigurations.get(x.id),xa=w||Mr.sdfIcons,qr=w?Mr.textSizeData:Mr.iconSizeData,Sa=Oe||Ze.pitch!==0,ia=g.useProgram(vs(xa,w,Mr),Fa),Za=a.evaluateSizeForZoom(qr,Ze.zoom),Va=void 0,Ai=[0,0],Pa=void 0,mi=void 0,na=null,Oa=void 0;if(w){if(Pa=Lr.glyphAtlasTexture,mi=Ie.LINEAR,Va=Lr.glyphAtlasTexture.size,Mr.iconsInText){Ai=Lr.imageAtlasTexture.size,na=Lr.imageAtlasTexture;var en=qr.kind==="composite"||qr.kind==="camera";Oa=Sa||g.options.rotating||g.options.zooming||en?Ie.LINEAR:Ie.NEAREST}}else{var In=x.layout.get("icon-size").constantOr(0)!==1||Mr.iconsNeedLinear;Pa=Lr.imageAtlasTexture,mi=xa||g.options.rotating||g.options.zooming||In||Sa?Ie.LINEAR:Ie.NEAREST,Va=Lr.imageAtlasTexture.size}var Ps=mo(Lr,1,g.transform.zoom),Ds=Jn(gr.posMatrix,Oe,Ge,g.transform,Ps),$s=cu(gr.posMatrix,Oe,Ge,g.transform,Ps),Nl=er&&Mr.hasTextData(),nc=x.layout.get("icon-text-fit")!=="none"&&Nl&&Mr.hasIconData();Xe&&Fc(Mr,gr.posMatrix,g,w,Ds,$s,Oe,te);var Bl=g.translatePosMatrix(gr.posMatrix,Lr,L,R),Po=Xe||w&&er||nc?sf:Ds,Ol=g.translatePosMatrix($s,Lr,L,R,!0),Ko=xa&&x.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Do=void 0;xa?Mr.iconsInText?Do=Iv(qr.kind,Za,ft,Oe,g,Bl,Po,Ol,Va,Ai):Do=Mp(qr.kind,Za,ft,Oe,g,Bl,Po,Ol,w,Va,!0):Do=Ap(qr.kind,Za,ft,Oe,g,Bl,Po,Ol,w,Va);var el={program:ia,buffers:Xr,uniformValues:Do,atlasTexture:Pa,atlasTextureIcon:na,atlasInterpolation:mi,atlasInterpolationIcon:Oa,isSDF:xa,hasHalo:Ko};if(Lt&&Mr.canOverlap){It=!0;for(var Su=Xr.segments.get(),tl=0,Rp=Su;tl<Rp.length;tl+=1){var fh=Rp[tl];Ot.push({segments:new a.SegmentVector([fh]),sortKey:fh.sortKey,state:el})}}else Ot.push({segments:Xr.segments,sortKey:0,state:el})}}}It&&Ot.sort(function(qp,Np){return qp.sortKey-Np.sortKey});for(var Vn=0,Fp=Ot;Vn<Fp.length;Vn+=1){var Yv=Fp[Vn],xo=Yv.state;if(be.activeTexture.set(Ie.TEXTURE0),xo.atlasTexture.bind(xo.atlasInterpolation,Ie.CLAMP_TO_EDGE),xo.atlasTextureIcon&&(be.activeTexture.set(Ie.TEXTURE1),xo.atlasTextureIcon&&xo.atlasTextureIcon.bind(xo.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),xo.isSDF){var ch=xo.uniformValues;xo.hasHalo&&(ch.u_is_halo=1,uf(xo.buffers,Yv.segments,x,g,xo.program,Xt,ue,we,ch)),ch.u_is_halo=0}uf(xo.buffers,Yv.segments,x,g,xo.program,Xt,ue,we,xo.uniformValues)}}function uf(g,c,x,d,w,L,R,G,J){var te=d.context,ue=te.gl;w.draw(te,ue.TRIANGLES,L,R,G,Ce.disabled,J,x.id,g.layoutVertexBuffer,g.indexBuffer,c,x.paint,d.transform.zoom,g.programConfigurations.get(x.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Kc(g,c,x,d){if(g.renderPass==="translucent"){var w=x.paint.get("circle-opacity"),L=x.paint.get("circle-stroke-width"),R=x.paint.get("circle-stroke-opacity"),G=x.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(w.constantOr(1)===0&&(L.constantOr(1)===0||R.constantOr(1)===0))){for(var J=g.context,te=J.gl,ue=g.depthModeForSublayer(0,pa.ReadOnly),we=Zr.disabled,be=g.colorModeForRenderPass(),Ie=[],Ze=0;Ze<d.length;Ze++){var Ge=d[Ze],Oe=c.getTile(Ge),Xe=Oe.getBucket(x);if(Xe){var ft=Xe.programConfigurations.get(x.id),Lt=g.useProgram("circle",ft),It=Xe.layoutVertexBuffer,Xt=Xe.indexBuffer,er=Vm(g,Ge,Oe,x),Ot={programConfiguration:ft,program:Lt,layoutVertexBuffer:It,indexBuffer:Xt,uniformValues:er};if(G)for(var tr=Xe.segments.get(),fr=0,gr=tr;fr<gr.length;fr+=1){var Lr=gr[fr];Ie.push({segments:new a.SegmentVector([Lr]),sortKey:Lr.sortKey,state:Ot})}else Ie.push({segments:Xe.segments,sortKey:0,state:Ot})}}G&&Ie.sort(function(Pa,mi){return Pa.sortKey-mi.sortKey});for(var Mr=0,Xr=Ie;Mr<Xr.length;Mr+=1){var Fa=Xr[Mr],xa=Fa.state,qr=xa.programConfiguration,Sa=xa.program,ia=xa.layoutVertexBuffer,Za=xa.indexBuffer,Va=xa.uniformValues,Ai=Fa.segments;Sa.draw(J,te.TRIANGLES,ue,we,be,Ce.disabled,Va,x.id,ia,Za,Ai,x.paint,g.transform.zoom,qr)}}}}function wu(g,c,x,d){if(x.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){var w=g.context,L=w.gl,R=Zr.disabled,G=new ee([L.ONE,L.ONE],a.Color.transparent,[!0,!0,!0,!0]);Xm(w,g,x),w.clear({color:a.Color.transparent});for(var J=0;J<d.length;J++){var te=d[J];if(!c.hasRenderableParent(te)){var ue=c.getTile(te),we=ue.getBucket(x);if(we){var be=we.programConfigurations.get(x.id),Ie=g.useProgram("heatmap",be),Ze=g.transform,Ge=Ze.zoom;Ie.draw(w,L.TRIANGLES,pa.disabled,R,G,Ce.disabled,nf(te.posMatrix,ue,Ge,x.paint.get("heatmap-intensity")),x.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,x.paint,g.transform.zoom,be)}}}w.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),Qc(g,x))}function Xm(g,c,x){var d=g.gl;g.activeTexture.set(d.TEXTURE1),g.viewport.set([0,0,c.width/4,c.height/4]);var w=x.heatmapFbo;if(w)d.bindTexture(d.TEXTURE_2D,w.colorAttachment.get()),g.bindFramebuffer.set(w.framebuffer);else{var L=d.createTexture();d.bindTexture(d.TEXTURE_2D,L),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),w=x.heatmapFbo=g.createFramebuffer(c.width/4,c.height/4,!1),jm(g,c,L,w)}}function jm(g,c,x,d){var w=g.gl,L=g.extRenderToTextureHalfFloat?g.extTextureHalfFloat.HALF_FLOAT_OES:w.UNSIGNED_BYTE;w.texImage2D(w.TEXTURE_2D,0,w.RGBA,c.width/4,c.height/4,0,w.RGBA,L,null),d.colorAttachment.set(x)}function Qc(g,c){var x=g.context,d=x.gl,w=c.heatmapFbo;if(w){x.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,w.colorAttachment.get()),x.activeTexture.set(d.TEXTURE1);var L=c.colorRampTexture;L||(L=c.colorRampTexture=new a.Texture(x,c.colorRamp,d.RGBA)),L.bind(d.LINEAR,d.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(x,d.TRIANGLES,pa.disabled,Zr.disabled,g.colorModeForRenderPass(),Ce.disabled,Gm(g,c,0,1),c.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,c.paint,g.transform.zoom)}}function go(g,c,x,d){if(g.renderPass==="translucent"){var w=x.paint.get("line-opacity"),L=x.paint.get("line-width");if(!(w.constantOr(1)===0||L.constantOr(1)===0))for(var R=g.depthModeForSublayer(0,pa.ReadOnly),G=g.colorModeForRenderPass(),J=x.paint.get("line-dasharray"),te=x.paint.get("line-pattern"),ue=te.constantOr(1),we=x.paint.get("line-gradient"),be=x.getCrossfadeParameters(),Ie=ue?"linePattern":J?"lineSDF":we?"lineGradient":"line",Ze=g.context,Ge=Ze.gl,Oe=!0,Xe=0,ft=d;Xe<ft.length;Xe+=1){var Lt=ft[Xe],It=c.getTile(Lt);if(!(ue&&!It.patternsLoaded())){var Xt=It.getBucket(x);if(Xt){var er=Xt.programConfigurations.get(x.id),Ot=g.context.program.get(),tr=g.useProgram(Ie,er),fr=Oe||tr.program!==Ot,gr=te.constantOr(null);if(gr&&It.imageAtlas){var Lr=It.imageAtlas,Mr=Lr.patternPositions[gr.to.toString()],Xr=Lr.patternPositions[gr.from.toString()];Mr&&Xr&&er.setConstantPatternPositions(Mr,Xr)}var Fa=ue?Xc(g,It,x,be):J?Ll(g,It,x,J,be):we?Wc(g,It,x,Xt.lineClipsArray.length):Yc(g,It,x);if(ue)Ze.activeTexture.set(Ge.TEXTURE0),It.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),er.updatePaintBuffers(be);else if(J&&(fr||g.lineAtlas.dirty))Ze.activeTexture.set(Ge.TEXTURE0),g.lineAtlas.bind(Ze);else if(we){var xa=Xt.gradients[x.id],qr=xa.texture;if(x.gradientVersion!==xa.version){var Sa=256;if(x.stepInterpolant){var ia=c.getSource().maxzoom,Za=Lt.canonical.z===ia?Math.ceil(1<<g.transform.maxZoom-Lt.canonical.z):1,Va=Xt.maxLineLength/a.EXTENT,Ai=1024,Pa=Va*Ai*Za;Sa=a.clamp(a.nextPowerOfTwo(Pa),256,Ze.maxTextureSize)}xa.gradient=a.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:Sa,image:xa.gradient||void 0,clips:Xt.lineClipsArray}),xa.texture?xa.texture.update(xa.gradient):xa.texture=new a.Texture(Ze,xa.gradient,Ge.RGBA),xa.version=x.gradientVersion,qr=xa.texture}Ze.activeTexture.set(Ge.TEXTURE0),qr.bind(x.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}tr.draw(Ze,Ge.TRIANGLES,R,g.stencilModeForClipping(Lt),G,Ce.disabled,Fa,x.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,x.paint,g.transform.zoom,er,Xt.layoutVertexBuffer2),Oe=!1}}}}}function kp(g,c,x,d){var w=x.paint.get("fill-color"),L=x.paint.get("fill-opacity");if(L.constantOr(1)!==0){var R=g.colorModeForRenderPass(),G=x.paint.get("fill-pattern"),J=g.opaquePassEnabledForLayer()&&!G.constantOr(1)&&w.constantOr(a.Color.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===J){var te=g.depthModeForSublayer(1,g.renderPass==="opaque"?pa.ReadWrite:pa.ReadOnly);ff(g,c,x,d,te,R,!1)}if(g.renderPass==="translucent"&&x.paint.get("fill-antialias")){var ue=g.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,pa.ReadOnly);ff(g,c,x,d,ue,R,!0)}}}function ff(g,c,x,d,w,L,R){var G=g.context.gl,J=x.paint.get("fill-pattern"),te=J&&J.constantOr(1),ue=x.getCrossfadeParameters(),we,be,Ie,Ze,Ge;R?(be=te&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=G.LINES):(be=te?"fillPattern":"fill",we=G.TRIANGLES);for(var Oe=0,Xe=d;Oe<Xe.length;Oe+=1){var ft=Xe[Oe],Lt=c.getTile(ft);if(!(te&&!Lt.patternsLoaded())){var It=Lt.getBucket(x);if(It){var Xt=It.programConfigurations.get(x.id),er=g.useProgram(be,Xt);te&&(g.context.activeTexture.set(G.TEXTURE0),Lt.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Xt.updatePaintBuffers(ue));var Ot=J.constantOr(null);if(Ot&&Lt.imageAtlas){var tr=Lt.imageAtlas,fr=tr.patternPositions[Ot.to.toString()],gr=tr.patternPositions[Ot.from.toString()];fr&&gr&&Xt.setConstantPatternPositions(fr,gr)}var Lr=g.translatePosMatrix(ft.posMatrix,Lt,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(!R)Ze=It.indexBuffer,Ge=It.segments,Ie=te?Ss(Lr,g,ue,Lt):Ms(Lr);else{Ze=It.indexBuffer2,Ge=It.segments2;var Mr=[G.drawingBufferWidth,G.drawingBufferHeight];Ie=be==="fillOutlinePattern"&&te?vp(Lr,g,ue,Lt,Mr):Cl(Lr,Mr)}er.draw(g.context,we,w,g.stencilModeForClipping(ft),L,Ce.disabled,Ie,x.id,It.layoutVertexBuffer,Ze,Ge,x.paint,g.transform.zoom,Xt)}}}}function zl(g,c,x,d){var w=x.paint.get("fill-extrusion-opacity");if(w!==0&&g.renderPass==="translucent"){var L=new pa(g.context.gl.LEQUAL,pa.ReadWrite,g.depthRangeFor3D);if(w===1&&!x.paint.get("fill-extrusion-pattern").constantOr(1)){var R=g.colorModeForRenderPass();cf(g,c,x,d,L,Zr.disabled,R)}else cf(g,c,x,d,L,Zr.disabled,ee.disabled),cf(g,c,x,d,L,g.stencilModeFor3D(),g.colorModeForRenderPass())}}function cf(g,c,x,d,w,L,R){for(var G=g.context,J=G.gl,te=x.paint.get("fill-extrusion-pattern"),ue=te.constantOr(1),we=x.getCrossfadeParameters(),be=x.paint.get("fill-extrusion-opacity"),Ie=0,Ze=d;Ie<Ze.length;Ie+=1){var Ge=Ze[Ie],Oe=c.getTile(Ge),Xe=Oe.getBucket(x);if(Xe){var ft=Xe.programConfigurations.get(x.id),Lt=g.useProgram(ue?"fillExtrusionPattern":"fillExtrusion",ft);ue&&(g.context.activeTexture.set(J.TEXTURE0),Oe.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),ft.updatePaintBuffers(we));var It=te.constantOr(null);if(It&&Oe.imageAtlas){var Xt=Oe.imageAtlas,er=Xt.patternPositions[It.to.toString()],Ot=Xt.patternPositions[It.from.toString()];er&&Ot&&ft.setConstantPatternPositions(er,Ot)}var tr=g.translatePosMatrix(Ge.posMatrix,Oe,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),fr=x.paint.get("fill-extrusion-vertical-gradient"),gr=ue?Js(tr,g,fr,be,Ge,we,Oe):jf(tr,g,fr,be);Lt.draw(G,G.gl.TRIANGLES,w,L,R,Ce.backCCW,gr,x.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,x.paint,g.transform.zoom,ft)}}}function hf(g,c,x,d){if(!(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")){for(var w=g.context,L=g.depthModeForSublayer(0,pa.ReadOnly),R=g.colorModeForRenderPass(),G=g.renderPass==="translucent"?g.stencilConfigForOverlap(d):[{},d],J=G[0],te=G[1],ue=0,we=te;ue<we.length;ue+=1){var be=we[ue],Ie=c.getTile(be);Ie.needsHillshadePrepare&&g.renderPass==="offscreen"?Jm(g,Ie,x,L,Zr.disabled,R):g.renderPass==="translucent"&&qv(g,Ie,x,L,J[be.overscaledZ],R)}w.viewport.set([0,0,g.width,g.height])}}function qv(g,c,x,d,w,L){var R=g.context,G=R.gl,J=c.fbo;if(J){var te=g.useProgram("hillshade");R.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,J.colorAttachment.get());var ue=xp(g,c,x);te.draw(R,G.TRIANGLES,d,w,L,Ce.disabled,ue,x.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function Jm(g,c,x,d,w,L){var R=g.context,G=R.gl,J=c.dem;if(J&&J.data){var te=J.dim,ue=J.stride,we=J.getPixels();if(R.activeTexture.set(G.TEXTURE1),R.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||g.getTileTexture(ue),c.demTexture){var be=c.demTexture;be.update(we,{premultiply:!1}),be.bind(G.NEAREST,G.CLAMP_TO_EDGE)}else c.demTexture=new a.Texture(R,we,G.RGBA,{premultiply:!1}),c.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);R.activeTexture.set(G.TEXTURE0);var Ie=c.fbo;if(!Ie){var Ze=new a.Texture(R,{width:te,height:te,data:null},G.RGBA);Ze.bind(G.LINEAR,G.CLAMP_TO_EDGE),Ie=c.fbo=R.createFramebuffer(te,te,!0),Ie.colorAttachment.set(Ze.texture)}R.bindFramebuffer.set(Ie.framebuffer),R.viewport.set([0,0,te,te]),g.useProgram("hillshadePrepare").draw(R,G.TRIANGLES,d,w,L,Ce.disabled,Pv(c.tileID,J),x.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function Cp(g,c,x,d){if(g.renderPass==="translucent"&&x.paint.get("raster-opacity")!==0&&d.length)for(var w=g.context,L=w.gl,R=c.getSource(),G=g.useProgram("raster"),J=g.colorModeForRenderPass(),te=R instanceof lt?[{},d]:g.stencilConfigForOverlap(d),ue=te[0],we=te[1],be=we[we.length-1].overscaledZ,Ie=!g.options.moving,Ze=0,Ge=we;Ze<Ge.length;Ze+=1){var Oe=Ge[Ze],Xe=g.depthModeForSublayer(Oe.overscaledZ-be,x.paint.get("raster-opacity")===1?pa.ReadWrite:pa.ReadOnly,L.LESS),ft=c.getTile(Oe),Lt=g.transform.calculatePosMatrix(Oe.toUnwrapped(),Ie);ft.registerFadeDuration(x.paint.get("raster-fade-duration"));var It=c.findLoadedParent(Oe,0),Xt=Nv(ft,It,c,x,g.transform),er=void 0,Ot=void 0,tr=x.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;w.activeTexture.set(L.TEXTURE0),ft.texture.bind(tr,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(L.TEXTURE1),It?(It.texture.bind(tr,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),er=Math.pow(2,It.tileID.overscaledZ-ft.tileID.overscaledZ),Ot=[ft.tileID.canonical.x*er%1,ft.tileID.canonical.y*er%1]):ft.texture.bind(tr,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);var fr=bp(Lt,Ot||[0,0],er||1,Xt,x);R instanceof lt?G.draw(w,L.TRIANGLES,Xe,Zr.disabled,J,Ce.disabled,fr,x.id,R.boundsBuffer,g.quadTriangleIndexBuffer,R.boundsSegments):G.draw(w,L.TRIANGLES,Xe,ue[Oe.overscaledZ],J,Ce.disabled,fr,x.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}}function Nv(g,c,x,d,w){var L=d.paint.get("raster-fade-duration");if(L>0){var R=a.browser.now(),G=(R-g.timeAdded)/L,J=c?(R-c.timeAdded)/L:-1,te=x.getSource(),ue=w.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),we=!c||Math.abs(c.tileID.overscaledZ-ue)>Math.abs(g.tileID.overscaledZ-ue),be=we&&g.refreshedUponExpiration?1:a.clamp(we?G:1-J,0,1);return g.refreshedUponExpiration&&G>=1&&(g.refreshedUponExpiration=!1),c?{opacity:1,mix:1-be}:{opacity:be,mix:0}}else return{opacity:1,mix:0}}function ec(g,c,x){var d=x.paint.get("background-color"),w=x.paint.get("background-opacity");if(w!==0){var L=g.context,R=L.gl,G=g.transform,J=G.tileSize,te=x.paint.get("background-pattern");if(!g.isPatternMissing(te)){var ue=!te&&d.a===1&&w===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass===ue){var we=Zr.disabled,be=g.depthModeForSublayer(0,ue==="opaque"?pa.ReadWrite:pa.ReadOnly),Ie=g.colorModeForRenderPass(),Ze=g.useProgram(te?"backgroundPattern":"background"),Ge=G.coveringTiles({tileSize:J});te&&(L.activeTexture.set(R.TEXTURE0),g.imageManager.bind(g.context));for(var Oe=x.getCrossfadeParameters(),Xe=0,ft=Ge;Xe<ft.length;Xe+=1){var Lt=ft[Xe],It=g.transform.calculatePosMatrix(Lt.toUnwrapped()),Xt=te?bu(It,w,g,te,{tileID:Lt,tileSize:J},Oe):Dl(It,w,d);Ze.draw(L,R.TRIANGLES,be,we,Ie,Ce.disabled,Xt,x.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}}}}var $c=new a.Color(1,0,0,1),Bv=new a.Color(0,1,0,1),Ep=new a.Color(0,0,1,1),Ov=new a.Color(1,0,1,1),Lp=new a.Color(0,1,1,1);function Pp(g){var c=g.transform.padding,x=3;eh(g,g.transform.height-(c.top||0),x,$c),eh(g,c.bottom||0,x,Bv),th(g,c.left||0,x,Ep),th(g,g.transform.width-(c.right||0),x,Ov);var d=g.transform.centerPoint;vf(g,d.x,g.transform.height-d.y,Lp)}function vf(g,c,x,d){var w=20,L=2;Tu(g,c-L/2,x-w/2,L,w,d),Tu(g,c-w/2,x-L/2,w,L,d)}function eh(g,c,x,d){Tu(g,0,c+x/2,g.transform.width,x,d)}function th(g,c,x,d){Tu(g,c-x/2,0,x,g.transform.height,d)}function Tu(g,c,x,d,w,L){var R=g.context,G=R.gl;G.enable(G.SCISSOR_TEST),G.scissor(c*a.browser.devicePixelRatio,x*a.browser.devicePixelRatio,d*a.browser.devicePixelRatio,w*a.browser.devicePixelRatio),R.clear({color:L}),G.disable(G.SCISSOR_TEST)}function Uv(g,c,x){for(var d=0;d<x.length;d++)rh(g,c,x[d])}function rh(g,c,x){var d=g.context,w=d.gl,L=x.posMatrix,R=g.useProgram("debug"),G=pa.disabled,J=Zr.disabled,te=g.colorModeForRenderPass(),ue="$debug";d.activeTexture.set(w.TEXTURE0),g.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),R.draw(d,w.LINE_STRIP,G,J,te,Ce.disabled,Jf(L,a.Color.red),ue,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments);var we=c.getTileByID(x.key).latestRawTileData,be=we&&we.byteLength||0,Ie=Math.floor(be/1024),Ze=c.getTile(x).tileSize,Ge=512/Math.min(Ze,512)*(x.overscaledZ/g.transform.zoom)*.5,Oe=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(Oe+=" => "+x.overscaledZ);var Xe=Oe+" "+Ie+"kb";Dp(g,Xe),R.draw(d,w.TRIANGLES,G,J,ee.alphaBlended,Ce.disabled,Jf(L,a.Color.transparent,Ge),ue,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments)}function Dp(g,c){g.initDebugOverlayCanvas();var x=g.debugOverlayCanvas,d=g.context.gl,w=g.debugOverlayCanvas.getContext("2d");w.clearRect(0,0,x.width,x.height),w.shadowColor="white",w.shadowBlur=2,w.lineWidth=1.5,w.strokeStyle="white",w.textBaseline="top",w.font="bold 36px Open Sans, sans-serif",w.fillText(c,5,5),w.strokeText(c,5,5),g.debugOverlayTexture.update(x),g.debugOverlayTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}function df(g,c,x){var d=g.context,w=x.implementation;if(g.renderPass==="offscreen"){var L=w.prerender;L&&(g.setCustomLayerDefaults(),d.setColorMode(g.colorModeForRenderPass()),L.call(w,d.gl,g.transform.customLayerMatrix()),d.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),d.setColorMode(g.colorModeForRenderPass()),d.setStencilMode(Zr.disabled);var R=w.renderingMode==="3d"?new pa(g.context.gl.LEQUAL,pa.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,pa.ReadOnly);d.setDepthMode(R),w.render(d.gl,g.transform.customLayerMatrix()),d.setDirty(),g.setBaseState(),d.bindFramebuffer.set(null)}}var li={symbol:Ym,circle:Kc,heatmap:wu,line:go,fill:kp,"fill-extrusion":zl,hillshade:hf,raster:Cp,background:ec,debug:Uv,custom:df},Ci=function(c,x){this.context=new Ne(c),this.transform=x,this._tileTextures={},this.setup(),this.numSublayers=$e.maxUnderzooming+$e.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pu,this.gpuTimers={}};Ci.prototype.resize=function(c,x){if(this.width=c*a.browser.devicePixelRatio,this.height=x*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var d=0,w=this.style._order;d<w.length;d+=1){var L=w[d];this.style._layers[L].resize()}},Ci.prototype.setup=function(){var c=this.context,x=new a.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(a.EXTENT,0),x.emplaceBack(0,a.EXTENT),x.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(x,fs.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var d=new a.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(a.EXTENT,0),d.emplaceBack(0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=c.createVertexBuffer(d,fs.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var w=new a.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(a.EXTENT,0,a.EXTENT,0),w.emplaceBack(0,a.EXTENT,0,a.EXTENT),w.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=c.createVertexBuffer(w,pt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var L=new a.StructArrayLayout2i4;L.emplaceBack(0,0),L.emplaceBack(1,0),L.emplaceBack(0,1),L.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(L,fs.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var R=new a.StructArrayLayout1ui2;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(R);var G=new a.StructArrayLayout3ui6;G.emplaceBack(0,1,2),G.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(G),this.emptyTexture=new a.Texture(c,{width:1,height:1,data:new Uint8Array([0,0,0,0])},c.gl.RGBA);var J=this.context.gl;this.stencilClearMode=new Zr({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO)},Ci.prototype.clearStencil=function(){var c=this.context,x=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var d=a.create();a.ortho(d,0,this.width,this.height,0,0,1),a.scale(d,d,[x.drawingBufferWidth,x.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,x.TRIANGLES,pa.disabled,this.stencilClearMode,ee.disabled,Ce.disabled,mp(d),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ci.prototype._renderTileClippingMasks=function(c,x){if(!(this.currentStencilSource===c.source||!c.isTileClipped()||!x||!x.length)){this.currentStencilSource=c.source;var d=this.context,w=d.gl;this.nextStencilID+x.length>256&&this.clearStencil(),d.setColorMode(ee.disabled),d.setDepthMode(pa.disabled);var L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var R=0,G=x;R<G.length;R+=1){var J=G[R],te=this._tileClippingMaskIDs[J.key]=this.nextStencilID++;L.draw(d,w.TRIANGLES,pa.disabled,new Zr({func:w.ALWAYS,mask:0},te,255,w.KEEP,w.KEEP,w.REPLACE),ee.disabled,Ce.disabled,mp(J.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ci.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var c=this.nextStencilID++,x=this.context.gl;return new Zr({func:x.NOTEQUAL,mask:255},c,255,x.KEEP,x.KEEP,x.REPLACE)},Ci.prototype.stencilModeForClipping=function(c){var x=this.context.gl;return new Zr({func:x.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,x.KEEP,x.KEEP,x.REPLACE)},Ci.prototype.stencilConfigForOverlap=function(c){var x,d=this.context.gl,w=c.sort(function(te,ue){return ue.overscaledZ-te.overscaledZ}),L=w[w.length-1].overscaledZ,R=w[0].overscaledZ-L+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();for(var G={},J=0;J<R;J++)G[J+L]=new Zr({func:d.GEQUAL,mask:255},J+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=R,[G,w]}return[(x={},x[L]=Zr.disabled,x),w]},Ci.prototype.colorModeForRenderPass=function(){var c=this.context.gl;if(this._showOverdrawInspector){var x=8,d=1/x;return new ee([c.CONSTANT_COLOR,c.ONE],new a.Color(d,d,d,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?ee.unblended:ee.alphaBlended},Ci.prototype.depthModeForSublayer=function(c,x,d){if(!this.opaquePassEnabledForLayer())return pa.disabled;var w=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new pa(d||this.context.gl.LEQUAL,x,[w,w])},Ci.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ci.prototype.render=function(c,x){var d=this;this.style=c,this.options=x,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var w=this.style._order,L=this.style.sourceCaches;for(var R in L){var G=L[R];G.used&&G.prepare(this.context)}var J={},te={},ue={};for(var we in L){var be=L[we];J[we]=be.getVisibleCoordinates(),te[we]=J[we].slice().reverse(),ue[we]=be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ie=0;Ie<w.length;Ie++){var Ze=w[Ie];if(this.style._layers[Ze].is3D()){this.opaquePassCutoff=Ie;break}}this.renderPass="offscreen";for(var Ge=0,Oe=w;Ge<Oe.length;Ge+=1){var Xe=Oe[Ge],ft=this.style._layers[Xe];if(!(!ft.hasOffscreenPass()||ft.isHidden(this.transform.zoom))){var Lt=te[ft.source];ft.type!=="custom"&&!Lt.length||this.renderLayer(this,L[ft.source],ft,Lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:x.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=x.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){var It=this.style._layers[w[this.currentLayer]],Xt=L[It.source],er=J[It.source];this._renderTileClippingMasks(It,er),this.renderLayer(this,Xt,It,er)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){var Ot=this.style._layers[w[this.currentLayer]],tr=L[Ot.source],fr=(Ot.type==="symbol"?ue:te)[Ot.source];this._renderTileClippingMasks(Ot,J[Ot.source]),this.renderLayer(this,tr,Ot,fr)}if(this.options.showTileBoundaries){var gr,Lr,Mr=a.values(this.style._layers);Mr.forEach(function(Xr){Xr.source&&!Xr.isHidden(d.transform.zoom)&&(Xr.source!==(Lr&&Lr.id)&&(Lr=d.style.sourceCaches[Xr.source]),(!gr||gr.getSource().maxzoom<Lr.getSource().maxzoom)&&(gr=Lr))}),gr&&li.debug(this,gr,gr.getVisibleCoordinates())}this.options.showPadding&&Pp(this),this.context.setDefault()},Ci.prototype.renderLayer=function(c,x,d,w){d.isHidden(this.transform.zoom)||d.type!=="background"&&d.type!=="custom"&&!w.length||(this.id=d.id,this.gpuTimingStart(d),li[d.type](c,x,d,w,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ci.prototype.gpuTimingStart=function(c){if(this.options.gpuTiming){var x=this.context.extTimerQuery,d=this.gpuTimers[c.id];d||(d=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:x.createQueryEXT()}),d.calls++,x.beginQueryEXT(x.TIME_ELAPSED_EXT,d.query)}},Ci.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}},Ci.prototype.collectGpuTimers=function(){var c=this.gpuTimers;return this.gpuTimers={},c},Ci.prototype.queryGpuTimers=function(c){var x={};for(var d in c){var w=c[d],L=this.context.extTimerQuery,R=L.getQueryObjectEXT(w.query,L.QUERY_RESULT_EXT)/(1e3*1e3);L.deleteQueryEXT(w.query),x[d]=R}return x},Ci.prototype.translatePosMatrix=function(c,x,d,w,L){if(!d[0]&&!d[1])return c;var R=L?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(R){var G=Math.sin(R),J=Math.cos(R);d=[d[0]*J-d[1]*G,d[0]*G+d[1]*J]}var te=[L?d[0]:mo(x,d[0],this.transform.zoom),L?d[1]:mo(x,d[1],this.transform.zoom),0],ue=new Float32Array(16);return a.translate(ue,c,te),ue},Ci.prototype.saveTileTexture=function(c){var x=this._tileTextures[c.size[0]];x?x.push(c):this._tileTextures[c.size[0]]=[c]},Ci.prototype.getTileTexture=function(c){var x=this._tileTextures[c];return x&&x.length>0?x.pop():null},Ci.prototype.isPatternMissing=function(c){if(!c)return!1;if(!c.from||!c.to)return!0;var x=this.imageManager.getPattern(c.from.toString()),d=this.imageManager.getPattern(c.to.toString());return!x||!d},Ci.prototype.useProgram=function(c,x){this.cache=this.cache||{};var d=""+c+(x?x.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[d]||(this.cache[d]=new hp(this.context,c,Om[c],x,$f[c],this._showOverdrawInspector)),this.cache[d]},Ci.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ci.prototype.setBaseState=function(){var c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)},Ci.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var c=this.context.gl;this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,c.RGBA)}},Ci.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var so=function(c,x){this.points=c,this.planes=x};so.fromInvProjectionMatrix=function(c,x,d){var w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],L=Math.pow(2,d),R=w.map(function(te){return a.transformMat4([],te,c)}).map(function(te){return a.scale$1([],te,1/te[3]/x*L)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],J=G.map(function(te){var ue=a.sub([],R[te[0]],R[te[1]]),we=a.sub([],R[te[2]],R[te[1]]),be=a.normalize([],a.cross([],ue,we)),Ie=-a.dot(be,R[te[1]]);return be.concat(Ie)});return new so(R,J)};var Es=function(c,x){this.min=c,this.max=x,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Es.prototype.quadrant=function(c){for(var x=[c%2===0,c<2],d=a.clone$2(this.min),w=a.clone$2(this.max),L=0;L<x.length;L++)d[L]=x[L]?this.min[L]:this.center[L],w[L]=x[L]?this.center[L]:this.max[L];return w[2]=this.max[2],new Es(d,w)},Es.prototype.distanceX=function(c){var x=Math.max(Math.min(this.max[0],c[0]),this.min[0]);return x-c[0]},Es.prototype.distanceY=function(c){var x=Math.max(Math.min(this.max[1],c[1]),this.min[1]);return x-c[1]},Es.prototype.intersects=function(c){for(var x=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],d=!0,w=0;w<c.planes.length;w++){for(var L=c.planes[w],R=0,G=0;G<x.length;G++)R+=a.dot$1(L,x[G])>=0;if(R===0)return 0;R!==x.length&&(d=!1)}if(d)return 2;for(var J=0;J<3;J++){for(var te=Number.MAX_VALUE,ue=-Number.MAX_VALUE,we=0;we<c.points.length;we++){var be=c.points[we][J]-this.min[J];te=Math.min(te,be),ue=Math.max(ue,be)}if(ue<0||te>this.max[J]-this.min[J])return 0}return 1};var _o=function(c,x,d,w){if(c===void 0&&(c=0),x===void 0&&(x=0),d===void 0&&(d=0),w===void 0&&(w=0),isNaN(c)||c<0||isNaN(x)||x<0||isNaN(d)||d<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=x,this.left=d,this.right=w};_o.prototype.interpolate=function(c,x,d){return x.top!=null&&c.top!=null&&(this.top=a.number(c.top,x.top,d)),x.bottom!=null&&c.bottom!=null&&(this.bottom=a.number(c.bottom,x.bottom,d)),x.left!=null&&c.left!=null&&(this.left=a.number(c.left,x.left,d)),x.right!=null&&c.right!=null&&(this.right=a.number(c.right,x.right,d)),this},_o.prototype.getCenter=function(c,x){var d=a.clamp((this.left+c-this.right)/2,0,c),w=a.clamp((this.top+x-this.bottom)/2,0,x);return new a.Point(d,w)},_o.prototype.equals=function(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right},_o.prototype.clone=function(){return new _o(this.top,this.bottom,this.left,this.right)},_o.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ti=function(c,x,d,w,L){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=L===void 0?!0:L,this._minZoom=c||0,this._maxZoom=x||22,this._minPitch=d==null?0:d,this._maxPitch=w==null?60:w,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _o,this._posMatrixCache={},this._alignedPosMatrixCache={}},fi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ti.prototype.clone=function(){var c=new ti(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.tileSize=this.tileSize,c.latRange=this.latRange,c.width=this.width,c.height=this.height,c._center=this._center,c.zoom=this.zoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._calcMatrices(),c},fi.minZoom.get=function(){return this._minZoom},fi.minZoom.set=function(g){this._minZoom!==g&&(this._minZoom=g,this.zoom=Math.max(this.zoom,g))},fi.maxZoom.get=function(){return this._maxZoom},fi.maxZoom.set=function(g){this._maxZoom!==g&&(this._maxZoom=g,this.zoom=Math.min(this.zoom,g))},fi.minPitch.get=function(){return this._minPitch},fi.minPitch.set=function(g){this._minPitch!==g&&(this._minPitch=g,this.pitch=Math.max(this.pitch,g))},fi.maxPitch.get=function(){return this._maxPitch},fi.maxPitch.set=function(g){this._maxPitch!==g&&(this._maxPitch=g,this.pitch=Math.min(this.pitch,g))},fi.renderWorldCopies.get=function(){return this._renderWorldCopies},fi.renderWorldCopies.set=function(g){g===void 0?g=!0:g===null&&(g=!1),this._renderWorldCopies=g},fi.worldSize.get=function(){return this.tileSize*this.scale},fi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fi.size.get=function(){return new a.Point(this.width,this.height)},fi.bearing.get=function(){return-this.angle/Math.PI*180},fi.bearing.set=function(g){var c=-a.wrap(g,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fi.pitch.get=function(){return this._pitch/Math.PI*180},fi.pitch.set=function(g){var c=a.clamp(g,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())},fi.fov.get=function(){return this._fov/Math.PI*180},fi.fov.set=function(g){g=Math.max(.01,Math.min(60,g)),this._fov!==g&&(this._unmodified=!1,this._fov=g/180*Math.PI,this._calcMatrices())},fi.zoom.get=function(){return this._zoom},fi.zoom.set=function(g){var c=Math.min(Math.max(g,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())},fi.center.get=function(){return this._center},fi.center.set=function(g){g.lat===this._center.lat&&g.lng===this._center.lng||(this._unmodified=!1,this._center=g,this._constrain(),this._calcMatrices())},fi.padding.get=function(){return this._edgeInsets.toJSON()},fi.padding.set=function(g){this._edgeInsets.equals(g)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,g,1),this._calcMatrices())},fi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ti.prototype.isPaddingEqual=function(c){return this._edgeInsets.equals(c)},ti.prototype.interpolatePadding=function(c,x,d){this._unmodified=!1,this._edgeInsets.interpolate(c,x,d),this._constrain(),this._calcMatrices()},ti.prototype.coveringZoomLevel=function(c){var x=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,x)},ti.prototype.getVisibleUnwrappedCoordinates=function(c){var x=[new a.UnwrappedTileID(0,c)];if(this._renderWorldCopies)for(var d=this.pointCoordinate(new a.Point(0,0)),w=this.pointCoordinate(new a.Point(this.width,0)),L=this.pointCoordinate(new a.Point(this.width,this.height)),R=this.pointCoordinate(new a.Point(0,this.height)),G=Math.floor(Math.min(d.x,w.x,L.x,R.x)),J=Math.floor(Math.max(d.x,w.x,L.x,R.x)),te=1,ue=G-te;ue<=J+te;ue++)ue!==0&&x.push(new a.UnwrappedTileID(ue,c));return x},ti.prototype.coveringTiles=function(c){var x=this.coveringZoomLevel(c),d=x;if(c.minzoom!==void 0&&x<c.minzoom)return[];c.maxzoom!==void 0&&x>c.maxzoom&&(x=c.maxzoom);var w=a.MercatorCoordinate.fromLngLat(this.center),L=Math.pow(2,x),R=[L*w.x,L*w.y,0],G=so.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,x),J=c.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(J=x);var te=3,ue=function(Mr){return{aabb:new Es([Mr*L,0,0],[(Mr+1)*L,L,0]),zoom:0,x:0,y:0,wrap:Mr,fullyVisible:!1}},we=[],be=[],Ie=x,Ze=c.reparseOverscaled?d:x;if(this._renderWorldCopies)for(var Ge=1;Ge<=3;Ge++)we.push(ue(-Ge)),we.push(ue(Ge));for(we.push(ue(0));we.length>0;){var Oe=we.pop(),Xe=Oe.x,ft=Oe.y,Lt=Oe.fullyVisible;if(!Lt){var It=Oe.aabb.intersects(G);if(It===0)continue;Lt=It===2}var Xt=Oe.aabb.distanceX(R),er=Oe.aabb.distanceY(R),Ot=Math.max(Math.abs(Xt),Math.abs(er)),tr=te+(1<<Ie-Oe.zoom)-2;if(Oe.zoom===Ie||Ot>tr&&Oe.zoom>=J){be.push({tileID:new a.OverscaledTileID(Oe.zoom===Ie?Ze:Oe.zoom,Oe.wrap,Oe.zoom,Xe,ft),distanceSq:a.sqrLen([R[0]-.5-Xe,R[1]-.5-ft])});continue}for(var fr=0;fr<4;fr++){var gr=(Xe<<1)+fr%2,Lr=(ft<<1)+(fr>>1);we.push({aabb:Oe.aabb.quadrant(fr),zoom:Oe.zoom+1,x:gr,y:Lr,wrap:Oe.wrap,fullyVisible:Lt})}}return be.sort(function(Mr,Xr){return Mr.distanceSq-Xr.distanceSq}).map(function(Mr){return Mr.tileID})},ti.prototype.resize=function(c,x){this.width=c,this.height=x,this.pixelsToGLUnits=[2/c,-2/x],this._constrain(),this._calcMatrices()},fi.unmodified.get=function(){return this._unmodified},ti.prototype.zoomScale=function(c){return Math.pow(2,c)},ti.prototype.scaleZoom=function(c){return Math.log(c)/Math.LN2},ti.prototype.project=function(c){var x=a.clamp(c.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(c.lng)*this.worldSize,a.mercatorYfromLat(x)*this.worldSize)},ti.prototype.unproject=function(c){return new a.MercatorCoordinate(c.x/this.worldSize,c.y/this.worldSize).toLngLat()},fi.point.get=function(){return this.project(this.center)},ti.prototype.setLocationAtPoint=function(c,x){var d=this.pointCoordinate(x),w=this.pointCoordinate(this.centerPoint),L=this.locationCoordinate(c),R=new a.MercatorCoordinate(L.x-(d.x-w.x),L.y-(d.y-w.y));this.center=this.coordinateLocation(R),this._renderWorldCopies&&(this.center=this.center.wrap())},ti.prototype.locationPoint=function(c){return this.coordinatePoint(this.locationCoordinate(c))},ti.prototype.pointLocation=function(c){return this.coordinateLocation(this.pointCoordinate(c))},ti.prototype.locationCoordinate=function(c){return a.MercatorCoordinate.fromLngLat(c)},ti.prototype.coordinateLocation=function(c){return c.toLngLat()},ti.prototype.pointCoordinate=function(c){var x=0,d=[c.x,c.y,0,1],w=[c.x,c.y,1,1];a.transformMat4(d,d,this.pixelMatrixInverse),a.transformMat4(w,w,this.pixelMatrixInverse);var L=d[3],R=w[3],G=d[0]/L,J=w[0]/R,te=d[1]/L,ue=w[1]/R,we=d[2]/L,be=w[2]/R,Ie=we===be?0:(x-we)/(be-we);return new a.MercatorCoordinate(a.number(G,J,Ie)/this.worldSize,a.number(te,ue,Ie)/this.worldSize)},ti.prototype.coordinatePoint=function(c){var x=[c.x*this.worldSize,c.y*this.worldSize,0,1];return a.transformMat4(x,x,this.pixelMatrix),new a.Point(x[0]/x[3],x[1]/x[3])},ti.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},ti.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ti.prototype.setMaxBounds=function(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ti.prototype.calculatePosMatrix=function(c,x){x===void 0&&(x=!1);var d=c.key,w=x?this._alignedPosMatrixCache:this._posMatrixCache;if(w[d])return w[d];var L=c.canonical,R=this.worldSize/this.zoomScale(L.z),G=L.x+Math.pow(2,L.z)*c.wrap,J=a.identity(new Float64Array(16));return a.translate(J,J,[G*R,L.y*R,0]),a.scale(J,J,[R/a.EXTENT,R/a.EXTENT,1]),a.multiply(J,x?this.alignedProjMatrix:this.projMatrix,J),w[d]=new Float32Array(J),w[d]},ti.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ti.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var c=-90,x=90,d=-180,w=180,L,R,G,J,te=this.size,ue=this._unmodified;if(this.latRange){var we=this.latRange;c=a.mercatorYfromLat(we[1])*this.worldSize,x=a.mercatorYfromLat(we[0])*this.worldSize,L=x-c<te.y?te.y/(x-c):0}if(this.lngRange){var be=this.lngRange;d=a.mercatorXfromLng(be[0])*this.worldSize,w=a.mercatorXfromLng(be[1])*this.worldSize,R=w-d<te.x?te.x/(w-d):0}var Ie=this.point,Ze=Math.max(R||0,L||0);if(Ze){this.center=this.unproject(new a.Point(R?(w+d)/2:Ie.x,L?(x+c)/2:Ie.y)),this.zoom+=this.scaleZoom(Ze),this._unmodified=ue,this._constraining=!1;return}if(this.latRange){var Ge=Ie.y,Oe=te.y/2;Ge-Oe<c&&(J=c+Oe),Ge+Oe>x&&(J=x-Oe)}if(this.lngRange){var Xe=Ie.x,ft=te.x/2;Xe-ft<d&&(G=d+ft),Xe+ft>w&&(G=w-ft)}(G!==void 0||J!==void 0)&&(this.center=this.unproject(new a.Point(G!==void 0?G:Ie.x,J!==void 0?J:Ie.y))),this._unmodified=ue,this._constraining=!1}},ti.prototype._calcMatrices=function(){if(this.height){var c=this._fov/2,x=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(c)*this.height;var d=Math.PI/2+this._pitch,w=this._fov*(.5+x.y/this.height),L=Math.sin(w)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-d-w,.01,Math.PI-.01)),R=this.point,G=R.x,J=R.y,te=Math.cos(Math.PI/2-this._pitch)*L+this.cameraToCenterDistance,ue=te*1.01,we=this.height/50,be=new Float64Array(16);a.perspective(be,this._fov,this.width/this.height,we,ue),be[8]=-x.x*2/this.width,be[9]=x.y*2/this.height,a.scale(be,be,[1,-1,1]),a.translate(be,be,[0,0,-this.cameraToCenterDistance]),a.rotateX(be,be,this._pitch),a.rotateZ(be,be,this.angle),a.translate(be,be,[-G,-J,0]),this.mercatorMatrix=a.scale([],be,[this.worldSize,this.worldSize,this.worldSize]),a.scale(be,be,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=be,this.invProjMatrix=a.invert([],this.projMatrix);var Ie=this.width%2/2,Ze=this.height%2/2,Ge=Math.cos(this.angle),Oe=Math.sin(this.angle),Xe=G-Math.round(G)+Ge*Ie+Oe*Ze,ft=J-Math.round(J)+Ge*Ze+Oe*Ie,Lt=new Float64Array(be);if(a.translate(Lt,Lt,[Xe>.5?Xe-1:Xe,ft>.5?ft-1:ft,0]),this.alignedProjMatrix=Lt,be=a.create(),a.scale(be,be,[this.width/2,-this.height/2,1]),a.translate(be,be,[1,-1,0]),this.labelPlaneMatrix=be,be=a.create(),a.scale(be,be,[1,-1,1]),a.translate(be,be,[-1,-1,0]),a.scale(be,be,[2/this.width,2/this.height,1]),this.glCoordMatrix=be,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),be=a.invert(new Float64Array(16),this.pixelMatrix),!be)throw new Error("failed to invert matrix");this.pixelMatrixInverse=be,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ti.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var c=this.pointCoordinate(new a.Point(0,0)),x=[c.x*this.worldSize,c.y*this.worldSize,0,1],d=a.transformMat4(x,x,this.pixelMatrix);return d[3]/this.cameraToCenterDistance},ti.prototype.getCameraPoint=function(){var c=this._pitch,x=Math.tan(c)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,x))},ti.prototype.getCameraQueryGeometry=function(c){var x=this.getCameraPoint();if(c.length===1)return[c[0],x];for(var d=x.x,w=x.y,L=x.x,R=x.y,G=0,J=c;G<J.length;G+=1){var te=J[G];d=Math.min(d,te.x),w=Math.min(w,te.y),L=Math.max(L,te.x),R=Math.max(R,te.y)}return[new a.Point(d,w),new a.Point(L,w),new a.Point(L,R),new a.Point(d,R),new a.Point(d,w)]},Object.defineProperties(ti.prototype,fi);function ah(g,c){var x=!1,d=null,w=function(){d=null,x&&(g(),d=setTimeout(w,c),x=!1)};return function(){return x=!0,d||w(),d}}var Il=function(c){this._hashName=c&&encodeURIComponent(c),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ah(this._updateHashUnthrottled.bind(this),30*1e3/100)};Il.prototype.addTo=function(c){return this._map=c,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Il.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Il.prototype.getHashString=function(c){var x=this._map.getCenter(),d=Math.round(this._map.getZoom()*100)/100,w=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,w),R=Math.round(x.lng*L)/L,G=Math.round(x.lat*L)/L,J=this._map.getBearing(),te=this._map.getPitch(),ue="";if(c?ue+="/"+R+"/"+G+"/"+d:ue+=d+"/"+G+"/"+R,(J||te)&&(ue+="/"+Math.round(J*10)/10),te&&(ue+="/"+Math.round(te)),this._hashName){var we=this._hashName,be=!1,Ie=a.window.location.hash.slice(1).split("&").map(function(Ze){var Ge=Ze.split("=")[0];return Ge===we?(be=!0,Ge+"="+ue):Ze}).filter(function(Ze){return Ze});return be||Ie.push(we+"="+ue),"#"+Ie.join("&")}return"#"+ue},Il.prototype._getCurrentHash=function(){var c=this,x=a.window.location.hash.replace("#","");if(this._hashName){var d;return x.split("&").map(function(w){return w.split("=")}).forEach(function(w){w[0]===c._hashName&&(d=w)}),(d&&d[1]||"").split("/")}return x.split("/")},Il.prototype._onHashChange=function(){var c=this._getCurrentHash();if(c.length>=3&&!c.some(function(d){return isNaN(d)})){var x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:x,pitch:+(c[4]||0)}),!0}return!1},Il.prototype._updateHashUnthrottled=function(){var c=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,c)}catch(x){}};var tc={linearity:.3,easing:a.bezier(0,0,.3,1)},pf=a.extend({deceleration:2500,maxSpeed:1400},tc),Rl=a.extend({deceleration:20,maxSpeed:1400},tc),Ls=a.extend({deceleration:1e3,maxSpeed:360},tc),ih=a.extend({deceleration:1e3,maxSpeed:90},tc),mf=function(c){this._map=c,this.clear()};mf.prototype.clear=function(){this._inertiaBuffer=[]},mf.prototype.record=function(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:c})},mf.prototype._drainInertiaBuffer=function(){for(var c=this._inertiaBuffer,x=a.browser.now(),d=160;c.length>0&&x-c[0].time>d;)c.shift()},mf.prototype._onMoveEnd=function(c){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var x={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},d=0,w=this._inertiaBuffer;d<w.length;d+=1){var L=w[d],R=L.settings;x.zoom+=R.zoomDelta||0,x.bearing+=R.bearingDelta||0,x.pitch+=R.pitchDelta||0,R.panDelta&&x.pan._add(R.panDelta),R.around&&(x.around=R.around),R.pinchAround&&(x.pinchAround=R.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1],J=G.time-this._inertiaBuffer[0].time,te={};if(x.pan.mag()){var ue=y(x.pan.mag(),J,a.extend({},pf,c||{}));te.offset=x.pan.mult(ue.amount/x.pan.mag()),te.center=this._map.transform.center,Fl(te,ue)}if(x.zoom){var we=y(x.zoom,J,Rl);te.zoom=this._map.transform.zoom+we.amount,Fl(te,we)}if(x.bearing){var be=y(x.bearing,J,Ls);te.bearing=this._map.transform.bearing+a.clamp(be.amount,-179,179),Fl(te,be)}if(x.pitch){var Ie=y(x.pitch,J,ih);te.pitch=this._map.transform.pitch+Ie.amount,Fl(te,Ie)}if(te.zoom||te.bearing){var Ze=x.pinchAround===void 0?x.around:x.pinchAround;te.around=Ze?this._map.unproject(Ze):this._map.getCenter()}return this.clear(),a.extend(te,{noMoveStart:!0})}};function Fl(g,c){(!g.duration||g.duration<c.duration)&&(g.duration=c.duration,g.easing=c.easing)}function y(g,c,x){var d=x.maxSpeed,w=x.linearity,L=x.deceleration,R=a.clamp(g*w/(c/1e3),-d,d),G=Math.abs(R)/(L*w);return{easing:x.easing,duration:G*1e3,amount:R*(G/2)}}var M=function(g){function c(d,w,L,R){R===void 0&&(R={});var G=l.mousePos(w.getCanvasContainer(),L),J=w.unproject(G);g.call(this,d,a.extend({point:G,lngLat:J,originalEvent:L},R)),this._defaultPrevented=!1,this.target=w}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var x={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,x),c}(a.Event),D=function(g){function c(d,w,L){var R=d==="touchend"?L.changedTouches:L.touches,G=l.touchPos(w.getCanvasContainer(),R),J=G.map(function(we){return w.unproject(we)}),te=G.reduce(function(we,be,Ie,Ze){return we.add(be.div(Ze.length))},new a.Point(0,0)),ue=w.unproject(te);g.call(this,d,{points:G,point:te,lngLats:J,lngLat:ue,originalEvent:L}),this._defaultPrevented=!1}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var x={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,x),c}(a.Event),N=function(g){function c(d,w,L){g.call(this,d,{originalEvent:L}),this._defaultPrevented=!1}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var x={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,x),c}(a.Event),U=function(c,x){this._map=c,this._clickTolerance=x.clickTolerance};U.prototype.reset=function(){delete this._mousedownPos},U.prototype.wheel=function(c){return this._firePreventable(new N(c.type,this._map,c))},U.prototype.mousedown=function(c,x){return this._mousedownPos=x,this._firePreventable(new M(c.type,this._map,c))},U.prototype.mouseup=function(c){this._map.fire(new M(c.type,this._map,c))},U.prototype.click=function(c,x){this._mousedownPos&&this._mousedownPos.dist(x)>=this._clickTolerance||this._map.fire(new M(c.type,this._map,c))},U.prototype.dblclick=function(c){return this._firePreventable(new M(c.type,this._map,c))},U.prototype.mouseover=function(c){this._map.fire(new M(c.type,this._map,c))},U.prototype.mouseout=function(c){this._map.fire(new M(c.type,this._map,c))},U.prototype.touchstart=function(c){return this._firePreventable(new D(c.type,this._map,c))},U.prototype.touchmove=function(c){this._map.fire(new D(c.type,this._map,c))},U.prototype.touchend=function(c){this._map.fire(new D(c.type,this._map,c))},U.prototype.touchcancel=function(c){this._map.fire(new D(c.type,this._map,c))},U.prototype._firePreventable=function(c){if(this._map.fire(c),c.defaultPrevented)return{}},U.prototype.isEnabled=function(){return!0},U.prototype.isActive=function(){return!1},U.prototype.enable=function(){},U.prototype.disable=function(){};var Z=function(c){this._map=c};Z.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Z.prototype.mousemove=function(c){this._map.fire(new M(c.type,this._map,c))},Z.prototype.mousedown=function(){this._delayContextMenu=!0},Z.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new M("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Z.prototype.contextmenu=function(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new M(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()},Z.prototype.isEnabled=function(){return!0},Z.prototype.isActive=function(){return!1},Z.prototype.enable=function(){},Z.prototype.disable=function(){};var $=function(c,x){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=x.clickTolerance||1};$.prototype.isEnabled=function(){return!!this._enabled},$.prototype.isActive=function(){return!!this._active},$.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$.prototype.mousedown=function(c,x){this.isEnabled()&&c.shiftKey&&c.button===0&&(l.disableDrag(),this._startPos=this._lastPos=x,this._active=!0)},$.prototype.mousemoveWindow=function(c,x){if(this._active){var d=x;if(!(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)){var w=this._startPos;this._lastPos=d,this._box||(this._box=l.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));var L=Math.min(w.x,d.x),R=Math.max(w.x,d.x),G=Math.min(w.y,d.y),J=Math.max(w.y,d.y);l.setTransform(this._box,"translate("+L+"px,"+G+"px)"),this._box.style.width=R-L+"px",this._box.style.height=J-G+"px"}}},$.prototype.mouseupWindow=function(c,x){var d=this;if(this._active&&c.button===0){var w=this._startPos,L=x;if(this.reset(),l.suppressClick(),w.x===L.x&&w.y===L.y)this._fireEvent("boxzoomcancel",c);else return this._map.fire(new a.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:function(R){return R.fitScreenCoordinates(w,L,d._map.getBearing(),{linear:!0})}}}},$.prototype.keydown=function(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))},$.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(l.remove(this._box),this._box=null),l.enableDrag(),delete this._startPos,delete this._lastPos},$.prototype._fireEvent=function(c,x){return this._map.fire(new a.Event(c,{originalEvent:x}))};function X(g,c){for(var x={},d=0;d<g.length;d++)x[g[d].identifier]=c[d];return x}function ae(g){for(var c=new a.Point(0,0),x=0,d=g;x<d.length;x+=1){var w=d[x];c._add(w)}return c.div(g.length)}var pe=500,_e=500,Pe=30,Le=function(c){this.reset(),this.numTouches=c.numTouches};Le.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Le.prototype.touchstart=function(c,x,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=c.timeStamp),d.length===this.numTouches&&(this.centroid=ae(x),this.touches=X(d,x)))},Le.prototype.touchmove=function(c,x,d){if(!(this.aborted||!this.centroid)){var w=X(d,x);for(var L in this.touches){var R=this.touches[L],G=w[L];(!G||G.dist(R)>Pe)&&(this.aborted=!0)}}},Le.prototype.touchend=function(c,x,d){if((!this.centroid||c.timeStamp-this.startTime>_e)&&(this.aborted=!0),d.length===0){var w=!this.aborted&&this.centroid;if(this.reset(),w)return w}};var Je=function(c){this.singleTap=new Le(c),this.numTaps=c.numTaps,this.reset()};Je.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Je.prototype.touchstart=function(c,x,d){this.singleTap.touchstart(c,x,d)},Je.prototype.touchmove=function(c,x,d){this.singleTap.touchmove(c,x,d)},Je.prototype.touchend=function(c,x,d){var w=this.singleTap.touchend(c,x,d);if(w){var L=c.timeStamp-this.lastTime<pe,R=!this.lastTap||this.lastTap.dist(w)<Pe;if((!L||!R)&&this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}};var nt=function(){this._zoomIn=new Je({numTouches:1,numTaps:2}),this._zoomOut=new Je({numTouches:2,numTaps:1}),this.reset()};nt.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},nt.prototype.touchstart=function(c,x,d){this._zoomIn.touchstart(c,x,d),this._zoomOut.touchstart(c,x,d)},nt.prototype.touchmove=function(c,x,d){this._zoomIn.touchmove(c,x,d),this._zoomOut.touchmove(c,x,d)},nt.prototype.touchend=function(c,x,d){var w=this,L=this._zoomIn.touchend(c,x,d),R=this._zoomOut.touchend(c,x,d);if(L)return this._active=!0,c.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(G){return G.easeTo({duration:300,zoom:G.getZoom()+1,around:G.unproject(L)},{originalEvent:c})}};if(R)return this._active=!0,c.preventDefault(),setTimeout(function(){return w.reset()},0),{cameraAnimation:function(G){return G.easeTo({duration:300,zoom:G.getZoom()-1,around:G.unproject(R)},{originalEvent:c})}}},nt.prototype.touchcancel=function(){this.reset()},nt.prototype.enable=function(){this._enabled=!0},nt.prototype.disable=function(){this._enabled=!1,this.reset()},nt.prototype.isEnabled=function(){return this._enabled},nt.prototype.isActive=function(){return this._active};var ze=0,Ue=2,je={};je[ze]=1,je[Ue]=2;function st(g,c){var x=je[c];return g.buttons===void 0||(g.buttons&x)!==x}var it=function(c){this.reset(),this._clickTolerance=c.clickTolerance||1};it.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},it.prototype._correctButton=function(c,x){return!1},it.prototype._move=function(c,x){return{}},it.prototype.mousedown=function(c,x){if(!this._lastPoint){var d=l.mouseButton(c);this._correctButton(c,d)&&(this._lastPoint=x,this._eventButton=d)}},it.prototype.mousemoveWindow=function(c,x){var d=this._lastPoint;if(d){if(c.preventDefault(),st(c,this._eventButton)){this.reset();return}if(!(!this._moved&&x.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=x,this._move(d,x)}},it.prototype.mouseupWindow=function(c){if(this._lastPoint){var x=l.mouseButton(c);x===this._eventButton&&(this._moved&&l.suppressClick(),this.reset())}},it.prototype.enable=function(){this._enabled=!0},it.prototype.disable=function(){this._enabled=!1,this.reset()},it.prototype.isEnabled=function(){return this._enabled},it.prototype.isActive=function(){return this._active};var We=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.mousedown=function(d,w){g.prototype.mousedown.call(this,d,w),this._lastPoint&&(this._active=!0)},c.prototype._correctButton=function(d,w){return w===ze&&!d.ctrlKey},c.prototype._move=function(d,w){return{around:w,panDelta:w.sub(d)}},c}(it),Bt=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype._correctButton=function(d,w){return w===ze&&d.ctrlKey||w===Ue},c.prototype._move=function(d,w){var L=.8,R=(w.x-d.x)*L;if(R)return this._active=!0,{bearingDelta:R}},c.prototype.contextmenu=function(d){d.preventDefault()},c}(it),nr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype._correctButton=function(d,w){return w===ze&&d.ctrlKey||w===Ue},c.prototype._move=function(d,w){var L=-.5,R=(w.y-d.y)*L;if(R)return this._active=!0,{pitchDelta:R}},c.prototype.contextmenu=function(d){d.preventDefault()},c}(it),ur=function(c){this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset()};ur.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},ur.prototype.touchstart=function(c,x,d){return this._calculateTransform(c,x,d)},ur.prototype.touchmove=function(c,x,d){if(!(!this._active||d.length<this._minTouches))return c.preventDefault(),this._calculateTransform(c,x,d)},ur.prototype.touchend=function(c,x,d){this._calculateTransform(c,x,d),this._active&&d.length<this._minTouches&&this.reset()},ur.prototype.touchcancel=function(){this.reset()},ur.prototype._calculateTransform=function(c,x,d){d.length>0&&(this._active=!0);var w=X(d,x),L=new a.Point(0,0),R=new a.Point(0,0),G=0;for(var J in w){var te=w[J],ue=this._touches[J];ue&&(L._add(te),R._add(te.sub(ue)),G++,w[J]=te)}if(this._touches=w,!(G<this._minTouches||!R.mag())){var we=R.div(G);if(this._sum._add(we),!(this._sum.mag()<this._clickTolerance)){var be=L.div(G);return{around:be,panDelta:we}}}},ur.prototype.enable=function(){this._enabled=!0},ur.prototype.disable=function(){this._enabled=!1,this.reset()},ur.prototype.isEnabled=function(){return this._enabled},ur.prototype.isActive=function(){return this._active};var sr=function(){this.reset()};sr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},sr.prototype._start=function(c){},sr.prototype._move=function(c,x,d){return{}},sr.prototype.touchstart=function(c,x,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([x[0],x[1]]))},sr.prototype.touchmove=function(c,x,d){if(this._firstTwoTouches){c.preventDefault();var w=this._firstTwoTouches,L=w[0],R=w[1],G=Dr(d,x,L),J=Dr(d,x,R);if(!(!G||!J)){var te=this._aroundCenter?null:G.add(J).div(2);return this._move([G,J],te,c)}}},sr.prototype.touchend=function(c,x,d){if(this._firstTwoTouches){var w=this._firstTwoTouches,L=w[0],R=w[1],G=Dr(d,x,L),J=Dr(d,x,R);G&&J||(this._active&&l.suppressClick(),this.reset())}},sr.prototype.touchcancel=function(){this.reset()},sr.prototype.enable=function(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"},sr.prototype.disable=function(){this._enabled=!1,this.reset()},sr.prototype.isEnabled=function(){return this._enabled},sr.prototype.isActive=function(){return this._active};function Dr(g,c,x){for(var d=0;d<g.length;d++)if(g[d].identifier===x)return c[d]}var Ir=.1;function ea(g,c){return Math.log(g/c)/Math.LN2}var Ur=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.reset=function(){g.prototype.reset.call(this),delete this._distance,delete this._startDistance},c.prototype._start=function(d){this._startDistance=this._distance=d[0].dist(d[1])},c.prototype._move=function(d,w){var L=this._distance;if(this._distance=d[0].dist(d[1]),!(!this._active&&Math.abs(ea(this._distance,this._startDistance))<Ir))return this._active=!0,{zoomDelta:ea(this._distance,L),pinchAround:w}},c}(sr),Kr=25;function Ba(g,c){return g.angleWith(c)*180/Math.PI}var ri=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.reset=function(){g.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},c.prototype._start=function(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])},c.prototype._move=function(d,w){var L=this._vector;if(this._vector=d[0].sub(d[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ba(this._vector,L),pinchAround:w}},c.prototype._isBelowThreshold=function(d){this._minDiameter=Math.min(this._minDiameter,d.mag());var w=Math.PI*this._minDiameter,L=Kr/w*360,R=Ba(d,this._startVector);return Math.abs(R)<L},c}(sr);function $a(g){return Math.abs(g.y)>Math.abs(g.x)}var Yt=100,Jr=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.reset=function(){g.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},c.prototype._start=function(d){this._lastPoints=d,$a(d[0].sub(d[1]))&&(this._valid=!1)},c.prototype._move=function(d,w,L){var R=d[0].sub(this._lastPoints[0]),G=d[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(R,G,L.timeStamp),!!this._valid){this._lastPoints=d,this._active=!0;var J=(R.y+G.y)/2,te=-.5;return{pitchDelta:J*te}}},c.prototype.gestureBeginsVertically=function(d,w,L){if(this._valid!==void 0)return this._valid;var R=2,G=d.mag()>=R,J=w.mag()>=R;if(!(!G&&!J)){if(!G||!J)return this._firstMove===void 0&&(this._firstMove=L),L-this._firstMove<Yt?void 0:!1;var te=d.y>0==w.y>0;return $a(d)&&$a(w)&&te}},c}(sr),oa={panStep:100,bearingStep:15,pitchStep:10},sa=function(){var c=oa;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1};sa.prototype.reset=function(){this._active=!1},sa.prototype.keydown=function(c){var x=this;if(!(c.altKey||c.ctrlKey||c.metaKey)){var d=0,w=0,L=0,R=0,G=0;switch(c.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:c.shiftKey?w=-1:(c.preventDefault(),R=-1);break;case 39:c.shiftKey?w=1:(c.preventDefault(),R=1);break;case 38:c.shiftKey?L=1:(c.preventDefault(),G=-1);break;case 40:c.shiftKey?L=-1:(c.preventDefault(),G=1);break;default:return}return this._rotationDisabled&&(w=0,L=0),{cameraAnimation:function(J){var te=J.getZoom();J.easeTo({duration:300,easeId:"keyboardHandler",easing:Ei,zoom:d?Math.round(te)+d*(c.shiftKey?2:1):te,bearing:J.getBearing()+w*x._bearingStep,pitch:J.getPitch()+L*x._pitchStep,offset:[-R*x._panStep,-G*x._panStep],center:J.getCenter()},{originalEvent:c})}}}},sa.prototype.enable=function(){this._enabled=!0},sa.prototype.disable=function(){this._enabled=!1,this.reset()},sa.prototype.isEnabled=function(){return this._enabled},sa.prototype.isActive=function(){return this._active},sa.prototype.disableRotation=function(){this._rotationDisabled=!0},sa.prototype.enableRotation=function(){this._rotationDisabled=!1};function Ei(g){return g*(2-g)}var Oi=4.000244140625,$i=1/100,xi=1/450,xn=2,br=function(c,x){this._map=c,this._el=c.getCanvasContainer(),this._handler=x,this._delta=0,this._defaultZoomRate=$i,this._wheelZoomRate=xi,a.bindAll(["_onTimeout"],this)};br.prototype.setZoomRate=function(c){this._defaultZoomRate=c},br.prototype.setWheelZoomRate=function(c){this._wheelZoomRate=c},br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},br.prototype.isZooming=function(){return!!this._zooming},br.prototype.enable=function(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=c&&c.around==="center")},br.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},br.prototype.wheel=function(c){if(this.isEnabled()){var x=c.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?c.deltaY*40:c.deltaY,d=a.browser.now(),w=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,x!==0&&x%Oi===0?this._type="wheel":x!==0&&Math.abs(x)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=x,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(w*x)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,x+=this._lastValue)),c.shiftKey&&x&&(x=x/4),this._type&&(this._lastWheelEvent=c,this._delta-=x,this._active||this._start(c)),c.preventDefault()}},br.prototype._onTimeout=function(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},br.prototype._start=function(c){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var x=l.mousePos(this._el,c);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(x)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},br.prototype.renderFrame=function(){var c=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var x=this._map.transform;if(this._delta!==0){var d=this._type==="wheel"&&Math.abs(this._delta)>Oi?this._wheelZoomRate:this._defaultZoomRate,w=xn/(1+Math.exp(-Math.abs(this._delta*d)));this._delta<0&&w!==0&&(w=1/w);var L=typeof this._targetZoom=="number"?x.zoomScale(this._targetZoom):x.scale;this._targetZoom=Math.min(x.maxZoom,Math.max(x.minZoom,x.scaleZoom(L*w))),this._type==="wheel"&&(this._startZoom=x.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var R=typeof this._targetZoom=="number"?this._targetZoom:x.zoom,G=this._startZoom,J=this._easing,te=!1,ue;if(this._type==="wheel"&&G&&J){var we=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),be=J(we);ue=a.number(G,R,be),we<1?this._frameId||(this._frameId=!0):te=!0}else ue=R,te=!0;return this._active=!0,te&&(this._active=!1,this._finishTimeout=setTimeout(function(){c._zooming=!1,c._handler._triggerRenderFrame(),delete c._targetZoom,delete c._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!te,zoomDelta:ue-x.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},br.prototype._smoothOutEasing=function(c){var x=a.ease;if(this._prevEase){var d=this._prevEase,w=(a.browser.now()-d.start)/d.duration,L=d.easing(w+.01)-d.easing(w),R=.27/Math.sqrt(L*L+1e-4)*.01,G=Math.sqrt(.27*.27-R*R);x=a.bezier(R,G,.25,1)}return this._prevEase={start:a.browser.now(),duration:c,easing:x},x},br.prototype.reset=function(){this._active=!1};var Vr=function(c,x){this._clickZoom=c,this._tapZoom=x};Vr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Vr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Vr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Vr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Fi=function(){this.reset()};Fi.prototype.reset=function(){this._active=!1},Fi.prototype.dblclick=function(c,x){return c.preventDefault(),{cameraAnimation:function(d){d.easeTo({duration:300,zoom:d.getZoom()+(c.shiftKey?-1:1),around:d.unproject(x)},{originalEvent:c})}}},Fi.prototype.enable=function(){this._enabled=!0},Fi.prototype.disable=function(){this._enabled=!1,this.reset()},Fi.prototype.isEnabled=function(){return this._enabled},Fi.prototype.isActive=function(){return this._active};var Ti=function(){this._tap=new Je({numTouches:1,numTaps:1}),this.reset()};Ti.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ti.prototype.touchstart=function(c,x,d){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>pe&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=x[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(c,x,d))},Ti.prototype.touchmove=function(c,x,d){if(!this._tapTime)this._tap.touchmove(c,x,d);else if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;var w=x[0],L=w.y-this._swipePoint.y;return this._swipePoint=w,c.preventDefault(),this._active=!0,{zoomDelta:L/128}}},Ti.prototype.touchend=function(c,x,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{var w=this._tap.touchend(c,x,d);w&&(this._tapTime=c.timeStamp)}},Ti.prototype.touchcancel=function(){this.reset()},Ti.prototype.enable=function(){this._enabled=!0},Ti.prototype.disable=function(){this._enabled=!1,this.reset()},Ti.prototype.isEnabled=function(){return this._enabled},Ti.prototype.isActive=function(){return this._active};var lo=function(c,x,d){this._el=c,this._mousePan=x,this._touchPan=d};lo.prototype.enable=function(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},lo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},lo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},lo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var zn=function(c,x,d){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=x,this._mousePitch=d};zn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},zn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},zn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},zn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var cn=function(c,x,d,w){this._el=c,this._touchZoom=x,this._touchRotate=d,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0};cn.prototype.enable=function(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},cn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},cn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},cn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},cn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},cn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var pi=function(g){return g.zoom||g.drag||g.pitch||g.rotate},jo=function(g){function c(){g.apply(this,arguments)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c}(a.Event);function uo(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}var ci=function(c,x){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mf(c),this._bearingSnap=x.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(x),a.bindAll(["handleEvent","handleWindowEvent"],this);var d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[a.window,"blur",void 0]];for(var w=0,L=this._listeners;w<L.length;w+=1){var R=L[w],G=R[0],J=R[1],te=R[2];l.addEventListener(G,J,G===a.window.document?this.handleWindowEvent:this.handleEvent,te)}};ci.prototype.destroy=function(){for(var c=0,x=this._listeners;c<x.length;c+=1){var d=x[c],w=d[0],L=d[1],R=d[2];l.removeEventListener(w,L,w===a.window.document?this.handleWindowEvent:this.handleEvent,R)}},ci.prototype._addDefaultHandlers=function(c){var x=this._map,d=x.getCanvasContainer();this._add("mapEvent",new U(x,c));var w=x.boxZoom=new $(x,c);this._add("boxZoom",w);var L=new nt,R=new Fi;x.doubleClickZoom=new Vr(R,L),this._add("tapZoom",L),this._add("clickZoom",R);var G=new Ti;this._add("tapDragZoom",G);var J=x.touchPitch=new Jr;this._add("touchPitch",J);var te=new Bt(c),ue=new nr(c);x.dragRotate=new zn(c,te,ue),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",ue,["mouseRotate"]);var we=new We(c),be=new ur(c);x.dragPan=new lo(d,we,be),this._add("mousePan",we),this._add("touchPan",be,["touchZoom","touchRotate"]);var Ie=new ri,Ze=new Ur;x.touchZoomRotate=new cn(d,Ze,Ie,G),this._add("touchRotate",Ie,["touchPan","touchZoom"]),this._add("touchZoom",Ze,["touchPan","touchRotate"]);var Ge=x.scrollZoom=new br(x,this);this._add("scrollZoom",Ge,["mousePan"]);var Oe=x.keyboard=new sa;this._add("keyboard",Oe),this._add("blockableMapEvent",new Z(x));for(var Xe=0,ft=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Xe<ft.length;Xe+=1){var Lt=ft[Xe];c.interactive&&c[Lt]&&x[Lt].enable(c[Lt])}},ci.prototype._add=function(c,x,d){this._handlers.push({handlerName:c,handler:x,allowed:d}),this._handlersById[c]=x},ci.prototype.stop=function(c){if(!this._updatingCamera){for(var x=0,d=this._handlers;x<d.length;x+=1){var w=d[x],L=w.handler;L.reset()}this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}},ci.prototype.isActive=function(){for(var c=0,x=this._handlers;c<x.length;c+=1){var d=x[c],w=d.handler;if(w.isActive())return!0}return!1},ci.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ci.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ci.prototype.isMoving=function(){return!!pi(this._eventsInProgress)||this.isZooming()},ci.prototype._blockedByActive=function(c,x,d){for(var w in c)if(w!==d&&(!x||x.indexOf(w)<0))return!0;return!1},ci.prototype.handleWindowEvent=function(c){this.handleEvent(c,c.type+"Window")},ci.prototype._getMapTouches=function(c){for(var x=[],d=0,w=c;d<w.length;d+=1){var L=w[d],R=L.target;this._el.contains(R)&&x.push(L)}return x},ci.prototype.handleEvent=function(c,x){if(c.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var d=c.type==="renderFrame"?void 0:c,w={needsRenderFrame:!1},L={},R={},G=c.touches?this._getMapTouches(c.touches):void 0,J=G?l.touchPos(this._el,G):l.mousePos(this._el,c),te=0,ue=this._handlers;te<ue.length;te+=1){var we=ue[te],be=we.handlerName,Ie=we.handler,Ze=we.allowed;if(Ie.isEnabled()){var Ge=void 0;this._blockedByActive(R,Ze,be)?Ie.reset():Ie[x||c.type]&&(Ge=Ie[x||c.type](c,J,G),this.mergeHandlerResult(w,L,Ge,be,d),Ge&&Ge.needsRenderFrame&&this._triggerRenderFrame()),(Ge||Ie.isActive())&&(R[be]=Ie)}}var Oe={};for(var Xe in this._previousActiveHandlers)R[Xe]||(Oe[Xe]=d);this._previousActiveHandlers=R,(Object.keys(Oe).length||uo(w))&&(this._changes.push([w,L,Oe]),this._triggerRenderFrame()),(Object.keys(R).length||uo(w))&&this._map._stop(!0),this._updatingCamera=!1;var ft=w.cameraAnimation;ft&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ft(this._map))},ci.prototype.mergeHandlerResult=function(c,x,d,w,L){if(d){a.extend(c,d);var R={handlerName:w,originalEvent:d.originalEvent||L};d.zoomDelta!==void 0&&(x.zoom=R),d.panDelta!==void 0&&(x.drag=R),d.pitchDelta!==void 0&&(x.pitch=R),d.bearingDelta!==void 0&&(x.rotate=R)}},ci.prototype._applyChanges=function(){for(var c={},x={},d={},w=0,L=this._changes;w<L.length;w+=1){var R=L[w],G=R[0],J=R[1],te=R[2];G.panDelta&&(c.panDelta=(c.panDelta||new a.Point(0,0))._add(G.panDelta)),G.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+G.zoomDelta),G.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+G.bearingDelta),G.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+G.pitchDelta),G.around!==void 0&&(c.around=G.around),G.pinchAround!==void 0&&(c.pinchAround=G.pinchAround),G.noInertia&&(c.noInertia=G.noInertia),a.extend(x,J),a.extend(d,te)}this._updateMapTransform(c,x,d),this._changes=[]},ci.prototype._updateMapTransform=function(c,x,d){var w=this._map,L=w.transform;if(!uo(c))return this._fireEvents(x,d,!0);var R=c.panDelta,G=c.zoomDelta,J=c.bearingDelta,te=c.pitchDelta,ue=c.around,we=c.pinchAround;we!==void 0&&(ue=we),w._stop(!0),ue=ue||w.transform.centerPoint;var be=L.pointLocation(R?ue.sub(R):ue);J&&(L.bearing+=J),te&&(L.pitch+=te),G&&(L.zoom+=G),L.setLocationAtPoint(be,ue),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(x,d,!0)},ci.prototype._fireEvents=function(c,x,d){var w=this,L=pi(this._eventsInProgress),R=pi(c),G={};for(var J in c){var te=c[J],ue=te.originalEvent;this._eventsInProgress[J]||(G[J+"start"]=ue),this._eventsInProgress[J]=c[J]}!L&&R&&this._fireEvent("movestart",R.originalEvent);for(var we in G)this._fireEvent(we,G[we]);R&&this._fireEvent("move",R.originalEvent);for(var be in c){var Ie=c[be],Ze=Ie.originalEvent;this._fireEvent(be,Ze)}var Ge={},Oe;for(var Xe in this._eventsInProgress){var ft=this._eventsInProgress[Xe],Lt=ft.handlerName,It=ft.originalEvent;this._handlersById[Lt].isActive()||(delete this._eventsInProgress[Xe],Oe=x[Lt]||It,Ge[Xe+"end"]=Oe)}for(var Xt in Ge)this._fireEvent(Xt,Ge[Xt]);var er=pi(this._eventsInProgress);if(d&&(L||R)&&!er){this._updatingCamera=!0;var Ot=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),tr=function(fr){return fr!==0&&-w._bearingSnap<fr&&fr<w._bearingSnap};Ot?(tr(Ot.bearing||this._map.getBearing())&&(Ot.bearing=0),this._map.easeTo(Ot,{originalEvent:Oe})):(this._map.fire(new a.Event("moveend",{originalEvent:Oe})),tr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ci.prototype._fireEvent=function(c,x){this._map.fire(new a.Event(c,x?{originalEvent:x}:{}))},ci.prototype._requestFrame=function(){var c=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(x){delete c._frameId,c.handleEvent(new jo("renderFrame",{timeStamp:x})),c._applyChanges()})},ci.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var yf=function(g){function c(x,d){g.call(this),this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},c.prototype.setCenter=function(d,w){return this.jumpTo({center:d},w)},c.prototype.panBy=function(d,w,L){return d=a.Point.convert(d).mult(-1),this.panTo(this.transform.center,a.extend({offset:d},w),L)},c.prototype.panTo=function(d,w,L){return this.easeTo(a.extend({center:d},w),L)},c.prototype.getZoom=function(){return this.transform.zoom},c.prototype.setZoom=function(d,w){return this.jumpTo({zoom:d},w),this},c.prototype.zoomTo=function(d,w,L){return this.easeTo(a.extend({zoom:d},w),L)},c.prototype.zoomIn=function(d,w){return this.zoomTo(this.getZoom()+1,d,w),this},c.prototype.zoomOut=function(d,w){return this.zoomTo(this.getZoom()-1,d,w),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=function(d,w){return this.jumpTo({bearing:d},w),this},c.prototype.getPadding=function(){return this.transform.padding},c.prototype.setPadding=function(d,w){return this.jumpTo({padding:d},w),this},c.prototype.rotateTo=function(d,w,L){return this.easeTo(a.extend({bearing:d},w),L)},c.prototype.resetNorth=function(d,w){return this.rotateTo(0,a.extend({duration:1e3},d),w),this},c.prototype.resetNorthPitch=function(d,w){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},d),w),this},c.prototype.snapToNorth=function(d,w){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,w):this},c.prototype.getPitch=function(){return this.transform.pitch},c.prototype.setPitch=function(d,w){return this.jumpTo({pitch:d},w),this},c.prototype.cameraForBounds=function(d,w){d=a.LngLatBounds.convert(d);var L=w&&w.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),L,w)},c.prototype._cameraForBoxAndBearing=function(d,w,L,R){var G={top:0,bottom:0,right:0,left:0};if(R=a.extend({padding:G,offset:[0,0],maxZoom:this.transform.maxZoom},R),typeof R.padding=="number"){var J=R.padding;R.padding={top:J,bottom:J,right:J,left:J}}R.padding=a.extend(G,R.padding);var te=this.transform,ue=te.padding,we=te.project(a.LngLat.convert(d)),be=te.project(a.LngLat.convert(w)),Ie=we.rotate(-L*Math.PI/180),Ze=be.rotate(-L*Math.PI/180),Ge=new a.Point(Math.max(Ie.x,Ze.x),Math.max(Ie.y,Ze.y)),Oe=new a.Point(Math.min(Ie.x,Ze.x),Math.min(Ie.y,Ze.y)),Xe=Ge.sub(Oe),ft=(te.width-(ue.left+ue.right+R.padding.left+R.padding.right))/Xe.x,Lt=(te.height-(ue.top+ue.bottom+R.padding.top+R.padding.bottom))/Xe.y;if(Lt<0||ft<0){a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var It=Math.min(te.scaleZoom(te.scale*Math.min(ft,Lt)),R.maxZoom),Xt=typeof R.offset.x=="number"?new a.Point(R.offset.x,R.offset.y):a.Point.convert(R.offset),er=(R.padding.left-R.padding.right)/2,Ot=(R.padding.top-R.padding.bottom)/2,tr=new a.Point(er,Ot),fr=tr.rotate(L*Math.PI/180),gr=Xt.add(fr),Lr=gr.mult(te.scale/te.zoomScale(It)),Mr=te.unproject(we.add(be).div(2).sub(Lr));return{center:Mr,zoom:It,bearing:L}},c.prototype.fitBounds=function(d,w,L){return this._fitInternal(this.cameraForBounds(d,w),w,L)},c.prototype.fitScreenCoordinates=function(d,w,L,R,G){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(d)),this.transform.pointLocation(a.Point.convert(w)),L,R),R,G)},c.prototype._fitInternal=function(d,w,L){return d?(w=a.extend(d,w),delete w.padding,w.linear?this.easeTo(w,L):this.flyTo(w,L)):this},c.prototype.jumpTo=function(d,w){this.stop();var L=this.transform,R=!1,G=!1,J=!1;return"zoom"in d&&L.zoom!==+d.zoom&&(R=!0,L.zoom=+d.zoom),d.center!==void 0&&(L.center=a.LngLat.convert(d.center)),"bearing"in d&&L.bearing!==+d.bearing&&(G=!0,L.bearing=+d.bearing),"pitch"in d&&L.pitch!==+d.pitch&&(J=!0,L.pitch=+d.pitch),d.padding!=null&&!L.isPaddingEqual(d.padding)&&(L.padding=d.padding),this.fire(new a.Event("movestart",w)).fire(new a.Event("move",w)),R&&this.fire(new a.Event("zoomstart",w)).fire(new a.Event("zoom",w)).fire(new a.Event("zoomend",w)),G&&this.fire(new a.Event("rotatestart",w)).fire(new a.Event("rotate",w)).fire(new a.Event("rotateend",w)),J&&this.fire(new a.Event("pitchstart",w)).fire(new a.Event("pitch",w)).fire(new a.Event("pitchend",w)),this.fire(new a.Event("moveend",w))},c.prototype.easeTo=function(d,w){var L=this;this._stop(!1,d.easeId),d=a.extend({offset:[0,0],duration:500,easing:a.ease},d),(d.animate===!1||!d.essential&&a.browser.prefersReducedMotion)&&(d.duration=0);var R=this.transform,G=this.getZoom(),J=this.getBearing(),te=this.getPitch(),ue=this.getPadding(),we="zoom"in d?+d.zoom:G,be="bearing"in d?this._normalizeBearing(d.bearing,J):J,Ie="pitch"in d?+d.pitch:te,Ze="padding"in d?d.padding:R.padding,Ge=a.Point.convert(d.offset),Oe=R.centerPoint.add(Ge),Xe=R.pointLocation(Oe),ft=a.LngLat.convert(d.center||Xe);this._normalizeCenter(ft);var Lt=R.project(Xe),It=R.project(ft).sub(Lt),Xt=R.zoomScale(we-G),er,Ot;d.around&&(er=a.LngLat.convert(d.around),Ot=R.locationPoint(er));var tr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==G,this._rotating=this._rotating||J!==be,this._pitching=this._pitching||Ie!==te,this._padding=!R.isPaddingEqual(Ze),this._easeId=d.easeId,this._prepareEase(w,d.noMoveStart,tr),this._ease(function(fr){if(L._zooming&&(R.zoom=a.number(G,we,fr)),L._rotating&&(R.bearing=a.number(J,be,fr)),L._pitching&&(R.pitch=a.number(te,Ie,fr)),L._padding&&(R.interpolatePadding(ue,Ze,fr),Oe=R.centerPoint.add(Ge)),er)R.setLocationAtPoint(er,Ot);else{var gr=R.zoomScale(R.zoom-G),Lr=we>G?Math.min(2,Xt):Math.max(.5,Xt),Mr=Math.pow(Lr,1-fr),Xr=R.unproject(Lt.add(It.mult(fr*Mr)).mult(gr));R.setLocationAtPoint(R.renderWorldCopies?Xr.wrap():Xr,Oe)}L._fireMoveEvents(w)},function(fr){L._afterEase(w,fr)},d),this},c.prototype._prepareEase=function(d,w,L){L===void 0&&(L={}),this._moving=!0,!w&&!L.moving&&this.fire(new a.Event("movestart",d)),this._zooming&&!L.zooming&&this.fire(new a.Event("zoomstart",d)),this._rotating&&!L.rotating&&this.fire(new a.Event("rotatestart",d)),this._pitching&&!L.pitching&&this.fire(new a.Event("pitchstart",d))},c.prototype._fireMoveEvents=function(d){this.fire(new a.Event("move",d)),this._zooming&&this.fire(new a.Event("zoom",d)),this._rotating&&this.fire(new a.Event("rotate",d)),this._pitching&&this.fire(new a.Event("pitch",d))},c.prototype._afterEase=function(d,w){if(!(this._easeId&&w&&this._easeId===w)){delete this._easeId;var L=this._zooming,R=this._rotating,G=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,L&&this.fire(new a.Event("zoomend",d)),R&&this.fire(new a.Event("rotateend",d)),G&&this.fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))}},c.prototype.flyTo=function(d,w){var L=this;if(!d.essential&&a.browser.prefersReducedMotion){var R=a.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(R,w)}this.stop(),d=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},d);var G=this.transform,J=this.getZoom(),te=this.getBearing(),ue=this.getPitch(),we=this.getPadding(),be="zoom"in d?a.clamp(+d.zoom,G.minZoom,G.maxZoom):J,Ie="bearing"in d?this._normalizeBearing(d.bearing,te):te,Ze="pitch"in d?+d.pitch:ue,Ge="padding"in d?d.padding:G.padding,Oe=G.zoomScale(be-J),Xe=a.Point.convert(d.offset),ft=G.centerPoint.add(Xe),Lt=G.pointLocation(ft),It=a.LngLat.convert(d.center||Lt);this._normalizeCenter(It);var Xt=G.project(Lt),er=G.project(It).sub(Xt),Ot=d.curve,tr=Math.max(G.width,G.height),fr=tr/Oe,gr=er.mag();if("minZoom"in d){var Lr=a.clamp(Math.min(d.minZoom,J,be),G.minZoom,G.maxZoom),Mr=tr/G.zoomScale(Lr-J);Ot=Math.sqrt(Mr/gr*2)}var Xr=Ot*Ot;function Fa(na){var Oa=(fr*fr-tr*tr+(na?-1:1)*Xr*Xr*gr*gr)/(2*(na?fr:tr)*Xr*gr);return Math.log(Math.sqrt(Oa*Oa+1)-Oa)}function xa(na){return(Math.exp(na)-Math.exp(-na))/2}function qr(na){return(Math.exp(na)+Math.exp(-na))/2}function Sa(na){return xa(na)/qr(na)}var ia=Fa(0),Za=function(na){return qr(ia)/qr(ia+Ot*na)},Va=function(na){return tr*((qr(ia)*Sa(ia+Ot*na)-xa(ia))/Xr)/gr},Ai=(Fa(1)-ia)/Ot;if(Math.abs(gr)<1e-6||!isFinite(Ai)){if(Math.abs(tr-fr)<1e-6)return this.easeTo(d,w);var Pa=fr<tr?-1:1;Ai=Math.abs(Math.log(fr/tr))/Ot,Va=function(){return 0},Za=function(na){return Math.exp(Pa*Ot*na)}}if("duration"in d)d.duration=+d.duration;else{var mi="screenSpeed"in d?+d.screenSpeed/Ot:+d.speed;d.duration=1e3*Ai/mi}return d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=te!==Ie,this._pitching=Ze!==ue,this._padding=!G.isPaddingEqual(Ge),this._prepareEase(w,!1),this._ease(function(na){var Oa=na*Ai,en=1/Za(Oa);G.zoom=na===1?be:J+G.scaleZoom(en),L._rotating&&(G.bearing=a.number(te,Ie,na)),L._pitching&&(G.pitch=a.number(ue,Ze,na)),L._padding&&(G.interpolatePadding(we,Ge,na),ft=G.centerPoint.add(Xe));var In=na===1?It:G.unproject(Xt.add(er.mult(Va(Oa))).mult(en));G.setLocationAtPoint(G.renderWorldCopies?In.wrap():In,ft),L._fireMoveEvents(w)},function(){return L._afterEase(w)},d),this},c.prototype.isEasing=function(){return!!this._easeFrameId},c.prototype.stop=function(){return this._stop()},c.prototype._stop=function(d,w){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var L=this._onEaseEnd;delete this._onEaseEnd,L.call(this,w)}if(!d){var R=this.handlers;R&&R.stop(!1)}return this},c.prototype._ease=function(d,w,L){L.animate===!1||L.duration===0?(d(1),w()):(this._easeStart=a.browser.now(),this._easeOptions=L,this._onEaseFrame=d,this._onEaseEnd=w,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var d=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(d,w){d=a.wrap(d,-180,180);var L=Math.abs(d-w);return Math.abs(d-360-w)<L&&(d-=360),Math.abs(d+360-w)<L&&(d+=360),d},c.prototype._normalizeCenter=function(d){var w=this.transform;if(!(!w.renderWorldCopies||w.lngRange)){var L=d.lng-w.center.lng;d.lng+=L>180?-360:L<-180?360:0}},c}(a.Evented),Aa=function(c){c===void 0&&(c={}),this.options=c,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Aa.prototype.getDefaultPosition=function(){return"bottom-right"},Aa.prototype.onAdd=function(c){var x=this.options&&this.options.compact;return this._map=c,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=l.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=l.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),x&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),x===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Aa.prototype.onRemove=function(){l.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Aa.prototype._setElementTitle=function(c,x){var d=this._map._getUIString("AttributionControl."+x);c.title=d,c.setAttribute("aria-label",d)},Aa.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Aa.prototype._updateEditLink=function(){var c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));var x=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(c){var d=x.reduce(function(w,L,R){return L.value&&(w+=L.key+"="+L.value+(R<x.length-1?"&":"")),w},"?");c.href=a.config.FEEDBACK_URL+"/"+d+(this._map._hash?this._map._hash.getHashString(!0):""),c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}},Aa.prototype._updateData=function(c){c&&(c.sourceDataType==="metadata"||c.sourceDataType==="visibility"||c.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Aa.prototype._updateAttributions=function(){if(this._map.style){var c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(function(J){return typeof J!="string"?"":J})):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){var x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}var d=this._map.style.sourceCaches;for(var w in d){var L=d[w];if(L.used){var R=L.getSource();R.attribution&&c.indexOf(R.attribution)<0&&c.push(R.attribution)}}c.sort(function(J,te){return J.length-te.length}),c=c.filter(function(J,te){for(var ue=te+1;ue<c.length;ue++)if(c[ue].indexOf(J)>=0)return!1;return!0});var G=c.join(" | ");G!==this._attribHTML&&(this._attribHTML=G,c.length?(this._innerContainer.innerHTML=G,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Aa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ui=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ui.prototype.onAdd=function(c){this._map=c,this._container=l.create("div","mapboxgl-ctrl");var x=l.create("a","mapboxgl-ctrl-logo");return x.target="_blank",x.rel="noopener nofollow",x.href="https://www.mapbox.com/",x.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),x.setAttribute("rel","noopener nofollow"),this._container.appendChild(x),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ui.prototype.onRemove=function(){l.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ui.prototype.getDefaultPosition=function(){return"bottom-left"},ui.prototype._updateLogo=function(c){(!c||c.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},ui.prototype._logoRequired=function(){if(this._map.style){var c=this._map.style.sourceCaches;for(var x in c){var d=c[x].getSource();if(d.mapbox_logo)return!0}return!1}},ui.prototype._updateCompact=function(){var c=this._container.children;if(c.length){var x=c[0];this._map.getCanvasContainer().offsetWidth<250?x.classList.add("mapboxgl-compact"):x.classList.remove("mapboxgl-compact")}};var ql=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ql.prototype.add=function(c){var x=++this._id,d=this._queue;return d.push({callback:c,id:x,cancelled:!1}),x},ql.prototype.remove=function(c){for(var x=this._currentlyRunning,d=x?this._queue.concat(x):this._queue,w=0,L=d;w<L.length;w+=1){var R=L[w];if(R.id===c){R.cancelled=!0;return}}},ql.prototype.run=function(c){c===void 0&&(c=0);var x=this._currentlyRunning=this._queue;this._queue=[];for(var d=0,w=x;d<w.length;d+=1){var L=w[d];if(!L.cancelled&&(L.callback(c),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ql.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Vv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},rc=a.window.HTMLImageElement,Km=a.window.HTMLElement,gf=a.window.ImageBitmap,nh=-2,oh=22,Lo=0,_f=60,Qm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:nh,maxZoom:oh,minPitch:Lo,maxPitch:_f,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},$m=function(g){function c(d){var w=this;if(d=a.extend({},Qm,d),d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<Lo)throw new Error("minPitch must be greater than or equal to "+Lo);if(d.maxPitch!=null&&d.maxPitch>_f)throw new Error("maxPitch must be less than or equal to "+_f);var L=new ti(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(g.call(this,L,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new ql,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Vv,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else if(d.container instanceof Km)this._container=d.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return w._update(!1)}),this.on("moveend",function(){return w._update(!1)}),this.on("zoom",function(){return w._update(!0)}),typeof a.window!="undefined"&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ci(this,d);var R=typeof d.hash=="string"&&d.hash||void 0;this._hash=d.hash&&new Il(R).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Aa({customAttribution:d.customAttribution})),this.addControl(new ui,d.logoPosition),this.on("style.load",function(){w.transform.unmodified&&w.jumpTo(w.style.stylesheet)}),this.on("data",function(G){w._update(G.dataType==="style"),w.fire(new a.Event(G.dataType+"data",G))}),this.on("dataloading",function(G){w.fire(new a.Event(G.dataType+"dataloading",G))})}g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c;var x={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return c.prototype._getMapId=function(){return this._mapId},c.prototype.addControl=function(w,L){if(L===void 0&&(w.getDefaultPosition?L=w.getDefaultPosition():L="top-right"),!w||!w.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var R=w.onAdd(this);this._controls.push(w);var G=this._controlPositions[L];return L.indexOf("bottom")!==-1?G.insertBefore(R,G.firstChild):G.appendChild(R),this},c.prototype.removeControl=function(w){if(!w||!w.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var L=this._controls.indexOf(w);return L>-1&&this._controls.splice(L,1),w.onRemove(this),this},c.prototype.hasControl=function(w){return this._controls.indexOf(w)>-1},c.prototype.resize=function(w){var L=this._containerDimensions(),R=L[0],G=L[1];this._resizeCanvas(R,G),this.transform.resize(R,G),this.painter.resize(R,G);var J=!this._moving;return J&&(this.stop(),this.fire(new a.Event("movestart",w)).fire(new a.Event("move",w))),this.fire(new a.Event("resize",w)),J&&this.fire(new a.Event("moveend",w)),this},c.prototype.getBounds=function(){return this.transform.getBounds()},c.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},c.prototype.setMaxBounds=function(w){return this.transform.setMaxBounds(a.LngLatBounds.convert(w)),this._update()},c.prototype.setMinZoom=function(w){if(w=w==null?nh:w,w>=nh&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between "+nh+" and the current maxZoom, inclusive")},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(w){if(w=w==null?oh:w,w>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.setMinPitch=function(w){if(w=w==null?Lo:w,w<Lo)throw new Error("minPitch must be greater than or equal to "+Lo);if(w>=Lo&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between "+Lo+" and the current maxPitch, inclusive")},c.prototype.getMinPitch=function(){return this.transform.minPitch},c.prototype.setMaxPitch=function(w){if(w=w==null?_f:w,w>_f)throw new Error("maxPitch must be less than or equal to "+_f);if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")},c.prototype.getMaxPitch=function(){return this.transform.maxPitch},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},c.prototype.setRenderWorldCopies=function(w){return this.transform.renderWorldCopies=w,this._update()},c.prototype.project=function(w){return this.transform.locationPoint(a.LngLat.convert(w))},c.prototype.unproject=function(w){return this.transform.pointLocation(a.Point.convert(w))},c.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},c.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},c.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},c.prototype._createDelegatedListener=function(w,L,R){var G=this,J;if(w==="mouseenter"||w==="mouseover"){var te=!1,ue=function(Oe){var Xe=G.getLayer(L)?G.queryRenderedFeatures(Oe.point,{layers:[L]}):[];Xe.length?te||(te=!0,R.call(G,new M(w,G,Oe.originalEvent,{features:Xe}))):te=!1},we=function(){te=!1};return{layer:L,listener:R,delegates:{mousemove:ue,mouseout:we}}}else if(w==="mouseleave"||w==="mouseout"){var be=!1,Ie=function(Oe){var Xe=G.getLayer(L)?G.queryRenderedFeatures(Oe.point,{layers:[L]}):[];Xe.length?be=!0:be&&(be=!1,R.call(G,new M(w,G,Oe.originalEvent)))},Ze=function(Oe){be&&(be=!1,R.call(G,new M(w,G,Oe.originalEvent)))};return{layer:L,listener:R,delegates:{mousemove:Ie,mouseout:Ze}}}else{var Ge=function(Oe){var Xe=G.getLayer(L)?G.queryRenderedFeatures(Oe.point,{layers:[L]}):[];Xe.length&&(Oe.features=Xe,R.call(G,Oe),delete Oe.features)};return{layer:L,listener:R,delegates:(J={},J[w]=Ge,J)}}},c.prototype.on=function(w,L,R){if(R===void 0)return g.prototype.on.call(this,w,L);var G=this._createDelegatedListener(w,L,R);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(G);for(var J in G.delegates)this.on(J,G.delegates[J]);return this},c.prototype.once=function(w,L,R){if(R===void 0)return g.prototype.once.call(this,w,L);var G=this._createDelegatedListener(w,L,R);for(var J in G.delegates)this.once(J,G.delegates[J]);return this},c.prototype.off=function(w,L,R){var G=this;if(R===void 0)return g.prototype.off.call(this,w,L);var J=function(te){for(var ue=te[w],we=0;we<ue.length;we++){var be=ue[we];if(be.layer===L&&be.listener===R){for(var Ie in be.delegates)G.off(Ie,be.delegates[Ie]);return ue.splice(we,1),G}}};return this._delegatedListeners&&this._delegatedListeners[w]&&J(this._delegatedListeners),this},c.prototype.queryRenderedFeatures=function(w,L){if(!this.style)return[];L===void 0&&w!==void 0&&!(w instanceof a.Point)&&!Array.isArray(w)&&(L=w,w=void 0),L=L||{},w=w||[[0,0],[this.transform.width,this.transform.height]];var R;if(w instanceof a.Point||typeof w[0]=="number")R=[a.Point.convert(w)];else{var G=a.Point.convert(w[0]),J=a.Point.convert(w[1]);R=[G,new a.Point(J.x,G.y),J,new a.Point(G.x,J.y),G]}return this.style.queryRenderedFeatures(R,L,this.transform)},c.prototype.querySourceFeatures=function(w,L){return this.style.querySourceFeatures(w,L)},c.prototype.setStyle=function(w,L){return L=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},L),L.diff!==!1&&L.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,L),this):(this._localIdeographFontFamily=L.localIdeographFontFamily,this._updateStyle(w,L))},c.prototype._getUIString=function(w){var L=this._locale[w];if(L==null)throw new Error("Missing UI string '"+w+"'");return L},c.prototype._updateStyle=function(w,L){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),w)this.style=new Ts(this,L||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w):this.style.loadJSON(w),this},c.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ts(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},c.prototype._diffStyle=function(w,L){var R=this;if(typeof w=="string"){var G=this._requestManager.normalizeStyleURL(w),J=this._requestManager.transformRequest(G,a.ResourceType.Style);a.getJSON(J,function(te,ue){te?R.fire(new a.ErrorEvent(te)):ue&&R._updateDiff(ue,L)})}else typeof w=="object"&&this._updateDiff(w,L)},c.prototype._updateDiff=function(w,L){try{this.style.setState(w)&&this._update(!0)}catch(R){a.warnOnce("Unable to perform style diff: "+(R.message||R.error||R)+".  Rebuilding the style from scratch."),this._updateStyle(w,L)}},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(w,L){return this._lazyInitEmptyStyle(),this.style.addSource(w,L),this._update(!0)},c.prototype.isSourceLoaded=function(w){var L=this.style&&this.style.sourceCaches[w];if(L===void 0){this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+w+"'")));return}return L.loaded()},c.prototype.areTilesLoaded=function(){var w=this.style&&this.style.sourceCaches;for(var L in w){var R=w[L],G=R._tiles;for(var J in G){var te=G[J];if(!(te.state==="loaded"||te.state==="errored"))return!1}}return!0},c.prototype.addSourceType=function(w,L,R){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,L,R)},c.prototype.removeSource=function(w){return this.style.removeSource(w),this._update(!0)},c.prototype.getSource=function(w){return this.style.getSource(w)},c.prototype.addImage=function(w,L,R){R===void 0&&(R={});var G=R.pixelRatio;G===void 0&&(G=1);var J=R.sdf;J===void 0&&(J=!1);var te=R.stretchX,ue=R.stretchY,we=R.content;this._lazyInitEmptyStyle();var be=0;if(L instanceof rc||gf&&L instanceof gf){var Ie=a.browser.getImageData(L),Ze=Ie.width,Ge=Ie.height,Oe=Ie.data;this.style.addImage(w,{data:new a.RGBAImage({width:Ze,height:Ge},Oe),pixelRatio:G,stretchX:te,stretchY:ue,content:we,sdf:J,version:be})}else{if(L.width===void 0||L.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Xe=L.width,ft=L.height,Lt=L.data,It=L;this.style.addImage(w,{data:new a.RGBAImage({width:Xe,height:ft},new Uint8Array(Lt)),pixelRatio:G,stretchX:te,stretchY:ue,content:we,sdf:J,version:be,userImage:It}),It.onAdd&&It.onAdd(this,w)}},c.prototype.updateImage=function(w,L){var R=this.style.getImage(w);if(!R)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var G=L instanceof rc||gf&&L instanceof gf?a.browser.getImageData(L):L,J=G.width,te=G.height,ue=G.data;if(J===void 0||te===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(J!==R.data.width||te!==R.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var we=!(L instanceof rc||gf&&L instanceof gf);R.data.replace(ue,we),this.style.updateImage(w,R)},c.prototype.hasImage=function(w){return w?!!this.style.getImage(w):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},c.prototype.removeImage=function(w){this.style.removeImage(w)},c.prototype.loadImage=function(w,L){a.getImage(this._requestManager.transformRequest(w,a.ResourceType.Image),L)},c.prototype.listImages=function(){return this.style.listImages()},c.prototype.addLayer=function(w,L){return this._lazyInitEmptyStyle(),this.style.addLayer(w,L),this._update(!0)},c.prototype.moveLayer=function(w,L){return this.style.moveLayer(w,L),this._update(!0)},c.prototype.removeLayer=function(w){return this.style.removeLayer(w),this._update(!0)},c.prototype.getLayer=function(w){return this.style.getLayer(w)},c.prototype.setLayerZoomRange=function(w,L,R){return this.style.setLayerZoomRange(w,L,R),this._update(!0)},c.prototype.setFilter=function(w,L,R){return R===void 0&&(R={}),this.style.setFilter(w,L,R),this._update(!0)},c.prototype.getFilter=function(w){return this.style.getFilter(w)},c.prototype.setPaintProperty=function(w,L,R,G){return G===void 0&&(G={}),this.style.setPaintProperty(w,L,R,G),this._update(!0)},c.prototype.getPaintProperty=function(w,L){return this.style.getPaintProperty(w,L)},c.prototype.setLayoutProperty=function(w,L,R,G){return G===void 0&&(G={}),this.style.setLayoutProperty(w,L,R,G),this._update(!0)},c.prototype.getLayoutProperty=function(w,L){return this.style.getLayoutProperty(w,L)},c.prototype.setLight=function(w,L){return L===void 0&&(L={}),this._lazyInitEmptyStyle(),this.style.setLight(w,L),this._update(!0)},c.prototype.getLight=function(){return this.style.getLight()},c.prototype.setFeatureState=function(w,L){return this.style.setFeatureState(w,L),this._update()},c.prototype.removeFeatureState=function(w,L){return this.style.removeFeatureState(w,L),this._update()},c.prototype.getFeatureState=function(w){return this.style.getFeatureState(w)},c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var w=0,L=0;return this._container&&(w=this._container.clientWidth||400,L=this._container.clientHeight||300),[w,L]},c.prototype._detectMissingCSS=function(){var w=a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");w!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},c.prototype._setupContainer=function(){var w=this._container;w.classList.add("mapboxgl-map");var L=this._missingCSSCanary=l.create("div","mapboxgl-canary",w);L.style.visibility="hidden",this._detectMissingCSS();var R=this._canvasContainer=l.create("div","mapboxgl-canvas-container",w);this._interactive&&R.classList.add("mapboxgl-interactive"),this._canvas=l.create("canvas","mapboxgl-canvas",R),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var J=this._controlContainer=l.create("div","mapboxgl-control-container",w),te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ue){te[ue]=l.create("div","mapboxgl-ctrl-"+ue,J)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},c.prototype._resizeCanvas=function(w,L){var R=a.browser.devicePixelRatio||1;this._canvas.width=R*w,this._canvas.height=R*L,this._canvas.style.width=w+"px",this._canvas.style.height=L+"px"},c.prototype._setupPainter=function(){var w=a.extend({},s.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),L=this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);if(!L){this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new Ci(L,this.transform),a.webpSupported.testSupport(L)},c.prototype._contextLost=function(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:w}))},c.prototype._contextRestored=function(w){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:w}))},c.prototype._onMapScroll=function(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},c.prototype._update=function(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this},c.prototype._requestRenderFrame=function(w){return this._update(),this._renderTaskQueue.add(w)},c.prototype._cancelRenderFrame=function(w){this._renderTaskQueue.remove(w)},c.prototype._render=function(w){var L=this,R,G=0,J=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(R=J.createQueryEXT(),J.beginQueryEXT(J.TIME_ELAPSED_EXT,R),G=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),!this._removed){var te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ue=this.transform.zoom,we=a.browser.now();this.style.zoomHistory.update(ue,we);var be=new a.EvaluationParameters(ue,{now:we,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ie=be.crossFadingFactor();(Ie!==1||Ie!==this._crossFadingFactor)&&(te=!0,this._crossFadingFactor=Ie),this.style.update(be)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ze=a.browser.now()-G;J.endQueryEXT(J.TIME_ELAPSED_EXT,R),setTimeout(function(){var Xe=J.getQueryObjectEXT(R,J.QUERY_RESULT_EXT)/1e6;J.deleteQueryEXT(R),L.fire(new a.Event("gpu-timing-frame",{cpuTime:Ze,gpuTime:Xe}))},50)}if(this.listens("gpu-timing-layer")){var Ge=this.painter.collectGpuTimers();setTimeout(function(){var Xe=L.painter.queryGpuTimers(Ge);L.fire(new a.Event("gpu-timing-layer",{layerTimes:Xe}))},50)}var Oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return Oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),this._loaded&&!this._fullyLoaded&&!Oe&&(this._fullyLoaded=!0),this}},c.prototype.remove=function(){this._hash&&this._hash.remove();for(var w=0,L=this._controls;w<L.length;w+=1){var R=L[w];R.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof a.window!="undefined"&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext&&G.loseContext(),Hv(this._canvasContainer),Hv(this._controlContainer),Hv(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},c.prototype.triggerRepaint=function(){var w=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(L){w._frame=null,w._render(L)}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(w){this._trackResize&&this.resize({originalEvent:w})._update()},x.showTileBoundaries.get=function(){return!!this._showTileBoundaries},x.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},x.showPadding.get=function(){return!!this._showPadding},x.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},x.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},x.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},x.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},x.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},x.repaint.get=function(){return!!this._repaint},x.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},x.vertices.get=function(){return!!this._vertices},x.vertices.set=function(d){this._vertices=d,this._update()},c.prototype._setCacheLimits=function(w,L){a.setCacheLimits(w,L)},x.version.get=function(){return a.version},Object.defineProperties(c.prototype,x),c}(yf);function Hv(g){g.parentNode&&g.parentNode.removeChild(g)}var zp={showCompass:!0,showZoom:!0,visualizePitch:!1},Au=function(c){var x=this;this.options=a.extend({},zp,c),this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(d){return d.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(d){return x._map.zoomIn({},{originalEvent:d})}),l.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(d){return x._map.zoomOut({},{originalEvent:d})}),l.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(d){x.options.visualizePitch?x._map.resetNorthPitch({},{originalEvent:d}):x._map.resetNorth({},{originalEvent:d})}),this._compassIcon=l.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Au.prototype._updateZoomButtons=function(){var c=this._map.getZoom(),x=c===this._map.getMaxZoom(),d=c===this._map.getMinZoom();this._zoomInButton.disabled=x,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",x.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},Au.prototype._rotateCompassArrow=function(){var c=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=c},Au.prototype.onAdd=function(c){return this._map=c,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jo(this._map,this._compass,this.options.visualizePitch)),this._container},Au.prototype.onRemove=function(){l.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Au.prototype._createButton=function(c,x){var d=l.create("button",c,this._container);return d.type="button",d.addEventListener("click",x),d},Au.prototype._setButtonTitle=function(c,x){var d=this._map._getUIString("NavigationControl."+x);c.title=d,c.setAttribute("aria-label",d)};var Jo=function(c,x,d){d===void 0&&(d=!1),this._clickTolerance=10,this.element=x,this.mouseRotate=new Bt({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,d&&(this.mousePitch=new nr({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener(x,"mousedown",this.mousedown),l.addEventListener(x,"touchstart",this.touchstart,{passive:!1}),l.addEventListener(x,"touchmove",this.touchmove),l.addEventListener(x,"touchend",this.touchend),l.addEventListener(x,"touchcancel",this.reset)};Jo.prototype.down=function(c,x){this.mouseRotate.mousedown(c,x),this.mousePitch&&this.mousePitch.mousedown(c,x),l.disableDrag()},Jo.prototype.move=function(c,x){var d=this.map,w=this.mouseRotate.mousemoveWindow(c,x);if(w&&w.bearingDelta&&d.setBearing(d.getBearing()+w.bearingDelta),this.mousePitch){var L=this.mousePitch.mousemoveWindow(c,x);L&&L.pitchDelta&&d.setPitch(d.getPitch()+L.pitchDelta)}},Jo.prototype.off=function(){var c=this.element;l.removeEventListener(c,"mousedown",this.mousedown),l.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),l.removeEventListener(c,"touchmove",this.touchmove),l.removeEventListener(c,"touchend",this.touchend),l.removeEventListener(c,"touchcancel",this.reset),this.offTemp()},Jo.prototype.offTemp=function(){l.enableDrag(),l.removeEventListener(a.window,"mousemove",this.mousemove),l.removeEventListener(a.window,"mouseup",this.mouseup)},Jo.prototype.mousedown=function(c){this.down(a.extend({},c,{ctrlKey:!0,preventDefault:function(){return c.preventDefault()}}),l.mousePos(this.element,c)),l.addEventListener(a.window,"mousemove",this.mousemove),l.addEventListener(a.window,"mouseup",this.mouseup)},Jo.prototype.mousemove=function(c){this.move(c,l.mousePos(this.element,c))},Jo.prototype.mouseup=function(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()},Jo.prototype.touchstart=function(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=l.touchPos(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return c.preventDefault()}},this._startPos))},Jo.prototype.touchmove=function(c){c.targetTouches.length!==1?this.reset():(this._lastPos=l.touchPos(this.element,c.targetTouches)[0],this.move({preventDefault:function(){return c.preventDefault()}},this._lastPos))},Jo.prototype.touchend=function(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Jo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Mu(g,c,x){if(g=new a.LngLat(g.lng,g.lat),c){var d=new a.LngLat(g.lng-360,g.lat),w=new a.LngLat(g.lng+360,g.lat),L=x.locationPoint(g).distSqr(c);x.locationPoint(d).distSqr(c)<L?g=d:x.locationPoint(w).distSqr(c)<L&&(g=w)}for(;Math.abs(g.lng-x.center.lng)>180;){var R=x.locationPoint(g);if(R.x>=0&&R.y>=0&&R.x<=x.width&&R.y<=x.height)break;g.lng>x.center.lng?g.lng-=360:g.lng+=360}return g}var Gv={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ip(g,c,x){var d=g.classList;for(var w in Gv)d.remove("mapboxgl-"+x+"-anchor-"+w);d.add("mapboxgl-"+x+"-anchor-"+c)}var sh=function(g){function c(x,d){if(g.call(this),(x instanceof a.window.HTMLElement||d)&&(x=a.extend({element:x},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,!x||!x.element){this._defaultMarker=!0,this._element=l.create("div"),this._element.setAttribute("aria-label","Map marker");var w=l.createNS("http://www.w3.org/2000/svg","svg"),L=41,R=27;w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height",L+"px"),w.setAttributeNS(null,"width",R+"px"),w.setAttributeNS(null,"viewBox","0 0 "+R+" "+L);var G=l.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var J=l.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill-rule","nonzero");var te=l.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(3.0, 29.0)"),te.setAttributeNS(null,"fill","#000000");for(var ue=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],we=0,be=ue;we<be.length;we+=1){var Ie=be[we],Ze=l.createNS("http://www.w3.org/2000/svg","ellipse");Ze.setAttributeNS(null,"opacity","0.04"),Ze.setAttributeNS(null,"cx","10.5"),Ze.setAttributeNS(null,"cy","5.80029008"),Ze.setAttributeNS(null,"rx",Ie.rx),Ze.setAttributeNS(null,"ry",Ie.ry),te.appendChild(Ze)}var Ge=l.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"fill",this._color);var Oe=l.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ge.appendChild(Oe);var Xe=l.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"opacity","0.25"),Xe.setAttributeNS(null,"fill","#000000");var ft=l.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Xe.appendChild(ft);var Lt=l.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Lt.setAttributeNS(null,"fill","#FFFFFF");var It=l.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Xt=l.createNS("http://www.w3.org/2000/svg","circle");Xt.setAttributeNS(null,"fill","#000000"),Xt.setAttributeNS(null,"opacity","0.25"),Xt.setAttributeNS(null,"cx","5.5"),Xt.setAttributeNS(null,"cy","5.5"),Xt.setAttributeNS(null,"r","5.4999962");var er=l.createNS("http://www.w3.org/2000/svg","circle");er.setAttributeNS(null,"fill","#FFFFFF"),er.setAttributeNS(null,"cx","5.5"),er.setAttributeNS(null,"cy","5.5"),er.setAttributeNS(null,"r","5.4999962"),It.appendChild(Xt),It.appendChild(er),J.appendChild(te),J.appendChild(Ge),J.appendChild(Xe),J.appendChild(Lt),J.appendChild(It),w.appendChild(J),w.setAttributeNS(null,"height",L*this._scale+"px"),w.setAttributeNS(null,"width",R*this._scale+"px"),this._element.appendChild(w),this._offset=a.Point.convert(x&&x.offset||[0,-14])}else this._element=x.element,this._offset=a.Point.convert(x&&x.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ot){Ot.preventDefault()}),this._element.addEventListener("mousedown",function(Ot){Ot.preventDefault()}),Ip(this._element,this._anchor,"marker"),this._popup=null}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.addTo=function(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},c.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),l.remove(this._element),this._popup&&this._popup.remove(),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(d){return this._lngLat=a.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},c.prototype.getElement=function(){return this._element},c.prototype.setPopup=function(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){var w=38.1,L=13.5,R=Math.sqrt(Math.pow(L,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-w],"bottom-left":[R,(w-L+R)*-1],"bottom-right":[-R,(w-L+R)*-1],left:[L,(w-L)*-1],right:[-L,(w-L)*-1]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},c.prototype._onKeyPress=function(d){var w=d.code,L=d.charCode||d.keyCode;(w==="Space"||w==="Enter"||L===32||L===13)&&this.togglePopup()},c.prototype._onMapClick=function(d){var w=d.originalEvent.target,L=this._element;this._popup&&(w===L||L.contains(w))&&this.togglePopup()},c.prototype.getPopup=function(){return this._popup},c.prototype.togglePopup=function(){var d=this._popup;if(d)d.isOpen()?d.remove():d.addTo(this._map);else return this;return this},c.prototype._update=function(d){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Mu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(w="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var L="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?L="rotateX(0deg)":this._pitchAlignment==="map"&&(L="rotateX("+this._map.getPitch()+"deg)"),(!d||d.type==="moveend")&&(this._pos=this._pos.round()),l.setTransform(this._element,Gv[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+L+" "+w)}},c.prototype.getOffset=function(){return this._offset},c.prototype.setOffset=function(d){return this._offset=a.Point.convert(d),this._update(),this},c.prototype._onMove=function(d){if(!this._isDragging){var w=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},c.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},c.prototype._addDragHandler=function(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},c.prototype.setDraggable=function(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},c.prototype.isDraggable=function(){return this._draggable},c.prototype.setRotation=function(d){return this._rotation=d||0,this._update(),this},c.prototype.getRotation=function(){return this._rotation},c.prototype.setRotationAlignment=function(d){return this._rotationAlignment=d||"auto",this._update(),this},c.prototype.getRotationAlignment=function(){return this._rotationAlignment},c.prototype.setPitchAlignment=function(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this},c.prototype.getPitchAlignment=function(){return this._pitchAlignment},c}(a.Evented),ey={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},xf;function Zv(g){xf!==void 0?g(xf):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(c){xf=c.state!=="denied",g(xf)}):(xf=!!a.window.navigator.geolocation,g(xf))}var lh=0,ac=!1,c1=function(g){function c(x){g.call(this),this.options=a.extend({},ey,x),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(d){return this._map=d,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Zv(this._setupUI),this._container},c.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),l.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lh=0,ac=!1},c.prototype._isOutOfMapMaxBounds=function(d){var w=this._map.getMaxBounds(),L=d.coords;return w&&(L.longitude<w.getWest()||L.longitude>w.getEast()||L.latitude<w.getSouth()||L.latitude>w.getNorth())},c.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},c.prototype._onSuccess=function(d){if(this._map){if(this._isOutOfMapMaxBounds(d)){this._setErrorState(),this.fire(new a.Event("outofmaxbounds",d)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",d)),this._finish()}},c.prototype._updateCamera=function(d){var w=new a.LngLat(d.coords.longitude,d.coords.latitude),L=d.coords.accuracy,R=this._map.getBearing(),G=a.extend({bearing:R},this.options.fitBoundsOptions);this._map.fitBounds(w.toBounds(L),G,{geolocateSource:!0})},c.prototype._updateMarker=function(d){if(d){var w=new a.LngLat(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(w).addTo(this._map),this._userLocationDotMarker.setLngLat(w).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},c.prototype._updateCircleRadius=function(){var d=this._map._container.clientHeight/2,w=this._map.unproject([0,d]),L=this._map.unproject([1,d]),R=w.distanceTo(L),G=Math.ceil(2*this._accuracy/R);this._circleElement.style.width=G+"px",this._circleElement.style.height=G+"px"},c.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},c.prototype._onError=function(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var w=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&ac)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",d)),this._finish()}},c.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},c.prototype._setupUI=function(d){var w=this;if(this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this._geolocateButton=l.create("button","mapboxgl-ctrl-geolocate",this._container),l.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",d===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L)}else{var R=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=R,this._geolocateButton.setAttribute("aria-label",R)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=l.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new sh(this._dotElement),this._circleElement=l.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(G){var J=G.originalEvent&&G.originalEvent.type==="resize";!G.geolocateSource&&w._watchState==="ACTIVE_LOCK"&&!J&&(w._watchState="BACKGROUND",w._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),w._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),w.fire(new a.Event("trackuserlocationend")))})},c.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lh--,ac=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lh++;var d;lh>1?(d={maximumAge:6e5,timeout:0},ac=!0):(d=this.options.positionOptions,ac=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,d)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},c.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},c}(a.Evented),ty={maxWidth:100,unit:"metric"},ic=function(c){this.options=a.extend({},ty,c),a.bindAll(["_onMove","setUnit"],this)};ic.prototype.getDefaultPosition=function(){return"bottom-left"},ic.prototype._onMove=function(){ry(this._map,this._container,this.options)},ic.prototype.onAdd=function(c){return this._map=c,this._container=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",c.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ic.prototype.onRemove=function(){l.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ic.prototype.setUnit=function(c){this.options.unit=c,ry(this._map,this._container,this.options)};function ry(g,c,x){var d=x&&x.maxWidth||100,w=g._container.clientHeight/2,L=g.unproject([0,w]),R=g.unproject([d,w]),G=L.distanceTo(R);if(x&&x.unit==="imperial"){var J=3.2808*G;if(J>5280){var te=J/5280;uh(c,d,te,g._getUIString("ScaleControl.Miles"))}else uh(c,d,J,g._getUIString("ScaleControl.Feet"))}else if(x&&x.unit==="nautical"){var ue=G/1852;uh(c,d,ue,g._getUIString("ScaleControl.NauticalMiles"))}else G>=1e3?uh(c,d,G/1e3,g._getUIString("ScaleControl.Kilometers")):uh(c,d,G,g._getUIString("ScaleControl.Meters"))}function uh(g,c,x,d){var w=v1(x),L=w/x;g.style.width=c*L+"px",g.innerHTML=w+"&nbsp;"+d}function h1(g){var c=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10));return Math.round(g*c)/c}function v1(g){var c=Math.pow(10,(""+Math.floor(g)).length-1),x=g/c;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:x>=1?1:h1(x),c*x}var Qs=function(c){this._fullscreen=!1,c&&c.container&&(c.container instanceof a.window.HTMLElement?this._container=c.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Qs.prototype.onAdd=function(c){return this._map=c,this._container||(this._container=this._map.getContainer()),this._controlContainer=l.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Qs.prototype.onRemove=function(){l.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Qs.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Qs.prototype._setupUI=function(){var c=this._fullscreenButton=l.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);l.create("span","mapboxgl-ctrl-icon",c).setAttribute("aria-hidden",!0),c.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Qs.prototype._updateTitle=function(){var c=this._getTitle();this._fullscreenButton.setAttribute("aria-label",c),this._fullscreenButton.title=c},Qs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Qs.prototype._isFullscreen=function(){return this._fullscreen},Qs.prototype._changeIcon=function(){var c=a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement;c===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Qs.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var d1={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},p1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),e3=function(g){function c(x){g.call(this),this.options=a.extend(Object.create(d1),x),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return g&&(c.__proto__=g),c.prototype=Object.create(g&&g.prototype),c.prototype.constructor=c,c.prototype.addTo=function(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&l.remove(this._content),this._container&&(l.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(d){return this._lngLat=a.LngLat.convert(d),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},c.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},c.prototype.getElement=function(){return this._container},c.prototype.setText=function(d){return this.setDOMContent(a.window.document.createTextNode(d))},c.prototype.setHTML=function(d){var w=a.window.document.createDocumentFragment(),L=a.window.document.createElement("body"),R;for(L.innerHTML=d;R=L.firstChild,!!R;)w.appendChild(R);return this.setDOMContent(w)},c.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},c.prototype.setMaxWidth=function(d){return this.options.maxWidth=d,this._update(),this},c.prototype.setDOMContent=function(d){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=l.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(d),this._createCloseButton(),this._update(),this._focusFirstElement(),this},c.prototype.addClassName=function(d){this._container&&this._container.classList.add(d)},c.prototype.removeClassName=function(d){this._container&&this._container.classList.remove(d)},c.prototype.setOffset=function(d){return this.options.offset=d,this._update(),this},c.prototype.toggleClassName=function(d){if(this._container)return this._container.classList.toggle(d)},c.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=l.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},c.prototype._onMouseUp=function(d){this._update(d.point)},c.prototype._onMouseMove=function(d){this._update(d.point)},c.prototype._onDrag=function(d){this._update(d.point)},c.prototype._update=function(d){var w=this,L=this._lngLat||this._trackPointer;if(!(!this._map||!L||!this._content)&&(this._container||(this._container=l.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=l.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ie){return w._container.classList.add(Ie)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mu(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!d))){var R=this._pos=this._trackPointer&&d?d:this._map.project(this._lngLat),G=this.options.anchor,J=m1(this.options.offset);if(!G){var te=this._container.offsetWidth,ue=this._container.offsetHeight,we;R.y+J.bottom.y<ue?we=["top"]:R.y>this._map.transform.height-ue?we=["bottom"]:we=[],R.x<te/2?we.push("left"):R.x>this._map.transform.width-te/2&&we.push("right"),we.length===0?G="bottom":G=we.join("-")}var be=R.add(J[G]).round();l.setTransform(this._container,Gv[G]+" translate("+be.x+"px,"+be.y+"px)"),Ip(this._container,G,"popup")}},c.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var d=this._container.querySelector(p1);d&&d.focus()}},c.prototype._onClose=function(){this.remove()},c}(a.Evented);function m1(g){if(g)if(typeof g=="number"){var c=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new a.Point(0,0),top:new a.Point(0,g),"top-left":new a.Point(c,c),"top-right":new a.Point(-c,c),bottom:new a.Point(0,-g),"bottom-left":new a.Point(c,-c),"bottom-right":new a.Point(-c,-c),left:new a.Point(g,0),right:new a.Point(-g,0)}}else if(g instanceof a.Point||Array.isArray(g)){var x=a.Point.convert(g);return{center:x,top:x,"top-left":x,"top-right":x,bottom:x,"bottom-left":x,"bottom-right":x,left:x,right:x}}else return{center:a.Point.convert(g.center||[0,0]),top:a.Point.convert(g.top||[0,0]),"top-left":a.Point.convert(g["top-left"]||[0,0]),"top-right":a.Point.convert(g["top-right"]||[0,0]),bottom:a.Point.convert(g.bottom||[0,0]),"bottom-left":a.Point.convert(g["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(g["bottom-right"]||[0,0]),left:a.Point.convert(g.left||[0,0]),right:a.Point.convert(g.right||[0,0])};else return m1(new a.Point(0,0))}var bn={version:a.version,supported:s,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:$m,NavigationControl:Au,GeolocateControl:c1,AttributionControl:Aa,ScaleControl:ic,FullscreenControl:Qs,Popup:e3,Marker:sh,Style:Ts,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:Br,clearPrewarmedResources:ca,get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(g){a.config.ACCESS_TOKEN=g},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(g){a.config.API_URL=g},get workerCount(){return Qt.workerCount},set workerCount(g){Qt.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage:function(c){a.clearTileCache(c)},workerUrl:""};return bn}),r})});var fH=ve((hbe,uH)=>{uH.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}});var Ib=ve(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var Zs=63710088e-1,oA={centimeters:Zs*100,centimetres:Zs*100,degrees:360/(2*Math.PI),feet:Zs*3.28084,inches:Zs*39.37,kilometers:Zs/1e3,kilometres:Zs/1e3,meters:Zs,metres:Zs,miles:Zs/1609.344,millimeters:Zs*1e3,millimetres:Zs*1e3,nauticalmiles:Zs/1852,radians:1,yards:Zs*1.0936},nA={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ev(e,t,r={}){let i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function vde(e,t,r={}){switch(e){case"Point":return sA(t).geometry;case"LineString":return uA(t).geometry;case"Polygon":return lA(t).geometry;case"MultiPoint":return hH(t).geometry;case"MultiLineString":return cH(t).geometry;case"MultiPolygon":return vH(t).geometry;default:throw new Error(e+" is invalid")}}function sA(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Db(e[0])||!Db(e[1]))throw new Error("coordinates must contain numbers");return ev({type:"Point",coordinates:e},t,r)}function dde(e,t,r={}){return zb(e.map(i=>sA(i,t)),r)}function lA(e,t,r={}){for(let a of e){if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(a[a.length-1].length!==a[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return ev({type:"Polygon",coordinates:e},t,r)}function pde(e,t,r={}){return zb(e.map(i=>lA(i,t)),r)}function uA(e,t,r={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return ev({type:"LineString",coordinates:e},t,r)}function mde(e,t,r={}){return zb(e.map(i=>uA(i,t)),r)}function zb(e,t={}){let r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function cH(e,t,r={}){return ev({type:"MultiLineString",coordinates:e},t,r)}function hH(e,t,r={}){return ev({type:"MultiPoint",coordinates:e},t,r)}function vH(e,t,r={}){return ev({type:"MultiPolygon",coordinates:e},t,r)}function yde(e,t,r={}){return ev({type:"GeometryCollection",geometries:e},t,r)}function gde(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");let r=Math.pow(10,t||0);return Math.round(e*r)/r}function dH(e,t="kilometers"){let r=oA[t];if(!r)throw new Error(t+" units is invalid");return e*r}function fA(e,t="kilometers"){let r=oA[t];if(!r)throw new Error(t+" units is invalid");return e/r}function _de(e,t){return pH(fA(e,t))}function xde(e){let t=e%360;return t<0&&(t+=360),t}function bde(e){return e=e%360,e>0?e>180?e-360:e:e<-180?e+360:e}function pH(e){return e%(2*Math.PI)*180/Math.PI}function wde(e){return e%360*Math.PI/180}function Tde(e,t="kilometers",r="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return dH(fA(e,t),r)}function Ade(e,t="meters",r="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");let i=nA[t];if(!i)throw new Error("invalid original units");let a=nA[r];if(!a)throw new Error("invalid final units");return e/i*a}function Db(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Mde(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Sde(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!Db(t))throw new Error("bbox must only contain numbers")})}function kde(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}Si.areaFactors=nA;Si.azimuthToBearing=bde;Si.bearingToAzimuth=xde;Si.convertArea=Ade;Si.convertLength=Tde;Si.degreesToRadians=wde;Si.earthRadius=Zs;Si.factors=oA;Si.feature=ev;Si.featureCollection=zb;Si.geometry=vde;Si.geometryCollection=yde;Si.isNumber=Db;Si.isObject=Mde;Si.lengthToDegrees=_de;Si.lengthToRadians=fA;Si.lineString=uA;Si.lineStrings=mde;Si.multiLineString=cH;Si.multiPoint=hH;Si.multiPolygon=vH;Si.point=sA;Si.points=dde;Si.polygon=lA;Si.polygons=pde;Si.radiansToDegrees=pH;Si.radiansToLength=dH;Si.round=gde;Si.validateBBox=Sde;Si.validateId=kde});var Fb=ve(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});var ls=Ib();function n1(e,t,r){if(e!==null)for(var i,a,s,l,f,h,v,m=0,b=0,T,S=e.type,C=S==="FeatureCollection",P=S==="Feature",E=C?e.features.length:1,I=0;I<E;I++){v=C?e.features[I].geometry:P?e.geometry:e,T=v?v.type==="GeometryCollection":!1,f=T?v.geometries.length:1;for(var q=0;q<f;q++){var B=0,z=0;if(l=T?v.geometries[q]:v,l!==null){h=l.coordinates;var O=l.type;switch(m=r&&(O==="Polygon"||O==="MultiPolygon")?1:0,O){case null:break;case"Point":if(t(h,b,I,B,z)===!1)return!1;b++,B++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(t(h[i],b,I,B,z)===!1)return!1;b++,O==="MultiPoint"&&B++}O==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(a=0;a<h[i].length-m;a++){if(t(h[i][a],b,I,B,z)===!1)return!1;b++}O==="MultiLineString"&&B++,O==="Polygon"&&z++}O==="Polygon"&&B++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(z=0,a=0;a<h[i].length;a++){for(s=0;s<h[i][a].length-m;s++){if(t(h[i][a][s],b,I,B,z)===!1)return!1;b++}z++}B++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(n1(l.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cde(e,t,r,i){var a=r;return n1(e,function(s,l,f,h,v){l===0&&r===void 0?a=s:a=t(a,s,l,f,h,v)},i),a}function mH(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function Ede(e,t,r){var i=r;return mH(e,function(a,s){s===0&&r===void 0?i=a:i=t(i,a,s)}),i}function yH(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function Lde(e,t,r){var i=r;return yH(e,function(a,s){s===0&&r===void 0?i=a:i=t(i,a,s)}),i}function Pde(e){var t=[];return n1(e,function(r){t.push(r)}),t}function cA(e,t){var r,i,a,s,l,f,h,v,m,b,T=0,S=e.type==="FeatureCollection",C=e.type==="Feature",P=S?e.features.length:1;for(r=0;r<P;r++){for(f=S?e.features[r].geometry:C?e.geometry:e,v=S?e.features[r].properties:C?e.properties:{},m=S?e.features[r].bbox:C?e.bbox:void 0,b=S?e.features[r].id:C?e.id:void 0,h=f?f.type==="GeometryCollection":!1,l=h?f.geometries.length:1,a=0;a<l;a++){if(s=h?f.geometries[a]:f,s===null){if(t(null,T,v,m,b)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,T,v,m,b)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],T,v,m,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function Dde(e,t,r){var i=r;return cA(e,function(a,s,l,f,h){s===0&&r===void 0?i=a:i=t(i,a,s,l,f,h)}),i}function Rb(e,t){cA(e,function(r,i,a,s,l){var f=r===null?null:r.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(ls.feature.call(void 0,r,a,{bbox:s,id:l}),i,0)===!1?!1:void 0}var h;switch(f){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var v=0;v<r.coordinates.length;v++){var m=r.coordinates[v],b={type:h,coordinates:m};if(t(ls.feature.call(void 0,b,a),i,v)===!1)return!1}})}function zde(e,t,r){var i=r;return Rb(e,function(a,s,l){s===0&&l===0&&r===void 0?i=a:i=t(i,a,s,l)}),i}function gH(e,t){Rb(e,function(r,i,a){var s=0;if(r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var f,h=0,v=0,m=0;if(n1(r,function(b,T,S,C,P){if(f===void 0||i>h||C>v||P>m){f=b,h=i,v=C,m=P,s=0;return}var E=ls.lineString.call(void 0,[f,b],r.properties);if(t(E,i,a,P,s)===!1)return!1;s++,f=b})===!1)return!1}}})}function Ide(e,t,r){var i=r,a=!1;return gH(e,function(s,l,f,h,v){a===!1&&r===void 0?i=s:i=t(i,s,l,f,h,v),a=!0}),i}function _H(e,t){if(!e)throw new Error("geojson is required");Rb(e,function(r,i,a){if(r.geometry!==null){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(t(r,i,a,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<l.length;f++)if(t(ls.lineString.call(void 0,l[f],r.properties),i,a,f)===!1)return!1;break}}})}function Rde(e,t,r){var i=r;return _H(e,function(a,s,l,f){s===0&&r===void 0?i=a:i=t(i,a,s,l,f)}),i}function Fde(e,t){if(t=t||{},!ls.isObject.call(void 0,t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties,f;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,f=e.features[r].geometry;break;case"Feature":l=l||e.properties,f=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=e;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var h=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),ls.lineString.call(void 0,[h[s],h[s+1]],l,t);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s-1),ls.lineString.call(void 0,[h[a][s],h[a][s+1]],l,t);case"MultiLineString":return i<0&&(i=h.length+i),s<0&&(s=h[i].length+s-1),ls.lineString.call(void 0,[h[i][s],h[i][s+1]],l,t);case"MultiPolygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a),s<0&&(s=h[i][a].length-s-1),ls.lineString.call(void 0,[h[i][a][s],h[i][a][s+1]],l,t)}throw new Error("geojson is invalid")}function qde(e,t){if(t=t||{},!ls.isObject.call(void 0,t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties,f;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,f=e.features[r].geometry;break;case"Feature":l=l||e.properties,f=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=e;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var h=f.coordinates;switch(f.type){case"Point":return ls.point.call(void 0,h,l,t);case"MultiPoint":return i<0&&(i=h.length+i),ls.point.call(void 0,h[i],l,t);case"LineString":return s<0&&(s=h.length+s),ls.point.call(void 0,h[s],l,t);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s),ls.point.call(void 0,h[a][s],l,t);case"MultiLineString":return i<0&&(i=h.length+i),s<0&&(s=h[i].length+s),ls.point.call(void 0,h[i][s],l,t);case"MultiPolygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a),s<0&&(s=h[i][a].length-s),ls.point.call(void 0,h[i][a][s],l,t)}throw new Error("geojson is invalid")}vo.coordAll=Pde;vo.coordEach=n1;vo.coordReduce=Cde;vo.featureEach=yH;vo.featureReduce=Lde;vo.findPoint=qde;vo.findSegment=Fde;vo.flattenEach=Rb;vo.flattenReduce=zde;vo.geomEach=cA;vo.geomReduce=Dde;vo.lineEach=_H;vo.lineReduce=Rde;vo.propEach=mH;vo.propReduce=Ede;vo.segmentEach=gH;vo.segmentReduce=Ide});var AH=ve(qb=>{"use strict";Object.defineProperty(qb,"__esModule",{value:!0});var xH=Ib(),Nde=Fb();function TH(e){return Nde.geomReduce.call(void 0,e,(t,r)=>t+Bde(r),0)}function Bde(e){let t=0,r;switch(e.type){case"Polygon":return bH(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=bH(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function bH(e){let t=0;if(e&&e.length>0){t+=Math.abs(wH(e[0]));for(let r=1;r<e.length;r++)t-=Math.abs(wH(e[r]))}return t}var Ode=xH.earthRadius*xH.earthRadius/2,hA=Math.PI/180;function wH(e){let t=e.length-1;if(t<=2)return 0;let r=0,i=0;for(;i<t;){let a=e[i],s=e[i+1===t?0:i+1],l=e[i+2>=t?(i+2)%t:i+2],f=a[0]*hA,h=s[1]*hA,v=l[0]*hA;r+=(v-f)*Math.sin(h),i++}return r*Ode}var Ude=TH;qb.area=TH;qb.default=Ude});var SH=ve(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});var Vde=Ib(),Hde=Fb();function MH(e,t={}){let r=0,i=0,a=0;return Hde.coordEach.call(void 0,e,function(s){r+=s[0],i+=s[1],a++},!0),Vde.point.call(void 0,[r/a,i/a],t.properties)}var Gde=MH;Nb.centroid=MH;Nb.default=Gde});var CH=ve(Bb=>{"use strict";Object.defineProperty(Bb,"__esModule",{value:!0});var Zde=Fb();function kH(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return Zde.coordEach.call(void 0,e,i=>{r[0]>i[0]&&(r[0]=i[0]),r[1]>i[1]&&(r[1]=i[1]),r[2]<i[0]&&(r[2]=i[0]),r[3]<i[1]&&(r[3]=i[1])}),r}var Yde=kH;Bb.bbox=kH;Bb.default=Yde});var vA=ve((gbe,zH)=>{"use strict";var Wde=ja(),PH=fH(),{area:Xde}=AH(),{centroid:jde}=SH(),{bbox:Jde}=CH(),EH=d_(),gm=wh(),Kde=fc(),Qde=_y(),Ob=rx(),LH=Object.keys(PH),$de={"ISO-3":EH,"USA-states":EH,"country names":epe};function epe(e){for(var t=0;t<LH.length;t++){var r=LH[t],i=new RegExp(PH[r]);if(i.test(e.trim().toLowerCase()))return r}return gm.log("Unrecognized country name: "+e+"."),!1}function tpe(e,t,r){if(!t||typeof t!="string")return!1;var i=$de[e](t),a,s,l;if(i){if(e==="USA-states")for(a=[],l=0;l<r.length;l++)s=r[l],s.properties&&s.properties.gu&&s.properties.gu==="USA"&&a.push(s);else a=r;for(l=0;l<a.length;l++)if(s=a[l],s.id===i)return s;gm.log(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function rpe(e){var t=e.geometry,r=t.coordinates,i=e.id,a=[],s,l,f,h;function v(m){for(var b=0;b<m.length-1;b++)if(m[b][0]>0&&m[b+1][0]<0)return b;return null}switch(i==="RUS"||i==="FJI"?s=function(m){var b;if(v(m)===null)b=m;else for(b=new Array(m.length),h=0;h<m.length;h++)b[h]=[m[h][0]<0?m[h][0]+360:m[h][0],m[h][1]];a.push(Ob.tester(b))}:i==="ATA"?s=function(m){var b=v(m);if(b===null)return a.push(Ob.tester(m));var T=new Array(m.length+1),S=0;for(h=0;h<m.length;h++)h>b?T[S++]=[m[h][0]+360,m[h][1]]:h===b?(T[S++]=m[h],T[S++]=[m[h][0],-90]):T[S++]=m[h];var C=Ob.tester(T);C.pts.pop(),a.push(C)}:s=function(m){a.push(Ob.tester(m))},t.type){case"MultiPolygon":for(l=0;l<r.length;l++)for(f=0;f<r[l].length;f++)s(r[l][f]);break;case"Polygon":for(l=0;l<r.length;l++)s(r[l]);break}return a}function DH(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},i=typeof t=="string"?r[t]:t;return Kde(i)?i:(gm.error("Oops ... something went wrong when fetching "+t),!1)}function ape(e){var t=e[0].trace,r=DH(t);if(!r)return!1;var i={},a=[],s;for(s=0;s<t._length;s++){var l=e[s];(l.loc||l.loc===0)&&(i[l.loc]=l)}function f(m){var b=Qde(m,t.featureidkey||"id").get(),T=i[b];if(T){var S=m.geometry;if(S.type==="Polygon"||S.type==="MultiPolygon"){var C={type:"Feature",id:b,geometry:S,properties:{}};C.geometry.coordinates.length>0?C.properties.ct=ipe(C):C.properties.ct=[NaN,NaN],T.fIn=m,T.fOut=C,a.push(C)}else gm.log(["Location",T.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[b]}switch(r.type){case"FeatureCollection":var h=r.features;for(s=0;s<h.length;s++)f(h[s]);break;case"Feature":f(r);break;default:return gm.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var v in i)gm.log(["Location *"+v+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return a}function ipe(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var i=t.coordinates,a=0,s=0;s<i.length;s++){var l={type:"Polygon",coordinates:i[s]},f=Xde(l);f>a&&(a=f,r=l)}else r=t;return jde(r).geometry.coordinates}function npe(e){var t=window.PlotlyGeoAssets||{},r=[];function i(h){return new Promise(function(v,m){Wde.json(h,function(b,T){if(b){delete t[h];var S=b.status===404?'GeoJSON at URL "'+h+'" does not exist.':"Unexpected error while fetching from "+h;return m(new Error(S))}return t[h]=T,v(T)})})}function a(h){return new Promise(function(v,m){var b=0,T=setInterval(function(){if(t[h]&&t[h]!=="pending")return clearInterval(T),v(t[h]);if(b>100)return clearInterval(T),m("Unexpected error while fetching from "+h);b++},50)})}for(var s=0;s<e.length;s++){var l=e[s][0].trace,f=l.geojson;typeof f=="string"&&(t[f]?t[f]==="pending"&&r.push(a(f)):(t[f]="pending",r.push(i(f))))}return r}function ope(e){return Jde(e)}zH.exports={locationToFeature:tpe,feature2polygons:rpe,getTraceGeojson:DH,extractTraceFeature:ape,fetchTraceGeoData:npe,computeBbox:ope}});var NH=ve((_be,qH)=>{"use strict";var Vd=Ft(),spe=co().sanitizeHTML,lpe=QT(),IH=Dc();function RH(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=IH.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var uu=RH.prototype;uu.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=Ub(t)};uu.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};uu.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};uu.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};uu.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};uu.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};uu.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!Ub(e)){var r=upe(e);t.addSource(this.idSource,r)}};uu.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var i=t[r].id;if(typeof i=="string"&&i.indexOf(IH.traceLayerPrefix)===0){e=i;break}}return e};uu.updateLayer=function(e){var t=this.subplot,r=FH(e),i=this.lookupBelow(),a=this.findFollowingMapboxLayerId(i);this.removeLayer(),Ub(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},a),this.layerType=e.type,this.below=i};uu.updateStyle=function(e){if(Ub(e)){var t=FH(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};uu.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};uu.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function Ub(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return Vd.isPlainObject(t)||typeof t=="string"&&t.length>0}function FH(e){var t={},r={};switch(e.type){case"circle":Vd.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":Vd.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":Vd.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,a=lpe(i.textposition,i.iconsize);Vd.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset,"symbol-placement":i.placement}),Vd.extendFlat(r,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity});break;case"raster":Vd.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function upe(e){var t=e.sourcetype,r=e.source,i={type:t},a;return t==="geojson"?a="data":t==="vector"?a=typeof r=="string"?"url":"tiles":t==="raster"?(a="tiles",i.tileSize=256):t==="image"&&(a="url",i.coordinates=e.coordinates),i[a]=r,e.sourceattribution&&(i.attribution=spe(e.sourceattribution)),i}qH.exports=function(t,r,i){var a=new RH(t,r);return a.update(i),a}});var WH=ve((xbe,YH)=>{"use strict";var dA=iA(),pA=Ft(),VH=vA(),BH=la(),fpe=Yi(),cpe=Xl(),Vb=If(),HH=Sd(),hpe=HH.drawMode,vpe=HH.selectMode,dpe=qf().prepSelect,ppe=qf().clearOutline,mpe=qf().clearSelectionsCache,ype=qf().selectOnClick,tv=Dc(),gpe=NH();function GH(e,t){this.id=t,this.gd=e;var r=e._fullLayout,i=e._context;this.container=r._glcontainer.node(),this.isStatic=i.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var Un=GH.prototype;Un.plot=function(e,t,r){var i=this,a=t[i.id];i.map&&a.accesstoken!==i.accessToken&&(i.map.remove(),i.map=null,i.styleObj=null,i.traceHash={},i.layerList=[]);var s;i.map?s=new Promise(function(l,f){i.updateMap(e,t,l,f)}):s=new Promise(function(l,f){i.createMap(e,t,l,f)}),r.push(s)};Un.createMap=function(e,t,r,i){var a=this,s=t[a.id],l=a.styleObj=ZH(s.style,t);a.accessToken=s.accesstoken;var f=s.bounds,h=f?[[f.west,f.south],[f.east,f.north]]:null,v=a.map=new dA.Map({container:a.div,style:l.style,center:mA(s.center),zoom:s.zoom,bearing:s.bearing,pitch:s.pitch,maxBounds:h,interactive:!a.isStatic,preserveDrawingBuffer:a.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new dA.AttributionControl({compact:!0}));v._canvas.style.left="0px",v._canvas.style.top="0px",a.rejectOnError(i),a.isStatic||a.initFx(e,t);var m=[];m.push(new Promise(function(b){v.once("load",b)})),m=m.concat(VH.fetchTraceGeoData(e)),Promise.all(m).then(function(){a.fillBelowLookup(e,t),a.updateData(e),a.updateLayout(t),a.resolveOnRender(r)}).catch(i)};Un.updateMap=function(e,t,r,i){var a=this,s=a.map,l=t[this.id];a.rejectOnError(i);var f=[],h=ZH(l.style,t);JSON.stringify(a.styleObj)!==JSON.stringify(h)&&(a.styleObj=h,s.setStyle(h.style),a.traceHash={},f.push(new Promise(function(v){s.once("styledata",v)}))),f=f.concat(VH.fetchTraceGeoData(e)),Promise.all(f).then(function(){a.fillBelowLookup(e,t),a.updateData(e),a.updateLayout(t),a.resolveOnRender(r)}).catch(i)};Un.fillBelowLookup=function(e,t){var r=t[this.id],i=r.layers,a,s,l=this.belowLookup={},f=!1;for(a=0;a<e.length;a++){var h=e[a][0].trace,v=h._module;typeof h.below=="string"?s=h.below:v.getBelow&&(s=v.getBelow(h,this)),s===""&&(f=!0),l["trace-"+h.uid]=s||""}for(a=0;a<i.length;a++){var m=i[a];typeof m.below=="string"?s=m.below:f?s="traces":s="",l["layout-"+a]=s}var b={},T,S;for(T in l)s=l[T],b[s]?b[s].push(T):b[s]=[T];for(s in b){var C=b[s];if(C.length>1)for(a=0;a<C.length;a++)T=C[a],T.indexOf("trace-")===0?(S=T.split("trace-")[1],this.traceHash[S]&&(this.traceHash[S].below=null)):T.indexOf("layout-")===0&&(S=T.split("layout-")[1],this.layerList[S]&&(this.layerList[S].below=null))}};var OH={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};Un.updateData=function(e){var t=this.traceHash,r,i,a,s,l=e.slice().sort(function(b,T){return OH[b[0].trace.type]-OH[T[0].trace.type]});for(a=0;a<l.length;a++){var f=l[a];i=f[0].trace,r=t[i.uid];var h=!1;r&&(r.type===i.type?(r.update(f),h=!0):r.dispose()),!h&&i._module&&(t[i.uid]=i._module.plot(this,f))}var v=Object.keys(t);e:for(a=0;a<v.length;a++){var m=v[a];for(s=0;s<e.length;s++)if(i=e[s][0].trace,m===i.uid)continue e;r=t[m],r.dispose(),delete t[m]}};Un.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(mA(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};Un.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};Un.rejectOnError=function(e){var t=this.map;function r(){e(new Error(tv.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};Un.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(i){return t.project(i).x}},t.yaxis={_id:"y",c2p:function(i){return t.project(i).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},fpe.setConvert(t.mockAxis,e)};Un.initFx=function(e,t){var r=this,i=r.gd,a=r.map;a.on("moveend",function(f){if(r.map){var h=i._fullLayout;if(f.originalEvent||r.wheeling){var v=h[r.id];BH.call("_storeDirectGUIEdit",i.layout,h._preGUI,r.getViewEdits(v));var m=r.getView();v._input.center=v.center=m.center,v._input.zoom=v.zoom=m.zoom,v._input.bearing=v.bearing=m.bearing,v._input.pitch=v.pitch=m.pitch,i.emit("plotly_relayout",r.getViewEditsWithDerived(m))}f.originalEvent&&f.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),h._rehover&&h._rehover()}}),a.on("wheel",function(){r.wheeling=!0}),a.on("mousemove",function(f){var h=r.div.getBoundingClientRect(),v=[f.originalEvent.offsetX,f.originalEvent.offsetY];f.target.getBoundingClientRect=function(){return h},r.xaxis.p2c=function(){return a.unproject(v).lng},r.yaxis.p2c=function(){return a.unproject(v).lat},i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===r.id&&i._fullLayout[r.id]&&Vb.hover(i,f,r.id)},Vb.hover(i,f,r.id),i._fullLayout._hoversubplot=r.id});function s(){Vb.loneUnhover(t._hoverlayer)}a.on("dragstart",function(){r.dragging=!0,s()}),a.on("zoomstart",s),a.on("mouseout",function(){i._fullLayout._hoversubplot=null});function l(){var f=r.getView();i.emit("plotly_relayouting",r.getViewEditsWithDerived(f))}a.on("drag",l),a.on("zoom",l),a.on("dblclick",function(){var f=i._fullLayout[r.id];BH.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,r.getViewEdits(f));var h=r.viewInitial;a.setCenter(mA(h.center)),a.setZoom(h.zoom),a.setBearing(h.bearing),a.setPitch(h.pitch);var v=r.getView();f._input.center=f.center=v.center,f._input.zoom=f.zoom=v.zoom,f._input.bearing=f.bearing=v.bearing,f._input.pitch=f.pitch=v.pitch,i.emit("plotly_doubleclick",null),i.emit("plotly_relayout",r.getViewEditsWithDerived(v))}),r.clearOutline=function(){mpe(r.dragOptions),ppe(r.dragOptions.gd)},r.onClickInPanFn=function(f){return function(h){var v=i._fullLayout.clickmode;v.indexOf("select")>-1&&ype(h.originalEvent,i,[r.xaxis],[r.yaxis],r.id,f),v.indexOf("event")>-1&&Vb.click(i,h.originalEvent)}}};Un.updateFx=function(e){var t=this,r=t.map,i=t.gd;if(t.isStatic)return;function a(h){var v=t.map.unproject(h);return[v.lng,v.lat]}var s=e.dragmode,l;l=function(h,v){if(v.isRect){var m=h.range={};m[t.id]=[a([v.xmin,v.ymin]),a([v.xmax,v.ymax])]}else{var b=h.lassoPoints={};b[t.id]=v.map(a)}};var f=t.dragOptions;t.dragOptions=pA.extendDeep(f||{},{dragmode:e.dragmode,element:t.div,gd:i,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:l},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),vpe(s)||hpe(s)?(r.dragPan.disable(),r.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(h,v,m){dpe(h,v,m,t.dragOptions,s)},cpe.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};Un.updateFramework=function(e){var t=e[this.id].domain,r=e._size,i=this.div.style;i.width=r.w*(t.x[1]-t.x[0])+"px",i.height=r.h*(t.y[1]-t.y[0])+"px",i.left=r.l+t.x[0]*r.w+"px",i.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};Un.updateLayers=function(e){var t=e[this.id],r=t.layers,i=this.layerList,a;if(r.length!==i.length){for(a=0;a<i.length;a++)i[a].dispose();for(i=this.layerList=[],a=0;a<r.length;a++)i.push(gpe(this,a,r[a]))}else for(a=0;a<r.length;a++)i[a].update(r[a])};Un.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};Un.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};Un.setOptions=function(e,t,r){for(var i in r)this.map[t](e,i,r[i])};Un.getMapLayers=function(){return this.map.getStyle().layers};Un.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var i=this.getMapLayers(),a=0;a<i.length;a++)if(t===i[a].id){r.addLayer(e,t);return}pA.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};Un.project=function(e){return this.map.project(new dA.LngLat(e[0],e[1]))};Un.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,i=t.lat,a={lon:r,lat:i},s=e.getCanvas(),l=parseInt(s.style.width),f=parseInt(s.style.height);return{center:a,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([l,0]).toArray(),e.unproject([l,f]).toArray(),e.unproject([0,f]).toArray()]}}};Un.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],i={},a=0;a<r.length;a++){var s=r[a];i[t+"."+s]=e[s]}return i};Un.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function ZH(e,t){var r={};if(pA.isPlainObject(e))r.id=e.id,r.style=e;else if(typeof e=="string")if(r.id=e,tv.styleValuesMapbox.indexOf(e)!==-1)r.style=UH(e);else if(tv.stylesNonMapbox[e]){r.style=tv.stylesNonMapbox[e];var i=r.style.sources["plotly-"+e],a=i?i.tiles:void 0;a&&a[0]&&a[0].slice(-9)==="?api_key="&&(a[0]+=t._mapboxAccessToken)}else r.style=e;else r.id=tv.styleValueDflt,r.style=UH(tv.styleValueDflt);return r.transition={duration:0,delay:0},r}function UH(e){return tv.styleUrlPrefix+e+"-"+tv.styleUrlSuffix}function mA(e){return[e.lon,e.lat]}YH.exports=GH});var jH=ve((bbe,XH)=>{"use strict";var _pe=Ft(),xpe=Di(),bpe=_b().defaults;XH.exports=function(t,r,i,a){var s=a.type,l=a.attributes,f=a.handleDefaults,h=a.partition||"x",v=r._subplots[s],m=v.length,b=m&&v[0].replace(/\d+$/,""),T,S;function C(q,B){return _pe.coerce(T,S,l,q,B)}for(var P=0;P<m;P++){var E=v[P];t[E]?T=t[E]:T=t[E]={},S=xpe.newContainer(r,E,b),a.noUirevision||C("uirevision",r.uirevision);var I={};I[h]=[P/m,(P+1)/m],bpe(S,r,C,I),a.id=E,f(T,S,C,a)}}});var QH=ve((wbe,KH)=>{"use strict";var yA=Ft(),wpe=jH(),Tpe=Yl(),JH=e1();KH.exports=function(t,r,i){wpe(t,r,i,{type:"mapbox",attributes:JH,handleDefaults:Ape,partition:"y",accessToken:r._mapboxAccessToken})};function Ape(e,t,r,i){r("accesstoken",i.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var a=r("bounds.west"),s=r("bounds.east"),l=r("bounds.south"),f=r("bounds.north");(a===void 0||s===void 0||l===void 0||f===void 0)&&delete t.bounds,Tpe(e,t,{name:"layers",handleItemDefaults:Mpe}),t._input=e}function Mpe(e,t){function r(h,v){return yA.coerce(e,t,JH.layers,h,v)}var i=r("visible");if(i){var a=r("sourcetype"),s=a==="raster"||a==="image";r("source"),r("sourceattribution"),a==="vector"&&r("sourcelayer"),a==="image"&&r("coordinates");var l;s&&(l="raster");var f=r("type",l);s&&f!=="raster"&&(f=t.type="raster",yA.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),f==="circle"&&r("circle.radius"),f==="line"&&(r("line.width"),r("line.dash")),f==="fill"&&r("fill.outlinecolor"),f==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),yA.coerceFont(r,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),r("symbol.textposition"),r("symbol.placement"))}}});var Hb=ve(Ys=>{"use strict";var $H=iA(),ju=Ft(),gA=ju.strTranslate,Spe=ju.strScale,kpe=z_().getSubplotCalcData,Cpe=Dh(),Epe=ja(),eG=_i(),Lpe=co(),Ppe=WH(),rv="mapbox",Vf=Ys.constants=Dc();Ys.name=rv;Ys.attr="subplot";Ys.idRoot=rv;Ys.idRegex=Ys.attrRegex=ju.counterRegex(rv);var Dpe=["mapbox subplots and traces are deprecated!","Please consider switching to `map` subplots and traces.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");Ys.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};Ys.layoutAttributes=e1();Ys.supplyLayoutDefaults=QH();var tG=!0;Ys.plot=function(t){tG&&(tG=!1,ju.warn(Dpe));var r=t._fullLayout,i=t.calcdata,a=r._subplots[rv];if($H.version!==Vf.requiredVersion)throw new Error(Vf.wrongVersionErrorMsg);var s=zpe(t,a);$H.accessToken=s;for(var l=0;l<a.length;l++){var f=a[l],h=kpe(i,rv,f),v=r[f],m=v._subplot;m||(m=new Ppe(t,f),r[f]._subplot=m),m.viewInitial||(m.viewInitial={center:ju.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),m.plot(h,r,t._promises)}};Ys.clean=function(e,t,r,i){for(var a=i._subplots[rv]||[],s=0;s<a.length;s++){var l=a[s];!t[l]&&i[l]._subplot&&i[l]._subplot.destroy()}};Ys.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[rv],i=t._size,a=0;a<r.length;a++){var s=t[r[a]],l=s.domain,f=s._subplot,h=f.toImage("png"),v=t._glimages.append("svg:image");v.attr({xmlns:Cpe.svg,"xlink:href":h,x:i.l+i.w*l.x[0],y:i.t+i.h*(1-l.y[1]),width:i.w*(l.x[1]-l.x[0]),height:i.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"});var m=Epe.select(s._subplot.div),b=m.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!b){var T=t._glimages.append("g");T.attr("transform",gA(i.l+i.w*l.x[0]+10,i.t+i.h*(1-l.y[0])-31)),T.append("path").attr("d",Vf.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),T.append("path").attr("d",Vf.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),T.append("path").attr("d",Vf.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),T.append("polygon").attr("points",Vf.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var S=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=t._glimages.append("g"),P=C.append("text");P.text(S).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":S});var E=eG.bBox(P.node()),I=i.w*(l.x[1]-l.x[0]);if(E.width>I/2){var q=S.split("|").join("<br>");P.text(q).attr("data-unformatted",q).call(Lpe.convertToTspans,e),E=eG.bBox(P.node())}P.attr("transform",gA(-3,-E.height+8)),C.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var B=1;E.width+6>I&&(B=I/(E.width+6));var z=[i.l+i.w*l.x[1],i.t+i.h*(1-l.y[0])];C.attr("transform",gA(z[0],z[1])+Spe(B))}};function zpe(e,t){var r=e._fullLayout,i=e._context;if(i.mapboxAccessToken==="")return"";for(var a=[],s=[],l=!1,f=!1,h=0;h<t.length;h++){var v=r[t[h]],m=v.accesstoken;rG(v.style)&&(m?ju.pushUnique(a,m):(rG(v._input.style)&&(ju.error("Uses Mapbox map style, but did not set an access token."),l=!0),f=!0)),m&&ju.pushUnique(s,m)}if(f){var b=l?Vf.noAccessTokenErrorMsg:Vf.missingStyleErrorMsg;throw ju.error(b),new Error(b)}return a.length?(a.length>1&&ju.warn(Vf.multipleTokensErrorMsg),a[0]):(s.length&&ju.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function rG(e){return typeof e=="string"&&(Vf.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}Ys.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[rv],i=0;i<r.length;i++){var a=t[r[i]]._subplot;a.updateFx(t)}}});var iG=ve((Mbe,aG)=>{"use strict";var Abe=["*scattermapbox* trace is deprecated!","Please consider switching to the *scattermap* trace type and `map` subplots.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");aG.exports={attributes:Mb(),supplyDefaults:qV(),colorbar:B6(),formatLabels:JT(),calc:GV(),plot:rH(),hoverPoints:Pb().hoverPoints,eventData:oH(),selectPoints:lH(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:Hb(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}});var oG=ve((Sbe,nG)=>{"use strict";nG.exports=iG()});var _A=ve((kbe,uG)=>{"use strict";var Ipe=Vl().hovertemplateAttrs,iv=YT(),Rpe=_c(),sG=ms(),Fpe=Tf().defaultLine,av=hn().extendFlat,lG=iv.marker.line;uG.exports=av({locations:{valType:"data_array",editType:"calc"},locationmode:iv.locationmode,z:{valType:"data_array",editType:"calc"},geojson:av({},iv.geojson,{}),featureidkey:iv.featureidkey,text:av({},iv.text,{}),hovertext:av({},iv.hovertext,{}),marker:{line:{color:av({},lG.color,{dflt:Fpe}),width:av({},lG.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:iv.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:iv.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:av({},sG.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:Ipe(),showlegend:av({},sG.showlegend,{dflt:!1})},Rpe("",{cLetter:"z",editTypeOverride:"calc"}))});var xA=ve((Cbe,fG)=>{"use strict";var zc=_A(),qpe=_c(),Npe=Vl().hovertemplateAttrs,Bpe=ms(),nv=hn().extendFlat;fG.exports=nv({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:nv({},zc.featureidkey,{}),below:{valType:"string",editType:"plot"},text:zc.text,hovertext:zc.hovertext,marker:{line:{color:nv({},zc.marker.line.color,{editType:"plot"}),width:nv({},zc.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:nv({},zc.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:nv({},zc.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:nv({},zc.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:zc.hoverinfo,hovertemplate:Npe({},{keys:["properties"]}),showlegend:nv({},Bpe.showlegend,{dflt:!1})},qpe("",{cLetter:"z",editTypeOverride:"calc"}))});var hG=ve((Ebe,cG)=>{"use strict";var o1=Ft(),Ope=cd(),Upe=xA();cG.exports=function(t,r,i,a){function s(m,b){return o1.coerce(t,r,Upe,m,b)}var l=s("locations"),f=s("z"),h=s("geojson");if(!o1.isArrayOrTypedArray(l)||!l.length||!o1.isArrayOrTypedArray(f)||!f.length||!(typeof h=="string"&&h!==""||o1.isPlainObject(h))){r.visible=!1;return}s("featureidkey"),r._length=Math.min(l.length,f.length),s("below"),s("text"),s("hovertext"),s("hovertemplate");var v=s("marker.line.width");v&&s("marker.line.color"),s("marker.opacity"),Ope(t,r,a,s,{prefix:"",cLetter:"z"}),o1.coerceSelectionMarkerOpacity(r,s)}});var bA=ve((Lbe,vG)=>{"use strict";vG.exports={min:"zmin",max:"zmax"}});var yG=ve((Pbe,mG)=>{"use strict";var dG=Da(),Vpe=Hi().BADNUM,Hpe=Oy(),Gpe=Rg(),Zpe=Nx();function pG(e){return e&&typeof e=="string"}mG.exports=function(t,r){var i=r._length,a=new Array(i),s;r.geojson?s=function(m){return pG(m)||dG(m)}:s=pG;for(var l=0;l<i;l++){var f=a[l]={},h=r.locations[l],v=r.z[l];s(h)&&dG(v)?(f.loc=h,f.z=v):(f.loc=null,f.z=Vpe),f.index=l}return Gpe(a,r),Hpe(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),Zpe(a,r),a}});var wA=ve((Dbe,xG)=>{"use strict";var Ype=Da(),Ic=Ft(),Wpe=C0(),Xpe=_i(),jpe=Sb().makeBlank,gG=vA();function Jpe(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},s=t._opts={fill:i,line:a,geojson:jpe()};if(!r)return s;var l=gG.extractTraceFeature(e);if(!l)return s;var f=Wpe.makeColorScaleFuncFromTrace(t),h=t.marker,v=h.line||{},m;Ic.isArrayOrTypedArray(h.opacity)&&(m=function(q){var B=q.mo;return Ype(B)?+Ic.constrain(B,0,1):0});var b;Ic.isArrayOrTypedArray(v.color)&&(b=function(q){return q.mlc});var T;Ic.isArrayOrTypedArray(v.width)&&(T=function(q){return q.mlw});for(var S=0;S<e.length;S++){var C=e[S],P=C.fOut;if(P){var E=P.properties;E.fc=f(C.z),m&&(E.mo=m(C)),b&&(E.mlc=b(C)),T&&(E.mlw=T(C)),C.ct=E.ct,C._polygons=gG.feature2polygons(P)}}var I=m?{type:"identity",property:"mo"}:h.opacity;return Ic.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":I}),Ic.extendFlat(a.paint,{"line-color":b?{type:"identity",property:"mlc"}:v.color,"line-width":T?{type:"identity",property:"mlw"}:v.width,"line-opacity":I}),i.layout.visibility="visible",a.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:l},_G(e),s}function _G(e){var t=e[0].trace,r=t._opts,i;if(t.selectedpoints){for(var a=Xpe.makeSelectedPointStyleFns(t),s=0;s<e.length;s++){var l=e[s];l.fOut&&(l.fOut.properties.mo2=a.selectedOpacityFn(l))}i={type:"identity",property:"mo2"}}else i=Ic.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return Ic.extendFlat(r.fill.paint,{"fill-opacity":i}),Ic.extendFlat(r.line.paint,{"line-opacity":i}),r}xG.exports={convert:Jpe,convertOnSelect:_G}});var MG=ve((zbe,AG)=>{"use strict";var wG=wA().convert,Kpe=wA().convertOnSelect,bG=Dc().traceLayerPrefix;function TG(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",bG+t+"-fill"],["line",bG+t+"-line"]],this.below=null}var _m=TG.prototype;_m.update=function(e){this._update(wG(e)),e[0].trace._glTrace=this};_m.updateOnSelect=function(e){this._update(Kpe(e))};_m._update=function(e){var t=this.subplot,r=this.layerList,i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var a=0;a<r.length;a++){var s=r[a],l=s[0],f=s[1],h=e[l];t.setOptions(f,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&t.setOptions(f,"setPaintProperty",h.paint)}};_m._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,a=this.sourceId,s=0;s<i.length;s++){var l=i[s],f=l[0],h=e[f];r.addLayer({type:f,id:l[1],source:a,layout:h.layout,paint:h.paint},t)}};_m._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};_m.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};AG.exports=function(t,r){var i=r[0].trace,a=new TG(t,i.uid),s=a.sourceId,l=wG(r),f=a.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(s,{type:"geojson",data:l.geojson}),a._addLayers(l,f),r[0].trace._glTrace=a,a}});var kG=ve((Ibe,SG)=>{"use strict";var Qpe=Yi(),$pe=_A(),e0e=Ft().fillText;SG.exports=function(t,r,i){var a=t.cd,s=a[0].trace,l=t.subplot,f,h,v,m,b=[r,i],T=[r+360,i];for(h=0;h<a.length;h++)if(f=a[h],m=!1,f._polygons){for(v=0;v<f._polygons.length;v++)f._polygons[v].contains(b)&&(m=!m),f._polygons[v].contains(T)&&(m=!m);if(m)break}if(!(!m||!f))return t.x0=t.x1=t.xa.c2p(f.ct),t.y0=t.y1=t.ya.c2p(f.ct),t.index=f.index,t.location=f.loc,t.z=f.z,t.zLabel=Qpe.tickText(l.mockAxis,l.mockAxis.c2l(f.z),"hover").text,t.hovertemplate=f.hovertemplate,t0e(t,s,f),[t]};function t0e(e,t,r){if(!t.hovertemplate){var i=r.hi||t.hoverinfo,a=String(r.loc),s=i==="all"?$pe.hoverinfo.flags:i.split("+"),l=s.indexOf("name")!==-1,f=s.indexOf("location")!==-1,h=s.indexOf("z")!==-1,v=s.indexOf("text")!==-1,m=!l&&f,b=[];m?e.nameOverride=a:(l&&(e.nameOverride=t.name),f&&b.push(a)),h&&b.push(e.zLabel),v&&e0e(r,t,b),e.extraText=b.join("<br>")}}});var EG=ve((Rbe,CG)=>{"use strict";CG.exports=function(t,r,i,a,s){t.location=r.location,t.z=r.z;var l=a[s];return l.fIn&&l.fIn.properties&&(t.properties=l.fIn.properties),t.ct=l.ct,t}});var PG=ve((Fbe,LG)=>{"use strict";LG.exports=function(t,r){var i=t.cd,a=t.xaxis,s=t.yaxis,l=[],f,h,v,m,b;if(r===!1)for(f=0;f<i.length;f++)i[f].selected=0;else for(f=0;f<i.length;f++)h=i[f],v=h.ct,v&&(m=a.c2p(v),b=s.c2p(v),r.contains([m,b],null,f,t)?(l.push({pointNumber:f,lon:v[0],lat:v[1]}),h.selected=1):h.selected=0);return l}});var zG=ve((Nbe,DG)=>{"use strict";var qbe=["*choroplethmapbox* trace is deprecated!","Please consider switching to the *choroplethmap* trace type and `map` subplots.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");DG.exports={attributes:xA(),supplyDefaults:hG(),colorbar:bA(),calc:yG(),plot:MG(),hoverPoints:kG(),eventData:EG(),selectPoints:PG(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),i=r.length-2;i>=0;i--){var a=r[i].id;if(typeof a=="string"&&a.indexOf("water")===0){for(var s=i+1;s<r.length;s++)if(a=r[s].id,typeof a=="string"&&a.indexOf("plotly-")===-1)return a}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:Hb(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}});var RG=ve((Bbe,IG)=>{"use strict";IG.exports=zG()});var AA=ve((Obe,qG)=>{"use strict";var r0e=_c(),a0e=Vl().hovertemplateAttrs,FG=ms(),Gb=Mb(),TA=hn().extendFlat;qG.exports=TA({lon:Gb.lon,lat:Gb.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:Gb.text,hovertext:Gb.hovertext,hoverinfo:TA({},FG.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:a0e(),showlegend:TA({},FG.showlegend,{dflt:!1})},r0e("",{cLetter:"z",editTypeOverride:"calc"}))});var BG=ve((Ube,NG)=>{"use strict";var i0e=Ft(),n0e=cd(),o0e=AA();NG.exports=function(t,r,i,a){function s(v,m){return i0e.coerce(t,r,o0e,v,m)}var l=s("lon")||[],f=s("lat")||[],h=Math.min(l.length,f.length);if(!h){r.visible=!1;return}r._length=h,s("z"),s("radius"),s("below"),s("text"),s("hovertext"),s("hovertemplate"),n0e(t,r,a,s,{prefix:"",cLetter:"z"})}});var VG=ve((Vbe,UG)=>{"use strict";var MA=Da(),s0e=Ft().isArrayOrTypedArray,SA=Hi().BADNUM,l0e=Oy(),OG=Ft()._;UG.exports=function(t,r){for(var i=r._length,a=new Array(i),s=r.z,l=s0e(s)&&s.length,f=0;f<i;f++){var h=a[f]={},v=r.lon[f],m=r.lat[f];if(h.lonlat=MA(v)&&MA(m)?[+v,+m]:[SA,SA],l){var b=s[f];h.z=MA(b)?b:SA}}return l0e(t,r,{vals:l?s:[0,1],containerStr:"",cLetter:"z"}),i&&(a[0].t={labels:{lat:OG(t,"lat:")+" ",lon:OG(t,"lon:")+" "}}),a}});var WG=ve((Hbe,YG)=>{"use strict";var u0e=Da(),kA=Ft(),HG=Ua(),GG=C0(),ZG=Hi().BADNUM,f0e=Sb().makeBlank;YG.exports=function(t){var r=t[0].trace,i=r.visible===!0&&r._length!==0,a={layout:{visibility:"none"},paint:{}},s=r._opts={heatmap:a,geojson:f0e()};if(!i)return s;var l=[],f,h=r.z,v=r.radius,m=kA.isArrayOrTypedArray(h)&&h.length,b=kA.isArrayOrTypedArray(v);for(f=0;f<t.length;f++){var T=t[f],S=T.lonlat;if(S[0]!==ZG){var C={};if(m){var P=T.z;C.z=P!==ZG?P:0}b&&(C.r=u0e(v[f])&&v[f]>0?+v[f]:0),l.push({type:"Feature",geometry:{type:"Point",coordinates:S},properties:C})}}var E=GG.extractOpts(r),I=E.reversescale?GG.flipScale(E.colorscale):E.colorscale,q=I[0][1],B=HG.opacity(q)<1?q:HG.addOpacity(q,0),z=["interpolate",["linear"],["heatmap-density"],0,B];for(f=1;f<I.length;f++)z.push(I[f][0],I[f][1]);var O=["interpolate",["linear"],["get","z"],E.min,0,E.max,1];return kA.extendFlat(s.heatmap.paint,{"heatmap-weight":m?O:1/(E.max-E.min),"heatmap-color":z,"heatmap-radius":b?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),s.geojson={type:"FeatureCollection",features:l},s.heatmap.layout.visibility="visible",s}});var KG=ve((Gbe,JG)=>{"use strict";var XG=WG(),c0e=Dc().traceLayerPrefix;function jG(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",c0e+t+"-heatmap"]],this.below=null}var Zb=jG.prototype;Zb.update=function(e){var t=this.subplot,r=this.layerList,i=XG(e),a=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(i,a),this.below=a);for(var s=0;s<r.length;s++){var l=r[s],f=l[0],h=l[1],v=i[f];t.setOptions(h,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&t.setOptions(h,"setPaintProperty",v.paint)}};Zb._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,a=this.sourceId,s=0;s<i.length;s++){var l=i[s],f=l[0],h=e[f];r.addLayer({type:f,id:l[1],source:a,layout:h.layout,paint:h.paint},t)}};Zb._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};Zb.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};JG.exports=function(t,r){var i=r[0].trace,a=new jG(t,i.uid),s=a.sourceId,l=XG(r),f=a.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(s,{type:"geojson",data:l.geojson}),a._addLayers(l,f),a}});var $G=ve((Zbe,QG)=>{"use strict";var h0e=Yi(),v0e=Pb().hoverPoints,d0e=Pb().getExtraText;QG.exports=function(t,r,i){var a=v0e(t,r,i);if(a){var s=a[0],l=s.cd,f=l[0].trace,h=l[s.index];if(delete s.color,"z"in h){var v=s.subplot.mockAxis;s.z=h.z,s.zLabel=h0e.tickText(v,v.c2l(h.z),"hover").text}return s.extraText=d0e(f,h,l[0].t.labels),[s]}}});var tZ=ve((Ybe,eZ)=>{"use strict";eZ.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t}});var aZ=ve((Xbe,rZ)=>{"use strict";var Wbe=["*densitymapbox* trace is deprecated!","Please consider switching to the *densitymap* trace type and `map` subplots.","Learn more at: https://plotly.com/python/maplibre-migration/","as well as https://plotly.com/javascript/maplibre-migration/"].join(" ");rZ.exports={attributes:AA(),supplyDefaults:BG(),colorbar:bA(),formatLabels:JT(),calc:VG(),plot:KG(),hoverPoints:$G(),eventData:tZ(),getBelow:function(e,t){for(var r=t.getMapLayers(),i=0;i<r.length;i++){var a=r[i],s=a.id;if(a.type==="symbol"&&typeof s=="string"&&s.indexOf("plotly-")===-1)return s}},moduleType:"trace",name:"densitymapbox",basePlotModule:Hb(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}});var nZ=ve((jbe,iZ)=>{"use strict";iZ.exports=aZ()});var Uo=ve((Jbe,sZ)=>{"use strict";var oZ=Object.getOwnPropertySymbols,p0e=Object.prototype.hasOwnProperty,m0e=Object.prototype.propertyIsEnumerable;function y0e(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function g0e(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(s){a[s]=s}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}sZ.exports=g0e()?Object.assign:function(e,t){for(var r,i=y0e(e),a,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var l in r)p0e.call(r,l)&&(i[l]=r[l]);if(oZ){a=oZ(r);for(var f=0;f<a.length;f++)m0e.call(r,a[f])&&(i[a[f]]=r[a[f]])}}return i}});var Vo=ve((Kbe,uZ)=>{var Wb=Uo();function lZ(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}Wb(lZ.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,i,a){return i=(e!=null&&e.year?e.calendar():typeof i=="string"?this.instance(i,a):i)||this.instance(),i.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var i="",a=0;r>0;){var s=r%10;i=(s===0?"":e[s]+t[a])+i,a++,r=Math.floor(r/10)}return i.indexOf(e[1]+t[1])===0&&(i=i.substr(1)),i||e[0]}}});function CA(e,t,r,i){if(this._calendar=e,this._year=t,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function Yb(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}Wb(CA.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(Ca.local.differentCalendars||Ca.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+Yb(Math.abs(this.year()),4)+"-"+Yb(this.month(),2)+"-"+Yb(this.day(),2)}});function EA(){this.shortYearCutoff="+10"}Wb(EA.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new CA(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,Ca.local.invalidYear||Ca.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Ca.local.invalidYear||Ca.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+Yb(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Ca.local.invalidYear||Ca.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,Ca.local.invalidMonth||Ca.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,Ca.local.invalidMonth||Ca.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Ca.local.invalidYear||Ca.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var i=this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var i=e.toJD()+t*(r==="w"?this.daysInWeek():1),a=e.calendar().fromJD(i);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var s=e.year()+(r==="y"?t:0),l=e.monthOfYear()+(r==="m"?t:0),a=e.day(),f=function(m){for(;l<m.minMonth;)s--,l+=m.monthsInYear(s);for(var b=m.monthsInYear(s);l>b-1+m.minMonth;)s++,l-=b,b=m.monthsInYear(s)};r==="y"?(e.month()!==this.fromMonthOfYear(s,l)&&(l=this.newDate(s,e.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(s)),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,l)))):r==="m"&&(f(this),a=Math.min(a,this.daysInMonth(s,this.fromMonthOfYear(s,l))));var h=[s,this.fromMonthOfYear(s,l),a];return this._validateLevel--,h}catch(v){throw this._validateLevel--,v}},_correctAdd:function(e,t,r,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],s=r<0?-1:1;t=this._add(e,r*a[0]+s*a[1],a[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate);var i=r==="y"?t:e.year(),a=r==="m"?t:e.month(),s=r==="d"?t:e.day();return(r==="y"||r==="m")&&(s=Math.min(s,this.daysInMonth(i,a))),e.date(i,a,s)},isValid:function(e,t,r){this._validateLevel++;var i=this.hasYearZero||e!==0;if(i){var a=this.newDate(e,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,i},toJSDate:function(e,t,r){var i=this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate);return Ca.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(e){return this.fromJD(Ca.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,i){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(Ca.local.differentCalendars||Ca.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw i.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,r);return this._validateLevel--,a}catch(s){throw this._validateLevel--,s}}});function LA(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}LA.prototype=new EA;Wb(LA.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,Ca.local.invalidYear||Ca.regionalOptions[""].invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===0&&(r%100!==0||r%400===0)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Ca.local.invalidMonth||Ca.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate);e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<3&&(t+=12,e--);var a=Math.floor(e/100),s=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+s-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var i=r+1524,a=Math.floor((i-122.1)/365.25),s=Math.floor(365.25*a),l=Math.floor((i-s)/30.6001),f=i-s-Math.floor(l*30.6001),h=l-(l>13.5?13:1),v=a-(h>2.5?4716:4715);return v<=0&&v--,this.newDate(v,h,f)},toJSDate:function(e,t,r){var i=this._validate(e,t,r,Ca.local.invalidDate||Ca.regionalOptions[""].invalidDate),a=new Date(i.year(),i.month()-1,i.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var Ca=uZ.exports=new lZ;Ca.cdate=CA;Ca.baseCalendar=EA;Ca.calendars.gregorian=LA});var fZ=ve(()=>{var PA=Uo(),po=Vo();PA(po.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});po.local=po.regionalOptions[""];PA(po.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});PA(po.baseCalendar.prototype,{UNIX_EPOCH:po.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:po.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw po.local.invalidFormat||po.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var i=r.dayNamesShort||this.local.dayNamesShort,a=r.dayNames||this.local.dayNames,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,f=r.monthNames||this.local.monthNames,h=r.calculateWeek||this.local.calculateWeek,v=function(z,O){for(var H=1;B+H<e.length&&e.charAt(B+H)===z;)H++;return B+=H-1,Math.floor(H/(O||1))>1},m=function(z,O,H,V){var W=""+O;if(v(z,V))for(;W.length<H;)W="0"+W;return W},b=function(z,O,H,V){return v(z)?V[O]:H[O]},T=this,S=function(z){return typeof s=="function"?s.call(T,z,v("m")):E(m("m",z.month(),2))},C=function(z,O){return O?typeof f=="function"?f.call(T,z):f[z.month()-T.minMonth]:typeof l=="function"?l.call(T,z):l[z.month()-T.minMonth]},P=this.local.digits,E=function(z){return r.localNumbers&&P?P(z):z},I="",q=!1,B=0;B<e.length;B++)if(q)e.charAt(B)==="'"&&!v("'")?q=!1:I+=e.charAt(B);else switch(e.charAt(B)){case"d":I+=E(m("d",t.day(),2));break;case"D":I+=b("D",t.dayOfWeek(),i,a);break;case"o":I+=m("o",t.dayOfYear(),3);break;case"w":I+=m("w",t.weekOfYear(),2);break;case"m":I+=S(t);break;case"M":I+=C(t,v("M"));break;case"y":I+=v("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":v("Y",2),I+=t.formatYear();break;case"J":I+=t.toJD();break;case"@":I+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":I+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":v("'")?I+="'":q=!0;break;default:I+=e.charAt(B)}return I},parseDate:function(e,t,r){if(t==null)throw po.local.invalidArguments||po.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var i=r.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var a=r.dayNamesShort||this.local.dayNamesShort,s=r.dayNames||this.local.dayNames,l=r.parseMonth||this.local.parseMonth,f=r.monthNumbers||this.local.monthNumbers,h=r.monthNamesShort||this.local.monthNamesShort,v=r.monthNames||this.local.monthNames,m=-1,b=-1,T=-1,S=-1,C=-1,P=!1,E=!1,I=function(ne,he){for(var de=1;K+de<e.length&&e.charAt(K+de)===ne;)de++;return K+=de-1,Math.floor(de/(he||1))>1},q=function(ne,he){var de=I(ne,he),Ee=[2,3,de?4:2,de?4:2,10,11,20]["oyYJ@!".indexOf(ne)+1],ke=new RegExp("^-?\\d{1,"+Ee+"}"),Te=t.substring(W).match(ke);if(!Te)throw(po.local.missingNumberAt||po.regionalOptions[""].missingNumberAt).replace(/\{0\}/,W);return W+=Te[0].length,parseInt(Te[0],10)},B=this,z=function(){if(typeof f=="function"){I("m");var ne=f.call(B,t.substring(W));return W+=ne.length,ne}return q("m")},O=function(ne,he,de,Ee){for(var ke=I(ne,Ee)?de:he,Te=0;Te<ke.length;Te++)if(t.substr(W,ke[Te].length).toLowerCase()===ke[Te].toLowerCase())return W+=ke[Te].length,Te+B.minMonth;throw(po.local.unknownNameAt||po.regionalOptions[""].unknownNameAt).replace(/\{0\}/,W)},H=function(){if(typeof v=="function"){var ne=I("M")?v.call(B,t.substring(W)):h.call(B,t.substring(W));return W+=ne.length,ne}return O("M",h,v)},V=function(){if(t.charAt(W)!==e.charAt(K))throw(po.local.unexpectedLiteralAt||po.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,W);W++},W=0,K=0;K<e.length;K++)if(E)e.charAt(K)==="'"&&!I("'")?E=!1:V();else switch(e.charAt(K)){case"d":S=q("d");break;case"D":O("D",a,s);break;case"o":C=q("o");break;case"w":q("w");break;case"m":T=z();break;case"M":T=H();break;case"y":var re=K;P=!I("y",2),K=re,b=q("y",2);break;case"Y":b=q("Y",2);break;case"J":m=q("J")+.5,t.charAt(W)==="."&&(W++,q("J"));break;case"@":m=q("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":m=q("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":W=t.length;break;case"'":I("'")?V():E=!0;break;default:V()}if(W<t.length)throw po.local.unexpectedText||po.regionalOptions[""].unexpectedText;if(b===-1?b=this.today().year():b<100&&P&&(b+=i===-1?1900:this.today().year()-this.today().year()%100-(b<=i?0:100)),typeof T=="string"&&(T=l.call(this,b,T)),C>-1){T=1,S=C;for(var oe=this.daysInMonth(b,T);S>oe;oe=this.daysInMonth(b,T))T++,S-=oe}return m>-1?this.fromJD(m):this.newDate(b,T,S)},determineDate:function(e,t,r,i,a){r&&typeof r!="object"&&(a=i,i=r,r=null),typeof i!="string"&&(a=i,i="");var s=this,l=function(f){try{return s.parseDate(i,f,a)}catch(b){}f=f.toLowerCase();for(var h=(f.match(/^c/)&&r?r.newDate():null)||s.today(),v=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,m=v.exec(f);m;)h.add(parseInt(m[1],10),m[2]||"d"),m=v.exec(f);return h};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?l(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e),e}})});var cZ=ve(()=>{var ov=Vo(),_0e=Uo(),DA=ov.instance();function Xb(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}Xb.prototype=new ov.baseCalendar;_0e(Xb.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(b0e);return r?r[0]:""}var i=this._validateYear(e),a=e.month(),s=""+this.toChineseMonth(i,a);return t&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(i,a)&&(s+="i"),s},monthNames:function(e){if(typeof e=="string"){var t=e.match(w0e);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),a=this.toChineseMonth(r,i),s=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][a-1];return this.isIntercalaryMonth(r,i)&&(s="\u95F0"+s),s},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(T0e);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),a=this.toChineseMonth(r,i),s=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][a-1];return this.isIntercalaryMonth(r,i)&&(s="\u95F0"+s),s},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),i;if(isNaN(r))t[0]==="\u95F0"&&(i=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var a=t[t.length-1];i=a==="i"||a==="I"}var s=this.toMonthIndex(e,r,i);return s},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var i=this.intercalaryMonth(e),a=r&&t!==i;if(a||t<1||t>12)throw ov.local.invalidMonth.replace(/\{0\}/,this.local.name);var s;return i?!r&&t<=i?s=t-1:s=t:s=t-1,s},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),i=r?12:11;if(t<0||t>i)throw ov.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return r?t<r?a=t+1:a=t:a=t+1,a},intercalaryMonth:function(e){e=this._validateYear(e);var t=sv[e-sv[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var i=this._validateYear(e,ov.local.invalidyear),a=lv[i-lv[0]],s=a>>9&4095,l=a>>5&15,f=a&31,h;h=DA.newDate(s,l,f),h.add(4-(h.dayOfWeek()||7),"d");var v=this.toJD(e,t,r)-h.toJD();return 1+Math.floor(v/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=sv[e-sv[0]],i=r>>13,a=i?12:11;if(t>a)throw ov.local.invalidMonth.replace(/\{0\}/,this.local.name);var s=r&1<<12-t?30:29;return s},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,s,r,ov.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),r=i.day();var a=this.isIntercalaryMonth(e,t),s=this.toChineseMonth(e,t),l=M0e(e,s,r,a);return DA.toJD(l.year,l.month,l.day)},fromJD:function(e){var t=DA.fromJD(e),r=A0e(t.year(),t.month(),t.day()),i=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,i,r.day)},fromString:function(e){var t=e.match(x0e),r=this._validateYear(+t[1]),i=+t[2],a=!!t[3],s=this.toMonthIndex(r,i,a),l=+t[4];return this.newDate(r,s,l)},add:function(e,t,r){var i=e.year(),a=e.month(),s=this.isIntercalaryMonth(i,a),l=this.toChineseMonth(i,a),f=Object.getPrototypeOf(Xb.prototype).add.call(this,e,t,r);if(r==="y"){var h=f.year(),v=f.month(),m=this.isIntercalaryMonth(h,l),b=s&&m?this.toMonthIndex(h,l,!0):this.toMonthIndex(h,l,!1);b!==v&&f.month(b)}return f}});var x0e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,b0e=/^\d?\d[iI]?/m,w0e=/^闰?十?[一二三四五六七八九]?月/m,T0e=/^闰?十?[一二三四五六七八九]?/m;ov.calendars.chinese=Xb;var sv=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],lv=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function A0e(e,t,r,i){var a,s;if(typeof e=="object")a=e,s=t||{};else{var l=typeof e=="number"&&e>=1888&&e<=2111;if(!l)throw new Error("Solar year outside range 1888-2111");var f=typeof t=="number"&&t>=1&&t<=12;if(!f)throw new Error("Solar month outside range 1 - 12");var h=typeof r=="number"&&r>=1&&r<=31;if(!h)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:r},s=i||{}}var v=lv[a.year-lv[0]],m=a.year<<9|a.month<<5|a.day;s.year=m>=v?a.year:a.year-1,v=lv[s.year-lv[0]];var b=v>>9&4095,T=v>>5&15,S=v&31,C,P=new Date(b,T-1,S),E=new Date(a.year,a.month-1,a.day);C=Math.round((E-P)/(24*3600*1e3));var I=sv[s.year-sv[0]],q;for(q=0;q<13;q++){var B=I&1<<12-q?30:29;if(C<B)break;C-=B}var z=I>>13;return!z||q<z?(s.isIntercalary=!1,s.month=1+q):q===z?(s.isIntercalary=!0,s.month=q):(s.isIntercalary=!1,s.month=q),s.day=1+C,s}function M0e(e,t,r,i,a){var s,l;if(typeof e=="object")l=e,s=t||{};else{var f=typeof e=="number"&&e>=1888&&e<=2111;if(!f)throw new Error("Lunar year outside range 1888-2111");var h=typeof t=="number"&&t>=1&&t<=12;if(!h)throw new Error("Lunar month outside range 1 - 12");var v=typeof r=="number"&&r>=1&&r<=30;if(!v)throw new Error("Lunar day outside range 1 - 30");var m;typeof i=="object"?(m=!1,s=i):(m=!!i,s=a||{}),l={year:e,month:t,day:r,isIntercalary:m}}var b;b=l.day-1;var T=sv[l.year-sv[0]],S=T>>13,C;S&&(l.month>S||l.isIntercalary)?C=l.month:C=l.month-1;for(var P=0;P<C;P++){var E=T&1<<12-P?30:29;b+=E}var I=lv[l.year-lv[0]],q=I>>9&4095,B=I>>5&15,z=I&31,O=new Date(q,B-1,z+b);return s.year=O.getFullYear(),s.month=1+O.getMonth(),s.day=O.getDate(),s}});var hZ=ve(()=>{var Hd=Vo(),S0e=Uo();function zA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}zA.prototype=new Hd.baseCalendar;S0e(zA.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,Hd.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Hd.local.invalidYear||Hd.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Hd.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,Hd.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,a=t-(i-1)*30+1;return this.newDate(r,i,a)}});Hd.calendars.coptic=zA});var vZ=ve(()=>{var Rc=Vo(),k0e=Uo();function IA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}IA.prototype=new Rc.baseCalendar;k0e(IA.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Rc.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Rc.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Rc.local.invalidYear),400},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Rc.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Rc.local.invalidDate);return(i.day()+1)%8},weekDay:function(e,t,r){var i=this.dayOfWeek(e,t,r);return i>=2&&i<=6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Rc.local.invalidDate);return{century:C0e[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,r){var i=this._validate(e,t,r,Rc.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),r=i.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,i=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,i)}});var C0e={20:"Fruitbat",21:"Anchovy"};Rc.calendars.discworld=IA});var dZ=ve(()=>{var Gd=Vo(),E0e=Uo();function RA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}RA.prototype=new Gd.baseCalendar;E0e(RA.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,Gd.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Gd.local.invalidYear||Gd.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Gd.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,Gd.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,a=t-(i-1)*30+1;return this.newDate(r,i,a)}});Gd.calendars.ethiopian=RA});var pZ=ve(()=>{var uv=Vo(),L0e=Uo();function FA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}FA.prototype=new uv.baseCalendar;L0e(FA.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,uv.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,jb(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,uv.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,uv.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,uv.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&jb(this.daysInYear(e),10)===5?30:t===9&&jb(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,uv.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,r){var i=this._validate(e,t,r,uv.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=e<=0?e+1:e,s=this.jdEpoch+this._delay1(a)+this._delay2(a)+r+1;if(t<7){for(var l=7;l<=this.monthsInYear(e);l++)s+=this.daysInMonth(e,l);for(var l=1;l<t;l++)s+=this.daysInMonth(e,l)}else for(var l=7;l<t;l++)s+=this.daysInMonth(e,l);return s},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,i=t*29+Math.floor(r/25920);return jb(3*(i+1),7)<3&&i++,i},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),i=this._delay1(e+1);return i-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});function jb(e,t){return e-t*Math.floor(e/t)}uv.calendars.hebrew=FA});var mZ=ve(()=>{var s1=Vo(),P0e=Uo();function qA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}qA.prototype=new s1.baseCalendar;P0e(qA.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s1.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,s1.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,s1.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});s1.calendars.islamic=qA});var yZ=ve(()=>{var l1=Vo(),D0e=Uo();function NA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}NA.prototype=new l1.baseCalendar;D0e(NA.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,l1.local.invalidYear),r=t.year()<0?t.year()+1:t.year();return r%4===0},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,l1.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,l1.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,i=Math.floor((r-122.1)/365.25),a=Math.floor(365.25*i),s=Math.floor((r-a)/30.6001),l=s-Math.floor(s<14?1:13),f=i-Math.floor(l>2?4716:4715),h=r-a-Math.floor(30.6001*s);return f<=0&&f--,this.newDate(f,l,h)}});l1.calendars.julian=NA});var _Z=ve(()=>{var fu=Vo(),z0e=Uo();function OA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}OA.prototype=new fu.baseCalendar;z0e(OA.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,fu.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,fu.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var i=Math.floor(e/20);return r+"."+i+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r],10);if(Math.abs(i)>19||r>0&&i<0)throw"Invalid Mayan year";t=t*20+i}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,fu.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,fu.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,fu.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,fu.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,fu.local.invalidDate);return i.day()},weekDay:function(e,t,r){return this._validate(e,t,r,fu.local.invalidDate),!0},extraInfo:function(e,t,r){var i=this._validate(e,t,r,fu.local.invalidDate),a=i.toJD(),s=this._toHaab(a),l=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=BA(e+8+17*20,365);return[Math.floor(t/20)+1,BA(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[gZ(e+20,20),gZ(e+4,13)]},toJD:function(e,t,r){var i=this._validate(e,t,r,fu.local.invalidDate);return i.day()+i.month()*20+i.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),i=e%20;return this.newDate(t,r,i)}});function BA(e,t){return e-t*Math.floor(e/t)}function gZ(e,t){return BA(e-1,t)+1}fu.calendars.mayan=OA});var bZ=ve(()=>{var Zd=Vo(),I0e=Uo();function UA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}UA.prototype=new Zd.baseCalendar;var xZ=Zd.instance("gregorian");I0e(UA.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Zd.local.invalidYear||Zd.regionalOptions[""].invalidYear);return xZ.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Zd.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,Zd.local.invalidMonth),a=i.year();a<0&&a++;for(var s=i.day(),l=1;l<i.month();l++)s+=this.daysPerMonth[l-1];return s+xZ.toJD(a+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,i=1;r>this.daysInMonth(t,i);)r-=this.daysInMonth(t,i),i++;return this.newDate(t,i,r)}});Zd.calendars.nanakshahi=UA});var wZ=ve(()=>{var Yd=Vo(),R0e=Uo();function VA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}VA.prototype=new Yd.baseCalendar;R0e(VA.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Yd.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,i=this.minMonth;i<=12;i++)r+=this.NEPALI_CALENDAR_DATA[e][i];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,Yd.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var i=this._validate(e,t,r,Yd.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=Yd.instance(),s=0,l=t,f=e;this._createMissingCalendarData(e);var h=e-(l>9||l===9&&r>=this.NEPALI_CALENDAR_DATA[f][0]?56:57);for(t!==9&&(s=r,l--);l!==9;)l<=0&&(l=12,f--),s+=this.NEPALI_CALENDAR_DATA[f][l],l--;return t===9?(s+=r-this.NEPALI_CALENDAR_DATA[f][0],s<0&&(s+=a.daysInYear(h))):s+=this.NEPALI_CALENDAR_DATA[f][9]-this.NEPALI_CALENDAR_DATA[f][0],a.newDate(h,1,1).add(s,"d").toJD()},fromJD:function(e){var t=Yd.instance(),r=t.fromJD(e),i=r.year(),a=r.dayOfYear(),s=i+56;this._createMissingCalendarData(s);for(var l=9,f=this.NEPALI_CALENDAR_DATA[s][0],h=this.NEPALI_CALENDAR_DATA[s][l]-f+1;a>h;)l++,l>12&&(l=1,s++),h+=this.NEPALI_CALENDAR_DATA[s][l];var v=this.NEPALI_CALENDAR_DATA[s][l]-(h-a);return this.newDate(s,l,v)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});Yd.calendars.nepali=VA});var TZ=ve(()=>{var xm=Vo(),F0e=Uo();function Jb(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}Jb.prototype=new xm.baseCalendar;F0e(Jb.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xm.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,xm.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,xm.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var a=e-(e>=0?474:473),s=474+HA(a,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((s*682-110)/2816)+(s-1)*365+Math.floor(a/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),r=Math.floor(t/1029983),i=HA(t,1029983),a=2820;if(i!==1029982){var s=Math.floor(i/366),l=HA(i,366);a=Math.floor((2134*s+2816*l+2815)/1028522)+s+1}var f=a+2820*r+474;f=f<=0?f-1:f;var h=e-this.toJD(f,1,1)+1,v=h<=186?Math.ceil(h/31):Math.ceil((h-6)/30),m=e-this.toJD(f,v,1)+1;return this.newDate(f,v,m)}});function HA(e,t){return e-t*Math.floor(e/t)}xm.calendars.persian=Jb;xm.calendars.jalali=Jb});var AZ=ve(()=>{var Wd=Vo(),q0e=Uo(),Kb=Wd.instance();function GA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}GA.prototype=new Wd.baseCalendar;q0e(GA.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,Wd.local.invalidYear),r=this._t2gYear(t.year());return Kb.leapYear(r)},weekOfYear:function(a,t,r){var i=this._validate(a,this.minMonth,this.minDay,Wd.local.invalidYear),a=this._t2gYear(i.year());return Kb.weekOfYear(a,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Wd.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,Wd.local.invalidDate),a=this._t2gYear(i.year());return Kb.toJD(a,i.month(),i.day())},fromJD:function(e){var t=Kb.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});Wd.calendars.taiwan=GA});var MZ=ve(()=>{var Xd=Vo(),N0e=Uo(),Qb=Xd.instance();function ZA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}ZA.prototype=new Xd.baseCalendar;N0e(ZA.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,Xd.local.invalidYear),r=this._t2gYear(t.year());return Qb.leapYear(r)},weekOfYear:function(a,t,r){var i=this._validate(a,this.minMonth,this.minDay,Xd.local.invalidYear),a=this._t2gYear(i.year());return Qb.weekOfYear(a,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Xd.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(a,t,r){var i=this._validate(a,t,r,Xd.local.invalidDate),a=this._t2gYear(i.year());return Qb.toJD(a,i.month(),i.day())},fromJD:function(e){var t=Qb.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});Xd.calendars.thai=ZA});var SZ=ve(()=>{var jd=Vo(),B0e=Uo();function YA(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}YA.prototype=new jd.baseCalendar;B0e(YA.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,jd.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,jd.local.invalidMonth),i=r.toJD()-24e5+.5,a=0,s=0;s<fv.length;s++){if(fv[s]>i)return fv[a]-fv[a-1];a++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,jd.local.invalidDate),a=12*(i.year()-1)+i.month()-15292,s=i.day()+fv[a-1]-1;return s+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,i=0;i<fv.length&&!(fv[i]>t);i++)r++;var a=r+15292,s=Math.floor((a-1)/12),l=s+1,f=a-12*s,h=t-fv[r-1]+1;return this.newDate(l,f,h)},isValid:function(e,t,r){var i=jd.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(e=e.year!=null?e.year:e,i=e>=1276&&e<=1500),i},_validate:function(e,t,r,i){var a=jd.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500)throw i.replace(/\{0\}/,this.local.name);return a}});jd.calendars.ummalqura=YA;var fv=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]});var CZ=ve((C3e,kZ)=>{"use strict";kZ.exports=Vo();fZ();cZ();hZ();vZ();dZ();pZ();mZ();yZ();_Z();bZ();wZ();TZ();AZ();MZ();SZ()});var RZ=ve((E3e,IZ)=>{"use strict";var LZ=CZ(),u1=Ft(),PZ=Hi(),O0e=PZ.EPOCHJD,U0e=PZ.ONEDAY,jA={valType:"enumerated",values:u1.sortObjectKeys(LZ.calendars),editType:"calc",dflt:"gregorian"},DZ=function(e,t,r,i){var a={};return a[r]=jA,u1.coerce(e,t,a,r,i)},V0e=function(e,t,r,i){for(var a=0;a<r.length;a++)DZ(e,t,r[a]+"calendar",i.calendar)},H0e={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},G0e={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},Z0e={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},$b="##",Y0e={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:$b,w:$b,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function W0e(e,t,r){for(var i=Math.floor((t+.05)/U0e)+O0e,a=zZ(r).fromJD(i),s=0,l,f,h,v,m;(s=e.indexOf("%",s))!==-1;)l=e.charAt(s+1),l==="0"||l==="-"||l==="_"?(h=3,f=e.charAt(s+2),l==="_"&&(l="-")):(f=l,l="0",h=2),v=Y0e[f],v?(v===$b?m=$b:m=a.formatDate(v[l]),e=e.substr(0,s)+m+e.substr(s+h),s+=m.length):s+=h;return e}var EZ={};function zZ(e){var t=EZ[e];return t||(t=EZ[e]=LZ.instance(e),t)}function f1(e){return u1.extendFlat({},jA,{description:e})}function JA(e){return"Sets the calendar system to use with `"+e+"` date data."}var XA={xcalendar:f1(JA("x"))},Hf=u1.extendFlat({},XA,{ycalendar:f1(JA("y"))}),WA=u1.extendFlat({},Hf,{zcalendar:f1(JA("z"))}),bm=f1(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));IZ.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Hf,bar:Hf,box:Hf,heatmap:Hf,contour:Hf,histogram:Hf,histogram2d:Hf,histogram2dcontour:Hf,scatter3d:WA,surface:WA,mesh3d:WA,scattergl:Hf,ohlc:XA,candlestick:XA},layout:{calendar:f1(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:bm},yaxis:{calendar:bm},scene:{xaxis:{calendar:bm},yaxis:{calendar:bm},zaxis:{calendar:bm}},polar:{radialaxis:{calendar:bm}}}},layoutAttributes:jA,handleDefaults:DZ,handleTraceDefaults:V0e,CANONICAL_SUNDAY:G0e,CANONICAL_TICK:H0e,DFLTRANGE:Z0e,getCal:zZ,worldCalFmt:W0e}});var qZ=ve((L3e,FZ)=>{"use strict";FZ.exports=RZ()});var X0e=ve((P3e,BZ)=>{var NZ=mV();NZ.register([oG(),RG(),nZ(),qZ()]);BZ.exports=NZ});return X0e();})();
/*! Bundled license information:

native-promise-only/lib/npo.src.js:
  (*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  *)

polybooljs/index.js:
  (*
   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
   * @license MIT
   * @preserve Project Home: https://github.com/voidqk/polybooljs
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/

window.Plotly = Plotly;
return Plotly;
}));